<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:13:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HBASE-27170] ByteBuffAllocator leak when decompressing blocks near minSizeForReservoirUse</title>
                <link>https://issues.apache.org/jira/browse/HBASE-27170</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Recently I started testing out BucketCache on some of our new hbase2 clusters. When BucketCache is enabled, it causes all disk reads to use ByteBuffAllocator in an attempt to avoid heap allocations. Without BucketCache enabled, even with ByteBuffAllocator enabled it will not be used for disk reads.&lt;/p&gt;

&lt;p&gt;At first this was amazing, we had close to 0% heap allocations which drastically reduces CPU and GC time. Over time I noticed that the ByteBuffAllocator pool filled up, and at that point all allocations come from the heap and our heap allocation % goes to 100%.&lt;/p&gt;

&lt;p&gt;We were using default max buffer count, which was 4096 for a smaller host and 7680 for a larger one. At first I figured we just needed more buffers, so I upped it to 120k. It took longer, but still eventually exhausts the pool.&lt;/p&gt;

&lt;p&gt;This does not cause an OOM, because I made sure to allocate enough direct memory for max buffer count * buffer size (65k). It just causes the usedBufCount to exceed maxBufCount, resulting in 100% heap allocations going forward. It never recovers from this state until the server is restarted.&lt;/p&gt;

&lt;p&gt;Some early observations:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Running a major compaction causes a drastic up-tick in used buffers. Major compacting a 1.5GB region could easily expand the usedBufCount by ~10,000. Most of those are never recovered. I could keep compacting the same region over and over, each time increasing the usedBufCount by 5000-15000, until max is reached.&lt;/li&gt;
	&lt;li&gt;Despite usedBufCount increasing, direct memory usage largely does not increase. This indicates to me that the DirectByteBuffers are being reclaimed by GC, but the Recycler is not being called.
	&lt;ul&gt;
		&lt;li&gt;This was confirmed with a heap dump, which showed really no obvious leak in the typical sense. There were very very few DirectByteBuffers with capacity 66560.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Enabling BucketCache triggers use of ByteBuffAllocator, but I don&apos;t think it&apos;s related to the actual problem. First of all, compactions skip the cache so that would be odd. Secondly, I disabled hbase.block.data.cacheonread and all other CacheConfig, so the BucketCache is going unused (0 bytes used) and the problem still persists.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Digging deeper, I instrumented ByteBuffAllocator in two ways:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;I added some trace loggings in getBuffer() and&#160;putbackBuffer() so I could see the number of allocations, returns, pool size at the time, and a stacktrace.&lt;/li&gt;
	&lt;li&gt;I added netty&apos;s ResourceLeakDetector to the RefCnt class we use in ByteBuffAllocator. Calling track() on creation of a RefCnt, record() in RefCnt.retain(), and close() in RefCnt.deallocate().&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The ResourceLeakDetector immediately picked up leaks on start of the regionserver. I saw leaks coming from both user requests and, as expected, the Compactor.&#160;&lt;/p&gt;

&lt;p&gt;I collected 21 unique LEAK stacktraces, which is too many to list. But all of them had 2 common roots, so below I post a full stacktrace for 2 examples of those roots:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Created at:        
org.apache.hadoop.hbase.nio.RefCnt.&amp;lt;init&amp;gt;(RefCnt.java:58)        
org.apache.hadoop.hbase.nio.RefCnt.create(RefCnt.java:53)        
org.apache.hadoop.hbase.nio.ByteBuff.wrap(ByteBuff.java:597)        
org.apache.hadoop.hbase.io.ByteBuffAllocator.allocate(ByteBuffAllocator.java:350)        
org.apache.hadoop.hbase.io.hfile.HFileBlock.allocateBuffer(HFileBlock.java:671)        
org.apache.hadoop.hbase.io.hfile.HFileBlock.unpack(HFileBlock.java:640)        
org.apache.hadoop.hbase.io.hfile.HFileReaderImpl.readBlock(HFileReaderImpl.java:1340)        org.apache.hadoop.hbase.io.hfile.HFileBlockIndex$CellBasedKeyBlockIndexReader.loadDataBlockWithScanInfo(HFileBlockIndex.java:331)        org.apache.hadoop.hbase.io.hfile.HFileReaderImpl$HFileScannerImpl.seekTo(HFileReaderImpl.java:679)        org.apache.hadoop.hbase.io.hfile.HFileReaderImpl$HFileScannerImpl.seekTo(HFileReaderImpl.java:631)        org.apache.hadoop.hbase.regionserver.StoreFileScanner.seekAtOrAfter(StoreFileScanner.java:315)        org.apache.hadoop.hbase.regionserver.StoreFileScanner.seek(StoreFileScanner.java:216)        
org.apache.hadoop.hbase.regionserver.StoreScanner.seekScanners(StoreScanner.java:417)        
org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:257)        
org.apache.hadoop.hbase.regionserver.HStore.createScanner(HStore.java:2152)        
org.apache.hadoop.hbase.regionserver.HStore.getScanner(HStore.java:2142)        
org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.initializeScanners(HRegion.java:7211)        
org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.&amp;lt;init&amp;gt;(HRegion.java:7191)        
org.apache.hadoop.hbase.regionserver.HRegion.instantiateRegionScanner(HRegion.java:3160)        
org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:3140)        
org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:3122)        
org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:3116)        
org.apache.hadoop.hbase.regionserver.RSRpcServices.get(RSRpcServices.java:2657)        org.apache.hadoop.hbase.regionserver.RSRpcServices.doNonAtomicRegionMutation(RSRpcServices.java:807)        org.apache.hadoop.hbase.regionserver.RSRpcServices.multi(RSRpcServices.java:2898)        org.apache.hadoop.hbase.shaded.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:45961)        org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:392)        
org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:134)        
org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:358)        
org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:338) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Created at:        
org.apache.hadoop.hbase.nio.RefCnt.&amp;lt;init&amp;gt;(RefCnt.java:58)        
org.apache.hadoop.hbase.nio.RefCnt.create(RefCnt.java:53)        
org.apache.hadoop.hbase.nio.ByteBuff.wrap(ByteBuff.java:597)        
org.apache.hadoop.hbase.io.ByteBuffAllocator.allocate(ByteBuffAllocator.java:350)        
org.apache.hadoop.hbase.io.hfile.HFileBlock.allocateBuffer(HFileBlock.java:671)        
org.apache.hadoop.hbase.io.hfile.HFileBlock.unpack(HFileBlock.java:640)        
org.apache.hadoop.hbase.io.hfile.HFileReaderImpl.readBlock(HFileReaderImpl.java:1340)        org.apache.hadoop.hbase.io.hfile.HFileReaderImpl$HFileScannerImpl.readAndUpdateNewBlock(HFileReaderImpl.java:968)        org.apache.hadoop.hbase.io.hfile.HFileReaderImpl$HFileScannerImpl.seekTo(HFileReaderImpl.java:957)        org.apache.hadoop.hbase.regionserver.StoreFileScanner.seekAtOrAfter(StoreFileScanner.java:322)        org.apache.hadoop.hbase.regionserver.StoreFileScanner.seek(StoreFileScanner.java:216)        
org.apache.hadoop.hbase.regionserver.StoreScanner.seekScanners(StoreScanner.java:417)        
org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:324)        
org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:290)        
org.apache.hadoop.hbase.regionserver.compactions.Compactor.createScanner(Compactor.java:513)        org.apache.hadoop.hbase.regionserver.compactions.Compactor$1.createScanner(Compactor.java:254)        org.apache.hadoop.hbase.regionserver.compactions.Compactor.compact(Compactor.java:333)        org.apache.hadoop.hbase.regionserver.compactions.DefaultCompactor.compact(DefaultCompactor.java:65)        org.apache.hadoop.hbase.regionserver.DefaultStoreEngine$DefaultCompactionContext.compact(DefaultStoreEngine.java:126)        org.apache.hadoop.hbase.regionserver.HStore.compact(HStore.java:1510)        
org.apache.hadoop.hbase.regionserver.HRegion.compact(HRegion.java:2390)        org.apache.hadoop.hbase.regionserver.CompactSplit$CompactionRunner.doCompaction(CompactSplit.java:617)        org.apache.hadoop.hbase.regionserver.CompactSplit$CompactionRunner.run(CompactSplit.java:659)        java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)        java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)        
java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;My trace logging gave some insight as well:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It showed very similar stacktraces to above for the allocations&lt;/li&gt;
	&lt;li&gt;It also confirmed that we are indeed returning many buffers to the pool, coming from calls to Shipper.shipped() in Compactor and ServerCall.setResponse for user requests.&lt;/li&gt;
	&lt;li&gt;However, the count allocations vs returns further validated the leak. We might have 150k allocations but only 140k returns (as an example).&lt;/li&gt;
	&lt;li&gt;Similarly, the pool size (buffers.size()) was always less than 1000, sometimes close to 0. Once the usedBufCount &amp;gt; maxBufCount, the pool size shrinks to 0 and stays at 0 forever.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Things I&apos;ve tried:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I&apos;ve been pouring over the stacktraces, trying to see how we might leak. Certainly we do some extra allocations when unpacking compressed blocks, but it seems like we always release one. I also tried picking through from bottom to top, trying to trace that we&apos;re closing everything and it seems like we are. This code is complicated though so I easily could have missed something.&lt;/li&gt;
	&lt;li&gt;I tried setting COMPRESSION =&amp;gt; NONE and compacting a region in that table, it still caused a massive expansion/leak of buffers.&lt;/li&gt;
	&lt;li&gt;We don&apos;t fully use cell block encoding, and I wondered if there were some assumptions about that in regards to when the blocks are released in ServerCall. I enabled cell block encoding for all clients of a cluster and the leak still occurred. It&apos;s worth noting our client is version 1.2, which doesn&apos;t support cell block encoding for plain Gets. So we aren&apos;t fully enabled, but I read through the ServerCall code and it seems like we don&apos;t make assumptions.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve tried digging into the stacktraces above and haven&apos;t yet found an obvious leak. I tried turning setting COMPRESSION =&amp;gt; NONE, but compacting a region in that table still causes a massive leak.&lt;/p&gt;</description>
                <environment>&lt;p&gt;2.4.6 with backported patches (can list if desired). Running with temurinjdk11.0.12+7&lt;/p&gt;</environment>
        <key id="13469509">HBASE-27170</key>
            <summary>ByteBuffAllocator leak when decompressing blocks near minSizeForReservoirUse</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bbeaudreault">Bryan Beaudreault</assignee>
                                    <reporter username="bbeaudreault">Bryan Beaudreault</reporter>
                        <labels>
                            <label>patch-available</label>
                    </labels>
                <created>Thu, 30 Jun 2022 17:41:11 +0000</created>
                <updated>Wed, 6 Jul 2022 13:33:21 +0000</updated>
                            <resolved>Mon, 4 Jul 2022 20:50:43 +0000</resolved>
                                    <version>3.0.0-alpha-3</version>
                    <version>2.4.12</version>
                                    <fixVersion>2.5.0</fixVersion>
                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.4.14</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17561140" author="bbeaudreault" created="Thu, 30 Jun 2022 18:10:33 +0000"  >&lt;p&gt;I realized both of those example stacktraces hit HFileBlock.unpack. This is not universally true. Here&apos;s another example stacktrace that doesnt:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Created at:        
org.apache.hadoop.hbase.nio.RefCnt.&amp;lt;init&amp;gt;(RefCnt.java:58)        
org.apache.hadoop.hbase.nio.RefCnt.create(RefCnt.java:53)        
org.apache.hadoop.hbase.nio.ByteBuff.wrap(ByteBuff.java:597)        
org.apache.hadoop.hbase.io.ByteBuffAllocator.allocate(ByteBuffAllocator.java:350)        
org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderImpl.allocate(HFileBlock.java:1673)        org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderImpl.readBlockDataInternal(HFileBlock.java:1735)        org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderImpl.readBlockData(HFileBlock.java:1550)        org.apache.hadoop.hbase.io.hfile.HFileReaderImpl.readBlock(HFileReaderImpl.java:1337)        org.apache.hadoop.hbase.io.hfile.HFileReaderImpl$HFileScannerImpl.readNextDataBlock(HFileReaderImpl.java:761)        org.apache.hadoop.hbase.io.hfile.HFileReaderImpl$EncodedScanner.next(HFileReaderImpl.java:1512)        org.apache.hadoop.hbase.regionserver.StoreFileScanner.next(StoreFileScanner.java:196)        
org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:122)        
org.apache.hadoop.hbase.regionserver.StoreScanner.trySkipToNextColumn(StoreScanner.java:908)        org.apache.hadoop.hbase.regionserver.StoreScanner.seekOrSkipToNextColumn(StoreScanner.java:819)        
org.apache.hadoop.hbase.regionserver.StoreScanner.next(StoreScanner.java:727)        
org.apache.hadoop.hbase.regionserver.compactions.Compactor.performCompaction(Compactor.java:413)        org.apache.hadoop.hbase.regionserver.compactions.Compactor.compact(Compactor.java:341)        org.apache.hadoop.hbase.regionserver.compactions.DefaultCompactor.compact(DefaultCompactor.java:65)        org.apache.hadoop.hbase.regionserver.DefaultStoreEngine$DefaultCompactionContext.compact(DefaultStoreEngine.java:126)        org.apache.hadoop.hbase.regionserver.HStore.compact(HStore.java:1510)        
org.apache.hadoop.hbase.regionserver.HRegion.compact(HRegion.java:2390)        
org.apache.hadoop.hbase.regionserver.CompactSplit$CompactionRunner.doCompaction(CompactSplit.java:617)        org.apache.hadoop.hbase.regionserver.CompactSplit$CompactionRunner.run(CompactSplit.java:659)        java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)        java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)        
java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ll note that all 21 leaks I detected do land in HFileReaderImpl.readBlock, either on line 1337 or 1340. It varies which one.&lt;/p&gt;</comment>
                            <comment id="17561160" author="bbeaudreault" created="Thu, 30 Jun 2022 19:38:05 +0000"  >&lt;p&gt;If anyone wants the raw data, here are the 20 leaks (21 before was a typo) that i&apos;ve detected: &lt;a href=&quot;https://gist.github.com/bbeaudreault/8a37203a1e322d0631579afd6062dd59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/bbeaudreault/8a37203a1e322d0631579afd6062dd59&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve broken down the 20 traces into 6 common groupings. All groupings end in pretty much the same area of HFileReaderImpl.readBlock. It seems clear that somewhere we are reading a block and then losing track of it in either StoreFileScanner, StoreScanner, or HFileReader.&lt;/p&gt;

&lt;p&gt;All paths go through StoreScanner at the highest level, and while it&apos;s possible we&apos;re forgetting to close a StoreScanner somewhere, it seems less likely just given how many unique paths to StoreScanner there are. My hope is that we can focus the investigation in the common areas of the 6 common groupings, looking for a codepath that all 6 hit that maybe loses track of a block. Also very open to other opinions on how to approach it though.&lt;/p&gt;</comment>
                            <comment id="17561171" author="bbeaudreault" created="Thu, 30 Jun 2022 20:23:12 +0000"  >&lt;p&gt;I hadn&apos;t noticed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-26533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-26533&lt;/a&gt; and while it didn&apos;t look related, it did mention a leak. I tried backporting to my company&apos;s fork, and that did not fix it.&lt;/p&gt;</comment>
                            <comment id="17561552" author="bbeaudreault" created="Fri, 1 Jul 2022 17:03:59 +0000"  >&lt;p&gt;Ok I&apos;ve figured this out. I ended up adding an implementation for &lt;tt&gt;RefCnt.touch()&lt;/tt&gt; and the same in all of our other classes which extend HBaseReferenceCounted. I then instrumenting pretty much everywhere an HFileBlock shows up, trying to trace where we might have missed releasing. The RefCnt leak protection is extremely handy, and I wonder if we should add it to RefCnt for real since the performance overhead is low by default and it&apos;s already used in the netty layer.&lt;/p&gt;

&lt;p&gt;In the end, the problem was right at the root &#8211; in HFileBlock.unpack(). The issue occurs when reading a compressed block which is smaller but close to the size of ByteBuffAllocator&apos;s minSizeForReservoirUse.:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;We will pass intoHeap = false to fsBlockReader.readBlockData, because the block is DATA or ENCODED_DATA. As such we will use ByteBuffAllocator.&lt;/li&gt;
	&lt;li&gt;However, the block size is less than minSizeForReservoirUse, so ByteBuffAllocator will allocate an on-heap buffer (hasArray() == true)&lt;/li&gt;
	&lt;li&gt;The hasArray() value will determine whether to return an ExclusiveMemHFileBlock or SharedMemHFileBlock, in this case ExclusiveMemHFileBlock.&lt;/li&gt;
	&lt;li&gt;In HFileBlock.unpack, we will shallowClone the block, which will result in a new ExclusiveMemHFileBlock and pass along the same ByteBuffAllocator used before.&lt;/li&gt;
	&lt;li&gt;Next we call allocateBuffer, which will use the uncompressed size of the block. This new block size will be larger than minSizeForReservoirUse, so will be allocated off-heap&lt;/li&gt;
	&lt;li&gt;We&apos;ll call release() on the original block, which is a no-op because it was an ExclusiveMemHFileBlock&lt;/li&gt;
	&lt;li&gt;We&apos;ll return the unpacked block all the way up to our HFileReaderImpl/StoreFileScanner/etc&lt;/li&gt;
	&lt;li&gt;All of those upper level classes seem to properly close resources, either when the scanner is closed or when shipped() is called.&lt;/li&gt;
	&lt;li&gt;Unfortunately since it&apos;s an ExclusiveMemHFileBlock (which overloads release() to be a no-op), but backed by a DirectByteBuffer, that buffer will never properly be released back to the pool. Instead it will be GC&apos;d, resulting in the leak.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve fixed this leak by modifying allocateBuffer() and shallowClone() to account for the case where the type of HFileBlock needs to change. I&apos;ll be working on cleaning this up and looking into tests to submit a PR in the near future.&lt;/p&gt;</comment>
                            <comment id="17561582" author="apurtell" created="Fri, 1 Jul 2022 18:43:33 +0000"  >&lt;p&gt;This is stellar work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bbeaudreault&quot; class=&quot;user-hover&quot; rel=&quot;bbeaudreault&quot;&gt;bbeaudreault&lt;/a&gt; .  If I can make a request, can we also include the instrumentation improvements you made to track down the cause? We can commit the fix and the instrumentation separately if you prefer.  &lt;/p&gt;

&lt;p&gt;I think you have covered this already:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The RefCnt leak protection is extremely handy, and I wonder if we should add it to RefCnt for real since the performance overhead is low by default and it&apos;s already used in the netty layer.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Enthusiastic +1 from me&lt;/p&gt;</comment>
                            <comment id="17561606" author="bbeaudreault" created="Fri, 1 Jul 2022 20:01:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;apurtell&lt;/a&gt;. I just submitted &lt;a href=&quot;https://github.com/apache/hbase/pull/4592,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hbase/pull/4592,&lt;/a&gt; and I included the basic support for ResourceLeakDetector. As mentioned in the PR, I don&apos;t have a ton of time right now to do performance testing of that addition. I could wrap it in a special &lt;tt&gt;hbase.server.allocator.leakDetection.enabled&lt;/tt&gt; config, at the cost of a few extra factory methods in ByteBuff.java and RefCnt.java. I&apos;d be happy to do that if desired, but wasn&apos;t sure if it was overkill. Otherwise if we want anything more thorough we might want to defer it to a separate issue.&lt;/p&gt;</comment>
                            <comment id="17561611" author="apurtell" created="Fri, 1 Jul 2022 20:36:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;As mentioned in the PR, I don&apos;t have a ton of time right now to do performance testing of that addition. I could wrap it in a special hbase.server.allocator.leakDetection.enabled config, at the cost of a few extra factory methods in ByteBuff.java and RefCnt.java. I&apos;d be happy to do that if desired,&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, please. No more than that is required. This is what netty does afaik. People will be familiar with the idea.&lt;/p&gt;</comment>
                            <comment id="17561658" author="vjasani" created="Sat, 2 Jul 2022 03:11:35 +0000"  >&lt;p&gt;This is excellent work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bbeaudreault&quot; class=&quot;user-hover&quot; rel=&quot;bbeaudreault&quot;&gt;bbeaudreault&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I collected 21 unique LEAK stacktraces, which is too many to list. But all of them had 2 common roots, so below I post a full stacktrace for 2 examples of those roots:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;One question here: all these 21 unique leak stacktraces come only when BucketCache is used? Or do we see some of them even without BucketCache. Just curious if any of the leaks are common with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-26708&quot; title=&quot;Netty &amp;quot;leak detected&amp;quot; and OutOfDirectMemoryError due to direct memory buffering with SASL implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-26708&quot;&gt;&lt;del&gt;HBASE-26708&lt;/del&gt;&lt;/a&gt; (which would likely happen only if you have SASL enabled setup)?&lt;/p&gt;

&lt;p&gt;Oh my bad, missed your comment on that Jira, that this is separate leak that you encountered.&lt;/p&gt;</comment>
                            <comment id="17561748" author="bbeaudreault" created="Sat, 2 Jul 2022 12:58:01 +0000"  >&lt;p&gt;Yea, unfortunately I doubt this is the same issue you are seeing with SASL. But I don&apos;t know for sure. We don&apos;t use SASL so I can&apos;t really help in verifying, but we could see if we can still reproduce the SASL leak once this fix lands. You could also take inspiration from my ResourceLeakDetector changes here, maybe there are other ways to utilize that to track down the SASL issue.&lt;/p&gt;

&lt;p&gt;&amp;gt; all these 21 unique leak stacktraces come only when BucketCache is used&lt;/p&gt;

&lt;p&gt;It&apos;s less about the BucketCache. More about the reading of hfile blocks to off-heap pool, which only happens (as far as I know) if you have BucketCache enabled.&lt;/p&gt;</comment>
                            <comment id="17561796" author="vjasani" created="Sat, 2 Jul 2022 21:45:47 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17562285" author="bbeaudreault" created="Mon, 4 Jul 2022 20:50:43 +0000"  >&lt;p&gt;Pushed to master and branch-2*. Thanks for the reviews, all!&lt;/p&gt;</comment>
                            <comment id="17562819" author="hudson" created="Tue, 5 Jul 2022 19:31:01 +0000"  >&lt;p&gt;Results for branch master&lt;br/&gt;
	&lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/master/626/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build #626 on builds.a.o&lt;/a&gt;: &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;details (if available):&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 general checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/master/626/General_20Nightly_20Build_20Report/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see general report&lt;/a&gt;&lt;/p&gt;






&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 jdk8 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/master/626/JDK8_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk8 (hadoop3) report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;red&quot;&gt;-1 jdk11 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/master/626/JDK11_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk11 report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 source release artifact&lt;/font&gt;&lt;br/&gt;
&amp;#8211; See build output for details.&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 client integration test&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17562823" author="hudson" created="Tue, 5 Jul 2022 19:42:56 +0000"  >&lt;p&gt;Results for branch branch-2.5&lt;br/&gt;
	&lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.5/157/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build #157 on builds.a.o&lt;/a&gt;: &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;details (if available):&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 general checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.5/157/General_20Nightly_20Build_20Report/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see general report&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 jdk8 hadoop2 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.5/157/JDK8_20Nightly_20Build_20Report_20_28Hadoop2_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk8 (hadoop2) report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 jdk8 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.5/157/JDK8_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk8 (hadoop3) report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 jdk11 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.5/157/JDK11_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk11 report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 source release artifact&lt;/font&gt;&lt;br/&gt;
&amp;#8211; See build output for details.&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 client integration test&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17562956" author="hudson" created="Wed, 6 Jul 2022 05:41:43 +0000"  >&lt;p&gt;Results for branch branch-2.4&lt;br/&gt;
	&lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.4/383/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build #383 on builds.a.o&lt;/a&gt;: &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;details (if available):&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 general checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.4/383/General_20Nightly_20Build_20Report/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see general report&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;red&quot;&gt;-1 jdk8 hadoop2 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.4/383/JDK8_20Nightly_20Build_20Report_20_28Hadoop2_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk8 (hadoop2) report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;red&quot;&gt;-1 jdk8 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.4/383/JDK8_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk8 (hadoop3) report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 jdk11 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2.4/383/JDK11_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk11 report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 source release artifact&lt;/font&gt;&lt;br/&gt;
&amp;#8211; See build output for details.&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 client integration test&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17563167" author="hudson" created="Wed, 6 Jul 2022 11:41:37 +0000"  >&lt;p&gt;Results for branch branch-2&lt;br/&gt;
	&lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2/584/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build #584 on builds.a.o&lt;/a&gt;: &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;details (if available):&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 general checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2/584/General_20Nightly_20Build_20Report/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see general report&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;red&quot;&gt;-1 jdk8 hadoop2 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2/584/JDK8_20Nightly_20Build_20Report_20_28Hadoop2_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk8 (hadoop2) report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 jdk8 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2/584/JDK8_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk8 (hadoop3) report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 jdk11 hadoop3 checks&lt;/font&gt;&lt;br/&gt;
&amp;#8211; For more information &lt;a href=&quot;https://ci-hbase.apache.org/job/HBase%20Nightly/job/branch-2/584/JDK11_20Nightly_20Build_20Report_20_28Hadoop3_29/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;see jdk11 report&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 source release artifact&lt;/font&gt;&lt;br/&gt;
&amp;#8211; See build output for details.&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;font color=&quot;green&quot;&gt;+1 client integration test&lt;/font&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13448885">HBASE-27097</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13469701">HBASE-27173</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13424759">HBASE-26708</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16ie8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>