<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:53:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-2747] Reply incorrectly handles read() returning -1</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2747</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If java/client/org/apache/derby/client/net/Reply.java encounters a EOF, i.e. reads -1 then it adds this value to the number of bytes read and prints an error message which reads &quot;-1 bytes read&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12370758">DERBY-2747</key>
            <summary>Reply incorrectly handles read() returning -1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kurti">Kurt Huwig</assignee>
                                    <reporter username="kurti">Kurt Huwig</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Jun 2007 19:36:20 +0000</created>
                <updated>Fri, 21 Jan 2011 17:50:19 +0000</updated>
                            <resolved>Tue, 29 Jul 2008 16:59:49 +0000</resolved>
                                    <version>10.2.2.0</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12500964" author="kurti" created="Sat, 2 Jun 2007 19:39:19 +0000"  >&lt;p&gt;This patch probably fixes the problem - I am unable to test it. I wrote it in a way that should be robust against future changes like adding &quot;continue&quot; to the loop.&lt;/p&gt;</comment>
                            <comment id="12504026" author="kmarsden" created="Tue, 12 Jun 2007 22:25:04 +0000"  >&lt;p&gt;Kurt I am having a bit of trouble applying your patch. I get an error that Reply.java.orig does not exist.&lt;br/&gt;
Did you generate the patch with svn diff?&lt;/p&gt;

&lt;p&gt;Looking at the patch without applying, I have the following nits:&lt;/p&gt;

&lt;p&gt;I prefer if (actualBytesRead &amp;gt; 0) rather than  if (0 &amp;lt; actualBytesRead).&lt;/p&gt;

&lt;p&gt;It would be good to include the jira issue number //&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2747&quot; title=&quot;Reply incorrectly handles read() returning -1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2747&quot;&gt;&lt;del&gt;DERBY-2747&lt;/del&gt;&lt;/a&gt; and a brief comment about the change with the changed code.&lt;/p&gt;</comment>
                            <comment id="12504212" author="kurti" created="Wed, 13 Jun 2007 12:24:51 +0000"  >&lt;p&gt;svn diff would have been too easy...I made it the old hard way by manually diffing. The new patch was my by svn diff.&lt;/p&gt;

&lt;p&gt;I made the change to the if - we code it the other way round as it is faster to understand. In this example is makes not much difference, but think of a 3-liner with &apos;!= null&apos; at the end.&lt;/p&gt;

&lt;p&gt;I added a brief comment describing the reason for the &apos;if&apos; and the Jira issue.&lt;/p&gt;</comment>
                            <comment id="12504855" author="kmarsden" created="Thu, 14 Jun 2007 17:42:49 +0000"  >&lt;p&gt;Thanks Kurt. The patch looks good.  I have a couple more questions before I commit.&lt;br/&gt;
1) Did you run tests?&lt;br/&gt;
2) Have you filed an ICLA?  It is probabably not needed for this small patch, but definitely a good idea for all contributors. See &lt;a href=&quot;http://wiki.apache.org/db-derby/DerbyContributorChecklist&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/db-derby/DerbyContributorChecklist&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12504895" author="kurti" created="Thu, 14 Jun 2007 20:10:50 +0000"  >&lt;p&gt;1) no, I cannot get the testing working. I guess it is due to having JDK 1.6 here:&lt;/p&gt;

&lt;p&gt;compile:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 45 source files to /home/kurt/Projekte/Derby/10.2/classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /home/kurt/Projekte/Derby/10.2/java/testing/org/apache/derbyTesting/junit/BaseJDBCTestCase.java:412: cannot access java.lang.AssertionError&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; class file for java.lang.AssertionError not found&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         try {&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         ^&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
/home/kurt/Projekte/Derby/10.2/build.xml:368: The following error occurred while executing this line:&lt;br/&gt;
/home/kurt/Projekte/Derby/10.2/java/testing/build.xml:61: The following error occurred while executing this line:&lt;br/&gt;
/home/kurt/Projekte/Derby/10.2/java/testing/org/apache/derbyTesting/functionTests/util/build.xml:57: Compile failed; see the compiler error output for details.&lt;/p&gt;


&lt;p&gt;2) I&apos;d love to, but I currently do not have access to a fax machine. I did not expect to deserve this honor, but I hope to be able to contribute more patches&lt;/p&gt;</comment>
                            <comment id="12516469" author="kmarsden" created="Mon, 30 Jul 2007 18:34:07 +0000"  >&lt;p&gt;Kurt said &lt;br/&gt;
&amp;gt;1) no, I cannot get the testing working. &lt;br/&gt;
Double check your ant.properties that j13lib and, j14lib are set to valid locations.&lt;/p&gt;

&lt;p&gt;&amp;gt;2) I&apos;d love to, but I currently do not have access to a fax machine.&lt;br/&gt;
You can send it snail mail. There is an address on the form.&lt;/p&gt;
</comment>
                            <comment id="12611307" author="kmarsden" created="Mon, 7 Jul 2008 19:43:52 +0000"  >&lt;p&gt;This looks like it is still an issue. Patch just needs testing and commit. I don&apos;t think we need an ICLA for this.&lt;/p&gt;</comment>
                            <comment id="12611312" author="kurti" created="Mon, 7 Jul 2008 19:55:24 +0000"  >&lt;p&gt;I just signed the ICLA and will fax it tomorrow.&lt;/p&gt;</comment>
                            <comment id="12617543" author="kmarsden" created="Mon, 28 Jul 2008 21:00:48 +0000"  >&lt;p&gt;I want to finally commit this change but I was wondering Kurt if you know how to invoke the message that has the wrong number of bytes.  It would be good to check in a test case along with the change.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12617706" author="kurti" created="Tue, 29 Jul 2008 05:55:19 +0000"  >&lt;p&gt;Kathey,&lt;/p&gt;

&lt;p&gt;the EOF happens when a client closes the connection while talking to a Derby network server. To reproduce it, you&apos;d have to write a custom Derby network client, that closes a connection in the middle of a conversation. For me it happened when the Derby server was heavily overloaded and clients were stopped.&lt;/p&gt;</comment>
                            <comment id="12617863" author="kmarsden" created="Tue, 29 Jul 2008 16:59:49 +0000"  >&lt;p&gt;Thanks Kurt for the patch. Sorry it took so long to get committed.&lt;br/&gt;
Committed revision 680767.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12358760" name="patch-2747-1.diff" size="617" author="kurti" created="Sat, 2 Jun 2007 19:39:19 +0000"/>
                            <attachment id="12359595" name="patch-2747-2.diff" size="768" author="kurti" created="Wed, 13 Jun 2007 12:24:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23216</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10422"><![CDATA[High Value Fix]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06rs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37435</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>