<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:25:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-1605] test harness evaluates j9 2.2 jvm (a.k.a wctme5.7) as isJDBC4; does enthousiastic sed-ing</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1605</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The wctme5.7 run shows failures like so:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: iepnegativetests jdk1.3.1 subset - 2.2 derbyall:derbytools 2006-07-24 11:41:43 ***&lt;br/&gt;
16 del&lt;br/&gt;
&amp;lt; ERROR 38000: The exception &apos;java.sql.SQLException: Table/View &apos;IEP.NOTABLE&apos; does not exist.&apos; was thrown while evaluating an expression.&lt;br/&gt;
16a16&lt;br/&gt;
&amp;gt; ERROR 38000: The exception &apos;SQL Exception: Table/View &apos;IEP.NOTABLE&apos; does not exist.&apos; was thrown while evaluating an expression.&lt;br/&gt;
...&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It seems to me this is because it evaluates the major/minor version (2.2) as isJDBC4 in functionTests/harness/RunTest.java :&lt;br/&gt;
       JavaVersionHolder	jvh = getProperties(sp);&lt;br/&gt;
	boolean				isJDBC4 = jvh.atLeast( 1, 6 );&lt;br/&gt;
and is gets passed on to Sed.java.&lt;/p&gt;

&lt;p&gt;The following tests fail with this jvm because of this:&lt;br/&gt;
lang/compressTable.sql&lt;br/&gt;
lang/nestedCommit.sql&lt;br/&gt;
lang/releaseCompileLocks.sql&lt;br/&gt;
tools/iepnegativetests.sql&lt;br/&gt;
tools/importExportThruIJ.sql&lt;br/&gt;
tools/ieptests.sql&lt;br/&gt;
jdbcapi/statementJdbc20.java&lt;br/&gt;
i18n/iepnegativetests_ES.sql&lt;br/&gt;
store/streamingColumn.java&lt;br/&gt;
store/TransactionTable.sql&lt;br/&gt;
lang/procedureInTrigger.sql&lt;/p&gt;

&lt;p&gt;It seems to me we need an  if (!jvmName.startsWith(&quot;j9&quot;)) or some such around the isJDBC4 assignment.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12346835">DERBY-1605</key>
            <summary>test harness evaluates j9 2.2 jvm (a.k.a wctme5.7) as isJDBC4; does enthousiastic sed-ing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jul 2006 10:28:21 +0000</created>
                <updated>Tue, 30 Jun 2009 15:55:55 +0000</updated>
                            <resolved>Mon, 31 Jul 2006 18:32:25 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12424099" author="myrna" created="Fri, 28 Jul 2006 14:27:27 +0000"  >&lt;p&gt;Attaching a patch for this issue - &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1605&quot; title=&quot;test harness evaluates j9 2.2 jvm (a.k.a wctme5.7) as isJDBC4; does enthousiastic sed-ing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1605&quot;&gt;&lt;del&gt;DERBY-1605&lt;/del&gt;&lt;/a&gt;_20060728.diff - which makes isJDBC4 false forever for j9 jvms.&lt;/p&gt;</comment>
                            <comment id="12424129" author="fuzzylogic" created="Fri, 28 Jul 2006 16:39:58 +0000"  >&lt;p&gt;Another possible solution would be to compare against the value of the system property java.specification.version. The major/minor of the JVM isn&apos;t very reliable, since that could theoretically be any number.&lt;/p&gt;</comment>
                            <comment id="12424153" author="myrna" created="Fri, 28 Jul 2006 19:25:22 +0000"  >&lt;p&gt;Attaching a second patch - &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1605&quot; title=&quot;test harness evaluates j9 2.2 jvm (a.k.a wctme5.7) as isJDBC4; does enthousiastic sed-ing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1605&quot;&gt;&lt;del&gt;DERBY-1605&lt;/del&gt;&lt;/a&gt;_20060728_2.diff - that modifies RunTest to set isJDBC4 depending on the java.specification.version rather than the java.vm.version as per suggestion from Andrew.&lt;/p&gt;

&lt;p&gt;I did &lt;b&gt;not&lt;/b&gt; run derbyall, but I ran the apparently affected tests with wctme5.7 &amp;amp; jdk16 with and without my patch and they behave the same for jdk16 but show the desired improvement with wctme5.7 with my patch.&lt;/p&gt;</comment>
                            <comment id="12424596" author="fuzzylogic" created="Mon, 31 Jul 2006 18:32:25 +0000"  >&lt;p&gt;Committed to trunk with revision 427193.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12337726" name="DERBY-1605_102_20060728_2.diff" size="1488" author="myrna" created="Fri, 28 Jul 2006 19:25:22 +0000"/>
                            <attachment id="12337708" name="DERBY_1605_102_20060728.diff" size="698" author="myrna" created="Fri, 28 Jul 2006 14:27:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22593</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07067:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>