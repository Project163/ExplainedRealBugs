<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:50:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6865] RestrictiveFilePermissionsTest fails on Windows</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6865</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;.F.F.F.F.F.F.F.F.F.F.F.F.F..
Time: 48,93
There were 13 failures:
1) testBackupRestoreFiles(org.apache.derbyTesting.functionTests.tests.engine.RestrictiveFilePermissionsTest)junit.framework.AssertionFailedError: unexpected uid \OPPRETTER EIER can access file C:\cygwin64\tmp\derbytst\system\RFPT_backup
	at org.apache.derbyTesting.functionTests.tests.engine.RestrictiveFilePermissionsTest$2.run(RestrictiveFilePermissionsTest.java:758)
	at org.apache.derbyTesting.functionTests.tests.engine.RestrictiveFilePermissionsTest$2.run(RestrictiveFilePermissionsTest.java:597)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.derbyTesting.functionTests.tests.engine.RestrictiveFilePermissionsTest.checkAccessToOwner(RestrictiveFilePermissionsTest.java:597)
	at org.apache.derbyTesting.functionTests.tests.engine.RestrictiveFilePermissionsTest.checkAccessToOwner(RestrictiveFilePermissionsTest.java:582)
	at org.apache.derbyTesting.functionTests.tests.engine.RestrictiveFilePermissionsTest.testBackupRestoreFiles(RestrictiveFilePermissionsTest.java:372)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:120)
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:443)
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:460)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:23)
	at junit.extensions.TestSetup.run(TestSetup.java:27)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:23)
	at junit.extensions.TestSetup.run(TestSetup.java:27)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:58)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:23)
	at junit.extensions.TestSetup.run(TestSetup.java:27)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:23)
	at junit.extensions.TestSetup.run(TestSetup.java:27)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Windows 10&lt;br/&gt;
JDK 8u71&lt;br/&gt;
Derby trunk revision 1728459</environment>
        <key id="12936847">DERBY-6865</key>
            <summary>RestrictiveFilePermissionsTest fails on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2016 20:07:54 +0000</created>
                <updated>Mon, 7 Nov 2016 09:08:12 +0000</updated>
                            <resolved>Mon, 7 Nov 2016 09:07:19 +0000</resolved>
                                    <version>10.13.1.0</version>
                                    <fixVersion>10.13.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15134025" author="knutanders" created="Fri, 5 Feb 2016 11:22:22 +0000"  >&lt;p&gt;git bisect says:&lt;/p&gt;

&lt;p&gt;579dc9f4698f42e153325223d93f2c81ef3dbd72 is the first bad commit&lt;br/&gt;
commit 579dc9f4698f42e153325223d93f2c81ef3dbd72&lt;br/&gt;
Author: Richard N. Hillegas &amp;lt;rhillegas@apache.org&amp;gt;&lt;br/&gt;
Date:   Sun Jan 24 14:43:28 2016 +0000&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6857&quot; title=&quot;Deprecate support for building Derby under JDKs 6 and 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6857&quot;&gt;&lt;del&gt;DERBY-6857&lt;/del&gt;&lt;/a&gt;: Remove support for java 6 and 7; compile Derby completely into java 8 byte code; commit derby-6857-01-aa-remove6and7.diff.&lt;/p&gt;

&lt;p&gt;    git-svn-id: &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk@1726495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk@1726495&lt;/a&gt; 13f79535-47bb-0310-9956-ffa450edef68&lt;/p&gt;

&lt;p&gt;:100644 100644 f13561041f7e02e7ff36e4336c9febab623a9f97 ba6e9d8f2f3f26bfa6fe2c1d7072861adc2a963f M      BUILDING.html&lt;br/&gt;
:100644 100644 e32ceb937321ab55b2cd2aae60f960aebe3ca0b1 2e429aa2888ae72ed89fd0f98263d5def7c07aaa M  build.xml&lt;br/&gt;
:040000 040000 d13f6159759e4bbf550d8067a5aaf044aa4dcd7d 967a3bdd7cc59ba36f29c695a3e7d12c764d958a M  java&lt;/p&gt;</comment>
                            <comment id="15134194" author="jira-bot" created="Fri, 5 Feb 2016 13:49:05 +0000"  >&lt;p&gt;Commit 1728667 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;knutanders&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1728667&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1728667&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6865&quot; title=&quot;RestrictiveFilePermissionsTest fails on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6865&quot;&gt;&lt;del&gt;DERBY-6865&lt;/del&gt;&lt;/a&gt;: RestrictiveFilePermissionsTest fails on Windows&lt;/p&gt;

&lt;p&gt;Remove use of reflection in the test. Reflection was used to access&lt;br/&gt;
functionality only available on Java 7 and higher. Since Java 8 is&lt;br/&gt;
the minimum level now, reflection is no longer needed.&lt;/p&gt;

&lt;p&gt;This doesn&apos;t fix the test failure, but it makes it easier to debug&lt;br/&gt;
the test.&lt;/p&gt;</comment>
                            <comment id="15134226" author="knutanders" created="Fri, 5 Feb 2016 14:10:53 +0000"  >&lt;p&gt;The problem seems to be that the FilePermissionServiceImpl class is not included in derby.jar anymore. It is only included if the vmLevelIsAtLeast1.7 property is true, but that property is not set anymore.&lt;/p&gt;</comment>
                            <comment id="15134310" author="jira-bot" created="Fri, 5 Feb 2016 15:19:57 +0000"  >&lt;p&gt;Commit 1728681 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;knutanders&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1728681&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1728681&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6865&quot; title=&quot;RestrictiveFilePermissionsTest fails on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6865&quot;&gt;&lt;del&gt;DERBY-6865&lt;/del&gt;&lt;/a&gt;: RestrictiveFilePermissionsTest fails on Windows&lt;/p&gt;

&lt;p&gt;Move the contents of FilePermissionServiceImpl into FileUtil. It was&lt;br/&gt;
originally separated out of FileUtil because it used functionality&lt;br/&gt;
only available on Java 7 and higher, so it had to be loaded via&lt;br/&gt;
reflection. Since Java 8 is the minimum level on trunk, it could be&lt;br/&gt;
used directly from FileUtil without reflection.&lt;/p&gt;

&lt;p&gt;The reason for the test failure was that a recent change caused&lt;br/&gt;
FilePermissionServiceImpl to be excluded from derby.jar, so that its&lt;br/&gt;
services were not used, and the database files ended up with unexpected&lt;br/&gt;
permissions.&lt;/p&gt;</comment>
                            <comment id="15135359" author="rhillegas" created="Sat, 6 Feb 2016 00:48:08 +0000"  >&lt;p&gt;Thanks for fixing this, Knut. It&apos;s puzzling that the class dropped out of the jar file but was not noticed by the jarfiledrift logic.&lt;/p&gt;</comment>
                            <comment id="15136685" author="knutanders" created="Mon, 8 Feb 2016 08:11:52 +0000"  >&lt;p&gt;It looks like the JarDriftTest class only looks for classes that drift into the jar files, not classes that drift out of it.&lt;/p&gt;</comment>
                            <comment id="15637947" author="bryanpendleton" created="Fri, 4 Nov 2016 22:46:17 +0000"  >&lt;p&gt;Is this issue still open? Was there more to do beyond the changes in r1728681?&lt;/p&gt;</comment>
                            <comment id="15643573" author="knutanders" created="Mon, 7 Nov 2016 09:08:12 +0000"  >&lt;p&gt;The problem reported here has been fixed. Closing the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sfzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>