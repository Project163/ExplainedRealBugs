<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:20:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-616] create index can fail under the SecurityManager when trying to access files in the tmp folder of a database</title>
                <link>https://issues.apache.org/jira/browse/DERBY-616</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Seen in tests lang/wisconsin.sql and jdbcapi/maxfieldsize.java when running with the network server and the new security policy file that grants permisions on a per-jar basis. Unless permission is given to the network serve code (since it is in the stack) to access temp files in the database the test will fail.&lt;/p&gt;

&lt;p&gt;  permission java.io.FilePermission &quot;${derby.system.home}${/}wombat${/}tmp${/}-&quot;, &quot;read, write, delete&quot;;&lt;/p&gt;

&lt;p&gt;Most likely the temp files are being accessed in without a privileged block.&lt;/p&gt;

&lt;p&gt;Easy to reproduce once the new policy file changes are checked in (see &lt;a href=&quot;http://wiki.apache.org/db-derby/SecurityManagerTesting&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/db-derby/SecurityManagerTesting&lt;/a&gt;) by removing the permission in the derby_tests.policy  file and running these tests using the jar files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12317831">DERBY-616</key>
            <summary>create index can fail under the SecurityManager when trying to access files in the tmp folder of a database</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tsuresh">Suresh Thalamati</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2005 03:09:17 +0000</created>
                <updated>Wed, 12 Jul 2006 06:48:06 +0000</updated>
                            <resolved>Sat, 11 Mar 2006 02:31:30 +0000</resolved>
                                    <version>10.0.2.1</version>
                    <version>10.1.1.0</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.1.3.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12366041" author="myrna" created="Sun, 12 Feb 2006 07:42:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-943&quot; title=&quot;nightly test regression in sycat test only on ibm142 jvm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-943&quot;&gt;&lt;del&gt;DERBY-943&lt;/del&gt;&lt;/a&gt; is most likely related to this issue. &lt;br/&gt;
See also the mail archives: &lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200602.mbox/%3cc25576af0602110801w12544eb7i517b984f0e1b7651@mail.gmail.com%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200602.mbox/%3cc25576af0602110801w12544eb7i517b984f0e1b7651@mail.gmail.com%3e&lt;/a&gt;&lt;br/&gt;
and:&lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200602.mbox/%3c43EE0E60.7000103@apache.org%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200602.mbox/%3c43EE0E60.7000103@apache.org%3e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So, For &apos;fixing&apos; the nightly failure issue of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-943&quot; title=&quot;nightly test regression in sycat test only on ibm142 jvm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-943&quot;&gt;&lt;del&gt;DERBY-943&lt;/del&gt;&lt;/a&gt;, I will add the read, write, delete java.io.FilePermission to derby_tests.policy for the syscatdb/tmp dir (and under) in the derbynet.jar section. When this (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-616&quot; title=&quot;create index can fail under the SecurityManager when trying to access files in the tmp folder of a database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-616&quot;&gt;&lt;del&gt;DERBY-616&lt;/del&gt;&lt;/a&gt;) bug gets fixed, that section should also be taken out, and syscat.sql should be confirmed to work successfully with ibm142 jvm. &lt;/p&gt;
</comment>
                            <comment id="12369290" author="tsuresh" created="Wed, 8 Mar 2006 03:42:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-616&quot; title=&quot;create index can fail under the SecurityManager when trying to access files in the tmp folder of a database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-616&quot;&gt;&lt;del&gt;DERBY-616&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&amp;#8211; Added a missing privileged blocks for I/O call in StreamFileContainer.java ,&lt;br/&gt;
this class is used by the sort during index creation ..etc. &lt;/p&gt;

&lt;p&gt;&amp;#8211; Enabled some of the tests which were not running under security manager &lt;br/&gt;
   earlier because of this bug to run by default with security manager. &lt;/p&gt;

&lt;p&gt;&amp;#8211; removed the additional permissions from the derby test policy file &lt;br/&gt;
   that were added earlier to avoid this bug for some test cases. &lt;/p&gt;

&lt;p&gt;TESTS : derbyall test suite passed on Windows XP/JDK142/ with sane classes&lt;br/&gt;
directory and insane jars. &lt;/p&gt;

&lt;p&gt;It would be great if some can review and commit this patch. &lt;/p&gt;

&lt;p&gt;svn stat:&lt;br/&gt;
M      java\engine\org\apache\derby\impl\store\raw\data\StreamFileContainer.java&lt;/p&gt;

&lt;p&gt;M      java\testing\org\apache\derbyTesting\functionTests\tests\lang\compressTable_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\lang\authorize_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\lang\wisconsin_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\lang\syscat_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\store\holdCursorExternalSortJDBC30_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\store\access_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\store\testsqldecimal_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\util\derby_tests.policy&lt;/p&gt;</comment>
                            <comment id="12369515" author="mikem" created="Thu, 9 Mar 2006 01:52:12 +0000"  >&lt;p&gt;I have reviewed, tested and committed the submitted patch for this issue.&lt;/p&gt;

&lt;p&gt;m1_142:13&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\StreamFileContai&lt;br/&gt;
ner.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\lang\aut&lt;br/&gt;
horize_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\lang\com&lt;br/&gt;
pressTable_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\lang\sys&lt;br/&gt;
cat_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\lang\wis&lt;br/&gt;
consin_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\store\ac&lt;br/&gt;
cess_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\store\ho&lt;br/&gt;
ldCursorExternalSortJDBC30_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\store\te&lt;br/&gt;
stsqldecimal_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\util\derby_tes&lt;br/&gt;
ts.policy&lt;br/&gt;
Transmitting file data .........&lt;br/&gt;
Committed revision 384282.&lt;/p&gt;</comment>
                            <comment id="12376967" author="mikem" created="Fri, 28 Apr 2006 23:31:44 +0000"  >&lt;p&gt;backported this fix from trunk into 10.1 line:&lt;/p&gt;

&lt;p&gt;m101_142:62&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\StreamFileContai&lt;br/&gt;
ner.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\lang\aut&lt;br/&gt;
horize_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\lang\wis&lt;br/&gt;
consin_app.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\util\derby_tes&lt;br/&gt;
ts.policy&lt;br/&gt;
Transmitting file data ....&lt;br/&gt;
Committed revision 397945.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12328830">DERBY-943</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12323880" name="derby-616.diff" size="12427" author="tsuresh" created="Wed, 8 Mar 2006 03:42:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22048</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07asf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40514</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>