<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:47:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6625] Many permission related test failures on Java 8 compact2</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6625</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When I try to run tests on Java SE 8 compact profile 2 with head of trunk, I see lots of permission related errors. If I add the flag -Djava.security.policy=&amp;lt;NONE&amp;gt; to disable the security manager, the errors seem to go away.&lt;/p&gt;

&lt;p&gt;For example, if I try to run lang.XMLBindingTest, I see this error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1) XMLBindingTestjava.sql.SQLException: Java exception: &apos;access denied (&quot;java.util.PropertyPermission&quot; &quot;user.dir&quot; &quot;read&quot;): java.security.AccessControlException&apos;.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:107)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:133)
	at org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:255)
	at org.apache.derby.impl.jdbc.Util.javaException(Util.java:277)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:437)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:353)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2396)
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:660)
	at org.apache.derby.jdbc.InternalDriver.getNewEmbedConnection(InternalDriver.java:647)
	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:301)
	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:932)
	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:147)
	at java.sql.DriverManager.getConnection(Unknown Source)
	at java.sql.DriverManager.getConnection(Unknown Source)
	at org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:101)
	at org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:68)
	at org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:44)
	at org.apache.derbyTesting.junit.TestConfiguration.openDefaultConnection(TestConfiguration.java:1680)
	at org.apache.derbyTesting.junit.BaseJDBCTestSetup.getConnection(BaseJDBCTestSetup.java:72)
	at org.apache.derbyTesting.functionTests.tests.lang.XMLBindingTest$XBindTestSetup.setUp(XMLBindingTest.java:293)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:20)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
Caused by: ERROR XJ001: Java exception: &apos;access denied (&quot;java.util.PropertyPermission&quot; &quot;user.dir&quot; &quot;read&quot;): java.security.AccessControlException&apos;.
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:290)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory.java:162)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:74)
	... 36 more
Caused by: java.security.AccessControlException: access denied (&quot;java.util.PropertyPermission&quot; &quot;user.dir&quot; &quot;read&quot;)
	at java.security.AccessControlContext.checkPermission(Unknown Source)
	at java.security.AccessController.checkPermission(Unknown Source)
	at java.lang.SecurityManager.checkPermission(Unknown Source)
	at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
	at java.lang.System.getProperty(Unknown Source)
	at java.io.UnixFileSystem.resolve(Unknown Source)
	at java.io.File.getCanonicalPath(Unknown Source)
	at org.apache.derby.impl.io.DirStorageFactory.doInit(DirStorageFactory.java:190)
	at org.apache.derby.impl.io.BaseStorageFactory.init(BaseStorageFactory.java:88)
	at org.apache.derby.impl.io.DirStorageFactory.init(DirStorageFactory.java:39)
	at org.apache.derby.impl.services.monitor.StorageFactoryService.privGetStorageFactoryInstance(StorageFactoryService.java:215)
	at org.apache.derby.impl.services.monitor.StorageFactoryService.access$400(StorageFactoryService.java:71)
	at org.apache.derby.impl.services.monitor.StorageFactoryService$12.run(StorageFactoryService.java:958)
	at org.apache.derby.impl.services.monitor.StorageFactoryService$12.run(StorageFactoryService.java:954)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.derby.impl.services.monitor.StorageFactoryService.getCanonicalServiceName(StorageFactoryService.java:952)
	at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1504)
	at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:963)
	at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:546)
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2802)
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:405)
	... 29 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>java version &amp;quot;1.8.0_05&amp;quot;&lt;br/&gt;
Java(TM) SE Embedded Runtime Environment (build 1.8.0_05-b13, profile compact2, headless)&lt;br/&gt;
Java HotSpot(TM) Embedded Minimal VM (build 25.5-b02, mixed mode)</environment>
        <key id="12722472">DERBY-6625</key>
            <summary>Many permission related test failures on Java 8 compact2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Richard N. Hillegas</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 11:39:01 +0000</created>
                <updated>Fri, 9 Sep 2016 09:53:49 +0000</updated>
                            <resolved>Mon, 30 Jun 2014 16:34:29 +0000</resolved>
                                    <version>10.11.1.1</version>
                                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14037284" author="knutanders" created="Thu, 19 Jun 2014 12:08:47 +0000"  >&lt;p&gt;git bisect reports that the problems started with this commit:&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r1481248 | rhillegas | 2013-05-11 03:40:09 +0200 (Sat, 11 May 2013) | 1 line&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6213&quot; title=&quot;Deprecate support for Java 5 and CDC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6213&quot;&gt;&lt;del&gt;DERBY-6213&lt;/del&gt;&lt;/a&gt;: Remove CDC DataSource and Driver.&lt;br/&gt;
------------------------------------------------------------------------&lt;/p&gt;</comment>
                            <comment id="14037295" author="rhillegas" created="Thu, 19 Jun 2014 12:20:38 +0000"  >&lt;p&gt;Thanks for finding this, Knut. I think that we should fix this and then ask our testing labs to add cp2 platforms to the nightly/continuous-integration runs. Thanks.&lt;/p&gt;</comment>
                            <comment id="14047713" author="rhillegas" created="Mon, 30 Jun 2014 14:41:48 +0000"  >&lt;p&gt;Attaching derby-6625-01-aa-useBasicEmbeddedDataSource40.diff. This patch makes the regression tests resolve the location of the engine jar by looking for BasicEmbeddedDataSource40 rather than EmbeddedDataSource. I am running tests now.&lt;/p&gt;

&lt;p&gt;I verified the problem by running XMLBindingTest on the reference implementation of Java 8 cp2 on Ubuntu on a VirtualBox guest os on my mac. After applying the patch, the problem goes away.&lt;/p&gt;

&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/junit/SecurityManagerSetup.java&lt;/p&gt;</comment>
                            <comment id="14047820" author="jira-bot" created="Mon, 30 Jun 2014 16:33:38 +0000"  >&lt;p&gt;Commit 1606831 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhillegas&quot; class=&quot;user-hover&quot; rel=&quot;rhillegas&quot;&gt;rhillegas&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1606831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1606831&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6625&quot; title=&quot;Many permission related test failures on Java 8 compact2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6625&quot;&gt;&lt;del&gt;DERBY-6625&lt;/del&gt;&lt;/a&gt;: Make the JUnit tests correctly resolve the location of the engine jar when running on compact profile 2; tests passed cleanly on derby-6625-01-aa-useBasicEmbeddedDataSource40.diff.&lt;/p&gt;</comment>
                            <comment id="15476652" author="knutanders" created="Fri, 9 Sep 2016 09:53:48 +0000"  >&lt;p&gt;[ Automatically closing all resolved issues that haven&apos;t been updated in more than six months. ]&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12653173" name="derby-6625-01-aa-useBasicEmbeddedDataSource40.diff" size="628" author="rhillegas" created="Mon, 30 Jun 2014 14:41:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wyxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400757</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10050"><![CDATA[Blocker]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>