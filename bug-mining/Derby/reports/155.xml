<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:17:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-609] Returning ByteArrayInputStream from ResultSet is not appropriate</title>
                <link>https://issues.apache.org/jira/browse/DERBY-609</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Point where it is not appropriate :&lt;/p&gt;


&lt;p&gt;1: Compatibility&lt;/p&gt;

&lt;p&gt;The InputStream returned from result set is closed when other getXXXX method was called .&lt;br/&gt;
&lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/sql/ResultSet.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/java/sql/ResultSet.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However closing ByteArrayInputStream have no effect at all .&lt;br/&gt;
&lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/io/ByteArrayInputStream.html#close(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/java/io/ByteArrayInputStream.html#close(&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;It seems intended that closable InputStream was returned from result set .&lt;br/&gt;
If ByteArrayInputStream was returned from result set , the stream cannot be closed, &lt;br/&gt;
and compatibility would be lost .&lt;/p&gt;


&lt;p&gt;2: Performance of program &lt;br/&gt;
Information inputted from ByteArrayInputStream needs to be expanded to memory as byte[] object .&lt;/p&gt;

&lt;p&gt;If large byte[] object was created for each ByteArrayInputStream object , &lt;br/&gt;
program will run in bad performance .&lt;/p&gt;

&lt;p&gt;// I think problem is when information typed as LOB was retrieved from ResultSet .&lt;br/&gt;
// Because such informations typed as LOB tend to be large amount .&lt;/p&gt;</description>
                <environment></environment>
        <key id="12317748">DERBY-609</key>
            <summary>Returning ByteArrayInputStream from ResultSet is not appropriate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tmnk">Tomohito Nakayama</assignee>
                                    <reporter username="tmnk">Tomohito Nakayama</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Oct 2005 00:00:22 +0000</created>
                <updated>Mon, 17 Jul 2006 11:47:53 +0000</updated>
                            <resolved>Mon, 17 Jul 2006 11:47:53 +0000</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12331649" author="naka" created="Sun, 9 Oct 2005 00:23:28 +0000"  >&lt;p&gt;I misoperated and there was no description in this issue.&lt;/p&gt;</comment>
                            <comment id="12331659" author="naka" created="Sun, 9 Oct 2005 16:03:03 +0000"  >&lt;p&gt;List of method where this problem exists are :&lt;/p&gt;

&lt;p&gt;org.apache.derby.client.am.ResultSet:&lt;br/&gt;
   java.io.InputStream getBinaryStream(int column) &lt;br/&gt;
   java.io.InputStream getAsciiStream(int column)&lt;br/&gt;
   java.io.InputStream getUnicodeStream(int column)&lt;/p&gt;
</comment>
                            <comment id="12331662" author="naka" created="Sun, 9 Oct 2005 17:28:33 +0000"  >&lt;p&gt;About 2: Performance of program :&lt;/p&gt;

&lt;p&gt;I found that value of Clob and Blob are stored in memory as &lt;br/&gt;
 org.apache.derby.client.am.Clob#string_ typed as String and&lt;br/&gt;
 org.apache.derby.client.am.Blob#binaryString_ typed as byte[]&lt;/p&gt;

&lt;p&gt;ResultSet seems to return information retrieved from those variables.&lt;br/&gt;
If Clob and Blob have large size of data ,  this structure will cause performance problem.&lt;/p&gt;

&lt;p&gt;I think we should transfer problem of this structure to another issue , because it will be much amount of work .&lt;/p&gt;</comment>
                            <comment id="12332150" author="naka" created="Sat, 15 Oct 2005 23:56:24 +0000"  >&lt;p&gt;I submit patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-609&quot; title=&quot;Returning ByteArrayInputStream from ResultSet is not appropriate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-609&quot;&gt;&lt;del&gt;DERBY-609&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;Description :&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Modification to client&lt;br/&gt;
   Now ResultSet returrn InputStream as CloseFilterInputStream filtering original InputStream.&lt;br/&gt;
   CloseFilterInputStream serve functionality to be closed , even if close method of filtered InputStream have no effect .&lt;br/&gt;
   ResultSet close CloseFilterInputStream when getXXXX method was called .&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Modification to test&lt;br/&gt;
   Include jdbc/resultsetStream.java in DerbyNetClient suite .   &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Test :&lt;br/&gt;
   executed derbyall and found no error .   &lt;/p&gt;</comment>
                            <comment id="12332469" author="naka" created="Wed, 19 Oct 2005 20:37:51 +0000"  >&lt;p&gt;I have committed.&lt;/p&gt;

&lt;p&gt;Adding         java/client/org/apache/derby/client/am/CloseFilterInputStream.java&lt;br/&gt;
Sending        java/client/org/apache/derby/client/am/ResultSet.java&lt;br/&gt;
Adding         java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/resultsetStream.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/suites/DerbyNetClient.exclude&lt;br/&gt;
Transmitting file data ....&lt;br/&gt;
Committed revision 326534.&lt;/p&gt;</comment>
                            <comment id="12421584" author="kristwaa" created="Mon, 17 Jul 2006 11:39:28 +0000"  >&lt;p&gt;Closing this, seems completed. No activity since October 2005.&lt;/p&gt;</comment>
                            <comment id="12421586" author="kristwaa" created="Mon, 17 Jul 2006 11:47:28 +0000"  >&lt;p&gt;Reopened issue to correct fix version.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12314900" name="DERBY-609.patch" size="15858" author="tmnk" created="Sat, 15 Oct 2005 23:56:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07ap3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>