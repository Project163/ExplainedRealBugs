<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:25:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-1510] &apos;SQLBinary.readFromStream&apos; can enter endless loop</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1510</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Under certain circumstances, the method &apos;SQLBinary.readFromStream&apos; can enter an endless loop while reading the stream. The following must be true for the bug to occur: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;There must be more data in the stream than what can fit into the initial buffer (32 K).&lt;/li&gt;
	&lt;li&gt;The method &apos;available&apos; of the stream returns 0.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Since the default return value for &apos;InputStream.available&apos; is 0, and the method reading the stream can be used for data types CHAR FOR BIT DATA, VARCHAR FOR BIT DATA and LONG VARCHAR FOR BIT DATA, the bug should be fixed. The maximum length is 32700 bytes.&lt;br/&gt;
The method will also be used by SQLBlob, but it may be better to introduce a new streaming method for it, since the current implementation has memory-problems for large data (materializes the whole stream). A separate issue should/will be created for this.&lt;/p&gt;

&lt;p&gt;The symptom for this bug is a hang when calling one of the execute methods of Prepared- or CallableStatement and maybe also certain set methods in ResultSet.&lt;br/&gt;
The visibility of this bug is very low, but the impact is severe/critical. When the JDBC 4 length less streaming overloads are added (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1417&quot; title=&quot;Add new, lengthless overloads to the streaming api&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1417&quot;&gt;&lt;del&gt;DERBY-1417&lt;/del&gt;&lt;/a&gt;), visibility might increase.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12345974">DERBY-1510</key>
            <summary>&apos;SQLBinary.readFromStream&apos; can enter endless loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jul 2006 16:29:01 +0000</created>
                <updated>Mon, 31 Jul 2006 10:54:04 +0000</updated>
                            <resolved>Mon, 31 Jul 2006 10:54:04 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12423943" author="kristwaa" created="Thu, 27 Jul 2006 21:55:35 +0000"  >&lt;p&gt;&apos;derby-1510-1a.diff&apos; makes sure derby does not enter an endless loop if InputStream.available() returns 0 and we have already filled the buffer. Before, it was possible to start looping with a read(byte[], pos, 0) call (my laptop used 100% CPU for nearly 29 hours because of this...).&lt;/p&gt;

&lt;p&gt;The fix is minimal. If anyone wants to rewrite more of the method, please do so.&lt;/p&gt;

&lt;p&gt;Please review/commit the patch.&lt;/p&gt;</comment>
                            <comment id="12424111" author="rhillegas" created="Fri, 28 Jul 2006 15:39:35 +0000"  >&lt;p&gt;Seems simple enough. Committed at subversion revision 426570.&lt;/p&gt;</comment>
                            <comment id="12424509" author="kristwaa" created="Mon, 31 Jul 2006 10:54:04 +0000"  >&lt;p&gt;Verified the fix. I no longer see the infinite looping when running my test.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12337665" name="derby-1510-1a.diff" size="502" author="kristwaa" created="Thu, 27 Jul 2006 21:55:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07ahz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>