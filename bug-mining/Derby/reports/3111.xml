<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:50:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6789] intermittent test failure in test case testNetworkServerSecurityMechanism in NSSecurityMechanismTest with Oracle Java 1.8</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6789</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The following failure was seen with Oracle&apos;s Java 8:&lt;/p&gt;

&lt;p&gt;1) testNetworkServerSecurityMechanism(org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest)junit.framework.AssertionFailedError: The expected SQL state must be five characters long&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDBCTestCase.java:876)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDBCTestCase.java:943)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.assertConnectionUsingDriverManager(NSSecurityMechanismTest.java:589)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.assertConnectionsUsingDriverManager(NSSecurityMechanismTest.java:438)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.testNetworkServerSecurityMechanism(NSSecurityMechanismTest.java:292)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:120)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:443)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:460)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:58)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
Caused by: java.sql.SQLException: Java exception: &apos;Unexpected CryptoAPI failure generating seed: java.lang.InternalError&apos;.&lt;br/&gt;
	at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.ClientDriver.connect(Unknown Source)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:664)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:270)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.assertConnectionUsingDriverManager(NSSecurityMechanismTest.java:542)&lt;br/&gt;
	... 37 more&lt;br/&gt;
Caused by: ERROR XJ001: Java exception: &apos;Unexpected CryptoAPI failure generating seed: java.lang.InternalError&apos;.&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.flowConnect(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl.newNetConnection(Unknown Source)&lt;br/&gt;
	... 41 more&lt;br/&gt;
Caused by: java.lang.InternalError: Unexpected CryptoAPI failure generating seed&lt;br/&gt;
	at sun.security.provider.NativeSeedGenerator.getSeedBytes(NativeSeedGenerator.java:62)&lt;br/&gt;
	at sun.security.provider.SeedGenerator.generateSeed(SeedGenerator.java:144)&lt;br/&gt;
	at sun.security.provider.SecureRandom.engineGenerateSeed(SecureRandom.java:128)&lt;br/&gt;
	at java.security.SecureRandom.generateSeed(SecureRandom.java:522)&lt;br/&gt;
	at org.apache.derby.client.am.EncryptionManager.generateSeed(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.initializeClientSeed(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.flowUSRSSBPWDconnect(Unknown Source)&lt;br/&gt;
	... 44 more&lt;/p&gt;

&lt;p&gt;This has happened only on trunk (e.g. built at revision level 1649991), but then I&apos;m only running jdk 1.8 testing on trunk, and only on a windows machine.&lt;br/&gt;
The nightly testing at Oracle or on Apache machines has never shown this problem.&lt;br/&gt;
I run multiple jvms on the same machine, and I have only seen this failure when the Oracle 1.8 jvm was the last one to get started.&lt;br/&gt;
This does mean it starts with -Dderby.tests.basePort=3500.&lt;/p&gt;</description>
                <environment>Windows 2008 on vmware; Oracle Java 8 1.8.0_20-b26.</environment>
        <key id="12767515">DERBY-6789</key>
            <summary>intermittent test failure in test case testNetworkServerSecurityMechanism in NSSecurityMechanismTest with Oracle Java 1.8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jan 2015 18:38:28 +0000</created>
                <updated>Fri, 9 Sep 2016 09:52:01 +0000</updated>
                            <resolved>Tue, 20 Jan 2015 19:03:31 +0000</resolved>
                                    <version>10.12.1.1</version>
                                    <fixVersion>10.12.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14278862" author="myrna" created="Thu, 15 Jan 2015 16:05:53 +0000"  >&lt;p&gt;This looks similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6702&quot; title=&quot;test failure in NSSecurityMechanismTest; The expected SQL state must be five characters long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6702&quot;&gt;&lt;del&gt;DERBY-6702&lt;/del&gt;&lt;/a&gt;, which we decided was a jvm issue.&lt;/p&gt;</comment>
                            <comment id="14278898" author="myrna" created="Thu, 15 Jan 2015 16:26:14 +0000"  >&lt;p&gt;I think my workaround of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6702&quot; title=&quot;test failure in NSSecurityMechanismTest; The expected SQL state must be five characters long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6702&quot;&gt;&lt;del&gt;DERBY-6702&lt;/del&gt;&lt;/a&gt; failed, because in the workaround I looked for:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;if (!sw.toString().contains(&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&quot;java.lang.InternalError: unexpected CryptoAPI failure&quot;))&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;But the stack trace contains this string: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&apos;java.lang.InternalError: Unexpected CryptoAPI failure&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In other words, the &apos;u&apos; in &apos;unexpected&apos; should be uppercase.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit that change without making a patch, will reset my environment to the previous situation and will monitor.&lt;/p&gt;</comment>
                            <comment id="14278901" author="jira-bot" created="Thu, 15 Jan 2015 16:28:48 +0000"  >&lt;p&gt;Commit 1652162 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;myrna&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1652162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1652162&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6789&quot; title=&quot;intermittent test failure in test case testNetworkServerSecurityMechanism in NSSecurityMechanismTest with Oracle Java 1.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6789&quot;&gt;&lt;del&gt;DERBY-6789&lt;/del&gt;&lt;/a&gt;; intermittent test failure in test case testNetworkServerSecurityMechanism in NSSecurityMechanismTest with Oracle Java 1.8&lt;br/&gt;
   correcting the work around of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6702&quot; title=&quot;test failure in NSSecurityMechanismTest; The expected SQL state must be five characters long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6702&quot;&gt;&lt;del&gt;DERBY-6702&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14284218" author="myrna" created="Tue, 20 Jan 2015 19:03:31 +0000"  >&lt;p&gt;I have not seen the failure again - resolving. If there are still things not right with the workaround we can deal with it when it happens again.&lt;/p&gt;</comment>
                            <comment id="15476549" author="knutanders" created="Fri, 9 Sep 2016 09:51:59 +0000"  >&lt;p&gt;[ Automatically closing all resolved issues that haven&apos;t been updated in more than six months. ]&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12733663">DERBY-6702</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24dhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>