<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:49:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6620] Network client DataSources silently swallow SecurityExceptions when trying to read the tracing properties</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6620</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The swallowing occurs here:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.derby.jdbc.ClientBaseDataSourceRoot run Catch java.lang.SecurityException 1 line 457
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe a warning could be raised to alert the user to the problem and encourage them to correct their security policy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12721695">DERBY-6620</key>
            <summary>Network client DataSources silently swallow SecurityExceptions when trying to read the tracing properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="rhillegas">Richard N. Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jun 2014 14:19:00 +0000</created>
                <updated>Fri, 3 Oct 2014 12:51:11 +0000</updated>
                            <resolved>Fri, 3 Oct 2014 12:50:48 +0000</resolved>
                                    <version>10.11.1.1</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14103031" author="dagw" created="Tue, 19 Aug 2014 23:29:30 +0000"  >&lt;p&gt;This is client side code. If it runs under a security manager, the reading of system properties &lt;b&gt;derby.client.traceDirectory&lt;/b&gt; and &lt;b&gt;derby.client.traceLevel&lt;/b&gt; can fail unless permissions are given in the policy file in use. Now, under normal operation, one wouldn&apos;t be using these properties; they are mainly available for debugging the protocol. So, does it really constitute a security issue if these properties can&apos;t be read?  It &lt;b&gt;could&lt;/b&gt; trip up an admin trying to enable protocol tracing, and finding the trace file has ended up somewhere it shouldn&apos;t. &lt;/p&gt;

&lt;p&gt;So, would it be worth it to write a warning message on the console (where else?) in this case? It could be seen&lt;br/&gt;
as an annoyance if the user isn&apos;t trying to use tracing at all.... I am not quite convinced its the right thing to do. I would have liked the warning to appear only if tracing is attempted, but it appears the properties are always read, cf. BasicClientDataSource40#updateDataSourceValues, which is called from #getConnection unconditionally.&lt;/p&gt;</comment>
                            <comment id="14103811" author="rhillegas" created="Wed, 20 Aug 2014 12:31:36 +0000"  >&lt;p&gt;Hi Dag,&lt;/p&gt;

&lt;p&gt;Looks like the properties may be read under getConnection(). Maybe a SQLWarning could be attached to the Connection, instead of (or in addition to) printing a warning on the console. Thanks.&lt;/p&gt;</comment>
                            <comment id="14104342" author="dagw" created="Wed, 20 Aug 2014 18:56:05 +0000"  >&lt;p&gt;I&apos;m slightly confused as to what we support in this space. It seems that &quot;traceLevel&quot; is only being documented as a connection attribute and a data source property &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&quot;traceDirectory&quot; is specified as a connection attribute &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; and as a data source property &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;However, I cannot find documentation for setting these in a system property as &quot;derby.client.traceDirectory&quot; and &quot;derby.client.traceLevel&quot;.&lt;/p&gt;

&lt;p&gt;On the server side we do document system properties for tracing (derby.drda.trace*).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://db.apache.org/derby/docs/10.10/ref/rrefattribtracelevel.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://db.apache.org/derby/docs/10.10/ref/rrefattribtracelevel.html&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://db.apache.org/derby/docs/10.10/ref/rrefattribtracedirectory.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://db.apache.org/derby/docs/10.10/ref/rrefattribtracedirectory.html&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://builds.apache.org/job/Derby-trunk/lastSuccessfulBuild/artifact/trunk/javadoc/publishedapi/org/apache/derby/jdbc/BasicClientDataSource40.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Derby-trunk/lastSuccessfulBuild/artifact/trunk/javadoc/publishedapi/org/apache/derby/jdbc/BasicClientDataSource40.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="14104353" author="dagw" created="Wed, 20 Aug 2014 19:02:01 +0000"  >&lt;p&gt;I see this was undocumented in the usual place on purpose, cf. &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1275&quot; title=&quot;Provide a way to enable client tracing without changing the application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1275&quot;&gt;&lt;del&gt;DERBY-1275&lt;/del&gt;&lt;/a&gt;. A Wiki page documents them, but I can&apos;t access it right now, seems the wiki is down. &lt;/p&gt;
</comment>
                            <comment id="14104360" author="dagw" created="Wed, 20 Aug 2014 19:07:24 +0000"  >&lt;p&gt;I see Kathey made this comment regarding the permissions to read these properties:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1275?focusedCommentId=12500898&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12500898&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-1275?focusedCommentId=12500898&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12500898&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14104364" author="dagw" created="Wed, 20 Aug 2014 19:09:18 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2754:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-2754:&lt;/a&gt; &quot;Client connections should not fail if permission is not granted to read derby.client.traceLevel  and derby.client.traceDirectory&quot;&lt;/p&gt;
</comment>
                            <comment id="14104367" author="dagw" created="Wed, 20 Aug 2014 19:11:53 +0000"  >&lt;p&gt;Quote from Kathey on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2754&quot; title=&quot;Client connections should not fail if permission is not granted to read derby.client.traceLevel  and derby.client.traceDirectory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2754&quot;&gt;&lt;del&gt;DERBY-2754&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There does not seem to be any place to put a warning at this point of processing, so if permission is not granted to read the properties, they will just be ignored. This may cause some confusion, but I will add a not to the page describing the properties to help troubleshoot if the properties are set but tracing is not affected.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ll check the Wiki page when it comes up to see if it is sufficient to explain how this works.&lt;/p&gt;</comment>
                            <comment id="14104383" author="dagw" created="Wed, 20 Aug 2014 19:16:29 +0000"  >&lt;p&gt;This is the wiki explanation:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Client side tracing under Network Server&lt;/p&gt;

&lt;p&gt;Currently, the client tracing can be enabled by setting jdbc url attributes or through setXXX methods on the DataSource or by calling DriverManager.setLogWriter method (More information on these options can be found in the Server and Administration Guide). All these options require changing the client code which may not be a feasible option for a deployed client application. To get around this, in Derby 10.3, 2 new JVM properties(&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1275&quot; title=&quot;Provide a way to enable client tracing without changing the application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1275&quot;&gt;&lt;del&gt;DERBY-1275&lt;/del&gt;&lt;/a&gt;) have been added. They are namely, derby.client.traceLevel and derby.client.traceDirectory. When the client application is started, the users can include these 2 JVM properties to start the client side tracing. eg java -Dderby.client.traceDirectory=./traceDir -Dderby.client.traceLevel=64 clientApplication&lt;/p&gt;

&lt;p&gt;When running under security manager, read permission for these properties is required. If permission to read the properties is not allowed, the properties will be ignored and tracing will not be affected. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am tempted to resolve this issue as &quot;won&apos;t fix&quot; in the light of this information. It seems there won&apos;t be any &lt;b&gt;extra&lt;/b&gt; trace generated unless the system property traceLevel is actually being read, so the security risk is none. Rick?&lt;/p&gt;</comment>
                            <comment id="14113695" author="rhillegas" created="Thu, 28 Aug 2014 12:12:36 +0000"  >&lt;p&gt;Thanks for researching this issue, Dag. Before closing the issue, I recommend adding your conclusions to some comments around the spot in the code where these properties are read. That will save a lot of time for the next engineer who trips across this silent swallowing. Thanks.&lt;/p&gt;</comment>
                            <comment id="14114265" author="dagw" created="Thu, 28 Aug 2014 20:12:46 +0000"  >&lt;p&gt;Right; that&apos;s a good idea. Thanks, Rick.&lt;/p&gt;</comment>
                            <comment id="14114459" author="jira-bot" created="Thu, 28 Aug 2014 22:09:09 +0000"  >&lt;p&gt;Commit 1621216 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dagw&quot; class=&quot;user-hover&quot; rel=&quot;dagw&quot;&gt;dagw&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1621216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1621216&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6620&quot; title=&quot;Network client DataSources silently swallow SecurityExceptions when trying to read the tracing properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6620&quot;&gt;&lt;del&gt;DERBY-6620&lt;/del&gt;&lt;/a&gt; Network client DataSources silently swallow SecurityExceptions when trying to read the tracing properties&lt;/p&gt;

&lt;p&gt;Added explanatory comments in the source where we swallow the&lt;br/&gt;
SecurityException.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399891</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wu9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399999</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>