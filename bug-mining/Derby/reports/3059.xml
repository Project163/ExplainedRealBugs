<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:49:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6715] MissingPermissionsTest fails under JaCoCo</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6715</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;MissingPermissionsTest has started failing in the &lt;a href=&quot;https://builds.apache.org/job/Derby-JaCoCo/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;code coverage tests&lt;/a&gt; lately.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;subprocess run failed: :Spawned MPT exitCode=134
STDERR:
java.security.AccessControlException: access denied (&quot;java.io.FilePermission&quot; &quot;/home/jenkins/jenkins-slave/workspace/Derby-JaCoCo/trunk/junit_20140825_1759&quot; &quot;read&quot;)
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:372)
	at java.security.AccessController.checkPermission(AccessController.java:559)
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
	at java.lang.SecurityManager.checkRead(SecurityManager.java:888)
	at java.io.File.exists(File.java:770)
	at java.io.File.mkdirs(File.java:1263)
	at org.jacoco.agent.rt.internal_9dd1198.output.FileOutput.startup(FileOutput.java:46)
	at org.jacoco.agent.rt.internal_9dd1198.Agent.startup(Agent.java:126)
	at org.jacoco.agent.rt.internal_9dd1198.Agent.getInstance(Agent.java:56)
	at org.jacoco.agent.rt.internal_9dd1198.PreMain.premain(PreMain.java:45)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:382)
	at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:397)
Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:382)
	at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:397)
Caused by: java.security.AccessControlException: access denied (&quot;java.lang.RuntimePermission&quot; &quot;shutdownHooks&quot;)
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:372)
	at java.security.AccessController.checkPermission(AccessController.java:559)
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
	at java.lang.Runtime.addShutdownHook(Runtime.java:209)
	at org.jacoco.agent.rt.internal_9dd1198.Agent.getInstance(Agent.java:57)
	at org.jacoco.agent.rt.internal_9dd1198.PreMain.premain(PreMain.java:45)
	... 6 more

STDOUT:
FATAL ERROR in native method: processing of -javaagent failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12736768">DERBY-6715</key>
            <summary>MissingPermissionsTest fails under JaCoCo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Aug 2014 10:58:21 +0000</created>
                <updated>Mon, 15 Sep 2014 14:10:01 +0000</updated>
                            <resolved>Wed, 27 Aug 2014 08:11:00 +0000</resolved>
                                    <version>10.12.1.1</version>
                                    <fixVersion>10.12.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14110736" author="knutanders" created="Tue, 26 Aug 2014 14:18:15 +0000"  >&lt;p&gt;There are two reasons why the test fails under JaCoCo:&lt;/p&gt;

&lt;p&gt;1) The custom policy file used by the testModifyThreadGroup test case does not include the extra permissions needed by JaCoCo.&lt;/p&gt;

&lt;p&gt;2) SecurityManagerSetup.checkIfJacocoIsRunning() fails when it&apos;s called during initialization of the SecurityManagerSetup class, because it doesn&apos;t have RuntimePermission(&quot;getProtectionDomain&quot;). The permission is not usually needed when the class is initialized, because the security manager is installed by SecurityManagerSetup after the class has been initialized. The reason why it&apos;s needed here, is that the test starts JUnit in a subprocess with the -Djava.security.manager flag so that the security manager is already installed when SecurityManagerSetup is initialized in the subprocess.&lt;/p&gt;

&lt;p&gt;Patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12664392/12664392_d6715-1a.diff&quot; title=&quot;d6715-1a.diff attached to DERBY-6715&quot;&gt;d6715-1a.diff&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; fixes both of these problems.&lt;/p&gt;

&lt;p&gt;#1 is fixed by adding extra permissions to the custom policy file if JaCoCo is enabled.&lt;/p&gt;

&lt;p&gt;#2 is fixed by changing how SecurityManagerSetup checks for the existence of JaCoCo. Instead of calling getURL() on one of the JaCoCo classes, it now only calls Class.forName() to check if the class is present. Class.forName() doesn&apos;t require RuntimePermission(&quot;getProtectionDomain&quot;), and the URL isn&apos;t needed.&lt;/p&gt;

&lt;p&gt;(An alternative fix for #2 would be to grant RuntimePermission(&quot;getProtectionDomain&quot;) to derbyTesting.jar in the custom policy file.)&lt;/p&gt;</comment>
                            <comment id="14112009" author="jira-bot" created="Wed, 27 Aug 2014 08:09:58 +0000"  >&lt;p&gt;Commit 1620793 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;knutanders&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1620793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1620793&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6715&quot; title=&quot;MissingPermissionsTest fails under JaCoCo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6715&quot;&gt;&lt;del&gt;DERBY-6715&lt;/del&gt;&lt;/a&gt;: MissingPermissionsTest fails under JaCoCo&lt;/p&gt;

&lt;p&gt;Add permissions required by JaCoCo to the custom policy used by the test.&lt;/p&gt;

&lt;p&gt;Change how SecurityManagerSetup checks for JaCoCo. By using&lt;br/&gt;
Class.forName() instead of getURL() we avoid the need for calling the&lt;br/&gt;
privileged getProtectionDomain() method, and the URL of the JaCoCo jar&lt;br/&gt;
file is not needed.&lt;/p&gt;

&lt;p&gt;(It is usually OK to call this method without any special permissions&lt;br/&gt;
granted when the SecurityManagerSetup class is initialized. This is&lt;br/&gt;
because the SecurityManagerSetup is usually initialized before a&lt;br/&gt;
SecurityManager has been installed. In this test, however, a&lt;br/&gt;
subprocess is started with -Djava.security.manager, so a&lt;br/&gt;
SecurityManager is already in place before the SecurityManagerSetup&lt;br/&gt;
class is initialized in the subprocess.)&lt;/p&gt;</comment>
                            <comment id="14112130" author="knutanders" created="Wed, 27 Aug 2014 10:55:21 +0000"  >&lt;p&gt;The latest build on &lt;a href=&quot;https://builds.apache.org/job/Derby-JaCoCo/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Derby-JaCoCo/&lt;/a&gt; completed successfully. Closing the issue.&lt;/p&gt;</comment>
                            <comment id="14133923" author="jira-bot" created="Mon, 15 Sep 2014 14:10:01 +0000"  >&lt;p&gt;Commit 1625037 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;knutanders&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1625037&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1625037&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6736&quot; title=&quot;The jacoco-junit target fails to store coverage data for some sub-suites&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6736&quot;&gt;&lt;del&gt;DERBY-6736&lt;/del&gt;&lt;/a&gt;: The jacoco-junit target fails to store coverage data for some sub-suites&lt;/p&gt;

&lt;p&gt;Set the jacoco.active property to the empty string when the tests run&lt;br/&gt;
under JaCoCo. The code that did this was removed by mistake in&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6715&quot; title=&quot;MissingPermissionsTest fails under JaCoCo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6715&quot;&gt;&lt;del&gt;DERBY-6715&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12741455">DERBY-6736</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12664392" name="d6715-1a.diff" size="3015" author="knutanders" created="Tue, 26 Aug 2014 14:18:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zc3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>