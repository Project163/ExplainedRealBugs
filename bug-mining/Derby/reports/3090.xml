<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:49:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6636] The public api of BaseDataFileFactory may allow blackhats to assume elevated privileges.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6636</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;BaseDataFileFactory has a public constructor and a public boot() method. Arbitrary code running in the JVM may be able to instantiate a BaseDataFileFactory outside of Derby&apos;s authentication mechanisms and so acquire the ability to read/update Derby-managed data with the privileges granted to Derby.  Arbitrary code may be able to interfere with the normal operation of Derby and may be able to corrupt data.&lt;/p&gt;

&lt;p&gt;This is just an observation based on casual code inspection. It may be that there are mechanisms in place which frustrate these attacks. I have not tried to exploit these potential vulnerabilities myself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723355">DERBY-6636</key>
            <summary>The public api of BaseDataFileFactory may allow blackhats to assume elevated privileges.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Richard N. Hillegas</assignee>
                                    <reporter username="rhillegas">Richard N. Hillegas</reporter>
                        <labels>
                            <label>derby_backport_reject_10_11</label>
                    </labels>
                <created>Tue, 24 Jun 2014 13:20:09 +0000</created>
                <updated>Thu, 2 Oct 2014 20:41:05 +0000</updated>
                            <resolved>Mon, 29 Sep 2014 18:52:34 +0000</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.12.1.1</fixVersion>
                                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14046453" author="dagw" created="Fri, 27 Jun 2014 22:01:15 +0000"  >&lt;p&gt;I tried to instantiate a new DBFF object and call &quot;boot&quot; on it but didn&apos;t get very far, cf. this stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TopService.findModuleInstance:237	
TopService.inService:430	
BaseMonitor.findTopService:556	
BaseMonitor.getServiceType:517	
FileMonitor.getServiceType:44	
BaseDataFileFactory.boot:274	
FooApp.main:38	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;because the monitor&apos;s &quot;getService&quot; method returns null (the object isn&apos;t in the list search through by topService), so&lt;br/&gt;
a null is returned, leading to a NPE in BDFF line 279 since &quot;ps&quot; is null. I have not tried the other methods on BDFF for mischief.&lt;/p&gt;
</comment>
                            <comment id="14046459" author="dagw" created="Fri, 27 Jun 2014 22:14:03 +0000"  >&lt;p&gt;A call to addAndLoadStreamContainer gets frustrated quickly because it needs boot to have been performed before it can succeed. Result: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NullPointerException
at org.apache.derby.impl.store.raw.data.StreamFileContainer.getFileName(StreamFileContainer.java:1019)
at org.apache.derby.impl.store.raw.data.StreamFileContainer.&amp;lt;init&amp;gt;(StreamFileContainer.java:196)
at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.addAndLoadStreamContainer(BaseDataFileFactory.java:966)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14151878" author="rhillegas" created="Mon, 29 Sep 2014 16:43:11 +0000"  >&lt;p&gt;Attaching derby-6636-01-aa-usederbyinternals.diff. This patch makes the constructor of BaseDataFileFactory require the usederbyinternals privilege. I am running tests now.&lt;/p&gt;



&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java&lt;/p&gt;

&lt;p&gt;Adds the privilege check.&lt;/p&gt;

&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/functionTests/tests/lang/NoDBInternalsPermissionTest.java&lt;/p&gt;

&lt;p&gt;Adds a test case for this.&lt;/p&gt;</comment>
                            <comment id="14152056" author="jira-bot" created="Mon, 29 Sep 2014 18:52:02 +0000"  >&lt;p&gt;Commit 1628256 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhillegas&quot; class=&quot;user-hover&quot; rel=&quot;rhillegas&quot;&gt;rhillegas&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1628256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1628256&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6636&quot; title=&quot;The public api of BaseDataFileFactory may allow blackhats to assume elevated privileges.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6636&quot;&gt;&lt;del&gt;DERBY-6636&lt;/del&gt;&lt;/a&gt;: Prevent blackhats from creating a BaseDataFileFactory; tests passed cleanly for me on derby-6636-01-aa-usederbyinternals.diff.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12671820" name="derby-6636-01-aa-usederbyinternals.diff" size="2095" author="rhillegas" created="Mon, 29 Sep 2014 16:43:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x47j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>