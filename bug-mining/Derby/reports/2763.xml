<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:40:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6195] Cleanup suspect coding practices in the org.apache.derby.impl.tools.ij package.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6195</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6177&quot; title=&quot;Cleanup suspect coding practices in org.apache.derby.catalog.types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6177&quot;&gt;&lt;del&gt;DERBY-6177&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12643950">DERBY-6195</key>
            <summary>Cleanup suspect coding practices in the org.apache.derby.impl.tools.ij package.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Richard N. Hillegas</assignee>
                                    <reporter username="rhillegas">Richard N. Hillegas</reporter>
                        <labels>
                            <label>derby_backport_reject_10_10</label>
                    </labels>
                <created>Mon, 22 Apr 2013 15:36:52 +0000</created>
                <updated>Mon, 8 Jul 2013 23:34:13 +0000</updated>
                            <resolved>Tue, 23 Apr 2013 19:23:24 +0000</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13638342" author="rhillegas" created="Mon, 22 Apr 2013 19:13:43 +0000"  >&lt;p&gt;Attaching derby-6195-01-aa-encapsulateBetter.diff. This patch improves the privacy of several classes in this package. I will run tests.&lt;/p&gt;


&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;--------------------&lt;/p&gt;

&lt;p&gt;M       java/tools/org/apache/derby/impl/tools/ij/URLCheck.java&lt;br/&gt;
M       java/tools/org/apache/derby/impl/tools/ij/ParseException.java&lt;br/&gt;
M       java/tools/org/apache/derby/impl/tools/ij/ijResultSetResult.java&lt;br/&gt;
M       java/tools/org/apache/derby/impl/tools/ij/ijMultipleResultSetResult.java&lt;/p&gt;

&lt;p&gt;Reduce the visibility of the state variables from public to private. And/or clone array args at construction and accessor time.&lt;/p&gt;


&lt;p&gt;--------------------&lt;/p&gt;

&lt;p&gt;M       java/tools/org/apache/derby/impl/tools/build.xml&lt;/p&gt;

&lt;p&gt;Reduce the generated ijConstants and ijTokenManager classes from public to package visibility.&lt;/p&gt;

&lt;p&gt;--------------------&lt;/p&gt;

&lt;p&gt;M       java/tools/org/apache/derby/iapi/tools/build.xml&lt;br/&gt;
A       java/tools/org/apache/derby/iapi/tools/ToolUtils.java&lt;/p&gt;

&lt;p&gt;New class which repeats the array-copying methods in org.apache.derby.iapi.services.io.ArrayUtil. I would prefer to not have to clone this code, but this seems to be what we&apos;re stuck with until we figure out a way to share code across jar files.&lt;/p&gt;</comment>
                            <comment id="13638927" author="knutanders" created="Tue, 23 Apr 2013 10:16:59 +0000"  >&lt;p&gt;When copying multi-dimensional arrays (such as ParseException.expectedTokenSequences) with the clone() method, only the first dimension is cloned. The rows in the array are still shared between the original and the clone, so if a value in the cloned array is changed, it will be changed in the original array too. So I think we need some sort of deep clone method to properly encapsulate the multi-dimensional arrays.&lt;/p&gt;

&lt;p&gt;The corresponding field in impl.sql.compile.ParseException was encapsulated by making the class package private, so that the field wasn&apos;t exposed to other modules. Unfortunately, impl.tools.ij.ParseException cannot be made package private just like that, since a dependency on it has leaked out to MultiTest. It might be possible to hide that exception for MultiTest, though. And I think MultiTest isn&apos;t used anymore, now that stress.multi has been converted to JUnit, so we may be able to get rid of it.&lt;/p&gt;</comment>
                            <comment id="13639017" author="rhillegas" created="Tue, 23 Apr 2013 13:01:51 +0000"  >&lt;p&gt;Thanks for that advice, Knut. Attaching derby-6195-01-ab-encapsulateBetter.diff, which incorporates your suggestions. Tests passed cleanly for me on the previous rev of the patch. Re-running tests now.&lt;/p&gt;

&lt;p&gt;I added another helper routine to ToolUtils for deep-copying 2-dimensional int arrays.&lt;/p&gt;

&lt;p&gt;I made the state of ParseException private. Derby (including MultiTest) compiled fine. It doesn&apos;t appear to me that MultiTest bothers to look inside ParseException.&lt;/p&gt;

&lt;p&gt;Touches the same files as the previous rev.&lt;/p&gt;</comment>
                            <comment id="13639024" author="knutanders" created="Tue, 23 Apr 2013 13:09:18 +0000"  >&lt;p&gt;The 01-ab patch looks fine to me. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="13639115" author="rhillegas" created="Tue, 23 Apr 2013 14:41:16 +0000"  >&lt;p&gt;Thanks for the quick review, Knut. Tests passed cleanly for me on derby-6195-01-ab-encapsulateBetter.diff. Committed at subversion revision 1470982.&lt;/p&gt;</comment>
                            <comment id="13639129" author="rhillegas" created="Tue, 23 Apr 2013 14:57:03 +0000"  >&lt;p&gt;Attaching derby-6195-02-aa-utilMain.diff. This patch fixes an encapsulation problem in ij&apos;s utilMain class. I am running tests now.&lt;/p&gt;

&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M       java/tools/org/apache/derby/impl/tools/ij/utilMain.java&lt;/p&gt;</comment>
                            <comment id="13639220" author="rhillegas" created="Tue, 23 Apr 2013 16:49:28 +0000"  >&lt;p&gt;Tests passed cleanly for me on derby-6195-02-aa-utilMain.diff. Committed at subversion revision 1471037.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12579884" name="derby-6195-01-aa-encapsulateBetter.diff" size="10037" author="rhillegas" created="Mon, 22 Apr 2013 19:13:43 +0000"/>
                            <attachment id="12580034" name="derby-6195-01-ab-encapsulateBetter.diff" size="12152" author="rhillegas" created="Tue, 23 Apr 2013 13:01:51 +0000"/>
                            <attachment id="12580052" name="derby-6195-02-aa-utilMain.diff" size="579" author="rhillegas" created="Tue, 23 Apr 2013 14:57:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324317</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jycv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>