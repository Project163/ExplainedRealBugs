<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:45:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-3365] Network Server stores a duplicate entry in the lob hash map for every lob</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3365</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Per discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3243&quot; title=&quot;(jdbc net client) exception during normal iteration through &amp;quot;ResultSet&amp;quot; of &amp;quot;select * from t&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3243&quot;&gt;&lt;del&gt;DERBY-3243&lt;/del&gt;&lt;/a&gt;, Network Server stores a duplicate entry in the lob hashmap for every lob.  I posted a preliminary patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3243&quot; title=&quot;(jdbc net client) exception during normal iteration through &amp;quot;ResultSet&amp;quot; of &amp;quot;select * from t&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3243&quot;&gt;&lt;del&gt;DERBY-3243&lt;/del&gt;&lt;/a&gt; and received comments on the patch in that issue, but it makes more sense to separate the issue out from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3243&quot; title=&quot;(jdbc net client) exception during normal iteration through &amp;quot;ResultSet&amp;quot; of &amp;quot;select * from t&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3243&quot;&gt;&lt;del&gt;DERBY-3243&lt;/del&gt;&lt;/a&gt;.  So opening up this new issue.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12387486">DERBY-3365</key>
            <summary>Network Server stores a duplicate entry in the lob hash map for every lob</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Katherine Marsden</assignee>
                                    <reporter username="kmarsden">Katherine Marsden</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jan 2008 16:54:44 +0000</created>
                <updated>Fri, 1 Feb 2008 17:25:38 +0000</updated>
                            <resolved>Fri, 1 Feb 2008 17:25:38 +0000</resolved>
                                                    <fixVersion>10.3.3.0</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12564093" author="kmarsden" created="Wed, 30 Jan 2008 16:55:49 +0000"  >&lt;p&gt;Early patch and discussion is in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3243&quot; title=&quot;(jdbc net client) exception during normal iteration through &amp;quot;ResultSet&amp;quot; of &amp;quot;select * from t&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3243&quot;&gt;&lt;del&gt;DERBY-3243&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12564214" author="kmarsden" created="Wed, 30 Jan 2008 23:19:13 +0000"  >&lt;p&gt;Attached is a follow-up patch derby-3365_diff.txt incorporating review comments from my patch attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3243&quot; title=&quot;(jdbc net client) exception during normal iteration through &amp;quot;ResultSet&amp;quot; of &amp;quot;select * from t&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3243&quot;&gt;&lt;del&gt;DERBY-3243&lt;/del&gt;&lt;/a&gt; &lt;br/&gt;
(derby-3243_fix_double_hashmap_entry_diff.txt)&lt;br/&gt;
I&apos;m sorry Knut I missed your original post about the patch.&lt;br/&gt;
Hopefully all the changes are in this time. For this revision I fixed the typos and changed the lob create stored procedures to use getLocator().&lt;/p&gt;


&lt;p&gt;I did not move the addlobLocator call to getLocator() because it would cause a regression for the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2787&quot; title=&quot;make entry for clob in connection so that temporary file is removed when a connection is closed or transaction is commited/rolledback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2787&quot;&gt;&lt;del&gt;DERBY-2787&lt;/del&gt;&lt;/a&gt; fix.  I will leave any optimization in this area to the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3354&quot; title=&quot;Select from large lob table with embedded gives OutOfMemoryError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3354&quot;&gt;&lt;del&gt;DERBY-3354&lt;/del&gt;&lt;/a&gt; fix.&lt;/p&gt;</comment>
                            <comment id="12564373" author="knutanders" created="Thu, 31 Jan 2008 12:07:03 +0000"  >&lt;p&gt;Looks fine to me. In BrokeredConnection, you should also remove the javadoc comment for addLOBMapping().&lt;/p&gt;

&lt;p&gt;I&apos;m wondering, should EngineBlob and EngineClob have been in iapi.jdbc rather than impl.jdbc? That&apos;s where the rest of the engine interfaces are located.&lt;/p&gt;</comment>
                            <comment id="12564519" author="kmarsden" created="Thu, 31 Jan 2008 21:55:10 +0000"  >&lt;p&gt;Thanks Knut for looking at the patch.  You are right about EngineClob and EngineBlob. Not sure how I managed to make them where I did, a matter of  Eclipse making things too easy I think.  I moved them before I committed.&lt;/p&gt;
</comment>
                            <comment id="12564548" author="knutanders" created="Thu, 31 Jan 2008 23:29:55 +0000"  >&lt;p&gt;Thanks Kathey. I noticed that the commit log looked a bit odd for this check-in. It says that EmbedBlob.java was added, and lists the entire file with plus lines in the diff. Do you know what happened?&lt;/p&gt;</comment>
                            <comment id="12564553" author="knutanders" created="Thu, 31 Jan 2008 23:45:44 +0000"  >&lt;p&gt;Hmm, I guess your IDE or something must have tricked you into replacing (that is, removing + adding) EmbedBlob.java rather than modifying it. I managed to restore the file history by this sequence of commands:&lt;/p&gt;

&lt;p&gt;$ cd java/engine/org/apache/derby/impl/jdbc&lt;br/&gt;
$ cp EmbedBlob.java EmbedBlob.java.old&lt;br/&gt;
$ svn remove EmbedBlob.java&lt;br/&gt;
$ svn copy -r 617185 EmbedBlob.java .&lt;br/&gt;
$ cp EmbedBlob.java.old EmbedBlob.java&lt;br/&gt;
$ svn ci&lt;/p&gt;

&lt;p&gt;Now &quot;svn annotate&quot; shows the correct information, and not that all lines were changed by kmarsden in revision 617186. Hope I didn&apos;t break anything in the process...&lt;/p&gt;</comment>
                            <comment id="12564554" author="kmarsden" created="Thu, 31 Jan 2008 23:47:10 +0000"  >&lt;p&gt;Thanks Knut for fixing that up. &lt;/p&gt;
</comment>
                            <comment id="12564837" author="kmarsden" created="Fri, 1 Feb 2008 17:25:38 +0000"  >&lt;p&gt;committed change to 10.3 and trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12383746">DERBY-3243</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12374422" name="derby-3365_diff.txt" size="12594" author="kmarsden" created="Wed, 30 Jan 2008 23:19:13 +0000"/>
                            <attachment id="12374423" name="derby-3365_stat.txt" size="826" author="kmarsden" created="Wed, 30 Jan 2008 23:19:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i074yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>