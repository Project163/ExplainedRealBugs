<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:24:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-1475] lang/procedure.java intermittently fails on SunOS-5.10_i86</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1475</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Diff:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: procedure jdk1.5.0_06 2006-07-04 13:39:05 ***&lt;br/&gt;
219 del&lt;br/&gt;
&amp;lt; auto commit is true&lt;br/&gt;
220 del&lt;br/&gt;
&amp;lt; lock count before execution 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
1017 del&lt;br/&gt;
&amp;lt; JIRA-492 successful &amp;#8211; no hang!&lt;br/&gt;
1018 del&lt;br/&gt;
&amp;lt; testImplicitClose(): PASSED&lt;br/&gt;
1018 add&lt;br/&gt;
&amp;gt; ERROR X0X03: Invalid transaction state - held cursor requires same isolation level&lt;br/&gt;
&amp;gt; ERROR X0X03: Invalid transaction state - held cursor requires same isolation level&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   procedure jdk1.5.0_06 2006-07-04 13:39:11 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>Java Version:    1.5.0_06&lt;br/&gt;
OS name:         SunOS&lt;br/&gt;
OS version:      5.10</environment>
        <key id="12345368">DERBY-1475</key>
            <summary>lang/procedure.java intermittently fails on SunOS-5.10_i86</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fernanda">Fernanda Pizzorno</assignee>
                                    <reporter username="fernanda">Fernanda Pizzorno</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Jul 2006 18:46:55 +0000</created>
                <updated>Fri, 16 Feb 2007 13:37:46 +0000</updated>
                            <resolved>Fri, 7 Jul 2006 15:42:33 +0000</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12419141" author="myrna" created="Tue, 4 Jul 2006 22:29:52 +0000"  >&lt;p&gt;I am wondering if this intermittent failure is related to the failure with ibm15 of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1320&quot; title=&quot;Test lang/procedure.java fails with ibm1.5 jvm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1320&quot;&gt;&lt;del&gt;DERBY-1320&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12419231" author="fernanda" created="Wed, 5 Jul 2006 15:50:05 +0000"  >&lt;p&gt;I had not seen the new diff in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1320&quot; title=&quot;Test lang/procedure.java fails with ibm1.5 jvm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1320&quot;&gt;&lt;del&gt;DERBY-1320&lt;/del&gt;&lt;/a&gt; after the applying the same fix as for setTransactionIsolation. These problems seem to be related. Thank you Myrna for pointing it out.&lt;/p&gt;

&lt;p&gt;The attached patch (derby-1475.diff) fixes the problem by closing the result sets before setting them to null in org.apache.derbyTesting.functionTests.util.ProcedureTest.selectRows, when the parameter p2 = 199. Closing the result sets before setting them to null, prevents later tests (calling the Connection.setTransactionIsolation() method) to fail if these result sets have not yet been garbage collected.&lt;/p&gt;

&lt;p&gt;I have run lang/procedure.java more than 4000 consecutive times without failure with this patch.&lt;/p&gt;

&lt;p&gt;Can someone please review the patch?&lt;/p&gt;</comment>
                            <comment id="12419531" author="andreask" created="Thu, 6 Jul 2006 21:16:02 +0000"  >&lt;p&gt;I intend to commit the patch once I have run some tests on it.&lt;/p&gt;</comment>
                            <comment id="12419660" author="andreask" created="Fri, 7 Jul 2006 15:42:33 +0000"  >&lt;p&gt;Committed revision 419839.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12333553">DERBY-1320</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12336356" name="derby-1475.diff" size="500" author="fernanda" created="Wed, 5 Jul 2006 15:50:05 +0000"/>
                            <attachment id="12336357" name="derby-1475.stat" size="148" author="fernanda" created="Wed, 5 Jul 2006 15:50:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22527</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i078sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40192</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>