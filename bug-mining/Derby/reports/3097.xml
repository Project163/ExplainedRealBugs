<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:50:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6269] Misleading warning text if you create an index duplicating a constraint.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6269</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If you try to create an index on a column which defines a unique constraint, the index is not created. That&apos;s fine. But you get a misleading warning suggesting that the index was created. We should correct the warning text so that it says that an index was not created. We should also consider making this situation an error, not a warning.&lt;/p&gt;

&lt;p&gt;This issue is probably related to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-655&quot; title=&quot;getImportedKeys returns duplicate rows in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-655&quot;&gt;&lt;del&gt;DERBY-655&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1343&quot; title=&quot;It is possible to have duplicate entries in conglomerateId of sysconglomerates before DERBY-655 was fixed in 10.0 or 10.1 databases. It is desirable to patch these databases on upgrade to 10.2 so conglomerateId becomes unique again.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1343&quot;&gt;&lt;del&gt;DERBY-1343&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here is a script which shows this problem:&lt;/p&gt;

&lt;p&gt;ij version 10.11&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:memory:db;create=true&apos;;&lt;br/&gt;
ij&amp;gt; create table t( a int unique, b int );&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8211; raises a warning suggesting that a new index has been created&lt;br/&gt;
create index t_1 on t( a );&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
WARNING 01504: The new index is a duplicate of an existing index: SQL130618085719940.&lt;br/&gt;
ij&amp;gt; &amp;#8211; only the heap and the constraint exist&lt;br/&gt;
select isIndex, conglomerateName, conglomerateID from sys.sysconglomerates c, sys.systables t&lt;br/&gt;
where t.tableid = c.tableid and t.tablename = &apos;T&apos;;&lt;br/&gt;
ISIN&amp;amp;|CONGLOMERATENAME                                                                                                                |CONGLOMERATEID                      &lt;br/&gt;
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br/&gt;
false|45b300a8-013f-5801-226b-000003b53310                                                                                            |0ddd00a9-013f-5801-226b-000003b53310&lt;br/&gt;
true |SQL130618085719940                                                                                                              |f55fc0a6-013f-5801-226b-000003b53310&lt;/p&gt;

&lt;p&gt;2 rows selected&lt;br/&gt;
ij&amp;gt; &amp;#8211; fails because a new index wasn&apos;t really created&lt;br/&gt;
drop index t_1;&lt;br/&gt;
ERROR 42X65: Index &apos;T_1&apos; does not exist.&lt;br/&gt;
ij&amp;gt; select isIndex, conglomerateName, conglomerateID from sys.sysconglomerates c, sys.systables t&lt;br/&gt;
where t.tableid = c.tableid and t.tablename = &apos;T&apos;;&lt;br/&gt;
ISIN&amp;amp;|CONGLOMERATENAME                                                                                                                |CONGLOMERATEID                      &lt;br/&gt;
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br/&gt;
false|45b300a8-013f-5801-226b-000003b53310                                                                                            |0ddd00a9-013f-5801-226b-000003b53310&lt;br/&gt;
true |SQL130618085719940                                                                                                              |f55fc0a6-013f-5801-226b-000003b53310&lt;/p&gt;

&lt;p&gt;2 rows selected&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653491">DERBY-6269</key>
            <summary>Misleading warning text if you create an index duplicating a constraint.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="rhillegas">Richard N. Hillegas</reporter>
                        <labels>
                            <label>derby_triage10_11</label>
                    </labels>
                <created>Tue, 18 Jun 2013 16:02:29 +0000</created>
                <updated>Fri, 9 Sep 2016 09:52:14 +0000</updated>
                            <resolved>Mon, 6 Oct 2014 18:35:56 +0000</resolved>
                                    <version>10.11.1.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13687688" author="dagw" created="Wed, 19 Jun 2013 07:01:31 +0000"  >&lt;p&gt;Triaged for 10.11&lt;/p&gt;</comment>
                            <comment id="14155409" author="mamtas" created="Wed, 1 Oct 2014 20:09:25 +0000"  >&lt;p&gt;I am planning on changing the warning &lt;br/&gt;
from &lt;br/&gt;
WARNING 01504: The new index is a duplicate of an existing index: SQL130618085719940.&lt;br/&gt;
to&lt;br/&gt;
WARNING 01504: T_1 index not created because it is a duplicate of an existing index: SQL141001124533460.&lt;/p&gt;</comment>
                            <comment id="14155437" author="rhillegas" created="Wed, 1 Oct 2014 20:22:45 +0000"  >&lt;p&gt;Sounds like a useful clarification. Thanks, Mamta.&lt;/p&gt;</comment>
                            <comment id="14155449" author="myrna" created="Wed, 1 Oct 2014 20:32:01 +0000"  >&lt;p&gt;I am not sure, but I suspect that for translation/internationalization purposes, it would be better to say something like:&lt;br/&gt;
Index &apos;T_1&apos; not created &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14155526" author="mamtas" created="Wed, 1 Oct 2014 21:04:17 +0000"  >&lt;p&gt;Thanks Myrna, We probably should put new requested index name and overlapping index name both in &apos;&apos;.&lt;/p&gt;</comment>
                            <comment id="14156730" author="jira-bot" created="Thu, 2 Oct 2014 16:44:53 +0000"  >&lt;p&gt;Commit 1629014 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mamtas&quot; class=&quot;user-hover&quot; rel=&quot;mamtas&quot;&gt;mamtas&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629014&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1629014&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6269&quot; title=&quot;Misleading warning text if you create an index duplicating a constraint.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6269&quot;&gt;&lt;del&gt;DERBY-6269&lt;/del&gt;&lt;/a&gt;(Misleading warning text if you create an index duplicating a constraint.)&lt;/p&gt;

&lt;p&gt;Improve the warning text if a user requests an index creation which duplicates a constraint.&lt;/p&gt;</comment>
                            <comment id="14158130" author="myrna" created="Fri, 3 Oct 2014 16:02:24 +0000"  >&lt;p&gt;Mamta, looks like you missed updating a master file. See failures:&lt;br/&gt;
&lt;a href=&quot;http://download.java.net/javadesktop/derby/request_5597088/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.java.net/javadesktop/derby/request_5597088/&lt;/a&gt;&lt;br/&gt;
and:&lt;br/&gt;
&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1629103-suites.All_diff.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1629103-suites.All_diff.txt&lt;/a&gt; &lt;br/&gt;
and:&lt;br/&gt;
&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/main/linux/testSummary-1629103.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/main/linux/testSummary-1629103.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14158219" author="mamtas" created="Fri, 3 Oct 2014 17:32:11 +0000"  >&lt;p&gt;Thanks Myrna, I will fix it.&lt;/p&gt;</comment>
                            <comment id="14158301" author="jira-bot" created="Fri, 3 Oct 2014 18:27:21 +0000"  >&lt;p&gt;Commit 1629282 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mamtas&quot; class=&quot;user-hover&quot; rel=&quot;mamtas&quot;&gt;mamtas&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629282&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1629282&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6269&quot; title=&quot;Misleading warning text if you create an index duplicating a constraint.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6269&quot;&gt;&lt;del&gt;DERBY-6269&lt;/del&gt;&lt;/a&gt;(Misleading warning text if you create an index duplicating a constraint.)&lt;/p&gt;

&lt;p&gt;Fix a master diff&lt;/p&gt;</comment>
                            <comment id="14160661" author="mamtas" created="Mon, 6 Oct 2014 18:35:31 +0000"  >&lt;p&gt;Just wanted to share that I tried the script on DB2 and got a warning there as well.&lt;br/&gt;
db2 =&amp;gt; create table t(a int not null unique, b int)&lt;br/&gt;
DB20000I  The SQL command completed successfully.&lt;br/&gt;
db2 =&amp;gt; create index t_1 on t( a )&lt;br/&gt;
SQL0605W  The index was not created because an index &quot;SYSIBM.SQL141006104447770&quot; with a matching definition already exists.&lt;br/&gt;
SQLSTATE=01550&lt;/p&gt;</comment>
                            <comment id="15476561" author="knutanders" created="Fri, 9 Sep 2016 09:52:12 +0000"  >&lt;p&gt;[ Automatically closing all resolved issues that haven&apos;t been updated in more than six months. ]&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12385465">DERBY-3300</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12325084">DERBY-655</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12343486">DERBY-1343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333769</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lks7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334097</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>