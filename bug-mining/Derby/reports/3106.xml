<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:50:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6772] intermittent test failure in LangScripts schemas</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6772</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I saw a failure in LangScripts schemas.sql on a trunk test run on windows 2008 with ibm 1.7:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1) schemas(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)junit.framework.ComparisonFailure: Output at line 477 expected:&amp;lt;...                   |[BTREE (1)]      &amp;gt; but was:&amp;lt;...                   |[NULL     ]      &amp;gt;
	at org.apache.derbyTesting.functionTests.util.CanonTestCase.compareCanon(CanonTestCase.java:110)
	at org.apache.derbyTesting.functionTests.util.ScriptTestCase.runTest(ScriptTestCase.java:201)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:120)
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:443)
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:460)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:58)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See: &lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testSummary-1639825.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testSummary-1639825.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Without code changes this same test passed fine with other jvms.&lt;br/&gt;
The diff is resulting from this query:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select schemaname, tablename, descriptor as descr
from sys.sysschemas s, sys.sysconglomerates c , sys.systables t
where CAST(t.tablename AS VARCHAR(128)) = &apos;SAMPLETAB&apos;
        and s.schemaid = c.schemaid
        and c.tableid = t.tableid
order by schemaname, tablename;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This gives three rows: In the master file (removed some spaces for display):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SCHEMANAME  |TABLENAME        |DESCR
-------------------------------------------------------------------------
APP                     |SAMPLETAB        |NULL
TEST                   |SAMPLETAB        |BTREE (1)
TEST                   |SAMPLETAB        |NULL
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the failed situation, the &apos;TEST&apos; rows are ordered differently.&lt;/p&gt;</description>
                <environment>windows 2008, ibm 1.7</environment>
        <key id="12756185">DERBY-6772</key>
            <summary>intermittent test failure in LangScripts schemas</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Nov 2014 19:21:49 +0000</created>
                <updated>Fri, 9 Sep 2016 09:53:32 +0000</updated>
                            <resolved>Wed, 19 Nov 2014 17:15:49 +0000</resolved>
                                    <version>10.12.1.1</version>
                                    <fixVersion>10.12.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14216887" author="myrna" created="Tue, 18 Nov 2014 22:01:36 +0000"  >&lt;p&gt;Note that typically in this type of ordering issues we add an order by, but in this case, that would be on descriptor which is of a data type that does not support order by (error X0X67:  Columns of type &apos;org.apache.derby.catalog.IndexDescriptor&apos; may not be used in CREATE INDEX, ORDER BY, GROUP BY, UNION, INTERSECT, EXCEPT or DISTINCT statements because comparisons are not supported for that type.)&lt;/p&gt;

&lt;p&gt;One solution would be to separately select the btree row and null rows.&lt;br/&gt;
Another option is to add a column of a type that supports order by into the query in such a way that all 3 rows can be uniquely ordered. Looking at the available columns, I think adding &apos;isindex&apos; will be suitable.&lt;/p&gt;


</comment>
                            <comment id="14216917" author="myrna" created="Tue, 18 Nov 2014 22:23:22 +0000"  >&lt;p&gt;attaching a patch which makes the affected query return the rows in a fixed order.&lt;/p&gt;</comment>
                            <comment id="14216924" author="jira-bot" created="Tue, 18 Nov 2014 22:24:38 +0000"  >&lt;p&gt;Commit 1640439 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;myrna&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1640439&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1640439&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6772&quot; title=&quot;intermittent test failure in LangScripts schemas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6772&quot;&gt;&lt;del&gt;DERBY-6772&lt;/del&gt;&lt;/a&gt;; intermittent test failure in LangScripts schemas&lt;br/&gt;
   changing the affected query to return the rows in a fixed order.&lt;/p&gt;</comment>
                            <comment id="14218166" author="myrna" created="Wed, 19 Nov 2014 17:15:49 +0000"  >&lt;p&gt;nightly test runs look good w.r.t. this issue. Resolving.&lt;/p&gt;</comment>
                            <comment id="15476635" author="knutanders" created="Fri, 9 Sep 2016 09:53:32 +0000"  >&lt;p&gt;[ Automatically closing all resolved issues that haven&apos;t been updated in more than six months. ]&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12682269" name="DERBY-6772.diff" size="4635" author="myrna" created="Tue, 18 Nov 2014 22:23:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22iqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>