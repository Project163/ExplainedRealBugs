<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:54:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-3883] LOBStreamControl.replaceBytes() leaves temporary files open</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3883</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I haven&apos;t seen any problems as a result of this, but the code that closes and deletes the old temporary file in LOBStreamControl.replaceBytes() looks wrong to me.&lt;/p&gt;

&lt;p&gt;When replaceBytes() is called on a lob that has been materialized into a temporary file, it will create a new file and copy the relevant parts from the old file. But the old file is only closed and deleted if the block that is replaced ends before the last byte of the lob. I believe that the old file should be closed and deleted also when we replace a block that ends at or after the last byte of the original lob.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12405229">DERBY-3883</key>
            <summary>LOBStreamControl.replaceBytes() leaves temporary files open</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Sep 2008 11:37:00 +0000</created>
                <updated>Mon, 4 May 2009 18:21:53 +0000</updated>
                            <resolved>Tue, 30 Sep 2008 13:29:35 +0000</resolved>
                                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                                    <fixVersion>10.3.3.1</fixVersion>
                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12634825" author="knutanders" created="Fri, 26 Sep 2008 11:46:46 +0000"  >&lt;p&gt;The attached patch moves the code that closes/deletes the old temporary file out of the if block that it&apos;s currently in, so that it will be executed each time replaceBytes() has switched to a new file.&lt;/p&gt;

&lt;p&gt;suites.All ran cleanly with the patch. I&apos;ll also run derbyall, and I will see if I can write some code that exposes the problem and check manually that the patch solves it.&lt;/p&gt;</comment>
                            <comment id="12635741" author="knutanders" created="Tue, 30 Sep 2008 13:19:43 +0000"  >&lt;p&gt;The attached Java class shows the problem. Without the fix, the number of files in tmp just keeps growing. With the fix, the total number of temporary files never exceeds 2.&lt;/p&gt;</comment>
                            <comment id="12635743" author="knutanders" created="Tue, 30 Sep 2008 13:29:35 +0000"  >&lt;p&gt;Committed revision 700463.&lt;/p&gt;</comment>
                            <comment id="12635822" author="knutanders" created="Tue, 30 Sep 2008 19:32:44 +0000"  >&lt;p&gt;Merged to 10.4 with revision 700562.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12391215" name="Derby3883.java" size="703" author="knutanders" created="Tue, 30 Sep 2008 13:19:43 +0000"/>
                            <attachment id="12391013" name="d3883.diff" size="683" author="knutanders" created="Fri, 26 Sep 2008 11:46:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i073kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>