<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:45:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-6567] Incorrect nullability for CASE expression with parameter</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6567</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This JUnit test code fails because it detects that the query returns null even though the result column is reported as not nullable:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        PreparedStatement ps = prepareStatement(
                &lt;span class=&quot;code-quote&quot;&gt;&quot;values &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; when &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; then 1 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; ? end&quot;&lt;/span&gt;);
        ps.setNull(1, Types.INTEGER);
        JDBC.assertSingleValueResultSet(ps.executeQuery(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12713099">DERBY-6567</key>
            <summary>Incorrect nullability for CASE expression with parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 May 2014 14:34:59 +0000</created>
                <updated>Fri, 9 Sep 2016 09:54:04 +0000</updated>
                            <resolved>Wed, 15 Oct 2014 16:29:58 +0000</resolved>
                                    <version>10.10.2.0</version>
                                    <fixVersion>10.10.2.1</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13993009" author="knutanders" created="Thu, 8 May 2014 18:51:46 +0000"  >&lt;p&gt;The attached patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12643989/12643989_d6567-1a.diff&quot; title=&quot;d6567-1a.diff attached to DERBY-6567&quot;&gt;d6567-1a.diff&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; fixes the problem by setting the nullability of ConditionalNode based on the nullability of the THEN and ELSE expressions. If (and only if) at least one of the THEN and ELSE expressions is nullable, the result of the CASE expression is also nullable. The patch also adds a test case that verifies the fix.&lt;/p&gt;

&lt;p&gt;The regression tests ran cleanly with the patch.&lt;/p&gt;</comment>
                            <comment id="13993448" author="jira-bot" created="Fri, 9 May 2014 07:12:48 +0000"  >&lt;p&gt;Commit 1593495 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;knutanders&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1593495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1593495&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6567&quot; title=&quot;Incorrect nullability for CASE expression with parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6567&quot;&gt;&lt;del&gt;DERBY-6567&lt;/del&gt;&lt;/a&gt;: Incorrect nullability for CASE expression with parameter&lt;/p&gt;

&lt;p&gt;Make sure the result of a CASE expression is nullable if (and only if)&lt;br/&gt;
at least one of the result expressions is nullable.&lt;/p&gt;</comment>
                            <comment id="14010024" author="mikem" created="Tue, 27 May 2014 18:13:28 +0000"  >&lt;p&gt;review of list of issues fixed in 10.11 but not in 10.10 for possible compatibility issues in upcoming release.&lt;/p&gt;

&lt;p&gt;Behavior change is a bug fix, which could be applied to 10.10.  May cause application incompatibility, but&lt;br/&gt;
would fall under &quot;bug compatible&quot; and would not stop us from backporting.  Fix looks valid to backport to 10.10 to me.&lt;/p&gt;</comment>
                            <comment id="14169456" author="mikem" created="Mon, 13 Oct 2014 16:13:27 +0000"  >&lt;p&gt;reopening and temp assigning myself for 10.10 backport.&lt;/p&gt;</comment>
                            <comment id="14169463" author="jira-bot" created="Mon, 13 Oct 2014 16:17:59 +0000"  >&lt;p&gt;Commit 1631457 from mikem@apache.org in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1631457&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1631457&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6567&quot; title=&quot;Incorrect nullability for CASE expression with parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6567&quot;&gt;&lt;del&gt;DERBY-6567&lt;/del&gt;&lt;/a&gt;: Incorrect nullability for CASE expression with parameter&lt;/p&gt;

&lt;p&gt;backported change#1593495 from trunk to 10.10 branch.&lt;/p&gt;

&lt;p&gt;Make sure the result of a CASE expression is nullable if (and only if)&lt;br/&gt;
at least one of the result expressions is nullable.&lt;/p&gt;</comment>
                            <comment id="14172547" author="mikem" created="Wed, 15 Oct 2014 16:29:58 +0000"  >&lt;p&gt;backported to 10.10, resolving and reassigning to original owner.&lt;/p&gt;</comment>
                            <comment id="15476667" author="knutanders" created="Fri, 9 Sep 2016 09:54:04 +0000"  >&lt;p&gt;[ Automatically closing all resolved issues that haven&apos;t been updated in more than six months. ]&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12746192">DERBY-6759</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643989" name="d6567-1a.diff" size="3480" author="knutanders" created="Thu, 8 May 2014 18:51:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vevr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>