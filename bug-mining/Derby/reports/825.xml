<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 13:32:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-2083] Shutting down a database loaded from a jar leaves an open file reference to the jar file containing the database.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2083</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The shutdown() method of JarStorageFactory probably needs to close the zipData file but adding that code changes the behaviour of shutting down such a database to report database not found instead of database shutdown.&lt;/p&gt;

&lt;p&gt;Even with the above method changed and the problem fixed there may be a store error in that I couldn&apos;t see any store code that calls StorageFactory.shutdown() for the data segement, in this case the database is read only since it is from a jar.&lt;/p&gt;

&lt;p&gt;Seen in some new test cases being added to DatabaseClassLoadingTest (in the conversion from dcl.sql)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12355564">DERBY-2083</key>
            <summary>Shutting down a database loaded from a jar leaves an open file reference to the jar file containing the database.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djd">Daniel John Debrunner</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Nov 2006 04:56:17 +0000</created>
                <updated>Tue, 12 Dec 2006 16:03:54 +0000</updated>
                            <resolved>Tue, 12 Dec 2006 16:03:54 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Services</component>
                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12456152" author="djd" created="Wed, 6 Dec 2006 18:15:11 +0000"  >&lt;p&gt;Patch so that the store calls shutdown() on its StorageFactory. Is only a partial solution as the shutdown() method for all StorageFactory implementations is empty but is required as part of the api and will take effect once the StorageFactory shutdown method for database in a jar closes its ZipFile.&lt;/p&gt;

&lt;p&gt;I believe the bug that changes the error message when closing the zip is addedis in the monitor. I&apos;ll be addressing that with a separate patch.&lt;/p&gt;</comment>
                            <comment id="12456155" author="djd" created="Wed, 6 Dec 2006 18:16:01 +0000"  >&lt;p&gt;Running tests on patch, don&apos;t expect any failures since (at the moment) it&apos;s just adding calls that do nothing.&lt;/p&gt;</comment>
                            <comment id="12456538" author="djd" created="Thu, 7 Dec 2006 19:00:59 +0000"  >&lt;p&gt;Committed revision 483606 fixes the issue.&lt;/p&gt;</comment>
                            <comment id="12456730" author="oysteing" created="Fri, 8 Dec 2006 08:53:55 +0000"  >&lt;p&gt;The tinderbox test indicates that something has been broken by this fix.&lt;br/&gt;
Several tests now fail with:&lt;/p&gt;

&lt;p&gt;&amp;gt; ERROR XCY03: Required property &apos;derby.serviceProtocol&apos; has not been set.&lt;/p&gt;</comment>
                            <comment id="12457773" author="djd" created="Tue, 12 Dec 2006 16:03:54 +0000"  >&lt;p&gt;Revision  484672 fixes the backup problem introduced with the first set of changes.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12346579" name="d2083_store_shutdown_diff.txt" size="942" author="djd" created="Wed, 6 Dec 2006 18:15:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0799j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>