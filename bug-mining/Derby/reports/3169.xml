<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 14:51:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DERBY-7003] Jacoco test run needs another permission</title>
                <link>https://issues.apache.org/jira/browse/DERBY-7003</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When I run the jacoco-complete target, I see FilePermission errors because write permission has not been granted to trunk/jacoco.exec. Read/write permissions are granted to the user.dir directory, which is a directory tree parallel to jacoco.exec. The following permission needs to be granted to the jacoco jars:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  permission java.io.FilePermission &quot;${jacoco.active}${user.dir}${/}..${/}jacoco.exec&quot;, &quot;read, write&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13170751">DERBY-7003</key>
            <summary>Jacoco test run needs another permission</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rhillegas">Richard N. Hillegas</assignee>
                                    <reporter username="rhillegas">Richard N. Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Sun, 8 Jul 2018 23:14:13 +0000</created>
                <updated>Thu, 12 Jul 2018 22:42:13 +0000</updated>
                                            <version>10.15.1.3</version>
                                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16536458" author="rhillegas" created="Mon, 9 Jul 2018 00:06:30 +0000"  >&lt;p&gt;Attaching derby-7003-01-aa-extraJacocoPermission.diff. This patch adds an extra permission to the jacoco-sensitive policy files. Hopefully, this will let jacoco run without errors. I will run jacoco-complete as well as the usual test run.&lt;/p&gt;

&lt;p&gt;Adds the following permission to the jacoco-sensitive policy files:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  permission java.io.FilePermission &quot;${jacoco.active}${user.dir}${/}..${/}jacoco.exec&quot;, &quot;read, write&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;----------------------------------------

M       build.xml

Make the clobber target delete jacoco.exec if it exists.

----------------------------------------

 M      .
 M      tools/java

Make svn ignore jacoco-related files: the jacoco jars in tools/java
and the jacoco output file jacoco.exec.

----------------------------------------

M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy
 M      java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/engine
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/luceneSupport.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/resultSetReader.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/store/Derby3980DeadlockTest.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/derby_tests.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.policy
M       java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest2.policy

Add the extra permission to these policy files.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16539416" author="rhillegas" created="Wed, 11 Jul 2018 00:49:24 +0000"  >&lt;p&gt;Attaching derby-7003-01-ab-extraJacocoPermission.diff. This patch further tweaks the svn:ignore files bound to the root directory.&lt;/p&gt;

&lt;p&gt;I have discovered something awkward about the jacoco machinery: When you run the replication tests outside the jacoco target, they trip over NullPointerExceptions if the jacoco jars are in tools/java. Lesson learned: remove the jacoco jars from that directory when you are done running jacoco.&lt;/p&gt;

&lt;p&gt;I will re-run tests both with and without jacoco.&lt;/p&gt;</comment>
                            <comment id="16539429" author="bryanpendleton" created="Wed, 11 Jul 2018 01:19:31 +0000"  >&lt;p&gt;Ugh! That is annoying, thanks for tracking it down. Should we file a separate JIRA issue to try to improve the jacoco experience?&lt;/p&gt;</comment>
                            <comment id="16540026" author="jira-bot" created="Wed, 11 Jul 2018 12:35:22 +0000"  >&lt;p&gt;Commit 1835636 from rhillegas@apache.org in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1835636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1835636&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-7003&quot; title=&quot;Jacoco test run needs another permission&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-7003&quot;&gt;DERBY-7003&lt;/a&gt;: Add extra FilePermission to the jacoco test runs; tests passed cleanly on derby-7003-01-ab-extraJacocoPermission.diff.&lt;/p&gt;</comment>
                            <comment id="16540044" author="rhillegas" created="Wed, 11 Jul 2018 12:48:22 +0000"  >&lt;p&gt;That&apos;s a good idea, Bryan. I have logged 7004 to track the problem.&lt;/p&gt;</comment>
                            <comment id="16542282" author="rhillegas" created="Thu, 12 Jul 2018 22:42:13 +0000"  >&lt;p&gt;Here are some problems which still appear in the jacoco output after committing the previous patch:&lt;/p&gt;

&lt;p&gt;    In case someone else wants to spend some time on jacoco, here are some errors which I found in the jenkins pipeline tab (in addition to the tests errors):&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;Derby-JaCoCo&amp;#93;&lt;/span&gt; $ /bin/bash -xe /tmp/jenkins6682900521189757649.sh&lt;br/&gt;
    + echo &apos;JAVA_HOME: /home/jenkins/tools/java/latest1.9&apos;&lt;br/&gt;
    JAVA_HOME: /home/jenkins/tools/java/latest1.9&lt;br/&gt;
    + jacoco_version=0.7.9&lt;br/&gt;
    + jacoco_zip_sha1=1d56a66be0f4a6b529d8f983ab65cc77a52cccb6&lt;br/&gt;
    + jacocoant_sha1=87aa22de3854fd5a43e37a17c4b245b01a46de93&lt;br/&gt;
    + jacocoagent_sha1=a6ac9cca89d889222a40dab9dd5039bfd22a4cff&lt;br/&gt;
    + cat&lt;br/&gt;
    + sha1sum -c sha1sum.txt&lt;br/&gt;
    sha1sum: trunk/tools/java/jacocoant.jar: No such file or directory&lt;br/&gt;
    trunk/tools/java/jacocoant.jar: FAILED open or read&lt;br/&gt;
    sha1sum: trunk/tools/java/jacocoagent.jar: No such file or directory&lt;br/&gt;
    trunk/tools/java/jacocoagent.jar: FAILED open or read&lt;br/&gt;
    sha1sum: WARNING: 2 listed files could not be read&lt;/p&gt;

&lt;p&gt;    ----------------------&lt;/p&gt;

&lt;p&gt;        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; (net)derbynet.Utf8CcsidManagerClientTest.testInvalidCharacters used 3 ms Tests run: 340, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 316.45 sec&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.derbyTesting.functionTests.tests.derbynet._Suite FAILED&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.derbyTesting.functionTests.tests.tools._Suite&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;    ----------------------&lt;/p&gt;

&lt;p&gt;        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; used 4002 ms Tests run: 8015, Failures: 0, Errors: 8, Skipped: 0, Time elapsed: 1,563.687 sec&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.derbyTesting.functionTests.tests.jdbcapi._Suite FAILED&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.derbyTesting.functionTests.tests.store._Suite&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;    ----------------------&lt;/p&gt;

&lt;p&gt;        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   (subprocess)     at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   (subprocess) 2) testModifyThreadGroup(org.apache.derbyTesting.unitTests.junit.MissingPermissionsTest)java.lang.NullPointerException&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   (subprocess)     at org.apache.derby.iapi.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:136)&lt;br/&gt;
        &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   (subprocess)     at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:678)&lt;/p&gt;

&lt;p&gt;    ----------------------&lt;/p&gt;


&lt;p&gt;    See &amp;lt;&lt;a href=&quot;https://builds.apache.org/job/Derby-JaCoCo/314/display/redirect?page=changes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Derby-JaCoCo/314/display/redirect?page=changes&lt;/a&gt;&amp;gt;&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13171401">DERBY-7004</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12930769" name="derby-7003-01-aa-extraJacocoPermission.diff" size="11692" author="rhillegas" created="Mon, 9 Jul 2018 00:05:57 +0000"/>
                            <attachment id="12931089" name="derby-7003-01-ab-extraJacocoPermission.diff" size="11595" author="rhillegas" created="Wed, 11 Jul 2018 00:46:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vnnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>