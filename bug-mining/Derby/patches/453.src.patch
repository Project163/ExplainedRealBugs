diff --git a/java/engine/org/apache/derby/iapi/types/Like.java b/java/engine/org/apache/derby/iapi/types/Like.java
index e9eb358c2..0f822ed7f 100644
--- a/java/engine/org/apache/derby/iapi/types/Like.java
+++ b/java/engine/org/apache/derby/iapi/types/Like.java
@@ -688,22 +688,22 @@ public class Like {
 		return (firstChar != anyChar && firstChar != anyString);
 	}
 
-	public static String greaterEqualStringFromParameter(String pattern)
+	public static String greaterEqualStringFromParameter(String pattern, int maxWidth)
 		throws StandardException {
 
 		if (pattern == null)
 			return null;
 
-		return greaterEqualString(pattern, (String) null);
+		return greaterEqualString(pattern, (String) null, maxWidth);
 	}
 
-	public static String greaterEqualStringFromParameterWithEsc(String pattern, String escape)
+	public static String greaterEqualStringFromParameterWithEsc(String pattern, String escape, int maxWidth)
 		throws StandardException {
 
 		if (pattern == null)
 			return null;
 
-		return greaterEqualString(pattern, escape);
+		return greaterEqualString(pattern, escape, maxWidth);
 	}
 
 	/**
@@ -711,10 +711,11 @@ public class Like {
 	 *
 	 * @param pattern	The right side of the LIKE
 	 * @param escape	The escape clause
+	 * @param maxWidth	Maximum length of column, for null padding
 	 *
 	 * @return	The String for the >= clause
 	 */
-	public static String greaterEqualString(String pattern, String escape)
+	public static String greaterEqualString(String pattern, String escape, int maxWidth)
 	    throws StandardException
 	{
 
@@ -735,32 +736,29 @@ public class Like {
 				// we return a string stripping out the escape char
 				// leaving the _? in place as normal chars.
                 
-				return greaterEqualString(pattern, escChar);
+				return padWithNulls(greaterEqualString(pattern, escChar), maxWidth);
 			}
 			// drop through if no escape found
 		}
 
 		if (firstAnyChar == -1)
 		{
-			if (firstAnyString == -1)
-			{
-				return pattern;
-			}
-			else	// no _, found %
+			if (firstAnyString != -1) // no _, found %
 			{
-				return pattern.substring(0, firstAnyString);
+				pattern = pattern.substring(0, firstAnyString);
 			}
 		}
 		else if (firstAnyString == -1)
 		{
-			return pattern.substring(0, firstAnyChar);
+			pattern = pattern.substring(0, firstAnyChar);
 		}
 		else
 		{
-			return pattern.substring(0, (firstAnyChar > firstAnyString) ? 
-										firstAnyString :
-										firstAnyChar);
+			pattern = pattern.substring(0, (firstAnyChar > firstAnyString) ? 
+											firstAnyString :
+											firstAnyChar);
 		}
+		return padWithNulls(pattern, maxWidth);
 	}
 
     /** 
@@ -867,11 +865,12 @@ public class Like {
 	 * at the end of the pattern literal.    See LikeEscapeOp*Node.preprocess.
 	 *
 	 * @param pattern	The right side of the LIKE
+	 * @param maxWidth	Maximum length of column, for null padding
 	 *
 	 * @return	The String for the < clause
 	 * @exception StandardException thrown if data invalid
 	 */
-	public static String lessThanString(String pattern)
+	public static String lessThanString(String pattern, int maxWidth)
 		throws StandardException
 	{
 		//int		firstAnyChar = pattern.indexOf(anyChar);
@@ -902,21 +901,23 @@ public class Like {
 		charArray = pattern.substring(0, lastUsableChar + 1).toCharArray();
 		charArray[lastUsableChar] = newLastChar;
 
-		return new String(charArray);
+		return padWithNulls(new String(charArray), maxWidth);
 	}
 
-	public static String lessThanStringFromParameter(String pattern) throws StandardException {
+	public static String lessThanStringFromParameter(String pattern, int maxWidth)
+		throws StandardException 
+	{
 		if (pattern == null)
 			return null;
-		return lessThanString(pattern, null);
+		return lessThanString(pattern, null, maxWidth);
 	}
 
-	public static String lessThanStringFromParameterWithEsc(String pattern, String escape)
-		 throws StandardException
+	public static String lessThanStringFromParameterWithEsc(String pattern, String escape, int maxWidth)
+		throws StandardException
 	{
 		if (pattern == null)
 			return null;
-		return lessThanString(pattern, escape);
+		return lessThanString(pattern, escape, maxWidth);
 	}
 
 	/**
@@ -929,11 +930,12 @@ public class Like {
 	 *
 	 * @param pattern	The right side of the LIKE
 	 * @param escape	The escape clause
+	 * @param maxWidth	Maximum length of column, for null padding
 	 *
 	 * @return	The String for the < clause
 	 * @exception StandardException thrown if data invalid
 	 */
-	public static String lessThanString(String pattern, String escape)
+	public static String lessThanString(String pattern, String escape, int maxWidth)
 		throws StandardException
 	{
 		int		lastUsableChar;
@@ -1033,7 +1035,7 @@ public class Like {
 			charArray = pattern.substring(0, lastUsableChar + 1).toCharArray();
 			charArray[lastUsableChar] = newLastChar;
 
-			return new String(charArray);
+			return padWithNulls(new String(charArray), maxWidth);
 		}
 		char[] patternChars = new char[patternLen];
 		char[] result = new char[patternLen];
@@ -1058,7 +1060,7 @@ public class Like {
 		}
 		result[r++] = newLastChar;
 		String gt = new String(result, 0, r);
-		return gt;
+		return padWithNulls(gt, maxWidth);
 	}
 	
 	/**
@@ -1102,4 +1104,23 @@ public class Like {
 
 		return false;
 	}
+
+	/**
+	 * Pad a string with null characters, in order to make it &gt; and &lt;
+	 * comparable with SQLChar.
+	 * 
+	 * @param string	The string to pad
+	 * @param len		Max number of characters to pad to
+	 * @returns the string padded with 0s up to the given length
+	 */
+	private static String padWithNulls(String string, int len) 
+	{
+		if(string.length() >= len)
+			return string;
+
+		StringBuffer buf = new StringBuffer(len).append(string);
+		buf.setLength(len);
+		
+		return buf.toString();
+	}
 }
diff --git a/java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java b/java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java
index 1c8706a22..9291debd7 100644
--- a/java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java
+++ b/java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java
@@ -552,7 +552,9 @@ public final class LikeEscapeOperatorNode extends TernaryOperatorNode
 				return this;
 			}
 
-			greaterEqualString = Like.greaterEqualString(pattern, escape);
+			int maxWidth = receiver.getTypeServices().getMaximumWidth();
+			greaterEqualString = Like.greaterEqualString(pattern, escape, 
+														 maxWidth);
 
 
 
@@ -561,7 +563,7 @@ public final class LikeEscapeOperatorNode extends TernaryOperatorNode
 			 */
             if ( ! receiver.getTypeId().isNationalStringTypeId() )
 			{
-				lessThanString = Like.lessThanString(greaterEqualString);
+				lessThanString = Like.lessThanString(pattern, escape, maxWidth);
 				eliminateLikeComparison = ! Like.isLikeComparisonNeeded(pattern);
 			}
 		}
@@ -608,8 +610,9 @@ public final class LikeEscapeOperatorNode extends TernaryOperatorNode
 			QueryTreeNode likeLTopt;
 			if (leftOperand.requiresTypeFromContext())
 			{
+				int maxWidth = receiver.getTypeServices().getMaximumWidth();
 				likeLTopt = setupOptimizeStringFromParameter(leftOperand, rightOperand,
-								"lessThanStringFromParameter");
+								"lessThanStringFromParameter", maxWidth);
 			}
 			else
 			{
@@ -653,8 +656,9 @@ public final class LikeEscapeOperatorNode extends TernaryOperatorNode
 			// Create an expression off the parameter
 			// new SQLChar(Like.greaterEqualString(?));
 
+			int maxWidth = receiver.getTypeServices().getMaximumWidth();
 			likeGEopt = setupOptimizeStringFromParameter(leftOperand, rightOperand,
-									"greaterEqualStringFromParameter");
+								"greaterEqualStringFromParameter", maxWidth);
 
 		} else {
 
@@ -787,7 +791,7 @@ public final class LikeEscapeOperatorNode extends TernaryOperatorNode
 	}
 
 	private ValueNode setupOptimizeStringFromParameter(ValueNode parameterNode,
-						ValueNode escapeNode,String methodName)
+						ValueNode escapeNode,String methodName, int maxWidth)
 		throws StandardException {
 
 		Vector param;
@@ -812,6 +816,12 @@ public final class LikeEscapeOperatorNode extends TernaryOperatorNode
 		if (escapeNode != null)
 			param.addElement(escapeNode);
 
+		QueryTreeNode maxWidthNode = getNodeFactory().getNode(
+										C_NodeTypes.INT_CONSTANT_NODE,
+										new Integer(maxWidth),
+										getContextManager());
+		param.addElement(maxWidthNode);
+
 		methodCall.addParms(param);
 
 
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/dynamicLikeOptimization.out b/java/testing/org/apache/derbyTesting/functionTests/master/dynamicLikeOptimization.out
index 532c37c4e..c055681a0 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/dynamicLikeOptimization.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/dynamicLikeOptimization.out
@@ -501,6 +501,24 @@ ID         |NAME
 ij> execute s using 'values (''Bogus'', ''Name'')';
 ID         |NAME                                                                                                                                                                                            |SOURCE                                                                                                                                                                                                                                                      
 -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
+ij> -- test control characters
+insert into test values ('asdp', 'asdp', 'asdp');
+1 row inserted/updated/deleted
+ij> insert into test values ('aseg', 'aseg', 'aseg');
+1 row inserted/updated/deleted
+ij> prepare p1 as 'select id from test where c10 like ?';
+ij> execute p1 using 'values ''asd%'' ';
+ID        
+----------
+asdf      
+asdg      
+asdp     
+ij> select c10 from test where c10 like 'asd%';
+C10       
+----------
+asdf      
+asdg      
+asdp     
 ij> -- clean up
 drop table test;
 0 rows inserted/updated/deleted
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dynamicLikeOptimization.sql b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dynamicLikeOptimization.sql
index a7aec7538..050e909bf 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dynamicLikeOptimization.sql
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dynamicLikeOptimization.sql
@@ -169,6 +169,13 @@ execute s using 'values (''W%'', ''Warn\%Unlock\%Door'')';
 execute s using 'values (''%ing'', ''W\_Unlock\_%Door'')';
 execute s using 'values (''Bogus'', ''Name'')';
 
+-- test control characters
+insert into test values ('asdp', 'asdp', 'asdp');
+insert into test values ('aseg', 'aseg', 'aseg');
+prepare p1 as 'select id from test where c10 like ?';
+execute p1 using 'values ''asd%'' ';
+select c10 from test where c10 like 'asd%';
+
 -- clean up
 drop table test;
 drop table likeable;
