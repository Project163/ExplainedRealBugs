diff --git a/java/engine/org/apache/derby/iapi/types/SQLDouble.java b/java/engine/org/apache/derby/iapi/types/SQLDouble.java
index 32588b110..3959f93a3 100644
--- a/java/engine/org/apache/derby/iapi/types/SQLDouble.java
+++ b/java/engine/org/apache/derby/iapi/types/SQLDouble.java
@@ -36,6 +36,7 @@ import java.io.ObjectOutput;
 import java.io.ObjectInput;
 import java.io.IOException;
 
+import java.math.BigDecimal;
 import java.sql.ResultSet;
 import java.sql.PreparedStatement;
 import java.sql.SQLException;
@@ -442,8 +443,24 @@ public final class SQLDouble extends NumberDataType
 		// Note BigDecimal.doubleValue() handles the case where
 		// its value is outside the range of a double. It returns
 		// infinity values which should throw an exception in setValue(double).
-		setValue(bigDecimal.doubleValue());
-		
+
+        double v = bigDecimal.doubleValue();
+
+        if (v == 0) {
+            // We need to catch underflow here, since BigDecimal#doubleValue it
+            // just returns 0 (i.e. no exception).
+            boolean isZero =
+                ((BigDecimal) bigDecimal).compareTo(BigDecimal.ZERO) == 0;
+
+            if (!isZero) {
+                throw StandardException.
+                    newException(SQLState.LANG_OUTSIDE_RANGE_FOR_DATATYPE,
+                                 TypeId.REAL_NAME);
+            }
+        }
+
+        setValue(v);
+
 	}
 
 	/**
diff --git a/java/engine/org/apache/derby/iapi/types/SQLReal.java b/java/engine/org/apache/derby/iapi/types/SQLReal.java
index 4ad1d50f3..aa72b1636 100644
--- a/java/engine/org/apache/derby/iapi/types/SQLReal.java
+++ b/java/engine/org/apache/derby/iapi/types/SQLReal.java
@@ -36,6 +36,7 @@ import java.io.ObjectOutput;
 import java.io.ObjectInput;
 import java.io.IOException;
 
+import java.math.BigDecimal;
 import java.sql.ResultSet;
 import java.sql.PreparedStatement;
 import java.sql.SQLException;
@@ -398,9 +399,25 @@ public final class SQLReal
 
 		// Note BigDecimal.floatValue() handles the case where
 		// its value is outside the range of a float. It returns
-		// infinity values which should throw an exception in setValue(double).
-		setValue(bigDecimal.floatValue());
-		
+        // infinity values which should throw an exception in setValue(float).
+
+        float v = bigDecimal.floatValue();
+
+        if (v == 0) {
+            // We need to catch underflow here, since BigDecimal#floatValue it
+            // just returns 0 (i.e. no exception).
+            boolean isZero =
+                ((BigDecimal) bigDecimal).compareTo(BigDecimal.ZERO) == 0;
+
+            if (!isZero) {
+                throw StandardException.
+                    newException(SQLState.LANG_OUTSIDE_RANGE_FOR_DATATYPE,
+                                 TypeId.REAL_NAME);
+            }
+        }
+
+        setValue(v);
+
 	}
 
 	public void setValue(float theValue)
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/ParameterMappingTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/ParameterMappingTest.java
index 371523d30..89154db32 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/ParameterMappingTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/ParameterMappingTest.java
@@ -4758,11 +4758,11 @@ public class ParameterMappingTest extends BaseJDBCTestCase {
         }
 
         // REAL Underflow checking
-        //
-        // Uncomment when DERBY-5546 is fixed:
-        // assertUpdateState(rs, "F04", bdSmallestPosDoubleValue, "22003");
-        // assertUpdateState(rs, "F04", bdSmallestNegDoubleValue, "22003");
-
+        // Remove test when DERBY-5534 is fixed
+        if (usingEmbedded()) {
+            assertUpdateState(rs, "F04", bdSmallestPosDoubleValue, "22003");
+            assertUpdateState(rs, "F04", bdSmallestNegDoubleValue, "22003");
+        }
 
         // DOUBLE, FLOAT (SQL FLOAT is really the same as SQL DOUBLE in Derby)
         final String[] dfCols = new String[]{"F05", "F06"};
@@ -4802,12 +4802,13 @@ public class ParameterMappingTest extends BaseJDBCTestCase {
             }
 
             // DOUBLE, FLOAT underflow checking
-            //
-            // Uncomment when DERBY-5546 is fixed
-            // assertUpdateState(rs, dfCols[i],
-            //     bdSmallestPosDoubleValue.divide(BigDecimal.TEN), "22003");
-            // assertUpdateState(rs, dfCols[i],
-            //     bdSmallestNegDoubleValue.divide(BigDecimal.TEN), "22003");
+            // Remove test when DERBY-5534 is fixed
+            if (usingEmbedded()) {
+                assertUpdateState(rs, dfCols[i],
+                    bdSmallestPosDoubleValue.divide(BigDecimal.TEN), "22003");
+                assertUpdateState(rs, dfCols[i],
+                    bdSmallestNegDoubleValue.divide(BigDecimal.TEN), "22003");
+            }
         }
 
         // Derby BOOLEAN: not range checked: FALSE of 0, else TRUE.
