diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/qualifiedIdentifiers.out b/java/testing/org/apache/derbyTesting/functionTests/master/qualifiedIdentifiers.out
index 0dca610f0..589d9f283 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/qualifiedIdentifiers.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/qualifiedIdentifiers.out
@@ -56,9 +56,9 @@ B
 200        
 300        
 ij(DERBY4550_1)> remove fred_select2;
-ij(DERBY4550_1)> -- setup cursor/switch connection/use
-get scroll insensitive cursor fred_cursor as 'select b from t1';
 ij(DERBY4550_1)> set connection DERBY4550_2;
+ij(DERBY4550_2)> -- cursors
+get scroll insensitive cursor fred_cursor@DERBY4550_1 as 'select b from t1';
 ij(DERBY4550_2)> next fred_cursor@DERBY4550_1;
 B          
 -----------
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/tools/qualifiedIdentifiers.sql b/java/testing/org/apache/derbyTesting/functionTests/tests/tools/qualifiedIdentifiers.sql
index 2697c82fd..0c58a003b 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/tools/qualifiedIdentifiers.sql
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/tools/qualifiedIdentifiers.sql
@@ -40,9 +40,10 @@ set connection DERBY4550_1;
 execute fred_select2;
 remove fred_select2;
 
--- setup cursor/switch connection/use
-get scroll insensitive cursor fred_cursor as 'select b from t1';
 set connection DERBY4550_2;
+
+-- cursors
+get scroll insensitive cursor fred_cursor@DERBY4550_1 as 'select b from t1';
 next fred_cursor@DERBY4550_1;
 -- getcurrentrownumber fred_cursor@DERBY4550_1;
 last fred_cursor@DERBY4550_1;
diff --git a/java/tools/org/apache/derby/impl/tools/ij/ij.jj b/java/tools/org/apache/derby/impl/tools/ij/ij.jj
index cf4104755..080e02d13 100644
--- a/java/tools/org/apache/derby/impl/tools/ij/ij.jj
+++ b/java/tools/org/apache/derby/impl/tools/ij/ij.jj
@@ -2224,7 +2224,7 @@ throws SQLException
 		try {
 			Session sn = findSession(qi.getSessionName());
 			
-			st = theConnection.createStatement(
+			st = sn.getConnection().createStatement(
 				scrollType, ResultSet.CONCUR_READ_ONLY, holdType);
 			JDBCDisplayUtil.checkNotNull(st,"cursor");
 			st.setCursorName(qi.getLocalName());
