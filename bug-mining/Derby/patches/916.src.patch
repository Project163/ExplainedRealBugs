diff --git a/java/drda/org/apache/derby/impl/drda/TestProto.java b/java/drda/org/apache/derby/impl/drda/TestProto.java
index a8d662500..c1c0506fe 100644
--- a/java/drda/org/apache/derby/impl/drda/TestProto.java
+++ b/java/drda/org/apache/derby/impl/drda/TestProto.java
@@ -189,7 +189,7 @@ public class TestProto {
 			// the location is different, try it
 			String userdir =  System.getProperty("user.dir");
 			String sep =  System.getProperty("file.separator");
-			fr = new BufferedReader (new InputStreamReader(new FileInputStream(userdir + sep + "extin" + sep + filename),"UTF-8"));
+			fr = new BufferedReader (new InputStreamReader(new FileInputStream(userdir + sep + filename),"UTF-8"));
 		}
 		tkn = new StreamTokenizer(fr);
 		int val;
diff --git a/java/testing/org/apache/derbyTesting/functionTests/suites/derbynetmats.runall b/java/testing/org/apache/derbyTesting/functionTests/suites/derbynetmats.runall
index 1673e7717..f5f552997 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/suites/derbynetmats.runall
+++ b/java/testing/org/apache/derbyTesting/functionTests/suites/derbynetmats.runall
@@ -9,6 +9,7 @@ derbynet/maxthreads.java
 derbynet/runtimeinfo.java
 derbynet/sysinfo.java
 derbynet/sysinfo_withproperties.java
+derbynet/testProtocol.java
 derbynet/testProperties.java
 derbynet/testconnection.java
 derbynet/testij.java
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/testProtocol.java b/java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/testProtocol.java
index 3c49396e3..0ce6ea391 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/testProtocol.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/testProtocol.java
@@ -22,7 +22,8 @@
 package org.apache.derbyTesting.functionTests.tests.derbynet;
 
 import org.apache.derby.impl.drda.TestProto;
-
+import org.apache.derbyTesting.junit.TestConfiguration;
+import java.io.File;
 
 /**
 	This tests protocol errors and protocol not used by JCC or derbyclient
@@ -30,18 +31,21 @@ import org.apache.derby.impl.drda.TestProto;
 
 public class testProtocol { 
 
-	private static final String DEFAULT_FILENAME = "extin/protocol.tests";
-	
+	private static final String DEFAULT_FILENAME = "extin" + File.separator + "protocol.tests";
+	private static final String OLD_HARNESS_FILENAME = "protocol.tests";
+
 	// constructor
 	public testProtocol() {}
 	
-
 	/**
 	 * main routine
 	 */
     public static void main(String[] args) {
 		
-		executeFile(DEFAULT_FILENAME);
+    	if (TestConfiguration.runningInDerbyHarness())
+    		executeFile(OLD_HARNESS_FILENAME);
+    	else
+		    executeFile(DEFAULT_FILENAME);
 	}
 	/**
 	 * Execute a command file against a network server
