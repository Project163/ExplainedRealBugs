diff --git a/java/engine/org/apache/derby/iapi/util/IdUtil.java b/java/engine/org/apache/derby/iapi/util/IdUtil.java
index 43f1a3a95..3855b8336 100644
--- a/java/engine/org/apache/derby/iapi/util/IdUtil.java
+++ b/java/engine/org/apache/derby/iapi/util/IdUtil.java
@@ -746,7 +746,7 @@ public abstract class IdUtil
 	 */
 	public static String parseRoleId(String roleName) throws StandardException
 	{
-		roleName.trim();
+		roleName = roleName.trim();
 		// NONE is a special case and is not allowed with its special
 		// meaning in SET ROLE <value specification>. Even if there is
 		// a role with case normal form "NONE", we require it to be
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/RolesTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/RolesTest.java
index d3ac2dfb3..34f8c2796 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/RolesTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/RolesTest.java
@@ -1060,6 +1060,23 @@ public class RolesTest extends BaseJDBCTestCase
             fail("execute of set role ? failed: [foo]" + e, e);
         }
 
+        // Test that trimming works:
+        try {
+            pstmt.setString(1, " BAR ");
+            int rowcnt = pstmt.executeUpdate();
+            assertEquals("rowcount from set role ? not 0", rowcnt, 0);
+        } catch (SQLException e) {
+            fail("execute of set role ? failed: [foo]" + e, e);
+        }
+
+        try {
+            int rowcnt = conn.createStatement().executeUpdate(
+                "set role ' BAR '");
+            assertEquals("rowcount from set role ? not 0", rowcnt, 0);
+        } catch (SQLException e) {
+            fail("execute of set role ? failed: [foo]" + e, e);
+        }
+
 
         try {
             pstmt.setString(1, "");
