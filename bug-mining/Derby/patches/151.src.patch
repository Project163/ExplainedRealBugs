diff --git a/java/engine/org/apache/derby/iapi/reference/MessageId.java b/java/engine/org/apache/derby/iapi/reference/MessageId.java
index f55c7b7cb..75ab12612 100755
--- a/java/engine/org/apache/derby/iapi/reference/MessageId.java
+++ b/java/engine/org/apache/derby/iapi/reference/MessageId.java
@@ -80,6 +80,7 @@ public interface MessageId {
     String STORE_BACKUP_COMPLETED           = "D012";
     String STORE_DURABILITY_TESTMODE_NO_SYNC = "D013"; // for derby.system.durability is 
                                                        // set to test
+    String STORE_BOOT_READONLY_MSG          = "D014";
 
 
 	/*
diff --git a/java/engine/org/apache/derby/impl/store/raw/RawStore.java b/java/engine/org/apache/derby/impl/store/raw/RawStore.java
index 03c5f07c6..4d614ed49 100755
--- a/java/engine/org/apache/derby/impl/store/raw/RawStore.java
+++ b/java/engine/org/apache/derby/impl/store/raw/RawStore.java
@@ -274,8 +274,10 @@ public final class RawStore implements RawStoreFactory, ModuleControl, ModuleSup
 		String logDevice = properties.getProperty(Attribute.LOG_DEVICE);
 		if (logDevice !=null)
 		{
-			if (create || !logDevice.equals(logFactory.getCanonicalLogPath()) ||
-				restoreFromBackup!=null)
+            if (!isReadOnly() // We do not care about log location if read only
+                && (create 
+                    || !logDevice.equals(logFactory.getCanonicalLogPath()) 
+                    || restoreFromBackup!=null))
 			{
 				// get the real location from the log factory
 				properties.put(Attribute.LOG_DEVICE, logFactory.getCanonicalLogPath());
diff --git a/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java b/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java
index e8f4a3452..2b1b45b5c 100755
--- a/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java
+++ b/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java
@@ -326,12 +326,16 @@ public final class BaseDataFileFactory
 
 		logMsg(LINE);
 		long bootTime = System.currentTimeMillis();
+        String readOnlyMsg = (isReadOnly()) 
+            ? MessageService.getTextMessage(MessageId.STORE_BOOT_READONLY_MSG)
+            : "";
 
 		logMsg(CheapDateFormatter.formatDate(bootTime) +
 			   MessageService.getTextMessage(MessageId.STORE_BOOT_MSG,
-			   									jbmsVersion,
-												identifier,
-												dataDirectory));
+                                             jbmsVersion,
+                                             identifier,
+                                             dataDirectory,
+                                             readOnlyMsg));
 
 		uf = null;
 
diff --git a/java/engine/org/apache/derby/loc/messages_en.properties b/java/engine/org/apache/derby/loc/messages_en.properties
index 690f6785e..3ae4068d8 100755
--- a/java/engine/org/apache/derby/loc/messages_en.properties
+++ b/java/engine/org/apache/derby/loc/messages_en.properties
@@ -1180,7 +1180,7 @@ C007=Exception loading class {0} from jar {1} - {2}
 
 # RawStore Data
 
-D001=:\n Booting Derby version {0}: instance {1}\non database directory {2} \n
+D001=:\n Booting Derby version {0}: instance {1}\non database directory {2} {3} \n
 D002=:\nShutting down instance {0}
 D004=Backup started for database located at {0}
 D005=moved old backup copy from {0} to {1}
@@ -1192,6 +1192,7 @@ D010=Backup aborted due to error
 D011=removed old backup copy at {0}
 D012=Backup completed, log instant at {0} \n
 D013=WARNING: The database is booted with {0}={1}. In this mode, it is possible that database may not be able to recover, committed transactions may be lost, database may be in an inconsistent state. Please use this mode only when these consequences are acceptable  \n
+D014=in READ ONLY mode
 
 # Connectivity 
 J004=database identity
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/TurnsReadOnly.out b/java/testing/org/apache/derbyTesting/functionTests/master/TurnsReadOnly.out
new file mode 100644
index 000000000..a0570351a
--- /dev/null
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/TurnsReadOnly.out
@@ -0,0 +1,6 @@
+Database has been booted.
+Table t1 created.
+Shutting down database ...
+Database shutdown completed
+Database has been booted.
+Database is read-only
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/store/TurnsReadOnly.java b/java/testing/org/apache/derbyTesting/functionTests/tests/store/TurnsReadOnly.java
new file mode 100644
index 000000000..96a1b7bfd
--- /dev/null
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/store/TurnsReadOnly.java
@@ -0,0 +1,109 @@
+/*
+
+   Derby - Class org.apache.derbyTesting.functionTests.store.LogChecksumSetup
+
+   Copyright 2005 The Apache Software Foundation or its licensors, as applicable.
+
+   Licensed under the Apache License, Version 2.0 (the "License");
+   you may not use this file except in compliance with the License.
+   You may obtain a copy of the License at
+
+      http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an "AS IS" BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+
+ */
+
+package org.apache.derbyTesting.functionTests.tests.store;
+
+import java.io.File;
+import java.sql.Connection;
+import java.sql.SQLException;
+import java.sql.Statement;
+import java.util.Properties;
+
+import javax.sql.DataSource;
+
+import org.apache.derby.tools.ij;
+import org.apache.derbyTesting.functionTests.util.TestUtil;
+
+/*
+ * This class is a test where you are not able to create the lock file
+ * when booting an existing database.  The database will then become
+ * read-only.  The tests first creates a database and then shutdowns,
+ * turns off write access to the database directory and then boots the
+ * database again.  A non-default log directory is used since that
+ * uncovered a bug (DERBY-555).  (logDevice is set in the
+ * _app.properties file)
+ *
+ * NB! This test is not included in derbyall since it creates a
+ * read-only directory which will be annoying when trying to clean
+ * test directories.  When Java 6 can be used, it will be possible to
+ * turn on write access at the end of the test.
+ *
+ * @author oystein.grovlen@sun.com
+ */
+
+public class TurnsReadOnly
+{
+    
+    public static void main(String[] argv) throws Throwable 
+    {
+        try {
+            ij.getPropertyArg(argv); 
+            Connection conn = ij.startJBMS();
+            conn.setAutoCommit(true);
+            System.out.println("Database has been booted.");
+
+            Statement s = conn.createStatement();
+            s.execute("CREATE TABLE t1(a INT)");
+            System.out.println("Table t1 created.");
+
+            // Shut down database
+            Properties shutdownAttrs = new Properties();
+            shutdownAttrs.setProperty("shutdownDatabase", "shutdown");
+            System.out.println("Shutting down database ...");
+            try {
+                DataSource ds = TestUtil.getDataSource(shutdownAttrs);
+                ds.getConnection();
+            } catch(SQLException se) {
+				if (se.getSQLState() != null 
+                    && se.getSQLState().equals("XJ015")) {
+					System.out.println("Database shutdown completed");
+                } else {
+                    throw se;
+                }
+            }
+
+            // Make database directory read-only.
+            String derbyHome = System.getProperty("derby.system.home");
+            File dbDir = new File(derbyHome, "wombat");
+            dbDir.setReadOnly();
+            
+            // Boot database, check that it is read-only
+            conn = ij.startJBMS();
+            conn.setAutoCommit(true);
+            System.out.println("Database has been booted.");
+            s = conn.createStatement();
+            try {
+                s.execute("INSERT INTO t1 VALUES(1)");
+            } catch(SQLException se) {
+				if (se.getSQLState() != null 
+                    && se.getSQLState().equals("25502")) {
+					System.out.println("Database is read-only");
+                } else {
+                    throw se;
+                }
+            }
+
+        } catch (SQLException sqle) {
+            org.apache.derby.tools.JDBCDisplayUtil.ShowSQLException(System.out, 
+                                                                    sqle);
+            sqle.printStackTrace(System.out);
+        }
+    }
+}
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/store/TurnsReadOnly_app.properties b/java/testing/org/apache/derbyTesting/functionTests/tests/store/TurnsReadOnly_app.properties
new file mode 100644
index 000000000..7bd673068
--- /dev/null
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/store/TurnsReadOnly_app.properties
@@ -0,0 +1 @@
+database=jdbc:derby:wombat;create=true;logDevice=extinout/wombatlog
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/store/copyfiles.ant b/java/testing/org/apache/derbyTesting/functionTests/tests/store/copyfiles.ant
index 467cedaaa..1a74c3f35 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/store/copyfiles.ant
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/store/copyfiles.ant
@@ -23,6 +23,7 @@ TableLockBasic_derby.properties
 TransactionTable.sql
 TransactionTable_app.properties
 TransactionTable_derby.properties
+TurnsReadOnly_app.properties
 access.sql
 access_app.properties
 access_derby.properties
