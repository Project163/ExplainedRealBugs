diff --git a/java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java b/java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java
index e44558b3f..39460d05c 100644
--- a/java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java
+++ b/java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java
@@ -4976,14 +4976,12 @@ public final class	DataDictionaryImpl
 			}
 				
 			int tokBeginOffset = tableName.getBeginOffset();
-			int tokEndOffset = tableName.getEndOffset();
 			if (tokBeginOffset == -1)
 			{
 				continue;
 			}
 
 			String colName = ref.getColumnName();
-			int columnLength = ref.getEndOffset() - ref.getBeginOffset() + 1;
 
 			newText.append(triggerDefinition.substring(start, tokBeginOffset-actionOffset));
 			int colPositionInRuntimeResultSet = -1;
@@ -5039,7 +5037,8 @@ public final class	DataDictionaryImpl
 					tableName.getTableName(), 
 					tableName.getTableName().equals(oldReferencingName),
 					colPositionInRuntimeResultSet));
-			start = tokEndOffset- actionOffset + columnLength + 2;
+
+            start = ref.getEndOffset() + 1 - actionOffset;
 		}
 		//By this point, we are finished transforming the trigger action if
 		//it has any references to old/new transition variables.
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/TriggerTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/TriggerTest.java
index 69f31397e..0d3df05e4 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/TriggerTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/TriggerTest.java
@@ -2412,4 +2412,28 @@ public class TriggerTest extends BaseJDBCTestCase {
                 "create trigger d6540_tr2 after insert on d6540_t1 "
                 + "referencing new as app.n for each row values 1");
     }
+
+    /**
+     * DERBY-6543: If a reference to a transition variable had blanks around
+     * the period sign that separated the transition variable and the column
+     * name, such as {@code NEW . X} instead of {@code NEW.X}, it would fail
+     * with a syntax error.
+     */
+    public void testDerby6543() throws SQLException {
+        setAutoCommit(false);
+        Statement s = createStatement();
+        s.execute("create table d6543_1(x int)");
+        s.execute("create table d6543_2(x int)");
+
+        // Used to fail with syntax error.
+        s.execute("create trigger d6543_tr after insert on d6543_1 "
+                + "referencing new as new for each row insert into d6543_2 "
+                + "select x from d6543_1 where new . x = x");
+
+        // Verify trigger works.
+        assertUpdateCount(s, 4, "insert into d6543_1 values 1, 2, 2, 3");
+        JDBC.assertFullResultSet(
+                s.executeQuery("select * from d6543_2 order by x"),
+                new String[][] { {"1"}, {"2"}, {"2"}, {"2"}, {"2"}, {"3"} });
+    }
 }
