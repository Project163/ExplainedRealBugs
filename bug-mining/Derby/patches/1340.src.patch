diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/subqueryFlattening.out b/java/testing/org/apache/derbyTesting/functionTests/master/subqueryFlattening.out
index 9013d4ec7..5a413f6b1 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/subqueryFlattening.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/subqueryFlattening.out
@@ -1176,7 +1176,8 @@ None
 			qualifiers:
 None
 ij> -- multilevel subqueries
--- flatten all
+-- only flatten bottom of where exists, any, or in with 
+-- exists, any, or in in its own where clause. DERBY-3301.
 select * from outer1 o where exists
     (select * from idx2 i where exists
         (select * from idx1 ii 
@@ -1191,7 +1192,8 @@ Statement Name:
 	null
 Statement Text: 
 	-- multilevel subqueries
--- flatten all
+-- only flatten bottom of where exists, any, or in with 
+-- exists, any, or in in its own where clause. DERBY-3301.
 select * from outer1 o where exists
     (select * from idx2 i where exists
         (select * from idx1 ii 
@@ -1490,8 +1492,9 @@ Source result set:
 null		stop position: 
 null		qualifiers:
 None
-ij> -- flatten innermost into exists join, then flatten middle
--- into outer
+ij> -- flatten innermost into exists join, but dont flatten middle into outer as it
+-- is a where exists, any, or in with exists, any, or in in its own where clause. 
+-- DERBY-3301.
 select * from outer1 o where exists
     (select * from idx2 i 
      where  o.c1 = i.c1 and i.c2 = 1 and exists
@@ -1505,8 +1508,9 @@ ij> values SYSCS_UTIL.SYSCS_GET_RUNTIMESTATISTICS();
 Statement Name: 
 	null
 Statement Text: 
-	-- flatten innermost into exists join, then flatten middle
--- into outer
+	-- flatten innermost into exists join, but dont flatten middle into outer as it
+-- is a where exists, any, or in with exists, any, or in in its own where clause. 
+-- DERBY-3301.
 select * from outer1 o where exists
     (select * from idx2 i 
      where  o.c1 = i.c1 and i.c2 = 1 and exists
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/subqueryFlattening.sql b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/subqueryFlattening.sql
index 4515e735f..6d1550ba9 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/subqueryFlattening.sql
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/subqueryFlattening.sql
@@ -103,7 +103,8 @@ select * from outer1 o where exists (select * from idx2 i, idx1 where o.c1 + 0 =
 values SYSCS_UTIL.SYSCS_GET_RUNTIMESTATISTICS();
 
 -- multilevel subqueries
--- flatten all
+-- only flatten bottom of where exists, any, or in with 
+-- exists, any, or in in its own where clause. DERBY-3301.
 select * from outer1 o where exists
     (select * from idx2 i where exists
         (select * from idx1 ii 
@@ -115,8 +116,9 @@ select * from outer1 o where exists
         (select * from idx1 ii 
          where o.c1 = i.c1 and i.c2 = ii.c1));
 values SYSCS_UTIL.SYSCS_GET_RUNTIMESTATISTICS();
--- flatten innermost into exists join, then flatten middle
--- into outer
+-- flatten innermost into exists join, but dont flatten middle into outer as it
+-- is a where exists, any, or in with exists, any, or in in its own where clause. 
+-- DERBY-3301.
 select * from outer1 o where exists
     (select * from idx2 i 
      where  o.c1 = i.c1 and i.c2 = 1 and exists
