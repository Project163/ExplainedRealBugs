diff --git a/java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java b/java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java
index 6e0201c56..8f9ca0553 100644
--- a/java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java
+++ b/java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java
@@ -1586,7 +1586,7 @@ public class ProjectRestrictNode extends SingleChildResultSetNode
 		** This ProjectRestrictNode is not a No-Op if it does any
 		** restriction.
 		*/
-		if ( (restriction != null) ||
+		if ( (restriction != null) || (constantRestriction != null) ||
 			 (restrictionList != null && restrictionList.size() > 0) )
 		{
 			return false;
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/union.out b/java/testing/org/apache/derbyTesting/functionTests/master/union.out
index 3afa0cf7f..9a3226326 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/union.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/union.out
@@ -1251,4 +1251,18 @@ A          |B
 4          |0          
 ij> drop table d4391;
 0 rows inserted/updated/deleted
+ij> -- Regression test for DERBY-4411. The predicate 1=0 used to be lost when the
+-- SELECT statement was compiled, and the statement would fail with a message
+-- saying that a scalar sub-query should return exactly one row.
+create table d4411(a int primary key, b int);
+0 rows inserted/updated/deleted
+ij> insert into d4411 values (0, 4), (1, 3), (2, 2), (3, 1), (4, 0);
+5 rows inserted/updated/deleted
+ij> select * from d4411 where a < (values 2 union select b from d4411 where 1=0);
+A          |B          
+-----------------------
+0          |4          
+1          |3          
+ij> drop table d4411;
+0 rows inserted/updated/deleted
 ij> 
\ No newline at end of file
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/union.sql b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/union.sql
index 1ecaaee47..d146f5aab 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/union.sql
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/union.sql
@@ -502,3 +502,11 @@ select * from d4391 where a < (select a+b from d4391 union select 4 from d4391);
 select * from d4391 where a < (select a+b from d4391 union select a from d4391);
 select * from d4391 where a < (select sum(a) from d4391 union select sum(b) from d4391);
 drop table d4391;
+
+-- Regression test for DERBY-4411. The predicate 1=0 used to be lost when the
+-- SELECT statement was compiled, and the statement would fail with a message
+-- saying that a scalar sub-query should return exactly one row.
+create table d4411(a int primary key, b int);
+insert into d4411 values (0, 4), (1, 3), (2, 2), (3, 1), (4, 0);
+select * from d4411 where a < (values 2 union select b from d4411 where 1=0);
+drop table d4411;
