diff --git a/java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java b/java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java
index 4fbb0bfaa..ebd5fae13 100644
--- a/java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java
+++ b/java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java
@@ -546,14 +546,13 @@ class ValueNodeList extends QueryTreeNodeVector<ValueNode>
 		throws StandardException
 	{
 		int size = size();
-		ValueNode	valueNode;
 
 		for (int index = 0; index < size; index++)
 		{
-            valueNode = elementAt(index);
-			valueNode.preprocess(numTables,
+            ValueNode vn = elementAt(index).preprocess(numTables,
 								 outerFromList, outerSubqueryList,
 								 outerPredicateList);
+            setElementAt(vn, index);
 		}
 	}
 
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CaseExpressionTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CaseExpressionTest.java
index f917dafae..16ddd5d60 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CaseExpressionTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CaseExpressionTest.java
@@ -547,4 +547,13 @@ public class CaseExpressionTest extends BaseJDBCTestCase {
         assertCompileError("42X89",
             "values case when 1<>1 then 'abc' else cast(null as smallint) end");
     }
+
+    /** Regression test case for DERBY-6577. */
+    public void testQuantifiedComparison() throws SQLException {
+        // This query used to return wrong results.
+        JDBC.assertUnorderedResultSet(createStatement().executeQuery(
+                "select c, case when c = all (values 'Y') then true end "
+                + "from (values 'Y', 'N') v(c)"),
+            new String[][] { { "N", null }, { "Y", "true" }});
+    }
 }
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CoalesceTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CoalesceTest.java
index 2fafd7933..20cb04b16 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CoalesceTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CoalesceTest.java
@@ -1085,6 +1085,15 @@ public class CoalesceTest extends BaseJDBCTestCase
         vetThreeArgCoalesce("values coalesce(?, ?, cast(? as char(1)))");
     }
 
+    /** Regression test case for DERBY-6577. */
+    public void testQuantifiedComparison() throws SQLException {
+        // This query used to return wrong results.
+        JDBC.assertUnorderedResultSet(createStatement().executeQuery(
+                "select c, coalesce((c = all (values 'Y')), false) "
+                + "from (values 'Y', 'N') v(c)"),
+            new String[][] { { "N", "false" }, { "Y", "true" }});
+    }
+
     private void vetThreeArgCoalesce(String sql) throws SQLException {
         // First three values in each row are arguments to COALESCE. The
         // last value is the expected return value.
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/InbetweenTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/InbetweenTest.java
index 67f5e1b3c..49e46208f 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/InbetweenTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/InbetweenTest.java
@@ -4467,4 +4467,25 @@ public final class InbetweenTest extends BaseJDBCTestCase {
                                "on a=b where b not between 1 and 5"),
                 new String[][]{{"0", "0"}});
     }
+
+    /** Regression test case for DERBY-6577. */
+    public void testInBetweenQuantifiedComparison() throws SQLException {
+        Statement s = createStatement();
+        String[][] expectedRows = {
+            { "Y", "true" },
+            { "N", "false" },
+        };
+
+        // This query used to return wrong results.
+        JDBC.assertUnorderedResultSet(s.executeQuery(
+                "select c, true in ((c = all (values 'Y'))) "
+                + "from (values 'Y', 'N') v(c)"),
+            expectedRows);
+
+        // This query used to return wrong results.
+        JDBC.assertUnorderedResultSet(s.executeQuery(
+                "select c, true between false and (c = all (values 'Y')) "
+                + "from (values 'Y', 'N') v(c)"),
+            expectedRows);
+    }
 }
