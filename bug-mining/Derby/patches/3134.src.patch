diff --git a/java/drda/org/apache/derby/drda/NetworkServerControl.java b/java/drda/org/apache/derby/drda/NetworkServerControl.java
index d66734d48..a6c7efe5c 100644
--- a/java/drda/org/apache/derby/drda/NetworkServerControl.java
+++ b/java/drda/org/apache/derby/drda/NetworkServerControl.java
@@ -27,7 +27,7 @@ import java.net.InetAddress;
 import java.net.URL;
 import java.security.AccessController;
 import java.security.CodeSource;
-import java.security.PrivilegedExceptionAction;
+import java.security.PrivilegedAction;
 import java.security.ProtectionDomain;
 import java.util.Properties;
 import org.apache.derby.iapi.reference.Property;
@@ -323,14 +323,13 @@ public class NetworkServerControl{
             if (command == NetworkServerControlImpl.COMMAND_START &&
                     JVMInfo.JDK_ID >= JVMInfo.J2SE_17) {
                 try {
-                    AccessController.doPrivileged(
-                        new PrivilegedExceptionAction<Void>() {
-                            public Void run() throws Exception {
-                                System.setProperty(
-                                    Property.SERVER_STARTED_FROM_CMD_LINE,
-                                    "true");
-                                return null;
-                            }});
+                    AccessController.doPrivileged((PrivilegedAction<Void>) () ->
+                    {
+                        System.setProperty(
+                                Property.SERVER_STARTED_FROM_CMD_LINE,
+                                "true");
+                        return null;
+                    });
                 } catch (Exception e) {
                     server.consoleExceptionPrintTrace(e);
                     System.exit(1);
diff --git a/java/engine/org/apache/derby/iapi/services/classfile/ClassInput.java b/java/engine/org/apache/derby/iapi/services/classfile/ClassInput.java
index 11f1ee037..272072020 100644
--- a/java/engine/org/apache/derby/iapi/services/classfile/ClassInput.java
+++ b/java/engine/org/apache/derby/iapi/services/classfile/ClassInput.java
@@ -36,6 +36,10 @@ class ClassInput extends DataInputStream {
 		super(in);
 	}
 
+    int getU1() throws IOException {
+        return readUnsignedByte();
+    }
+
 	int getU2() throws IOException {
 		return readUnsignedShort();
 	}
diff --git a/java/engine/org/apache/derby/iapi/services/classfile/ClassInvestigator.java b/java/engine/org/apache/derby/iapi/services/classfile/ClassInvestigator.java
index 90a1a0709..204e1704e 100644
--- a/java/engine/org/apache/derby/iapi/services/classfile/ClassInvestigator.java
+++ b/java/engine/org/apache/derby/iapi/services/classfile/ClassInvestigator.java
@@ -469,12 +469,12 @@ public class ClassInvestigator extends ClassHolder {
 		throws IOException {
 
 		ConstantPoolEntry item;
-		int tag;		
-		tag = in.readUnsignedByte();
+        final int tag = in.getU1();
 
 		switch (tag) {
 		case VMDescriptor.CONSTANT_Class:
 		case VMDescriptor.CONSTANT_String:
+        case VMDescriptor.CONSTANT_MethodType:
 			item = new CONSTANT_Index_info(tag, in.getU2(), 0);
 			break;
 
@@ -482,6 +482,7 @@ public class ClassInvestigator extends ClassHolder {
 		case VMDescriptor.CONSTANT_Fieldref:
 		case VMDescriptor.CONSTANT_Methodref:
 		case VMDescriptor.CONSTANT_InterfaceMethodref:
+        case VMDescriptor.CONSTANT_InvokeDynamic:
 			item = new CONSTANT_Index_info(tag, in.getU2(), in.getU2());
 			break;
 
@@ -504,8 +505,13 @@ public class ClassInvestigator extends ClassHolder {
 		case VMDescriptor.CONSTANT_Utf8:
 			item = new CONSTANT_Utf8_info(in.readUTF());
 			break;
+
+        case VMDescriptor.CONSTANT_MethodHandle:
+            item = new CONSTANT_Index_info(tag, in.getU1(), in.getU2());
+            break;
+
 		default:
-			throw new ClassFormatError();
+            throw new ClassFormatError("Unknown tag: " + tag);
 		}
 
 		return item;
diff --git a/java/engine/org/apache/derby/iapi/services/classfile/VMDescriptor.java b/java/engine/org/apache/derby/iapi/services/classfile/VMDescriptor.java
index c83768545..2abc4b26c 100644
--- a/java/engine/org/apache/derby/iapi/services/classfile/VMDescriptor.java
+++ b/java/engine/org/apache/derby/iapi/services/classfile/VMDescriptor.java
@@ -68,6 +68,9 @@ public interface VMDescriptor {
 	int CONSTANT_Double = 6;
 	int CONSTANT_NameAndType = 12;
 	int CONSTANT_Utf8 = 1;
+    int CONSTANT_MethodHandle = 15;
+    int CONSTANT_MethodType = 16;
+    int CONSTANT_InvokeDynamic = 18;
 
 
 	/** Magic number for class file format - page 84 */
