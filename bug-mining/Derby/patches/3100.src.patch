diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XMLOptimizerTraceTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XMLOptimizerTraceTest.java
index d96d24c58..50f9bc724 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XMLOptimizerTraceTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XMLOptimizerTraceTest.java
@@ -27,6 +27,8 @@ import java.sql.Connection;
 import java.sql.PreparedStatement;
 import java.sql.ResultSet;
 import junit.framework.Test;
+
+import org.apache.derby.iapi.services.info.JVMInfo;
 import org.apache.derbyTesting.junit.BaseTestSuite;
 import org.apache.derbyTesting.junit.SupportFilesSetup;
 import org.apache.derbyTesting.junit.TestConfiguration;
@@ -328,10 +330,14 @@ public class XMLOptimizerTraceTest  extends GeneratedColumnsHelper
              conn,
              "call syscs_util.syscs_register_tool( 'optimizerTracing', true, 'xml' )"
              );
+        // IBM 1.6 is wrapping the exception in a 38000. See DERBY-6760.
+        String expectedError = FILE_EXISTS;
+        if (JVMInfo.isIBMJVM() && JVMInfo.JDK_ID==JVMInfo.J2SE_16)
+            expectedError = "38000";
         expectExecutionError
             (
              conn,
-             FILE_EXISTS,
+             expectedError,
              "call syscs_util.syscs_register_tool( 'optimizerTracing', false, '" + traceFile.getPath() + "' )"
               );
         goodStatement
