diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/management/JDBCMBeanTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/management/JDBCMBeanTest.java
index be43fb20a..3265e9ab1 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/management/JDBCMBeanTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/management/JDBCMBeanTest.java
@@ -22,12 +22,15 @@
 package org.apache.derbyTesting.functionTests.tests.management;
 
 import java.io.BufferedReader;
+import java.sql.DatabaseMetaData;
 import java.sql.Driver;
 import java.util.Hashtable;
 import javax.management.ObjectName;
 import junit.framework.Test;
 import junit.framework.Test;
 import junit.framework.TestSuite;
+
+import org.apache.derby.iapi.services.info.JVMInfo;
 import org.apache.derbyTesting.junit.Utilities;
 
 
@@ -93,23 +96,19 @@ public class JDBCMBeanTest extends MBeanTest {
     }
     
     public void testAttributeDriverLevel() throws Exception {
-        String expected = "[Unable to get driver level from sysinfo]";
-        // Get the expected value from sysinfo
-        BufferedReader sysinfoOutput = Utilities.getSysinfoFromServer();
-        String line = null;
-        while ((line = sysinfoOutput.readLine()) != null) {
-            /* Looking for:
-             *--------- Derby Information --------
-             *JRE - JDBC: J2SE 5.0 - JDBC 3.0
-             *            ^^^^^^^^^^^^^^^^^^^
-             * (actual JRE/JDBC values may vary)*/
-            if (line.matches("^JRE - JDBC: .*")) {
-                expected = line.substring(line.indexOf(": ") + 2);
-            }
-        }
-        
-        // test the attribute value against the expected value
-        assertStringAttribute(expected,getJdbcMBeanObjectName(), "DriverLevel");
+        // get JDBC version from DatabaseMetaData for comparison
+        DatabaseMetaData dmd = getConnection().getMetaData();
+        String JDBCVersion = "" + dmd.getJDBCMajorVersion() + 
+            dmd.getJDBCMajorVersion() + "." +
+            dmd.getJDBCMinorVersion();
+        println("DatabaseMetaDataJDBCLevel = " + JDBCVersion);
+        ObjectName driverLevel = getJdbcMBeanObjectName();
+        String driverLevelString = driverLevel.toString();
+        println("MBean driverLevel  = " + driverLevelString);
+       
+        assert(driverLevelString.indexOf('?') == -1);
+        assert(driverLevelString.matches("^JRE - JDBC: " + JDBCVersion + ".*"));
+
     }
     
     /**
diff --git a/java/tools/org/apache/derby/impl/tools/ij/xaHelper.java b/java/tools/org/apache/derby/impl/tools/ij/xaHelper.java
index 92321059a..853471a07 100644
--- a/java/tools/org/apache/derby/impl/tools/ij/xaHelper.java
+++ b/java/tools/org/apache/derby/impl/tools/ij/xaHelper.java
@@ -510,45 +510,49 @@ class xaHelper implements xaAbstractHelper
 		// if we new it directly, then it will the tools.jar file to bloat.
 		try
 		{
-			if (isJCC)
-				return (XADataSource) 
-					(Class.forName("com.ibm.db2.jcc.DB2XADataSource").newInstance());
-			else if (isNetClient){
-                            if (JVMInfo.JDK_ID >= JVMInfo.J2SE_16) {
-                                //running under jdk1.6 or higher 
-                                // try instantiating EmbeddedXADataSource40
-                                try {
-                                    return (XADataSource)(Class.forName(
-                                        "org.apache.derby.jdbc." +
-                                        "ClientXADataSource40").newInstance());                                        
-                                }
-                                catch (ClassNotFoundException e) {
-                                    //probably it was not compiled with jdbc4.0
-                                    //support go ahead with EmbeddedXADataSource
-                                }
-                            }
-                            return (XADataSource) (Class.forName(
-                                    "org.apache.derby.jdbc.ClientXADataSource"
-                                    ).newInstance());
-                        }
-			else {
-                            if (JVMInfo.JDK_ID >= JVMInfo.J2SE_16) {
-                                //running under jdk1.6 or higher 
-                                // try instantiating EmbeddedXADataSource40
-                                try {
-                                    return (XADataSource)(Class.forName(
-                                        "org.apache.derby.jdbc." +
-                                        "EmbeddedXADataSource40").newInstance());                                        
-                                }
-                                catch (ClassNotFoundException e) {
-                                    //probably it was not compiled with jdbc4.0
-                                    //support go ahead with EmbeddedXADataSource
-                                }
-                            }
-                            return (XADataSource)(Class.forName("org.apache.derby.jdbc.EmbeddedXADataSource").newInstance());
-                        }
-		}
-		catch(ClassNotFoundException cnfe) {
+		    
+            if (isJCC)
+               return (XADataSource) 
+                (Class.forName("com.ibm.db2.jcc.DB2XADataSource").newInstance());
+            else if (isNetClient){
+                //running under jdk1.6 or higher 
+                // try instantiating EmbeddedXADataSource40
+                try {
+                    return (XADataSource)(Class.forName(
+                            "org.apache.derby.jdbc." +
+                    "ClientXADataSource40").newInstance());                                        
+                }
+                catch (ClassNotFoundException e) {
+                    //probably it was not compiled with jdbc4.0
+                    //support go ahead with ClientXADataSource
+                }
+                catch (UnsupportedClassVersionError ue) { 
+                    // ClientXADataSource
+                }
+                return (XADataSource) (Class.forName(
+                        "org.apache.derby.jdbc.ClientXADataSource"
+                ).newInstance());
+            }
+            else {
+                //running under jdk1.6 or higher 
+                // try instantiating EmbeddedXADataSource40
+                try {
+                    return (XADataSource)(Class.forName(
+                            "org.apache.derby.jdbc." +
+                    "EmbeddedXADataSource40").newInstance());                                        
+                }
+                catch (ClassNotFoundException e) {
+                    //probably it was not compiled with jdbc4.0
+                    //support go ahead with EmbeddedXADataSource
+                }
+                catch (UnsupportedClassVersionError ue) {
+                    // not jdk 16 or higher. Go ahead with
+                    // EmbeddedXADataSource
+                }
+                return (XADataSource)(Class.forName("org.apache.derby.jdbc.EmbeddedXADataSource").newInstance());
+            }
+        }
+        catch(ClassNotFoundException cnfe) {
 			throw new ijException(LocalizedResource.getMessage("IJ_XAClass"));
 		}
 		catch (InstantiationException e) { }
diff --git a/java/tools/org/apache/derby/impl/tools/sysinfo/Main.java b/java/tools/org/apache/derby/impl/tools/sysinfo/Main.java
index bbc29a586..896ff3914 100644
--- a/java/tools/org/apache/derby/impl/tools/sysinfo/Main.java
+++ b/java/tools/org/apache/derby/impl/tools/sysinfo/Main.java
@@ -220,8 +220,6 @@ public static void getMainInfo (java.io.PrintWriter aw, boolean pause) {
 
   private static void reportDerby (java.io.PrintWriter localAW) {
 
-	  localAW.println("JRE - JDBC: " + org.apache.derby.iapi.services.info.JVMInfo.derbyVMLevel());
-
 	  String classpath = null;
 
       try {
