diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource.out b/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource.out
index 6159af955..ec5a479d0 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource.out
@@ -460,7 +460,8 @@ acxs 2
 autocommitxastart expected 'ResultSet' already closed.
 acxs 1
 acxs 2
-autocommitxastart expected  : XAException - XAER_DUPID : Error executing a XAResource.start(), Server returned XAER_DUPID
+autocommitxastart expected  : XAException - XAER_OUTSIDE : Error executing a XAResource.start(), Server returned XAER_OUTSIDE
+Expected XA error code: -9
 acxs 3
 testing jira 95 for DataSource; ok - expected exception: XCY00
 testing jira 95 for XADataSource; ok - expected exception: XCY00
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource30.out b/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource30.out
index 67d2a5340..d2360681b 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource30.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/checkDataSource30.out
@@ -555,7 +555,8 @@ acxs 2
 autocommitxastart expected 'ResultSet' already closed.
 acxs 1
 acxs 2
-autocommitxastart expected  : XAException - XAER_DUPID : Error executing a XAResource.start(), Server returned XAER_DUPID
+autocommitxastart expected  : XAException - XAER_OUTSIDE : Error executing a XAResource.start(), Server returned XAER_OUTSIDE
+Expected XA error code: -9
 acxs 3
 testing jira 95 for DataSource; ok - expected exception: XCY00
 testing jira 95 for XADataSource; ok - expected exception: XCY00
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource.out b/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource.out
index 4eaa3fa56..d1ed7204f 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource.out
@@ -525,6 +525,7 @@ autocommitxastart expected No current connection.
 acxs 1
 acxs 2
 autocommitxastart expected  : XAException - null
+Expected XA error code: -9
 acxs 3
 testing jira 95 for DataSource; ok - expected exception: XCY00
 testing jira 95 for XADataSource; ok - expected exception: XCY00
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource30.out b/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource30.out
index 57dc2f8d9..a39ffbd96 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource30.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource30.out
@@ -655,6 +655,7 @@ autocommitxastart expected No current connection.
 acxs 1
 acxs 2
 autocommitxastart expected  : XAException - null
+Expected XA error code: -9
 acxs 3
 testing jira 95 for DataSource; ok - expected exception: XCY00
 testing jira 95 for XADataSource; ok - expected exception: XCY00
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/checkDataSource.java b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/checkDataSource.java
index 7f9084cc0..c026fb8f7 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/checkDataSource.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/checkDataSource.java
@@ -646,10 +646,15 @@ public class checkDataSource
 		rs4.next(); System.out.println("acxs " + rs4.getInt(1));
 		rs4.next(); System.out.println("acxs " + rs4.getInt(1));
 		
+		 // Get a new xid to begin another transaction. 
+		 // This should give XAER_OUTSIDE exception because
+		 // the resource manager is busy in the local transaction
+		 xid4a = new cdsXid(4, (byte) 93, (byte) 103);
 		try {
 			xac4.getXAResource().start(xid4a, XAResource.TMNOFLAGS);
 		} catch (XAException xae) {
 			showXAException("autocommitxastart expected ", xae);
+			System.out.println("Expected XA error code: " + xae.errorCode);
 		}
 		rs4.next(); System.out.println("acxs " + rs4.getInt(1));
 		rs4.close();
