diff --git a/java/build/org/apache/derbyBuild/splitmessages.java b/java/build/org/apache/derbyBuild/splitmessages.java
index e9222899b..52c76b11c 100644
--- a/java/build/org/apache/derbyBuild/splitmessages.java
+++ b/java/build/org/apache/derbyBuild/splitmessages.java
@@ -118,6 +118,7 @@ public class splitmessages {
         clientMessageIds.add(SQLState.NET_VCM_VCS_LENGTHS_INVALID);
         clientMessageIds.add(SQLState.LANG_STRING_TOO_LONG);
         clientMessageIds.add(SQLState.INVALID_COLUMN_ARRAY_LENGTH);
+        clientMessageIds.add(SQLState.PROPERTY_INVALID_VALUE);
     }
 
 	public static void main(String[] args) throws Exception {
diff --git a/java/client/org/apache/derby/client/net/NetConnection.java b/java/client/org/apache/derby/client/net/NetConnection.java
index 53ecf04ca..884548dd4 100644
--- a/java/client/org/apache/derby/client/net/NetConnection.java
+++ b/java/client/org/apache/derby/client/net/NetConnection.java
@@ -33,6 +33,7 @@ import org.apache.derby.shared.common.reference.MessageId;
 import org.apache.derby.shared.common.i18n.MessageUtil;
 import org.apache.derby.client.am.Statement;
 import org.apache.derby.client.am.Utils;
+import org.apache.derby.iapi.reference.Attribute;
 import org.apache.derby.jdbc.ClientBaseDataSource;
 import org.apache.derby.jdbc.ClientDriver;
 import org.apache.derby.client.ClientPooledConnection;
@@ -299,8 +300,19 @@ public class NetConnection extends org.apache.derby.client.am.Connection {
         this.rmId_ = rmId;
         this.isXAConnection_ = isXAConn;
         flowConnect(password, securityMechanism_);
-        completeConnect();
-
+        // it's possible that the internal Driver.connect() calls returned null,
+        // thus, a null connection, e.g. when the databasename has a : in it
+        // (which the InternalDriver assumes means there's a subsubprotocol)  
+        // and it's not a subsubprotocol recognized by our drivers.
+        // If so, bail out here.
+        if(!isConnectionNull())
+            completeConnect();
+        else
+        {
+            agent_.accumulateChainBreakingReadExceptionAndThrow(new DisconnectException(agent_,
+                    new ClientMessageId(SQLState.PROPERTY_INVALID_VALUE),
+                    Attribute.DBNAME_ATTR,databaseName_));
+        }
     }
 
     // preferably without password in the method signature.
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DataSourceTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DataSourceTest.java
index d3179affa..29dc6ce87 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DataSourceTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DataSourceTest.java
@@ -103,6 +103,7 @@ public class DataSourceTest extends BaseJDBCTestCase {
         suite.addTest(new DataSourceTest("testBadConnectionAttributeSyntax"));
         suite.addTest(new DataSourceTest("testDescriptionProperty"));
         suite.addTest(new DataSourceTest("testAllDataSources"));
+        suite.addTest(new DataSourceTest("testJira95ds"));
         return suite;
     }
 
@@ -130,8 +131,6 @@ public class DataSourceTest extends BaseJDBCTestCase {
     private static Test getEmbeddedSuite(String postfix) {
         TestSuite suite = new TestSuite("Embedded" + postfix);
         suite.addTest(new DataSourceTest("testDSRequestAuthentication"));
-        // when DERBY-2498 gets fixed, move this one to baseSuite
-        suite.addTest(new DataSourceTest("testJira95ds"));
         return suite;
     }
     
@@ -231,15 +230,9 @@ public class DataSourceTest extends BaseJDBCTestCase {
             ds.getConnection();
             fail ("expected an SQLException!");
         } catch (SQLException sqle) {
-            // DERBY-2498: with client, getting a NullPointerException.
-            // Note also: the NPE does not occur with XADataSource - see
-            // testJira95xads().
-            if (usingEmbedded())
-                assertSQLState("XCY00", sqle);
+            assertSQLState("XCY00", sqle);
         } catch (Exception e) {
-            // DERBY-2498, when fixed, remove 'if'
-            if (usingEmbedded())
-                fail ("unexpected exception: " + e.toString());
+            fail ("unexpected exception: " + e.toString());
         }
     } 
 
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/J2EEDataSourceTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/J2EEDataSourceTest.java
index c48aff8c4..adf6f11ae 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/J2EEDataSourceTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/J2EEDataSourceTest.java
@@ -134,6 +134,7 @@ public class J2EEDataSourceTest extends BaseJDBCTestCase {
         TestSuite suite = new TestSuite("ClientAndEmbedded" + postfix);
         suite.addTest(new J2EEDataSourceTest("testGlobalLocalInterleaf"));
         suite.addTest(new J2EEDataSourceTest("testSetIsolationWithStatement"));
+        suite.addTest(new J2EEDataSourceTest("testJira95pds"));
         suite.addTest(new J2EEDataSourceTest("testJira95xads"));
         suite.addTest(new J2EEDataSourceTest("testBadConnectionAttributeSyntax"));
         suite.addTest(new J2EEDataSourceTest("testCloseActiveConnection_DS"));
@@ -183,8 +184,6 @@ public class J2EEDataSourceTest extends BaseJDBCTestCase {
     private static Test getEmbeddedSuite(String postfix) {
         TestSuite suite = new TestSuite("Embedded" + postfix);
         suite.addTest(new J2EEDataSourceTest("testDSRequestAuthentication"));
-        // when DERBY-2498 gets fixed, move this one to baseSuite
-        suite.addTest(new J2EEDataSourceTest("testJira95pds"));
         // Following cannot run with client because of DERBY-2533; it hangs
         // when fixed, this can be moved to baseSuite.
         suite.addTest(new J2EEDataSourceTest("testReuseAcrossGlobalLocal"));
@@ -2203,13 +2202,9 @@ public class J2EEDataSourceTest extends BaseJDBCTestCase {
             pds.getPooledConnection();
             fail ("expected an SQLException!");
         } catch (SQLException sqle) {
-            // DERBY-2498 - when fixed, remove if
-            if (usingEmbedded())
-                assertSQLState("XCY00", sqle);
+            assertSQLState("XCY00", sqle);
         } catch (Exception e) {
-            // DERBY-2498 - when fixed, remove if
-            if (usingEmbedded())
-                throw e;
+            throw e;
         }
     }
     
