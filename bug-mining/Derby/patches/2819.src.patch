diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XplainStatisticsTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XplainStatisticsTest.java
index 73e688573..cb6ed4817 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XplainStatisticsTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/XplainStatisticsTest.java
@@ -1092,7 +1092,6 @@ public class XplainStatisticsTest extends BaseJDBCTestCase {
     public void testSimpleXplainOnly() throws Exception
     {
         Statement s = createStatement();
-        ResultSet rs;
 
         enableXplainStyle(s);
         enableXplainOnlyMode(s);
@@ -1220,7 +1219,6 @@ public class XplainStatisticsTest extends BaseJDBCTestCase {
     public void testXplainOnlyExecutePrepared() throws Exception
     {
         Statement s = createStatement();
-        ResultSet rs;
 
         String selectStatement = 
             "select region, count(country) from app.countries group by region";
@@ -1294,12 +1292,16 @@ public class XplainStatisticsTest extends BaseJDBCTestCase {
         JDBC.assertEmpty(ps.executeQuery());
         clearXplainOnlyMode(s);
         disableXplainStyle(s);
+
+        // Verify that statistics were collected.
+        JDBC.assertDrainResults(
+                s.executeQuery("select * from xpltest.sysxplain_statements"),
+                1);
     }
     
     public void testXplainOnlyPrepared() throws Exception
     {
         Statement s = createStatement();
-        ResultSet rs;
 
         String selectStatement = 
             "select region, count(country) from app.countries group by region";
diff --git a/java/tools/org/apache/derby/impl/tools/planexporter/AccessDatabase.java b/java/tools/org/apache/derby/impl/tools/planexporter/AccessDatabase.java
index 161606ccb..1ef61f4b7 100644
--- a/java/tools/org/apache/derby/impl/tools/planexporter/AccessDatabase.java
+++ b/java/tools/org/apache/derby/impl/tools/planexporter/AccessDatabase.java
@@ -146,15 +146,20 @@ public class AccessDatabase {
      * name that was passed in to this instance.
      */
     private boolean schemaExists() throws SQLException {
-    	boolean found=false;
     	ResultSet result = conn.getMetaData().getSchemas();
-    	while(result.next()){
-    		if(result.getString(1).equals(schema)){
-    			found=true;
-    			break;
-    		}
-    	}	
-    	return found;
+        try {
+            while (result.next()) {
+                if (result.getString(1).equals(schema)) {
+                    // Found it!
+                    return true;
+                }
+            }
+        } finally {
+            result.close();
+        }
+
+        // Didn't find the schema.
+        return false;
     }
 
     public boolean verifySchemaExistance() {
