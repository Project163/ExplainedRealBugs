diff --git a/java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java b/java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java
index db72434d3..e21a611aa 100644
--- a/java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java
+++ b/java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java
@@ -75,7 +75,7 @@ final class EmbedBlob extends ConnectionChild implements Blob, EngineLOB
     private InputStream     myStream;
     
     // locator key for lob. used by Network Server.
-    private final int             locator;
+    private int             locator;
     
     /*
      * Length of the BLOB if known. Set to -1 if
@@ -117,7 +117,7 @@ final class EmbedBlob extends ConnectionChild implements Blob, EngineLOB
              materialized = true;
              //add entry in connection so it can be cleared 
              //when transaction is not valid
-             locator = con.addLOBMapping (this);
+             con.addLOBReference (this);
          }
          catch (IOException e) {
              throw Util.setStreamFailure (e);
@@ -193,7 +193,7 @@ final class EmbedBlob extends ConnectionChild implements Blob, EngineLOB
         pos = 0;
         //add entry in connection so it can be cleared 
         //when transaction is not valid
-        this.locator = con.addLOBMapping (this);
+        con.addLOBReference (this);
     }
 
 
@@ -906,6 +906,8 @@ final class EmbedBlob extends ConnectionChild implements Blob, EngineLOB
         //valid
         isValid = false;
         
+        //remove entry from connection
+        localConn.removeLOBMapping(locator);
         //initialialize length to default value -1
         myLength = -1;
         
@@ -1000,6 +1002,9 @@ final class EmbedBlob extends ConnectionChild implements Blob, EngineLOB
      * @return The locator identifying this lob.
      */
     public int getLocator() {
+        if (locator == 0) {
+            locator = localConn.addLOBMapping(this);
+        }
         return locator;
     }
 }
