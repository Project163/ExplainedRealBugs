diff --git a/java/drda/org/apache/derby/impl/drda/DRDAConnThread.java b/java/drda/org/apache/derby/impl/drda/DRDAConnThread.java
index bb530f0b9..e458680e7 100644
--- a/java/drda/org/apache/derby/impl/drda/DRDAConnThread.java
+++ b/java/drda/org/apache/derby/impl/drda/DRDAConnThread.java
@@ -9180,10 +9180,13 @@ class DRDAConnThread extends Thread {
 
     protected String buildRuntimeInfo(String indent, LocalizedResource localLangUtil )
     {
-        if (!hasSession()) {
+        // DERBY-6714: session can be null if the session gets closed just
+        // as we try to read its runtime info.
+        Session s = session;
+        if (s == null) {
             return "";
         } else {
-            return session.buildRuntimeInfo("", localLangUtil) + "\n";
+            return s.buildRuntimeInfo("", localLangUtil) + "\n";
         }
     }
 
diff --git a/java/drda/org/apache/derby/impl/drda/Database.java b/java/drda/org/apache/derby/impl/drda/Database.java
index 3c50dbfa4..605e295e6 100644
--- a/java/drda/org/apache/derby/impl/drda/Database.java
+++ b/java/drda/org/apache/derby/impl/drda/Database.java
@@ -407,20 +407,28 @@ class Database
 
     protected String buildRuntimeInfo(String indent, LocalizedResource localLangUtil)
     {
-      
+        // DERBY-6714: stmtTable can be null if the session gets closed
+        // while we are constructing the runtime info. Create a local copy
+        // and check for null before accessing it.
+        Hashtable<Object, DRDAStatement> statements = stmtTable;
+
         String s = indent + 
         localLangUtil.getTextMessage("DRDA_RuntimeInfoDatabase.I") +
             dbName + "\n" +  
         localLangUtil.getTextMessage("DRDA_RuntimeInfoUser.I")  +
             userId +  "\n" +
         localLangUtil.getTextMessage("DRDA_RuntimeInfoNumStatements.I") +
-            stmtTable.size() + "\n";
+            (statements == null ? 0 : statements.size()) + "\n";
         s += localLangUtil.getTextMessage("DRDA_RuntimeInfoPreparedStatementHeader.I");
-        for (Enumeration e = stmtTable.elements() ; e.hasMoreElements() ;) 
+
+        if (statements != null) {
+            for (Enumeration e = statements.elements(); e.hasMoreElements(); )
                 {
                     s += ((DRDAStatement) e.nextElement()).toDebugString(indent
                                                                          +"\t") +"\n";
                 }
+        }
+
         return s;
     }
     
diff --git a/java/drda/org/apache/derby/impl/drda/Session.java b/java/drda/org/apache/derby/impl/drda/Session.java
index 8f86cfbd3..c5df9dade 100644
--- a/java/drda/org/apache/derby/impl/drda/Session.java
+++ b/java/drda/org/apache/derby/impl/drda/Session.java
@@ -286,10 +286,15 @@ class Session
         String s = "";
         s += indent +  localLangUtil.getTextMessage("DRDA_RuntimeInfoSessionNumber.I")
             + connNum + "\n";
-        if (database == null)
-            return s;
-        s += database.buildRuntimeInfo(indent,localLangUtil);
-        s += "\n";
+
+        // DERBY-6714: database can be null if the session gets closed
+        // while we construct the runtime info.
+        Database db = database;
+        if (db != null) {
+            s += db.buildRuntimeInfo(indent, localLangUtil);
+            s += "\n";
+        }
+
         return s;
     }
 }
