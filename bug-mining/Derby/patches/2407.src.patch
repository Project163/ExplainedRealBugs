diff --git a/java/testing/org/apache/derbyTesting/junit/SpawnedProcess.java b/java/testing/org/apache/derbyTesting/junit/SpawnedProcess.java
index e1b3e979b..469ed91e5 100644
--- a/java/testing/org/apache/derbyTesting/junit/SpawnedProcess.java
+++ b/java/testing/org/apache/derbyTesting/junit/SpawnedProcess.java
@@ -158,23 +158,25 @@ public final class SpawnedProcess {
     public int complete(boolean destroy, long timeout) throws InterruptedException, IOException {
         int exitCode;
         if (timeout >= 0 ) {
+            final long start = System.currentTimeMillis();
+            boolean timedOut = true;
             long totalwait = -1;
             while (totalwait < timeout) {
                try  { 
-               exitCode = javaProcess.exitValue();
-               //if no exception thrown, exited normally
-               destroy = false;
-               break;
+                   exitCode = javaProcess.exitValue();
+                   //if no exception thrown, exited normally
+                   destroy = timedOut = false;
+                   break;
                }catch (IllegalThreadStateException ite) {
-                   if (totalwait >= timeout) {
-                       destroy = true;
-                       break;
-                   } else {
-                       totalwait += 1000;
-                       Thread.sleep(1000);
-                   }
+                   // Ignore exception, it means that the process is running.
+                   Thread.sleep(1000);
+                   totalwait = System.currentTimeMillis() - start;
                }
             }
+            // If we timed out, make sure we try to destroy the process.
+            if (timedOut) {
+                destroy = true;
+            }
     	}
         if (destroy)
             javaProcess.destroy();
