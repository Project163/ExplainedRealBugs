diff --git a/java/client/org/apache/derby/client/net/NetXAResource.java b/java/client/org/apache/derby/client/net/NetXAResource.java
index 139fb2d55..d6258554e 100644
--- a/java/client/org/apache/derby/client/net/NetXAResource.java
+++ b/java/client/org/apache/derby/client/net/NetXAResource.java
@@ -413,7 +413,7 @@ public class NetXAResource implements XAResource {
         } finally {
             conn_.pendingEndXACallinfoOffset_ = -1; // indicate no pending callinfo
         }
-        if (rc != XAResource.XA_OK) {
+        if ((rc != XAResource.XA_OK ) && (rc != XAResource.XA_RDONLY)) {
             throwXAException(rc, false);
         }
         if (conn_.agent_.loggingEnabled()) {
diff --git a/java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java b/java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java
index 9e086df9f..32473ce85 100644
--- a/java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java
+++ b/java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java
@@ -425,7 +425,7 @@ public class DRDAXAProtocol {
 		int xaRetVal = xaResource.XA_OK;
 
 		try {
-			xaResource.prepare(xid);
+			xaRetVal = xaResource.prepare(xid);
 			if (SanityManager.DEBUG)
 			{
 				connThread.trace("prepared xa transaction: xaRetVal=" +
