diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/dcl.out b/java/testing/org/apache/derbyTesting/functionTests/master/dcl.out
index c267c8f80..d1e1d637c 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/dcl.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/dcl.out
@@ -17,7 +17,7 @@ ERROR XJ001: Java exception: 'org.apache.derbyTesting.databaseclassloader.emc: j
 ij> -- install the jar, copied there by the magic of supportfiles
 -- in the test harness (dcl_app.properties). The source for
 -- the class is contained within the jar for reference.
-CALL SQLJ.INSTALL_JAR('file:dcl_emc1.jar', 'EMC.MAIL_APP', 0);
+CALL SQLJ.INSTALL_JAR('file:extin/dcl_emc1.jar', 'EMC.MAIL_APP', 0);
 0 rows inserted/updated/deleted
 ij> -- fails because no class not in classpath, jar file not in database classpath.
 CALL EMC.ADDCONTACT(1, 'bill@somecompany.com');
@@ -57,7 +57,7 @@ ID         |E_MAIL                        |OK
 ij> -- now change the application to run checks on the e-mail
 -- address to ensure it is valid (in this case by seeing if
 -- simply includes 'spam' in the title.
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> CALL EMC.ADDCONTACT(4, 'spammer@ripoff.com');
 0 rows inserted/updated/deleted
@@ -85,7 +85,7 @@ READS SQL DATA
 external name 'org.apache.derbyTesting.databaseclassloader.addon.vendor.util.valid'
 language java parameter style java;
 0 rows inserted/updated/deleted
-ij> CALL SQLJ.INSTALL_JAR('file:dcl_emcaddon.jar', '"emcAddOn"."MailAddOn"', 0);
+ij> CALL SQLJ.INSTALL_JAR('file:extin/dcl_emcaddon.jar', '"emcAddOn"."MailAddOn"', 0);
 0 rows inserted/updated/deleted
 ij> call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('derby.database.classpath', 'EMC.MAIL_APP:"emcAddOn"."MailAddOn"');
 0 rows inserted/updated/deleted
@@ -118,7 +118,7 @@ ij> -- Replace with a signed jar
 -- jarsigner -keystore emcks -storepass ab987c -keypass kpi135 -signedjar dcl_emc2s.jar dcl_emc2.jar emccto
 --
 --
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2s.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2s.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> VALUES EMC.GETSIGNERS('org.apache.derbyTesting.databaseclassloader.emc');
 1                                                                                                                               
@@ -132,14 +132,14 @@ NULL
 ij> -- replace with a hacked jar file, emc.class modified to diable
 -- valid e-mail address check but using same signatures.
 -- ie direct replacement of the .class file.
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2sm.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2sm.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> CALL EMC.ADDCONTACT(99, 'spamking@cracker.org');
 ERROR 42X51: The class 'org.apache.derbyTesting.databaseclassloader.emc' does not exist or is inaccessible. This can happen if the class is not public.
 ERROR XJ001: Java exception: 'org.apache.derbyTesting.databaseclassloader.emc : Security exception thrown accessing class org.apache.derbyTesting.databaseclassloader.emc in jar "EMC"."MAIL_APP" : SHA1 digest error for org/apache/derbyTesting/databaseclassloader/emc.class: java.lang.ClassNotFoundException'.
 ij> -- replace with a hacked jar file, emc.class modified to 
 -- be an invalid jar file (no signing on this jar).
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2l.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2l.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> CALL EMC.ADDCONTACT(999, 'spamking2@cracker.org');
 ERROR 42X51: The class 'org.apache.derbyTesting.databaseclassloader.emc' does not exist or is inaccessible. This can happen if the class is not public.
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/jdk15/dcl.out b/java/testing/org/apache/derbyTesting/functionTests/master/jdk15/dcl.out
index f27a35114..2a9ed9567 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/jdk15/dcl.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/jdk15/dcl.out
@@ -17,7 +17,7 @@ ERROR XJ001: Java exception: 'org.apache.derbyTesting.databaseclassloader.emc: j
 ij> -- install the jar, copied there by the magic of supportfiles
 -- in the test harness (dcl_app.properties). The source for
 -- the class is contained within the jar for reference.
-CALL SQLJ.INSTALL_JAR('file:dcl_emc1.jar', 'EMC.MAIL_APP', 0);
+CALL SQLJ.INSTALL_JAR('file:extin/dcl_emc1.jar', 'EMC.MAIL_APP', 0);
 0 rows inserted/updated/deleted
 ij> -- fails because no class not in classpath, jar file not in database classpath.
 CALL EMC.ADDCONTACT(1, 'bill@somecompany.com');
@@ -57,7 +57,7 @@ ID         |E_MAIL                        |OK
 ij> -- now change the application to run checks on the e-mail
 -- address to ensure it is valid (in this case by seeing if
 -- simply includes 'spam' in the title.
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> CALL EMC.ADDCONTACT(4, 'spammer@ripoff.com');
 0 rows inserted/updated/deleted
@@ -85,7 +85,7 @@ READS SQL DATA
 external name 'org.apache.derbyTesting.databaseclassloader.addon.vendor.util.valid'
 language java parameter style java;
 0 rows inserted/updated/deleted
-ij> CALL SQLJ.INSTALL_JAR('file:dcl_emcaddon.jar', '"emcAddOn"."MailAddOn"', 0);
+ij> CALL SQLJ.INSTALL_JAR('file:extin/dcl_emcaddon.jar', '"emcAddOn"."MailAddOn"', 0);
 0 rows inserted/updated/deleted
 ij> call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('derby.database.classpath', 'EMC.MAIL_APP:"emcAddOn"."MailAddOn"');
 0 rows inserted/updated/deleted
@@ -118,7 +118,7 @@ ij> -- Replace with a signed jar
 -- jarsigner -keystore emcks -storepass ab987c -keypass kpi135 -signedjar dcl_emc2s.jar dcl_emc2.jar emccto
 --
 --
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2s.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2s.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> VALUES EMC.GETSIGNERS('org.apache.derbyTesting.databaseclassloader.emc');
 1                                                                                                                               
@@ -132,14 +132,14 @@ NULL
 ij> -- replace with a hacked jar file, emc.class modified to diable
 -- valid e-mail address check but using same signatures.
 -- ie direct replacement of the .class file.
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2sm.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2sm.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> CALL EMC.ADDCONTACT(99, 'spamking@cracker.org');
 ERROR 42X51: The class 'org.apache.derbyTesting.databaseclassloader.emc' does not exist or is inaccessible. This can happen if the class is not public.
 ERROR XJ001: Java exception: 'org.apache.derbyTesting.databaseclassloader.emc : Security exception thrown accessing class org.apache.derbyTesting.databaseclassloader.emc in jar "EMC"."MAIL_APP" : SHA1 digest error for org/apache/derbyTesting/databaseclassloader/emc.class: java.lang.ClassNotFoundException'.
 ij> -- replace with a hacked jar file, emc.class modified to 
 -- be an invalid jar file (no signing on this jar).
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2l.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2l.jar', 'EMC.MAIL_APP');
 0 rows inserted/updated/deleted
 ij> CALL EMC.ADDCONTACT(999, 'spamking2@cracker.org');
 ERROR 42X51: The class 'org.apache.derbyTesting.databaseclassloader.emc' does not exist or is inaccessible. This can happen if the class is not public.
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl.sql b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl.sql
index 9a71aa1da..9c417e413 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl.sql
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl.sql
@@ -16,7 +16,7 @@ CALL EMC.ADDCONTACT(1, 'bill@somecompany.com');
 -- install the jar, copied there by the magic of supportfiles
 -- in the test harness (dcl_app.properties). The source for
 -- the class is contained within the jar for reference.
-CALL SQLJ.INSTALL_JAR('file:dcl_emc1.jar', 'EMC.MAIL_APP', 0);
+CALL SQLJ.INSTALL_JAR('file:extin/dcl_emc1.jar', 'EMC.MAIL_APP', 0);
 
 -- fails because no class not in classpath, jar file not in database classpath.
 CALL EMC.ADDCONTACT(1, 'bill@somecompany.com');
@@ -42,7 +42,7 @@ SELECT id, e_mail, ok from EMC.CONTACTS;
 -- now change the application to run checks on the e-mail
 -- address to ensure it is valid (in this case by seeing if
 -- simply includes 'spam' in the title.
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2.jar', 'EMC.MAIL_APP');
 
 CALL EMC.ADDCONTACT(4, 'spammer@ripoff.com');
 CALL EMC.ADDCONTACT(5, 'open@source.org');
@@ -61,7 +61,7 @@ READS SQL DATA
 external name 'org.apache.derbyTesting.databaseclassloader.addon.vendor.util.valid'
 language java parameter style java;
 
-CALL SQLJ.INSTALL_JAR('file:dcl_emcaddon.jar', '"emcAddOn"."MailAddOn"', 0);
+CALL SQLJ.INSTALL_JAR('file:extin/dcl_emcaddon.jar', '"emcAddOn"."MailAddOn"', 0);
 
 call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('derby.database.classpath', 'EMC.MAIL_APP:"emcAddOn"."MailAddOn"');
 
@@ -87,7 +87,7 @@ VALUES EMC.GETSIGNERS('org.apache.derbyTesting.databaseclassloader.emc');
 --
 --
 
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2s.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2s.jar', 'EMC.MAIL_APP');
 VALUES EMC.GETSIGNERS('org.apache.derbyTesting.databaseclassloader.emc');
 
 -- other jar should not be signed
@@ -96,12 +96,12 @@ VALUES EMC.GETSIGNERS('org.apache.derbyTesting.databaseclassloader.addon.vendor.
 -- replace with a hacked jar file, emc.class modified to diable
 -- valid e-mail address check but using same signatures.
 -- ie direct replacement of the .class file.
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2sm.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2sm.jar', 'EMC.MAIL_APP');
 CALL EMC.ADDCONTACT(99, 'spamking@cracker.org');
 
 -- replace with a hacked jar file, emc.class modified to 
 -- be an invalid jar file (no signing on this jar).
-CALL SQLJ.REPLACE_JAR('file:dcl_emc2l.jar', 'EMC.MAIL_APP');
+CALL SQLJ.REPLACE_JAR('file:extin/dcl_emc2l.jar', 'EMC.MAIL_APP');
 CALL EMC.ADDCONTACT(999, 'spamking2@cracker.org');
 
 
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl_app.properties b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl_app.properties
index 97791f245..e823e49e1 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl_app.properties
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/dcl_app.properties
@@ -1,4 +1,5 @@
 usedefaults=true
 supportfiles=tests/lang/dcl_emc1.jar,tests/lang/dcl_emc2.jar,tests/lang/dcl_emcaddon.jar,tests/lang/dcl_emc2s.jar,tests/lang/dcl_emc2sm.jar,tests/lang/dcl_emc2l.jar
 #Exclude for J2ME/Foundation - test requires java.sql.DriverManager for server side JDBC
-runwithfoundation=false
\ No newline at end of file
+runwithfoundation=false
+useextdirs=true
