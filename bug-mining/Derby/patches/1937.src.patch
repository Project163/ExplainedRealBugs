diff --git a/java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java b/java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java
index 3408811a1..bcb211221 100644
--- a/java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java
+++ b/java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java
@@ -2705,7 +2705,8 @@ public abstract class EmbedConnection implements EngineConnection
 				nse = Util.generateCsSQLException(mse);
 
             throw Util.seeNextException(SQLState.BOOT_DATABASE_FAILED,
-                                        new Object[] { dbname }, nse);
+                                        new Object[] { dbname, 
+                                        (Object) this.getClass().getClassLoader() }, nse);
 		}
 
 		// If database exists, getDatabase() will return the database object.
diff --git a/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java b/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java
index 559708b5a..50eb45977 100644
--- a/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java
+++ b/java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java
@@ -359,8 +359,10 @@ public class BaseDataFileFactory
 			   MessageService.getTextMessage(MessageId.STORE_BOOT_MSG,
                                              jbmsVersion,
                                              identifier,
-                                             dataDirectory,
-                                             readOnlyMsg));
+                                             dataDirectory + " " + readOnlyMsg,
+                                             // cast to Object so we get object hash code
+                                             (Object) this.getClass().getClassLoader()
+                                             ));
 
 		uf = null;
 
@@ -462,7 +464,11 @@ public class BaseDataFileFactory
 		logMsg("\n" + CheapDateFormatter.formatDate(shutdownTime) +
                 MessageService.getTextMessage(
                     MessageId.STORE_SHUTDOWN_MSG,
-                    getIdentifier()));
+                    getIdentifier(), 
+                    // print object and ide of classloader.
+                    // Cast to object so we don't get just the toString() 
+                    // method
+                    (Object) this.getClass().getClassLoader()));
 		istream.println(LINE);
 
 		if (!isCorrupt) 
diff --git a/java/engine/org/apache/derby/loc/messages.xml b/java/engine/org/apache/derby/loc/messages.xml
index 9cea1f905..973df03c5 100644
--- a/java/engine/org/apache/derby/loc/messages.xml
+++ b/java/engine/org/apache/derby/loc/messages.xml
@@ -4428,8 +4428,9 @@ ln=lower-case two-letter ISO-639 language code, CO=upper-case two-letter ISO-316
 
             <msg>
                 <name>XJ040.C</name>
-                <text>Failed to start database '{0}', see the next exception for details.</text>
+                <text>Failed to start database '{0}' with class loader {1}, see the next exception for details.</text>
                 <arg>databaseName</arg>
+		<arg>classLoader</arg>
             </msg>
 
             <msg>
@@ -7471,20 +7472,21 @@ MessageId.java.
             <msg>
                 <name>D001</name>
                 <text>:
- Booting Derby version {0}: instance {1}
-on database directory {2} {3} 
+ Booting Derby version {0}: instance {1} 
+on database directory {2}  with class loader {3}
 </text>
                 <arg>derbyVersion</arg>
                 <arg>id</arg>
                 <arg>directoryName</arg>
-                <arg>readOnlyStatus</arg>
+                <arg>classloader</arg>
             </msg>
 
             <msg>
                 <name>D002</name>
                 <text>:
-Shutting down instance {0}</text>
+Shutting down instance {0} with class loader {1} </text>
                 <arg>id</arg>
+		<arg>classloader</arg>
             </msg>
 
             <msg>
diff --git a/java/testing/org/apache/derbyTesting/functionTests/harness/Sed.java b/java/testing/org/apache/derbyTesting/functionTests/harness/Sed.java
index b84ce8b11..b0ad36d06 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/harness/Sed.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/harness/Sed.java
@@ -116,6 +116,9 @@ public class Sed
         searchStrings.addElement("^Transaction:\\(.*\\) *\\|"); 
         searchStrings.addElement("^Read [0-9]* of [0-9]* bytes$");
         searchStrings.addElement("Directory .*connect.wombat.seg0");
+        //DERBY-4588 - filter out specific class and object id
+        searchStrings.addElement("with class loader .*,");
+        
         // Filter for constraint names - bug 5622 - our internal constraint names are too long. To be db2 compatible, we have reworked them.
         StringBuffer constraintNameFilter = new StringBuffer(); 
         constraintNameFilter.append("SQL[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]");
@@ -208,6 +211,7 @@ public class Sed
         subStrings.addElement("Transaction:(XXX)|");
         subStrings.addElement("Read ... bytes");
         subStrings.addElement("Directory DBLOCATION/seg0");
+        subStrings.addElement("with class loader XXXX, ");
         subStrings.addElement("xxxxGENERATED-IDxxxx");
         subStrings.addElement("xxxxFILTERED-UUIDxxxx");
         subStrings.addElement("xxxxxxFILTERED-TIMESTAMPxxxxx");
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabase.out b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabase.out
index 4f9026873..2c5b114ec 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabase.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabase.out
@@ -24,7 +24,7 @@ ERROR XJ015: Derby system shutdown.
 ij> -- test for bug 3668
 -- try the old password, should fail
 connect 'jdbc:derby:wombat;bootPassword=Thursday';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  
 ij> connect 'jdbc:derby:wombat;bootPassword=Wednesday';
 ij> -- switch back to old password
@@ -85,13 +85,13 @@ ij> disconnect;
 ij> connect 'jdbc:derby:;shutdown=true';
 ERROR XJ015: Derby system shutdown.
 ij> connect 'jdbc:derby:wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  
 ij> connect 'jdbc:derby:wombat;bootPassword=Thursday';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  
 ij> connect 'jdbc:derby:wombat;bootPassword=Saturday';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  
 ij> connect 'jdbc:derby:wombat;bootPassword=derbypwd';
 ij> values SYSCS_UTIL.SYSCS_GET_DATABASE_PROPERTY('bootPassword');
@@ -119,7 +119,7 @@ ij> disconnect;
 ij> connect 'jdbc:derby:;shutdown=true';
 ERROR XJ015: Derby system shutdown.
 ij> connect 'jdbc:derby:wombat;bootPassword=derbypwd';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  
 ij> connect 'jdbc:derby:wombat;bootPassword=derbypwdxx';
 ij> select * from t1;
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest1.out b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest1.out
index e9c062021..4d5d91a05 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest1.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest1.out
@@ -107,7 +107,7 @@ ij> connect 'wombat_key;shutdown=true';
 ERROR 08006: Database 'wombat_key' shutdown.
 ij> --- attempt to boot with the old encrytion key, it should fail.
 connect 'jdbc:derby:wombat_key;encryptionKey=6162636465666768';
-ERROR XJ040: Failed to start database 'wombat_key', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat_key' with class loader XXXX,  see the next exception for details.
 ERROR XBCXK: The given encryption key does not match the encryption key used when creating the database. Please ensure that you are using the correct encryption key and try again. 
 ij> -- test confugring the database for encrypion with a boot password. 
 connect 'wombat_pwd;create=true';
@@ -198,6 +198,6 @@ ij> connect 'wombat_pwd;shutdown=true';
 ERROR 08006: Database 'wombat_pwd' shutdown.
 ij> -- attempt to boot the database with the old password, it should fail. 
 connect 'jdbc:derby:wombat_pwd;bootPassword=xyz1234abc';
-ERROR XJ040: Failed to start database 'wombat_pwd', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat_pwd' with class loader XXXX,  see the next exception for details.
 ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  
 ij> 
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest2.out b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest2.out
index 730275adc..5d6f89b25 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest2.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest2.out
@@ -53,13 +53,13 @@ ERROR XJ015: Derby system shutdown.
 ij> -- configure the database for encrypion with an external encryption key.
 -- this should fail because of the global transacton in the prepared state.
 connect 'jdbc:derby:wombat_en;dataEncryption=true;encryptionKey=6162636465666768';
-ERROR XJ040: Failed to start database 'wombat_en', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat_en' with class loader XXXX,  see the next exception for details.
 ERROR XBCXO: Cannot encrypt the database when there is a global transaction in the prepared state.
 ij> ---attempt to configure the database for encrypion with a boot password.
 -- this should fail because of the global transacton in 
 -- the prepared state.
 connect 'jdbc:derby:wombat_en;dataEncryption=true;bootPassword=xyz1234abc';
-ERROR XJ040: Failed to start database 'wombat_en', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat_en' with class loader XXXX,  see the next exception for details.
 ERROR XBCXO: Cannot encrypt the database when there is a global transaction in the prepared state.
 ij> -- now reboot the db and commit the transaction in the prepapred state. 
 xa_datasource 'wombat_en';
@@ -107,7 +107,7 @@ ij> -- attempt to reconfigure the database with a new password.
 -- this should fail because of the global transaction in the prepared state
 -- after recovery.
 connect 'jdbc:derby:wombat_en;bootPassword=xyz1234abc;newBootPassword=new1234xyz';
-ERROR XJ040: Failed to start database 'wombat_en', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat_en' with class loader XXXX,  see the next exception for details.
 ERROR XBCXP: Cannot re-encrypt the database with a new boot password or an external encryption key when there is a global transaction in the prepared state.
 ij> -- now reboot the db and commit the transaction in the prepared state. 
 connect 'jdbc:derby:wombat_en;bootPassword=xyz1234abc';
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest3.out b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest3.out
index 2e8d0c7c5..08d63661e 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest3.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/encryptDatabaseTest3.out
@@ -54,10 +54,10 @@ ij> disconnect;
 ij> -- try encrypting the database 'jdb1' using the jar protocol.
 -- should fail 
 connect 'jdbc:derby:jar:(ina.jar)jdb1;dataEncryption=true;bootPassword=xyz1234abc';
-ERROR XJ040: Failed to start database 'jar:(ina.jar)jdb1', see the next exception for details.
+ERROR XJ040: Failed to start database 'jar:(ina.jar)jdb1' with class loader XXXX,  see the next exception for details.
 ERROR XBCXQ: Cannot configure a read-only database for encryption.
 ij> connect 'jdbc:derby:jar:(ina.jar)jdb1;dataEncryption=true;encryptionKey=6162636465666768';
-ERROR XJ040: Failed to start database 'jar:(ina.jar)jdb1', see the next exception for details.
+ERROR XJ040: Failed to start database 'jar:(ina.jar)jdb1' with class loader XXXX,  see the next exception for details.
 ERROR XBCXQ: Cannot configure a read-only database for encryption.
 ij> -- Case: create a a jar file of an encrypted database and  
 -- try  re-encrypting it while boot it with the jar sub protocol 
@@ -94,7 +94,7 @@ ERROR XJ015: Derby system shutdown.
 ij> -- now finally attempt to re-encrypt the encrypted jar db with 
 -- a new boot password, it should fail.
 connect 'jdbc:derby:jar:(ina.jar)jdb1;dataEncryption=true;bootPassword=xyz1234abc;newBootPassword=new1234xyz';
-ERROR XJ040: Failed to start database 'jar:(ina.jar)jdb1', see the next exception for details.
+ERROR XJ040: Failed to start database 'jar:(ina.jar)jdb1' with class loader XXXX,  see the next exception for details.
 ERROR XBCXR: Cannot re-encrypt a read-only database with a new boot password or an external encryption key .
 ij> -- testing (re) encryption of a database 
 -- when the log arhive mode enabled -----
@@ -127,11 +127,11 @@ ij> connect 'jdbc:derby:wombat;shutdown=true';
 ERROR 08006: Database 'wombat' shutdown.
 ij> -- attempt to configure the database for encryption using password.
 connect 'jdbc:derby:wombat;dataEncryption=true;bootPassword=xyz1234abc;';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBCXS: Cannot configure a database for encryption, when database is in the log archive mode.
 ij> -- attempt to configure the database for encryption using key.
 connect 'jdbc:derby:wombat;dataEncryption=true;encryptionKey=6162636465666768';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBCXS: Cannot configure a database for encryption, when database is in the log archive mode.
 ij> -- disable log archive mode and then reattempt encryption on 
 -- next boot.
@@ -171,7 +171,7 @@ ERROR 08006: Database 'wombat' shutdown.
 ij> -- attempt to re-encrypt the database , with log archive mode enabled.
 -- it should fail.
 connect 'jdbc:derby:wombat;dataEncryption=true;bootPassword=xyz1234abc;newBootPassword=new1234xyz';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBCXT: Cannot re-encrypt a database with a new boot password or an external encryption key, when database is in the log archive mode.
 ij> -- reboot the db and disable the log archive mode
 connect 'jdbc:derby:wombat;bootPassword=xyz1234abc';
@@ -244,7 +244,7 @@ ERROR 08006: Database 'wombat' shutdown.
 ij> -- attempt to re-encrypt the database with external key, with log archive mode enabled.
 -- it should fail.
 connect 'jdbc:derby:wombat;encryptionKey=6162636465666768;newEncryptionKey=5666768616263646';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBCXT: Cannot re-encrypt a database with a new boot password or an external encryption key, when database is in the log archive mode.
 ij> -- reboot the db and disable the log archive mode
 connect 'jdbc:derby:wombat;encryptionKey=6162636465666768';
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/encryptionKey_jar.out b/java/testing/org/apache/derbyTesting/functionTests/master/encryptionKey_jar.out
index 7f7ad01c6..d56be9aaf 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/encryptionKey_jar.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/encryptionKey_jar.out
@@ -64,7 +64,7 @@ ij(DB1)> connect 'jdbc:derby:;shutdown=true';
 ERROR XJ015: Derby system shutdown.
 ij(DB1)> -- NEGATIVE CASE: Test with wrong encryption key. This should fail.
 connect 'jdbc:derby:jar:(ina.jar)db1;encryptionAlgorithm=DES/CBC/NoPadding;encryptionKey=6162636465666760' AS DB1;
-ERROR XJ040: Failed to start database 'jar:(ina.jar)db1', see the next exception for details.
+ERROR XJ040: Failed to start database 'jar:(ina.jar)db1' with class loader XXXX,  see the next exception for details.
 ERROR XBCXK: The given encryption key does not match the encryption key used when creating the database. Please ensure that you are using the correct encryption key and try again. 
 ij(DB1)> disconnect;
 ij> -- test reading a database from a jar file and loading
@@ -101,6 +101,6 @@ ij(DB2CL)> connect 'jdbc:derby:;shutdown=true';
 ERROR XJ015: Derby system shutdown.
 ij(DB2CL)> -- try with wrong encryption key, this should fail.
 connect 'jdbc:derby:classpath:db2;encryptionAlgorithm=DES/CBC/NoPadding;encryptionKey=6162636465666760' AS DB2CL;
-ERROR XJ040: Failed to start database 'classpath:db2', see the next exception for details.
+ERROR XJ040: Failed to start database 'classpath:db2' with class loader XXXX,  see the next exception for details.
 ERROR XBCXK: The given encryption key does not match the encryption key used when creating the database. Please ensure that you are using the correct encryption key and try again. 
 ij(DB2CL)> exit;
diff --git a/java/testing/org/apache/derbyTesting/functionTests/master/rollForwardBackup.out b/java/testing/org/apache/derbyTesting/functionTests/master/rollForwardBackup.out
index 20e2be4fe..7fc62f572 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/master/rollForwardBackup.out
+++ b/java/testing/org/apache/derbyTesting/functionTests/master/rollForwardBackup.out
@@ -259,7 +259,7 @@ ij> ---check the error case of log device only existing when
 -- we try to do createFrom .
 --following connection shoul fail.
 connect 'erwombat;createFrom=extinout/mybackup/wombat;logDevice=extinout/crwombatlog';
-ERROR XJ040: Failed to start database 'erwombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'erwombat' with class loader XXXX,  see the next exception for details.
 ERROR XSLAT: The log directory 'extinout<ps>crwombatlog<ps>log' exists. The directory might belong to another database. Check that the location specified for the logDevice attribute is correct.
 ij> connect 'wombat;restoreFrom=extinout/mybackup/wombat;logDevice=extinout/wombatlog';
 ij> values SUBSTR(SYSCS_UTIL.SYSCS_GET_DATABASE_PROPERTY('logDevice'), LOCATE('wombatlog',SYSCS_UTIL.SYSCS_GET_DATABASE_PROPERTY('logDevice')),9);
@@ -806,7 +806,7 @@ ij> disconnect;
 ij> --NEGATIVE TEST with  RESTORE FLAGS
 -- with createFrom option should give erro on existing database
 connect 'wombat;createFrom=extinout/mybackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM0J: Directory DBLOCATION/wombat already exists.
 ij> -- specify conflictint attributes; it should fail.
 connect 'wombat;create=true;createFrom=extinout/mybackup/wombat';
@@ -821,13 +821,13 @@ ij> connect 'wombat;createFrom=extinout/mybackup/wombat;rollForwardRecoveryFrom=
 ERROR XJ081: Conflicting create/restore/recovery attributes specified.
 ij> -- With wrong back up path name it shoud fail.
 connect 'wombat;rollForwardRecoveryFrom=nobackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM0Y: Backup database directory nobackup<ps>wombat not found. Please make sure that the specified backup path is right.
 ij> connect 'wombat;restoreFrom=nobackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM0Y: Backup database directory nobackup<ps>wombat not found. Please make sure that the specified backup path is right.
 ij> connect 'wombat2;createFrom=nobackup/wombat';
-ERROR XJ040: Failed to start database 'wombat2', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat2' with class loader XXXX,  see the next exception for details.
 ERROR XBM0Y: Backup database directory nobackup<ps>wombat not found. Please make sure that the specified backup path is right.
 ij> --Simulate missing files by renaming some files in backup(like a corrupted backup and check 
 --whether we get proper error messages
@@ -836,21 +836,21 @@ connect 'wombat2;restoreFrom=extinout/mybackup/wombat';
 ij> call RENAME_FILE('extinout/mybackup/wombat/','service.properties','service.properties.old');
 0 rows inserted/updated/deleted
 ij> connect 'wombat;restoreFrom=extinout/mybackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM0Q: File extinout<ps>mybackup<ps>wombat<ps>service.properties not found. Please make sure that backup copy is the correct one and it is not corrupted.
 ij> call RENAME_FILE('extinout/mybackup/wombat/','service.properties.old','service.properties');
 0 rows inserted/updated/deleted
 ij> call RENAME_FILE('extinout/mybackup/wombat/','log','log.old');
 0 rows inserted/updated/deleted
 ij> connect 'wombat;restoreFrom=extinout/mybackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XSLAS: Log directory extinout<ps>mybackup<ps>wombat<ps>log not found in backup during restore. Please make sure that backup copy is the correct one and it is not corrupted.
 ij> call RENAME_FILE('extinout/mybackup/wombat/','log.old','log');
 0 rows inserted/updated/deleted
 ij> call RENAME_FILE('extinout/mybackup/wombat/','seg0','data.old');
 0 rows inserted/updated/deleted
 ij> connect 'wombat;restoreFrom=extinout/mybackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XSDG6: Data segment directory not found in extinout<ps>mybackup<ps>wombat backup during restore. Please make sure that backup copy is the right one and it is not corrupted.
 ij> call RENAME_FILE('extinout/mybackup/wombat/','data.old','seg0');
 0 rows inserted/updated/deleted
@@ -859,21 +859,21 @@ ij> --try error cases with createFrom;if root created is not getting cleaned up,
 call RENAME_FILE('extinout/mybackup/wombat/','service.properties','service.properties.old');
 0 rows inserted/updated/deleted
 ij> connect 'wombat;createFrom=extinout/mybackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XBM0Q: File extinout<ps>mybackup<ps>wombat<ps>service.properties not found. Please make sure that backup copy is the correct one and it is not corrupted.
 ij> call RENAME_FILE('extinout/mybackup/wombat/','service.properties.old','service.properties');
 0 rows inserted/updated/deleted
 ij> call RENAME_FILE('extinout/mybackup/wombat/','log','log.old');
 0 rows inserted/updated/deleted
 ij> connect 'wombat;createFrom=extinout/mybackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XSLAS: Log directory extinout<ps>mybackup<ps>wombat<ps>log not found in backup during restore. Please make sure that backup copy is the correct one and it is not corrupted.
 ij> call RENAME_FILE('extinout/mybackup/wombat/','log.old','log');
 0 rows inserted/updated/deleted
 ij> call RENAME_FILE('extinout/mybackup/wombat/','seg0','data.old');
 0 rows inserted/updated/deleted
 ij> connect 'wombat;createFrom=extinout/mybackup/wombat';
-ERROR XJ040: Failed to start database 'wombat', see the next exception for details.
+ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.
 ERROR XSDG6: Data segment directory not found in extinout<ps>mybackup<ps>wombat backup during restore. Please make sure that backup copy is the right one and it is not corrupted.
 ij> call RENAME_FILE('extinout/mybackup/wombat/','data.old','seg0');
 0 rows inserted/updated/deleted
diff --git a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/ErrorCodeTest.java b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/ErrorCodeTest.java
index e1695c167..e4680a695 100644
--- a/java/testing/org/apache/derbyTesting/functionTests/tests/lang/ErrorCodeTest.java
+++ b/java/testing/org/apache/derbyTesting/functionTests/tests/lang/ErrorCodeTest.java
@@ -180,7 +180,7 @@ public final class ErrorCodeTest extends BaseJDBCTestCase {
         		{"XJ004","Database '{0}' not found.","40000"},
         		{"XJ015","Derby system shutdown.","50000"},
         		{"XJ028","The URL '{0}' is not properly formed.","40000"},
-        		{"XJ040","Failed to start database '{0}', see the next exception for details.","40000"},
+        		{"XJ040","Failed to start database '{0}' with class loader {1}, see the next exception for details.","40000"},
         		{"XJ041","Failed to create database '{0}', see the next exception for details.","40000"},
                 {"XJ048","Conflicting boot attributes specified: {0}","40000"},
         		{"XJ049","Conflicting create attributes specified.","40000"},
