<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:34:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SHIRO-161] No SecurityManager accessible to the calling code</title>
                <link>https://issues.apache.org/jira/browse/SHIRO-161</link>
                <project id="12310950" key="SHIRO">Shiro</project>
                    <description>&lt;p&gt;The security context is not bound to the thread context. &lt;br/&gt;
The application uses an ajax periodical updater to often refresh some zones. But the user is enabled to interact with the application, so it happens, that two simultaneous requests arrives at the application server. This often produces&lt;br/&gt;
ERROR 2010-05-15 23:33:08,030 (SecurityModule.java:253) - Error handling SecurityException&lt;br/&gt;
org.apache.shiro.UnavailableSecurityManagerException: No SecurityManager accessible to the calling code, either bound to the org.apache.shiro.util.ThreadContext or as a vm static singleton.  This is an invalid application configuration.&lt;br/&gt;
	at org.apache.shiro.SecurityUtils.getSecurityManager(SecurityUtils.java:124)&lt;br/&gt;
	at org.apache.shiro.subject.Subject$Builder.&amp;lt;init&amp;gt;(Subject.java:616)&lt;br/&gt;
	at org.apache.shiro.SecurityUtils.getSubject(SecurityUtils.java:57)&lt;br/&gt;
	at org.tynamo.security.services.impl.SecurityServiceImpl.getSubject(SecurityServiceImpl.java:37)&lt;br/&gt;
	at org.tynamo.security.services.impl.SecurityServiceImpl.isAuthenticated(SecurityServiceImpl.java:42)&lt;br/&gt;
	at $SecurityService_1289de25571.isAuthenticated($SecurityService_1289de25571.java)&lt;br/&gt;
	at org.tynamo.security.ShiroExceptionHandler.handle(ShiroExceptionHandler.java:74)&lt;br/&gt;
	at org.tynamo.security.services.SecurityModule$3.advise(SecurityModule.java:250)&lt;/p&gt;</description>
                <environment>Linux, Tomcat 6, Jetty 6</environment>
        <key id="12464600">SHIRO-161</key>
            <summary>No SecurityManager accessible to the calling code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kaosko">Kalle Korhonen</assignee>
                                    <reporter username="rh">Robert Hannebauer</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 May 2010 21:41:06 +0000</created>
                <updated>Sat, 12 Apr 2025 20:22:09 +0000</updated>
                            <resolved>Mon, 17 May 2010 19:01:53 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12867923" author="rh" created="Sat, 15 May 2010 21:47:30 +0000"  >&lt;p&gt;I&apos;ve created a simple test application. Try to click the link on the second page to produce the error. It is sometimes a timing problem, so you have to click more than once.&lt;/p&gt;</comment>
                            <comment id="12867924" author="lhazlewood" created="Sat, 15 May 2010 22:01:24 +0000"  >&lt;p&gt;As the exception states, this is almost always due to an invalid application (or 3rd party framework) configuration.  Something needs to sit in front of a call stack (Method interceptor, AbstractShiroFilter instance, etc) to guarantee thread state is set up and properly bound before the call stack can continue.&lt;/p&gt;

&lt;p&gt;Before SecurityUtils.getSubject() can be called, something higher up in the call stack must bind the SecurityManager to the thread.  The exception trace that you posted indicates that Tynamo is using the plain Subject.Binder() constructor, which &lt;em&gt;must&lt;/em&gt; have a ThreadContext-bound SecurityManager instance (Tynamo needs to ensure this).  The alternative is for Tynamo to use the constructor that specifies the SecurityManager instance directly.&lt;/p&gt;

&lt;p&gt;I would talk to Kalle Korhonen on the Tynamo mailing lists about this - I&apos;m sure he&apos;d be able to track down what is going on as he&apos;s intimately familiar with both projects&apos; codebases.&lt;/p&gt;</comment>
                            <comment id="12867928" author="kaosko" created="Sat, 15 May 2010 22:59:48 +0000"  >&lt;p&gt;I&apos;ll take a look. I wouldn&apos;t rule out a problem in Shiro because apparently this started happening only very recently and there hasn&apos;t been any change in the Tynamo integration code, but could be just one of those things that require adjustment because of internal changes in Shiro.&lt;/p&gt;</comment>
                            <comment id="12867929" author="lhazlewood" created="Sat, 15 May 2010 23:25:48 +0000"  >&lt;p&gt;Yep, sounds good - I&apos;m happy to re-open if you do think it may be Shiro&lt;/p&gt;</comment>
                            <comment id="12868129" author="kaosko" created="Mon, 17 May 2010 08:29:55 +0000"  >&lt;p&gt;Reopening - this is definitely a critical issue in Shiro. I tracked down the cause but getting a bit late here, a comprehensive fix will have to wait for tomorrow. Thanks to Robert for providing the excellent test app.&lt;/p&gt;</comment>
                            <comment id="12868347" author="kaosko" created="Mon, 17 May 2010 19:01:53 +0000"  >&lt;p&gt;Fixed in r945310, see commit comments for more info. Les, please review.&lt;/p&gt;</comment>
                            <comment id="12878095" author="lhazlewood" created="Fri, 11 Jun 2010 22:01:08 +0000"  >&lt;p&gt;Closing all resolved issues due to a successful 1.0.0-incubating release&lt;/p&gt;</comment>
                            <comment id="17943850" author="lprimak" created="Sat, 12 Apr 2025 20:22:09 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://github.com/apache/shiro/pull/2082&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/shiro/pull/2082&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This fix prevents cleanup of ThreadLocals from child threads.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12444588" name="Test-eclipse.zip" size="22857" author="rh" created="Sat, 15 May 2010 21:47:29 +0000"/>
                            <attachment id="12444589" name="Test.war" size="4005741" author="rh" created="Sat, 15 May 2010 21:48:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>174892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1017j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208330</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>