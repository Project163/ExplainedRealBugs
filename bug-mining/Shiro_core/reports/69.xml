<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:35:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SHIRO-379] SimpleAccoutRealm concurrency access to roles and users</title>
                <link>https://issues.apache.org/jira/browse/SHIRO-379</link>
                <project id="12310950" key="SHIRO">Shiro</project>
                    <description>&lt;p&gt;I&apos;m using a PropertiesRealm which automatically reload Users and roles if the resource has been modified.&lt;br/&gt;
And i noticed that authenticating an user and reloading properties file in the same time, authenticating do not wait for reloading to be finished. &lt;/p&gt;

&lt;p&gt;Should not SimpleAccountRealm be refactored in order to lock authentication while modifying users / roles?&lt;/p&gt;

&lt;p&gt;We should simply acquire a Mutex in order to retrieve users / roles or adding / removing users?&lt;/p&gt;

&lt;p&gt;An other way to ensure concurrency should be to use Collections.synchronizedMap() for users&apos; map and roles&apos; map, but while reloading resource, authentications won&apos;t wait for the reloading to be finished.&lt;/p&gt;

&lt;p&gt;I can do required changes if it helps &lt;/p&gt;</description>
                <environment>Apache Tomcat 6.0.35, Win 7 x64, JDK 1.6.0_32 x64</environment>
        <key id="12600288">SHIRO-379</key>
            <summary>SimpleAccoutRealm concurrency access to roles and users</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="coxalass">Ludovic Garcia</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jul 2012 09:49:31 +0000</created>
                <updated>Fri, 15 Jul 2016 14:47:56 +0000</updated>
                            <resolved>Sat, 4 May 2013 22:19:55 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.2</fixVersion>
                                    <component>Realms </component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13457732" author="jono_morris" created="Tue, 18 Sep 2012 10:39:59 +0000"  >&lt;p&gt;Please find attached a diff that adds a lock to the SimpleAccountRealm for mutual exclusion.&lt;/p&gt;</comment>
                            <comment id="13649190" author="lhazlewood" created="Sat, 4 May 2013 22:19:56 +0000"  >&lt;p&gt;Patch applied, but I changed the code a bit to use more efficient ReentrantReadWriteLocks.  Please give it a look and see if it works.  All of the tests still pass.&lt;/p&gt;

&lt;p&gt;Thanks very much for the excellent tests - they helped a &lt;b&gt;lot&lt;/b&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545547" name="shiro_379.diff" size="19230" author="jono_morris" created="Tue, 18 Sep 2012 10:39:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309259</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1eah3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>291626</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>