<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:35:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SHIRO-307] DomainPermission does not fully support domain, actions and targets properties</title>
                <link>https://issues.apache.org/jira/browse/SHIRO-307</link>
                <project id="12310950" key="SHIRO">Shiro</project>
                    <description>&lt;p&gt;Per the class javadoc, DomainPermission is designed to be a base class for Permission implementations that persist permission parts as separate properties.  It defines private fields for domain, actions and targets and exposes getters/setters for these, but the setParts and constructor methods that set Permission state do not call the property setters and the property setters don&apos;t call setParts.   Property synchronization needs to be added to this class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12511289">SHIRO-307</key>
            <summary>DomainPermission does not fully support domain, actions and targets properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="lhazlewood">Les Hazlewood</assignee>
                                    <reporter username="psteitz">Phil Steitz</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 22 Jun 2011 22:35:41 +0000</created>
                <updated>Fri, 24 Jun 2016 00:07:38 +0000</updated>
                                            <version>1.0.0</version>
                    <version>1.1.0</version>
                                                    <component>Authorization (access control) </component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13053639" author="psteitz" created="Thu, 23 Jun 2011 04:09:10 +0000"  >&lt;p&gt;Here is a patch showing one way (possibly wrong) to think about how to use this class.  It includes a lot of incompatible changes - most significantly changing the actions and targets properties to be Sets.   After playing a bit with trying to define the right abstract methods and then a useable subclass, I came to the conclusion that it might be more convenient to just make this a concrete class with a constructor and accessors (which it sort of already had).  I could be missing the point here.  I added a couple of utility methods needed for splitting / joining strings to/from sets mostly stolen from Commons Lang.  I did not see Lang in the pom.  If I missed it, it would be better to just use Lang.  I have not tested or gotten this to work with my Realm yet.  If it is on the right track, I will improve and add tests.&lt;/p&gt;</comment>
                            <comment id="13054103" author="psteitz" created="Thu, 23 Jun 2011 21:17:25 +0000"  >&lt;p&gt;Replaced attachment.  Added missing constructor and serialVersionUID to DomainPermission&lt;/p&gt;</comment>
                            <comment id="13054106" author="lhazlewood" created="Thu, 23 Jun 2011 21:20:08 +0000"  >&lt;p&gt;Cool - thanks Phil.&lt;/p&gt;</comment>
                            <comment id="13054169" author="lhazlewood" created="Thu, 23 Jun 2011 23:16:38 +0000"  >&lt;p&gt;Hi Phil,&lt;/p&gt;

&lt;p&gt;I applied the patch and made some modifications - namely:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Allow DomainPermission to have null values (one or two constructors allowed null values, so I made this assumption throughout the class).&lt;/li&gt;
	&lt;li&gt;Minor modifications to String-related split/toString support to be more congruent with other similar methods in StringUtils (return a value instead of accept an argument, etc).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Do you see any issues with this based on your testing?  Any objections?&lt;/p&gt;</comment>
                            <comment id="13054227" author="psteitz" created="Fri, 24 Jun 2011 03:37:02 +0000"  >&lt;p&gt;Thanks, Wes.  Works4me other than missing the constructor that I added in the second version of the patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; DomainPermission(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; domain, Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; actions, Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; targets) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.domain = domain;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.actions = actions;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.targets = targets;
        setParts(domain, actions, targets);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t actually use or depend on the properties of this class and I wonder if in fact we need them, since (at least in the use I am making of it) it is essentially just a facade for WildcardPermission.  I don&apos;t know what the general Shiro philosophy is on mutability and in particular mutable permissions, but it might be simpler to not introduce it in the facade.  I guess that&apos;s why you made the setters protected?  But then how exactly are they expected to be used?   So maybe a) the setters should be dropped... or b) the fields themselves should be dropped...  or even c) drop the class entirely and just add a constructor as above to WildcardPermission&lt;/p&gt;

&lt;p&gt;Sorry if my newbie-ness is leading to confusion here.&lt;/p&gt;</comment>
                            <comment id="13054792" author="lhazlewood" created="Sat, 25 Jun 2011 01:21:35 +0000"  >&lt;p&gt;Ah yes - good questions.&lt;/p&gt;

&lt;p&gt;I removed that constructor and had the others protected because typically the DomainPermission (at least in my experience) would always subclassed to represent the &apos;domain&apos; (or more accurately, the resource type) being protected.&lt;/p&gt;

&lt;p&gt;For example, &lt;/p&gt;

&lt;p&gt;DocumentPermission extends DomainPermission&lt;/p&gt;

&lt;p&gt;Based on this use case at least, there is no need for a public constructor taking in the &apos;domain&apos; argument since it is always derived from the class name.&lt;/p&gt;

&lt;p&gt;So, in essence, DomainPermission was intended as a way to represent resources in a compile-time type-safe manner.  It doesn&apos;t really provide any benefit other than that (and maybe a way to codify explicit &apos;targets&apos; and &apos;actions&apos; whereas those concepts are not mandated in the WildcardPermission superclass).&lt;/p&gt;

&lt;p&gt;On another note, I forgot about the mutability issue - Permissions are intended to be immutable, so we won&apos;t need any of the mutators (also helps w/ concurrency).  I suppose someone could make a mutable Permission implementation, but I haven&apos;t seen the need for one and no-one seems to have problems with them being immutable (like you&apos;ve pointed out).&lt;/p&gt;

&lt;p&gt;I guess my vote would be to deprecate DomainPermission entirely since the actions/targets representation could be stored as a String or a Set of Strings depending on how you wish to store that data - which is application specific.  Thoughts?&lt;/p&gt;</comment>
                            <comment id="13054819" author="psteitz" created="Sat, 25 Jun 2011 06:14:42 +0000"  >&lt;p&gt;OK, now I get the original intention of the class.  The way that I am using it s really as a bridge between my permissions persistence store and WildcardPermission.  I store &amp;lt;domain, actions, targets&amp;gt; as &amp;lt;String, Set&amp;lt;String&amp;gt;, Set&amp;lt;String&amp;gt;&amp;gt; and use the setParts code in DomainPermission to construct WildcardPermissions from these.  I guess I could just do the string encoding myself and work directly with WildcardPermissions, but it is handy to have the setParts stuff provided.&lt;/p&gt;

&lt;p&gt;I now see what you are saying about &amp;lt;String, Set&amp;lt;String&amp;gt;, Set&amp;lt;String&amp;gt;&amp;gt; being app-specific, but you could argue that it is a natural extension of the default &amp;lt;String, String, String&amp;gt;.  It certainly seemed natural to me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Another logical option, I guess, is to use generics in the constructor and make setParts abstract.  But that leaves a class of questionable value.&lt;/p&gt;

&lt;p&gt;So I am fine with deprecating.  Adding the &amp;lt;String, Set&amp;lt;String&amp;gt;, Set&amp;lt;String&amp;gt; constructor to WildcardPermission or otherwise Keeping somewhere the setParts code that acts as a WildcardPermission factory would be useful to me at least.&lt;/p&gt;


</comment>
                    </comments>
                    <attachments>
                            <attachment id="12483642" name="DomainPermission.patch" size="6966" author="psteitz" created="Thu, 23 Jun 2011 21:17:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>70081</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ea9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>291591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>