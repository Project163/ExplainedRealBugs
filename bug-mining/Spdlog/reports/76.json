{"url":"https://api.github.com/repos/gabime/spdlog/issues/1581","repository_url":"https://api.github.com/repos/gabime/spdlog","labels_url":"https://api.github.com/repos/gabime/spdlog/issues/1581/labels{/name}","comments_url":"https://api.github.com/repos/gabime/spdlog/issues/1581/comments","events_url":"https://api.github.com/repos/gabime/spdlog/issues/1581/events","html_url":"https://github.com/gabime/spdlog/issues/1581","id":631188002,"node_id":"MDU6SXNzdWU2MzExODgwMDI=","number":1581,"title":"Not compiling on Win10 with MSYS","user":{"login":"s7726","id":1107801,"node_id":"MDQ6VXNlcjExMDc4MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1107801?v=4","gravatar_id":"","url":"https://api.github.com/users/s7726","html_url":"https://github.com/s7726","followers_url":"https://api.github.com/users/s7726/followers","following_url":"https://api.github.com/users/s7726/following{/other_user}","gists_url":"https://api.github.com/users/s7726/gists{/gist_id}","starred_url":"https://api.github.com/users/s7726/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s7726/subscriptions","organizations_url":"https://api.github.com/users/s7726/orgs","repos_url":"https://api.github.com/users/s7726/repos","events_url":"https://api.github.com/users/s7726/events{/privacy}","received_events_url":"https://api.github.com/users/s7726/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-06-04T22:32:32Z","updated_at":"2020-08-30T17:47:03Z","closed_at":"2020-08-30T17:44:19Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Looks like this needs a similar fix as #1347 \r\n\r\n```bash\r\n g++ -g -std=c++11 -pedantic -Wall -Wextra -Werror -Wcast-align -Wcast-qual -Wctor-dtor-privacy -Wdisabled-optimization -Weffc++ -Wformat=2 -Winit-self -Wlogical-op -Wmissing-declarations -Wmissing-include-dirs -Wnoexcept -Wold-style-cast -Woverloaded-virtual -Wredundant-decls -Wreorder -Wshadow -Wsign-conversion -Wsign-promo -Wstrict-null-sentinel -Wstrict-overflow=5 -Wswitch-default -Wundef -Wuninitialized -Wno-unused -Wno-unknown-warning-option -Wno-effc++ -isystem include -I src -MMD -c -o build/temp.o test/temp.cpp\r\nIn file included from include/spdlog/details/os.h:110,\r\n                 from include/spdlog/details/log_msg-inl.h:10,\r\n                 from include/spdlog/details/log_msg.h:35,\r\n                 from include/spdlog/logger.h:18,\r\n                 from include/spdlog/details/registry-inl.h:12,\r\n                 from include/spdlog/details/registry.h:111,\r\n                 from include/spdlog/spdlog.h:13,\r\n                 from test/temp.cpp:7:\r\ninclude/spdlog/details/os-inl.h: In function ‘size_t spdlog::details::os::filesize(FILE*)’:\r\ninclude/spdlog/details/os-inl.h:231:16: error: ‘::fileno’ has not been declared\r\n  231 |     int fd = ::fileno(f);\r\n      |                ^~~~~~\r\ninclude/spdlog/details/os-inl.h: In function ‘bool spdlog::details::os::in_terminal(FILE*)’:\r\ninclude/spdlog/details/os-inl.h:423:21: error: ‘fileno’ was not declared in this scope; did you mean ‘file’?\r\n  423 |     return ::isatty(fileno(file)) != 0;\r\n      |                     ^~~~~~\r\n      |                     file\r\nAt global scope:\r\ncc1plus: error: unrecognized command line option ‘-Wno-unknown-warning-option’ [-Werror]\r\ncc1plus: all warnings being treated as errors\r\n```\r\nPreprocessor has a few defines that could be helpful in deterimining the right path.\r\n\r\n```\r\n#define __CYGWIN__ 1\r\n#define __MSYS__ 1\r\n#define __x86_64 1\r\n#define __x86_64__ 1\r\n```\r\nIt also does not define any of the win32/win64 defnes\r\n\r\ngcc version\r\n`#define __VERSION__ \"9.3.0\"`\r\n\r\nIt does compile if I use `-std=gnu++11`, but there are other reasons I would prefer not to in the project.","closed_by":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/1581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/gabime/spdlog/issues/1581/timeline","performed_via_github_app":null,"state_reason":"completed"}