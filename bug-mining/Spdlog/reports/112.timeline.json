[{"id":12556277054,"node_id":"UE_lADOAY1ReM6GdcATzwAAAALsaZU-","url":"https://api.github.com/repos/gabime/spdlog/issues/events/12556277054","actor":{"login":"wang-bin","id":785206,"node_id":"MDQ6VXNlcjc4NTIwNg==","avatar_url":"https://avatars.githubusercontent.com/u/785206?v=4","gravatar_id":"","url":"https://api.github.com/users/wang-bin","html_url":"https://github.com/wang-bin","followers_url":"https://api.github.com/users/wang-bin/followers","following_url":"https://api.github.com/users/wang-bin/following{/other_user}","gists_url":"https://api.github.com/users/wang-bin/gists{/gist_id}","starred_url":"https://api.github.com/users/wang-bin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wang-bin/subscriptions","organizations_url":"https://api.github.com/users/wang-bin/orgs","repos_url":"https://api.github.com/users/wang-bin/repos","events_url":"https://api.github.com/users/wang-bin/events{/privacy}","received_events_url":"https://api.github.com/users/wang-bin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unsubscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-22T08:47:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/2069159919","html_url":"https://github.com/gabime/spdlog/issues/3073#issuecomment-2069159919","issue_url":"https://api.github.com/repos/gabime/spdlog/issues/3073","id":2069159919,"node_id":"IC_kwDOAY1ReM57VN_v","user":{"login":"tt4g","id":45120617,"node_id":"MDQ6VXNlcjQ1MTIwNjE3","avatar_url":"https://avatars.githubusercontent.com/u/45120617?v=4","gravatar_id":"","url":"https://api.github.com/users/tt4g","html_url":"https://github.com/tt4g","followers_url":"https://api.github.com/users/tt4g/followers","following_url":"https://api.github.com/users/tt4g/following{/other_user}","gists_url":"https://api.github.com/users/tt4g/gists{/gist_id}","starred_url":"https://api.github.com/users/tt4g/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tt4g/subscriptions","organizations_url":"https://api.github.com/users/tt4g/orgs","repos_url":"https://api.github.com/users/tt4g/repos","events_url":"https://api.github.com/users/tt4g/events{/privacy}","received_events_url":"https://api.github.com/users/tt4g/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T11:31:28Z","updated_at":"2024-04-22T11:31:28Z","body":"It appears to be the same problem #2867","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/2069159919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tt4g","id":45120617,"node_id":"MDQ6VXNlcjQ1MTIwNjE3","avatar_url":"https://avatars.githubusercontent.com/u/45120617?v=4","gravatar_id":"","url":"https://api.github.com/users/tt4g","html_url":"https://github.com/tt4g","followers_url":"https://api.github.com/users/tt4g/followers","following_url":"https://api.github.com/users/tt4g/following{/other_user}","gists_url":"https://api.github.com/users/tt4g/gists{/gist_id}","starred_url":"https://api.github.com/users/tt4g/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tt4g/subscriptions","organizations_url":"https://api.github.com/users/tt4g/orgs","repos_url":"https://api.github.com/users/tt4g/repos","events_url":"https://api.github.com/users/tt4g/events{/privacy}","received_events_url":"https://api.github.com/users/tt4g/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/2069225152","html_url":"https://github.com/gabime/spdlog/issues/3073#issuecomment-2069225152","issue_url":"https://api.github.com/repos/gabime/spdlog/issues/3073","id":2069225152,"node_id":"IC_kwDOAY1ReM57Vd7A","user":{"login":"serhii-muchychka","id":17470298,"node_id":"MDQ6VXNlcjE3NDcwMjk4","avatar_url":"https://avatars.githubusercontent.com/u/17470298?v=4","gravatar_id":"","url":"https://api.github.com/users/serhii-muchychka","html_url":"https://github.com/serhii-muchychka","followers_url":"https://api.github.com/users/serhii-muchychka/followers","following_url":"https://api.github.com/users/serhii-muchychka/following{/other_user}","gists_url":"https://api.github.com/users/serhii-muchychka/gists{/gist_id}","starred_url":"https://api.github.com/users/serhii-muchychka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serhii-muchychka/subscriptions","organizations_url":"https://api.github.com/users/serhii-muchychka/orgs","repos_url":"https://api.github.com/users/serhii-muchychka/repos","events_url":"https://api.github.com/users/serhii-muchychka/events{/privacy}","received_events_url":"https://api.github.com/users/serhii-muchychka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T12:05:34Z","updated_at":"2024-04-22T12:05:34Z","body":"Although both of these problems apply to Qt, I would not call them the same. In https://github.com/gabime/spdlog/issues/2867 is a suggestion to make `source_loc` more friendly to asynchronous logger by deep copying, here I propose to cover some edge cases (like null strings). I'm not using an async logger","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/2069225152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"serhii-muchychka","id":17470298,"node_id":"MDQ6VXNlcjE3NDcwMjk4","avatar_url":"https://avatars.githubusercontent.com/u/17470298?v=4","gravatar_id":"","url":"https://api.github.com/users/serhii-muchychka","html_url":"https://github.com/serhii-muchychka","followers_url":"https://api.github.com/users/serhii-muchychka/followers","following_url":"https://api.github.com/users/serhii-muchychka/following{/other_user}","gists_url":"https://api.github.com/users/serhii-muchychka/gists{/gist_id}","starred_url":"https://api.github.com/users/serhii-muchychka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serhii-muchychka/subscriptions","organizations_url":"https://api.github.com/users/serhii-muchychka/orgs","repos_url":"https://api.github.com/users/serhii-muchychka/repos","events_url":"https://api.github.com/users/serhii-muchychka/events{/privacy}","received_events_url":"https://api.github.com/users/serhii-muchychka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/2069258843","html_url":"https://github.com/gabime/spdlog/issues/3073#issuecomment-2069258843","issue_url":"https://api.github.com/repos/gabime/spdlog/issues/3073","id":2069258843,"node_id":"IC_kwDOAY1ReM57VmJb","user":{"login":"tt4g","id":45120617,"node_id":"MDQ6VXNlcjQ1MTIwNjE3","avatar_url":"https://avatars.githubusercontent.com/u/45120617?v=4","gravatar_id":"","url":"https://api.github.com/users/tt4g","html_url":"https://github.com/tt4g","followers_url":"https://api.github.com/users/tt4g/followers","following_url":"https://api.github.com/users/tt4g/following{/other_user}","gists_url":"https://api.github.com/users/tt4g/gists{/gist_id}","starred_url":"https://api.github.com/users/tt4g/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tt4g/subscriptions","organizations_url":"https://api.github.com/users/tt4g/orgs","repos_url":"https://api.github.com/users/tt4g/repos","events_url":"https://api.github.com/users/tt4g/events{/privacy}","received_events_url":"https://api.github.com/users/tt4g/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T12:22:20Z","updated_at":"2024-04-22T12:22:20Z","body":"This is my personal opinion, `source_loc` is a structure for passing `__FILE__` and `__LINE__` macros.\r\nSo `source_loc::empty()` checks for the impossible value `__LINE__ == 0`.\r\nIn other words, when `__LINE__ ! = 0`, it is assumed that there can be no situation where `__FILE__` is an invalid pointer.\r\n\r\nIf `QMessageLogContext` is incompatible with these macros, it is the user's job to manipulate it so that it can be used in the same way as these macros.\r\n\r\nNevertheless, changing the condition of `source_loc::empty()` to `return line > 0;` does not break the ABI, so you may try to submit a PR.\r\n\r\nhttps://github.com/gabime/spdlog/blob/a2b4262090fd3f005c2315dcb5be2f0f1774a005/include/spdlog/common.h#L322","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/2069258843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tt4g","id":45120617,"node_id":"MDQ6VXNlcjQ1MTIwNjE3","avatar_url":"https://avatars.githubusercontent.com/u/45120617?v=4","gravatar_id":"","url":"https://api.github.com/users/tt4g","html_url":"https://github.com/tt4g","followers_url":"https://api.github.com/users/tt4g/followers","following_url":"https://api.github.com/users/tt4g/following{/other_user}","gists_url":"https://api.github.com/users/tt4g/gists{/gist_id}","starred_url":"https://api.github.com/users/tt4g/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tt4g/subscriptions","organizations_url":"https://api.github.com/users/tt4g/orgs","repos_url":"https://api.github.com/users/tt4g/repos","events_url":"https://api.github.com/users/tt4g/events{/privacy}","received_events_url":"https://api.github.com/users/tt4g/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12615516232,"node_id":"CE_lADOAY1ReM6GdcATzwAAAALv8YBI","url":"https://api.github.com/repos/gabime/spdlog/issues/events/12615516232","actor":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b7e0e2c237e24582ceb8db6d2ed26ae4ead08506","commit_url":"https://api.github.com/repos/gabime/spdlog/commits/b7e0e2c237e24582ceb8db6d2ed26ae4ead08506","created_at":"2024-04-25T21:04:01Z","state_reason":null,"performed_via_github_app":null},{"id":12615609970,"node_id":"REFE_lADOAY1ReM6GdcATzwAAAALv8u5y","url":"https://api.github.com/repos/gabime/spdlog/issues/events/12615609970","actor":{"login":"NearlyTRex","id":18123780,"node_id":"MDQ6VXNlcjE4MTIzNzgw","avatar_url":"https://avatars.githubusercontent.com/u/18123780?v=4","gravatar_id":"","url":"https://api.github.com/users/NearlyTRex","html_url":"https://github.com/NearlyTRex","followers_url":"https://api.github.com/users/NearlyTRex/followers","following_url":"https://api.github.com/users/NearlyTRex/following{/other_user}","gists_url":"https://api.github.com/users/NearlyTRex/gists{/gist_id}","starred_url":"https://api.github.com/users/NearlyTRex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NearlyTRex/subscriptions","organizations_url":"https://api.github.com/users/NearlyTRex/orgs","repos_url":"https://api.github.com/users/NearlyTRex/repos","events_url":"https://api.github.com/users/NearlyTRex/events{/privacy}","received_events_url":"https://api.github.com/users/NearlyTRex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b7e0e2c237e24582ceb8db6d2ed26ae4ead08506","commit_url":"https://api.github.com/repos/NearlyTRex/SpdLog/commits/b7e0e2c237e24582ceb8db6d2ed26ae4ead08506","created_at":"2024-04-25T21:14:02Z","performed_via_github_app":null},{"id":12858945276,"node_id":"UE_lADOAY1ReM6GdcATzwAAAAL-c-78","url":"https://api.github.com/repos/gabime/spdlog/issues/events/12858945276","actor":{"login":"SergeyRudyanskiy","id":49032709,"node_id":"MDQ6VXNlcjQ5MDMyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/49032709?v=4","gravatar_id":"","url":"https://api.github.com/users/SergeyRudyanskiy","html_url":"https://github.com/SergeyRudyanskiy","followers_url":"https://api.github.com/users/SergeyRudyanskiy/followers","following_url":"https://api.github.com/users/SergeyRudyanskiy/following{/other_user}","gists_url":"https://api.github.com/users/SergeyRudyanskiy/gists{/gist_id}","starred_url":"https://api.github.com/users/SergeyRudyanskiy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergeyRudyanskiy/subscriptions","organizations_url":"https://api.github.com/users/SergeyRudyanskiy/orgs","repos_url":"https://api.github.com/users/SergeyRudyanskiy/repos","events_url":"https://api.github.com/users/SergeyRudyanskiy/events{/privacy}","received_events_url":"https://api.github.com/users/SergeyRudyanskiy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unsubscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-19T18:06:19Z","performed_via_github_app":null},{"actor":{"login":"tt4g","id":45120617,"node_id":"MDQ6VXNlcjQ1MTIwNjE3","avatar_url":"https://avatars.githubusercontent.com/u/45120617?v=4","gravatar_id":"","url":"https://api.github.com/users/tt4g","html_url":"https://github.com/tt4g","followers_url":"https://api.github.com/users/tt4g/followers","following_url":"https://api.github.com/users/tt4g/following{/other_user}","gists_url":"https://api.github.com/users/tt4g/gists{/gist_id}","starred_url":"https://api.github.com/users/tt4g/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tt4g/subscriptions","organizations_url":"https://api.github.com/users/tt4g/orgs","repos_url":"https://api.github.com/users/tt4g/repos","events_url":"https://api.github.com/users/tt4g/events{/privacy}","received_events_url":"https://api.github.com/users/tt4g/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-20T03:23:13Z","updated_at":"2024-09-20T03:23:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/gabime/spdlog/issues/3195","repository_url":"https://api.github.com/repos/gabime/spdlog","labels_url":"https://api.github.com/repos/gabime/spdlog/issues/3195/labels{/name}","comments_url":"https://api.github.com/repos/gabime/spdlog/issues/3195/comments","events_url":"https://api.github.com/repos/gabime/spdlog/issues/3195/events","html_url":"https://github.com/gabime/spdlog/issues/3195","id":2537660183,"node_id":"I_kwDOAY1ReM6XQZ8X","number":3195,"title":"log_msg_buffer should also buffer source_loc char*","user":{"login":"sketch34","id":1082293,"node_id":"MDQ6VXNlcjEwODIyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/1082293?v=4","gravatar_id":"","url":"https://api.github.com/users/sketch34","html_url":"https://github.com/sketch34","followers_url":"https://api.github.com/users/sketch34/followers","following_url":"https://api.github.com/users/sketch34/following{/other_user}","gists_url":"https://api.github.com/users/sketch34/gists{/gist_id}","starred_url":"https://api.github.com/users/sketch34/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sketch34/subscriptions","organizations_url":"https://api.github.com/users/sketch34/orgs","repos_url":"https://api.github.com/users/sketch34/repos","events_url":"https://api.github.com/users/sketch34/events{/privacy}","received_events_url":"https://api.github.com/users/sketch34/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-09-20T01:52:39Z","updated_at":"2024-09-20T03:23:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":26038648,"node_id":"MDEwOlJlcG9zaXRvcnkyNjAzODY0OA==","name":"spdlog","full_name":"gabime/spdlog","private":false,"owner":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/gabime/spdlog","description":"Fast C++ logging library.","fork":false,"url":"https://api.github.com/repos/gabime/spdlog","forks_url":"https://api.github.com/repos/gabime/spdlog/forks","keys_url":"https://api.github.com/repos/gabime/spdlog/keys{/key_id}","collaborators_url":"https://api.github.com/repos/gabime/spdlog/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/gabime/spdlog/teams","hooks_url":"https://api.github.com/repos/gabime/spdlog/hooks","issue_events_url":"https://api.github.com/repos/gabime/spdlog/issues/events{/number}","events_url":"https://api.github.com/repos/gabime/spdlog/events","assignees_url":"https://api.github.com/repos/gabime/spdlog/assignees{/user}","branches_url":"https://api.github.com/repos/gabime/spdlog/branches{/branch}","tags_url":"https://api.github.com/repos/gabime/spdlog/tags","blobs_url":"https://api.github.com/repos/gabime/spdlog/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/gabime/spdlog/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/gabime/spdlog/git/refs{/sha}","trees_url":"https://api.github.com/repos/gabime/spdlog/git/trees{/sha}","statuses_url":"https://api.github.com/repos/gabime/spdlog/statuses/{sha}","languages_url":"https://api.github.com/repos/gabime/spdlog/languages","stargazers_url":"https://api.github.com/repos/gabime/spdlog/stargazers","contributors_url":"https://api.github.com/repos/gabime/spdlog/contributors","subscribers_url":"https://api.github.com/repos/gabime/spdlog/subscribers","subscription_url":"https://api.github.com/repos/gabime/spdlog/subscription","commits_url":"https://api.github.com/repos/gabime/spdlog/commits{/sha}","git_commits_url":"https://api.github.com/repos/gabime/spdlog/git/commits{/sha}","comments_url":"https://api.github.com/repos/gabime/spdlog/comments{/number}","issue_comment_url":"https://api.github.com/repos/gabime/spdlog/issues/comments{/number}","contents_url":"https://api.github.com/repos/gabime/spdlog/contents/{+path}","compare_url":"https://api.github.com/repos/gabime/spdlog/compare/{base}...{head}","merges_url":"https://api.github.com/repos/gabime/spdlog/merges","archive_url":"https://api.github.com/repos/gabime/spdlog/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/gabime/spdlog/downloads","issues_url":"https://api.github.com/repos/gabime/spdlog/issues{/number}","pulls_url":"https://api.github.com/repos/gabime/spdlog/pulls{/number}","milestones_url":"https://api.github.com/repos/gabime/spdlog/milestones{/number}","notifications_url":"https://api.github.com/repos/gabime/spdlog/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/gabime/spdlog/labels{/name}","releases_url":"https://api.github.com/repos/gabime/spdlog/releases{/id}","deployments_url":"https://api.github.com/repos/gabime/spdlog/deployments","created_at":"2014-11-01T01:28:53Z","updated_at":"2025-11-10T12:05:27Z","pushed_at":"2025-11-09T17:38:28Z","git_url":"git://github.com/gabime/spdlog.git","ssh_url":"git@github.com:gabime/spdlog.git","clone_url":"https://github.com/gabime/spdlog.git","svn_url":"https://github.com/gabime/spdlog","homepage":"","size":42707,"stargazers_count":27608,"watchers_count":27608,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":4955,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":51,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cpp","cpp11","header-only","logging","spdlog"],"visibility":"public","forks":4955,"open_issues":51,"watchers":27608,"default_branch":"v1.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"The `source_loc` struct holds `const char *filename` and `const char *funcname` which need buffering for the same reason the logger name and payload `string_view` do.\r\n\r\nI encountered this issue when using `ringbuffer_sink`.","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/3195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/gabime/spdlog/issues/3195/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"tt4g","id":45120617,"node_id":"MDQ6VXNlcjQ1MTIwNjE3","avatar_url":"https://avatars.githubusercontent.com/u/45120617?v=4","gravatar_id":"","url":"https://api.github.com/users/tt4g","html_url":"https://github.com/tt4g","followers_url":"https://api.github.com/users/tt4g/followers","following_url":"https://api.github.com/users/tt4g/following{/other_user}","gists_url":"https://api.github.com/users/tt4g/gists{/gist_id}","starred_url":"https://api.github.com/users/tt4g/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tt4g/subscriptions","organizations_url":"https://api.github.com/users/tt4g/orgs","repos_url":"https://api.github.com/users/tt4g/repos","events_url":"https://api.github.com/users/tt4g/events{/privacy}","received_events_url":"https://api.github.com/users/tt4g/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-25T20:38:56Z","updated_at":"2024-10-25T20:38:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/gabime/spdlog/issues/3227","repository_url":"https://api.github.com/repos/gabime/spdlog","labels_url":"https://api.github.com/repos/gabime/spdlog/issues/3227/labels{/name}","comments_url":"https://api.github.com/repos/gabime/spdlog/issues/3227/comments","events_url":"https://api.github.com/repos/gabime/spdlog/issues/3227/events","html_url":"https://github.com/gabime/spdlog/issues/3227","id":2614379018,"node_id":"I_kwDOAY1ReM6b1EIK","number":3227,"title":"source_loc corrupted when use in async logger","user":{"login":"Ducatel","id":1184332,"node_id":"MDQ6VXNlcjExODQzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1184332?v=4","gravatar_id":"","url":"https://api.github.com/users/Ducatel","html_url":"https://github.com/Ducatel","followers_url":"https://api.github.com/users/Ducatel/followers","following_url":"https://api.github.com/users/Ducatel/following{/other_user}","gists_url":"https://api.github.com/users/Ducatel/gists{/gist_id}","starred_url":"https://api.github.com/users/Ducatel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ducatel/subscriptions","organizations_url":"https://api.github.com/users/Ducatel/orgs","repos_url":"https://api.github.com/users/Ducatel/repos","events_url":"https://api.github.com/users/Ducatel/events{/privacy}","received_events_url":"https://api.github.com/users/Ducatel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-10-25T15:08:18Z","updated_at":"2024-10-29T15:35:29Z","closed_at":"2024-10-29T15:35:29Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":26038648,"node_id":"MDEwOlJlcG9zaXRvcnkyNjAzODY0OA==","name":"spdlog","full_name":"gabime/spdlog","private":false,"owner":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/gabime/spdlog","description":"Fast C++ logging library.","fork":false,"url":"https://api.github.com/repos/gabime/spdlog","forks_url":"https://api.github.com/repos/gabime/spdlog/forks","keys_url":"https://api.github.com/repos/gabime/spdlog/keys{/key_id}","collaborators_url":"https://api.github.com/repos/gabime/spdlog/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/gabime/spdlog/teams","hooks_url":"https://api.github.com/repos/gabime/spdlog/hooks","issue_events_url":"https://api.github.com/repos/gabime/spdlog/issues/events{/number}","events_url":"https://api.github.com/repos/gabime/spdlog/events","assignees_url":"https://api.github.com/repos/gabime/spdlog/assignees{/user}","branches_url":"https://api.github.com/repos/gabime/spdlog/branches{/branch}","tags_url":"https://api.github.com/repos/gabime/spdlog/tags","blobs_url":"https://api.github.com/repos/gabime/spdlog/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/gabime/spdlog/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/gabime/spdlog/git/refs{/sha}","trees_url":"https://api.github.com/repos/gabime/spdlog/git/trees{/sha}","statuses_url":"https://api.github.com/repos/gabime/spdlog/statuses/{sha}","languages_url":"https://api.github.com/repos/gabime/spdlog/languages","stargazers_url":"https://api.github.com/repos/gabime/spdlog/stargazers","contributors_url":"https://api.github.com/repos/gabime/spdlog/contributors","subscribers_url":"https://api.github.com/repos/gabime/spdlog/subscribers","subscription_url":"https://api.github.com/repos/gabime/spdlog/subscription","commits_url":"https://api.github.com/repos/gabime/spdlog/commits{/sha}","git_commits_url":"https://api.github.com/repos/gabime/spdlog/git/commits{/sha}","comments_url":"https://api.github.com/repos/gabime/spdlog/comments{/number}","issue_comment_url":"https://api.github.com/repos/gabime/spdlog/issues/comments{/number}","contents_url":"https://api.github.com/repos/gabime/spdlog/contents/{+path}","compare_url":"https://api.github.com/repos/gabime/spdlog/compare/{base}...{head}","merges_url":"https://api.github.com/repos/gabime/spdlog/merges","archive_url":"https://api.github.com/repos/gabime/spdlog/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/gabime/spdlog/downloads","issues_url":"https://api.github.com/repos/gabime/spdlog/issues{/number}","pulls_url":"https://api.github.com/repos/gabime/spdlog/pulls{/number}","milestones_url":"https://api.github.com/repos/gabime/spdlog/milestones{/number}","notifications_url":"https://api.github.com/repos/gabime/spdlog/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/gabime/spdlog/labels{/name}","releases_url":"https://api.github.com/repos/gabime/spdlog/releases{/id}","deployments_url":"https://api.github.com/repos/gabime/spdlog/deployments","created_at":"2014-11-01T01:28:53Z","updated_at":"2025-11-10T12:05:27Z","pushed_at":"2025-11-09T17:38:28Z","git_url":"git://github.com/gabime/spdlog.git","ssh_url":"git@github.com:gabime/spdlog.git","clone_url":"https://github.com/gabime/spdlog.git","svn_url":"https://github.com/gabime/spdlog","homepage":"","size":42707,"stargazers_count":27608,"watchers_count":27608,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":4955,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":51,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cpp","cpp11","header-only","logging","spdlog"],"visibility":"public","forks":4955,"open_issues":51,"watchers":27608,"default_branch":"v1.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi,\r\n\r\nI face an issue when I use async logger +rotating_file sink + source_loc.\r\nThe file name and the function name are corrupted.\r\n\r\nI go something like this in my output file\r\n\r\n````\r\nùùùùùùùùùùùùùùùùùùùùùùùùùùùùù(49):µµµµµµµµµµµµµµµµµµ [unittest][critical](Thread: 20264) 2024/10/25 16:53:39.413 Log Message: a log entry -- Context:\r\n````\r\n\r\nInstead of the follwing when I'm using synchronous logger\r\n````\r\nE:\\sources\\libs\\UnitTest\\TestLog.cpp(49):UnitTest::TestLog::TestBasicUsage [unittest][critical](Thread: 20264) 2024/10/25 16:53:39.413 Log Message: a log entry -- Context:\r\n````\r\n\r\nBasically my code do\r\n\r\n\r\n````cpp\r\nMyLogger logger; //logger created with rotating file sink\r\nlogger.writeLog(L\"a log entry\", __FUNCTION__, __FILE__, __LINE__, L\"\", MyLog::LogLevel::kCritical);\r\n...\r\n\r\n//// In the  MyLogger class\r\nvoid MyLogger::writeLog(const std::wstring_view &strLogMessage, const std::string&strFunctionName, const std::string& strFileName, const int nLine, const std::wstring_view&strContext, LogLevel logLevel)\r\n{\r\n    spdlog::source_loc sourceLoc(strFileName.c_str(), nLine, strFunctionName.c_str());\r\n    mLoggerPtr->log(sourceLoc, static_cast<spdlog::level::level_enum>(logLevel), std::format(L\"Log Message: {} -- Context:{}\", strLogMessage, strContext).c_str());\r\n}\r\n````\r\n\r\nSeems really look like memory corruption when thread come into the game.\r\n\r\nSo I did a really basic test by changing the source_loc struct by\r\n\r\n``````cpp\r\nstruct source_loc {\r\n    SPDLOG_CONSTEXPR source_loc() = default;\r\n    SPDLOG_CONSTEXPR source_loc(const char *filename_in, int line_in, const char *funcname_in)\r\n        : filename{filename_in},\r\n          line{line_in},\r\n          funcname{funcname_in} {}\r\n\r\n    SPDLOG_CONSTEXPR source_loc(const source_loc& other)\r\n        : line(other.line) {\r\n        if (other.filename) {\r\n            filename = new char[std::strlen(other.filename) + 1];\r\n            std::strcpy(const_cast<char*>(filename), other.filename);\r\n        }\r\n        if (other.funcname) {\r\n            funcname = new char[std::strlen(other.funcname) + 1];\r\n            std::strcpy(const_cast<char*>(funcname), other.funcname);\r\n        }\r\n    }\r\n\r\n\r\n    SPDLOG_CONSTEXPR ~source_loc() {\r\n        delete[] filename;\r\n        delete[] funcname;\r\n    }\r\n\r\n\r\n    SPDLOG_CONSTEXPR     source_loc& operator=(const source_loc& other) {\r\n        if (this != &other) { \r\n            delete[] filename;\r\n            delete[] funcname;\r\n\r\n\r\n            line = other.line;\r\n\r\n            if (other.filename) {\r\n                filename = new char[std::strlen(other.filename) + 1];\r\n                std::strcpy(const_cast<char*>(filename), other.filename);\r\n            }\r\n            else {\r\n                filename = nullptr;\r\n            }\r\n            if (other.funcname) {\r\n                funcname = new char[std::strlen(other.funcname) + 1];\r\n                std::strcpy(const_cast<char*>(funcname), other.funcname);\r\n            }\r\n            else {\r\n                funcname = nullptr;\r\n            }\r\n        }\r\n        return *this;\r\n    }\r\n\r\n    SPDLOG_CONSTEXPR bool empty() const SPDLOG_NOEXCEPT { return line <= 0; }\r\n    const char *filename{nullptr};\r\n    int line{0};\r\n    const char *funcname{nullptr};\r\n};\r\n``````\r\n\r\nAnd it's working.\r\nSo did I do something wrong ?\r\nOr there is a bug here ?\r\n\r\nThanks in advance for your help\r\n\r\n\r\n### Extra info:\r\n* version 1.14.1\r\n* Compiled with Visual studio 2022 windows x64 c++20 enabled","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/3227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/gabime/spdlog/issues/3227/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]