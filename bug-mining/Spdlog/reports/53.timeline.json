[{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/559609157","html_url":"https://github.com/gabime/spdlog/issues/1327#issuecomment-559609157","issue_url":"https://api.github.com/repos/gabime/spdlog/issues/1327","id":559609157,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTYwOTE1Nw==","user":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-28T21:55:26Z","updated_at":"2019-11-28T21:55:26Z","body":"Thanks for reporting.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/559609157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/559701349","html_url":"https://github.com/gabime/spdlog/issues/1327#issuecomment-559701349","issue_url":"https://api.github.com/repos/gabime/spdlog/issues/1327","id":559701349,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTcwMTM0OQ==","user":{"login":"ivan236634452","id":32092042,"node_id":"MDQ6VXNlcjMyMDkyMDQy","avatar_url":"https://avatars.githubusercontent.com/u/32092042?v=4","gravatar_id":"","url":"https://api.github.com/users/ivan236634452","html_url":"https://github.com/ivan236634452","followers_url":"https://api.github.com/users/ivan236634452/followers","following_url":"https://api.github.com/users/ivan236634452/following{/other_user}","gists_url":"https://api.github.com/users/ivan236634452/gists{/gist_id}","starred_url":"https://api.github.com/users/ivan236634452/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivan236634452/subscriptions","organizations_url":"https://api.github.com/users/ivan236634452/orgs","repos_url":"https://api.github.com/users/ivan236634452/repos","events_url":"https://api.github.com/users/ivan236634452/events{/privacy}","received_events_url":"https://api.github.com/users/ivan236634452/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-29T08:18:34Z","updated_at":"2019-11-29T08:20:14Z","body":"The culprit is \"format\" method in elapsed_formatter class in \"pattern_formatter-inl.h\":\r\n```\r\nvoid format(const details::log_msg &msg, const std::tm &, memory_buf_t &dest) override\r\n{\r\n    auto delta = (std::max)(msg.time - last_message_time_, log_clock::duration::zero());\r\n    auto delta_units = std::chrono::duration_cast<DurationUnits>(delta);\r\n    last_message_time_ = msg.time;\r\n    ScopedPadder p(6, padinfo_, dest);\r\n    fmt_helper::pad6(static_cast<size_t>(delta_units.count()), dest);\r\n}\r\n```\r\n\r\nI would've actually preferred to get rid of leading zeroes altogether. For me this:\r\n```\r\n|         2 |\r\n|     14189 |\r\n|        30 |\r\n|         0 |\r\n|       178 |\r\n|        10 |\r\n|         1 |\r\n|    345212 |\r\n```\r\nreads easier than this:\r\n```\r\n|    000002 |\r\n|    014189 |\r\n|    000030 |\r\n|    000000 |\r\n|    000178 |\r\n|    000010 |\r\n|    000001 |\r\n|    345212 |\r\n```\r\n\r\nMy current fix is this:\r\n```\r\nvoid format(const details::log_msg &msg, const std::tm &, memory_buf_t &dest) override\r\n{\r\n    auto delta = (std::max)(msg.time - last_message_time_, log_clock::duration::zero());\r\n    auto delta_units = std::chrono::duration_cast<DurationUnits>(delta).count();\r\n    last_message_time_ = msg.time;\r\n    const auto field_size = fmt_helper::count_digits(delta_units);\r\n    ScopedPadder p(field_size, padinfo_, dest);\r\n    fmt_helper::append_int(delta_units, dest);\r\n}\r\n```\r\nBut it is slower (probably), and breaks backward compatibility (to a significantly greater extent). But I'm just a scrub user, not a library designer, and can afford to not care about the latter.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/559701349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ivan236634452","id":32092042,"node_id":"MDQ6VXNlcjMyMDkyMDQy","avatar_url":"https://avatars.githubusercontent.com/u/32092042?v=4","gravatar_id":"","url":"https://api.github.com/users/ivan236634452","html_url":"https://github.com/ivan236634452","followers_url":"https://api.github.com/users/ivan236634452/followers","following_url":"https://api.github.com/users/ivan236634452/following{/other_user}","gists_url":"https://api.github.com/users/ivan236634452/gists{/gist_id}","starred_url":"https://api.github.com/users/ivan236634452/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivan236634452/subscriptions","organizations_url":"https://api.github.com/users/ivan236634452/orgs","repos_url":"https://api.github.com/users/ivan236634452/repos","events_url":"https://api.github.com/users/ivan236634452/events{/privacy}","received_events_url":"https://api.github.com/users/ivan236634452/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2841030353,"node_id":"MDExOkNsb3NlZEV2ZW50Mjg0MTAzMDM1Mw==","url":"https://api.github.com/repos/gabime/spdlog/issues/events/2841030353","actor":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"2d4e531ac96879594576b6eb5dce2d2ba7891a04","commit_url":"https://api.github.com/repos/gabime/spdlog/commits/2d4e531ac96879594576b6eb5dce2d2ba7891a04","created_at":"2019-11-29T10:38:13Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/559745908","html_url":"https://github.com/gabime/spdlog/issues/1327#issuecomment-559745908","issue_url":"https://api.github.com/repos/gabime/spdlog/issues/1327","id":559745908,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTc0NTkwOA==","user":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-29T10:39:23Z","updated_at":"2019-11-29T10:39:41Z","body":"@ivan236634452 Fixed. I agree it is more readable, so I changed according to your proposal. It is also few nanos faster!","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/comments/559745908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2841033665,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg0MTAzMzY2NQ==","url":"https://api.github.com/repos/gabime/spdlog/issues/events/2841033665","actor":{"login":"ivan236634452","id":32092042,"node_id":"MDQ6VXNlcjMyMDkyMDQy","avatar_url":"https://avatars.githubusercontent.com/u/32092042?v=4","gravatar_id":"","url":"https://api.github.com/users/ivan236634452","html_url":"https://github.com/ivan236634452","followers_url":"https://api.github.com/users/ivan236634452/followers","following_url":"https://api.github.com/users/ivan236634452/following{/other_user}","gists_url":"https://api.github.com/users/ivan236634452/gists{/gist_id}","starred_url":"https://api.github.com/users/ivan236634452/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivan236634452/subscriptions","organizations_url":"https://api.github.com/users/ivan236634452/orgs","repos_url":"https://api.github.com/users/ivan236634452/repos","events_url":"https://api.github.com/users/ivan236634452/events{/privacy}","received_events_url":"https://api.github.com/users/ivan236634452/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-11-29T10:39:24Z","performed_via_github_app":null},{"id":2841033677,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NDEwMzM2Nzc=","url":"https://api.github.com/repos/gabime/spdlog/issues/events/2841033677","actor":{"login":"ivan236634452","id":32092042,"node_id":"MDQ6VXNlcjMyMDkyMDQy","avatar_url":"https://avatars.githubusercontent.com/u/32092042?v=4","gravatar_id":"","url":"https://api.github.com/users/ivan236634452","html_url":"https://github.com/ivan236634452","followers_url":"https://api.github.com/users/ivan236634452/followers","following_url":"https://api.github.com/users/ivan236634452/following{/other_user}","gists_url":"https://api.github.com/users/ivan236634452/gists{/gist_id}","starred_url":"https://api.github.com/users/ivan236634452/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivan236634452/subscriptions","organizations_url":"https://api.github.com/users/ivan236634452/orgs","repos_url":"https://api.github.com/users/ivan236634452/repos","events_url":"https://api.github.com/users/ivan236634452/events{/privacy}","received_events_url":"https://api.github.com/users/ivan236634452/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-11-29T10:39:24Z","performed_via_github_app":null},{"id":8099439386,"node_id":"REFE_lADOAY1ReM4fgVdRzwAAAAHiw6Ma","url":"https://api.github.com/repos/gabime/spdlog/issues/events/8099439386","actor":{"login":"bachittle","id":39804642,"node_id":"MDQ6VXNlcjM5ODA0NjQy","avatar_url":"https://avatars.githubusercontent.com/u/39804642?v=4","gravatar_id":"","url":"https://api.github.com/users/bachittle","html_url":"https://github.com/bachittle","followers_url":"https://api.github.com/users/bachittle/followers","following_url":"https://api.github.com/users/bachittle/following{/other_user}","gists_url":"https://api.github.com/users/bachittle/gists{/gist_id}","starred_url":"https://api.github.com/users/bachittle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bachittle/subscriptions","organizations_url":"https://api.github.com/users/bachittle/orgs","repos_url":"https://api.github.com/users/bachittle/repos","events_url":"https://api.github.com/users/bachittle/events{/privacy}","received_events_url":"https://api.github.com/users/bachittle/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"defdfd2ca7b641beb4462aa0d55331938fada38c","commit_url":"https://api.github.com/repos/bachittle/spdlog/commits/defdfd2ca7b641beb4462aa0d55331938fada38c","created_at":"2022-12-22T21:57:54Z","performed_via_github_app":null}]