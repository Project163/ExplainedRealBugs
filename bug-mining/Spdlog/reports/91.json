{"url":"https://api.github.com/repos/gabime/spdlog/issues/1967","repository_url":"https://api.github.com/repos/gabime/spdlog","labels_url":"https://api.github.com/repos/gabime/spdlog/issues/1967/labels{/name}","comments_url":"https://api.github.com/repos/gabime/spdlog/issues/1967/comments","events_url":"https://api.github.com/repos/gabime/spdlog/issues/1967/events","html_url":"https://github.com/gabime/spdlog/issues/1967","id":913826469,"node_id":"MDU6SXNzdWU5MTM4MjY0Njk=","number":1967,"title":"FAILED: REQUIRE( test_sink->lines().size() == 1 ) with expansion:   0 == 1","user":{"login":"wizeman","id":168610,"node_id":"MDQ6VXNlcjE2ODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/168610?v=4","gravatar_id":"","url":"https://api.github.com/users/wizeman","html_url":"https://github.com/wizeman","followers_url":"https://api.github.com/users/wizeman/followers","following_url":"https://api.github.com/users/wizeman/following{/other_user}","gists_url":"https://api.github.com/users/wizeman/gists{/gist_id}","starred_url":"https://api.github.com/users/wizeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wizeman/subscriptions","organizations_url":"https://api.github.com/users/wizeman/orgs","repos_url":"https://api.github.com/users/wizeman/repos","events_url":"https://api.github.com/users/wizeman/events{/privacy}","received_events_url":"https://api.github.com/users/wizeman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-06-07T18:21:15Z","updated_at":"2021-06-07T19:39:47Z","closed_at":"2021-06-07T19:39:47Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I just ran into a test failure while building spdlog 1.8.5, see the build log below:\r\n\r\n<details>\r\n  <summary>Full build log</summary>\r\n\r\n```\r\nunpacking sources\r\nunpacking source archive /nix/store/3sxlcc79yj9ma3wfcsiik3lzcs25w8l3-source\r\nsource root is source\r\npatching sources\r\nconfiguring\r\nfixing cmake files...\r\ncmake flags: -DCMAKE_FIND_USE_SYSTEM_PACKAGE_REGISTRY=OFF -DCMAKE_FIND_USE_PACKAGE_REGISTRY=OFF -DCMAKE_EXPORT_NO_PACKAGE_REGISTRY=ON -DCMAKE_BUILD_TYPE=Release -DCMAKE_SKIP_BUILD_RPATH=ON -DCMAKE_INSTALL_LOCALEDIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/share/locale -DCMAKE_INSTALL_LIBEXECDIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/libexec -DCMAKE_INSTALL_LIBDIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/lib -DCMAKE_INSTALL_DOCDIR=/nix/store/w8c5gkbc1803w84fwl5sr43ri09r9lfk-spdlog-1.8.5-doc/share/doc/spdlog -DCMAKE_INSTALL_INFODIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/share/info -DCMAKE_INSTALL_MANDIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/share/man -DCMAKE_INSTALL_OLDINCLUDEDIR=/nix/store/fkym4sickd141hg2fzah3q7g6cy7qkbi-spdlog-1.8.5-dev/include -DCMAKE_INSTALL_INCLUDEDIR=/nix/store/fkym4sickd141hg2fzah3q7g6cy7qkbi-spdlog-1.8.5-dev/include -DCMAKE_INSTALL_SBINDIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/sbin -DCMAKE_INSTALL_BINDIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/bin -DCMAKE_INSTALL_NAME_DIR=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5/lib -DCMAKE_POLICY_DEFAULT_CMP0025=NEW -DCMAKE_OSX_SYSROOT= -DCMAKE_FIND_FRAMEWORK=LAST -DCMAKE_STRIP=/nix/store/d7a9467p292milsg412pq8v7d9gj1nqp-binutils-2.35.1/bin/strip -DCMAKE_RANLIB=/nix/store/d7a9467p292milsg412pq8v7d9gj1nqp-binutils-2.35.1/bin/ranlib -DCMAKE_AR=/nix/store/d7a9467p292milsg412pq8v7d9gj1nqp-binutils-2.35.1/bin/ar -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++ -DCMAKE_INSTALL_PREFIX=/nix/store/clc4q76r1qv3xdg0g73gbarxjr3kw46y-spdlog-1.8.5 -DSPDLOG_BUILD_SHARED=ON -DSPDLOG_BUILD_STATIC=OFF -DSPDLOG_BUILD_EXAMPLE=OFF -DSPDLOG_BUILD_BENCH=OFF -DSPDLOG_BUILD_TESTS=ON -DSPDLOG_FMT_EXTERNAL=ON\r\n-- The CXX compiler identification is GNU 10.3.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /nix/store/dn6gyjy18rpm8zcwamgc9yyd96mf7w9i-gcc-wrapper-10.3.0/bin/g++ - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Build spdlog: 1.8.5\r\n-- Looking for C++ include pthread.h\r\n-- Looking for C++ include pthread.h - found\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Failed\r\n-- Looking for pthread_create in pthreads\r\n-- Looking for pthread_create in pthreads - not found\r\n-- Looking for pthread_create in pthread\r\n-- Looking for pthread_create in pthread - found\r\n-- Found Threads: TRUE\r\n-- Build type: Release\r\n-- Generating tests\r\n-- Could NOT find PkgConfig (missing: PKG_CONFIG_EXECUTABLE)\r\n-- Generating install\r\n-- Configuring done\r\n-- Generating done\r\nCMake Warning:\r\n  Manually-specified variables were not used by the project:\r\n\r\n    CMAKE_C_COMPILER\r\n    CMAKE_EXPORT_NO_PACKAGE_REGISTRY\r\n    CMAKE_POLICY_DEFAULT_CMP0025\r\n    SPDLOG_BUILD_STATIC\r\n\r\n\r\n-- Build files have been written to: /build/source/build\r\ncmake: enabled parallel building\r\nbuilding\r\nbuild flags: -j64 -l64 SHELL=/nix/store/bi1r6xqw4cyai6b0a2da3s1km2ixj814-bash-4.4-p23/bin/bash\r\nScanning dependencies of target spdlog\r\n[  3%] Building CXX object CMakeFiles/spdlog.dir/src/spdlog.cpp.o\r\n[  6%] Building CXX object CMakeFiles/spdlog.dir/src/cfg.cpp.o\r\n[ 10%] Building CXX object CMakeFiles/spdlog.dir/src/async.cpp.o\r\n[ 13%] Building CXX object CMakeFiles/spdlog.dir/src/file_sinks.cpp.o\r\n[ 17%] Building CXX object CMakeFiles/spdlog.dir/src/color_sinks.cpp.o\r\n[ 20%] Building CXX object CMakeFiles/spdlog.dir/src/stdout_sinks.cpp.o\r\n[ 24%] Linking CXX shared library libspdlog.so\r\n[ 24%] Built target spdlog\r\nScanning dependencies of target spdlog-utests\r\n[ 27%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_file_helper.cpp.o\r\n[ 31%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_file_logging.cpp.o\r\n[ 34%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_eventlog.cpp.o\r\n[ 41%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_daily_logger.cpp.o\r\n[ 41%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_pattern_formatter.cpp.o\r\n[ 44%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_misc.cpp.o\r\n[ 48%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_registry.cpp.o\r\n[ 51%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_async.cpp.o\r\n[ 58%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_macros.cpp.o\r\n[ 58%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_mpmc_q.cpp.o\r\n[ 62%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_fmt_helper.cpp.o\r\n[ 68%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_dup_filter.cpp.o\r\n[ 68%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/main.cpp.o\r\n[ 72%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/utils.cpp.o\r\n[ 75%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_errors.cpp.o\r\n[ 79%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_stopwatch.cpp.o\r\n[ 82%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_time_point.cpp.o\r\n[ 86%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_cfg.cpp.o\r\n[ 89%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_backtrace.cpp.o\r\n[ 93%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_stdout_api.cpp.o\r\n[ 96%] Building CXX object tests/CMakeFiles/spdlog-utests.dir/test_create_dir.cpp.o\r\n[100%] Linking CXX executable spdlog-utests\r\n[100%] Built target spdlog-utests\r\nrunning tests\r\ncheck flags: SHELL=/nix/store/bi1r6xqw4cyai6b0a2da3s1km2ixj814-bash-4.4-p23/bin/bash VERBOSE=y test\r\nRunning tests...\r\n/nix/store/hqv17pbklqn4adhv0vj75i499vsda3py-cmake-3.19.7/bin/ctest --force-new-ctest-process\r\nTest project /build/source/build\r\n    Start 1: spdlog-utests\r\n1/1 Test #1: spdlog-utests ....................***Failed    5.19 sec\r\n[2021-06-07 17:32:21.059] [test] [trace] Test stdout_st\r\n[2021-06-07 17:32:21.059] [test] [debug] Test stdout_mt\r\n[2021-06-07 17:32:21.059] [test] [info] Test stderr_st\r\n[2021-06-07 17:32:21.059] [test] [info] Test stderr_mt\r\n[2021-06-07 17:32:21.059] [test] [warning] Test stderr_mt\r\n[2021-06-07 17:32:21.059] [test] [error] Test stderr_mt\r\n[2021-06-07 17:32:21.059] [test] [critical] Test stderr_mt\r\n[2021-06-07 17:32:21.059] [test] [info] Test stdout_color_st\r\n[2021-06-07 17:32:21.059] [test] [trace] Test stdout_color_mt\r\n[2021-06-07 17:32:21.059] [test] [debug] Test stderr_color_st\r\n[2021-06-07 17:32:21.059] [test] [info] Test stderr_color_mt\r\n[2021-06-07 17:32:21.059] [test] [warning] Test stderr_color_mt\r\n[2021-06-07 17:32:21.059] [test] [error] Test stderr_color_mt\r\n[2021-06-07 17:32:21.059] [test] [critical] Test stderr_color_mt\r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nspdlog-utests is a Catch v2.8.0 host application.\r\nRun with -? for options\r\n\r\n-------------------------------------------------------------------------------\r\nbactrace-async\r\n-------------------------------------------------------------------------------\r\n/build/source/tests/test_backtrace.cpp:34\r\n...............................................................................\r\n\r\n/build/source/tests/test_backtrace.cpp:52: FAILED:\r\n  REQUIRE( test_sink->lines().size() == 1 )\r\nwith expansion:\r\n  0 == 1\r\n\r\n[*** LOG ERROR #0001 ***] [2021-06-07 17:32:21] [test-error] {argument not found}\r\n===============================================================================\r\ntest cases: 144 | 143 passed | 1 failed\r\nassertions: 484 | 483 passed | 1 failed\r\n\r\n\r\n\r\n0% tests passed, 1 tests failed out of 1\r\n\r\nTotal Test time (real) =   5.19 sec\r\n\r\nThe following tests FAILED:\r\n          1 - spdlog-utests (Failed)\r\nErrors while running CTest\r\nmake: *** [Makefile:116: test] Error 8\r\nbuilder for '/nix/store/g91z2sd7zmixqjy891n5z6q2kczhgzdi-spdlog-1.8.5.drv' failed with exit code 2\r\n```\r\n</details>","closed_by":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/1967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/gabime/spdlog/issues/1967/timeline","performed_via_github_app":null,"state_reason":"completed"}