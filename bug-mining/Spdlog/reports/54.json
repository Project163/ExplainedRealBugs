{"url":"https://api.github.com/repos/gabime/spdlog/issues/1335","repository_url":"https://api.github.com/repos/gabime/spdlog","labels_url":"https://api.github.com/repos/gabime/spdlog/issues/1335/labels{/name}","comments_url":"https://api.github.com/repos/gabime/spdlog/issues/1335/comments","events_url":"https://api.github.com/repos/gabime/spdlog/issues/1335/events","html_url":"https://github.com/gabime/spdlog/issues/1335","id":530083242,"node_id":"MDU6SXNzdWU1MzAwODMyNDI=","number":1335,"title":"os-inl.h compile error on OpenBSD","user":{"login":"weanti","id":14397158,"node_id":"MDQ6VXNlcjE0Mzk3MTU4","avatar_url":"https://avatars.githubusercontent.com/u/14397158?v=4","gravatar_id":"","url":"https://api.github.com/users/weanti","html_url":"https://github.com/weanti","followers_url":"https://api.github.com/users/weanti/followers","following_url":"https://api.github.com/users/weanti/following{/other_user}","gists_url":"https://api.github.com/users/weanti/gists{/gist_id}","starred_url":"https://api.github.com/users/weanti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weanti/subscriptions","organizations_url":"https://api.github.com/users/weanti/orgs","repos_url":"https://api.github.com/users/weanti/repos","events_url":"https://api.github.com/users/weanti/events{/privacy}","received_events_url":"https://api.github.com/users/weanti/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-11-28T21:46:29Z","updated_at":"2019-12-01T20:30:36Z","closed_at":"2019-11-29T10:48:27Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The following errormessage is displayed when os-inl.h is compiled:\r\nIn file included from /home/weanti/programming/spdlog/include/spdlog/spdlog.h:13:\r\nIn file included from /home/weanti/programming/spdlog/include/spdlog/details/registry.h:108:\r\nIn file included from /home/weanti/programming/spdlog/include/spdlog/details/registry-inl.h:12:\r\nIn file included from /home/weanti/programming/spdlog/include/spdlog/logger.h:18:\r\nIn file included from /home/weanti/programming/spdlog/include/spdlog/details/log_msg.h:34:\r\nIn file included from /home/weanti/programming/spdlog/include/spdlog/details/log_msg-inl.h:10:\r\nIn file included from /home/weanti/programming/spdlog/include/spdlog/details/os.h:110:\r\n/home/weanti/programming/spdlog/include/spdlog/details/os-inl.h:233:16: error: expected unqualified-id\r\n    int fd = ::fileno(f);\r\n               ^\r\n/usr/include/stdio.h:406:19: note: expanded from macro 'fileno'\r\n#define fileno(p)       (!__isthreaded ? __sfileno(p) : (fileno)(p))\r\n\r\nAs it is visible the reason of the error is that 'fileno' is a macro on OpenBSD 6.6+Clang 8.0.1 combination which does not work with '::'. The following extension makes compiling work:\r\n`#if defined(__clang__)`\r\n`    int fd = fileno(f);`\r\n`#else`\r\n`    int fd = ::fileno(f);`\r\n`#endif`","closed_by":{"login":"gabime","id":6052198,"node_id":"MDQ6VXNlcjYwNTIxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6052198?v=4","gravatar_id":"","url":"https://api.github.com/users/gabime","html_url":"https://github.com/gabime","followers_url":"https://api.github.com/users/gabime/followers","following_url":"https://api.github.com/users/gabime/following{/other_user}","gists_url":"https://api.github.com/users/gabime/gists{/gist_id}","starred_url":"https://api.github.com/users/gabime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gabime/subscriptions","organizations_url":"https://api.github.com/users/gabime/orgs","repos_url":"https://api.github.com/users/gabime/repos","events_url":"https://api.github.com/users/gabime/events{/privacy}","received_events_url":"https://api.github.com/users/gabime/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/gabime/spdlog/issues/1335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/gabime/spdlog/issues/1335/timeline","performed_via_github_app":null,"state_reason":"completed"}