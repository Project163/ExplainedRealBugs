[{"url":"https://api.github.com/repos/assertj/assertj-generator/issues/comments/53951528","html_url":"https://github.com/assertj/assertj-generator/issues/26#issuecomment-53951528","issue_url":"https://api.github.com/repos/assertj/assertj-generator/issues/26","id":53951528,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTUxNTI4","user":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-08-30T07:36:26Z","updated_at":"2014-08-30T07:39:19Z","body":"The problem comes from `IterableAssert#contains` method that takes a generic varargs `T` : \n\n``` java\npublic S contains(T... values)\n```\n\nIn the generated code, `actual.getAttributes()` is a collection of a subtype of `Attribute` - let's say `PhysicalAttribute` to make things concrete - using `Attribute` objects in `contains` call is wrong because they may not be `PhysicalAttribute` (e.g. `MentalAttribute`).\nSince there is no way of knowing which subtype of `Attribute` we are dealing with, the compiler raises an error.\n\nIf the `IterableAssert#contains` used `Object` instead of a generic type, there won't be a compiler error, this solution means a change in assertj-core and a less user friendly experience, 99% of the time users would expect `IterableAssert#contains` to require the same type of objects as those in the actual collection, e.g.\n\n``` java\nIterable<Ring> elvesRings = newArrayList(vilya, nenya, narya);\nassertThat(elvesRings).contains(nenya); // contains expect Ring object\n```\n\nSince changing assertj-core API is not acted, we need to change the generated code and use AssertJ non internal non generic code, not ideal because it relies on non API code but good enough to fix this issue.\n\n``` java\nIterables.instance().assertContains(info, actual.getAttributes(), attributes);\n```\n\nA dismissed option would have been to convert the collection to an array of `Attribute` but it only works with collection and not iterable:\n\n``` java\nassertThat(actual.getAttributes().toArray(new Attribute[0])).contains(attributes);\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/assertj/assertj-generator/issues/comments/53951528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":159270550,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTU5MjcwNTUw","url":"https://api.github.com/repos/assertj/assertj-generator/issues/events/159270550","actor":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2014-08-30T11:11:57Z","rename":{"from":"Compile error for generated contains assertion with generic bound","to":"Bad generated code in contains assertion for iterable property with ? extends wildcard"},"performed_via_github_app":null},{"id":159271435,"node_id":"MDExOkNsb3NlZEV2ZW50MTU5MjcxNDM1","url":"https://api.github.com/repos/assertj/assertj-generator/issues/events/159271435","actor":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f9f897ce2027e7a97ea2614862d34996b9638cd6","commit_url":"https://api.github.com/repos/assertj/assertj-generator/commits/f9f897ce2027e7a97ea2614862d34996b9638cd6","created_at":"2014-08-30T11:25:07Z","state_reason":null,"performed_via_github_app":null}]