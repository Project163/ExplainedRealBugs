diff --git a/pom.xml b/pom.xml
index 2a98052..855afb6 100644
--- a/pom.xml
+++ b/pom.xml
@@ -29,6 +29,13 @@
       <artifactId>commons-lang3</artifactId>
       <version>3.1</version>
     </dependency>
+        <dependency>
+      <groupId>com.google.guava</groupId>
+      <artifactId>guava</artifactId>
+      <version>13.0.1</version>
+      <scope>test</scope>
+    </dependency>
+    
     <dependency>
       <groupId>ch.qos.logback</groupId>
       <artifactId>logback-classic</artifactId>
@@ -37,7 +44,7 @@
     <dependency>
       <groupId>org.easytesting</groupId>
       <artifactId>fest-assert-core</artifactId>
-      <version>2.0M8</version>
+      <version>2.0M9</version>
       <scope>test</scope>
     </dependency>
     <dependency>
diff --git a/src/main/java/org/fest/assertions/generator/util/ClassUtil.java b/src/main/java/org/fest/assertions/generator/util/ClassUtil.java
index 75f9b21..27c39b5 100644
--- a/src/main/java/org/fest/assertions/generator/util/ClassUtil.java
+++ b/src/main/java/org/fest/assertions/generator/util/ClassUtil.java
@@ -1,6 +1,7 @@
 package org.fest.assertions.generator.util;
 
 import static java.lang.Character.isUpperCase;
+import static java.lang.reflect.Modifier.isPublic;
 import static org.apache.commons.lang3.StringUtils.substringAfter;
 import static org.apache.commons.lang3.StringUtils.uncapitalize;
 
@@ -18,6 +19,9 @@ import java.util.HashSet;
 import java.util.List;
 import java.util.Set;
 
+import org.apache.commons.lang3.ClassUtils;
+import org.apache.commons.lang3.StringUtils;
+
 /**
  * 
  * Some utilities methods related to classes and packages.
@@ -27,6 +31,7 @@ import java.util.Set;
  */
 public class ClassUtil {
 
+  private static final String CLASS_SUFFIX = ".class";
   public static final String IS_PREFIX = "is";
   public static final String GET_PREFIX = "get";
 
@@ -39,7 +44,10 @@ public class ClassUtil {
   }
 
   /**
-   * Collects all the classes from given classes names or classes belonging to given a package name (recursively).
+   * Collects all the <b>public</b> classes from given classes names or classes belonging to given a package name
+   * (recursively).
+   * <p>
+   * Note that <b>anonymous</b> and <b>local</b> classes are excluded from the resulting list.
    * 
    * @param classLoader {@link ClassLoader} used to load classes defines in classOrPackageNames
    * @param classOrPackageNames classes names or packages names we want to collect classes from (recursively for
@@ -92,27 +100,42 @@ public class ClassUtil {
     }
   }
 
+  /**
+   * Get <b>public</b> classes in given directory (recursively).
+   * <p>
+   * Note that <b>anonymous</b> and <b>local</b> classes are excluded from the resulting list.
+   * 
+   * @param directory directory where to look for classes
+   * @param packageName package name corresponding to directory
+   * @param classLoader used classloader
+   * @return
+   * @throws UnsupportedEncodingException
+   */
   private static List<Class<?>> getClassesInDirectory(File directory, String packageName, ClassLoader classLoader)
       throws UnsupportedEncodingException {
     List<Class<?>> classes = new ArrayList<Class<?>>();
     // Capture all the .class files in this directory
     // Get the list of the files contained in the package
-    String[] files = directory.list();
-    for (String currentFile : files) {
-      // we are only interested in .class files
-      if (currentFile.endsWith(".class")) {
-        // removes the .class extension
+    File[] files = directory.listFiles();
+    for (File currentFile : files) {
+      String currentFileName = currentFile.getName();
+      if (isClass(currentFileName)) {
         // CHECKSTYLE:OFF
         try {
-          String className = packageName + '.' + currentFile.substring(0, currentFile.length() - 6);
-          classes.add(loadClass(className, classLoader));
+          // removes the .class extension
+          String className = packageName + '.' + StringUtils.remove(currentFileName, CLASS_SUFFIX);
+          Class<?> loadedClass = loadClass(className, classLoader);
+          // we are only interested in public classes that are neither anonymous nor local
+          if (isPublic(loadedClass.getModifiers()) && !loadedClass.isAnonymousClass() && !loadedClass.isLocalClass()) {
+            classes.add(loadedClass);
+          }
         } catch (Throwable e) {
           // do nothing. this class hasn't been found by the loader, and we don't care.
         }
         // CHECKSTYLE:ON
-      } else {
+      } else if (currentFile.isDirectory()) {
         // It's another package
-        String subPackageName = packageName + '.' + currentFile;
+        String subPackageName = packageName + ClassUtils.PACKAGE_SEPARATOR + currentFileName;
         // Ask for all resources for the path
         URL resource = classLoader.getResource(subPackageName.replace('.', File.separatorChar));
         File subDirectory = new File(URLDecoder.decode(resource.getPath(), "UTF-8"));
@@ -123,6 +146,10 @@ public class ClassUtil {
     return classes;
   }
 
+  private static boolean isClass(String fileName) {
+    return fileName.endsWith(CLASS_SUFFIX);
+  }
+
   private static Class<?> tryToLoadClass(String className, ClassLoader classLoader) {
     try {
       return loadClass(className, classLoader);
diff --git a/src/test/java/org/fest/assertions/generator/AssertionGeneratorTest.java b/src/test/java/org/fest/assertions/generator/AssertionGeneratorTest.java
index a83366f..1df559d 100644
--- a/src/test/java/org/fest/assertions/generator/AssertionGeneratorTest.java
+++ b/src/test/java/org/fest/assertions/generator/AssertionGeneratorTest.java
@@ -8,6 +8,7 @@ import static org.fest.assertions.generator.util.ClassUtil.collectClasses;
 import java.io.File;
 import java.io.FileNotFoundException;
 import java.io.IOException;
+import java.lang.reflect.Modifier;
 import java.util.List;
 
 import org.junit.Before;
@@ -38,11 +39,14 @@ public class AssertionGeneratorTest {
     assertThat(fileGeneratedFor(Player.class)).hasContentEqualTo(
         new File("src/test/resources/PlayerAssert.expected.txt"));
   }
-
+  
   @Test
   public void should_generate_assertion_for_classes_in_package() throws Exception {
     List<Class<?>> classes = collectClasses("org.fest.assertions.generator.data");
     for (Class<?> clazz : classes) {
+      assertThat(clazz.isAnonymousClass()).as("check that " + clazz.getSimpleName() +" is not anonymous").isFalse();
+      assertThat(clazz.isLocalClass()).as("check that " + clazz.getSimpleName() +" is not local").isFalse();
+      assertThat(Modifier.isPublic(clazz.getModifiers())).as("check that " + clazz.getSimpleName() +" is public").isTrue();
       logger.info("Generating assertions for {}", clazz.getName());
       File customAssertionFile = customAssertionGenerator.generateCustomAssertionFor(converter
           .convertToClassDescription(clazz));
@@ -55,6 +59,9 @@ public class AssertionGeneratorTest {
     ClassLoader customClassLoader = new MyClassLoader(Thread.currentThread().getContextClassLoader());
     List<Class<?>> classes = collectClasses(customClassLoader, "org.fest.assertions.generator.data");
     for (Class<?> clazz : classes) {
+      assertThat(clazz.isAnonymousClass()).as("check that " + clazz.getSimpleName() +" is not anonymous").isFalse();
+      assertThat(clazz.isLocalClass()).as("check that " + clazz.getSimpleName() +" is not local").isFalse();
+      assertThat(Modifier.isPublic(clazz.getModifiers())).as("check that " + clazz.getSimpleName() +" is public").isTrue();
       logger.info("Generating assertions for {}", clazz.getName());
       File customAssertionFile = customAssertionGenerator.generateCustomAssertionFor(converter
           .convertToClassDescription(clazz));
@@ -74,7 +81,7 @@ public class AssertionGeneratorTest {
 
   }
 
-  private static File fileGeneratedFor(Class<Player> clazz) {
+  private static File fileGeneratedFor(Class<?> clazz) {
     String dirName = TARGET_DIRECTORY + File.separatorChar
         + clazz.getPackage().getName().replace('.', File.separatorChar);
     String generatedFileName = clazz.getSimpleName() + ASSERT_CLASS_SUFFIX;
diff --git a/src/test/java/org/fest/assertions/generator/data/Movie.java b/src/test/java/org/fest/assertions/generator/data/Movie.java
index e4c99d5..4bb3122 100644
--- a/src/test/java/org/fest/assertions/generator/data/Movie.java
+++ b/src/test/java/org/fest/assertions/generator/data/Movie.java
@@ -5,6 +5,7 @@ import java.util.Date;
 public class Movie extends ArtWork {
 
   private final Date releaseDate;
+  private PublicCategory publicCategory;
 
   public Movie(String title, Date releaseDate) {
     super(title);
@@ -14,6 +15,10 @@ public class Movie extends ArtWork {
   public Date getReleaseDate() {
     return releaseDate;
   }
+  
+  public PublicCategory getPublicCategory() {
+    return publicCategory;
+  }
 
   @Override
   public int hashCode() {
@@ -25,15 +30,46 @@ public class Movie extends ArtWork {
 
   @Override
   public boolean equals(Object obj) {
-    if (this == obj) return true;
-    if (!super.equals(obj)) return false;
-    if (getClass() != obj.getClass()) return false;
+    if (this == obj)
+      return true;
+    if (!super.equals(obj))
+      return false;
+    if (getClass() != obj.getClass())
+      return false;
     Movie other = (Movie) obj;
     if (releaseDate == null) {
-      if (other.releaseDate != null) return false;
-    } else if (!releaseDate.equals(other.releaseDate)) return false;
+      if (other.releaseDate != null)
+        return false;
+    } else if (!releaseDate.equals(other.releaseDate))
+      return false;
     return true;
   }
 
-  
+  public static class PublicCategory {
+    private String name;
+
+    public PublicCategory(String name) {
+      super();
+      this.name = name;
+    }
+
+    public String getName() {
+      return name;
+    }
+
+  }
+
+  static class InternalCategory {
+    private String name;
+
+    public InternalCategory(String name) {
+      super();
+      this.name = name;
+    }
+
+    public String getName() {
+      return name;
+    }
+
+  }
 }
diff --git a/src/test/java/org/fest/assertions/generator/data/TreeEnum.java b/src/test/java/org/fest/assertions/generator/data/TreeEnum.java
new file mode 100644
index 0000000..2f38f6e
--- /dev/null
+++ b/src/test/java/org/fest/assertions/generator/data/TreeEnum.java
@@ -0,0 +1,32 @@
+package org.fest.assertions.generator.data;
+
+import java.util.Collection;
+
+import com.google.common.base.Predicate;
+import com.google.common.collect.Collections2;
+import com.google.common.collect.Lists;
+
+public enum TreeEnum {
+
+  PARENT, CHILD1(PARENT), CHILD2(PARENT);
+
+  TreeEnum parent;
+
+  private TreeEnum() {
+    // nothing
+  }
+
+  private TreeEnum(TreeEnum parent) {
+    this.parent = parent;
+  }
+
+  public Collection<TreeEnum> getChildren() {
+    return Collections2.filter(Lists.newArrayList(values()), new Predicate<TreeEnum>() {
+      @Override
+      public boolean apply(TreeEnum input) {
+        return this.equals(input.parent);
+      }
+    });
+  }
+
+}
\ No newline at end of file
diff --git a/src/test/java/org/fest/assertions/generator/util/ClassUtilTest.java b/src/test/java/org/fest/assertions/generator/util/ClassUtilTest.java
index 108a45a..bb083cc 100644
--- a/src/test/java/org/fest/assertions/generator/util/ClassUtilTest.java
+++ b/src/test/java/org/fest/assertions/generator/util/ClassUtilTest.java
@@ -19,8 +19,11 @@ import org.fest.assertions.generator.data.ArtWork;
 import org.fest.assertions.generator.data.Movie;
 import org.fest.assertions.generator.data.Name;
 import org.fest.assertions.generator.data.Player;
+import org.fest.assertions.generator.data.TreeEnum;
+import org.fest.assertions.generator.data.lotr.FellowshipOfTheRing;
 import org.fest.assertions.generator.data.lotr.Race;
 import org.fest.assertions.generator.data.lotr.Ring;
+import org.fest.assertions.generator.data.lotr.TolkienCharacter;
 
 public class ClassUtilTest {
 
@@ -31,7 +34,9 @@ public class ClassUtilTest {
   @Test
   public void should_get_classes_in_package_and_subpackages() throws ClassNotFoundException {
     List<Class<?>> classesInPackage = collectClasses("org.fest.assertions.generator.data");
-    assertThat(classesInPackage).contains(Player.class, ArtWork.class, Name.class, Movie.class, Ring.class, Race.class);
+    assertThat(classesInPackage).containsOnly(Player.class, ArtWork.class, Name.class, Movie.class,
+        Movie.PublicCategory.class, Ring.class, Race.class, FellowshipOfTheRing.class, TolkienCharacter.class,
+        TreeEnum.class);
   }
 
   @Test
@@ -99,7 +104,7 @@ public class ClassUtilTest {
   @Test
   public void should_also_return_inherited_getters_methods() throws Exception {
     List<Method> playerGetterMethods = getterMethodsOf(Movie.class);
-    assertThat(playerGetterMethods).containsOnly(Movie.class.getMethod("getReleaseDate", NO_PARAMS),
+    assertThat(playerGetterMethods).contains(Movie.class.getMethod("getReleaseDate", NO_PARAMS),
         ArtWork.class.getMethod("getTitle", NO_PARAMS));
   }
 
