{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/issues/51","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/issues/51/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/issues/51/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/issues/51/events","html_url":"https://github.com/FasterXML/jackson-dataformats-text/issues/51","id":271208168,"node_id":"MDU6SXNzdWUyNzEyMDgxNjg=","number":51,"title":"Set of custom objects with `IGNORE_UNKNOWN` brokes silently csv","user":{"login":"pimuzzo","id":1621205,"node_id":"MDQ6VXNlcjE2MjEyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/1621205?v=4","gravatar_id":"","url":"https://api.github.com/users/pimuzzo","html_url":"https://github.com/pimuzzo","followers_url":"https://api.github.com/users/pimuzzo/followers","following_url":"https://api.github.com/users/pimuzzo/following{/other_user}","gists_url":"https://api.github.com/users/pimuzzo/gists{/gist_id}","starred_url":"https://api.github.com/users/pimuzzo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pimuzzo/subscriptions","organizations_url":"https://api.github.com/users/pimuzzo/orgs","repos_url":"https://api.github.com/users/pimuzzo/repos","events_url":"https://api.github.com/users/pimuzzo/events{/privacy}","received_events_url":"https://api.github.com/users/pimuzzo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":564404604,"node_id":"MDU6TGFiZWw1NjQ0MDQ2MDQ=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/labels/csv","name":"csv","color":"06C6F2","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/milestones/2","html_url":"https://github.com/FasterXML/jackson-dataformats-text/milestone/2","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/milestones/2/labels","id":2895297,"node_id":"MDk6TWlsZXN0b25lMjg5NTI5Nw==","number":2,"title":"2.9.3","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":5,"state":"open","created_at":"2017-11-07T20:37:30Z","updated_at":"2017-12-11T14:35:35Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2017-11-04T17:15:22Z","updated_at":"2017-11-07T20:43:05Z","closed_at":"2017-11-07T20:43:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When I use a Set (but I think a Collection) of objects with feature `JsonGenerator.Feature.IGNORE_UNKNOWN` extra line separators are added.\r\nI paste the code to reproduce it:\r\n\r\n```\r\n    protected static class Person\r\n    {\r\n        private String name;\r\n        private String surname;\r\n\r\n        public Person()\r\n        {\r\n        }\r\n\r\n        public Person( String name, String surname )\r\n        {\r\n            this.name = name;\r\n            this.surname = surname;\r\n        }\r\n\r\n        public String getName()\r\n        {\r\n            return name;\r\n        }\r\n\r\n        public void setName( String name )\r\n        {\r\n            this.name = name;\r\n        }\r\n\r\n        public String getSurname()\r\n        {\r\n            return surname;\r\n        }\r\n\r\n        public void setSurname( String surname )\r\n        {\r\n            this.surname = surname;\r\n        }\r\n    }\r\n\r\n    protected static class MyClass\r\n    {\r\n        private Set<Person> people;\r\n        private String address;\r\n        private String phoneNumber;\r\n\r\n        public MyClass()\r\n        {\r\n        }\r\n\r\n        public Set<Person> getPeople()\r\n        {\r\n            return people;\r\n        }\r\n\r\n        public void setPeople( Set<Person> people )\r\n        {\r\n            this.people = people;\r\n        }\r\n\r\n        public String getAddress()\r\n        {\r\n            return address;\r\n        }\r\n\r\n        public void setAddress( String address )\r\n        {\r\n            this.address = address;\r\n        }\r\n\r\n        public String getPhoneNumber()\r\n        {\r\n            return phoneNumber;\r\n        }\r\n\r\n        public void setPhoneNumber( String phoneNumber )\r\n        {\r\n            this.phoneNumber = phoneNumber;\r\n        }\r\n    }\r\n\r\n    public void testEmbeddedObjects() throws Exception\r\n    {\r\n        CsvMapper mapper = mapperForCsv();\r\n        mapper.configure( JsonGenerator.Feature.IGNORE_UNKNOWN, true );\r\n        CsvSchema schema = CsvSchema.builder()\r\n                .addColumn( \"people\" ) // here I'm skipping phoneNumber so I need to use IGNORE_UNKNOWN feature\r\n                .addColumn( \"address\" )\r\n                .build()\r\n                .withHeader();\r\n\r\n        Person firstPerson = new Person( \"Barbie\", \"Benton\" );\r\n        Person secondPerson = new Person( \"Veltto\", \"Virtanen\" );\r\n        Set<Person> people = new HashSet<>();\r\n        people.add( firstPerson );\r\n        people.add( secondPerson );\r\n        MyClass myClass = new MyClass();\r\n        myClass.setPeople( people );\r\n        myClass.setAddress( \"AAA\" );\r\n        myClass.setPhoneNumber( \"123\" );\r\n\r\n        String result = mapper.writer( schema ).writeValueAsString( myClass );\r\n        int numberOfLines = result.split( \"\\n\" ).length;\r\n        assertEquals( 2, numberOfLines ); // header and data (here fails with 3)\r\n    }\r\n```\r\n\r\nVersion is 2.9.0\r\nA workaround would be to write a custom serializer, but with a class with a lot of fields it was very hard to find which field has broken silently the csv.\r\nIs there any way to use the toString rappresentation for cases like this one?\r\nIf you prefer I can open a PR with that code instead of paste it here.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/issues/51/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-text/issues/51/timeline","performed_via_github_app":null,"state_reason":"completed"}