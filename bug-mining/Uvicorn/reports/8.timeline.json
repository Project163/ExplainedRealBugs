[{"actor":{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T20:20:24Z","updated_at":"2018-11-14T20:20:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/4009","repository_url":"https://api.github.com/repos/OpenSlides/OpenSlides","labels_url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/4009/labels{/name}","comments_url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/4009/comments","events_url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/4009/events","html_url":"https://github.com/OpenSlides/OpenSlides/issues/4009","id":380159442,"node_id":"MDU6SXNzdWUzODAxNTk0NDI=","number":4009,"title":"Running OpenSlides via gunicorn doens't work and produces 500","user":{"login":"jsaalfeld","id":6213120,"node_id":"MDQ6VXNlcjYyMTMxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/6213120?v=4","gravatar_id":"","url":"https://api.github.com/users/jsaalfeld","html_url":"https://github.com/jsaalfeld","followers_url":"https://api.github.com/users/jsaalfeld/followers","following_url":"https://api.github.com/users/jsaalfeld/following{/other_user}","gists_url":"https://api.github.com/users/jsaalfeld/gists{/gist_id}","starred_url":"https://api.github.com/users/jsaalfeld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsaalfeld/subscriptions","organizations_url":"https://api.github.com/users/jsaalfeld/orgs","repos_url":"https://api.github.com/users/jsaalfeld/repos","events_url":"https://api.github.com/users/jsaalfeld/events{/privacy}","received_events_url":"https://api.github.com/users/jsaalfeld/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":10594563,"node_id":"MDU6TGFiZWwxMDU5NDU2Mw==","url":"https://api.github.com/repos/OpenSlides/OpenSlides/labels/bug","name":"bug","color":"b60205","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/OpenSlides/OpenSlides/milestones/30","html_url":"https://github.com/OpenSlides/OpenSlides/milestone/30","labels_url":"https://api.github.com/repos/OpenSlides/OpenSlides/milestones/30/labels","id":3423973,"node_id":"MDk6TWlsZXN0b25lMzQyMzk3Mw==","number":30,"title":"3.0","description":"","creator":{"login":"emanuelschuetze","id":2075427,"node_id":"MDQ6VXNlcjIwNzU0Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/2075427?v=4","gravatar_id":"","url":"https://api.github.com/users/emanuelschuetze","html_url":"https://github.com/emanuelschuetze","followers_url":"https://api.github.com/users/emanuelschuetze/followers","following_url":"https://api.github.com/users/emanuelschuetze/following{/other_user}","gists_url":"https://api.github.com/users/emanuelschuetze/gists{/gist_id}","starred_url":"https://api.github.com/users/emanuelschuetze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emanuelschuetze/subscriptions","organizations_url":"https://api.github.com/users/emanuelschuetze/orgs","repos_url":"https://api.github.com/users/emanuelschuetze/repos","events_url":"https://api.github.com/users/emanuelschuetze/events{/privacy}","received_events_url":"https://api.github.com/users/emanuelschuetze/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":1156,"state":"closed","created_at":"2018-06-14T07:28:50Z","updated_at":"2019-09-16T15:41:43Z","due_on":"2019-09-13T07:00:00Z","closed_at":"2019-09-16T15:41:43Z"},"comments":5,"created_at":"2018-11-13T10:35:10Z","updated_at":"2019-02-05T07:34:55Z","closed_at":"2019-02-05T07:34:54Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":5250779,"node_id":"MDEwOlJlcG9zaXRvcnk1MjUwNzc5","name":"OpenSlides","full_name":"OpenSlides/OpenSlides","private":false,"owner":{"login":"OpenSlides","id":2055730,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTU3MzA=","avatar_url":"https://avatars.githubusercontent.com/u/2055730?v=4","gravatar_id":"","url":"https://api.github.com/users/OpenSlides","html_url":"https://github.com/OpenSlides","followers_url":"https://api.github.com/users/OpenSlides/followers","following_url":"https://api.github.com/users/OpenSlides/following{/other_user}","gists_url":"https://api.github.com/users/OpenSlides/gists{/gist_id}","starred_url":"https://api.github.com/users/OpenSlides/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OpenSlides/subscriptions","organizations_url":"https://api.github.com/users/OpenSlides/orgs","repos_url":"https://api.github.com/users/OpenSlides/repos","events_url":"https://api.github.com/users/OpenSlides/events{/privacy}","received_events_url":"https://api.github.com/users/OpenSlides/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/OpenSlides/OpenSlides","description":"The digital motion and assembly system","fork":false,"url":"https://api.github.com/repos/OpenSlides/OpenSlides","forks_url":"https://api.github.com/repos/OpenSlides/OpenSlides/forks","keys_url":"https://api.github.com/repos/OpenSlides/OpenSlides/keys{/key_id}","collaborators_url":"https://api.github.com/repos/OpenSlides/OpenSlides/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/OpenSlides/OpenSlides/teams","hooks_url":"https://api.github.com/repos/OpenSlides/OpenSlides/hooks","issue_events_url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/events{/number}","events_url":"https://api.github.com/repos/OpenSlides/OpenSlides/events","assignees_url":"https://api.github.com/repos/OpenSlides/OpenSlides/assignees{/user}","branches_url":"https://api.github.com/repos/OpenSlides/OpenSlides/branches{/branch}","tags_url":"https://api.github.com/repos/OpenSlides/OpenSlides/tags","blobs_url":"https://api.github.com/repos/OpenSlides/OpenSlides/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/OpenSlides/OpenSlides/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/OpenSlides/OpenSlides/git/refs{/sha}","trees_url":"https://api.github.com/repos/OpenSlides/OpenSlides/git/trees{/sha}","statuses_url":"https://api.github.com/repos/OpenSlides/OpenSlides/statuses/{sha}","languages_url":"https://api.github.com/repos/OpenSlides/OpenSlides/languages","stargazers_url":"https://api.github.com/repos/OpenSlides/OpenSlides/stargazers","contributors_url":"https://api.github.com/repos/OpenSlides/OpenSlides/contributors","subscribers_url":"https://api.github.com/repos/OpenSlides/OpenSlides/subscribers","subscription_url":"https://api.github.com/repos/OpenSlides/OpenSlides/subscription","commits_url":"https://api.github.com/repos/OpenSlides/OpenSlides/commits{/sha}","git_commits_url":"https://api.github.com/repos/OpenSlides/OpenSlides/git/commits{/sha}","comments_url":"https://api.github.com/repos/OpenSlides/OpenSlides/comments{/number}","issue_comment_url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/comments{/number}","contents_url":"https://api.github.com/repos/OpenSlides/OpenSlides/contents/{+path}","compare_url":"https://api.github.com/repos/OpenSlides/OpenSlides/compare/{base}...{head}","merges_url":"https://api.github.com/repos/OpenSlides/OpenSlides/merges","archive_url":"https://api.github.com/repos/OpenSlides/OpenSlides/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/OpenSlides/OpenSlides/downloads","issues_url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues{/number}","pulls_url":"https://api.github.com/repos/OpenSlides/OpenSlides/pulls{/number}","milestones_url":"https://api.github.com/repos/OpenSlides/OpenSlides/milestones{/number}","notifications_url":"https://api.github.com/repos/OpenSlides/OpenSlides/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/OpenSlides/OpenSlides/labels{/name}","releases_url":"https://api.github.com/repos/OpenSlides/OpenSlides/releases{/id}","deployments_url":"https://api.github.com/repos/OpenSlides/OpenSlides/deployments","created_at":"2012-07-31T20:04:39Z","updated_at":"2025-11-07T12:18:41Z","pushed_at":"2025-11-07T14:08:51Z","git_url":"git://github.com/OpenSlides/OpenSlides.git","ssh_url":"git@github.com:OpenSlides/OpenSlides.git","clone_url":"https://github.com/OpenSlides/OpenSlides.git","svn_url":"https://github.com/OpenSlides/OpenSlides","homepage":"https://openslides.com","size":61030,"stargazers_count":569,"watchers_count":569,"language":"Shell","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":171,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":51,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":171,"open_issues":51,"watchers":569,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We need to start the OpenSlides Server from our virtual environment via\r\n\r\n```\r\nDJANGO_SETTINGS_MODULE=settings\r\nPYTHONPATH=/app/personal_data/var\r\ngunicorn -w 4 -b 0.0.0.0:8000 -k uvicorn.workers.UvicornWorker openslides.asgi:application\r\n```\r\n\r\nThe server is now reachable at `localhost:8000`.\r\n\r\nOnce you start the server normally via `npm start` from the `client`folder, you can reach the website at `http://localhost`. You'll notice an Browser error on network side on `/whoami/`\r\n\r\n```\r\nKeyError at /apps/users/whoami/\r\n'core/config'\r\n\r\nRequest Method: GET\r\nRequest URL: http://localhost:8000/apps/users/whoami/\r\nDjango Version: 2.1.2\r\nPython Executable: /home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/bin/python3\r\nPython Version: 3.7.1\r\nPython Path: ['/home/jochen/.config/openslides', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/bin', '/usr/lib/python37.zip', '/usr/lib/python3.7', '/usr/lib/python3.7/lib-dynload', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages']\r\nServer time: Tue, 13 Nov 2018 11:18:48 +0100\r\nInstalled Applications:\r\n['openslides.core',\r\n 'openslides.users',\r\n 'django.contrib.auth',\r\n 'django.contrib.contenttypes',\r\n 'django.contrib.sessions',\r\n 'django.contrib.staticfiles',\r\n 'rest_framework',\r\n 'channels',\r\n 'openslides.agenda',\r\n 'openslides.topics',\r\n 'openslides.motions',\r\n 'openslides.assignments',\r\n 'openslides.mediafiles']\r\nInstalled Middleware:\r\n['django.middleware.security.SecurityMiddleware',\r\n 'django.contrib.sessions.middleware.SessionMiddleware',\r\n 'django.middleware.locale.LocaleMiddleware',\r\n 'django.middleware.common.CommonMiddleware',\r\n 'django.middleware.csrf.CsrfViewMiddleware',\r\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\r\n 'django.middleware.clickjacking.XFrameOptionsMiddleware',\r\n 'openslides.utils.autoupdate.AutoupdateBundleMiddleware']\r\n\r\n\r\nTraceback:\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/exception.py\" in inner\r\n  34.             response = get_response(request)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\r\n  126.                 response = self.process_exception_by_middleware(e, request)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\r\n  124.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/decorators/csrf.py\" in wrapped_view\r\n  54.         return view_func(*args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/generic/base.py\" in view\r\n  68.             return self.dispatch(request, *args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\" in dispatch\r\n  495.             response = self.handle_exception(exc)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\" in handle_exception\r\n  455.             self.raise_uncaught_exception(exc)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\" in dispatch\r\n  492.             response = handler(request, *args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/utils/views.py\" in method_call\r\n  30.         return Response(self.get_context_data())\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/users/views.py\" in get_context_data\r\n  512.             guest_enabled=anonymous_is_enabled(),\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/utils/auth.py\" in anonymous_is_enabled\r\n  146.     return config['general_system_enable_anonymous']\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\" in __getitem__\r\n  60.         return async_to_sync(element_cache.get_element_full_data)(self.get_collection_string(), self.get_key_to_id()[key])['value']\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\" in get_key_to_id\r\n  67.             async_to_sync(self.build_key_to_id)()\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\" in __call__\r\n  64.         return call_result.result()\r\n\r\nFile \"/usr/lib/python3.7/concurrent/futures/_base.py\" in result\r\n  432.                 return self.__get_result()\r\n\r\nFile \"/usr/lib/python3.7/concurrent/futures/_base.py\" in __get_result\r\n  384.             raise self._exception\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\" in main_wrap\r\n  78.             result = await self.awaitable(*args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\" in build_key_to_id\r\n  82.         elements = all_data[self.get_collection_string()]\r\n\r\nException Type: KeyError at /apps/users/whoami/\r\nException Value: 'core/config'\r\nRequest information:\r\nUSER: AnonymousUser\r\n\r\nGET: No GET data\r\n\r\nPOST: No POST data\r\n\r\nFILES: No FILES data\r\n\r\nCOOKIES: No cookie data\r\n\r\nMETA:\r\nCONTENT_TYPE = 'application/json'\r\nHTTP_ACCEPT = 'application/json, text/plain, */*'\r\nHTTP_ACCEPT_ENCODING = 'gzip, deflate'\r\nHTTP_ACCEPT_LANGUAGE = 'en-US,en;q=0.9,de;q=0.8'\r\nHTTP_CACHE_CONTROL = 'no-cache'\r\nHTTP_CONNECTION = 'close'\r\nHTTP_DNT = '1'\r\nHTTP_HOST = 'localhost:8000'\r\nHTTP_PRAGMA = 'no-cache'\r\nHTTP_REFERER = 'http://archimedes.guest.intevation.de/login'\r\nHTTP_USER_AGENT = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36'\r\nPATH_INFO = '/apps/users/whoami/'\r\nQUERY_STRING = ''\r\nREMOTE_ADDR = '127.0.0.1'\r\nREMOTE_HOST = '127.0.0.1'\r\nREMOTE_PORT = 41120\r\nREQUEST_METHOD = 'GET'\r\nSCRIPT_NAME = ''\r\nSERVER_NAME = '127.0.0.1'\r\nSERVER_PORT = '8000'\r\nwsgi.multiprocess = True\r\nwsgi.multithread = True\r\n\r\nSettings:\r\nUsing settings module settings\r\nABSOLUTE_URL_OVERRIDES = {}\r\nADMINS = []\r\nALLOWED_HOSTS = ['*']\r\nAPPEND_SLASH = True\r\nASGI_APPLICATION = 'openslides.routing.application'\r\nAUTHENTICATION_BACKENDS = ['django.contrib.auth.backends.ModelBackend']\r\nAUTH_GROUP_MODEL = 'users.Group'\r\nAUTH_PASSWORD_VALIDATORS = '********************'\r\nAUTH_USER_MODEL = 'users.User'\r\nCACHES = {'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}\r\nCACHE_MIDDLEWARE_ALIAS = 'default'\r\nCACHE_MIDDLEWARE_KEY_PREFIX = '********************'\r\nCACHE_MIDDLEWARE_SECONDS = 600\r\nCHANNEL_LAYERS = {'default': {'BACKEND': 'channels.layers.InMemoryChannelLayer'}}\r\nCSRF_COOKIE_AGE = None\r\nCSRF_COOKIE_DOMAIN = None\r\nCSRF_COOKIE_HTTPONLY = False\r\nCSRF_COOKIE_NAME = 'OpenSlidesCsrfToken'\r\nCSRF_COOKIE_PATH = '/'\r\nCSRF_COOKIE_SAMESITE = 'Lax'\r\nCSRF_COOKIE_SECURE = False\r\nCSRF_FAILURE_VIEW = 'django.views.csrf.csrf_failure'\r\nCSRF_HEADER_NAME = 'HTTP_X_CSRFTOKEN'\r\nCSRF_TRUSTED_ORIGINS = []\r\nCSRF_USE_SESSIONS = False\r\nDATABASES = {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': '/home/jochen/.local/share/openslides/db.sqlite3', 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'NAME': None, 'MIRROR': None}}}\r\nDATABASE_ROUTERS = []\r\nDATA_UPLOAD_MAX_MEMORY_SIZE = 2621440\r\nDATA_UPLOAD_MAX_NUMBER_FIELDS = 1000\r\nDATETIME_FORMAT = 'N j, Y, P'\r\nDATETIME_INPUT_FORMATS = ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%Y-%m-%d', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%Y', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M', '%m/%d/%y']\r\nDATE_FORMAT = 'N j, Y'\r\nDATE_INPUT_FORMATS = ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y']\r\nDEBUG = True\r\nDEBUG_PROPAGATE_EXCEPTIONS = False\r\nDECIMAL_SEPARATOR = '.'\r\nDEFAULT_CHARSET = 'utf-8'\r\nDEFAULT_CONTENT_TYPE = 'text/html'\r\nDEFAULT_EXCEPTION_REPORTER_FILTER = 'django.views.debug.SafeExceptionReporterFilter'\r\nDEFAULT_FILE_STORAGE = 'django.core.files.storage.FileSystemStorage'\r\nDEFAULT_FROM_EMAIL = 'webmaster@localhost'\r\nDEFAULT_INDEX_TABLESPACE = ''\r\nDEFAULT_TABLESPACE = ''\r\nDISALLOWED_USER_AGENTS = []\r\nEMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\r\nEMAIL_HOST = 'localhost'\r\nEMAIL_HOST_PASSWORD = '********************'\r\nEMAIL_HOST_USER = ''\r\nEMAIL_PORT = 25\r\nEMAIL_SSL_CERTFILE = None\r\nEMAIL_SSL_KEYFILE = '********************'\r\nEMAIL_SUBJECT_PREFIX = '[Django] '\r\nEMAIL_TIMEOUT = 5\r\nEMAIL_USE_LOCALTIME = False\r\nEMAIL_USE_SSL = False\r\nEMAIL_USE_TLS = False\r\nENABLE_LAST_LOGIN_FIELD = False\r\nFILE_CHARSET = 'utf-8'\r\nFILE_UPLOAD_DIRECTORY_PERMISSIONS = None\r\nFILE_UPLOAD_HANDLERS = ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler']\r\nFILE_UPLOAD_MAX_MEMORY_SIZE = 2621440\r\nFILE_UPLOAD_PERMISSIONS = None\r\nFILE_UPLOAD_TEMP_DIR = None\r\nFIRST_DAY_OF_WEEK = 0\r\nFIXTURE_DIRS = []\r\nFORCE_SCRIPT_NAME = None\r\nFORMAT_MODULE_PATH = None\r\nFORM_RENDERER = 'django.forms.renderers.DjangoTemplates'\r\nIGNORABLE_404_URLS = []\r\nINSTALLED_APPS = ['openslides.core', 'openslides.users', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.staticfiles', 'rest_framework', 'channels', 'openslides.agenda', 'openslides.topics', 'openslides.motions', 'openslides.assignments', 'openslides.mediafiles']\r\nINSTALLED_PLUGINS = '()'\r\nINTERNAL_IPS = []\r\nLANGUAGES = \"(('en', 'English'), ('de', 'Deutsch'), ('fr', 'Français'), ('es', 'Español'), ('pt', 'Português'), ('cs', 'Český'), ('ru', 'русский'))\"\r\nLANGUAGES_BIDI = ['he', 'ar', 'fa', 'ur']\r\nLANGUAGE_CODE = 'en'\r\nLANGUAGE_COOKIE_AGE = None\r\nLANGUAGE_COOKIE_DOMAIN = None\r\nLANGUAGE_COOKIE_NAME = 'django_language'\r\nLANGUAGE_COOKIE_PATH = '/'\r\nLOCALE_PATHS = ['/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/locale']\r\nLOGGING = {}\r\nLOGGING_CONFIG = 'logging.config.dictConfig'\r\nLOGIN_REDIRECT_URL = '/accounts/profile/'\r\nLOGIN_URL = '/accounts/login/'\r\nLOGOUT_REDIRECT_URL = None\r\nMANAGERS = []\r\nMEDIA_ROOT = '/home/jochen/.local/share/openslides/media/'\r\nMEDIA_URL = '/media/'\r\nMESSAGE_STORAGE = 'django.contrib.messages.storage.fallback.FallbackStorage'\r\nMIDDLEWARE = ['django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.locale.LocaleMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'openslides.utils.autoupdate.AutoupdateBundleMiddleware']\r\nMIGRATION_MODULES = {}\r\nMODULE_DIR = '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides'\r\nMONTH_DAY_FORMAT = 'F j'\r\nMOTIONS_ALLOW_AMENDMENTS_OF_AMENDMENTS = True\r\nMOTION_IDENTIFIER_MIN_DIGITS = 1\r\nMOTION_IDENTIFIER_WITHOUT_BLANKS = False\r\nNUMBER_GROUPING = 0\r\nOPENSLIDES_USER_DATA_PATH = '/home/jochen/.local/share/openslides'\r\nPASSWORD_HASHERS = '********************'\r\nPASSWORD_RESET_TIMEOUT_DAYS = '********************'\r\nPREPEND_WWW = False\r\nROOT_URLCONF = 'openslides.urls'\r\nSECRET_KEY = '********************'\r\nSECURE_BROWSER_XSS_FILTER = False\r\nSECURE_CONTENT_TYPE_NOSNIFF = False\r\nSECURE_HSTS_INCLUDE_SUBDOMAINS = False\r\nSECURE_HSTS_PRELOAD = False\r\nSECURE_HSTS_SECONDS = 0\r\nSECURE_PROXY_SSL_HEADER = None\r\nSECURE_REDIRECT_EXEMPT = []\r\nSECURE_SSL_HOST = None\r\nSECURE_SSL_REDIRECT = False\r\nSERVER_EMAIL = 'root@localhost'\r\nSESSION_CACHE_ALIAS = 'default'\r\nSESSION_COOKIE_AGE = 1209600\r\nSESSION_COOKIE_DOMAIN = None\r\nSESSION_COOKIE_HTTPONLY = True\r\nSESSION_COOKIE_NAME = 'OpenSlidesSessionID'\r\nSESSION_COOKIE_PATH = '/'\r\nSESSION_COOKIE_SAMESITE = 'Lax'\r\nSESSION_COOKIE_SECURE = False\r\nSESSION_ENGINE = 'django.contrib.sessions.backends.db'\r\nSESSION_EXPIRE_AT_BROWSER_CLOSE = True\r\nSESSION_FILE_PATH = None\r\nSESSION_SAVE_EVERY_REQUEST = False\r\nSESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'\r\nSETTINGS_MODULE = 'settings'\r\nSHORT_DATETIME_FORMAT = 'm/d/Y P'\r\nSHORT_DATE_FORMAT = 'm/d/Y'\r\nSIGNING_BACKEND = 'django.core.signing.TimestampSigner'\r\nSILENCED_SYSTEM_CHECKS = []\r\nSTATICFILES_DIRS = ['/home/jochen/.local/share/openslides/static', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/static']\r\nSTATICFILES_FINDERS = ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder']\r\nSTATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'\r\nSTATIC_ROOT = '/home/jochen/.local/share/openslides/collected-static'\r\nSTATIC_URL = '/static/'\r\nTEMPLATES = [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [], 'APP_DIRS': True}]\r\nTEST_NON_SERIALIZED_APPS = []\r\nTEST_RUNNER = 'django.test.runner.DiscoverRunner'\r\nTHOUSAND_SEPARATOR = ','\r\nTIME_FORMAT = 'P'\r\nTIME_INPUT_FORMATS = ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M']\r\nTIME_ZONE = 'Europe/Berlin'\r\nUSE_I18N = True\r\nUSE_L10N = True\r\nUSE_THOUSAND_SEPARATOR = False\r\nUSE_TZ = True\r\nUSE_X_FORWARDED_HOST = False\r\nUSE_X_FORWARDED_PORT = False\r\nWSGI_APPLICATION = None\r\nX_FRAME_OPTIONS = 'SAMEORIGIN'\r\nYEAR_MONTH_FORMAT = 'F Y'\r\n\r\n\r\nYou're seeing this error because you have DEBUG = True in your\r\nDjango settings file. Change that to False, and Django will\r\ndisplay a standard page generated by the handler for this status code.\r\n\r\n```\r\n\r\nand one on `/login` (if you try to login):\r\n```\r\nKeyError at /apps/users/login/\r\n'core/config'\r\n\r\nRequest Method: GET\r\nRequest URL: http://localhost:8000/apps/users/login/\r\nDjango Version: 2.1.2\r\nPython Executable: /home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/bin/python3\r\nPython Version: 3.7.1\r\nPython Path: ['/home/jochen/.config/openslides', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/bin', '/usr/lib/python37.zip', '/usr/lib/python3.7', '/usr/lib/python3.7/lib-dynload', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages']\r\nServer time: Tue, 13 Nov 2018 11:18:48 +0100\r\nInstalled Applications:\r\n['openslides.core',\r\n 'openslides.users',\r\n 'django.contrib.auth',\r\n 'django.contrib.contenttypes',\r\n 'django.contrib.sessions',\r\n 'django.contrib.staticfiles',\r\n 'rest_framework',\r\n 'channels',\r\n 'openslides.agenda',\r\n 'openslides.topics',\r\n 'openslides.motions',\r\n 'openslides.assignments',\r\n 'openslides.mediafiles']\r\nInstalled Middleware:\r\n['django.middleware.security.SecurityMiddleware',\r\n 'django.contrib.sessions.middleware.SessionMiddleware',\r\n 'django.middleware.locale.LocaleMiddleware',\r\n 'django.middleware.common.CommonMiddleware',\r\n 'django.middleware.csrf.CsrfViewMiddleware',\r\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\r\n 'django.middleware.clickjacking.XFrameOptionsMiddleware',\r\n 'openslides.utils.autoupdate.AutoupdateBundleMiddleware']\r\n\r\n\r\nTraceback:\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/exception.py\" in inner\r\n  34.             response = get_response(request)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\r\n  126.                 response = self.process_exception_by_middleware(e, request)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\r\n  124.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/decorators/csrf.py\" in wrapped_view\r\n  54.         return view_func(*args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/generic/base.py\" in view\r\n  68.             return self.dispatch(request, *args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\" in dispatch\r\n  495.             response = self.handle_exception(exc)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\" in handle_exception\r\n  455.             self.raise_uncaught_exception(exc)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\" in dispatch\r\n  492.             response = handler(request, *args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/utils/views.py\" in method_call\r\n  30.         return Response(self.get_context_data())\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/users/views.py\" in get_context_data\r\n  446.             if config['general_login_info_text']:\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\" in __getitem__\r\n  60.         return async_to_sync(element_cache.get_element_full_data)(self.get_collection_string(), self.get_key_to_id()[key])['value']\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\" in get_key_to_id\r\n  67.             async_to_sync(self.build_key_to_id)()\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\" in __call__\r\n  64.         return call_result.result()\r\n\r\nFile \"/usr/lib/python3.7/concurrent/futures/_base.py\" in result\r\n  432.                 return self.__get_result()\r\n\r\nFile \"/usr/lib/python3.7/concurrent/futures/_base.py\" in __get_result\r\n  384.             raise self._exception\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\" in main_wrap\r\n  78.             result = await self.awaitable(*args, **kwargs)\r\n\r\nFile \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\" in build_key_to_id\r\n  82.         elements = all_data[self.get_collection_string()]\r\n\r\nException Type: KeyError at /apps/users/login/\r\nException Value: 'core/config'\r\nRequest information:\r\nUSER: AnonymousUser\r\n\r\nGET: No GET data\r\n\r\nPOST: No POST data\r\n\r\nFILES: No FILES data\r\n\r\nCOOKIES: No cookie data\r\n\r\nMETA:\r\nCONTENT_TYPE = 'application/json'\r\nHTTP_ACCEPT = 'application/json, text/plain, */*'\r\nHTTP_ACCEPT_ENCODING = 'gzip, deflate'\r\nHTTP_ACCEPT_LANGUAGE = 'en-US,en;q=0.9,de;q=0.8'\r\nHTTP_CACHE_CONTROL = 'no-cache'\r\nHTTP_CONNECTION = 'close'\r\nHTTP_DNT = '1'\r\nHTTP_HOST = 'localhost:8000'\r\nHTTP_PRAGMA = 'no-cache'\r\nHTTP_REFERER = 'http://archimedes.guest.intevation.de/login'\r\nHTTP_USER_AGENT = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36'\r\nPATH_INFO = '/apps/users/login/'\r\nQUERY_STRING = ''\r\nREMOTE_ADDR = '127.0.0.1'\r\nREMOTE_HOST = '127.0.0.1'\r\nREMOTE_PORT = 41122\r\nREQUEST_METHOD = 'GET'\r\nSCRIPT_NAME = ''\r\nSERVER_NAME = '127.0.0.1'\r\nSERVER_PORT = '8000'\r\nwsgi.multiprocess = True\r\nwsgi.multithread = True\r\n\r\nSettings:\r\nUsing settings module settings\r\nABSOLUTE_URL_OVERRIDES = {}\r\nADMINS = []\r\nALLOWED_HOSTS = ['*']\r\nAPPEND_SLASH = True\r\nASGI_APPLICATION = 'openslides.routing.application'\r\nAUTHENTICATION_BACKENDS = ['django.contrib.auth.backends.ModelBackend']\r\nAUTH_GROUP_MODEL = 'users.Group'\r\nAUTH_PASSWORD_VALIDATORS = '********************'\r\nAUTH_USER_MODEL = 'users.User'\r\nCACHES = {'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}\r\nCACHE_MIDDLEWARE_ALIAS = 'default'\r\nCACHE_MIDDLEWARE_KEY_PREFIX = '********************'\r\nCACHE_MIDDLEWARE_SECONDS = 600\r\nCHANNEL_LAYERS = {'default': {'BACKEND': 'channels.layers.InMemoryChannelLayer'}}\r\nCSRF_COOKIE_AGE = None\r\nCSRF_COOKIE_DOMAIN = None\r\nCSRF_COOKIE_HTTPONLY = False\r\nCSRF_COOKIE_NAME = 'OpenSlidesCsrfToken'\r\nCSRF_COOKIE_PATH = '/'\r\nCSRF_COOKIE_SAMESITE = 'Lax'\r\nCSRF_COOKIE_SECURE = False\r\nCSRF_FAILURE_VIEW = 'django.views.csrf.csrf_failure'\r\nCSRF_HEADER_NAME = 'HTTP_X_CSRFTOKEN'\r\nCSRF_TRUSTED_ORIGINS = []\r\nCSRF_USE_SESSIONS = False\r\nDATABASES = {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': '/home/jochen/.local/share/openslides/db.sqlite3', 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'NAME': None, 'MIRROR': None}}}\r\nDATABASE_ROUTERS = []\r\nDATA_UPLOAD_MAX_MEMORY_SIZE = 2621440\r\nDATA_UPLOAD_MAX_NUMBER_FIELDS = 1000\r\nDATETIME_FORMAT = 'N j, Y, P'\r\nDATETIME_INPUT_FORMATS = ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%Y-%m-%d', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%Y', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M', '%m/%d/%y']\r\nDATE_FORMAT = 'N j, Y'\r\nDATE_INPUT_FORMATS = ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y']\r\nDEBUG = True\r\nDEBUG_PROPAGATE_EXCEPTIONS = False\r\nDECIMAL_SEPARATOR = '.'\r\nDEFAULT_CHARSET = 'utf-8'\r\nDEFAULT_CONTENT_TYPE = 'text/html'\r\nDEFAULT_EXCEPTION_REPORTER_FILTER = 'django.views.debug.SafeExceptionReporterFilter'\r\nDEFAULT_FILE_STORAGE = 'django.core.files.storage.FileSystemStorage'\r\nDEFAULT_FROM_EMAIL = 'webmaster@localhost'\r\nDEFAULT_INDEX_TABLESPACE = ''\r\nDEFAULT_TABLESPACE = ''\r\nDISALLOWED_USER_AGENTS = []\r\nEMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\r\nEMAIL_HOST = 'localhost'\r\nEMAIL_HOST_PASSWORD = '********************'\r\nEMAIL_HOST_USER = ''\r\nEMAIL_PORT = 25\r\nEMAIL_SSL_CERTFILE = None\r\nEMAIL_SSL_KEYFILE = '********************'\r\nEMAIL_SUBJECT_PREFIX = '[Django] '\r\nEMAIL_TIMEOUT = 5\r\nEMAIL_USE_LOCALTIME = False\r\nEMAIL_USE_SSL = False\r\nEMAIL_USE_TLS = False\r\nENABLE_LAST_LOGIN_FIELD = False\r\nFILE_CHARSET = 'utf-8'\r\nFILE_UPLOAD_DIRECTORY_PERMISSIONS = None\r\nFILE_UPLOAD_HANDLERS = ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler']\r\nFILE_UPLOAD_MAX_MEMORY_SIZE = 2621440\r\nFILE_UPLOAD_PERMISSIONS = None\r\nFILE_UPLOAD_TEMP_DIR = None\r\nFIRST_DAY_OF_WEEK = 0\r\nFIXTURE_DIRS = []\r\nFORCE_SCRIPT_NAME = None\r\nFORMAT_MODULE_PATH = None\r\nFORM_RENDERER = 'django.forms.renderers.DjangoTemplates'\r\nIGNORABLE_404_URLS = []\r\nINSTALLED_APPS = ['openslides.core', 'openslides.users', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.staticfiles', 'rest_framework', 'channels', 'openslides.agenda', 'openslides.topics', 'openslides.motions', 'openslides.assignments', 'openslides.mediafiles']\r\nINSTALLED_PLUGINS = '()'\r\nINTERNAL_IPS = []\r\nLANGUAGES = \"(('en', 'English'), ('de', 'Deutsch'), ('fr', 'Français'), ('es', 'Español'), ('pt', 'Português'), ('cs', 'Český'), ('ru', 'русский'))\"\r\nLANGUAGES_BIDI = ['he', 'ar', 'fa', 'ur']\r\nLANGUAGE_CODE = 'en'\r\nLANGUAGE_COOKIE_AGE = None\r\nLANGUAGE_COOKIE_DOMAIN = None\r\nLANGUAGE_COOKIE_NAME = 'django_language'\r\nLANGUAGE_COOKIE_PATH = '/'\r\nLOCALE_PATHS = ['/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/locale']\r\nLOGGING = {}\r\nLOGGING_CONFIG = 'logging.config.dictConfig'\r\nLOGIN_REDIRECT_URL = '/accounts/profile/'\r\nLOGIN_URL = '/accounts/login/'\r\nLOGOUT_REDIRECT_URL = None\r\nMANAGERS = []\r\nMEDIA_ROOT = '/home/jochen/.local/share/openslides/media/'\r\nMEDIA_URL = '/media/'\r\nMESSAGE_STORAGE = 'django.contrib.messages.storage.fallback.FallbackStorage'\r\nMIDDLEWARE = ['django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.locale.LocaleMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'openslides.utils.autoupdate.AutoupdateBundleMiddleware']\r\nMIGRATION_MODULES = {}\r\nMODULE_DIR = '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides'\r\nMONTH_DAY_FORMAT = 'F j'\r\nMOTIONS_ALLOW_AMENDMENTS_OF_AMENDMENTS = True\r\nMOTION_IDENTIFIER_MIN_DIGITS = 1\r\nMOTION_IDENTIFIER_WITHOUT_BLANKS = False\r\nNUMBER_GROUPING = 0\r\nOPENSLIDES_USER_DATA_PATH = '/home/jochen/.local/share/openslides'\r\nPASSWORD_HASHERS = '********************'\r\nPASSWORD_RESET_TIMEOUT_DAYS = '********************'\r\nPREPEND_WWW = False\r\nROOT_URLCONF = 'openslides.urls'\r\nSECRET_KEY = '********************'\r\nSECURE_BROWSER_XSS_FILTER = False\r\nSECURE_CONTENT_TYPE_NOSNIFF = False\r\nSECURE_HSTS_INCLUDE_SUBDOMAINS = False\r\nSECURE_HSTS_PRELOAD = False\r\nSECURE_HSTS_SECONDS = 0\r\nSECURE_PROXY_SSL_HEADER = None\r\nSECURE_REDIRECT_EXEMPT = []\r\nSECURE_SSL_HOST = None\r\nSECURE_SSL_REDIRECT = False\r\nSERVER_EMAIL = 'root@localhost'\r\nSESSION_CACHE_ALIAS = 'default'\r\nSESSION_COOKIE_AGE = 1209600\r\nSESSION_COOKIE_DOMAIN = None\r\nSESSION_COOKIE_HTTPONLY = True\r\nSESSION_COOKIE_NAME = 'OpenSlidesSessionID'\r\nSESSION_COOKIE_PATH = '/'\r\nSESSION_COOKIE_SAMESITE = 'Lax'\r\nSESSION_COOKIE_SECURE = False\r\nSESSION_ENGINE = 'django.contrib.sessions.backends.db'\r\nSESSION_EXPIRE_AT_BROWSER_CLOSE = True\r\nSESSION_FILE_PATH = None\r\nSESSION_SAVE_EVERY_REQUEST = False\r\nSESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'\r\nSETTINGS_MODULE = 'settings'\r\nSHORT_DATETIME_FORMAT = 'm/d/Y P'\r\nSHORT_DATE_FORMAT = 'm/d/Y'\r\nSIGNING_BACKEND = 'django.core.signing.TimestampSigner'\r\nSILENCED_SYSTEM_CHECKS = []\r\nSTATICFILES_DIRS = ['/home/jochen/.local/share/openslides/static', '/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/static']\r\nSTATICFILES_FINDERS = ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder']\r\nSTATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'\r\nSTATIC_ROOT = '/home/jochen/.local/share/openslides/collected-static'\r\nSTATIC_URL = '/static/'\r\nTEMPLATES = [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [], 'APP_DIRS': True}]\r\nTEST_NON_SERIALIZED_APPS = []\r\nTEST_RUNNER = 'django.test.runner.DiscoverRunner'\r\nTHOUSAND_SEPARATOR = ','\r\nTIME_FORMAT = 'P'\r\nTIME_INPUT_FORMATS = ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M']\r\nTIME_ZONE = 'Europe/Berlin'\r\nUSE_I18N = True\r\nUSE_L10N = True\r\nUSE_THOUSAND_SEPARATOR = False\r\nUSE_TZ = True\r\nUSE_X_FORWARDED_HOST = False\r\nUSE_X_FORWARDED_PORT = False\r\nWSGI_APPLICATION = None\r\nX_FRAME_OPTIONS = 'SAMEORIGIN'\r\nYEAR_MONTH_FORMAT = 'F Y'\r\n\r\n\r\nYou're seeing this error because you have DEBUG = True in your\r\nDjango settings file. Change that to False, and Django will\r\ndisplay a standard page generated by the handler for this status code.\r\n```\r\n\r\nThe server throws the following on the `/whomi/` request:\r\n\r\n```\r\nInternal Server Error: /apps/users/whoami/\r\nTraceback (most recent call last):\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\", line 126, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\", line 124, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n    return view_func(*args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/generic/base.py\", line 68, in view\r\n    return self.dispatch(request, *args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 495, in dispatch\r\n    response = self.handle_exception(exc)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 455, in handle_exception\r\n    self.raise_uncaught_exception(exc)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 492, in dispatch\r\n    response = handler(request, *args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/utils/views.py\", line 30, in method_call\r\n    return Response(self.get_context_data())\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/users/views.py\", line 512, in get_context_data\r\n    guest_enabled=anonymous_is_enabled(),\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/utils/auth.py\", line 146, in anonymous_is_enabled\r\n    return config['general_system_enable_anonymous']\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\", line 60, in __getitem__\r\n    return async_to_sync(element_cache.get_element_full_data)(self.get_collection_string(), self.get_key_to_id()[key])['value']\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\", line 67, in get_key_to_id\r\n    async_to_sync(self.build_key_to_id)()\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\", line 64, in __call__\r\n    return call_result.result()\r\n  File \"/usr/lib/python3.7/concurrent/futures/_base.py\", line 432, in result\r\n    return self.__get_result()\r\n  File \"/usr/lib/python3.7/concurrent/futures/_base.py\", line 384, in __get_result\r\n    raise self._exception\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\", line 78, in main_wrap\r\n    result = await self.awaitable(*args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\", line 82, in build_key_to_id\r\n    elements = all_data[self.get_collection_string()]\r\nKeyError: 'core/config'\r\n[2018-11-13 11:18:48 +0100] [7668] [INFO] ('127.0.0.1', 41120) - \"GET /apps/users/whoami/ HTTP/1.0\" 500\r\n```\r\n\r\nand the following on the `/login/`:\r\n\r\n```\r\nnternal Server Error: /apps/users/login/\r\nTraceback (most recent call last):\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\", line 126, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\", line 124, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n    return view_func(*args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/generic/base.py\", line 68, in view\r\n    return self.dispatch(request, *args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 495, in dispatch\r\n    response = self.handle_exception(exc)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 455, in handle_exception\r\n    self.raise_uncaught_exception(exc)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 492, in dispatch\r\n    response = handler(request, *args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/utils/views.py\", line 30, in method_call\r\n    return Response(self.get_context_data())\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/users/views.py\", line 446, in get_context_data\r\n    if config['general_login_info_text']:\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\", line 60, in __getitem__\r\n    return async_to_sync(element_cache.get_element_full_data)(self.get_collection_string(), self.get_key_to_id()[key])['value']\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\", line 67, in get_key_to_id\r\n    async_to_sync(self.build_key_to_id)()\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\", line 64, in __call__\r\n    return call_result.result()\r\n  File \"/usr/lib/python3.7/concurrent/futures/_base.py\", line 432, in result\r\n    return self.__get_result()\r\n  File \"/usr/lib/python3.7/concurrent/futures/_base.py\", line 384, in __get_result\r\n    raise self._exception\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/asgiref/sync.py\", line 78, in main_wrap\r\n    result = await self.awaitable(*args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/core/config.py\", line 82, in build_key_to_id\r\n    elements = all_data[self.get_collection_string()]\r\nKeyError: 'core/config'\r\n[2018-11-13 11:18:48 +0100] [7670] [INFO] ('127.0.0.1', 41122) - \"GET /apps/users/login/ HTTP/1.0\" 500\r\nInternal Server Error: /apps/users/login/\r\nTraceback (most recent call last):\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/utils.py\", line 85, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/sqlite3/base.py\", line 296, in execute\r\n    return Database.Cursor.execute(self, query, params)\r\nsqlite3.OperationalError: no such column: users_user.email\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 34, in inner\r\n    response = get_response(request)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\", line 126, in _get_response\r\n    response = self.process_exception_by_middleware(e, request)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/core/handlers/base.py\", line 124, in _get_response\r\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view\r\n    return view_func(*args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/views/generic/base.py\", line 68, in view\r\n    return self.dispatch(request, *args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 495, in dispatch\r\n    response = self.handle_exception(exc)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 455, in handle_exception\r\n    self.raise_uncaught_exception(exc)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/rest_framework/views.py\", line 492, in dispatch\r\n    response = handler(request, *args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/openslides/users/views.py\", line 429, in post\r\n    if not form.is_valid():\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/forms/forms.py\", line 185, in is_valid\r\n    return self.is_bound and not self.errors\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/forms/forms.py\", line 180, in errors\r\n    self.full_clean()\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/forms/forms.py\", line 382, in full_clean\r\n    self._clean_form()\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/forms/forms.py\", line 409, in _clean_form\r\n    cleaned_data = self.clean()\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/contrib/auth/forms.py\", line 196, in clean\r\n    self.user_cache = authenticate(self.request, username=username, password=password)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/contrib/auth/__init__.py\", line 73, in authenticate\r\n    user = backend.authenticate(request, **credentials)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/contrib/auth/backends.py\", line 16, in authenticate\r\n    user = UserModel._default_manager.get_by_natural_key(username)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/contrib/auth/base_user.py\", line 44, in get_by_natural_key\r\n    return self.get(**{self.model.USERNAME_FIELD: username})\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/models/manager.py\", line 82, in manager_method\r\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/models/query.py\", line 393, in get\r\n    num = len(clone)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/models/query.py\", line 250, in __len__\r\n    self._fetch_all()\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/models/query.py\", line 1186, in _fetch_all\r\n    self._result_cache = list(self._iterable_class(self))\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/models/query.py\", line 54, in __iter__\r\n    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/models/sql/compiler.py\", line 1065, in execute_sql\r\n    cursor.execute(sql, params)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/utils.py\", line 100, in execute\r\n    return super().execute(sql, params)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/utils.py\", line 68, in execute\r\n    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/utils.py\", line 77, in _execute_with_wrappers\r\n    return executor(sql, params, many, context)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/utils.py\", line 85, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/utils.py\", line 89, in __exit__\r\n    raise dj_exc_value.with_traceback(traceback) from exc_value\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/utils.py\", line 85, in _execute\r\n    return self.cursor.execute(sql, params)\r\n  File \"/home/jochen/VCS/GIT/jsaalfeld/OpenSlides/.virtualenv/lib/python3.7/site-packages/django/db/backends/sqlite3/base.py\", line 296, in execute\r\n    return Database.Cursor.execute(self, query, params)\r\ndjango.db.utils.OperationalError: no such column: users_user.email\r\n[2018-11-13 11:18:52 +0100] [7669] [INFO] ('127.0.0.1', 41150) - \"POST /apps/users/login/ HTTP/1.0\" 500\r\n```\r\n\r\nWhat is interesting though: If you start the development server via `npm start` and let the server via `python manage.py runserver`, no error is produced (but this way is not viable for production environment, since the server doesn't accept the needed headers, when running the client on a dedicated `nginx`).\r\n\r\nSo, the difference between `python manage.py runserver` and running OpenSlides via `gunicorn` breaks the application.\r\n\r\nThis makes it impossible to run OpenSlides in a Big Mode with a dedicated `nginx` for the client.","reactions":{"url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/4009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/OpenSlides/OpenSlides/issues/4009/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/451914439","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-451914439","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":451914439,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTkxNDQzOQ==","user":{"login":"matteing","id":7959397,"node_id":"MDQ6VXNlcjc5NTkzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/7959397?v=4","gravatar_id":"","url":"https://api.github.com/users/matteing","html_url":"https://github.com/matteing","followers_url":"https://api.github.com/users/matteing/followers","following_url":"https://api.github.com/users/matteing/following{/other_user}","gists_url":"https://api.github.com/users/matteing/gists{/gist_id}","starred_url":"https://api.github.com/users/matteing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matteing/subscriptions","organizations_url":"https://api.github.com/users/matteing/orgs","repos_url":"https://api.github.com/users/matteing/repos","events_url":"https://api.github.com/users/matteing/events{/privacy}","received_events_url":"https://api.github.com/users/matteing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-07T12:06:21Z","updated_at":"2019-04-14T22:32:33Z","body":"I'm also facing this issue - when connections are closed, several errors pop up. Doesn't affect operation, but quite concerning nonetheless.\r\n\r\nFull stack trace (may be mixed with other errs...):\r\n\r\n```\r\n[2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 674, in transfer_data\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     message = yield from self.read_message()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 742, in read_message\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_data_frame(max_size=self.max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 815, in read_data_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_frame(max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 884, in read_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     extensions=self.extensions,\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/framing.py\", line 99, in read\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     data = yield from reader(2)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/usr/lib/python3.6/asyncio/streams.py\", line 672, in readexactly\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     raise IncompleteReadError(incomplete, n)\r\nJan 07 11:56:32 makerlog gunicorn[19800]: asyncio.streams.IncompleteReadError: 0 bytes read on a total of 2 expected bytes\r\nJan 07 11:56:32 makerlog gunicorn[19800]: The above exception was the direct cause of the following exception:\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 674, in transfer_data\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     message = yield from self.read_message()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 742, in read_message\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_data_frame(max_size=self.max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 815, in read_data_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_frame(max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 884, in read_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     extensions=self.extensions,\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/framing.py\", line 99, in read\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     data = yield from reader(2)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/usr/lib/python3.6/asyncio/streams.py\", line 672, in readexactly\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     raise IncompleteReadError(incomplete, n)\r\nJan 07 11:56:32 makerlog gunicorn[19800]: asyncio.streams.IncompleteReadError: 0 bytes read on a total of 2 expected bytes\r\nJan 07 11:56:32 makerlog gunicorn[19800]: The above exception was the direct cause of the following exception:\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 674, in transfer_data\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     message = yield from self.read_message()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 742, in read_message\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_data_frame(max_size=self.max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 815, in read_data_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_frame(max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 884, in read_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     extensions=self.extensions,\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/framing.py\", line 99, in read\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     data = yield from reader(2)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/usr/lib/python3.6/asyncio/streams.py\", line 672, in readexactly\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     raise IncompleteReadError(incomplete, n)\r\nJan 07 11:56:32 makerlog gunicorn[19800]: asyncio.streams.IncompleteReadError: 0 bytes read on a total of 2 expected bytes\r\nJan 07 11:56:32 makerlog gunicorn[19800]: The above exception was the direct cause of the following exception:\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19809] [INFO] None - \"WebSocket /explore/stream/\" [accepted]\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 674, in transfer_data\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     message = yield from self.read_message()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 742, in read_message\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_data_frame(max_size=self.max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 815, in read_data_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_frame(max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 884, in read_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     extensions=self.extensions,\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/framing.py\", line 99, in read\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     data = yield from reader(2)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/usr/lib/python3.6/asyncio/streams.py\", line 672, in readexactly\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     raise IncompleteReadError(incomplete, n)\r\nJan 07 11:56:32 makerlog gunicorn[19800]: asyncio.streams.IncompleteReadError: 0 bytes read on a total of 2 expected bytes\r\nJan 07 11:56:32 makerlog gunicorn[19800]: The above exception was the direct cause of the following exception:\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await dispatch(result)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 73, in dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await handler(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 175, in websocket_connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.connect()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/makerlog2/notifications/sockets/consumers.py\", line 19, in connect\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send_json(count)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 273, in send_json\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send(text_data=await self.encode_json(content), close=close)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/generic/websocket.py\", line 211, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 81, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.base_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 232, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.real_send(message)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 198, in asgi_send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await self.send(data)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 462, in send\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 11:56:32 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason\r\nJan 07 11:56:32 makerlog gunicorn[19800]: [2019-01-07 11:56:32 +0000] [19806] [ERROR] Exception in ASGI application\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 674, in transfer_data\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     message = yield from self.read_message()\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 742, in read_message\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_data_frame(max_size=self.max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 815, in read_data_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     frame = yield from self.read_frame(max_size)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 884, in read_frame\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     extensions=self.extensions,\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/framing.py\", line 99, in read\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     data = yield from reader(2)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/usr/lib/python3.6/asyncio/streams.py\", line 672, in readexactly\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     raise IncompleteReadError(incomplete, n)\r\nJan 07 11:56:32 makerlog gunicorn[19800]: asyncio.streams.IncompleteReadError: 0 bytes read on a total of 2 expected bytes\r\nJan 07 11:56:32 makerlog gunicorn[19800]: The above exception was the direct cause of the following exception:\r\nJan 07 11:56:32 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 140, in run_asgi\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     result = await asgi(self.asgi_receive, self.asgi_send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/sessions.py\", line 179, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     return await self.inner(receive, self.send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/middleware.py\", line 41, in coroutine_call\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     await inner_instance(receive, send)\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\nJan 07 11:56:32 makerlog gunicorn[19800]:     [receive, self.channel_receive], self.dispatch\r\nJan 07 11:56:32 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/channels/utils.py\", line 52, in await_many_dispatch\r\nJan 07 11:57:19 makerlog gunicorn[19800]: [2019-01-07 11:57:19 +0000] [19808] [INFO] None - \"HEAD /health HTTP/1.1\" 200\r\nJan 07 11:57:24 makerlog gunicorn[19800]: [2019-01-07 11:57:24 +0000] [19806] [INFO] None - \"WebSocket /notifications/\" [accepted]\r\nJan 07 11:57:27 makerlog gunicorn[19800]: [2019-01-07 11:57:27 +0000] [19809] [INFO] None - \"POST /apps/todoist/event/ HTTP/1.1\" 400\r\nJan 07 11:57:30 makerlog gunicorn[19800]: [2019-01-07 11:57:30 +0000] [19806] [INFO] None - \"WebSocket /notifications/\" [accepted]\r\nJan 07 11:57:31 makerlog gunicorn[19800]: [2019-01-07 11:57:31 +0000] [19808] [INFO] None - \"WebSocket /explore/stream/\" [accepted]\r\nJan 07 11:57:32 makerlog gunicorn[19800]: [2019-01-07 11:57:32 +0000] [19809] [INFO] None - \"POST /apps/todoist/event/ HTTP/1.1\" 400\r\nJan 07 11:57:46 makerlog gunicorn[19800]: [2019-01-07 11:57:46 +0000] [19808] [INFO] None - \"POST /apps/todoist/event/ HTTP/1.1\" 400\r\nJan 07 11:57:55 makerlog gunicorn[19800]: [2019-01-07 11:57:55 +0000] [19808] [INFO] None - \"POST /apps/todoist/event/ HTTP/1.1\" 400\r\nJan 07 11:58:01 makerlog gunicorn[19800]: [2019-01-07 11:58:01 +0000] [19806] [INFO] None - \"GET /health HTTP/1.1\" 200\r\nJan 07 11:58:01 makerlog gunicorn[19800]: [2019-01-07 11:58:01 +0000] [19808] [INFO] None - \"GET /explore/stream/ HTTP/1.1\" 200\r\nJan 07 11:58:01 makerlog gunicorn[19800]: [2019-01-07 11:58:01 +0000] [19809] [INFO] None - \"GET /explore/stream/2019/jan/7/ HTTP/1.1\" 200\r\nJan 07 11:58:06 makerlog gunicorn[19800]: [2019-01-07 11:58:06 +0000] [19808] [INFO] None - \"WebSocket /explore/stream/\" [accepted]\r\nJan 07 11:58:08 makerlog gunicorn[19800]: [2019-01-07 11:58:08 +0000] [19806] [INFO] None - \"POST /apps/todoist/event/ HTTP/1.1\" 400\r\nJan 07 11:58:09 makerlog gunicorn[19800]: [2019-01-07 11:58:09 +0000] [19809] [INFO] None - \"POST /apps/todoist/event/ HTTP/1.1\" 400\r\nJan 07 11:58:20 makerlog gunicorn[19800]: [2019-01-07 11:58:20 +0000] [19808] [INFO] None - \"WebSocket /explore/stream/\" [accepted]\r\nJan 07 11:58:20 makerlog gunicorn[19800]: [2019-01-07 11:58:20 +0000] [19806] [INFO] None - \"WebSocket /notifications/\" [accepted]\r\nJan 07 11:58:49 makerlog gunicorn[19800]: [2019-01-07 11:58:49 +0000] [19806] [INFO] None - \"GET /projects/408/related/ HTTP/1.1\" 200\r\nJan 07 11:59:12 makerlog gunicorn[19800]: [2019-01-07 11:59:12 +0000] [19809] [INFO] None - \"GET /health HTTP/1.1\" 200\r\nJan 07 11:59:12 makerlog gunicorn[19800]: [2019-01-07 11:59:12 +0000] [19808] [INFO] None - \"GET /products/books/ HTTP/1.1\" 200\r\nJan 07 11:59:12 makerlog gunicorn[19800]: [2019-01-07 11:59:12 +0000] [19809] [INFO] None - \"GET /products/books/stream/ HTTP/1.1\" 200\r\nJan 07 11:59:12 makerlog gunicorn[19800]: [2019-01-07 11:59:12 +0000] [19809] [INFO] None - \"GET /users/1338/ HTTP/1.1\" 200\r\nJan 07 11:59:19 makerlog gunicorn[19800]: [2019-01-07 11:59:19 +0000] [19808] [INFO] None - \"HEAD /health HTTP/1.1\" 200\r\nJan 07 12:00:02 makerlog gunicorn[19800]: [2019-01-07 12:00:02 +0000] [19806] [INFO] None - \"GET /health HTTP/1.1\" 200\r\nJan 07 12:00:02 makerlog gunicorn[19800]: [2019-01-07 12:00:02 +0000] [19808] [INFO] None - \"GET /products/use-makerlog-redesign/ HTTP/1.1\" 200\r\nJan 07 12:00:02 makerlog gunicorn[19800]: [2019-01-07 12:00:02 +0000] [19809] [INFO] None - \"GET /products/use-makerlog-redesign/stream/ HTTP/1.1\" 200\r\nJan 07 12:00:02 makerlog gunicorn[19800]: [2019-01-07 12:00:02 +0000] [19809] [INFO] None - \"GET /users/969/ HTTP/1.1\" 200\r\nJan 07 12:00:02 makerlog gunicorn[19800]: [2019-01-07 12:00:02 +0000] [19808] [INFO] None - \"GET /products/use-makerlog-redesign/2018/dec/23/ HTTP/1.1\" 200\r\nJan 07 12:00:23 makerlog gunicorn[19800]: [2019-01-07 12:00:23 +0000] [19806] [INFO] None - \"WebSocket /explore/stream/\" [accepted]\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19808] [INFO] None - \"GET /health HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19806] [INFO] None - \"OPTIONS /tasks/sync/ HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19808] [INFO] None - \"OPTIONS /me/stats/ HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19809] [INFO] None - \"OPTIONS /projects/ HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19806] [INFO] None - \"OPTIONS /notifications/ HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19808] [INFO] None - \"OPTIONS /explore/stream/ HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19809] [INFO] None - \"OPTIONS /me/following/ HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19806] [INFO] None - \"OPTIONS /products/me/ HTTP/1.1\" 200\r\nJan 07 12:00:36 makerlog gunicorn[19800]: [2019-01-07 12:00:36 +0000] [19809] [INFO] None - \"GET /tasks/sync/ HTTP/1.1\" 200\r\nJan 07 12:00:37 makerlog gunicorn[19800]: [2019-01-07 12:00:37 +0000] [19809] [INFO] None - \"GET /projects/ HTTP/1.1\" 200\r\nJan 07 12:00:37 makerlog gunicorn[19800]: [2019-01-07 12:00:37 +0000] [19808] [INFO] None - \"GET /me/stats/ HTTP/1.1\" 200\r\nJan 07 12:00:37 makerlog gunicorn[19800]: [2019-01-07 12:00:37 +0000] [19808] [INFO] None - \"GET /me/following/ HTTP/1.1\" 200\r\nJan 07 12:00:37 makerlog gunicorn[19800]: [2019-01-07 12:00:37 +0000] [19806] [INFO] None - \"GET /explore/stream/ HTTP/1.1\" 200\r\nJan 07 12:00:37 makerlog gunicorn[19800]: [2019-01-07 12:00:37 +0000] [19806] [INFO] None - \"GET /notifications/ HTTP/1.1\" 200\r\nJan 07 12:00:37 makerlog gunicorn[19800]: [2019-01-07 12:00:37 +0000] [19809] [INFO] None - \"GET /products/me/ HTTP/1.1\" 200\r\nJan 07 12:00:38 makerlog gunicorn[19800]: [2019-01-07 12:00:38 +0000] [19808] [INFO] None - \"OPTIONS /stats/world/ HTTP/1.1\" 200\r\nJan 07 12:00:38 makerlog gunicorn[19800]: [2019-01-07 12:00:38 +0000] [19806] [INFO] None - \"OPTIONS /stats/world/ HTTP/1.1\" 200\r\nJan 07 12:00:38 makerlog gunicorn[19800]: [2019-01-07 12:00:38 +0000] [19806] [INFO] None - \"OPTIONS /explore/stream/2019/jan/7/ HTTP/1.1\" 200\r\nJan 07 12:00:39 makerlog gunicorn[19800]: [2019-01-07 12:00:39 +0000] [19808] [INFO] None - \"GET /stats/world/ HTTP/1.1\" 200\r\nJan 07 12:00:39 makerlog gunicorn[19800]: [2019-01-07 12:00:39 +0000] [19809] [INFO] None - \"GET /explore/stream/2019/jan/7/ HTTP/1.1\" 200\r\nJan 07 12:00:39 makerlog gunicorn[19800]: [2019-01-07 12:00:39 +0000] [19809] [INFO] None - \"GET /stats/world/ HTTP/1.1\" 200\r\nJan 07 12:00:39 makerlog gunicorn[19800]: [2019-01-07 12:00:39 +0000] [19808] [INFO] None - \"OPTIONS /discussions/recent_questions/ HTTP/1.1\" 200\r\nJan 07 12:00:39 makerlog gunicorn[19800]: [2019-01-07 12:00:39 +0000] [19806] [INFO] None - \"GET /discussions/recent_questions/ HTTP/1.1\" 200\r\nJan 07 12:00:41 makerlog gunicorn[19800]: [2019-01-07 12:00:41 +0000] [19808] [INFO] None - \"WebSocket /notifications/\" [accepted]\r\nJan 07 12:00:42 makerlog gunicorn[19800]: [2019-01-07 12:00:42 +0000] [19806] [INFO] None - \"WebSocket /explore/stream/\" [accepted]\r\nJan 07 12:00:45 makerlog gunicorn[19800]: [2019-01-07 12:00:45 +0000] [19809] [INFO] None - \"GET /health HTTP/1.1\" 200\r\nJan 07 12:00:45 makerlog gunicorn[19800]: [2019-01-07 12:00:45 +0000] [19808] [INFO] None - \"GET /users/username/dexter/ HTTP/1.1\" 200\r\nJan 07 12:00:45 makerlog gunicorn[19800]: [2019-01-07 12:00:45 +0000] [19809] [INFO] None - \"GET /users/1008/stats/ HTTP/1.1\" 200\r\nJan 07 12:00:45 makerlog gunicorn[19800]: [2019-01-07 12:00:45 +0000] [19806] [INFO] None - \"GET /users/1008/stream/ HTTP/1.1\" 200\r\nJan 07 12:00:45 makerlog gunicorn[19800]: [2019-01-07 12:00:45 +0000] [19808] [INFO] None - \"GET /users/1008/products/ HTTP/1.1\" 200\r\nJan 07 12:00:45 makerlog gunicorn[19800]: [2019-01-07 12:00:45 +0000] [19809] [INFO] None - \"GET /users/1008/stream/2019/jan/2/ HTTP/1.1\" 200\r\nJan 07 12:00:47 makerlog gunicorn[19800]: [2019-01-07 12:00:47 +0000] [19808] [INFO] None - \"OPTIONS /projects/408/related/ HTTP/1.1\" 200\r\nJan 07 12:00:47 makerlog gunicorn[19800]: [2019-01-07 12:00:47 +0000] [19806] [INFO] None - \"GET /projects/408/related/ HTTP/1.1\" 200\r\nJan 07 12:00:49 makerlog gunicorn[19800]: [2019-01-07 12:00:49 +0000] [19808] [INFO] None - \"OPTIONS /tasks/26850/can_praise/ HTTP/1.1\" 200\r\nJan 07 12:00:49 makerlog gunicorn[19800]: [2019-01-07 12:00:49 +0000] [19806] [INFO] None - \"OPTIONS /tasks/26850/comments/ HTTP/1.1\" 200\r\nJan 07 12:00:49 makerlog gunicorn[19800]: [2019-01-07 12:00:49 +0000] [19809] [INFO] None - \"GET /tasks/26850/can_praise/ HTTP/1.1\" 200\r\nJan 07 12:00:49 makerlog gunicorn[19800]: [2019-01-07 12:00:49 +0000] [19808] [INFO] None - \"GET /tasks/26850/comments/ HTTP/1.1\" 200\r\nJan 07 12:00:53 makerlog gunicorn[19800]: [2019-01-07 12:00:53 +0000] [19809] [INFO] None - \"GET /tasks/26850/can_praise/ HTTP/1.1\" 200\r\nJan 07 12:00:59 makerlog gunicorn[19800]: [2019-01-07 12:00:59 +0000] [19808] [INFO] None - \"GET /tasks/26850/can_praise/ HTTP/1.1\" 200\r\nJan 07 12:00:59 makerlog gunicorn[19800]: [2019-01-07 12:00:59 +0000] [19809] [INFO] None - \"GET /tasks/26850/comments/ HTTP/1.1\" 200\r\nJan 07 12:01:07 makerlog gunicorn[19800]: [2019-01-07 12:01:07 +0000] [19808] [INFO] None - \"GET / HTTP/1.1\" 200\r\nJan 07 12:01:16 makerlog gunicorn[19800]: [2019-01-07 12:01:16 +0000] [19809] [INFO] None - \"GET / HTTP/1.1\" 200\r\nJan 07 12:01:19 makerlog gunicorn[19800]: [2019-01-07 12:01:19 +0000] [19809] [INFO] None - \"GET /users/ HTTP/1.1\" 200\r\nJan 07 12:01:19 makerlog gunicorn[19800]: [2019-01-07 12:01:19 +0000] [19809] [INFO] None - \"HEAD /health HTTP/1.1\" 200\r\nJan 07 12:01:19 makerlog gunicorn[19800]: [2019-01-07 12:01:19 +0000] [19809] [INFO] None - \"GET /notifications/ HTTP/1.1\" 200\r\nJan 07 12:01:20 makerlog gunicorn[19800]: [2019-01-07 12:01:20 +0000] [19809] [INFO] None - \"OPTIONS /notifications/mark_all_read/ HTTP/1.1\" 200\r\nJan 07 12:01:20 makerlog gunicorn[19800]: [2019-01-07 12:01:20 +0000] [19809] [INFO] None - \"GET /notifications/mark_all_read/ HTTP/1.1\" 200\r\nJan 07 12:01:22 makerlog gunicorn[19800]: [2019-01-07 12:01:22 +0000] [19808] [INFO] None - \"GET /v1/docs/ HTTP/1.1\" 200\r\nJan 07 12:01:23 makerlog gunicorn[19800]: [2019-01-07 12:01:23 +0000] [19809] [INFO] None - \"GET /v1/docs/ HTTP/1.1\" 200\r\nJan 07 12:01:29 makerlog gunicorn[19800]: [2019-01-07 12:01:29 +0000] [19809] [INFO] None - \"GET / HTTP/1.1\" 200\r\nJan 07 12:01:31 makerlog gunicorn[19800]: Error in data transfer\r\nJan 07 12:01:31 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 674, in transfer_data\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     message = yield from self.read_message()\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 742, in read_message\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     frame = yield from self.read_data_frame(max_size=self.max_size)\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 825, in read_data_frame\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     yield from self.write_close_frame(frame.data)\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 958, in write_close_frame\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     True, OP_CLOSE, data, _expected_state=State.CLOSING\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 919, in write_frame\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 12:01:31 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1001 (going away), no reason\r\nJan 07 12:01:31 makerlog gunicorn[19800]: Error in data transfer\r\nJan 07 12:01:31 makerlog gunicorn[19800]: Traceback (most recent call last):\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 674, in transfer_data\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     message = yield from self.read_message()\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 742, in read_message\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     frame = yield from self.read_data_frame(max_size=self.max_size)\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 825, in read_data_frame\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     yield from self.write_close_frame(frame.data)\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 958, in write_close_frame\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     True, OP_CLOSE, data, _expected_state=State.CLOSING\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 919, in write_frame\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     yield from self.ensure_open()\r\nJan 07 12:01:31 makerlog gunicorn[19800]:   File \"/home/sergio/server/lib/python3.6/site-packages/websockets/protocol.py\", line 646, in ensure_open\r\nJan 07 12:01:31 makerlog gunicorn[19800]:     ) from self.transfer_data_exc\r\nJan 07 12:01:31 makerlog gunicorn[19800]: websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1001 (going away), no reason\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/451914439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"matteing","id":7959397,"node_id":"MDQ6VXNlcjc5NTkzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/7959397?v=4","gravatar_id":"","url":"https://api.github.com/users/matteing","html_url":"https://github.com/matteing","followers_url":"https://api.github.com/users/matteing/followers","following_url":"https://api.github.com/users/matteing/following{/other_user}","gists_url":"https://api.github.com/users/matteing/gists{/gist_id}","starred_url":"https://api.github.com/users/matteing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matteing/subscriptions","organizations_url":"https://api.github.com/users/matteing/orgs","repos_url":"https://api.github.com/users/matteing/repos","events_url":"https://api.github.com/users/matteing/events{/privacy}","received_events_url":"https://api.github.com/users/matteing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/480678667","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-480678667","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":480678667,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDY3ODY2Nw==","user":{"login":"matteing","id":7959397,"node_id":"MDQ6VXNlcjc5NTkzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/7959397?v=4","gravatar_id":"","url":"https://api.github.com/users/matteing","html_url":"https://github.com/matteing","followers_url":"https://api.github.com/users/matteing/followers","following_url":"https://api.github.com/users/matteing/following{/other_user}","gists_url":"https://api.github.com/users/matteing/gists{/gist_id}","starred_url":"https://api.github.com/users/matteing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matteing/subscriptions","organizations_url":"https://api.github.com/users/matteing/orgs","repos_url":"https://api.github.com/users/matteing/repos","events_url":"https://api.github.com/users/matteing/events{/privacy}","received_events_url":"https://api.github.com/users/matteing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-08T04:24:56Z","updated_at":"2019-04-08T04:24:56Z","body":"Still facing this issue.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/480678667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"matteing","id":7959397,"node_id":"MDQ6VXNlcjc5NTkzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/7959397?v=4","gravatar_id":"","url":"https://api.github.com/users/matteing","html_url":"https://github.com/matteing","followers_url":"https://api.github.com/users/matteing/followers","following_url":"https://api.github.com/users/matteing/following{/other_user}","gists_url":"https://api.github.com/users/matteing/gists{/gist_id}","starred_url":"https://api.github.com/users/matteing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matteing/subscriptions","organizations_url":"https://api.github.com/users/matteing/orgs","repos_url":"https://api.github.com/users/matteing/repos","events_url":"https://api.github.com/users/matteing/events{/privacy}","received_events_url":"https://api.github.com/users/matteing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/480774471","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-480774471","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":480774471,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDc3NDQ3MQ==","user":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-08T10:23:23Z","updated_at":"2019-04-08T10:23:23Z","body":"Okay - can someone break this issue down to something smaller, not involving channels.\r\nAlso does the issue replicate on both websocket implementations or just one?\r\n\r\n(Use `--ws wsproto` and `--ws websockets` to switch between the two implementations.)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/480774471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/482055092","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-482055092","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":482055092,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjA1NTA5Mg==","user":{"login":"sergicolladosopra","id":5681654,"node_id":"MDQ6VXNlcjU2ODE2NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5681654?v=4","gravatar_id":"","url":"https://api.github.com/users/sergicolladosopra","html_url":"https://github.com/sergicolladosopra","followers_url":"https://api.github.com/users/sergicolladosopra/followers","following_url":"https://api.github.com/users/sergicolladosopra/following{/other_user}","gists_url":"https://api.github.com/users/sergicolladosopra/gists{/gist_id}","starred_url":"https://api.github.com/users/sergicolladosopra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergicolladosopra/subscriptions","organizations_url":"https://api.github.com/users/sergicolladosopra/orgs","repos_url":"https://api.github.com/users/sergicolladosopra/repos","events_url":"https://api.github.com/users/sergicolladosopra/events{/privacy}","received_events_url":"https://api.github.com/users/sergicolladosopra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-11T10:12:21Z","updated_at":"2019-04-11T10:17:27Z","body":"Hi, I think we have the same problem in our app:\r\n```\r\nTypeError: An asyncio.Future, a coroutine or an awaitable is required\r\nat ensure_future (/usr/local/lib/python3.6/asyncio/tasks.py:526)\r\nat <setcomp> (/usr/local/lib/python3.6/asyncio/tasks.py:311)\r\nat wait (/usr/local/lib/python3.6/asyncio/tasks.py:311)\r\nat recv (/usr/local/lib/python3.6/site-packages/websockets/protocol.py:419)\r\nat asgi_receive (/usr/local/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py:227)\r\nat await_many_dispatch (/usr/local/lib/python3.6/site-packages/channels/utils.py:51)\r\nat await_many_dispatch (/usr/local/lib/python3.6/site-packages/channels/utils.py:59)\r\nat __call__ (/usr/local/lib/python3.6/site-packages/channels/consumer.py:59)\r\nat run_asgi (/usr/local/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py:147)\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/482055092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sergicolladosopra","id":5681654,"node_id":"MDQ6VXNlcjU2ODE2NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5681654?v=4","gravatar_id":"","url":"https://api.github.com/users/sergicolladosopra","html_url":"https://github.com/sergicolladosopra","followers_url":"https://api.github.com/users/sergicolladosopra/followers","following_url":"https://api.github.com/users/sergicolladosopra/following{/other_user}","gists_url":"https://api.github.com/users/sergicolladosopra/gists{/gist_id}","starred_url":"https://api.github.com/users/sergicolladosopra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergicolladosopra/subscriptions","organizations_url":"https://api.github.com/users/sergicolladosopra/orgs","repos_url":"https://api.github.com/users/sergicolladosopra/repos","events_url":"https://api.github.com/users/sergicolladosopra/events{/privacy}","received_events_url":"https://api.github.com/users/sergicolladosopra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/482555760","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-482555760","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":482555760,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjU1NTc2MA==","user":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-12T12:27:37Z","updated_at":"2019-04-12T12:27:37Z","body":"@sergicolladosopra Okay, with Channels or something else?\r\n\r\nWhat's the smallest possible codebase someone can reduce this down too, so that I've got a good place to start digging from?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/482555760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2272290057,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjI3MjI5MDA1Nw==","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/2272290057","actor":{"login":"sergicolladosopra","id":5681654,"node_id":"MDQ6VXNlcjU2ODE2NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5681654?v=4","gravatar_id":"","url":"https://api.github.com/users/sergicolladosopra","html_url":"https://github.com/sergicolladosopra","followers_url":"https://api.github.com/users/sergicolladosopra/followers","following_url":"https://api.github.com/users/sergicolladosopra/following{/other_user}","gists_url":"https://api.github.com/users/sergicolladosopra/gists{/gist_id}","starred_url":"https://api.github.com/users/sergicolladosopra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergicolladosopra/subscriptions","organizations_url":"https://api.github.com/users/sergicolladosopra/orgs","repos_url":"https://api.github.com/users/sergicolladosopra/repos","events_url":"https://api.github.com/users/sergicolladosopra/events{/privacy}","received_events_url":"https://api.github.com/users/sergicolladosopra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-12T12:27:38Z","performed_via_github_app":null},{"id":2272290058,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyNzIyOTAwNTg=","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/2272290058","actor":{"login":"sergicolladosopra","id":5681654,"node_id":"MDQ6VXNlcjU2ODE2NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5681654?v=4","gravatar_id":"","url":"https://api.github.com/users/sergicolladosopra","html_url":"https://github.com/sergicolladosopra","followers_url":"https://api.github.com/users/sergicolladosopra/followers","following_url":"https://api.github.com/users/sergicolladosopra/following{/other_user}","gists_url":"https://api.github.com/users/sergicolladosopra/gists{/gist_id}","starred_url":"https://api.github.com/users/sergicolladosopra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergicolladosopra/subscriptions","organizations_url":"https://api.github.com/users/sergicolladosopra/orgs","repos_url":"https://api.github.com/users/sergicolladosopra/repos","events_url":"https://api.github.com/users/sergicolladosopra/events{/privacy}","received_events_url":"https://api.github.com/users/sergicolladosopra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-12T12:27:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/482893968","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-482893968","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":482893968,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4Mjg5Mzk2OA==","user":{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-13T22:10:29Z","updated_at":"2019-04-13T22:10:29Z","body":"Here is a minimal example without using django:\r\n\r\n```python\r\nclass Application:\r\n    def __init__(self, scope):\r\n        self.scope = scope\r\n\r\n    async def __call__(self, receive, send):\r\n        if self.scope[\"type\"] != \"websocket\":\r\n            return\r\n\r\n        while True:\r\n            # what for the 'websocket.connect' event.\r\n            await receive()\r\n\r\n            # Close the connection\r\n            await send({'type': 'websocket.close'})\r\n```\r\n\r\nTo test it, you have to start it with an asgi server an open a websocket connection.\r\n\r\nWith daphne:\r\n```\r\n$ daphne asgi:Application\r\n2019-04-13 23:49:51,867 INFO     Starting server at tcp:port=8000:interface=127.0.0.1\r\n2019-04-13 23:49:51,867 INFO     HTTP/2 support not enabled (install the http2 and tls Twisted extras)\r\n2019-04-13 23:49:51,867 INFO     Configuring endpoint tcp:port=8000:interface=127.0.0.1\r\n2019-04-13 23:49:51,868 INFO     Listening on TCP address 127.0.0.1:8000\r\n127.0.0.1:58152 - - [13/Apr/2019:23:50:00] \"WSCONNECTING /\" - -\r\n127.0.0.1:58152 - - [13/Apr/2019:23:50:00] \"WSREJECT /\" - -\r\n127.0.0.1:58152 - - [13/Apr/2019:23:50:00] \"WSDISCONNECT /\" - -\r\n^C2019-04-13 23:50:01,841 INFO     Killed 1 pending application instances\r\n```\r\n\r\nWith uvicorn and websockets:\r\n```\r\n$ uvicorn asgi:Application --ws websockets\r\nINFO: Started server process [23052]\r\nINFO: Waiting for application startup.\r\nINFO: Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)\r\nINFO: ('127.0.0.1', 58172) - \"WebSocket /\" 403\r\nERROR: Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/home/ossi/src/uvicorn_test/venv/lib/python3.7/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 147, in run_asgi\r\n    result = await asgi(self.asgi_receive, self.asgi_send)\r\n  File \"./asgi.py\", line 12, in __call__\r\n    await receive()\r\n  File \"/home/ossi/src/uvicorn_test/venv/lib/python3.7/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 227, in asgi_receive\r\n    data = await self.recv()\r\n  File \"/home/ossi/src/uvicorn_test/venv/lib/python3.7/site-packages/websockets/protocol.py\", line 419, in recv\r\n    return_when=asyncio.FIRST_COMPLETED,\r\n  File \"/usr/lib/python3.7/asyncio/tasks.py\", line 361, in wait\r\n    fs = {ensure_future(f, loop=loop) for f in set(fs)}\r\n  File \"/usr/lib/python3.7/asyncio/tasks.py\", line 361, in <setcomp>\r\n    fs = {ensure_future(f, loop=loop) for f in set(fs)}\r\n  File \"/usr/lib/python3.7/asyncio/tasks.py\", line 592, in ensure_future\r\n    raise TypeError('An asyncio.Future, a coroutine or an awaitable is '\r\nTypeError: An asyncio.Future, a coroutine or an awaitable is required\r\n^CINFO: Shutting down\r\nINFO: Waiting for application shutdown.\r\nINFO: Finished server process [23052]\r\n```\r\n\r\nWith uvicorn and wsproto:\r\n```\r\n$ uvicorn asgi:Application --ws wsproto\r\nINFO: Started server process [23092]\r\nINFO: Waiting for application startup.\r\nINFO: Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)\r\nINFO: ('127.0.0.1', 58178) - \"WebSocket /\" 403\r\nERROR: Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/home/ossi/src/uvicorn_test/venv/lib/python3.7/site-packages/uvicorn/protocols/websockets/wsproto_impl.py\", line 208, in run_asgi\r\n    result = await asgi(self.receive, self.send)\r\n  File \"./asgi.py\", line 15, in __call__\r\n    await send({'type': 'websocket.close'})\r\n  File \"/home/ossi/src/uvicorn_test/venv/lib/python3.7/site-packages/uvicorn/protocols/websockets/wsproto_impl.py\", line 257, in send\r\n    output = self.conn.send(msg)\r\n  File \"/home/ossi/src/uvicorn_test/venv/lib/python3.7/site-packages/wsproto/__init__.py\", line 35, in send\r\n    data += self.handshake.send(event)\r\n  File \"/home/ossi/src/uvicorn_test/venv/lib/python3.7/site-packages/wsproto/handshake.py\", line 97, in send\r\n    \"Event {} cannot be sent during the handshake\".format(event)\r\nwsproto.utilities.LocalProtocolError: Event Response(status_code=403, headers=[], http_version=b'1.1', reason=b'') cannot be sent during the handshake\r\n^CINFO: Shutting down\r\nINFO: Waiting for application shutdown.\r\nINFO: Finished server process [23092]\r\n```\r\n\r\nThe error seems to be, that the `while True:` loop does not break. But when I look into the django channels code, it seems, that django channels also does not close the loop.\r\n\r\nThe loop in django channels is here: https://github.com/django/channels/blob/03d221792e6881477911728615a6d51ec9fab73b/channels/utils.py#L45\r\n\r\nThe `close` message is send here: https://github.com/django/channels/blob/03d221792e6881477911728615a6d51ec9fab73b/channels/generic/websocket.py#L226\r\n\r\nAn exception, that could break the loop is raised when `websocket.disconnect` is handled: https://github.com/django/channels/blob/03d221792e6881477911728615a6d51ec9fab73b/channels/generic/websocket.py#L241","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/482893968/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/493432296","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-493432296","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":493432296,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MzQzMjI5Ng==","user":{"login":"mozartilize","id":26346270,"node_id":"MDQ6VXNlcjI2MzQ2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/26346270?v=4","gravatar_id":"","url":"https://api.github.com/users/mozartilize","html_url":"https://github.com/mozartilize","followers_url":"https://api.github.com/users/mozartilize/followers","following_url":"https://api.github.com/users/mozartilize/following{/other_user}","gists_url":"https://api.github.com/users/mozartilize/gists{/gist_id}","starred_url":"https://api.github.com/users/mozartilize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mozartilize/subscriptions","organizations_url":"https://api.github.com/users/mozartilize/orgs","repos_url":"https://api.github.com/users/mozartilize/repos","events_url":"https://api.github.com/users/mozartilize/events{/privacy}","received_events_url":"https://api.github.com/users/mozartilize/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-17T12:15:44Z","updated_at":"2019-05-17T15:26:45Z","body":"Channels allows to call `close()` during connection handshake in `connect()`, but in example above with wsproto it doesn't, neither does websockets protocol which doesn't handle `websocket.close` (closed_event is set) in `asgi_receive`.\r\n\r\nI took a look into [`websockets` docs](https://websockets.readthedocs.io/en/stable/design.html#opening-handshake) which says:\r\n\r\n> calls process_request() which may abort the WebSocket handshake and return a HTTP response instead; this hook only makes sense on the server side;\r\n\r\nand seems like it's implemented on the web servers and maybe also in channels' middlewares.\r\n\r\nSo calling close() when connection handshaking is not a right thing to do?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/493432296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mozartilize","id":26346270,"node_id":"MDQ6VXNlcjI2MzQ2Mjcw","avatar_url":"https://avatars.githubusercontent.com/u/26346270?v=4","gravatar_id":"","url":"https://api.github.com/users/mozartilize","html_url":"https://github.com/mozartilize","followers_url":"https://api.github.com/users/mozartilize/followers","following_url":"https://api.github.com/users/mozartilize/following{/other_user}","gists_url":"https://api.github.com/users/mozartilize/gists{/gist_id}","starred_url":"https://api.github.com/users/mozartilize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mozartilize/subscriptions","organizations_url":"https://api.github.com/users/mozartilize/orgs","repos_url":"https://api.github.com/users/mozartilize/repos","events_url":"https://api.github.com/users/mozartilize/events{/privacy}","received_events_url":"https://api.github.com/users/mozartilize/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/520247246","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-520247246","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":520247246,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDI0NzI0Ng==","user":{"login":"oTree-org","id":5423929,"node_id":"MDQ6VXNlcjU0MjM5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5423929?v=4","gravatar_id":"","url":"https://api.github.com/users/oTree-org","html_url":"https://github.com/oTree-org","followers_url":"https://api.github.com/users/oTree-org/followers","following_url":"https://api.github.com/users/oTree-org/following{/other_user}","gists_url":"https://api.github.com/users/oTree-org/gists{/gist_id}","starred_url":"https://api.github.com/users/oTree-org/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oTree-org/subscriptions","organizations_url":"https://api.github.com/users/oTree-org/orgs","repos_url":"https://api.github.com/users/oTree-org/repos","events_url":"https://api.github.com/users/oTree-org/events{/privacy}","received_events_url":"https://api.github.com/users/oTree-org/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-11T17:49:45Z","updated_at":"2020-11-19T08:27:09Z","body":"I also have this issue, using uvicorn 0.8.6 and channels 2.2.0. My channels consumers don't call ``.close()`` anywhere. I'm getting various errors whether I use `wsproto` or not. The problem doesn't occur with Daphne. The app works fine in the browser but I am concerned about all the tracebacks.\r\n\r\nIn `websockets/server.py`, the handshake stops at this line in `WebSocketServerProtocol.handshake`:\r\n\r\n```\r\n        if self.state != State.CONNECTING:\r\n            raise CancelHandshake()\r\n```\r\n\r\nAt that point, `self.state` is `State.CLOSED`. It was set to CLOSED here:\r\n\r\n```\r\n  c:\\users\\wicke\\appdata\\local\\programs\\python\\python37-32\\lib\\runpy.py(85)_run_code()\r\n-> exec(code, run_globals)\r\n  c:\\otree\\ve-channels2\\scripts\\uvicorn.exe\\__main__.py(9)<module>()\r\n-> sys.exit(main())\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\click\\core.py(764)__call__()\r\n-> return self.main(*args, **kwargs)\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\click\\core.py(717)main()\r\n-> rv = self.invoke(ctx)\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\click\\core.py(956)invoke()\r\n-> return ctx.invoke(self.callback, **ctx.params)\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\click\\core.py(555)invoke()\r\n-> return callback(*args, **kwargs)\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\uvicorn\\main.py(258)main()\r\n-> run(**kwargs)\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\uvicorn\\main.py(279)run()\r\n-> server.run()\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\uvicorn\\main.py(307)run()\r\n-> loop.run_until_complete(self.serve(sockets=sockets))\r\n  c:\\users\\wicke\\appdata\\local\\programs\\python\\python37-32\\lib\\asyncio\\base_events.py(571)run_until_complete()\r\n-> self.run_forever()\r\n  c:\\users\\wicke\\appdata\\local\\programs\\python\\python37-32\\lib\\asyncio\\base_events.py(539)run_forever()\r\n-> self._run_once()\r\n  c:\\users\\wicke\\appdata\\local\\programs\\python\\python37-32\\lib\\asyncio\\base_events.py(1775)_run_once()\r\n-> handle._run()\r\n  c:\\users\\wicke\\appdata\\local\\programs\\python\\python37-32\\lib\\asyncio\\events.py(88)_run()\r\n-> self._context.run(self._callback, *self._args)\r\n  c:\\users\\wicke\\appdata\\local\\programs\\python\\python37-32\\lib\\asyncio\\selector_events.py(913)_call_connection_lost()\r\n-> super()._call_connection_lost(exc)\r\n  c:\\users\\wicke\\appdata\\local\\programs\\python\\python37-32\\lib\\asyncio\\selector_events.py(687)_call_connection_lost()\r\n-> self._protocol.connection_lost(exc)\r\n  c:\\otree\\ve-channels2\\lib\\site-packages\\uvicorn\\protocols\\websockets\\websockets_impl.py(65)connection_lost()\r\n-> super().connection_lost(exc)\r\n> c:\\otree\\ve-channels2\\lib\\site-packages\\websockets\\protocol.py(1236)connection_lost()\r\n-> logger.debug(\"%s - state = CLOSED\", self.side)\r\n```\r\n\r\nThe `exc` variable in the above traceback is:\r\n\r\n```\r\nConnectionAbortedError(10053, 'An established connection was aborted by the software in your host machine', None, 10053, None)\r\n```\r\n\r\nI also see this:\r\n\r\n```\r\n('%s ! failing WebSocket connection in the %s state: %d %s', 'server', 'CLOSED', 1006, '[no reason]')\r\n```\r\n\r\nI tested on Linux (WSL) and I get basically the same traceback.\r\n\r\nHappy to provide any additional info to troubleshoot this.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/520247246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oTree-org","id":5423929,"node_id":"MDQ6VXNlcjU0MjM5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5423929?v=4","gravatar_id":"","url":"https://api.github.com/users/oTree-org","html_url":"https://github.com/oTree-org","followers_url":"https://api.github.com/users/oTree-org/followers","following_url":"https://api.github.com/users/oTree-org/following{/other_user}","gists_url":"https://api.github.com/users/oTree-org/gists{/gist_id}","starred_url":"https://api.github.com/users/oTree-org/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oTree-org/subscriptions","organizations_url":"https://api.github.com/users/oTree-org/orgs","repos_url":"https://api.github.com/users/oTree-org/repos","events_url":"https://api.github.com/users/oTree-org/events{/privacy}","received_events_url":"https://api.github.com/users/oTree-org/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"flbraun","id":15526835,"node_id":"MDQ6VXNlcjE1NTI2ODM1","avatar_url":"https://avatars.githubusercontent.com/u/15526835?v=4","gravatar_id":"","url":"https://api.github.com/users/flbraun","html_url":"https://github.com/flbraun","followers_url":"https://api.github.com/users/flbraun/followers","following_url":"https://api.github.com/users/flbraun/following{/other_user}","gists_url":"https://api.github.com/users/flbraun/gists{/gist_id}","starred_url":"https://api.github.com/users/flbraun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flbraun/subscriptions","organizations_url":"https://api.github.com/users/flbraun/orgs","repos_url":"https://api.github.com/users/flbraun/repos","events_url":"https://api.github.com/users/flbraun/events{/privacy}","received_events_url":"https://api.github.com/users/flbraun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T11:07:27Z","updated_at":"2019-09-19T11:07:27Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/415","repository_url":"https://api.github.com/repos/Kludex/uvicorn","labels_url":"https://api.github.com/repos/Kludex/uvicorn/issues/415/labels{/name}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/issues/415/comments","events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/415/events","html_url":"https://github.com/Kludex/uvicorn/issues/415","id":486532749,"node_id":"MDU6SXNzdWU0ODY1MzI3NDk=","number":415,"title":"TypeError: An asyncio.Future, a coroutine or an awaitable is required","user":{"login":"najamansari","id":7305605,"node_id":"MDQ6VXNlcjczMDU2MDU=","avatar_url":"https://avatars.githubusercontent.com/u/7305605?v=4","gravatar_id":"","url":"https://api.github.com/users/najamansari","html_url":"https://github.com/najamansari","followers_url":"https://api.github.com/users/najamansari/followers","following_url":"https://api.github.com/users/najamansari/following{/other_user}","gists_url":"https://api.github.com/users/najamansari/gists{/gist_id}","starred_url":"https://api.github.com/users/najamansari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/najamansari/subscriptions","organizations_url":"https://api.github.com/users/najamansari/orgs","repos_url":"https://api.github.com/users/najamansari/repos","events_url":"https://api.github.com/users/najamansari/events{/privacy}","received_events_url":"https://api.github.com/users/najamansari/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-08-28T18:11:06Z","updated_at":"2019-11-12T15:44:02Z","closed_at":"2019-11-12T15:44:02Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":92946971,"node_id":"MDEwOlJlcG9zaXRvcnk5Mjk0Njk3MQ==","name":"uvicorn","full_name":"Kludex/uvicorn","private":false,"owner":{"login":"Kludex","id":7353520,"node_id":"MDQ6VXNlcjczNTM1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7353520?v=4","gravatar_id":"","url":"https://api.github.com/users/Kludex","html_url":"https://github.com/Kludex","followers_url":"https://api.github.com/users/Kludex/followers","following_url":"https://api.github.com/users/Kludex/following{/other_user}","gists_url":"https://api.github.com/users/Kludex/gists{/gist_id}","starred_url":"https://api.github.com/users/Kludex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kludex/subscriptions","organizations_url":"https://api.github.com/users/Kludex/orgs","repos_url":"https://api.github.com/users/Kludex/repos","events_url":"https://api.github.com/users/Kludex/events{/privacy}","received_events_url":"https://api.github.com/users/Kludex/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Kludex/uvicorn","description":"An ASGI web server, for Python. 🦄","fork":false,"url":"https://api.github.com/repos/Kludex/uvicorn","forks_url":"https://api.github.com/repos/Kludex/uvicorn/forks","keys_url":"https://api.github.com/repos/Kludex/uvicorn/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Kludex/uvicorn/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Kludex/uvicorn/teams","hooks_url":"https://api.github.com/repos/Kludex/uvicorn/hooks","issue_events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/events{/number}","events_url":"https://api.github.com/repos/Kludex/uvicorn/events","assignees_url":"https://api.github.com/repos/Kludex/uvicorn/assignees{/user}","branches_url":"https://api.github.com/repos/Kludex/uvicorn/branches{/branch}","tags_url":"https://api.github.com/repos/Kludex/uvicorn/tags","blobs_url":"https://api.github.com/repos/Kludex/uvicorn/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Kludex/uvicorn/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Kludex/uvicorn/git/refs{/sha}","trees_url":"https://api.github.com/repos/Kludex/uvicorn/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Kludex/uvicorn/statuses/{sha}","languages_url":"https://api.github.com/repos/Kludex/uvicorn/languages","stargazers_url":"https://api.github.com/repos/Kludex/uvicorn/stargazers","contributors_url":"https://api.github.com/repos/Kludex/uvicorn/contributors","subscribers_url":"https://api.github.com/repos/Kludex/uvicorn/subscribers","subscription_url":"https://api.github.com/repos/Kludex/uvicorn/subscription","commits_url":"https://api.github.com/repos/Kludex/uvicorn/commits{/sha}","git_commits_url":"https://api.github.com/repos/Kludex/uvicorn/git/commits{/sha}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/comments{/number}","issue_comment_url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments{/number}","contents_url":"https://api.github.com/repos/Kludex/uvicorn/contents/{+path}","compare_url":"https://api.github.com/repos/Kludex/uvicorn/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Kludex/uvicorn/merges","archive_url":"https://api.github.com/repos/Kludex/uvicorn/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Kludex/uvicorn/downloads","issues_url":"https://api.github.com/repos/Kludex/uvicorn/issues{/number}","pulls_url":"https://api.github.com/repos/Kludex/uvicorn/pulls{/number}","milestones_url":"https://api.github.com/repos/Kludex/uvicorn/milestones{/number}","notifications_url":"https://api.github.com/repos/Kludex/uvicorn/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Kludex/uvicorn/labels{/name}","releases_url":"https://api.github.com/repos/Kludex/uvicorn/releases{/id}","deployments_url":"https://api.github.com/repos/Kludex/uvicorn/deployments","created_at":"2017-05-31T13:13:43Z","updated_at":"2025-11-09T12:06:51Z","pushed_at":"2025-11-04T07:56:24Z","git_url":"git://github.com/Kludex/uvicorn.git","ssh_url":"git@github.com:Kludex/uvicorn.git","clone_url":"https://github.com/Kludex/uvicorn.git","svn_url":"https://github.com/Kludex/uvicorn","homepage":"https://uvicorn.dev","size":3848,"stargazers_count":10037,"watchers_count":10037,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":870,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":72,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["asgi","asyncio","http","http-server","python"],"visibility":"public","forks":870,"open_issues":72,"watchers":10037,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi there,\r\n\r\nWe are using Uvicorn to serve a Django Channels based web sockets backend. I keep seeing the error below in Uvicorn's error.log:\r\n\r\n```\r\n[2019-08-28 18:08:10 +0000] [489] [ERROR] Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/redacted/env/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 146, in run_asgi\r\n    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)\r\n  File \"/redacted/env/lib/python3.6/site-packages/uvicorn/middleware/asgi2.py\", line 7, in __call__\r\n    await instance(receive, send)\r\n  File \"/redacted/env/lib/python3.6/site-packages/channels/consumer.py\", line 59, in __call__\r\n    [receive, self.channel_receive], self.dispatch\r\n  File \"/redacted/env/lib/python3.6/site-packages/channels/utils.py\", line 59, in await_many_dispatch\r\n    await task\r\n  File \"/redacted/env/lib/python3.6/site-packages/channels/utils.py\", line 51, in await_many_dispatch\r\n    result = task.result()\r\n  File \"/redacted/env/lib/python3.6/site-packages/uvicorn/protocols/websockets/websockets_impl.py\", line 226, in asgi_receive\r\n    data = await self.recv()\r\n  File \"/redacted/env/lib/python3.6/site-packages/websockets/protocol.py\", line 419, in recv\r\n    return_when=asyncio.FIRST_COMPLETED,\r\n  File \"/usr/lib/python3.6/asyncio/tasks.py\", line 311, in wait\r\n    fs = {ensure_future(f, loop=loop) for f in set(fs)}\r\n  File \"/usr/lib/python3.6/asyncio/tasks.py\", line 311, in <setcomp>\r\n    fs = {ensure_future(f, loop=loop) for f in set(fs)}\r\n  File \"/usr/lib/python3.6/asyncio/tasks.py\", line 526, in ensure_future\r\n    raise TypeError('An asyncio.Future, a coroutine or an awaitable is '\r\nTypeError: An asyncio.Future, a coroutine or an awaitable is required\r\n```\r\n\r\nI'm unable to figure out whether this issue is coming in from Uvicorn or Channels or something else. Any help would be much appreciated.","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/415/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Kludex/uvicorn/issues/415/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/544967983","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-544967983","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":544967983,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDk2Nzk4Mw==","user":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-22T13:42:03Z","updated_at":"2019-10-22T13:42:03Z","body":"The thing that would help most with progressing this would be to try to replicate the issue in a plain ASGI application, or in Starlette, or something more minimal than installing Channels.\r\n\r\nIf anyone's able to reduce the issue like that then I'd be very happy to dig into it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/544967983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/545108018","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-545108018","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":545108018,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTEwODAxOA==","user":{"login":"matteing","id":7959397,"node_id":"MDQ6VXNlcjc5NTkzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/7959397?v=4","gravatar_id":"","url":"https://api.github.com/users/matteing","html_url":"https://github.com/matteing","followers_url":"https://api.github.com/users/matteing/followers","following_url":"https://api.github.com/users/matteing/following{/other_user}","gists_url":"https://api.github.com/users/matteing/gists{/gist_id}","starred_url":"https://api.github.com/users/matteing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matteing/subscriptions","organizations_url":"https://api.github.com/users/matteing/orgs","repos_url":"https://api.github.com/users/matteing/repos","events_url":"https://api.github.com/users/matteing/events{/privacy}","received_events_url":"https://api.github.com/users/matteing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-22T19:04:32Z","updated_at":"2019-10-22T19:04:32Z","body":"> The thing that would help most with progressing this would be to try to replicate the issue in a plain ASGI application, or in Starlette, or something more minimal than installing Channels.\r\n> \r\n> If anyone's able to reduce the issue like that then I'd be very happy to dig into it.\r\n\r\nhttps://github.com/encode/uvicorn/issues/244#issuecomment-482893968","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/545108018/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"matteing","id":7959397,"node_id":"MDQ6VXNlcjc5NTkzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/7959397?v=4","gravatar_id":"","url":"https://api.github.com/users/matteing","html_url":"https://github.com/matteing","followers_url":"https://api.github.com/users/matteing/followers","following_url":"https://api.github.com/users/matteing/following{/other_user}","gists_url":"https://api.github.com/users/matteing/gists{/gist_id}","starred_url":"https://api.github.com/users/matteing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matteing/subscriptions","organizations_url":"https://api.github.com/users/matteing/orgs","repos_url":"https://api.github.com/users/matteing/repos","events_url":"https://api.github.com/users/matteing/events{/privacy}","received_events_url":"https://api.github.com/users/matteing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2795253502,"node_id":"MDEyOkxhYmVsZWRFdmVudDI3OTUyNTM1MDI=","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/2795253502","actor":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-11-13T13:19:47Z","label":{"name":"websockets","color":"a4f2f4"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/564749499","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-564749499","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":564749499,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDc0OTQ5OQ==","user":{"login":"bjornSayers","id":7513756,"node_id":"MDQ6VXNlcjc1MTM3NTY=","avatar_url":"https://avatars.githubusercontent.com/u/7513756?v=4","gravatar_id":"","url":"https://api.github.com/users/bjornSayers","html_url":"https://github.com/bjornSayers","followers_url":"https://api.github.com/users/bjornSayers/followers","following_url":"https://api.github.com/users/bjornSayers/following{/other_user}","gists_url":"https://api.github.com/users/bjornSayers/gists{/gist_id}","starred_url":"https://api.github.com/users/bjornSayers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bjornSayers/subscriptions","organizations_url":"https://api.github.com/users/bjornSayers/orgs","repos_url":"https://api.github.com/users/bjornSayers/repos","events_url":"https://api.github.com/users/bjornSayers/events{/privacy}","received_events_url":"https://api.github.com/users/bjornSayers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-11T21:52:04Z","updated_at":"2019-12-11T21:52:04Z","body":"Is there any update or workaround for this?  I can post more info about what I'm seeing, but it looks like the connection closes and things are fine browser side, but if I call .close() in the .connect() function I end up with type errors in the logs.  Having stack traces in the logs is obviously not ideal, but it would help to clarify that's the extent of the issue...","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/564749499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bjornSayers","id":7513756,"node_id":"MDQ6VXNlcjc1MTM3NTY=","avatar_url":"https://avatars.githubusercontent.com/u/7513756?v=4","gravatar_id":"","url":"https://api.github.com/users/bjornSayers","html_url":"https://github.com/bjornSayers","followers_url":"https://api.github.com/users/bjornSayers/followers","following_url":"https://api.github.com/users/bjornSayers/following{/other_user}","gists_url":"https://api.github.com/users/bjornSayers/gists{/gist_id}","starred_url":"https://api.github.com/users/bjornSayers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bjornSayers/subscriptions","organizations_url":"https://api.github.com/users/bjornSayers/orgs","repos_url":"https://api.github.com/users/bjornSayers/repos","events_url":"https://api.github.com/users/bjornSayers/events{/privacy}","received_events_url":"https://api.github.com/users/bjornSayers/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/565754154","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-565754154","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":565754154,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTc1NDE1NA==","user":{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-14T21:18:55Z","updated_at":"2019-12-14T21:18:55Z","body":"My workaround is to open the connection and close it immediately.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/565754154/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3462881201,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0NjI4ODEyMDE=","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/3462881201","actor":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c2c78e5bb5257e78d42dbf59249245b8cb66add0","commit_url":"https://api.github.com/repos/adamhooper/uvicorn/commits/c2c78e5bb5257e78d42dbf59249245b8cb66add0","created_at":"2020-06-19T15:11:48Z","performed_via_github_app":null},{"actor":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-19T15:12:11Z","updated_at":"2020-06-19T15:12:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/704","repository_url":"https://api.github.com/repos/Kludex/uvicorn","labels_url":"https://api.github.com/repos/Kludex/uvicorn/issues/704/labels{/name}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/issues/704/comments","events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/704/events","html_url":"https://github.com/Kludex/uvicorn/pull/704","id":642041905,"node_id":"MDExOlB1bGxSZXF1ZXN0NDM3MTU1MzQw","number":704,"title":"Fix failures when ASGI app rejects a connection during handshake","user":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":616811004,"node_id":"MDU6TGFiZWw2MTY4MTEwMDQ=","url":"https://api.github.com/repos/Kludex/uvicorn/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2020-06-19T15:12:11Z","updated_at":"2021-11-21T19:58:59Z","closed_at":"2020-12-09T17:06:15Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":92946971,"node_id":"MDEwOlJlcG9zaXRvcnk5Mjk0Njk3MQ==","name":"uvicorn","full_name":"Kludex/uvicorn","private":false,"owner":{"login":"Kludex","id":7353520,"node_id":"MDQ6VXNlcjczNTM1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7353520?v=4","gravatar_id":"","url":"https://api.github.com/users/Kludex","html_url":"https://github.com/Kludex","followers_url":"https://api.github.com/users/Kludex/followers","following_url":"https://api.github.com/users/Kludex/following{/other_user}","gists_url":"https://api.github.com/users/Kludex/gists{/gist_id}","starred_url":"https://api.github.com/users/Kludex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kludex/subscriptions","organizations_url":"https://api.github.com/users/Kludex/orgs","repos_url":"https://api.github.com/users/Kludex/repos","events_url":"https://api.github.com/users/Kludex/events{/privacy}","received_events_url":"https://api.github.com/users/Kludex/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Kludex/uvicorn","description":"An ASGI web server, for Python. 🦄","fork":false,"url":"https://api.github.com/repos/Kludex/uvicorn","forks_url":"https://api.github.com/repos/Kludex/uvicorn/forks","keys_url":"https://api.github.com/repos/Kludex/uvicorn/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Kludex/uvicorn/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Kludex/uvicorn/teams","hooks_url":"https://api.github.com/repos/Kludex/uvicorn/hooks","issue_events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/events{/number}","events_url":"https://api.github.com/repos/Kludex/uvicorn/events","assignees_url":"https://api.github.com/repos/Kludex/uvicorn/assignees{/user}","branches_url":"https://api.github.com/repos/Kludex/uvicorn/branches{/branch}","tags_url":"https://api.github.com/repos/Kludex/uvicorn/tags","blobs_url":"https://api.github.com/repos/Kludex/uvicorn/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Kludex/uvicorn/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Kludex/uvicorn/git/refs{/sha}","trees_url":"https://api.github.com/repos/Kludex/uvicorn/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Kludex/uvicorn/statuses/{sha}","languages_url":"https://api.github.com/repos/Kludex/uvicorn/languages","stargazers_url":"https://api.github.com/repos/Kludex/uvicorn/stargazers","contributors_url":"https://api.github.com/repos/Kludex/uvicorn/contributors","subscribers_url":"https://api.github.com/repos/Kludex/uvicorn/subscribers","subscription_url":"https://api.github.com/repos/Kludex/uvicorn/subscription","commits_url":"https://api.github.com/repos/Kludex/uvicorn/commits{/sha}","git_commits_url":"https://api.github.com/repos/Kludex/uvicorn/git/commits{/sha}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/comments{/number}","issue_comment_url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments{/number}","contents_url":"https://api.github.com/repos/Kludex/uvicorn/contents/{+path}","compare_url":"https://api.github.com/repos/Kludex/uvicorn/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Kludex/uvicorn/merges","archive_url":"https://api.github.com/repos/Kludex/uvicorn/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Kludex/uvicorn/downloads","issues_url":"https://api.github.com/repos/Kludex/uvicorn/issues{/number}","pulls_url":"https://api.github.com/repos/Kludex/uvicorn/pulls{/number}","milestones_url":"https://api.github.com/repos/Kludex/uvicorn/milestones{/number}","notifications_url":"https://api.github.com/repos/Kludex/uvicorn/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Kludex/uvicorn/labels{/name}","releases_url":"https://api.github.com/repos/Kludex/uvicorn/releases{/id}","deployments_url":"https://api.github.com/repos/Kludex/uvicorn/deployments","created_at":"2017-05-31T13:13:43Z","updated_at":"2025-11-09T12:06:51Z","pushed_at":"2025-11-04T07:56:24Z","git_url":"git://github.com/Kludex/uvicorn.git","ssh_url":"git@github.com:Kludex/uvicorn.git","clone_url":"https://github.com/Kludex/uvicorn.git","svn_url":"https://github.com/Kludex/uvicorn","homepage":"https://uvicorn.dev","size":3848,"stargazers_count":10037,"watchers_count":10037,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":870,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":72,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["asgi","asyncio","http","http-server","python"],"visibility":"public","forks":870,"open_issues":72,"watchers":10037,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/Kludex/uvicorn/pulls/704","html_url":"https://github.com/Kludex/uvicorn/pull/704","diff_url":"https://github.com/Kludex/uvicorn/pull/704.diff","patch_url":"https://github.com/Kludex/uvicorn/pull/704.patch","merged_at":"2020-12-09T17:06:15Z"},"body":"Fixes #244. The unit test already existed, but it logged exceptions that\r\nweren't being noticed.\r\n\r\n* websockets_impl: `transfer_data_task` is unset if the handshake fails, so we can't call recv().\r\n* wsproto_impl: `h11.Reject` is invalid during handshake; send `RejectConnection` instead.","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/704/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":3},"timeline_url":"https://api.github.com/repos/Kludex/uvicorn/issues/704/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/646700612","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-646700612","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":646700612,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjcwMDYxMg==","user":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-19T15:34:14Z","updated_at":"2020-06-19T15:34:28Z","body":"Turns out this error was being logged -- and ignored -- in the unit-test suite already.\r\n\r\nI'm not 100% confident in my reading of the [ASGI-to-websockets spec](https://asgi.readthedocs.io/en/latest/specs/www.html). The _Websockets_ spec (as cited in the `websockets` codebase) suggests it's wrong to call `recv()` before a successful handshake -- which is why this stack trace is logged. But the _ASGI_ spec doesn't say anything.\r\n\r\nFor all I know, all real-world ASGI applications call `recv()` before the handshakes completes, whether that's ideal or not. So my pull request [#704] makes `recv()` return an error message -- the same one that would be returned after unexpected disconnect.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/646700612/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3462966454,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0NjI5NjY0NTQ=","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/3462966454","actor":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f608081aa13c7148285fe6ae3e7373b932c733ce","commit_url":"https://api.github.com/repos/adamhooper/uvicorn/commits/f608081aa13c7148285fe6ae3e7373b932c733ce","created_at":"2020-06-19T15:35:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/689056234","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-689056234","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":689056234,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTA1NjIzNA==","user":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T18:26:52Z","updated_at":"2020-09-08T18:26:52Z","body":"> If anyone's able to reduce the issue like that then I'd be very happy to dig into it.\r\n\r\n@tomchristie ping? I have reduced the issue by enabling logging in Uvicorn's own test suite. I also submitted pull request #704 with a sketch of a fix. Are you still keen to dig into it? :)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/689056234/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3742269613,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzc0MjI2OTYxMw==","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/3742269613","actor":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-08T18:26:52Z","performed_via_github_app":null},{"id":3742269614,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM3NDIyNjk2MTQ=","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/3742269614","actor":{"login":"lovelydinosaur","id":647359,"node_id":"MDQ6VXNlcjY0NzM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/647359?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelydinosaur","html_url":"https://github.com/lovelydinosaur","followers_url":"https://api.github.com/users/lovelydinosaur/followers","following_url":"https://api.github.com/users/lovelydinosaur/following{/other_user}","gists_url":"https://api.github.com/users/lovelydinosaur/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelydinosaur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelydinosaur/subscriptions","organizations_url":"https://api.github.com/users/lovelydinosaur/orgs","repos_url":"https://api.github.com/users/lovelydinosaur/repos","events_url":"https://api.github.com/users/lovelydinosaur/events{/privacy}","received_events_url":"https://api.github.com/users/lovelydinosaur/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-08T18:26:52Z","performed_via_github_app":null},{"id":3751100950,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM3NTExMDA5NTA=","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/3751100950","actor":{"login":"ostcar","id":977937,"node_id":"MDQ6VXNlcjk3NzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/977937?v=4","gravatar_id":"","url":"https://api.github.com/users/ostcar","html_url":"https://github.com/ostcar","followers_url":"https://api.github.com/users/ostcar/followers","following_url":"https://api.github.com/users/ostcar/following{/other_user}","gists_url":"https://api.github.com/users/ostcar/gists{/gist_id}","starred_url":"https://api.github.com/users/ostcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostcar/subscriptions","organizations_url":"https://api.github.com/users/ostcar/orgs","repos_url":"https://api.github.com/users/ostcar/repos","events_url":"https://api.github.com/users/ostcar/events{/privacy}","received_events_url":"https://api.github.com/users/ostcar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-10T13:37:40Z","performed_via_github_app":null},{"actor":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-16T19:00:33Z","updated_at":"2020-09-16T19:00:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/596","repository_url":"https://api.github.com/repos/Kludex/uvicorn","labels_url":"https://api.github.com/repos/Kludex/uvicorn/issues/596/labels{/name}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/issues/596/comments","events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/596/events","html_url":"https://github.com/Kludex/uvicorn/issues/596","id":585441129,"node_id":"MDU6SXNzdWU1ODU0NDExMjk=","number":596,"title":"Handshaking may not be completed yet at `shutdown` in wsproto impl","user":{"login":"MisLink","id":8280169,"node_id":"MDQ6VXNlcjgyODAxNjk=","avatar_url":"https://avatars.githubusercontent.com/u/8280169?v=4","gravatar_id":"","url":"https://api.github.com/users/MisLink","html_url":"https://github.com/MisLink","followers_url":"https://api.github.com/users/MisLink/followers","following_url":"https://api.github.com/users/MisLink/following{/other_user}","gists_url":"https://api.github.com/users/MisLink/gists{/gist_id}","starred_url":"https://api.github.com/users/MisLink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MisLink/subscriptions","organizations_url":"https://api.github.com/users/MisLink/orgs","repos_url":"https://api.github.com/users/MisLink/repos","events_url":"https://api.github.com/users/MisLink/events{/privacy}","received_events_url":"https://api.github.com/users/MisLink/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":616811004,"node_id":"MDU6TGFiZWw2MTY4MTEwMDQ=","url":"https://api.github.com/repos/Kludex/uvicorn/labels/bug","name":"bug","color":"ee0701","default":true,"description":null},{"id":1674450491,"node_id":"MDU6TGFiZWwxNjc0NDUwNDkx","url":"https://api.github.com/repos/Kludex/uvicorn/labels/websockets","name":"websockets","color":"a4f2f4","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/Kludex/uvicorn/milestones/8","html_url":"https://github.com/Kludex/uvicorn/milestone/8","labels_url":"https://api.github.com/repos/Kludex/uvicorn/milestones/8/labels","id":7949053,"node_id":"MI_kwDOBYpCG84AeUr9","number":8,"title":"Version 0.20.0","description":"","creator":{"login":"Kludex","id":7353520,"node_id":"MDQ6VXNlcjczNTM1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7353520?v=4","gravatar_id":"","url":"https://api.github.com/users/Kludex","html_url":"https://github.com/Kludex","followers_url":"https://api.github.com/users/Kludex/followers","following_url":"https://api.github.com/users/Kludex/following{/other_user}","gists_url":"https://api.github.com/users/Kludex/gists{/gist_id}","starred_url":"https://api.github.com/users/Kludex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kludex/subscriptions","organizations_url":"https://api.github.com/users/Kludex/orgs","repos_url":"https://api.github.com/users/Kludex/repos","events_url":"https://api.github.com/users/Kludex/events{/privacy}","received_events_url":"https://api.github.com/users/Kludex/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":17,"state":"closed","created_at":"2022-05-06T05:16:09Z","updated_at":"2023-01-06T12:07:23Z","due_on":null,"closed_at":"2022-11-20T12:47:47Z"},"comments":9,"created_at":"2020-03-21T06:27:59Z","updated_at":"2022-10-31T11:06:50Z","closed_at":"2022-10-31T11:06:50Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":92946971,"node_id":"MDEwOlJlcG9zaXRvcnk5Mjk0Njk3MQ==","name":"uvicorn","full_name":"Kludex/uvicorn","private":false,"owner":{"login":"Kludex","id":7353520,"node_id":"MDQ6VXNlcjczNTM1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7353520?v=4","gravatar_id":"","url":"https://api.github.com/users/Kludex","html_url":"https://github.com/Kludex","followers_url":"https://api.github.com/users/Kludex/followers","following_url":"https://api.github.com/users/Kludex/following{/other_user}","gists_url":"https://api.github.com/users/Kludex/gists{/gist_id}","starred_url":"https://api.github.com/users/Kludex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kludex/subscriptions","organizations_url":"https://api.github.com/users/Kludex/orgs","repos_url":"https://api.github.com/users/Kludex/repos","events_url":"https://api.github.com/users/Kludex/events{/privacy}","received_events_url":"https://api.github.com/users/Kludex/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Kludex/uvicorn","description":"An ASGI web server, for Python. 🦄","fork":false,"url":"https://api.github.com/repos/Kludex/uvicorn","forks_url":"https://api.github.com/repos/Kludex/uvicorn/forks","keys_url":"https://api.github.com/repos/Kludex/uvicorn/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Kludex/uvicorn/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Kludex/uvicorn/teams","hooks_url":"https://api.github.com/repos/Kludex/uvicorn/hooks","issue_events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/events{/number}","events_url":"https://api.github.com/repos/Kludex/uvicorn/events","assignees_url":"https://api.github.com/repos/Kludex/uvicorn/assignees{/user}","branches_url":"https://api.github.com/repos/Kludex/uvicorn/branches{/branch}","tags_url":"https://api.github.com/repos/Kludex/uvicorn/tags","blobs_url":"https://api.github.com/repos/Kludex/uvicorn/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Kludex/uvicorn/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Kludex/uvicorn/git/refs{/sha}","trees_url":"https://api.github.com/repos/Kludex/uvicorn/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Kludex/uvicorn/statuses/{sha}","languages_url":"https://api.github.com/repos/Kludex/uvicorn/languages","stargazers_url":"https://api.github.com/repos/Kludex/uvicorn/stargazers","contributors_url":"https://api.github.com/repos/Kludex/uvicorn/contributors","subscribers_url":"https://api.github.com/repos/Kludex/uvicorn/subscribers","subscription_url":"https://api.github.com/repos/Kludex/uvicorn/subscription","commits_url":"https://api.github.com/repos/Kludex/uvicorn/commits{/sha}","git_commits_url":"https://api.github.com/repos/Kludex/uvicorn/git/commits{/sha}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/comments{/number}","issue_comment_url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments{/number}","contents_url":"https://api.github.com/repos/Kludex/uvicorn/contents/{+path}","compare_url":"https://api.github.com/repos/Kludex/uvicorn/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Kludex/uvicorn/merges","archive_url":"https://api.github.com/repos/Kludex/uvicorn/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Kludex/uvicorn/downloads","issues_url":"https://api.github.com/repos/Kludex/uvicorn/issues{/number}","pulls_url":"https://api.github.com/repos/Kludex/uvicorn/pulls{/number}","milestones_url":"https://api.github.com/repos/Kludex/uvicorn/milestones{/number}","notifications_url":"https://api.github.com/repos/Kludex/uvicorn/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Kludex/uvicorn/labels{/name}","releases_url":"https://api.github.com/repos/Kludex/uvicorn/releases{/id}","deployments_url":"https://api.github.com/repos/Kludex/uvicorn/deployments","created_at":"2017-05-31T13:13:43Z","updated_at":"2025-11-09T12:06:51Z","pushed_at":"2025-11-04T07:56:24Z","git_url":"git://github.com/Kludex/uvicorn.git","ssh_url":"git@github.com:Kludex/uvicorn.git","clone_url":"https://github.com/Kludex/uvicorn.git","svn_url":"https://github.com/Kludex/uvicorn","homepage":"https://uvicorn.dev","size":3848,"stargazers_count":10037,"watchers_count":10037,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":870,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":72,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["asgi","asyncio","http","http-server","python"],"visibility":"public","forks":870,"open_issues":72,"watchers":10037,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Traceback:\r\n```\r\nLocalProtocolError: Event CloseConnection(code=1012, reason=None) cannot be sent during the handshake\r\n  File \"gunicorn/arbiter.py\", line 583, in spawn_worker\r\n    worker.init_process()\r\n  File \"uvicorn/workers.py\", line 57, in init_process\r\n    super(UvicornWorker, self).init_process()\r\n  File \"gunicorn/workers/base.py\", line 140, in init_process\r\n    self.run()\r\n  File \"uvicorn/workers.py\", line 66, in run\r\n    loop.run_until_complete(server.serve(sockets=self.sockets))\r\n  File \"uvloop/loop.pyx\", line 1456, in uvloop.loop.Loop.run_until_complete\r\n  File \"uvicorn/main.py\", line 403, in serve\r\n    await self.shutdown(sockets=sockets)\r\n  File \"uvicorn/main.py\", line 539, in shutdown\r\n    connection.shutdown()\r\n  File \"uvicorn/protocols/websockets/wsproto_impl.py\", line 115, in shutdown\r\n    output = self.conn.send(wsproto.events.CloseConnection(code=1012))\r\n  File \"__init__.py\", line 61, in send\r\n    data += self.handshake.send(event)\r\n  File \"wsproto/handshake.py\", line 101, in send\r\n    \"Event {} cannot be sent during the handshake\".format(event)\r\n```","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/596/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Kludex/uvicorn/issues/596/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":3816328687,"node_id":"MDEyOkxhYmVsZWRFdmVudDM4MTYzMjg2ODc=","url":"https://api.github.com/repos/Kludex/uvicorn/issues/events/3816328687","actor":{"login":"florimondmanca","id":15911462,"node_id":"MDQ6VXNlcjE1OTExNDYy","avatar_url":"https://avatars.githubusercontent.com/u/15911462?v=4","gravatar_id":"","url":"https://api.github.com/users/florimondmanca","html_url":"https://github.com/florimondmanca","followers_url":"https://api.github.com/users/florimondmanca/followers","following_url":"https://api.github.com/users/florimondmanca/following{/other_user}","gists_url":"https://api.github.com/users/florimondmanca/gists{/gist_id}","starred_url":"https://api.github.com/users/florimondmanca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/florimondmanca/subscriptions","organizations_url":"https://api.github.com/users/florimondmanca/orgs","repos_url":"https://api.github.com/users/florimondmanca/repos","events_url":"https://api.github.com/users/florimondmanca/events{/privacy}","received_events_url":"https://api.github.com/users/florimondmanca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-09-28T20:25:10Z","label":{"name":"bug","color":"ee0701"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/716587585","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-716587585","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":716587585,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjU4NzU4NQ==","user":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T14:34:57Z","updated_at":"2020-10-26T14:34:57Z","body":"Is there any way at all I can be of any more help? I've helped diagnose, I've authored a pull request, I've written helpful notes on all issues I could find that seemed relevant. I'm doing my best, and I'm prepared to do better. Please direct me.\r\n\r\nOur project experiences this stack trace >35,000 times per day. I worry that _real, as-yet unknown_ errors are hiding among all those duplicates.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/716587585/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adamhooper","id":10812,"node_id":"MDQ6VXNlcjEwODEy","avatar_url":"https://avatars.githubusercontent.com/u/10812?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhooper","html_url":"https://github.com/adamhooper","followers_url":"https://api.github.com/users/adamhooper/followers","following_url":"https://api.github.com/users/adamhooper/following{/other_user}","gists_url":"https://api.github.com/users/adamhooper/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhooper/subscriptions","organizations_url":"https://api.github.com/users/adamhooper/orgs","repos_url":"https://api.github.com/users/adamhooper/repos","events_url":"https://api.github.com/users/adamhooper/events{/privacy}","received_events_url":"https://api.github.com/users/adamhooper/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"oTree-org","id":5423929,"node_id":"MDQ6VXNlcjU0MjM5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5423929?v=4","gravatar_id":"","url":"https://api.github.com/users/oTree-org","html_url":"https://github.com/oTree-org","followers_url":"https://api.github.com/users/oTree-org/followers","following_url":"https://api.github.com/users/oTree-org/following{/other_user}","gists_url":"https://api.github.com/users/oTree-org/gists{/gist_id}","starred_url":"https://api.github.com/users/oTree-org/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oTree-org/subscriptions","organizations_url":"https://api.github.com/users/oTree-org/orgs","repos_url":"https://api.github.com/users/oTree-org/repos","events_url":"https://api.github.com/users/oTree-org/events{/privacy}","received_events_url":"https://api.github.com/users/oTree-org/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-21T03:08:20Z","updated_at":"2020-11-21T03:08:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/757","repository_url":"https://api.github.com/repos/Kludex/uvicorn","labels_url":"https://api.github.com/repos/Kludex/uvicorn/issues/757/labels{/name}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/issues/757/comments","events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/757/events","html_url":"https://github.com/Kludex/uvicorn/issues/757","id":680056829,"node_id":"MDU6SXNzdWU2ODAwNTY4Mjk=","number":757,"title":"ConnectionClosedError raised from websockets library","user":{"login":"stefanw","id":78356,"node_id":"MDQ6VXNlcjc4MzU2","avatar_url":"https://avatars.githubusercontent.com/u/78356?v=4","gravatar_id":"","url":"https://api.github.com/users/stefanw","html_url":"https://github.com/stefanw","followers_url":"https://api.github.com/users/stefanw/followers","following_url":"https://api.github.com/users/stefanw/following{/other_user}","gists_url":"https://api.github.com/users/stefanw/gists{/gist_id}","starred_url":"https://api.github.com/users/stefanw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stefanw/subscriptions","organizations_url":"https://api.github.com/users/stefanw/orgs","repos_url":"https://api.github.com/users/stefanw/repos","events_url":"https://api.github.com/users/stefanw/events{/privacy}","received_events_url":"https://api.github.com/users/stefanw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":616811004,"node_id":"MDU6TGFiZWw2MTY4MTEwMDQ=","url":"https://api.github.com/repos/Kludex/uvicorn/labels/bug","name":"bug","color":"ee0701","default":true,"description":null},{"id":1674450491,"node_id":"MDU6TGFiZWwxNjc0NDUwNDkx","url":"https://api.github.com/repos/Kludex/uvicorn/labels/websockets","name":"websockets","color":"a4f2f4","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-08-17T08:42:56Z","updated_at":"2022-10-29T18:04:28Z","closed_at":"2022-10-29T18:04:28Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":92946971,"node_id":"MDEwOlJlcG9zaXRvcnk5Mjk0Njk3MQ==","name":"uvicorn","full_name":"Kludex/uvicorn","private":false,"owner":{"login":"Kludex","id":7353520,"node_id":"MDQ6VXNlcjczNTM1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7353520?v=4","gravatar_id":"","url":"https://api.github.com/users/Kludex","html_url":"https://github.com/Kludex","followers_url":"https://api.github.com/users/Kludex/followers","following_url":"https://api.github.com/users/Kludex/following{/other_user}","gists_url":"https://api.github.com/users/Kludex/gists{/gist_id}","starred_url":"https://api.github.com/users/Kludex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kludex/subscriptions","organizations_url":"https://api.github.com/users/Kludex/orgs","repos_url":"https://api.github.com/users/Kludex/repos","events_url":"https://api.github.com/users/Kludex/events{/privacy}","received_events_url":"https://api.github.com/users/Kludex/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Kludex/uvicorn","description":"An ASGI web server, for Python. 🦄","fork":false,"url":"https://api.github.com/repos/Kludex/uvicorn","forks_url":"https://api.github.com/repos/Kludex/uvicorn/forks","keys_url":"https://api.github.com/repos/Kludex/uvicorn/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Kludex/uvicorn/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Kludex/uvicorn/teams","hooks_url":"https://api.github.com/repos/Kludex/uvicorn/hooks","issue_events_url":"https://api.github.com/repos/Kludex/uvicorn/issues/events{/number}","events_url":"https://api.github.com/repos/Kludex/uvicorn/events","assignees_url":"https://api.github.com/repos/Kludex/uvicorn/assignees{/user}","branches_url":"https://api.github.com/repos/Kludex/uvicorn/branches{/branch}","tags_url":"https://api.github.com/repos/Kludex/uvicorn/tags","blobs_url":"https://api.github.com/repos/Kludex/uvicorn/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Kludex/uvicorn/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Kludex/uvicorn/git/refs{/sha}","trees_url":"https://api.github.com/repos/Kludex/uvicorn/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Kludex/uvicorn/statuses/{sha}","languages_url":"https://api.github.com/repos/Kludex/uvicorn/languages","stargazers_url":"https://api.github.com/repos/Kludex/uvicorn/stargazers","contributors_url":"https://api.github.com/repos/Kludex/uvicorn/contributors","subscribers_url":"https://api.github.com/repos/Kludex/uvicorn/subscribers","subscription_url":"https://api.github.com/repos/Kludex/uvicorn/subscription","commits_url":"https://api.github.com/repos/Kludex/uvicorn/commits{/sha}","git_commits_url":"https://api.github.com/repos/Kludex/uvicorn/git/commits{/sha}","comments_url":"https://api.github.com/repos/Kludex/uvicorn/comments{/number}","issue_comment_url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments{/number}","contents_url":"https://api.github.com/repos/Kludex/uvicorn/contents/{+path}","compare_url":"https://api.github.com/repos/Kludex/uvicorn/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Kludex/uvicorn/merges","archive_url":"https://api.github.com/repos/Kludex/uvicorn/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Kludex/uvicorn/downloads","issues_url":"https://api.github.com/repos/Kludex/uvicorn/issues{/number}","pulls_url":"https://api.github.com/repos/Kludex/uvicorn/pulls{/number}","milestones_url":"https://api.github.com/repos/Kludex/uvicorn/milestones{/number}","notifications_url":"https://api.github.com/repos/Kludex/uvicorn/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Kludex/uvicorn/labels{/name}","releases_url":"https://api.github.com/repos/Kludex/uvicorn/releases{/id}","deployments_url":"https://api.github.com/repos/Kludex/uvicorn/deployments","created_at":"2017-05-31T13:13:43Z","updated_at":"2025-11-09T12:06:51Z","pushed_at":"2025-11-04T07:56:24Z","git_url":"git://github.com/Kludex/uvicorn.git","ssh_url":"git@github.com:Kludex/uvicorn.git","clone_url":"https://github.com/Kludex/uvicorn.git","svn_url":"https://github.com/Kludex/uvicorn","homepage":"https://uvicorn.dev","size":3848,"stargazers_count":10037,"watchers_count":10037,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":870,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":72,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["asgi","asyncio","http","http-server","python"],"visibility":"public","forks":870,"open_issues":72,"watchers":10037,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checklist\r\n\r\n<!-- Please make sure you check all these items before submitting your bug report. -->\r\n\r\n- [x] The bug is reproducible against the latest release and/or `master`.\r\n- [x] There are no similar issues or pull requests to fix it yet.\r\n\r\n### Describe the bug\r\n\r\nI'm running a Django project with channels and uvicorn (as a gunicorn worker).\r\n\r\nOccasionally, when the server tries to send a message and the client has disconnected improperly, the following exception is raised from the `websockets` library:\r\n\r\n```\r\n...\r\n  File \"channels/consumer.py\", line 81, in send\r\n    await self.base_send(message)\r\n  File \"channels/sessions.py\", line 236, in send\r\n    return await self.real_send(message)\r\n  File \"uvicorn/protocols/websockets/websockets_impl.py\", line 212, in asgi_send\r\n    await self.send(data)\r\n  File \"websockets/protocol.py\", line 555, in send\r\n    await self.ensure_open()\r\n  File \"websockets/protocol.py\", line 812, in ensure_open\r\n    raise self.connection_closed_exc()\r\nConnectionClosedError\r\n```\r\n(full traceback under debugging below)\r\n\r\n### Expected behavior\r\n\r\nAs a user of channels, I expect not to be required to catch these lower-level exceptions in my message sending code (right? I'm a bit unsure about this). I would expect uvicorn to handle this exception from `websockets`.\r\n\r\n### Actual behavior\r\n\r\nI have to guard my websocket sending code against exceptions thrown by an implementation detail of the underlying ASGI server. I'm running the daphne ASGI server in development, so this exception handling is unexpected.\r\n\r\n### Debugging material\r\n\r\n\r\n<details>\r\n<summary>Full traceback</summary>\r\n\r\n```\r\nCancelledError: null\r\n  File \"websockets/protocol.py\", line 827, in transfer_data\r\n    message = await self.read_message()\r\n  File \"websockets/protocol.py\", line 895, in read_message\r\n    frame = await self.read_data_frame(max_size=self.max_size)\r\n  File \"websockets/protocol.py\", line 971, in read_data_frame\r\n    frame = await self.read_frame(max_size)\r\n  File \"websockets/protocol.py\", line 1051, in read_frame\r\n    extensions=self.extensions,\r\n  File \"websockets/framing.py\", line 105, in read\r\n    data = await reader(2)\r\n  File \"asyncio/streams.py\", line 674, in readexactly\r\n    yield from self._wait_for_data('readexactly')\r\n  File \"asyncio/streams.py\", line 464, in _wait_for_data\r\n    yield from self._waiter\r\n\r\nConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason\r\n  File \"uvicorn/protocols/websockets/websockets_impl.py\", line 154, in run_asgi\r\n    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)\r\n  File \"uvicorn/middleware/proxy_headers.py\", line 45, in __call__\r\n    return await self.app(scope, receive, send)\r\n  File \"uvicorn/middleware/asgi2.py\", line 7, in __call__\r\n    await instance(receive, send)\r\n  File \"channels/sessions.py\", line 183, in __call__\r\n    return await self.inner(receive, self.send)\r\n  File \"channels/middleware.py\", line 41, in coroutine_call\r\n    await inner_instance(receive, send)\r\n  File \"channels/consumer.py\", line 59, in __call__\r\n    [receive, self.channel_receive], self.dispatch\r\n  File \"channels/utils.py\", line 51, in await_many_dispatch\r\n    await dispatch(result)\r\n  File \"channels/consumer.py\", line 73, in dispatch\r\n    await handler(message)\r\n  File \".../consumers.py\", line 63, in userlist\r\n    'user': event['user']\r\n  File \"channels/generic/websocket.py\", line 273, in send_json\r\n    await super().send(text_data=await self.encode_json(content), close=close)\r\n  File \"channels/generic/websocket.py\", line 211, in send\r\n    await super().send({\"type\": \"websocket.send\", \"text\": text_data})\r\n  File \"channels/consumer.py\", line 81, in send\r\n    await self.base_send(message)\r\n  File \"channels/sessions.py\", line 236, in send\r\n    return await self.real_send(message)\r\n  File \"uvicorn/protocols/websockets/websockets_impl.py\", line 212, in asgi_send\r\n    await self.send(data)\r\n  File \"websockets/protocol.py\", line 555, in send\r\n    await self.ensure_open()\r\n  File \"websockets/protocol.py\", line 812, in ensure_open\r\n    raise self.connection_closed_exc()\r\n```\r\n\r\n</details>\r\n\r\n### Environment\r\n\r\n- Running uvicorn 0.11.8 with CPython 3.6.6 on Linux\r\n- Running as a gunicorn worker via `uvicorn.workers.UvicornWorker`\r\n","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/757/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Kludex/uvicorn/issues/757/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/732179796","html_url":"https://github.com/Kludex/uvicorn/issues/244#issuecomment-732179796","issue_url":"https://api.github.com/repos/Kludex/uvicorn/issues/244","id":732179796,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjE3OTc5Ng==","user":{"login":"cb109","id":6052590,"node_id":"MDQ6VXNlcjYwNTI1OTA=","avatar_url":"https://avatars.githubusercontent.com/u/6052590?v=4","gravatar_id":"","url":"https://api.github.com/users/cb109","html_url":"https://github.com/cb109","followers_url":"https://api.github.com/users/cb109/followers","following_url":"https://api.github.com/users/cb109/following{/other_user}","gists_url":"https://api.github.com/users/cb109/gists{/gist_id}","starred_url":"https://api.github.com/users/cb109/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cb109/subscriptions","organizations_url":"https://api.github.com/users/cb109/orgs","repos_url":"https://api.github.com/users/cb109/repos","events_url":"https://api.github.com/users/cb109/events{/privacy}","received_events_url":"https://api.github.com/users/cb109/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T14:00:38Z","updated_at":"2020-11-23T14:00:38Z","body":"> My workaround is to open the connection and close it immediately.\r\n\r\nThis has been the only way so far to silence the uvicorn errors we are seeing.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Kludex/uvicorn/issues/comments/732179796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cb109","id":6052590,"node_id":"MDQ6VXNlcjYwNTI1OTA=","avatar_url":"https://avatars.githubusercontent.com/u/6052590?v=4","gravatar_id":"","url":"https://api.github.com/users/cb109","html_url":"https://github.com/cb109","followers_url":"https://api.github.com/users/cb109/followers","following_url":"https://api.github.com/users/cb109/following{/other_user}","gists_url":"https://api.github.com/users/cb109/gists{/gist_id}","starred_url":"https://api.github.com/users/cb109/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cb109/subscriptions","organizations_url":"https://api.github.com/users/cb109/orgs","repos_url":"https://api.github.com/users/cb109/repos","events_url":"https://api.github.com/users/cb109/events{/privacy}","received_events_url":"https://api.github.com/users/cb109/received_events","type":"User","user_view_type":"public","site_admin":false}}]