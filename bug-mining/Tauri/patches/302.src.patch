diff --git a/.changes/core-sync-windows-metadata.md b/.changes/core-sync-windows-metadata.md
new file mode 100644
index 000000000..3c735ecc5
--- /dev/null
+++ b/.changes/core-sync-windows-metadata.md
@@ -0,0 +1,5 @@
+---
+"tauri": "patch"
+---
+
+Sync `__TAURI_METADATA__.__windows` across all windows.
diff --git a/core/tauri-runtime-wry/Cargo.toml b/core/tauri-runtime-wry/Cargo.toml
index 54c480e57..34d542c64 100644
--- a/core/tauri-runtime-wry/Cargo.toml
+++ b/core/tauri-runtime-wry/Cargo.toml
@@ -13,7 +13,7 @@ exclude = [ "CHANGELOG.md", "/target" ]
 readme = "README.md"
 
 [dependencies]
-wry = { version = "0.23", default-features = false, features = [ "file-drop", "protocol" ] }
+wry = { git = "https://github.com/tauri-apps/wry", branch = "dev", default-features = false, features = [ "file-drop", "protocol" ] }
 tauri-runtime = { version = "0.12.1", path = "../tauri-runtime" }
 tauri-utils = { version = "1.2.1", path = "../tauri-utils" }
 uuid = { version = "1", features = [ "v4" ] }
diff --git a/core/tauri-runtime-wry/src/lib.rs b/core/tauri-runtime-wry/src/lib.rs
index 3764e42cd..902c604a8 100644
--- a/core/tauri-runtime-wry/src/lib.rs
+++ b/core/tauri-runtime-wry/src/lib.rs
@@ -81,6 +81,7 @@ pub use wry::application::platform::macos::{
 };
 
 use std::{
+  borrow::Cow,
   cell::RefCell,
   collections::{
     hash_map::Entry::{Occupied, Vacant},
@@ -286,7 +287,7 @@ impl From<&WryRequest<Vec<u8>>> for HttpRequestWrapper {
 }
 
 // response
-struct HttpResponseWrapper(WryResponse<Vec<u8>>);
+struct HttpResponseWrapper(WryResponse<Cow<'static, [u8]>>);
 impl From<HttpResponse> for HttpResponseWrapper {
   fn from(response: HttpResponse) -> Self {
     let (parts, body) = response.into_parts();
@@ -300,7 +301,7 @@ impl From<HttpResponse> for HttpResponseWrapper {
       res_builder = res_builder.header(name, val);
     }
 
-    let res = res_builder.body(body).unwrap();
+    let res = res_builder.body(Cow::Owned(body)).unwrap();
     Self(res)
   }
 }
diff --git a/core/tauri/scripts/core.js b/core/tauri/scripts/core.js
index a5d97f34c..1538b312a 100644
--- a/core/tauri/scripts/core.js
+++ b/core/tauri/scripts/core.js
@@ -2,7 +2,7 @@
 // SPDX-License-Identifier: Apache-2.0
 // SPDX-License-Identifier: MIT
 
-;(function () {
+; (function () {
   function uid() {
     return window.crypto.getRandomValues(new Uint32Array(1))[0]
   }
@@ -151,15 +151,6 @@
     }
   })
 
-  listen('tauri://window-created', function (event) {
-    if (event.payload) {
-      var windowLabel = event.payload.label
-      window.__TAURI_METADATA__.__windows.push({
-        label: windowLabel
-      })
-    }
-  })
-
   let permissionSettable = false
   let permissionValue = 'default'
 
diff --git a/core/tauri/src/event.rs b/core/tauri/src/event.rs
index 1605be2bc..9a1b3ec53 100644
--- a/core/tauri/src/event.rs
+++ b/core/tauri/src/event.rs
@@ -338,11 +338,7 @@ pub fn listen_js(
         windowLabel: {window_label},
         handler: {handler}
       }};
-      if ({event} == 'tauri://window-created') {{
-        eventListeners.splice(eventListeners.length - 1, 0, listener)
-      }} else {{
-        eventListeners.push(listener);
-      }}
+      eventListeners.push(listener);
     }})()
   ",
     listeners = listeners_object_name,
diff --git a/core/tauri/src/manager.rs b/core/tauri/src/manager.rs
index f2de52184..7f63ef672 100644
--- a/core/tauri/src/manager.rs
+++ b/core/tauri/src/manager.rs
@@ -1302,6 +1302,14 @@ impl<R: Runtime> WindowManager<R> {
       .try_for_each(|window| window.emit_internal(event, source_window_label, payload.clone()))
   }
 
+  pub fn eval_script_all<S: Into<String>>(&self, script: S) -> crate::Result<()> {
+    let script = script.into();
+    self
+      .windows_lock()
+      .values()
+      .try_for_each(|window| window.eval(&script))
+  }
+
   pub fn labels(&self) -> HashSet<String> {
     self.windows_lock().keys().cloned().collect()
   }
diff --git a/core/tauri/src/window.rs b/core/tauri/src/window.rs
index 7e5a1a285..ce5cd2f9d 100644
--- a/core/tauri/src/window.rs
+++ b/core/tauri/src/window.rs
@@ -252,6 +252,11 @@ impl<'a, R: Runtime> WindowBuilder<'a, R> {
     }
     .map(|window| self.manager.attach_window(self.app_handle.clone(), window))?;
 
+    self.manager.eval_script_all(format!(
+      "window.__TAURI_METADATA__.__windows = {window_labels_array}.map(function (label) {{ return {{ label: label }} }})",
+      window_labels_array = serde_json::to_string(&self.manager.labels())?,
+    ))?;
+
     self.manager.emit_filter(
       "tauri://window-created",
       None,
