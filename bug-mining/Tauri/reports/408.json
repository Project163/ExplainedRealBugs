{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/7801","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7801/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7801/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7801/events","html_url":"https://github.com/tauri-apps/tauri/issues/7801","id":1888900453,"node_id":"I_kwDOC7lts85wllVl","number":7801,"title":"[bug] Async commands are broken post alpha.12","user":{"login":"CrendKing","id":975235,"node_id":"MDQ6VXNlcjk3NTIzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/975235?v=4","gravatar_id":"","url":"https://api.github.com/users/CrendKing","html_url":"https://github.com/CrendKing","followers_url":"https://api.github.com/users/CrendKing/followers","following_url":"https://api.github.com/users/CrendKing/following{/other_user}","gists_url":"https://api.github.com/users/CrendKing/gists{/gist_id}","starred_url":"https://api.github.com/users/CrendKing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CrendKing/subscriptions","organizations_url":"https://api.github.com/users/CrendKing/orgs","repos_url":"https://api.github.com/users/CrendKing/repos","events_url":"https://api.github.com/users/CrendKing/events{/privacy}","received_events_url":"https://api.github.com/users/CrendKing/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-09T23:13:47Z","updated_at":"2023-09-11T15:25:10Z","closed_at":"2023-09-11T15:25:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nEverything was fine in alpha.11. After updating to alpha.12, when the frontend invokes a command with `async fn`, it just times out after around 2 seconds. However, the debugger shows the command was actually called successfully. So it seems it is the callback part inside Tauri that's broken.\r\n\r\n### Reproduction\r\n\r\n1. `pnpm create tauri-app --alpha`. Right now it should uses Tauri alpha.13, which shares the problem.\r\n2. Add tokio dependency. Change the greeting function to async. Make the main function async.\r\n3. Launch the app. Type the name and click button. Notice nothing happens and error shows up in console.\r\n\r\n### Expected behavior\r\n\r\nAsync command should be usable as it always does since 1.0.\r\n\r\n### Platform and versions\r\n\r\n```text\r\n[✔] Environment\r\n    - OS: Windows 10.0.22621 X64\r\n    ✔ WebView2: 116.0.1938.69\r\n    ✔ MSVC: Visual Studio Build Tools 2022\r\n    ✔ rustc: 1.72.0 (5680fa18f 2023-08-23)\r\n    ✔ Cargo: 1.72.0 (103a7ff2e 2023-08-15)\r\n    ✔ rustup: 1.26.0 (5af9b9484 2023-04-05)\r\n    ✔ Rust toolchain: stable-x86_64-pc-windows-msvc (environment override by RUSTUP_TOOLCHAIN)\r\n    - node: 18.17.1\r\n    - pnpm: 8.7.4\r\n    - npm: 9.6.7\r\n\r\n[-] Packages\r\n    - tauri [RUST]: 2.0.0-alpha.13\r\n    - tauri-build [RUST]: 2.0.0-alpha.8\r\n    - wry [RUST]: 0.32.0\r\n    - tao [RUST]: 0.22.2\r\n    - @tauri-apps/api [NPM]: 2.0.0-alpha.7\r\n    - @tauri-apps/cli [NPM]: 2.0.0-alpha.10\r\n\r\n[-] App\r\n    - build-type: build\r\n    - CSP: unset\r\n    - distDir: ../dist\r\n    - devPath: http://localhost:1420/\r\n    - framework: Svelte\r\n    - bundler: Vite\r\n```\r\n\r\n\r\n### Stack trace\r\n\r\n_No response_\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/7801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7801/timeline","performed_via_github_app":null,"state_reason":"completed"}