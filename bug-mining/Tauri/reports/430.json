{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/8110","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8110/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8110/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8110/events","html_url":"https://github.com/tauri-apps/tauri/issues/8110","id":1963100302,"node_id":"I_kwDOC7lts851AoiO","number":8110,"title":"\"--verbose\" parameter cause  \"cargo tauri build\" error","user":{"login":"yang4515","id":21199449,"node_id":"MDQ6VXNlcjIxMTk5NDQ5","avatar_url":"https://avatars.githubusercontent.com/u/21199449?v=4","gravatar_id":"","url":"https://api.github.com/users/yang4515","html_url":"https://github.com/yang4515","followers_url":"https://api.github.com/users/yang4515/followers","following_url":"https://api.github.com/users/yang4515/following{/other_user}","gists_url":"https://api.github.com/users/yang4515/gists{/gist_id}","starred_url":"https://api.github.com/users/yang4515/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yang4515/subscriptions","organizations_url":"https://api.github.com/users/yang4515/orgs","repos_url":"https://api.github.com/users/yang4515/repos","events_url":"https://api.github.com/users/yang4515/events{/privacy}","received_events_url":"https://api.github.com/users/yang4515/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3310698683,"node_id":"MDU6TGFiZWwzMzEwNjk4Njgz","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20macOS","name":"platform: macOS","color":"fef2c0","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-10-26T09:31:54Z","updated_at":"2023-12-19T16:54:54Z","closed_at":"2023-12-19T16:54:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nWhen I add \"--verbose\" parameter， I got:\r\n```\r\nthread '<unnamed>' panicked at /Users/dev/.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/tauri-bundler-1.4.5/src/bundle/common.rs:191:46:\r\nbyte index 18446744073709551615 is out of bounds of ``\r\nstack backtrace:\r\nCreating disk image...\r\n   0:        0x108beecd1 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h65343ad3a85b4e34\r\n   1:        0x1086ec4ab - core::fmt::write::h11839d3825cb5605\r\n   2:        0x108bbc1ae - std::io::Write::write_fmt::h3ab12d369399333c\r\n   3:        0x108bf4479 - std::sys_common::backtrace::print::h405f7c76ca12eb27\r\n   4:        0x108bf40a5 - std::panicking::default_hook::{{closure}}::hed87c355606e1822\r\n   5:        0x108bf3d6f - std::panicking::default_hook::hdf696ec8ea0d65aa\r\n   6:        0x108bf4d65 - std::panicking::rust_panic_with_hook::h7c5059af1af54377\r\n   7:        0x108bf4b44 - std::panicking::begin_panic_handler::{{closure}}::hd658b0e1cffe3d4d\r\n   8:        0x108bf4aa9 - std::sys_common::backtrace::__rust_end_short_backtrace::h3d7834d0cea60a50\r\n   9:        0x108bf4a92 - _rust_begin_unwind\r\n  10:        0x109184073 - core::panicking::panic_fmt::ha9964785de0afb40\r\n  11:        0x1086f4de8 - core::str::slice_error_fail_rt::hdab0588c7b50926d\r\n  12:        0x109184609 - core::str::slice_error_fail::h85725224eed85dfc\r\n  13:        0x108c00135 - std::sys_common::backtrace::__rust_begin_short_backtrace::h02c11099bc04e68c\r\n  14:        0x108c3ed61 - core::ops::function::FnOnce::call_once{{vtable.shim}}::h2e29327d71dd9385\r\n  15:        0x108bf8b39 - std::sys::unix::thread::Thread::new::thread_start::h153c4d3159ba46be\r\n  16:     0x7ff818cc54e1 - __pthread_start\r\nthread 'main' panicked at /Users/dev/.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/tauri-bundler-1.4.5/src/bundle/common.rs:200:56:\r\ncalled `Result::unwrap()` on an `Err` value: PoisonError { .. }\r\nstack backtrace:\r\n   0:        0x108beecd1 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h65343ad3a85b4e34\r\n   1:        0x1086ec4ab - core::fmt::write::h11839d3825cb5605\r\n   2:        0x108bbc1ae - std::io::Write::write_fmt::h3ab12d369399333c\r\n   3:        0x108bf4479 - std::sys_common::backtrace::print::h405f7c76ca12eb27\r\n   4:        0x108bf40a5 - std::panicking::default_hook::{{closure}}::hed87c355606e1822\r\n   5:        0x108bf3d6f - std::panicking::default_hook::hdf696ec8ea0d65aa\r\n   6:        0x108bf4d65 - std::panicking::rust_panic_with_hook::h7c5059af1af54377\r\n   7:        0x108bf4b44 - std::panicking::begin_panic_handler::{{closure}}::hd658b0e1cffe3d4d\r\n   8:        0x108bf4aa9 - std::sys_common::backtrace::__rust_end_short_backtrace::h3d7834d0cea60a50\r\n   9:        0x108bf4a92 - _rust_begin_unwind\r\n  10:        0x109184073 - core::panicking::panic_fmt::ha9964785de0afb40\r\n  11:        0x1091844a1 - core::result::unwrap_failed::h789415aec617156b\r\n  12:        0x108c0776d - <std::process::Command as tauri_bundler::bundle::common::CommandExt>::output_ok::h93d92cf848259b92\r\n  13:        0x108c0aeb4 - tauri_bundler::bundle::bundle_project::h66f302d8f0bb289d\r\n  14:        0x108e4dd72 - tauri_cli::build::command::h9e3f86d7df04e8dd\r\n  15:        0x108635717 - tauri_cli::run::h96836811ba49b9ec\r\n  16:        0x10868be97 - cargo_tauri::main::h92882854e2996cf2\r\n  17:        0x10868b076 - std::sys_common::backtrace::__rust_begin_short_backtrace::h98179b40a915f3c7\r\n  18:        0x10868b963 - _main\r\n  ```\r\n  \r\nAnd everything returns to normal when I remove the --verbose parameter.\r\nI was unable to reproduce the issue using the official demo. The log provides the file and the line number where the error occurred. I am not familiar with Rust, can you provide some help?\n\n### Reproduction\n\n_No response_\n\n### Expected behavior\n\n_No response_\n\n### Platform and versions\n\n```text\n[✔] Environment\r\n    - OS: Mac OS 12.6.8 X64\r\n    ✔ Xcode Command Line Tools: installed\r\n    ✔ rustc: 1.73.0 (cc66ad468 2023-10-03)\r\n    ✔ Cargo: 1.73.0 (9c4383fb5 2023-08-26)\r\n    ✔ rustup: 1.26.0 (5af9b9484 2023-04-05)\r\n    ✔ Rust toolchain: stable-x86_64-apple-darwin (environment override by RUSTUP_TOOLCHAIN)\r\n    - node: 18.16.0\r\n    - pnpm: 8.4.0\r\n    - yarn: 1.22.19\r\n    - npm: 7.6.0\r\n\r\n[-] Packages\r\n    - tauri [RUST]: 1.5.2\r\n    - tauri-build [RUST]: 1.5.0\r\n    - wry [RUST]: 0.24.4\r\n    - tao [RUST]: 0.16.2\r\n    - tauri-cli [RUST]: 1.5.0\r\n    - @tauri-apps/api [NPM]: 1.5.1\r\n    - @tauri-apps/cli [NPM]: 1.5.0 (outdated, latest: 1.5.6)\r\n\r\n[-] App\r\n    - build-type: bundle\r\n    - CSP: unset\n```\n\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/8110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8110/timeline","performed_via_github_app":null,"state_reason":"completed"}