{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6122","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6122/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6122/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6122/events","html_url":"https://github.com/tauri-apps/tauri/issues/6122","id":1551929136,"node_id":"I_kwDOC7lts85cgI8w","number":6122,"title":"[bug]  workspace inheritance does not work","user":{"login":"Tricked-dev","id":72335827,"node_id":"MDQ6VXNlcjcyMzM1ODI3","avatar_url":"https://avatars.githubusercontent.com/u/72335827?v=4","gravatar_id":"","url":"https://api.github.com/users/Tricked-dev","html_url":"https://github.com/Tricked-dev","followers_url":"https://api.github.com/users/Tricked-dev/followers","following_url":"https://api.github.com/users/Tricked-dev/following{/other_user}","gists_url":"https://api.github.com/users/Tricked-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/Tricked-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tricked-dev/subscriptions","organizations_url":"https://api.github.com/users/Tricked-dev/orgs","repos_url":"https://api.github.com/users/Tricked-dev/repos","events_url":"https://api.github.com/users/Tricked-dev/events{/privacy}","received_events_url":"https://api.github.com/users/Tricked-dev/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-01-21T22:31:28Z","updated_at":"2023-01-26T13:47:26Z","closed_at":"2023-01-26T13:47:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nworkspaces do not work\r\nThis manifest requires workspace inheritance, but `inherit_workspace` hasn't been called yet\r\n\n\n### Reproduction\n\ncreate a new project and use workspace inheritance.  \r\nanything described in here will error cause of cargo-toml <https://doc.rust-lang.org/cargo/reference/workspaces.html#the-package-table>\r\nit appears like this function needs to be used <https://docs.rs/cargo_toml/latest/cargo_toml/struct.Manifest.html#method.inherit_workspace>\r\n\n\n### Expected behavior\n\nBuild script should not error when workspaces are being used\n\n### Platform and versions\n\nEnvironment\r\n  › OS: EndeavourOS Rolling Release X64\r\n  › Node.js: 16.17.1\r\n  › npm: 9.3.0\r\n  › pnpm: 7.25.1\r\n  › yarn: 1.22.19\r\n  › rustup: 1.25.1\r\n  › rustc: 1.68.0-nightly\r\n  › cargo: 1.68.0-nightly\r\n  › Rust toolchain: nightly-x86_64-unknown-linux-gnu \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.2.3\r\n  › @tauri-apps/api [NPM]: 1.2.0\r\n  › tauri [RUST]: 1.2.4,\r\n  › tauri-build [RUST]: 1.2.1,\r\n  › tao [RUST]: 0.15.8,\r\n  › wry [RUST]: 0.23.4,\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: ../dist\r\n  › devPath: http://localhost:1420/\r\n  › framework: PReact\r\n  › bundler: Vite\r\n\r\nApp directory structure\r\n  ├─ public\r\n  ├─ src-tauri\r\n  ├─ src\r\n  ├─ node_modules\r\n  └─ dist\n\n### Stack trace\n\n```shell\nCaused by:\r\n  process didn't exit successfully: `/home/tricked/coding/easyhotkeys/target/debug/build/a2m8-61fd4df4ef3fd9d8/build-script-build` (exit status: 101)\r\n  --- stdout\r\n  cargo:rerun-if-env-changed=TAURI_CONFIG\r\n  cargo:rerun-if-changed=tauri.conf.json\r\n  cargo:rustc-cfg=desktop\r\n  cargo:rustc-cfg=dev\r\n\r\n  --- stderr\r\n  thread 'main' panicked at 'Err(This manifest requires workspace inheritance, but `inherit_workspace` hasn't been called yet\r\n\r\n  Stack backtrace:\r\n     0: anyhow::error::<impl core::convert::From<E> for anyhow::Error>::from\r\n               at /home/tricked/.cargo/registry/src/github.com-1ecc6299db9ec823/anyhow-1.0.68/src/error.rs:547:25\r\n     1: <core::result::Result<T,F> as core::ops::try_trait::FromResidual<core::result::Result<core::convert::Infallible,E>>>::from_residual\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/core/src/result.rs:2107:27\r\n     2: tauri_build::try_build\r\n               at /home/tricked/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-build-1.2.1/src/lib.rs:224:22\r\n     3: build_script_build::main\r\n               at ./build.rs:4:20\r\n     4: core::ops::function::FnOnce::call_once\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/core/src/ops/function.rs:250:5\r\n     5: std::sys_common::backtrace::__rust_begin_short_backtrace\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/sys_common/backtrace.rs:121:18\r\n     6: std::rt::lang_start::{{closure}}\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/rt.rs:166:18\r\n     7: core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/core/src/ops/function.rs:287:13\r\n     8: std::panicking::try::do_call\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/panicking.rs:483:40\r\n     9: std::panicking::try\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/panicking.rs:447:19\r\n    10: std::panic::catch_unwind\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/panic.rs:140:14\r\n    11: std::rt::lang_start_internal::{{closure}}\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/rt.rs:148:48\r\n    12: std::panicking::try::do_call\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/panicking.rs:483:40\r\n    13: std::panicking::try\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/panicking.rs:447:19\r\n    14: std::panic::catch_unwind\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/panic.rs:140:14\r\n    15: std::rt::lang_start_internal\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/rt.rs:148:20\r\n    16: std::rt::lang_start\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/rt.rs:165:17\r\n    17: main\r\n    18: <unknown>\r\n    19: __libc_start_main\r\n    20: _start)', a2m8/src-tauri/build.rs:4:5\r\n  stack backtrace:\r\n     0: rust_begin_unwind\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/std/src/panicking.rs:575:5\r\n     1: core::panicking::panic_fmt\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/core/src/panicking.rs:64:14\r\n     2: build_script_build::main\r\n               at ./build.rs:4:5\r\n     3: core::ops::function::FnOnce::call_once\r\n               at /rustc/5ce39f42bd2c8bca9c570f0560ebe1fce4eddb14/library/core/src/ops/function.rs:250:5\r\n  note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n```\n\n\n### Additional context\n\nhttps://doc.rust-lang.org/cargo/reference/workspaces.html#the-workspace-section","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6122/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6122/timeline","performed_via_github_app":null,"state_reason":"completed"}