{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3592","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3592/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3592/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3592/events","html_url":"https://github.com/tauri-apps/tauri/issues/3592","id":1157402117,"node_id":"I_kwDOC7lts85E_I4F","number":3592,"title":"[bug] Asset protocol not configured to allow the path","user":{"login":"Worble","id":23124945,"node_id":"MDQ6VXNlcjIzMTI0OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/23124945?v=4","gravatar_id":"","url":"https://api.github.com/users/Worble","html_url":"https://github.com/Worble","followers_url":"https://api.github.com/users/Worble/followers","following_url":"https://api.github.com/users/Worble/following{/other_user}","gists_url":"https://api.github.com/users/Worble/gists{/gist_id}","starred_url":"https://api.github.com/users/Worble/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Worble/subscriptions","organizations_url":"https://api.github.com/users/Worble/orgs","repos_url":"https://api.github.com/users/Worble/repos","events_url":"https://api.github.com/users/Worble/events{/privacy}","received_events_url":"https://api.github.com/users/Worble/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-02T16:12:52Z","updated_at":"2024-07-06T22:45:47Z","closed_at":"2022-03-03T16:09:49Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nI am attempting to retrieve Icons for the users currently installed applications. I already have the icon paths (under `/usr/share/icons` and `/usr/share/pixmaps`) and I am trying to use `convertFileSrc` so they can be shown in an image, however no matter what I try I get the error `asset protocol not configured to allow the path: <path>`.\r\n\r\nI have my allowlist set as follows:\r\n```json\r\n    \"allowlist\": {\r\n      \"fs\": {\r\n        \"readFile\": true,\r\n        \"readDir\": true\r\n      },\r\n      \"protocol\": {\r\n        \"asset\": true,\r\n        \"assetScope\": [\"/usr/share/icons/**/*.svg\"]\r\n      }\r\n    },\r\n```\r\n\r\nAnd `protocol-asset` is added in tauri features in Cargo.toml\r\n\r\nSome examples are `/usr/share/icons/breeze/apps/48/okular.svg` and `/usr/share/icons/breeze/apps/48/gwenview.svg`. I know the glob is correct since I'm already using it elsewhere in my application to find the icons. I've tried many different variations of the glob such as just the folder `/usr/share/icons/**` or `/usr/share/icons/**/*` and nothing appears to be working, as well as just putting in the direct path to the svg to see if it would load. Am I missing something?\r\n\r\n\r\n### Reproduction\r\n\r\n_No response_\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Platform and versions\r\n\r\n```shell\r\nOperating System - Arch Linux, version Rolling Release X64\r\n\r\nNode.js environment\r\n  Node.js - 17.6.0\r\n  @tauri-apps/cli - 1.0.0-rc.5\r\n  @tauri-apps/api - 1.0.0-rc.1\r\n\r\nGlobal packages\r\n  npm - 8.5.2\r\n  pnpm - Not installed\r\n  yarn - Not installed\r\n\r\nRust environment\r\n  rustup - 1.24.3\r\n  rustc - 1.59.0\r\n  cargo - 1.59.0\r\n  toolchain - stable-x86_64-unknown-linux-gnu \r\n\r\nApp directory structure\r\n/.idea\r\n/src-tauri\r\n/src\r\n/node_modules\r\n/.git\r\n/dist\r\n\r\nApp\r\n  tauri - 1.0.0-rc.3\r\n  tauri-build - 1.0.0-rc.3\r\n  tao - 0.6.3\r\n  wry - 0.13.3\r\n  build-type - bundle\r\n  CSP - default-src 'self' blob: data: filesystem: ws: wss: http: https: tauri: 'unsafe-eval' 'unsafe-inline' 'self' img-src: 'self' asset: https://asset.localhost\r\n  distDir - ../dist\r\n  devPath - http://localhost:8080/\r\n  framework - React\r\n  bundler - Webpack\r\n```\r\n\r\n\r\n### Stack trace\r\n\r\n_No response_\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3592/timeline","performed_via_github_app":null,"state_reason":"completed"}