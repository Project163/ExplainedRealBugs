[{"id":6154377540,"node_id":"LE_lADOC7lts85EyUY-zwAAAAFu1FlE","url":"https://api.github.com/repos/tauri-apps/tauri/issues/events/6154377540","actor":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-02-28T12:36:20Z","label":{"name":"type: bug","color":"B60205"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054285000","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054285000","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054285000,"node_id":"IC_kwDOC7lts84-1xzI","user":{"login":"nothingismagick","id":35242872,"node_id":"MDQ6VXNlcjM1MjQyODcy","avatar_url":"https://avatars.githubusercontent.com/u/35242872?v=4","gravatar_id":"","url":"https://api.github.com/users/nothingismagick","html_url":"https://github.com/nothingismagick","followers_url":"https://api.github.com/users/nothingismagick/followers","following_url":"https://api.github.com/users/nothingismagick/following{/other_user}","gists_url":"https://api.github.com/users/nothingismagick/gists{/gist_id}","starred_url":"https://api.github.com/users/nothingismagick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nothingismagick/subscriptions","organizations_url":"https://api.github.com/users/nothingismagick/orgs","repos_url":"https://api.github.com/users/nothingismagick/repos","events_url":"https://api.github.com/users/nothingismagick/events{/privacy}","received_events_url":"https://api.github.com/users/nothingismagick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:00:33Z","updated_at":"2022-02-28T14:00:33Z","body":"Are you using anything like this in your Cargo.toml:\r\n```\r\n[profile.release]\r\npanic = \"abort\" # Strip expensive panic clean-up logic\r\ncodegen-units = 1 # Compile crates one after another so the compiler can optimize better\r\nlto = true # Enables link to optimizations\r\nopt-level = \"s\" # Optimize for binary size\r\n```\r\n\r\ncodegen-units will DEFINITELY slow you down","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054285000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nothingismagick","id":35242872,"node_id":"MDQ6VXNlcjM1MjQyODcy","avatar_url":"https://avatars.githubusercontent.com/u/35242872?v=4","gravatar_id":"","url":"https://api.github.com/users/nothingismagick","html_url":"https://github.com/nothingismagick","followers_url":"https://api.github.com/users/nothingismagick/followers","following_url":"https://api.github.com/users/nothingismagick/following{/other_user}","gists_url":"https://api.github.com/users/nothingismagick/gists{/gist_id}","starred_url":"https://api.github.com/users/nothingismagick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nothingismagick/subscriptions","organizations_url":"https://api.github.com/users/nothingismagick/orgs","repos_url":"https://api.github.com/users/nothingismagick/repos","events_url":"https://api.github.com/users/nothingismagick/events{/privacy}","received_events_url":"https://api.github.com/users/nothingismagick/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054289780","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054289780","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054289780,"node_id":"IC_kwDOC7lts84-1y90","user":{"login":"FabianLars","id":30730186,"node_id":"MDQ6VXNlcjMwNzMwMTg2","avatar_url":"https://avatars.githubusercontent.com/u/30730186?v=4","gravatar_id":"","url":"https://api.github.com/users/FabianLars","html_url":"https://github.com/FabianLars","followers_url":"https://api.github.com/users/FabianLars/followers","following_url":"https://api.github.com/users/FabianLars/following{/other_user}","gists_url":"https://api.github.com/users/FabianLars/gists{/gist_id}","starred_url":"https://api.github.com/users/FabianLars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabianLars/subscriptions","organizations_url":"https://api.github.com/users/FabianLars/orgs","repos_url":"https://api.github.com/users/FabianLars/repos","events_url":"https://api.github.com/users/FabianLars/events{/privacy}","received_events_url":"https://api.github.com/users/FabianLars/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:04:51Z","updated_at":"2022-03-01T13:15:41Z","body":"I think we can rid of bzip if we disable the default features of the zip crate.\r\nEdit: This ^ would also remove 1 of our last 2 usages of time@v1 ðŸ¥³ \r\nThe updater doesn't use bzip, but not sure for the extract apis right now so maybe we need to enable it conditionally.\r\n\r\nThe situation looks worse for the other 2 crates tho (at least on first glance)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054289780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"FabianLars","id":30730186,"node_id":"MDQ6VXNlcjMwNzMwMTg2","avatar_url":"https://avatars.githubusercontent.com/u/30730186?v=4","gravatar_id":"","url":"https://api.github.com/users/FabianLars","html_url":"https://github.com/FabianLars","followers_url":"https://api.github.com/users/FabianLars/followers","following_url":"https://api.github.com/users/FabianLars/following{/other_user}","gists_url":"https://api.github.com/users/FabianLars/gists{/gist_id}","starred_url":"https://api.github.com/users/FabianLars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabianLars/subscriptions","organizations_url":"https://api.github.com/users/FabianLars/orgs","repos_url":"https://api.github.com/users/FabianLars/repos","events_url":"https://api.github.com/users/FabianLars/events{/privacy}","received_events_url":"https://api.github.com/users/FabianLars/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054290999","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054290999","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054290999,"node_id":"IC_kwDOC7lts84-1zQ3","user":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:06:09Z","updated_at":"2022-02-28T14:06:09Z","body":"> I think we can rid of bzip if we disable the default features of the zip crate. The updater doesn't use bzip, but not sure for the extract apis right now so maybe we need to enable it conditionally.\r\n\r\nAlso, I pushed a PR that disables zip entirely if you're not using the updater. We can extend that to disable bzip and add a feature for it.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054290999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054292375","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054292375","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054292375,"node_id":"IC_kwDOC7lts84-1zmX","user":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:07:30Z","updated_at":"2022-02-28T14:07:30Z","body":"I think we can easily replace blake3, it's only used to hash the assets. Just need to find a good replacement.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054292375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054296264","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054296264","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054296264,"node_id":"IC_kwDOC7lts84-10jI","user":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:11:19Z","updated_at":"2022-02-28T14:11:19Z","body":"> Are you using anything like this in your Cargo.toml:\r\n> \r\n> ```\r\n> [profile.release]\r\n> panic = \"abort\" # Strip expensive panic clean-up logic\r\n> codegen-units = 1 # Compile crates one after another so the compiler can optimize better\r\n> lto = true # Enables link to optimizations\r\n> opt-level = \"s\" # Optimize for binary size\r\n> ```\r\n> \r\n> codegen-units will DEFINITELY slow you down\r\n\r\nFor the release profile, yes. For the debug profile, I have the following\r\n\r\n```toml\r\n[profile.dev]\r\nincremental = true\r\nstrip = false\r\nlto = false\r\nopt-level = 0\r\n\r\n[profile.dev.package.\"*\"]\r\nopt-level = 0\r\nincremental = true\r\n\r\n[profile.dev.build-override]\r\nopt-level = 0\r\nincremental = true\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054296264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054303050","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054303050","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054303050,"node_id":"IC_kwDOC7lts84-12NK","user":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:18:14Z","updated_at":"2022-02-28T14:18:36Z","body":"> I think we can easily replace blake3, it's only used to hash the assets. Just need to find a good replacement.\r\n\r\nWhat hash algorithm is used for the assets? Because there's [md5-tools](https://github.com/volution/md5-tools) which also support the SHA family of hashing algos, or there's [sha256](https://lib.rs/crates/sha256), both of which look to be lightweight enough","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054303050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054307989","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054307989","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054307989,"node_id":"IC_kwDOC7lts84-13aV","user":{"login":"FabianLars","id":30730186,"node_id":"MDQ6VXNlcjMwNzMwMTg2","avatar_url":"https://avatars.githubusercontent.com/u/30730186?v=4","gravatar_id":"","url":"https://api.github.com/users/FabianLars","html_url":"https://github.com/FabianLars","followers_url":"https://api.github.com/users/FabianLars/followers","following_url":"https://api.github.com/users/FabianLars/following{/other_user}","gists_url":"https://api.github.com/users/FabianLars/gists{/gist_id}","starred_url":"https://api.github.com/users/FabianLars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabianLars/subscriptions","organizations_url":"https://api.github.com/users/FabianLars/orgs","repos_url":"https://api.github.com/users/FabianLars/repos","events_url":"https://api.github.com/users/FabianLars/events{/privacy}","received_events_url":"https://api.github.com/users/FabianLars/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:23:11Z","updated_at":"2022-02-28T14:24:06Z","body":"> What hash algorithm is used for the assets?\n\nblake3 is not only the name of the crate but also of the algorithm (afaik)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054307989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"FabianLars","id":30730186,"node_id":"MDQ6VXNlcjMwNzMwMTg2","avatar_url":"https://avatars.githubusercontent.com/u/30730186?v=4","gravatar_id":"","url":"https://api.github.com/users/FabianLars","html_url":"https://github.com/FabianLars","followers_url":"https://api.github.com/users/FabianLars/followers","following_url":"https://api.github.com/users/FabianLars/following{/other_user}","gists_url":"https://api.github.com/users/FabianLars/gists{/gist_id}","starred_url":"https://api.github.com/users/FabianLars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabianLars/subscriptions","organizations_url":"https://api.github.com/users/FabianLars/orgs","repos_url":"https://api.github.com/users/FabianLars/repos","events_url":"https://api.github.com/users/FabianLars/events{/privacy}","received_events_url":"https://api.github.com/users/FabianLars/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054312800","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054312800","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054312800,"node_id":"IC_kwDOC7lts84-14lg","user":{"login":"JonasKruckenberg","id":25329995,"node_id":"MDQ6VXNlcjI1MzI5OTk1","avatar_url":"https://avatars.githubusercontent.com/u/25329995?v=4","gravatar_id":"","url":"https://api.github.com/users/JonasKruckenberg","html_url":"https://github.com/JonasKruckenberg","followers_url":"https://api.github.com/users/JonasKruckenberg/followers","following_url":"https://api.github.com/users/JonasKruckenberg/following{/other_user}","gists_url":"https://api.github.com/users/JonasKruckenberg/gists{/gist_id}","starred_url":"https://api.github.com/users/JonasKruckenberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonasKruckenberg/subscriptions","organizations_url":"https://api.github.com/users/JonasKruckenberg/orgs","repos_url":"https://api.github.com/users/JonasKruckenberg/repos","events_url":"https://api.github.com/users/JonasKruckenberg/events{/privacy}","received_events_url":"https://api.github.com/users/JonasKruckenberg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:27:51Z","updated_at":"2022-02-28T14:27:51Z","body":"> blake3 is not only the name of the crate but also of the algorithm (afaik)\n\nhttps://en.m.wikipedia.org/wiki/BLAKE_(hash_function)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054312800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JonasKruckenberg","id":25329995,"node_id":"MDQ6VXNlcjI1MzI5OTk1","avatar_url":"https://avatars.githubusercontent.com/u/25329995?v=4","gravatar_id":"","url":"https://api.github.com/users/JonasKruckenberg","html_url":"https://github.com/JonasKruckenberg","followers_url":"https://api.github.com/users/JonasKruckenberg/followers","following_url":"https://api.github.com/users/JonasKruckenberg/following{/other_user}","gists_url":"https://api.github.com/users/JonasKruckenberg/gists{/gist_id}","starred_url":"https://api.github.com/users/JonasKruckenberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonasKruckenberg/subscriptions","organizations_url":"https://api.github.com/users/JonasKruckenberg/orgs","repos_url":"https://api.github.com/users/JonasKruckenberg/repos","events_url":"https://api.github.com/users/JonasKruckenberg/events{/privacy}","received_events_url":"https://api.github.com/users/JonasKruckenberg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054315250","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054315250","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054315250,"node_id":"IC_kwDOC7lts84-15Ly","user":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:30:17Z","updated_at":"2022-02-28T14:30:17Z","body":"Hmm... is the high performance of Blake3 needed? Because that's the only benefit of using Blake3 that I can find, unless it was a decision from the security audit for a specific reason?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054315250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054584664","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054584664","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054584664,"node_id":"IC_kwDOC7lts84-269Y","user":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T19:21:57Z","updated_at":"2022-02-28T19:21:57Z","body":"hey @chippers can you give us your thoughts here since you introduced blake3 and zstd to the asset system?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054584664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6156990349,"node_id":"MEE_lADOC7lts85EyUY-zwAAAAFu_DeN","url":"https://api.github.com/repos/tauri-apps/tauri/issues/events/6156990349","actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-28T19:21:58Z","performed_via_github_app":null},{"id":6156990355,"node_id":"SE_lADOC7lts85EyUY-zwAAAAFu_DeT","url":"https://api.github.com/repos/tauri-apps/tauri/issues/events/6156990355","actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-28T19:21:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054847558","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1054847558","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1054847558,"node_id":"IC_kwDOC7lts84-37JG","user":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T00:26:35Z","updated_at":"2022-03-01T02:03:16Z","body":"At the time of #1430 i had used the cargo timings to test compilation times in general. When I was running it, the linking time absolutely swamped everything else. On computers where it is more CPU constrained than IO constrained (like this issue's example), these slow to build crates can become a larger issues.\r\n\r\nOver time, it seems there have also been issues with longer compile times in some of these projects. Specifically `zstd` which seems to get slower to compile as versions go on while speeding up their runtime performance. Since `zstd-sys` is building the actual `zstd` c code, it seems to continuously get slower to compile over time. I don't recall `blake3` taking up nearly as much time as this timing output, so it may be the case that some cpu platforms are slower to build than others because it adds in cpu specific code for performance reasons.\r\n\r\nOverall, I was not really concerned with the crate dependency compile times because I was much more focused on dirty builds (the dependencies have already been compiled) since that is the typical developer workflow loop. Additionally, I was not aware of how severe being CPU constrained (crate compilation) instead IO constrained (linking) could affect build times.\r\n\r\nAlong with the above reasoning, I chose `zstd` because:\r\n1. good rust bindings\r\n2. `zstd` has very good compression ratio and decompression speed/memory usage\r\n3. compatible licensing\r\n\r\nI ended up adding `blake3` in #1430 to prevent additional work from being performed if the asset file was not changed during a dirty build. This was much more important when compression was not an optional feature, as not only did it prevent IO work but it would also prevent CPU work. Nowadays, if compression is disabled it will only prevent IO work. This brought good wins for large asset files without extra dirty build time work. That said, I didn't recall it having such an effect on a clean build time, but perhaps that is because I was not CPU constrained. I chose `blake3` because:\r\n1. good rust bindings\r\n    * the rust crate itself is the main project, although they also offer a c implementation\r\n 2. compatible licensing\r\n 3. great performance, especially great `debug` performance\r\n     * they are also compiled with the same cargo profile of the main crate, causing debug builds to use debug-compiled proc-macros and their dependencies\r\n\r\nThe runtime performance was important because its runtime is also during compile time due to its use in `tauri-codegen`. It had to be faster to hash the file than writing out the contents to disk even with a debug profile.\r\n\r\n**tl;dr - I mostly focused on dirty build compile times (the dependency is already compiled) and otherwise focused on runtime performance, which `zstd` and `blake3` brings plenty of.**\r\n\r\nThere are multiple ways to go for solutions, I'll start with `blake3`.\r\n\r\n### `blake3` alternatives\r\n\r\n`blake3` actually comes with a Rust reference implementation. It is a single file with <400 LoC and no generics (from a quick glance) which usually translates to very fast compile times. I tested a release build on a Windows 10 VM with 2 CPU and it took 1s flat for a clean build and no caches. Downside, it is not published as a crate. The file changes very little (the logic changes even less) so vendoring this should be fine as long as we keep a bit of an eye on the original reference. We also may be able to convince the blake3 project in publishing it as a crate. Also it exists in a repo that is dual Apache-2.0/CC0 1.0 Universal but it itself is not specified and we may want to make sure it is also licensed the same.\r\n\r\nI didn't really look into anything else because this seemed good enough. I will add though, that if the slower performance doesn't keep up wins for asset inclusion on HDDs (thinking of a JS project with megabytes of dependencies), we may also want to only enable if compression is also enabled since more work is done there.\r\n\r\nThe 1s compilation time for the reference can be compared to 13s for the main crate on the same machine, and 32.37s for the main crate with the `rayon` feature enabled. Perhaps just disabling rayon support will also bring a big-enough compilation time win with minimal performance impact.\r\n\r\nAs for runtime performance (6.7MB JavaScript file)...\r\n| method | note | time |\r\n| --- | --- | --- |\r\n| b3sum (`blake3` w/ `rayon`) | --- | 0.017s |\r\n| b3sum (`blake3` w/ `rayon`) | `--no-mmap` | 0.018s |\r\n| b3sum (`blake3` w/ `rayon`) | `--no-mmap --num-threads=1` | 0.02s |\r\n| rust reference | release | 0.026s |\r\n| rust reference | debug | 0.85s |\r\n| rust reference | debug `opt-level = 1` | 0.03s |\r\n| rust reference | debug `opt-level = 2` | 0.027s |\r\n| rust reference | debug `opt-level = 3` | 0.026s |\r\n\r\n<details>\r\n<summary>Click me to see the rust reference sum wrapper code</summary>\r\n\r\n```rs\r\nuse crate::reference::Hasher;\r\nuse std::env::args_os;\r\nuse std::fmt::Write;\r\nuse std::fs::File;\r\nuse std::io::{self, Read};\r\n\r\nmod reference;\r\n\r\nfn copy_wide(mut reader: impl Read, hasher: &mut reference::Hasher) -> io::Result<u64> {\r\n    let mut buffer = [0; 65536];\r\n    let mut total = 0;\r\n    loop {\r\n        match reader.read(&mut buffer) {\r\n            Ok(0) => return Ok(total),\r\n            Ok(n) => {\r\n                hasher.update(&buffer[..n]);\r\n                total += n as u64;\r\n            }\r\n            Err(ref e) if e.kind() == io::ErrorKind::Interrupted => continue,\r\n            Err(e) => return Err(e),\r\n        }\r\n    }\r\n}\r\n\r\nfn main() {\r\n    let input = args_os().nth(1).expect(\"at least 1 argument of file path\");\r\n    let file = File::open(&input).expect(\"unable to open up input file path\");\r\n    let mut hasher = Hasher::new();\r\n    let _copied = copy_wide(file, &mut hasher).expect(\"io error while copying file to hasher\");\r\n    let mut output = [0u8; 32];\r\n    hasher.finalize(&mut output);\r\n    let mut s = String::with_capacity(2 * output.len());\r\n    for byte in output {\r\n        write!(s, \"{:02x}\", byte).expect(\"cant write hex byte to hex buffer\");\r\n    }\r\n    println!(\"{} {}\", s, input.to_string_lossy());\r\n}\r\n```\r\n\r\n</details>\r\n\r\nAs a sanity check against b3sum to make sure the output was the same, here is the output for both. Side note that the release build and the debug builds for the reference take a very similar amount of compile time (both ~1s) due to no dependencies. It may be worth it to enable an `opt-level` for it in the proc macro with a profile override (if we can do it in the proc-macro?) to change the runtime from 0.8s -> 0.03s. Not sure if the overrides work on the proc macro or only the root crate being built\r\n\r\n```\r\nPS C:\\Users\\chip\\Documents\\b3sum-reference> .\\target\\release\\b3sum-reference.exe ..\\..\\Downloads\\vendors_init.js\r\n668031821b2ae54e9856e2b09fbc3403d5052567904fb76f47c9e2e42370bb18 ..\\..\\Downloads\\vendors_init.js\r\nPS C:\\Users\\chip\\Documents\\b3sum-reference> C:\\Users\\chip\\.cargo\\bin\\b3sum.exe --no-mmap --num-threads=1 ..\\..\\Downloads\\vendors_init.js\r\n668031821b2ae54e9856e2b09fbc3403d5052567904fb76f47c9e2e42370bb18  ../../Downloads/vendors_init.js\r\n```\r\n\r\nSummary, if disabling `rayon` doesn't give us enough compile-time gains on `blake3`, using the reference implementation is almost instant to compile, and only 50% slower (of a very fast runtime).\r\n\r\n### `zstd` alternatives\r\n\r\nI started off building `zstd` in that same virtual machine (2 cpu). Clean build took only 13s which seems really low compared to the timings in this issue because that's half the time blake3 build time took with rayon. The timings thinks it takes longer than blake3. Perhaps this is another issue that's difficult to see for all computers.\r\n\r\nI did get a warning while compiling the `zstd-sys` crate of `warning: cl : Command line warning D9002 : ignoring unknown option '-fvisibility=hidden'`, but `cargo test` passes so I don't believe it has an effect.\r\n\r\n#### brotli\r\n\r\nI first checked out brotli because that is actually what I used when first adding compression a long time ago. A clean build of `brotli` took 7s on the VM when `ffi-api` was disabled (compared to 12s). Dropbox's implementation of brotli (the `brotli` crate) includes a few things over the base brotli project, most notably multithreading which brings it back into the performance ballpark of zstd.\r\n\r\nThis is looking promising, so I did some comparisons using the JS vendor file from https://app.element.io (6.7MB). These timings were taken on the same 2 cpu VM. Note that the `brotli` command used was the binary available on the rust crate. Note that brotli's default profile is the same as best.\r\n\r\n| algorithm | profile | time | size |\r\n| --- | --- | --- | --- |\r\n| none | none | 0s | 6.7MB |\r\n| zstd | best | 4s | 1.42MB |\r\n| brotli | best | 12.1s | 1.35MB |\r\n| brotli | 10 | 6.8s | 1.38MB |\r\n| --- | --- | --- | --- |\r\n| zstd | default | 0.07s | 1.81 MB | \r\n| brotli | 2 | 0.08s | 1.83MB |\r\n| --- | --- | --- | --- |\r\n| zstd | 14 | 0.8s | 1.54MB |\r\n| brotli | 9 | 0.8s | 1.51MB |\r\n\r\n\r\nI actually really like `brotli(9)` here, since it's still sub-second compression (and brotli has good decompression) along with a slightly lower file size than the compression-time equivalent of the zstd profile. I think using `brotli(2)` for debug builds and `brotli(9)` for release builds is a good balance. We can always somehow add a `hurt-me-plenty` option that uses best to try and crank out the last kilobytes of the assets at the cost of runtime (during compile time in the codegen) performance for those that really want it.\r\n\r\n`brotli` would be my choice hands down at the replacement. Here's reasons why:\r\n1. Rust implementation is well-maintained (by dropbox)\r\n2. It includes some optional stuff over base brotli including multi-threading\r\n3. Compatible licensing (I think... bsd 3-clause)\r\n4. Faster to compile than `zstd` along with really good sub-second compression options.\r\n\r\n#### miniz_oxide\r\n\r\nA Rust implementation of DEFLATE. Compiles clean in ~2.8s. I didn't look into it further because compression ratio and decompression performance (32k window size) are not ideal. This doesn't really knock it out as a contender, I just prefer the brotli solution first.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1054847558/reactions","total_count":7,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":3,"rocket":0,"eyes":4},"performed_via_github_app":null,"event":"commented","actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1055583696","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1055583696","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1055583696,"node_id":"IC_kwDOC7lts84-6u3Q","user":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T15:48:42Z","updated_at":"2022-03-01T15:48:42Z","body":"Wow, thanks for digging this far. Out of interest, what's the underlying CPU used by the VM? Considering my cpu is a mobile Kaby Lake architecture, that could explain the vast differences. Could you try doing a clean build of [my project](https://github.com/JamesYeoman/dsrbmm) to see if you get similar timings on your machine?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1055583696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1055651307","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1055651307","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1055651307,"node_id":"IC_kwDOC7lts84-6_Xr","user":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T16:57:54Z","updated_at":"2022-03-01T17:05:12Z","body":"> Wow, thanks for digging this far. Out of interest, what's the underlying CPU used by the VM? Considering my cpu is a mobile Kaby Lake architecture, that could explain the vast differences. Could you try doing a clean build of [my project](https://github.com/JamesYeoman/dsrbmm) to see if you get similar timings on your machine?\r\n\r\nHost OS: Windows 10 Pro\r\nHost CPU: AMD Ryzen 7 2700X 8 cores (16 logical)\r\n\r\nI used VirtualBox, with the processor set to 2 cores (out of 16 although only 8 are select-able). Looking at it again, I also had allocated to 8GiB of RAM, which I should probably knock down to 4 the next time I test with it.\r\nGuest OS: Windows 10 Home\r\n\r\nThe timings were just done with PowerShell, using commands like `Measure-Command {brotli --quality=9 vendor-init.js -o vendor-init.js.br}`, typically twice to reduce measuring caching on commands that would be ran multiple times.\r\n\r\nNext time I do tests I can try your project too, although I will probably focus on the `api` example mostly. I plan to work on this sometime today or perhaps slightly later this week.\r\n\r\n---\r\n\r\nA side note that I forgot about until this morning is another reason why I prefer brotli, and why I originally used it in my proof of concept a year ago, is that browsers accept `br` in their `Accept-Encoding` headers. This means that when we detect `br` being accepted by the browser's headers we can directly pass the compressed brotli file to the browser without decompressing it in Tauri.  I think when switching from gzip to zstd it was because the max compression for zstd was 3x faster than brotli, for only a ~5% size difference in the worse cases. Relooking at this and evaluating other brotli level (like -9), I think that they give better tradeoffs in the end. This still leaves us room in the future to add a \"really hurt me with the compression time\" in the future that developers can enable when they are building their final public release build.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1055651307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1055657034","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1055657034","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1055657034,"node_id":"IC_kwDOC7lts84-7AxK","user":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T17:03:08Z","updated_at":"2022-03-01T17:03:08Z","body":"I also have an old Thinkpad T410 which has an Intel Core i5-520M 2.4GHz CPU (2 cores 4 threads) that I can do some of these tests on. I do have the storage upgraded to a SSD and additionally I believe I replaced the RAM to 8GiB. The CPU is still stock though, so it should be a good test of a CPU constrained build. I will probably stick to Linux when testing on it, but maybe if I want to feel the pain I can try and get a windows install on there too.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1055657034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-04T05:35:37Z","updated_at":"2022-03-04T05:35:37Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/228","repository_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3","labels_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/228/labels{/name}","comments_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/228/comments","events_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/228/events","html_url":"https://github.com/BLAKE3-team/BLAKE3/pull/228","id":1159230529,"node_id":"PR_kwDODSjRes4z7x5g","number":228,"title":"publish reference implementation as a crate","user":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-03-04T04:28:37Z","updated_at":"2025-02-17T23:17:52Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":220778874,"node_id":"MDEwOlJlcG9zaXRvcnkyMjA3Nzg4NzQ=","name":"BLAKE3","full_name":"BLAKE3-team/BLAKE3","private":false,"owner":{"login":"BLAKE3-team","id":57586839,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU3NTg2ODM5","avatar_url":"https://avatars.githubusercontent.com/u/57586839?v=4","gravatar_id":"","url":"https://api.github.com/users/BLAKE3-team","html_url":"https://github.com/BLAKE3-team","followers_url":"https://api.github.com/users/BLAKE3-team/followers","following_url":"https://api.github.com/users/BLAKE3-team/following{/other_user}","gists_url":"https://api.github.com/users/BLAKE3-team/gists{/gist_id}","starred_url":"https://api.github.com/users/BLAKE3-team/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BLAKE3-team/subscriptions","organizations_url":"https://api.github.com/users/BLAKE3-team/orgs","repos_url":"https://api.github.com/users/BLAKE3-team/repos","events_url":"https://api.github.com/users/BLAKE3-team/events{/privacy}","received_events_url":"https://api.github.com/users/BLAKE3-team/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BLAKE3-team/BLAKE3","description":"the official Rust and C implementations of the BLAKE3 cryptographic hash function","fork":false,"url":"https://api.github.com/repos/BLAKE3-team/BLAKE3","forks_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/forks","keys_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/teams","hooks_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/hooks","issue_events_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/events{/number}","events_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/events","assignees_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/assignees{/user}","branches_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/branches{/branch}","tags_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/tags","blobs_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/git/refs{/sha}","trees_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/statuses/{sha}","languages_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/languages","stargazers_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/stargazers","contributors_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/contributors","subscribers_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/subscribers","subscription_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/subscription","commits_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/commits{/sha}","git_commits_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/git/commits{/sha}","comments_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/comments{/number}","issue_comment_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/comments{/number}","contents_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/contents/{+path}","compare_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/merges","archive_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/downloads","issues_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues{/number}","pulls_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/pulls{/number}","milestones_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/milestones{/number}","notifications_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/labels{/name}","releases_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/releases{/id}","deployments_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/deployments","created_at":"2019-11-10T11:15:44Z","updated_at":"2025-11-09T19:43:59Z","pushed_at":"2025-10-30T17:51:18Z","git_url":"git://github.com/BLAKE3-team/BLAKE3.git","ssh_url":"git@github.com:BLAKE3-team/BLAKE3.git","clone_url":"https://github.com/BLAKE3-team/BLAKE3.git","svn_url":"https://github.com/BLAKE3-team/BLAKE3","homepage":"","size":2217,"stargazers_count":5879,"watchers_count":5879,"language":"Assembly","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":411,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":179,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":411,"open_issues":179,"watchers":5879,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/pulls/228","html_url":"https://github.com/BLAKE3-team/BLAKE3/pull/228","diff_url":"https://github.com/BLAKE3-team/BLAKE3/pull/228.diff","patch_url":"https://github.com/BLAKE3-team/BLAKE3/pull/228.patch","merged_at":null},"body":"Hi, I'm making this as a PR instead of an issue just so that I can kick-start this potentially happening, feel free to treat it more like an issue.\r\n\r\nstarting off with a few things related to the actual code changes:\r\n1. I intentionally kept the file structure the same\r\n2. I made the version as `1.0.0` because the main crate is already major version 1 and this reference seems rather stable change-wise\r\n3. I licensed it same as the main crate explicitly since it was previously ambiguous\r\n4. I added the clippy commit separately so that it can be reverted easily if wanted\r\n    * `Default` for `Hasher`\r\n    * `u64` enumeration with `.zip()` instead of manual counter\r\n5. I used underscore instead of a hypen since it seems like other blake3 stuff leans towards that\r\n\r\n# why a crate?\r\n\r\nI've found that using the reference implementation is very desirable when using it inside build-time scripts and codegen dependencies. Even though the code is slower during runtime, it takes a magnitude longer to compile. This becomes especially exasperated when building alongside a lot of other dependencies and `blake3` becomes a single unit being compiled alongside many other crates.\r\n\r\nBecause the runtime during codegen crates is also compile time, sacrificing small runtime performance penalties while gaining a magnitude more time during the original compilation usually results in large compile time gains. Of course this depends on what the codegen is doing, but in our case we are bundling already-built web front-ends to embed in our resulting binary while using `blake3` to prevent extra preprocessing work during dirty builds. This typically means number of iterations is well within a couple dozen files.\r\n\r\nI measured this on a CPU constrained computer to show the effect of this easier (ThinkPad T410 Intel i5-520M 2c/4t). The following runtime timings come from this laptop using `hyperfine` and the compile times from the `--timings` flag on cargo.\r\n\r\nRuntime (a simplified custom b3sum utility ran on a 6.8MiB JavaScript file):\r\n<details>\r\n\r\n<summary>The custom b3sum code</summary>\r\n\r\nNotably, I used the same code for both crates, with exception of not needing to create the `[u8; 32]` manually.\r\n\r\n```rust\r\nuse crate::reference::Hasher;\r\nuse std::env::args_os;\r\nuse std::fmt::Write;\r\nuse std::fs::File;\r\nuse std::io::{self, Read};\r\n\r\nmod reference;\r\n\r\nfn copy_wide(mut reader: impl Read, hasher: &mut reference::Hasher) -> io::Result<u64> {\r\n    let mut buffer = [0; 65536];\r\n    let mut total = 0;\r\n    loop {\r\n        match reader.read(&mut buffer) {\r\n            Ok(0) => return Ok(total),\r\n            Ok(n) => {\r\n                hasher.update(&buffer[..n]);\r\n                total += n as u64;\r\n            }\r\n            Err(ref e) if e.kind() == io::ErrorKind::Interrupted => continue,\r\n            Err(e) => return Err(e),\r\n        }\r\n    }\r\n}\r\n\r\nfn main() {\r\n    let input = args_os().nth(1).expect(\"at least 1 argument of file path\");\r\n    let file = File::open(&input).expect(\"unable to open up input file path\");\r\n    let mut hasher = Hasher::new();\r\n    let _copied = copy_wide(file, &mut hasher).expect(\"io error while copying file to hasher\");\r\n    let mut output = [0u8; 32];\r\n    hasher.finalize(&mut output);\r\n    let mut s = String::with_capacity(2 * output.len());\r\n    for byte in output {\r\n        write!(s, \"{:02x}\", byte).expect(\"cant write hex byte to hex buffer\");\r\n    }\r\n    println!(\"{} {}\", s, input.to_string_lossy());\r\n}\r\n```\r\n\r\n</details>\r\n\r\n| crate | features | compile time | run time |\r\n| --- | --- | --- | --- |\r\n| `blake3` | `rayon` | 19.2s | 8.7ms |\r\n| `blake3` | | 8.5s | 14.9ms |\r\n| `blake3_reference` | | 1.5s | 37.9ms |\r\n\r\nThis is the best-case scenario, compilation times where only that small custom b3sum is using CPU. Even so, it would take ~600 items for the rayon version to catch up with the reference version in a codegen situation and around ~300 for the non-rayon version.\r\n\r\nUnfortunately, this doesn't behave linearly when thrown in with a lot of other dependencies compiling at the same time. Due to out other big dependency also building C code during its build script (`zstd`), these happen to be exasperated. The following is the timings (compile time only) while building [Tauri's API example](https://github.com/tauri-apps/tauri/tree/dev/examples/api).\r\n| crate | profile | compile time |\r\n| --- | --- | --- |\r\n| `zstd-sys build script (run)` | `dev` | 215.88s |\r\n| `blake3 build script (run)` | `dev` | 143.89s |\r\n| --- | --- | --- |\r\n| `zstd-sys build script (run)` | `release` | 243.98s |\r\n| `blake3 build script (run)` | `release` | 145.75s |\r\n\r\nI compare against `zstd` (who is impacted even worse by this) because these 2 build scripts take up a significant chunk of the compile time. We are also looking to replace `zstd` with something that isn't compiling C to alleviate this. These large compile times is really what caused me to look into this and realize that the reference is a great balance for codegen crates depending on their characteristics.\r\n\r\nNotably, the reference seems to not have a problem and still compiles in 1.5s in both profiles (due to the simple code). So if we were to do our earlier comparison of how many hashes would need to be generated to be worth it we would arrive at (using the dev profile) at just under ~4900 items for the rayon version compared to the reference.\r\n\r\nI would also like to point out that the item in this case is `6.8MiB`, and really represents X amount of times of bytes rather than files. Since this file was the vendor file of a large JavaScript application, it is also the majority of the size for most applications so it could also be seen that we are saying X times in size of the application rather than individual files.\r\n\r\n## again, why the crate?\r\n\r\nThis doesn't really **need** to be a crate, but I figured this was better than manually vendoring. We would get any reference changes (checking the git history they are typically small and long in-between with little logic changes) in the future without needing to worry about being potentially out-of-date. I also believe that this could be useful for other projects in our position where they use `blake3` during codegen, and so runtime and compile time become additive.\r\n\r\n---\r\n\r\nLet me know if there are any changes you want me to make or any thoughts/questions you might have. Feel free to change anything in this PR before merging.\r\n","reactions":{"url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BLAKE3-team/BLAKE3/issues/228/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1061878896","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1061878896","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1061878896,"node_id":"IC_kwDOC7lts84_Svxw","user":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T15:08:58Z","updated_at":"2022-03-08T15:08:58Z","body":"I'm glad I'm not just going insane! That's some impressive performance problem recreation there, chippers. And it just goes to show how a little bit of insight to how tools operate can be a massive boon ðŸ˜„\r\n\r\nAs for the zstd improvement when it's the sole crate that is building C code, I wonder if as a stopgap solution, it's possible to use zstd without a sys crate, or at least a rust-native implementation of the sys crate. Obviously the route forward is to use Brotli, but I imagine that would take some refactoring. So if there was a way to at least lessen the impact of zstd, with minimal effort, then it's probably worth putting in place in the meantime","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1061878896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1064614390","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1064614390","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1064614390,"node_id":"IC_kwDOC7lts84_dLn2","user":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T23:20:59Z","updated_at":"2022-03-10T23:20:59Z","body":"It's easier to switch to brotli as changing zstd implementations would mean there needs to be a good quality rust only crate of it, which I don't believe exists. As is, it's rather encapsulated because it decompresses before handing it off to the asset handler. We can leave handing it over still compressed until later as a performance gain. I have a branch on that ThinkPad that replaces `zstd`, `blake3`, and `ring` but I haven't uploaded it because I didn't set up my ssh keys or gpg key on it yet. I'll do that and PR it.  I was hoping maybe to use the blake3 reference as a crate but that can be done later once a decision on that is made.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1064614390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"ImmaZoni","id":31865152,"node_id":"MDQ6VXNlcjMxODY1MTUy","avatar_url":"https://avatars.githubusercontent.com/u/31865152?v=4","gravatar_id":"","url":"https://api.github.com/users/ImmaZoni","html_url":"https://github.com/ImmaZoni","followers_url":"https://api.github.com/users/ImmaZoni/followers","following_url":"https://api.github.com/users/ImmaZoni/following{/other_user}","gists_url":"https://api.github.com/users/ImmaZoni/gists{/gist_id}","starred_url":"https://api.github.com/users/ImmaZoni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ImmaZoni/subscriptions","organizations_url":"https://api.github.com/users/ImmaZoni/orgs","repos_url":"https://api.github.com/users/ImmaZoni/repos","events_url":"https://api.github.com/users/ImmaZoni/events{/privacy}","received_events_url":"https://api.github.com/users/ImmaZoni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T22:38:31Z","updated_at":"2022-03-16T22:38:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/97","repository_url":"https://api.github.com/repos/autonomys/subspace-desktop","labels_url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/97/labels{/name}","comments_url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/97/comments","events_url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/97/events","html_url":"https://github.com/autonomys/subspace-desktop/issues/97","id":1170755488,"node_id":"I_kwDOFwiT-M5FyE-g","number":97,"title":"tauri upgrade problem","user":{"login":"ozgunozerk","id":32795992,"node_id":"MDQ6VXNlcjMyNzk1OTky","avatar_url":"https://avatars.githubusercontent.com/u/32795992?v=4","gravatar_id":"","url":"https://api.github.com/users/ozgunozerk","html_url":"https://github.com/ozgunozerk","followers_url":"https://api.github.com/users/ozgunozerk/followers","following_url":"https://api.github.com/users/ozgunozerk/following{/other_user}","gists_url":"https://api.github.com/users/ozgunozerk/gists{/gist_id}","starred_url":"https://api.github.com/users/ozgunozerk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozgunozerk/subscriptions","organizations_url":"https://api.github.com/users/ozgunozerk/orgs","repos_url":"https://api.github.com/users/ozgunozerk/repos","events_url":"https://api.github.com/users/ozgunozerk/events{/privacy}","received_events_url":"https://api.github.com/users/ozgunozerk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":{"login":"nazar-pc","id":928965,"node_id":"MDQ6VXNlcjkyODk2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/928965?v=4","gravatar_id":"","url":"https://api.github.com/users/nazar-pc","html_url":"https://github.com/nazar-pc","followers_url":"https://api.github.com/users/nazar-pc/followers","following_url":"https://api.github.com/users/nazar-pc/following{/other_user}","gists_url":"https://api.github.com/users/nazar-pc/gists{/gist_id}","starred_url":"https://api.github.com/users/nazar-pc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nazar-pc/subscriptions","organizations_url":"https://api.github.com/users/nazar-pc/orgs","repos_url":"https://api.github.com/users/nazar-pc/repos","events_url":"https://api.github.com/users/nazar-pc/events{/privacy}","received_events_url":"https://api.github.com/users/nazar-pc/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"nazar-pc","id":928965,"node_id":"MDQ6VXNlcjkyODk2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/928965?v=4","gravatar_id":"","url":"https://api.github.com/users/nazar-pc","html_url":"https://github.com/nazar-pc","followers_url":"https://api.github.com/users/nazar-pc/followers","following_url":"https://api.github.com/users/nazar-pc/following{/other_user}","gists_url":"https://api.github.com/users/nazar-pc/gists{/gist_id}","starred_url":"https://api.github.com/users/nazar-pc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nazar-pc/subscriptions","organizations_url":"https://api.github.com/users/nazar-pc/orgs","repos_url":"https://api.github.com/users/nazar-pc/repos","events_url":"https://api.github.com/users/nazar-pc/events{/privacy}","received_events_url":"https://api.github.com/users/nazar-pc/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-16T09:28:14Z","updated_at":"2022-03-24T14:00:39Z","closed_at":"2022-03-24T14:00:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":386438136,"node_id":"MDEwOlJlcG9zaXRvcnkzODY0MzgxMzY=","name":"subspace-desktop","full_name":"autonomys/subspace-desktop","private":false,"owner":{"login":"autonomys","id":38735363,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4NzM1MzYz","avatar_url":"https://avatars.githubusercontent.com/u/38735363?v=4","gravatar_id":"","url":"https://api.github.com/users/autonomys","html_url":"https://github.com/autonomys","followers_url":"https://api.github.com/users/autonomys/followers","following_url":"https://api.github.com/users/autonomys/following{/other_user}","gists_url":"https://api.github.com/users/autonomys/gists{/gist_id}","starred_url":"https://api.github.com/users/autonomys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/autonomys/subscriptions","organizations_url":"https://api.github.com/users/autonomys/orgs","repos_url":"https://api.github.com/users/autonomys/repos","events_url":"https://api.github.com/users/autonomys/events{/privacy}","received_events_url":"https://api.github.com/users/autonomys/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/autonomys/subspace-desktop","description":"A simple desktop farmer for the Subspace Network","fork":false,"url":"https://api.github.com/repos/autonomys/subspace-desktop","forks_url":"https://api.github.com/repos/autonomys/subspace-desktop/forks","keys_url":"https://api.github.com/repos/autonomys/subspace-desktop/keys{/key_id}","collaborators_url":"https://api.github.com/repos/autonomys/subspace-desktop/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/autonomys/subspace-desktop/teams","hooks_url":"https://api.github.com/repos/autonomys/subspace-desktop/hooks","issue_events_url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/events{/number}","events_url":"https://api.github.com/repos/autonomys/subspace-desktop/events","assignees_url":"https://api.github.com/repos/autonomys/subspace-desktop/assignees{/user}","branches_url":"https://api.github.com/repos/autonomys/subspace-desktop/branches{/branch}","tags_url":"https://api.github.com/repos/autonomys/subspace-desktop/tags","blobs_url":"https://api.github.com/repos/autonomys/subspace-desktop/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/autonomys/subspace-desktop/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/autonomys/subspace-desktop/git/refs{/sha}","trees_url":"https://api.github.com/repos/autonomys/subspace-desktop/git/trees{/sha}","statuses_url":"https://api.github.com/repos/autonomys/subspace-desktop/statuses/{sha}","languages_url":"https://api.github.com/repos/autonomys/subspace-desktop/languages","stargazers_url":"https://api.github.com/repos/autonomys/subspace-desktop/stargazers","contributors_url":"https://api.github.com/repos/autonomys/subspace-desktop/contributors","subscribers_url":"https://api.github.com/repos/autonomys/subspace-desktop/subscribers","subscription_url":"https://api.github.com/repos/autonomys/subspace-desktop/subscription","commits_url":"https://api.github.com/repos/autonomys/subspace-desktop/commits{/sha}","git_commits_url":"https://api.github.com/repos/autonomys/subspace-desktop/git/commits{/sha}","comments_url":"https://api.github.com/repos/autonomys/subspace-desktop/comments{/number}","issue_comment_url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/comments{/number}","contents_url":"https://api.github.com/repos/autonomys/subspace-desktop/contents/{+path}","compare_url":"https://api.github.com/repos/autonomys/subspace-desktop/compare/{base}...{head}","merges_url":"https://api.github.com/repos/autonomys/subspace-desktop/merges","archive_url":"https://api.github.com/repos/autonomys/subspace-desktop/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/autonomys/subspace-desktop/downloads","issues_url":"https://api.github.com/repos/autonomys/subspace-desktop/issues{/number}","pulls_url":"https://api.github.com/repos/autonomys/subspace-desktop/pulls{/number}","milestones_url":"https://api.github.com/repos/autonomys/subspace-desktop/milestones{/number}","notifications_url":"https://api.github.com/repos/autonomys/subspace-desktop/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/autonomys/subspace-desktop/labels{/name}","releases_url":"https://api.github.com/repos/autonomys/subspace-desktop/releases{/id}","deployments_url":"https://api.github.com/repos/autonomys/subspace-desktop/deployments","created_at":"2021-07-15T22:18:09Z","updated_at":"2024-09-26T20:44:16Z","pushed_at":"2024-01-31T09:48:33Z","git_url":"git://github.com/autonomys/subspace-desktop.git","ssh_url":"git@github.com:autonomys/subspace-desktop.git","clone_url":"https://github.com/autonomys/subspace-desktop.git","svn_url":"https://github.com/autonomys/subspace-desktop","homepage":"","size":9484,"stargazers_count":64,"watchers_count":64,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":22,"mirror_url":null,"archived":true,"disabled":false,"open_issues_count":28,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":22,"open_issues":28,"watchers":64,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"When we try to upgrade tauri dependency in subspace-desktop, it cannot due to a conflict between substrate and tauri dependencies.\r\nNamely, zstd and zstd-safe.\r\n\r\nHere is the detailed error when we change tauri dependencies to the latest one `rc-4` in the cargo.toml of subspace-desktop:\r\n\r\n```\r\ncargo check\r\n    Updating crates.io index\r\nerror: failed to select a version for `zstd-safe`.\r\n    ... required by package `zstd v0.9.0+zstd.1.5.0`\r\n    ... which satisfies dependency `zstd = \"^0.9.0\"` of package `sp-maybe-compressed-blob v4.1.0-dev (https://github.com/paritytech/substrate?rev=e6def65920d30029e42d498cb07cec5dd433b927#e6def659)`\r\n    ... which satisfies git dependency `sp-maybe-compressed-blob` (locked to 4.1.0-dev) of package `polkadot-node-collation-generation v0.9.13 (https://github.com/subspace/subspace?rev=042302ed2c86abd765be56c93b6f3ee535a1573a#042302ed)`\r\n    ... which satisfies git dependency `polkadot-node-collation-generation` (locked to 0.9.13) of package `subspace-service v0.1.0 (https://github.com/subspace/subspace?rev=042302ed2c86abd765be56c93b6f3ee535a1573a#042302ed)`\r\n    ... which satisfies git dependency `subspace-service` (locked to 0.1.0) of package `subspace-desktop v0.2.1 (/Users/ozgunozerk/IdeaProjects/subspace-desktop/src-tauri)`\r\nversions that meet the requirements `=4.1.1` are: 4.1.1+zstd.1.5.0\r\n\r\nall possible versions conflict with previously selected packages.\r\n\r\n  previously selected package `zstd-safe v4.1.4+zstd.1.5.2`\r\n    ... which satisfies dependency `zstd-safe = \"=4.1.4\"` of package `zstd v0.10.0+zstd.1.5.2`\r\n    ... which satisfies dependency `zstd = \"^0.10\"` of package `tauri-codegen v1.0.0-rc.3`\r\n    ... which satisfies dependency `tauri-codegen = \"^1.0.0-rc.3\"` of package `tauri-macros v1.0.0-rc.3`\r\n    ... which satisfies dependency `tauri-macros = \"^1.0.0-rc.3\"` of package `tauri v1.0.0-rc.4`\r\n    ... which satisfies dependency `tauri = \"^1.0.0-rc.4\"` of package `subspace-desktop v0.2.1 (/Users/ozgunozerk/IdeaProjects/subspace-desktop/src-tauri)`\r\n\r\nfailed to select a version for `zstd-safe` which could resolve this conflict\r\n```\r\n\r\nFixes:\r\n* [ ] change upstream `zstd` to not fix `zstd-safe` version (https://github.com/gyscos/zstd-rs/issues/147)\r\n* [ ] upgrade `zstd` in Tauri\r\n* [ ] upgrade `zstd` in Substrate","reactions":{"url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/97/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomys/subspace-desktop/issues/97/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-24T20:59:39Z","updated_at":"2022-03-24T20:59:39Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3773","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3773/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3773/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3773/events","html_url":"https://github.com/tauri-apps/tauri/pull/3773","id":1180049883,"node_id":"PR_kwDOC7lts840-q1h","number":3773,"title":"replace dependencies with long build times when used together (closes #3571)","user":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2022-03-24T20:59:38Z","updated_at":"2023-05-07T18:34:47Z","closed_at":"2022-03-27T23:52:43Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":196701619,"node_id":"MDEwOlJlcG9zaXRvcnkxOTY3MDE2MTk=","name":"tauri","full_name":"tauri-apps/tauri","private":false,"owner":{"login":"tauri-apps","id":54536011,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU0NTM2MDEx","avatar_url":"https://avatars.githubusercontent.com/u/54536011?v=4","gravatar_id":"","url":"https://api.github.com/users/tauri-apps","html_url":"https://github.com/tauri-apps","followers_url":"https://api.github.com/users/tauri-apps/followers","following_url":"https://api.github.com/users/tauri-apps/following{/other_user}","gists_url":"https://api.github.com/users/tauri-apps/gists{/gist_id}","starred_url":"https://api.github.com/users/tauri-apps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tauri-apps/subscriptions","organizations_url":"https://api.github.com/users/tauri-apps/orgs","repos_url":"https://api.github.com/users/tauri-apps/repos","events_url":"https://api.github.com/users/tauri-apps/events{/privacy}","received_events_url":"https://api.github.com/users/tauri-apps/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/tauri-apps/tauri","description":"Build smaller, faster, and more secure desktop and mobile applications with a web frontend.","fork":false,"url":"https://api.github.com/repos/tauri-apps/tauri","forks_url":"https://api.github.com/repos/tauri-apps/tauri/forks","keys_url":"https://api.github.com/repos/tauri-apps/tauri/keys{/key_id}","collaborators_url":"https://api.github.com/repos/tauri-apps/tauri/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/tauri-apps/tauri/teams","hooks_url":"https://api.github.com/repos/tauri-apps/tauri/hooks","issue_events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/events{/number}","events_url":"https://api.github.com/repos/tauri-apps/tauri/events","assignees_url":"https://api.github.com/repos/tauri-apps/tauri/assignees{/user}","branches_url":"https://api.github.com/repos/tauri-apps/tauri/branches{/branch}","tags_url":"https://api.github.com/repos/tauri-apps/tauri/tags","blobs_url":"https://api.github.com/repos/tauri-apps/tauri/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/tauri-apps/tauri/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/tauri-apps/tauri/git/refs{/sha}","trees_url":"https://api.github.com/repos/tauri-apps/tauri/git/trees{/sha}","statuses_url":"https://api.github.com/repos/tauri-apps/tauri/statuses/{sha}","languages_url":"https://api.github.com/repos/tauri-apps/tauri/languages","stargazers_url":"https://api.github.com/repos/tauri-apps/tauri/stargazers","contributors_url":"https://api.github.com/repos/tauri-apps/tauri/contributors","subscribers_url":"https://api.github.com/repos/tauri-apps/tauri/subscribers","subscription_url":"https://api.github.com/repos/tauri-apps/tauri/subscription","commits_url":"https://api.github.com/repos/tauri-apps/tauri/commits{/sha}","git_commits_url":"https://api.github.com/repos/tauri-apps/tauri/git/commits{/sha}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/comments{/number}","issue_comment_url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments{/number}","contents_url":"https://api.github.com/repos/tauri-apps/tauri/contents/{+path}","compare_url":"https://api.github.com/repos/tauri-apps/tauri/compare/{base}...{head}","merges_url":"https://api.github.com/repos/tauri-apps/tauri/merges","archive_url":"https://api.github.com/repos/tauri-apps/tauri/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/tauri-apps/tauri/downloads","issues_url":"https://api.github.com/repos/tauri-apps/tauri/issues{/number}","pulls_url":"https://api.github.com/repos/tauri-apps/tauri/pulls{/number}","milestones_url":"https://api.github.com/repos/tauri-apps/tauri/milestones{/number}","notifications_url":"https://api.github.com/repos/tauri-apps/tauri/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/tauri-apps/tauri/labels{/name}","releases_url":"https://api.github.com/repos/tauri-apps/tauri/releases{/id}","deployments_url":"https://api.github.com/repos/tauri-apps/tauri/deployments","created_at":"2019-07-13T09:09:37Z","updated_at":"2025-11-10T01:06:22Z","pushed_at":"2025-11-09T12:12:52Z","git_url":"git://github.com/tauri-apps/tauri.git","ssh_url":"git@github.com:tauri-apps/tauri.git","clone_url":"https://github.com/tauri-apps/tauri.git","svn_url":"https://github.com/tauri-apps/tauri","homepage":"https://tauri.app","size":99732,"stargazers_count":98712,"watchers_count":98712,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":3155,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1224,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["desktop-app","high-performance","mobile-app","native-app","rust","web-frontend","webview"],"visibility":"public","forks":3155,"open_issues":1224,"watchers":98712,"default_branch":"dev","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/tauri-apps/tauri/pulls/3773","html_url":"https://github.com/tauri-apps/tauri/pull/3773","diff_url":"https://github.com/tauri-apps/tauri/pull/3773.diff","patch_url":"https://github.com/tauri-apps/tauri/pull/3773.patch","merged_at":"2022-03-27T23:52:43Z"},"body":"<!--\r\nUpdate \"[ ]\" to \"[x]\" to check a box\r\n\r\nPlease make sure to read the Pull Request Guidelines: https://github.com/tauri-apps/tauri/blob/dev/.github/CONTRIBUTING.md#pull-request-guidelines\r\n-->\r\n\r\n### What kind of change does this PR introduce?\r\n<!-- Check at least one. If you are introducing a new binding, you must reference an issue where this binding has been proposed, discussed and approved by the maintainers. -->\r\n\r\n- [x] Bugfix\r\n- [ ] Feature\r\n- [ ] Docs\r\n- [ ] New Binding issue #___\r\n- [ ] Code style update\r\n- [x] Refactor\r\n- [x] Build-related changes\r\n- [ ] Other, please describe:\r\n\r\n### Does this PR introduce a breaking change?\r\n<!-- If yes, please describe the impact and migration path for existing applications in an attached issue. -->\r\n\r\n- [ ] Yes, and the changes were approved in issue #___\r\n- [x] No\r\n\r\n### Checklist\r\n- [ ] When resolving issues, they are referenced in the PR's title (e.g `fix: remove a typo, closes #___, #___`)\r\n- [x] A change file is added if any packages will require a version bump due to this PR per [the instructions in the readme](https://github.com/tauri-apps/tauri/blob/dev/.changes/readme.md).\r\n- [x] I have added a convincing reason for adding this feature, if necessary\r\n\r\n### Other information\r\nWhen `ring`, `zstd`, and `blake3` where built at the same time, their build scripts that span `cc` will run concurrently (even if limited by `--jobs=1`). This would cause massively inflated build times for dependencies that otherwise aren't too bad to build.\r\n\r\nThe following dependency changes were made after looking into it in #3571 \r\n| original | new | note |\r\n| --- | --- | --- |\r\n| `zstd` | `brotli` | Hand-picked compression levels were picked for good time vs size ratio |\r\n| `blake3` | none | We now vendor the [blake3 reference implementation](https://github.com/BLAKE3-team/BLAKE3/tree/master/reference_impl) inside `tauri-codegen` |\r\n| `ring` | `getrandom` | `getrandom` is also a CSPRNG that utilizes the OS's calls for secure random numbers. It is much more focused and smaller for our requirements. |","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3773/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1079114930","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1079114930","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1079114930,"node_id":"IC_kwDOC7lts85AUfyy","user":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-25T15:00:34Z","updated_at":"2022-03-25T15:00:34Z","body":"Ok, so an update on the situation: Chip is a literal god, pulling a full 20% performance increase with https://github.com/tauri-apps/tauri/pull/3773 ðŸŽ‰ \r\n\r\nThere ended up being literally no crates that take longer than 20 seconds to compile, so I had to reduce the min unit time slider to 15 seconds\r\n![image](https://user-images.githubusercontent.com/21042602/160144447-54d26e40-fb18-4ea5-8bc5-9652a5bea300.png)\r\n\r\nLooks like Serde, Tao, and tauri-utils are now the biggest hitters in the compile time.\r\n\r\nFor those interested, here's a [gist containing the full cargo timings report html](https://gist.github.com/JamesYeoman/4340a43746b92e17447c337ed5a8a3d4) if you decide you want to ~~inflict pain upon yourself~~ explore the timings further.\r\n\r\nOh, and [here's a link to my comment on Chip's PR](https://github.com/tauri-apps/tauri/pull/3773#issuecomment-1079100158).\r\n\r\nAs a reminder, I did this using the dev configuration [here](https://github.com/JamesYeoman/dsrbmm/blob/f48e0c1104ac3f82af8e046f425533152157da15/packages/tauri/Cargo.toml#L22), disabling all optimisations, and running `cargo clean` before running `cargo +nightly build --timings`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1079114930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JamesYeoman","id":21042602,"node_id":"MDQ6VXNlcjIxMDQyNjAy","avatar_url":"https://avatars.githubusercontent.com/u/21042602?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesYeoman","html_url":"https://github.com/JamesYeoman","followers_url":"https://api.github.com/users/JamesYeoman/followers","following_url":"https://api.github.com/users/JamesYeoman/following{/other_user}","gists_url":"https://api.github.com/users/JamesYeoman/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesYeoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesYeoman/subscriptions","organizations_url":"https://api.github.com/users/JamesYeoman/orgs","repos_url":"https://api.github.com/users/JamesYeoman/repos","events_url":"https://api.github.com/users/JamesYeoman/events{/privacy}","received_events_url":"https://api.github.com/users/JamesYeoman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1079191641","html_url":"https://github.com/tauri-apps/tauri/issues/3571#issuecomment-1079191641","issue_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3571","id":1079191641,"node_id":"IC_kwDOC7lts85AUyhZ","user":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-25T16:25:18Z","updated_at":"2022-03-25T16:25:43Z","body":"The `tauri-utils` building twice is probably due to it building inside a proc-macro crate along with non proc-macro dependencies. A little strange since the codegen features are a strict subset of the non-one, but I recall this being a difference in the new cargo resolution where it allows different copies for build deps vs deps. Maybe we can find a way to share it again.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/comments/1079191641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chippers","id":3301043,"node_id":"MDQ6VXNlcjMzMDEwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3301043?v=4","gravatar_id":"","url":"https://api.github.com/users/chippers","html_url":"https://github.com/chippers","followers_url":"https://api.github.com/users/chippers/followers","following_url":"https://api.github.com/users/chippers/following{/other_user}","gists_url":"https://api.github.com/users/chippers/gists{/gist_id}","starred_url":"https://api.github.com/users/chippers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chippers/subscriptions","organizations_url":"https://api.github.com/users/chippers/orgs","repos_url":"https://api.github.com/users/chippers/repos","events_url":"https://api.github.com/users/chippers/events{/privacy}","received_events_url":"https://api.github.com/users/chippers/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6314437585,"node_id":"CE_lADOC7lts85EyUY-zwAAAAF4XqvR","url":"https://api.github.com/repos/tauri-apps/tauri/issues/events/6314437585","actor":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"8661e3e24d96c399bfbcdee5d8e9d6beba2265a7","commit_url":"https://api.github.com/repos/tauri-apps/tauri/commits/8661e3e24d96c399bfbcdee5d8e9d6beba2265a7","created_at":"2022-03-27T23:52:45Z","state_reason":null,"performed_via_github_app":null}]