{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4612","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4612/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4612/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4612/events","html_url":"https://github.com/tauri-apps/tauri/issues/4612","id":1296999271,"node_id":"I_kwDOC7lts85NTqNn","number":4612,"title":"[bug] Failed to open devtools programatically","user":{"login":"JSoon","id":7589350,"node_id":"MDQ6VXNlcjc1ODkzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/7589350?v=4","gravatar_id":"","url":"https://api.github.com/users/JSoon","html_url":"https://github.com/JSoon","followers_url":"https://api.github.com/users/JSoon/followers","following_url":"https://api.github.com/users/JSoon/following{/other_user}","gists_url":"https://api.github.com/users/JSoon/gists{/gist_id}","starred_url":"https://api.github.com/users/JSoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSoon/subscriptions","organizations_url":"https://api.github.com/users/JSoon/orgs","repos_url":"https://api.github.com/users/JSoon/repos","events_url":"https://api.github.com/users/JSoon/events{/privacy}","received_events_url":"https://api.github.com/users/JSoon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3310698683,"node_id":"MDU6TGFiZWwzMzEwNjk4Njgz","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20macOS","name":"platform: macOS","color":"fef2c0","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-07-07T08:09:01Z","updated_at":"2022-07-07T17:58:41Z","closed_at":"2022-07-07T17:58:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nTo be honest, I am a newcomer to Rust. So I just follow the [tauri-docs](https://tauri.app/v1/guides/debugging/application#opening-devtools-programatically) to open devtools like this:\r\n\r\n**main.rs**\r\n```rust\r\nfn main() {\r\n  use tauri::Manager;\r\n  let context = tauri::generate_context!();\r\n  tauri::Builder::default()\r\n    .setup(|app| {\r\n      #[cfg(debug_assertions)] // only include this code on debug builds\r\n      {\r\n        let window = app.get_window(\"main\").unwrap();\r\n        window.open_devtools();\r\n        // window.close_devtools();\r\n      }\r\n      Ok(())\r\n    })\r\n    .menu(tauri::Menu::os_default(&context.package_info().name))\r\n    .invoke_handler(tauri::generate_handler![greet])\r\n    .run(context)\r\n    .expect(\"error while running tauri application\");\r\n}\r\n```\r\n\r\nIt did not work and I cannot figure it out myself.\n\n### Reproduction\n\nRUST_BACKTRACE=1 tauri dev --verbose\n\n### Expected behavior\n\nThe devtools opened after running the app.\n\n### Platform and versions\n\n```shell\nEnvironment\r\n  › OS: Mac OS 10.13.6 X64\r\n  › Node.js: 14.18.0\r\n  › npm: 6.14.15\r\n  › pnpm: 7.2.1\r\n  › yarn: 1.22.19\r\n  › rustup: 1.24.3\r\n  › rustc: 1.61.0\r\n  › cargo: 1.61.0\r\n  › Rust toolchain: stable-x86_64-apple-darwin \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.0.1\r\n  › @tauri-apps/api [NPM]: 1.0.2\r\n  › tauri [RUST]: 1.0.3,\r\n  › tauri-build [RUST]: 1.0.3,\r\n  › tao [RUST]: 0.12.1,\r\n  › wry [RUST]: 0.19.0,\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: ../dist\r\n  › devPath: http://localhost:3000/\r\n  › framework: Vue.js\r\n\r\nApp directory structure\r\n  ├─ dist\r\n  ├─ node_modules\r\n  ├─ public\r\n  ├─ dist-isolation\r\n  ├─ src-tauri\r\n  ├─ .git\r\n  ├─ .vscode\r\n  └─ src\n```\n\n\n### Stack trace\n\n```shell\n2022-07-07 15:43:29.684119+0800 app[67485:1383460] NSWindow warning: adding an unknown subview: <WKInspectorWKWebView: 0x1030b0650>. Break on NSLog to debug.\r\n2022-07-07 15:43:29.701887+0800 app[67485:1383460] Call stack:\r\n(\r\n        0   AppKit                              0x00007fff2dec8285 -[NSThemeFrame addSubview:] + 109\r\n        1   AppKit                              0x00007fff2dec80c2 -[NSView addSubview:positioned:relativeTo:] + 214\r\n        2   AppKit                              0x00007fff2e704561 -[NSThemeFrame addSubview:positioned:relativeTo:] + 42\r\n        3   WebKit                              0x00007fff3f540099 _ZN6WebKit17WebInspectorProxy14platformAttachEv + 297\r\n        4   WebKit                              0x00007fff3f74a37e _ZN6WebKit17WebInspectorProxy4openEv + 82\r\n        5   WebKit                              0x00007fff3f5c84a1 _ZN3IPC18MessageReceiverMap15dispatchMessageERNS_10ConnectionERNS_7DecoderE + 127\r\n        6   WebKit                              0x00007fff3f804324 _ZN6WebKit15WebProcessProxy17didReceiveMessageERN3IPC10ConnectionERNS1_7DecoderE + 24\r\n        7   WebKit                              0x00007fff3f59588d _ZN3IPC10Connection15dispatchMessageENSt3__110unique_ptrINS_7DecoderENS1_14default_deleteIS3_EEEE + 119\r\n        8   WebKit                              0x00007fff3f5983e4 _ZN3IPC10Connection18dispatchOneMessageEv + 176\r\n        9   JavaScriptCore                      0x00007fff3457509c _ZN3WTF7RunLoop11performWorkEv + 236\r\n        10  JavaScriptCore                      0x00007fff34575332 _ZN3WTF7RunLoop11performWorkEPv + 34\r\n        11  CoreFoundation                      0x00007fff30932a11 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17\r\n        12  CoreFoundation                      0x00007fff309ec42c __CFRunLoopDoSource0 + 108\r\n        13  CoreFoundation                      0x00007fff30915470 __CFRunLoopDoSources0 + 208\r\n        14  CoreFoundation                      0x00007fff309148ed __CFRunLoopRun + 1293\r\n2022-07-07 15:57:10.662133+0800 app[68138:1394108] -[WryWebView _inspector]: unrecognized selector sent to instance 0x102753690\r\nthread 'main' panicked at 'Uncaught exception <NSException: 0x10263ac30>', /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/wry-0.19.0/src/webview/wkwebview/mod.rs:593:22\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/std/src/panicking.rs:584:5\r\n   1: core::panicking::panic_fmt\r\n             at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/core/src/panicking.rs:143:14\r\n   2: core::panicking::panic_display\r\n             at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/core/src/panicking.rs:72:5\r\n   3: wry::webview::wkwebview::InnerWebView::open_devtools\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/wry-0.19.0/src/webview/wkwebview/mod.rs:593:22\r\n   4: wry::webview::WebView::open_devtools\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/wry-0.19.0/src/webview/mod.rs:488:5\r\n   5: tauri_runtime_wry::handle_user_message\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.10.2/src/lib.rs:2226:17\r\n   6: tauri_runtime_wry::send_user_message\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.10.2/src/lib.rs:170:5\r\n   7: <tauri_runtime_wry::WryDispatcher<T> as tauri_runtime::Dispatch<T>>::open_devtools\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.10.2/src/lib.rs:1179:13\r\n   8: tauri::window::Window<R>::open_devtools\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.3/src/window.rs:1269:5\r\n   9: app::main::{{closure}}\r\n             at ./src-tauri/src/main.rs:17:7\r\n  10: core::ops::function::FnOnce::call_once{{vtable.shim}}\r\n             at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/core/src/ops/function.rs:227:5\r\n  11: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n             at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/alloc/src/boxed.rs:1861:9\r\n  12: tauri::app::Builder<R>::build\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.3/src/app.rs:1575:5\r\n  13: tauri::app::Builder<R>::run\r\n             at /Users/soon/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.3/src/app.rs:1585:5\r\n  14: app::main\r\n             at ./src-tauri/src/main.rs:14:3\r\n  15: core::ops::function::FnOnce::call_once\r\n             at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/core/src/ops/function.rs:227:5\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n```\n\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4612/timeline","performed_via_github_app":null,"state_reason":"completed"}