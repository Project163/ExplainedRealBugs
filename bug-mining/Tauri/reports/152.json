{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3875","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3875/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3875/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3875/events","html_url":"https://github.com/tauri-apps/tauri/issues/3875","id":1198283230,"node_id":"I_kwDOC7lts85HbFne","number":3875,"title":"[bug] Panic when menu is triggered while on dev tools window on Mac","user":{"login":"BlueGreenMagick","id":50060875,"node_id":"MDQ6VXNlcjUwMDYwODc1","avatar_url":"https://avatars.githubusercontent.com/u/50060875?v=4","gravatar_id":"","url":"https://api.github.com/users/BlueGreenMagick","html_url":"https://github.com/BlueGreenMagick","followers_url":"https://api.github.com/users/BlueGreenMagick/followers","following_url":"https://api.github.com/users/BlueGreenMagick/following{/other_user}","gists_url":"https://api.github.com/users/BlueGreenMagick/gists{/gist_id}","starred_url":"https://api.github.com/users/BlueGreenMagick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BlueGreenMagick/subscriptions","organizations_url":"https://api.github.com/users/BlueGreenMagick/orgs","repos_url":"https://api.github.com/users/BlueGreenMagick/repos","events_url":"https://api.github.com/users/BlueGreenMagick/events{/privacy}","received_events_url":"https://api.github.com/users/BlueGreenMagick/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3307097628,"node_id":"MDU6TGFiZWwzMzA3MDk3NjI4","url":"https://api.github.com/repos/tauri-apps/tauri/labels/priority:%203%20low","name":"priority: 3 low","color":"E844A1","default":false,"description":""},{"id":3310698683,"node_id":"MDU6TGFiZWwzMzEwNjk4Njgz","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20macOS","name":"platform: macOS","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-04-09T06:00:43Z","updated_at":"2022-05-03T00:04:31Z","closed_at":"2022-05-03T00:04:31Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nOn a Mac, when you open the dev tools into a separate window, then click on a custom menu, the app crashes.\r\n\r\n### Reproduction\r\n\r\n0. Use a Mac. \r\n1. Create a custom menu using `tauri::Builder::default().menu(menu())`\r\n2. Execute app, open dev tools\r\n3. Detatch the dev tool into its own window.\r\n4. While the dev tool window is focused, click on a CustomMenuItem menu.\r\n5. Panic\r\n\r\n### Expected behavior\r\n\r\nThe app should not panic.\r\n\r\n### Platform and versions\r\n\r\n```shell\r\nEnvironment\r\n  › OS: Mac OS 12.3.0 X64\r\n  › Node.js: 16.14.0\r\n  › npm: 8.3.1\r\n  › pnpm: Not installed!\r\n  › yarn: 1.22.17\r\n  › rustup: 1.24.3\r\n  › rustc: 1.58.1\r\n  › cargo: 1.58.0\r\n  › Rust toolchain: stable-aarch64-apple-darwin \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.0.0-rc.7\r\n  › @tauri-apps/api [NPM]: 1.0.0-rc.3\r\n  › tauri [RUST]: 1.0.0-rc.6 (no lockfile),\r\n  › tauri-build [RUST]: no manifest (no lockfile),\r\n  › tao [RUST]: no manifest (no lockfile),\r\n  › wry [RUST]: no manifest (no lockfile),\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: default-src blob: data: filesystem: ws: wss: http: https: tauri: cover: epub: 'unsafe-eval' 'unsafe-inline' 'self' img-src:\r\n  › distDir: ../public\r\n  › devPath: http://localhost:7580/\r\n  › framework: Svelte\r\n  › bundler: Rollup\r\n\r\nApp directory structure\r\n  ├─ web\r\n  ├─ node_modules\r\n  ├─ public\r\n  ├─ src-tauri\r\n  └─ .vscode\r\n```\r\n\r\n### Stack trace\r\n\r\n```shell\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.3.5/src/lib.rs:128:36\r\nstack backtrace:\r\n   0:        0x103a61f98 - std::backtrace_rs::backtrace::libunwind::trace::h6812f5c12d344a73\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:        0x103a61f98 - std::backtrace_rs::backtrace::trace_unsynchronized::he7a14c6fb88ae25c\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:        0x103a61f98 - std::sys_common::backtrace::_print_fmt::h78452774aba0536d\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/sys_common/backtrace.rs:67:5\r\n   3:        0x103a61f98 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h98d8e939df2a84c8\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/sys_common/backtrace.rs:46:22\r\n   4:        0x103a7fa84 - core::fmt::write::ha8927896f8d44e8d\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/core/src/fmt/mod.rs:1149:17\r\n   5:        0x103a5a978 - std::io::Write::write_fmt::h5be52fc0ae77f963\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/io/mod.rs:1697:15\r\n   6:        0x103a63888 - std::sys_common::backtrace::_print::h541db45a3e9ffe20\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/sys_common/backtrace.rs:49:5\r\n   7:        0x103a63888 - std::sys_common::backtrace::print::h29b0c38967f00a1d\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/sys_common/backtrace.rs:36:9\r\n   8:        0x103a63888 - std::panicking::default_hook::{{closure}}::h7ab34c9d6fd8d067\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:211:50\r\n   9:        0x103a63468 - std::panicking::default_hook::h6507a23c659c2199\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:228:9\r\n  10:        0x103a63ec8 - std::panicking::rust_panic_with_hook::h032de7ae9e9d479f\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:606:17\r\n  11:        0x103a639ec - std::panicking::begin_panic_handler::{{closure}}::ha7b561c0fbbe4ae5\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:500:13\r\n  12:        0x103a62458 - std::sys_common::backtrace::__rust_end_short_backtrace::h0ff1db7619f9e51e\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/sys_common/backtrace.rs:139:18\r\n  13:        0x103a6397c - rust_begin_unwind\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:498:5\r\n  14:        0x103a96bb4 - core::panicking::panic_fmt::h660aa0926f67c6d3\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/core/src/panicking.rs:107:14\r\n  15:        0x103a96b38 - core::panicking::panic::h87e190dcd64449c6\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/core/src/panicking.rs:48:5\r\n  16:        0x10354c610 - core::option::Option<T>::unwrap::hf23cf591e7972f6f\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/core/src/option.rs:746:21\r\n  17:        0x103547c48 - tauri_runtime_wry::WebviewIdStore::get::hd771987ffdbfc6a0\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.3.5/src/lib.rs:128:6\r\n  18:        0x103187520 - tauri_runtime_wry::handle_event_loop::hbd101c59117a998a\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.3.5/src/lib.rs:2402:25\r\n  19:        0x10318a480 - <tauri_runtime_wry::Wry<T> as tauri_runtime::Runtime<T>>::run::{{closure}}::h24ecbf23bfd2ea75\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.3.5/src/lib.rs:1954:7\r\n  20:        0x102fa56e4 - <tao::platform_impl::platform::app_state::EventLoopHandler<T> as tao::platform_impl::platform::app_state::EventHandler>::handle_nonuser_event::{{closure}}::hd772b9c6f9f52152\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/app_state.rs:104:9\r\n  21:        0x102fa5c78 - tao::platform_impl::platform::app_state::EventLoopHandler<T>::with_callback::h6452cabf67ae8b85\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/app_state.rs:78:7\r\n  22:        0x102fa5578 - <tao::platform_impl::platform::app_state::EventLoopHandler<T> as tao::platform_impl::platform::app_state::EventHandler>::handle_nonuser_event::hac2dd704dc11bd68\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/app_state.rs:99:5\r\n  23:        0x1035e5680 - tao::platform_impl::platform::app_state::Handler::handle_nonuser_event::hdd6fa02bd3813799\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/app_state.rs:208:11\r\n  24:        0x1035e6e88 - tao::platform_impl::platform::app_state::AppState::cleared::hebfe8149b14b46e3\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/app_state.rs:380:9\r\n  25:        0x1035cb380 - tao::platform_impl::platform::observer::control_flow_end_handler::{{closure}}::h8db2783a335e4f1c\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/observer.rs:186:11\r\n  26:        0x1035cb188 - tao::platform_impl::platform::observer::control_flow_handler::{{closure}}::h61f3d8c2b48869e0\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/observer.rs:147:5\r\n  27:        0x1035c4d54 - std::panicking::try::do_call::h542343f086d98dd4\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:406:40\r\n  28:        0x1035c7fc4 - <unknown>\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/alloc/src/vec/drain.rs:88:73\r\n  29:        0x1035c4bd4 - std::panicking::try::h585d732acb7fa7ca\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:370:19\r\n  30:        0x1035d623c - std::panic::catch_unwind::h22cbe84ebec5230d\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panic.rs:133:14\r\n  31:        0x1035b3300 - tao::platform_impl::platform::event_loop::stop_app_on_panic::h54e5520650a2e54a\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/event_loop.rs:224:9\r\n  32:        0x1035cafd8 - tao::platform_impl::platform::observer::control_flow_handler::hc352f7c7704cd6e2\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/observer.rs:145:3\r\n  33:        0x1035cb308 - tao::platform_impl::platform::observer::control_flow_end_handler::h45b5967f6c8eac19\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/observer.rs:181:5\r\n  34:        0x19a811bb0 - <unknown>\r\n  35:        0x19a811a00 - <unknown>\r\n  36:        0x19a81104c - <unknown>\r\n  37:        0x19a810490 - <unknown>\r\n  38:        0x1a3430dd8 - <unknown>\r\n  39:        0x1a3430b54 - <unknown>\r\n  40:        0x1a3430908 - <unknown>\r\n  41:        0x19d36fbcc - <unknown>\r\n  42:        0x19d36e4c4 - <unknown>\r\n  43:        0x19d360690 - <unknown>\r\n  44:        0x1036ecea4 - <() as objc::message::MessageArguments>::invoke::h65d808a3282ee8f9\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc-0.2.7/src/message/mod.rs:128:17\r\n  45:        0x10370ff44 - objc::message::platform::send_unverified::{{closure}}::h00ace68adb9fa094\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc-0.2.7/src/message/apple/mod.rs:27:9\r\n  46:        0x103709f94 - objc_exception::try::{{closure}}::hc017f4dc068fa6e9\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc_exception-0.1.2/src/lib.rs:68:31\r\n  47:        0x103706bc4 - objc_exception::try_no_ret::try_objc_execute_closure::h03c76000a0d706a8\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc_exception-0.1.2/src/lib.rs:34:9\r\n  48:        0x10372ae64 - RustObjCExceptionTryCatch\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc_exception-0.1.2/extern/exception.m:10:9\r\n  49:        0x1037060a8 - objc_exception::try_no_ret::h91b13fc8d0417b38\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc_exception-0.1.2/src/lib.rs:44:19\r\n  50:        0x103708388 - objc_exception::try::h53b01888e35d1c6d\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc_exception-0.1.2/src/lib.rs:67:9\r\n  51:        0x10371555c - objc::exception::try::hb4ace2dd94fabd61\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc-0.2.7/src/exception.rs:8:5\r\n  52:        0x10370f424 - objc::message::platform::send_unverified::ha378d1adfe11b78c\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc-0.2.7/src/message/apple/mod.rs:26:5\r\n  53:        0x103159700 - objc::message::send_message::h5afcff61e6dc3413\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/objc-0.2.7/src/message/mod.rs:178:5\r\n  54:        0x103159700 - tao::platform_impl::platform::event_loop::EventLoop<T>::run_return::hdf2e340436f8e8f6\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/event_loop.rs:181:16\r\n  55:        0x10315a404 - tao::platform_impl::platform::event_loop::EventLoop<T>::run::h7c1c74e3682733ed\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/platform_impl/macos/event_loop.rs:148:21\r\n  56:        0x102ff820c - tao::event_loop::EventLoop<T>::run::h193b36b3bf17138e\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tao-0.7.0/src/event_loop.rs:177:5\r\n  57:        0x10318a1d0 - <tauri_runtime_wry::Wry<T> as tauri_runtime::Runtime<T>>::run::h74c779d36d25dba3\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-runtime-wry-0.3.5/src/lib.rs:1953:5\r\n  58:        0x102f9e120 - tauri::app::App<R>::run::he57be246a1461da9\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.0-rc.6/src/app.rs:614:5\r\n  59:        0x102f9e7fc - tauri::app::Builder<R>::run::hcc4e2ac492408a8b\r\n                               at ~/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.0-rc.6/src/app.rs:1482:5\r\n  60:        0x102ee9d10 - app::main::h60ec3f47d29d5fc0\r\n                               at ~/Code/tuuli/desktop/src-tauri/src/main.rs:35:11\r\n  61:        0x102f64dac - core::ops::function::FnOnce::call_once::h6cdeb8405269f475\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/core/src/ops/function.rs:227:5\r\n  62:        0x102ee6240 - std::sys_common::backtrace::__rust_begin_short_backtrace::h936c4137f1d6c897\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/sys_common/backtrace.rs:123:18\r\n  63:        0x102ee6fc8 - std::rt::lang_start::{{closure}}::h60a79458e536adfc\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/rt.rs:145:18\r\n  64:        0x103a61cc8 - core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once::h10f2582b16e2b13c\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/core/src/ops/function.rs:259:13\r\n  65:        0x103a61cc8 - std::panicking::try::do_call::hd3dfc31f9ced2f42\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:406:40\r\n  66:        0x103a61cc8 - std::panicking::try::h584945b02ec0e15d\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:370:19\r\n  67:        0x103a61cc8 - std::panic::catch_unwind::h1138cecd37279bb6\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panic.rs:133:14\r\n  68:        0x103a61cc8 - std::rt::lang_start_internal::{{closure}}::hf94f7401539e24a6\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/rt.rs:128:48\r\n  69:        0x103a61cc8 - std::panicking::try::do_call::ha8b5def05088e3d3\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:406:40\r\n  70:        0x103a61cc8 - std::panicking::try::h3ce579dae5f3a6fb\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panicking.rs:370:19\r\n  71:        0x103a61cc8 - std::panic::catch_unwind::h29ecbe0d385e9017\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/panic.rs:133:14\r\n  72:        0x103a61cc8 - std::rt::lang_start_internal::h35c587f98e9244f6\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/rt.rs:128:20\r\n  73:        0x102ee6f94 - std::rt::lang_start::h5468f520e6945e37\r\n                               at /rustc/db9d1b20bba1968c1ec1fc49616d4742c1725b4b/library/std/src/rt.rs:144:17\r\n  74:        0x102eea8ac - <unknown>\r\n```\r\n\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3875/timeline","performed_via_github_app":null,"state_reason":"completed"}