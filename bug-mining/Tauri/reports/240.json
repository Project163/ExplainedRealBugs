{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4806","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4806/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4806/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4806/events","html_url":"https://github.com/tauri-apps/tauri/issues/4806","id":1323512701,"node_id":"I_kwDOC7lts85O4zN9","number":4806,"title":"[feat] Allow Tauri configurations to be set in Tauri.toml and/or Cargo.toml","user":{"login":"simonhyll","id":79983560,"node_id":"MDQ6VXNlcjc5OTgzNTYw","avatar_url":"https://avatars.githubusercontent.com/u/79983560?v=4","gravatar_id":"","url":"https://api.github.com/users/simonhyll","html_url":"https://github.com/simonhyll","followers_url":"https://api.github.com/users/simonhyll/followers","following_url":"https://api.github.com/users/simonhyll/following{/other_user}","gists_url":"https://api.github.com/users/simonhyll/gists{/gist_id}","starred_url":"https://api.github.com/users/simonhyll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonhyll/subscriptions","organizations_url":"https://api.github.com/users/simonhyll/orgs","repos_url":"https://api.github.com/users/simonhyll/repos","events_url":"https://api.github.com/users/simonhyll/events{/privacy}","received_events_url":"https://api.github.com/users/simonhyll/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3307089819,"node_id":"MDU6TGFiZWwzMzA3MDg5ODE5","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20feature%20request","name":"type: feature request","color":"446DBA","default":false,"description":""},{"id":3307097628,"node_id":"MDU6TGFiZWwzMzA3MDk3NjI4","url":"https://api.github.com/repos/tauri-apps/tauri/labels/priority:%203%20low","name":"priority: 3 low","color":"E844A1","default":false,"description":""},{"id":3307103594,"node_id":"MDU6TGFiZWwzMzA3MTAzNTk0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20in%20progress","name":"status: in progress","color":"059372","default":false,"description":"Implementation is proceeding smoothly"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-07-31T16:29:46Z","updated_at":"2022-08-02T17:12:31Z","closed_at":"2022-08-02T17:12:31Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the problem\n\nAs a Rust developer I have a certain love for the TOML format. There's nothing directly wrong with the JSON configuration file, it's just not as easy to manage as a TOML file. For example, you can't add comments in a JSON file, something that would be very useful for the Tauri config seeing as it has gotten pretty long, there's a lot of stuff to keep in memory regarding why you do things in your configs and it would be very nice to be able to put comments in there.\n\n### Describe the solution you'd like\n\nAdd the ability to write configurations in a `Tauri.toml` file, and/or directly in the `Cargo.toml` file. Due to best practises with Cargo.toml however it's probably best to use a Tauri.toml file.\r\n\r\n```toml\r\n# Tauri.toml\r\nallowlist = { all = true }\r\n\r\n[build]\r\nbeforeBuildCommand = \"yarn build\"\r\nbeforeDevCommand = \"yarn dev\"\r\n```\r\n\r\n```toml\r\n# Cargo.toml\r\n[package.metadata.tauri]\r\nallowlist = { all = true }\r\n\r\n[package.metadata.tauri.build]\r\nbeforeBuildCommand = \"yarn build\"\r\nbeforeDevCommand = \"yarn dev\"\r\n```\r\n\r\nImplementing this feature shouldn't be much more work than to find the configuration from either Cargo.toml or Tauri.toml, converting TOML into JSON, then passing it forward into existing functionality. As can be seen above with how I put `allowlist` at the root of the Tauri.toml file, it may be preferable to do some restructuring of the configurations if you add them to TOML since a Tauri.toml file containing a `[tauri]` section doesn't make much sense, but since that can make it a bit difficult to maintain both the JSON and TOML variants restructuring isn't really necessary.\n\n### Alternatives considered\n\nAlternatively a less user friendly variant but makes it easier to maintain both the JSON and TOML variants:\r\n```toml\r\n[package.metadata.tauri]\r\nconfig = {\r\n    # Pretty much just directly the contents of tauri.conf.json\r\n}\r\n```\r\n\r\nThis variant might make it a bit easier to maintain both the JSON and TOML variants,  since the other suggested solution may involve some slight restructuring of the config file.\n\n### Additional context\n\nHere's a little utility function I wrote for Cargo Commander for converting JSON to Toml. Can be used as inspiration.\r\nhttps://github.com/adaptive-simon/cargo-commander/blob/main/src/utils.rs#L240","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4806/timeline","performed_via_github_app":null,"state_reason":"completed"}