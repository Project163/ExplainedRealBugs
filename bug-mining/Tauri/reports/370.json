{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/7078","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7078/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7078/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7078/events","html_url":"https://github.com/tauri-apps/tauri/issues/7078","id":1730050103,"node_id":"I_kwDOC7lts85nHng3","number":7078,"title":"[bug] Data URI is not working when the `window-data-url` feature enabled","user":{"login":"yuezk","id":3297602,"node_id":"MDQ6VXNlcjMyOTc2MDI=","avatar_url":"https://avatars.githubusercontent.com/u/3297602?v=4","gravatar_id":"","url":"https://api.github.com/users/yuezk","html_url":"https://github.com/yuezk","followers_url":"https://api.github.com/users/yuezk/followers","following_url":"https://api.github.com/users/yuezk/following{/other_user}","gists_url":"https://api.github.com/users/yuezk/gists{/gist_id}","starred_url":"https://api.github.com/users/yuezk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuezk/subscriptions","organizations_url":"https://api.github.com/users/yuezk/orgs","repos_url":"https://api.github.com/users/yuezk/repos","events_url":"https://api.github.com/users/yuezk/events{/privacy}","received_events_url":"https://api.github.com/users/yuezk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-29T04:56:38Z","updated_at":"2023-06-05T12:47:23Z","closed_at":"2023-06-05T12:47:23Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nThe [document](https://tauri.app/v1/api/js/window/#url) says the data URL (such as `data:text/html,<html>...`) is supported when enabled by the `window-data-url` feature. But the fact is that an error occurred when loading the data URL.\r\n\r\n### Reproduction\r\n\r\nCreate a `WebviewWindow` in JS, and it will throw an error.\r\n\r\n```js\r\nconst webview = new WebviewWindow('my-label', {\r\n      url: 'data:text/html,<h3>hello, world</h3>'\r\n});\r\n```\r\n\r\n### Expected behavior\r\n\r\nCan create WebviewWindnow with the data URL successfully.\r\n\r\n### Platform and versions\r\n\r\n<img width=\"585\" alt=\"image\" src=\"https://github.com/tauri-apps/tauri/assets/3297602/83044a78-3d8b-4475-83be-3a93c5214e35\">\r\n\r\n\r\n### Stack trace\r\n\r\n```text\r\nthread 'tokio-runtime-worker' panicked at 'called `Option::unwrap()` on a `None` value', /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/manager.rs:485:29\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:579:5\r\n   1: core::panicking::panic_fmt\r\n             at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:64:14\r\n   2: core::panicking::panic\r\n             at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:114:5\r\n   3: core::option::Option<T>::unwrap\r\n             at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/option.rs:942:21\r\n   4: tauri::manager::WindowManager<R>::prepare_pending_window\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/manager.rs:485:11\r\n   5: tauri::manager::WindowManager<R>::prepare_window\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/manager.rs:1189:15\r\n   6: tauri::window::WindowBuilder<R>::build\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/window.rs:320:19\r\n   7: tauri::endpoints::window::Cmd::create_webview::{{closure}}\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/endpoints/window.rs:219:5\r\n   8: tauri::endpoints::window::Cmd::run::{{closure}}\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/endpoints/window.rs:200:23\r\n   9: tauri::endpoints::Module::run::{{closure}}\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/endpoints.rs:151:11\r\n  10: tauri::hooks::InvokeResolver<R>::return_task::{{closure}}\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/hooks.rs:242:22\r\n  11: tauri::hooks::InvokeResolver<R>::respond_async::{{closure}}\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.3.0/src/hooks.rs:185:70\r\n  12: <core::pin::Pin<P> as core::future::future::Future>::poll\r\n             at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/future/future.rs:125:9\r\n  13: tokio::runtime::task::core::Core<T,S>::poll::{{closure}}\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.25.0/src/runtime/task/core.rs:223:17\r\n  14: tokio::loom::std::unsafe_cell::UnsafeCell<T>::with_mut\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.25.0/src/loom/std/unsafe_cell.rs:14:9\r\n  15: tokio::runtime::task::core::Core<T,S>::poll\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.25.0/src/runtime/task/core.rs:212:13\r\n  16: tokio::runtime::task::harness::poll_future::{{closure}}\r\n             at /home/<home>/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.25.0/src/runtime/task/harness.rs:476:19\r\n  17: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once\r\n             at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panic/unwind_safe.rs:271:9\r\n  18: std::panicking::try::do_call\r\n             at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:487:40\r\n```\r\n\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/7078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/7078/timeline","performed_via_github_app":null,"state_reason":"completed"}