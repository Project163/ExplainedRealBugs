{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4546","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4546/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4546/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4546/events","html_url":"https://github.com/tauri-apps/tauri/issues/4546","id":1290697388,"node_id":"I_kwDOC7lts85M7nqs","number":4546,"title":"[feat] Allow usage of Wix extensions (FirewallException etc)","user":{"login":"betamos","id":135960,"node_id":"MDQ6VXNlcjEzNTk2MA==","avatar_url":"https://avatars.githubusercontent.com/u/135960?v=4","gravatar_id":"","url":"https://api.github.com/users/betamos","html_url":"https://github.com/betamos","followers_url":"https://api.github.com/users/betamos/followers","following_url":"https://api.github.com/users/betamos/following{/other_user}","gists_url":"https://api.github.com/users/betamos/gists{/gist_id}","starred_url":"https://api.github.com/users/betamos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/betamos/subscriptions","organizations_url":"https://api.github.com/users/betamos/orgs","repos_url":"https://api.github.com/users/betamos/repos","events_url":"https://api.github.com/users/betamos/events{/privacy}","received_events_url":"https://api.github.com/users/betamos/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3307089819,"node_id":"MDU6TGFiZWwzMzA3MDg5ODE5","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20feature%20request","name":"type: feature request","color":"446DBA","default":false,"description":""},{"id":3310697304,"node_id":"MDU6TGFiZWwzMzEwNjk3MzA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20Windows","name":"platform: Windows","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-06-30T22:24:16Z","updated_at":"2024-06-20T04:04:01Z","closed_at":"2022-07-12T17:08:09Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the problem\n\nOn Windows, apps are typically intercepted for a user prompt when they accept incoming network connections through TCP or UDP.\r\n\r\nI have an app targeted toward non-technical users which does not work without this. My app's sidecar is the one that does the networking. I would like a way to suppress these warnings for the intended use.\r\n\r\nTurns out that it's supported and fairly common to add firewall rules during install through [Wix directives](https://wixtoolset.org/documentation/manual/v3/xsd/firewall/firewallexception.html).\r\n\r\n First, you need to reference the schema:\r\n\r\n```\r\n<Wix xmlns=\"http://schemas.microsoft.com/wix/2006/wi\" xmlns:fire=\"http://schemas.microsoft.com/wix/FirewallExtension\">\r\n```\r\n\r\nThen you need to add your rules to something.. I nested it within a `<File>` tag for my sidecar binary, but there may be other options:\r\n\r\n```\r\n<File ...>\r\n    <fire:FirewallException Id=\"ArbitraryId1\" Name=\"App Name (TCP)\" Profile=\"all\" Protocol=\"tcp\" Scope=\"any\" IgnoreFailure=\"yes\" />\r\n    <fire:FirewallException Id=\"ArbitraryId2\" Name=\"App Name (UDP)\" Profile=\"all\" Protocol=\"udp\" Scope=\"any\" IgnoreFailure=\"yes\" />\r\n</File>\r\n```\r\n\r\nFinally, both candle and light needs a flag to turn on the extension:\r\n\r\n```\r\ncandle.exe -ext WixFirewallExtension [...]\r\nlight.exe -ext WixFirewallExtension [...]\r\n```\n\n### Describe the solution you'd like\n\nUnclear.. It doesn't seem realistic that tauri maintains a complex structure of different options in Wix, plist etc.\r\n It may be smart to offer flexibility, since both firewall rules and my rules in particular are quite specific use cases. \r\n1. For the light & candle flags, as well as the schema parts:\r\n  a. Perhaps it's possible to simply enable all extensions by default? Or\r\n  b. Offer a way to add wix extensions through the WixConfig object.\r\n3. For the actual directives:\r\n  a. Perhaps `WixConfig.fragmentPaths` (or similar) already works today? It would need a way to reference template variables (the sidecar binary in my case). I don't know how to do that.\r\n  b. Override the wsx template entirely (works today, but requires more maintenance)\n\n### Alternatives considered\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4546/timeline","performed_via_github_app":null,"state_reason":"completed"}