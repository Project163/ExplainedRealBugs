{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/10981","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/10981/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/10981/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/10981/events","html_url":"https://github.com/tauri-apps/tauri/issues/10981","id":2523527704,"node_id":"I_kwDOC7lts86WafoY","number":10981,"title":"[bug] localStorage not syncing between multiple webview windows on Linux","user":{"login":"Ynng","id":44907675,"node_id":"MDQ6VXNlcjQ0OTA3Njc1","avatar_url":"https://avatars.githubusercontent.com/u/44907675?v=4","gravatar_id":"","url":"https://api.github.com/users/Ynng","html_url":"https://github.com/Ynng","followers_url":"https://api.github.com/users/Ynng/followers","following_url":"https://api.github.com/users/Ynng/following{/other_user}","gists_url":"https://api.github.com/users/Ynng/gists{/gist_id}","starred_url":"https://api.github.com/users/Ynng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ynng/subscriptions","organizations_url":"https://api.github.com/users/Ynng/orgs","repos_url":"https://api.github.com/users/Ynng/repos","events_url":"https://api.github.com/users/Ynng/events{/privacy}","received_events_url":"https://api.github.com/users/Ynng/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3310698084,"node_id":"MDU6TGFiZWwzMzEwNjk4MDg0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20Linux","name":"platform: Linux","color":"fef2c0","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-09-12T23:34:06Z","updated_at":"2025-10-24T20:46:29Z","closed_at":"2024-09-21T10:42:09Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\n`localStorage` is synced between multiple webview windows on Windows and macOS but not Linux.\r\n\r\nOn Linux, only 1 window's local storage gets saved when the tauri app exits. The rest of the windows' local storage is out of sync with each other and is disposed of when the tauri app exits.\r\n\r\nIn the example video below, the 2 windows on the left are running in Fedora 40, their counters are out of sync.\r\nThe 2 windows on the right are running in Windows 11, their counters are in sync.\r\n\r\nhttps://github.com/user-attachments/assets/d1113ddc-5264-4426-b606-73cbe2e58f1b\r\n\r\n\r\n\r\n### Reproduction\r\n\r\nThe counter example shown in the video: https://github.com/Ynng/tauri-localstorage-sync-test\r\n\r\nOR:\r\n\r\nReproduce from scratch:\r\n- Create a new Ubuntu LTS 24 virtual machine\r\n- Install \"Debian\" dependencies from the [Tauri v2 setup guide](https://v2.tauri.app/start/prerequisites/#linux)\r\n- Install Rust `curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh`\r\n- Install nvm `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash`\r\n- Install node `nvm install node`\r\n- Enable pnpm `corepack enable pnpm`\r\n- Create a new Tauri app `pnpm create tauri-app --rc` with React, TypeScript and pnpm\r\n- Modify `tauri.conf.json` to create 2 windows with different labels\r\n- Start the dev server\r\n- Open devtools in both window, locater the \"local storage\" section\r\n- Add a new key in one window's location storage, observe the local storage entries in the other window\r\n\r\n### Expected behavior\r\n\r\nThe localStorage entries should be in sync between the two windows.\r\nIn the reproduction repo, the counter should stay in sync between the two windows.\r\n\r\n### Full `tauri info` output\r\n\r\n```text\r\n[âœ”] Environment\r\n    - OS: Ubuntu 24.4.0 x86_64 (X64)\r\n    âœ” webkit2gtk-4.1: 2.44.3\r\n    âœ” rsvg2: 2.58.0\r\n    âœ” rustc: 1.81.0 (eeb90cda1 2024-09-04)\r\n    âœ” cargo: 1.81.0 (2dbb1af80 2024-08-20)\r\n    âœ” rustup: 1.27.1 (54dd3d00f 2024-04-24)\r\n    âœ” Rust toolchain: stable-x86_64-unknown-linux-gnu (environment override by RUSTUP_TOOLCHAIN)\r\n    - node: 22.8.0\r\n    - pnpm: 9.10.0\r\n    - npm: 10.8.2\r\n\r\n[-] Packages\r\n    - tauri ðŸ¦€: 2.0.0-rc.11\r\n    - tauri-build ðŸ¦€: 2.0.0-rc.10\r\n    - wry ðŸ¦€: 0.43.1\r\n    - tao ðŸ¦€: 0.30.0\r\n    - tauri-cli ðŸ¦€: 2.0.0-rc.12\r\n    - @tauri-apps/api îœ˜: 2.0.0-rc.4\r\n    - @tauri-apps/cli îœ˜: 2.0.0-rc.13\r\n\r\n[-] Plugins\r\n    - tauri-plugin-shell ðŸ¦€: 2.0.0-rc.3\r\n    - @tauri-apps/plugin-shell îœ˜: 2.0.0-rc.1\r\n\r\n[-] App\r\n    - build-type: bundle\r\n    - CSP: unset\r\n    - frontendDist: ../dist\r\n    - devUrl: http://localhost:1420/\r\n    - framework: React\r\n    - bundler: Vite\r\n```\r\n\r\n\r\n### Stack trace\r\n\r\n_No response_\r\n\r\n### Additional context\r\n\r\nI get warnings like these sometimes on linux\r\n\r\n```\r\n(process:1737224): libsoup-WARNING **: 19:55:42.244: Failed to execute query: database is locked\r\n\r\n(process:1737224): libsoup-WARNING **: 19:55:42.244: Failed to execute query: no such table: soup_hsts_policies\r\n```\r\n\r\n```\r\nFailed to create hard link from /home/wenqi/.cache/tauri-app/WebKitCache/Version 16/Blobs/3DE2C89C97AF2523D1A566F90E64D1EB6FED08A2 to /home/wenqi/.cache/tauri-app/WebKitCache/Version 16/Records/2D857AF3C0D6CD0AE5639C83ED0E05BB5A00AEED/Resource/D36F616E0D261016A1484FD7FF748035207E4BBE-blob\r\n```\r\n\r\nThe problem exists with both Tauri v1 and v2","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/10981/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/10981/timeline","performed_via_github_app":null,"state_reason":"completed"}