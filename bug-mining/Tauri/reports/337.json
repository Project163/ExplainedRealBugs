{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6865","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6865/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6865/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6865/events","html_url":"https://github.com/tauri-apps/tauri/issues/6865","id":1696552730,"node_id":"I_kwDOC7lts85lH1ca","number":6865,"title":"[bug] WindowBuilder.on_navigation listener does not work","user":{"login":"tnibler","id":62287652,"node_id":"MDQ6VXNlcjYyMjg3NjUy","avatar_url":"https://avatars.githubusercontent.com/u/62287652?v=4","gravatar_id":"","url":"https://api.github.com/users/tnibler","html_url":"https://github.com/tnibler","followers_url":"https://api.github.com/users/tnibler/followers","following_url":"https://api.github.com/users/tnibler/following{/other_user}","gists_url":"https://api.github.com/users/tnibler/gists{/gist_id}","starred_url":"https://api.github.com/users/tnibler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tnibler/subscriptions","organizations_url":"https://api.github.com/users/tnibler/orgs","repos_url":"https://api.github.com/users/tnibler/repos","events_url":"https://api.github.com/users/tnibler/events{/privacy}","received_events_url":"https://api.github.com/users/tnibler/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-04T19:07:58Z","updated_at":"2023-05-12T11:03:44Z","closed_at":"2023-05-12T11:03:44Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nUsing `WindowBuilder.on_navigation()` as described in https://github.com/tauri-apps/tauri/pull/5686 does not result in calls to the registered listener. \n\n### Reproduction\n\nExample as described in the [getting started guide](https://tauri.app/v1/guides/getting-started/setup/html-css-js) with a simple html page.\r\n\r\n`tauri.conf.json`:\r\n\r\n```\r\n{\r\n  \"build\": {\r\n    \"beforeBuildCommand\": \"\",\r\n    \"beforeDevCommand\": \"\",\r\n    \"devPath\": \"../ui\",\r\n    \"distDir\": \"../ui\"\r\n  },\r\n  \"package\": {\r\n    \"productName\": \"navlistenertest\",\r\n    \"version\": \"0.1.0\"\r\n  },\r\n  \"tauri\": {\r\n    \"allowlist\": {\r\n      \"all\": true,\r\n      \"http\": {\r\n        \"request\": true,\r\n        \"scope\": [\r\n          \"https://**\"\r\n        ]\r\n      }\r\n    },\r\n    \"bundle\": {\r\n      \"active\": true,\r\n      \"category\": \"DeveloperTool\",\r\n      \"copyright\": \"\",\r\n      \"deb\": {\r\n        \"depends\": []\r\n      },\r\n      \"externalBin\": [],\r\n      \"icon\": [\r\n        \"icons/32x32.png\",\r\n        \"icons/128x128.png\",\r\n        \"icons/128x128@2x.png\",\r\n        \"icons/icon.icns\",\r\n        \"icons/icon.ico\"\r\n      ],\r\n      \"identifier\": \"com.tauri.dev\",\r\n      \"longDescription\": \"\",\r\n      \"macOS\": {\r\n        \"entitlements\": null,\r\n        \"exceptionDomain\": \"\",\r\n        \"frameworks\": [],\r\n        \"providerShortName\": null,\r\n        \"signingIdentity\": null\r\n      },\r\n      \"resources\": [],\r\n      \"shortDescription\": \"\",\r\n      \"targets\": \"all\",\r\n      \"windows\": {\r\n        \"certificateThumbprint\": null,\r\n        \"digestAlgorithm\": \"sha256\",\r\n        \"timestampUrl\": \"\"\r\n      }\r\n    },\r\n    \"security\": {\r\n      \"csp\": null\r\n    },\r\n    \"updater\": {\r\n      \"active\": false\r\n    },\r\n    \"windows\": [\r\n      {\r\n        \"fullscreen\": false,\r\n        \"height\": 600,\r\n        \"resizable\": true,\r\n        \"title\": \"navlistenertest\",\r\n        \"width\": 800\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n`main.rs`\r\n```\r\nfn main() {\r\n    tauri::Builder::default()\r\n        .setup(|app| {\r\n            tauri::WindowBuilder::new(\r\n                app,\r\n                \"window\",\r\n                tauri::WindowUrl::External(\"https://google.com\".parse().unwrap()),\r\n            )\r\n            .on_navigation(move |url| {\r\n                println!(\"{}\", url);\r\n                false\r\n            })\r\n            .build()\r\n            .unwrap();\r\n            Ok(())\r\n        })\r\n        .run(tauri::generate_context!())\r\n        .unwrap();\r\n}\r\n```\n\n### Expected behavior\n\nClicking on links on the page should print the URL and not do anything further as the closure returns `false`.\n\n### Platform and versions\n\n```text\n[✔] Environment\r\n    - OS: Arch Linux Rolling Release X64\r\n    ✔ webkit2gtk-4.0: 2.40.0\r\n    ✔ rsvg2: 2.56.0\r\n    ✔ rustc: 1.69.0 (84c898d65 2023-04-16)\r\n    ✔ Cargo: 1.69.0 (6e9a83356 2023-04-12)\r\n    ✔ rustup: 1.25.2 (2023-02-04)\r\n    ✔ Rust toolchain: stable-x86_64-unknown-linux-gnu (environment override by RUSTUP_TOOLCHAIN)\r\n    - node: 16.20.0\r\n    - yarn: 1.22.19\r\n    - npm: 8.19.2\r\n\r\n[-] Packages\r\n    - tauri [RUST]: 1.3.0\r\n    - tauri-build [RUST]: 1.3.0\r\n    - wry [RUST]: 0.24.1\r\n    - tao [RUST]: 0.16.0\r\n    - @tauri-apps/api [NPM]: not installed!\r\n    - @tauri-apps/cli [NPM]: 1.3.0\r\n\r\n[-] App\r\n    - build-type: bundle\r\n    - CSP: unset\r\n    - distDir: ../src\r\n    - devPath: ../src\n```\n\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"amrbashir","id":48618675,"node_id":"MDQ6VXNlcjQ4NjE4Njc1","avatar_url":"https://avatars.githubusercontent.com/u/48618675?v=4","gravatar_id":"","url":"https://api.github.com/users/amrbashir","html_url":"https://github.com/amrbashir","followers_url":"https://api.github.com/users/amrbashir/followers","following_url":"https://api.github.com/users/amrbashir/following{/other_user}","gists_url":"https://api.github.com/users/amrbashir/gists{/gist_id}","starred_url":"https://api.github.com/users/amrbashir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrbashir/subscriptions","organizations_url":"https://api.github.com/users/amrbashir/orgs","repos_url":"https://api.github.com/users/amrbashir/repos","events_url":"https://api.github.com/users/amrbashir/events{/privacy}","received_events_url":"https://api.github.com/users/amrbashir/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6865/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6865/timeline","performed_via_github_app":null,"state_reason":"completed"}