{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2336","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2336/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2336/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2336/events","html_url":"https://github.com/tauri-apps/tauri/issues/2336","id":958076271,"node_id":"MDU6SXNzdWU5NTgwNzYyNzE=","number":2336,"title":"fs-all feature does not include base64 crate","user":{"login":"cyyynthia","id":9999055,"node_id":"MDQ6VXNlcjk5OTkwNTU=","avatar_url":"https://avatars.githubusercontent.com/u/9999055?v=4","gravatar_id":"","url":"https://api.github.com/users/cyyynthia","html_url":"https://github.com/cyyynthia","followers_url":"https://api.github.com/users/cyyynthia/followers","following_url":"https://api.github.com/users/cyyynthia/following{/other_user}","gists_url":"https://api.github.com/users/cyyynthia/gists{/gist_id}","starred_url":"https://api.github.com/users/cyyynthia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cyyynthia/subscriptions","organizations_url":"https://api.github.com/users/cyyynthia/orgs","repos_url":"https://api.github.com/users/cyyynthia/repos","events_url":"https://api.github.com/users/cyyynthia/events{/privacy}","received_events_url":"https://api.github.com/users/cyyynthia/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-08-02T12:08:13Z","updated_at":"2021-08-09T00:16:04Z","closed_at":"2021-08-09T00:16:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- BEFORE YOU FILE A NEW ISSUE-->\r\n<!--\r\n\r\n0. Please search open issues before duplicating a new one.\r\n1. Make sure you are using the latest version of everything including: \r\n  - rustc \r\n  - ALL relevant Tauri Libs\r\n2. You must attach the results of cargo tauri info or yarn tauri info to your issue.\r\n3. Make sure it is an issue with Tauri, and not something to do with your side of the stack.\r\n4. Consider starting a discussion. Speaking of which, have you looked there? Maybe your question has been answered.\r\n5. Remember to follow our community guidelines and be friendly.\r\n6. Is this an issue or a feature request? If the latter, please use the other template.\r\n\r\n-->\r\n\r\n### **Describe the bug**\r\nWhen compiling Tauri with the fs-all feature only, the `base64` crate is not included which causes compile errors.\r\n\r\n### **To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Init a Tauri application\r\n2. Set the features allowlist in config to `{ \"fs\": { \"all\": true } }` (effectively enabling the fs-all feature)\r\n3. Run `tauri dev`\r\n4. See error\r\n\r\n### **Expected behavior**\r\nThe app should compile and run properly\r\n\r\n### **Platform and Versions (required):**\r\n<!-- Use `yarn tauri info` or `cargo tauri info` command to get this information, and paste it here: -->\r\n```\r\nOperating System - Arch Linux, version Rolling Release X64\r\n\r\nNode.js environment\r\n  Node.js - 16.4.2\r\n  @tauri-apps/cli - 1.0.0-beta.6\r\n  @tauri-apps/api - 1.0.0-beta.5\r\n\r\nGlobal packages\r\n  npm - 7.18.1\r\n  yarn - 1.22.10\r\n\r\nRust environment\r\n  rustc - 1.54.0\r\n  cargo - 1.54.0\r\n\r\nApp directory structure\r\n/dist\r\n/src-tauri\r\n/.git\r\n/src\r\n/node_modules\r\n\r\nApp\r\n  tauri.rs - 1.0.0-beta.5\r\n  build-type - bundle\r\n  CSP - default-src blob: data: filesystem: ws: wss: http: https: tauri: 'unsafe-eval' 'unsafe-inline' 'self' img-src: 'self'\r\n```\r\n\r\n### **Additional context**\r\nIt seems the offending pull request is #1864, as `base64` was referenced for `fs-write-binary-file` but not for `fs-all`.\r\n\r\n### **Stack Trace**\r\n```\r\nerror[E0433]: failed to resolve: use of undeclared crate or module `base64`\r\n   --> /home/cynthia/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.0-beta.5/src/endpoints/file_system.rs:359:3\r\n    |\r\n359 |   base64::decode(contents)\r\n    |   ^^^^^^ use of undeclared crate or module `base64`\r\n\r\nerror[E0433]: failed to resolve: use of undeclared crate or module `base64`\r\n  --> /home/cynthia/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.0-beta.5/src/error.rs:47:24\r\n   |\r\n47 |   Base64Decode(#[from] base64::DecodeError),\r\n   |                        ^^^^^^ use of undeclared crate or module `base64`\r\n\r\nerror[E0277]: the size for values of type `[u8]` cannot be known at compilation time\r\n   --> /home/cynthia/.cargo/registry/src/github.com-1ecc6299db9ec823/tauri-1.0.0-beta.5/src/endpoints/file_system.rs:361:16\r\n    |\r\n361 |     .and_then(|c| {\r\n    |                ^ doesn't have a size known at compile-time\r\n    |\r\n    = help: the trait `Sized` is not implemented for `[u8]`\r\nhelp: function arguments must have a statically known size, borrowed types always have a known size\r\n    |\r\n361 |     .and_then(|&c| {\r\n    |                ^\r\n\r\nerror: aborting due to 3 previous errors\r\n```\r\n","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2336/timeline","performed_via_github_app":null,"state_reason":"completed"}