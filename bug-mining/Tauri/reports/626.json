{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/13892","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/13892/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/13892/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/13892/events","html_url":"https://github.com/tauri-apps/tauri/issues/13892","id":3263227226,"node_id":"I_kwDOC7lts87CgOVa","number":13892,"title":"[bug] [android] [windows] [cli] [build] Android Build Error: A problem occurred starting process 'command 'C:\\nvm4w\\nodejs\\node.exe.cmd'' and Error: Cannot find module '...tauri' when using nvm4w","user":{"login":"DomanskiFilip","id":152383917,"node_id":"U_kgDOCRUxrQ","avatar_url":"https://avatars.githubusercontent.com/u/152383917?v=4","gravatar_id":"","url":"https://api.github.com/users/DomanskiFilip","html_url":"https://github.com/DomanskiFilip","followers_url":"https://api.github.com/users/DomanskiFilip/followers","following_url":"https://api.github.com/users/DomanskiFilip/following{/other_user}","gists_url":"https://api.github.com/users/DomanskiFilip/gists{/gist_id}","starred_url":"https://api.github.com/users/DomanskiFilip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomanskiFilip/subscriptions","organizations_url":"https://api.github.com/users/DomanskiFilip/orgs","repos_url":"https://api.github.com/users/DomanskiFilip/repos","events_url":"https://api.github.com/users/DomanskiFilip/events{/privacy}","received_events_url":"https://api.github.com/users/DomanskiFilip/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"},{"id":4901407158,"node_id":"LA_kwDOC7lts88AAAABJCWJtg","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20Android","name":"platform: Android","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-07-25T13:23:30Z","updated_at":"2025-10-07T18:25:51Z","closed_at":"2025-10-07T18:25:51Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nHi everyone. I am a student working on my year 3 project useing tauri and I encoutered this issue:\n\nEvery time I attempt to start a new Tauri project and run tauri android dev on Windows, I consistently encounter a build failure. The primary errors indicate an issue with finding and executing Node.js via C:\\nvm4w\\nodejs\\node.exe.cmd, followed by a Cannot find module '...tauri' error, and ultimately a Gradle build failure on the rustBuildX86_64Debug task.\n\nERROR LOGS: \n-----------------------------------------------------------------------------------------------------------------------\n            Finished `dev` profile [unoptimized + debuginfo] target(s) in 10.34s\n                Info symlinking lib \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\x86_64-linux-android\\\\debug\\\\libapp_lib.so\" in jniLibs dir \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\\\\app/src/main/jniLibs/x86_64\"\n                Info \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\x86_64-linux-android\\\\debug\\\\libapp_lib.so\" requires shared lib \"libandroid.so\"\n                Info \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\x86_64-linux-android\\\\debug\\\\libapp_lib.so\" requires shared lib \"libdl.so\"\n                Info \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\x86_64-linux-android\\\\debug\\\\libapp_lib.so\" requires shared lib \"liblog.so\"\n                Info \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\x86_64-linux-android\\\\debug\\\\libapp_lib.so\" requires shared lib \"libm.so\"\n                Info \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\x86_64-linux-android\\\\debug\\\\libapp_lib.so\" requires shared lib \"libc.so\"\n                Info symlink at \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\\\\app/src/main/jniLibs/arm64-v8a\\\\libapp_lib.so\" points to \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\aarch64-linux-android\\\\release\\\\libapp_lib.so\"\n                Info symlink at \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\\\\app/src/main/jniLibs/x86_64\\\\libapp_lib.so\" points to \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\target\\\\x86_64-linux-android\\\\debug\\\\libapp_lib.so\"\n        node:internal/modules/cjs/loader:1146\n          throw err;\n          ^\n        \n        Error: Cannot find module 'E:\\uni\\year 3\\year 3 project\\CalendarAssistantApp\\CATdesktop\\src-tauri\\tauri'\n            at Module._resolveFilename (node:internal/modules/cjs/loader:1143:15)\n            at Module._load (node:internal/modules/cjs/loader:984:27)\n            at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:135:12)\n            at node:internal/main/run_main_module:28:49 {\n          code: 'MODULE_NOT_FOUND',\n          requireStack: []\n        }\n        \n        Node.js v20.12.2\n        \n        FAILURE: Build failed with an exception.\n        \n        Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.\n        \n        You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n        \n        For more on this, please refer to https://docs.gradle.org/8.14.3/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.\n        \n        BUILD FAILED in 2s\n        Failed to assemble APK: command [\"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\\\\gradlew.bat\", \"--project-dir\", \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\"] exited with code 1: command [\"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\\\\gradlew.bat\", \"--project-dir\", \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\"] exited with code 1\n               Error Failed to assemble APK: command [\"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\\\\gradlew.bat\", \"--project-dir\", \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\"] exited with code 1: command [\"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\\\\gradlew.bat\", \"--project-dir\", \"E:\\\\uni\\\\year 3\\\\year 3 project\\\\CalendarAssistantApp\\\\CATdesktop\\\\src-tauri\\\\gen/android\"] exited with code 1\n-----------------------------------------------------------------------------------------------------------------------\n\nafter some digging and debugging I found that this seems to be because in autogenerated Gradle BuildTask.kt it throws a specific error in windows specificaly this is the file: \n\n-----------------------------------------------------------------------------------------------------------------------\n    import java.io.File\n    import org.apache.tools.ant.taskdefs.condition.Os\n    import org.gradle.api.DefaultTask\n    import org.gradle.api.GradleException\n    import org.gradle.api.logging.LogLevel\n    import org.gradle.api.tasks.Input\n    import org.gradle.api.tasks.TaskAction\n    \n    open class BuildTask : DefaultTask() {\n        @Input\n        var rootDirRel: String? = null\n        @Input\n        var target: String? = null\n        @Input\n        var release: Boolean? = null\n    \n        @TaskAction\n        fun assemble() {\n            val executable = \"\"\"C:\\nvm4w\\nodejs\\node.exe\"\"\"; // Or similar path\n            try {\n                runTauriCli(executable)\n            } catch (e: Exception) {\n                if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n                    runTauriCli(\"$executable.cmd\") // This part failed as node.exe.cmd didn't exist\n                } else {\n                    throw e;\n                }\n            }\n        }\n    \n        fun runTauriCli(executable: String) {\n            // ... (rest of the function)\n            val args = listOf(\"tauri\", \"android\", \"android-studio-script\"); // These args were passed to the Node.js executable\n            // ... (rest of the function)\n        }\n    }\n-----------------------------------------------------------------------------------------------------------------------\n\nmy solution was to change the file to this: \n\n-----------------------------------------------------------------------------------------------------------------------\n    import java.io.File\n    import org.apache.tools.ant.taskdefs.condition.Os\n    import org.gradle.api.DefaultTask\n    import org.gradle.api.GradleException\n    import org.gradle.api.logging.LogLevel\n    import org.gradle.api.tasks.Input\n    import org.gradle.api.tasks.TaskAction\n    \n    open class BuildTask : DefaultTask() {\n        @Input\n        var rootDirRel: String? = null\n        @Input\n        var target: String? = null\n        @Input\n        var release: Boolean? = null\n    \n        @TaskAction\n        fun assemble() {\n            // The executable should be 'cargo'\n            val cargoExecutable = if (Os.isFamily(Os.FAMILY_WINDOWS)) \"cargo.exe\" else \"cargo\" // Ensures 'cargo' is used\n            runTauriCli(cargoExecutable)\n        }\n    \n        fun runTauriCli(executable: String) {\n            val rootDirRel = rootDirRel ?: throw GradleException(\"rootDirRel cannot be null\")\n            val target = target ?: throw GradleException(\"target cannot be null\")\n            val release = release ?: throw GradleException(\"release cannot be null\")\n    \n            // Arguments for 'cargo tauri'\n            val args = mutableListOf(\n                \"tauri\",\n                \"android\",\n                \"android-studio-script\",\n                \"--target\", target\n            )\n    \n            if (release) {\n                args.add(\"--release\")\n            }\n    \n            if (project.logger.isEnabled(LogLevel.DEBUG)) {\n                args.add(\"-vv\")\n            } else if (project.logger.isEnabled(LogLevel.INFO)) {\n                args.add(\"-v\")\n            }\n    \n            project.exec {\n                workingDir(File(project.projectDir, rootDirRel))\n                executable(executable) // This will now be \"cargo\"\n                args(args)\n            }.assertNormalExitValue()\n        }\n    }\n\n-----------------------------------------------------------------------------------------------------------------------\nand this fixed the problem. As sstated I am a student and I dont know if this is a known issue or not but because it was showing every time I wanted to build an android app even clean tauri+vue apps I figured I share this to mybe help somebody\n\n### Expected behavior\n\nThe tauri android dev command should successfully compile and run the application on the detected Android device/emulator without manual intervention to the generated Gradle build files.\n\nActual Behavior\nThe build fails with errors indicating that Node.js cannot be found or invoked correctly by the Gradle BuildTask, specifically looking for node.exe.cmd and then misinterpreting the tauri command as a Node.js script.\n\n### Full `tauri info` output\n\n```text\n> catdesktop@0.0.0 tauri\n> tauri info\n\n\n[âœ”] Environment\n    - OS: Windows 10.0.22631 x86_64 (X64)\n    âœ” WebView2: 138.0.3351.95\n    âœ” MSVC: Visual Studio Community 2022\n    âœ” rustc: 1.87.0 (17067e9ac 2025-05-09)\n    âœ” cargo: 1.87.0 (99624be96 2025-05-06)\n    âœ” rustup: 1.28.2 (e4f3ad6f8 2025-04-28)\n    âœ” Rust toolchain: stable-x86_64-pc-windows-msvc (default)\n    - node: 20.12.2\n    - npm: 10.5.0\n\n[-] Packages\n    - tauri ðŸ¦€: 2.7.0\n    - tauri-build ðŸ¦€: 2.3.1\n    - wry ðŸ¦€: 0.52.1\n    - tao ðŸ¦€: 0.34.0\n    - tauri-cli ðŸ¦€: 2.7.1\n    - @tauri-apps/api îœ˜: 2.7.0\n    - @tauri-apps/cli îœ˜: 2.7.1\n\n[-] Plugins\n    - tauri-plugin-log ðŸ¦€: 2.6.0\n    - @tauri-apps/plugin-log îœ˜: not installed!\n\n[-] App\n    - build-type: bundle\n    - CSP: unset\n    - frontendDist: ../dist\n    - devUrl: http://localhost:5173/\n    - framework: Vue.js\n    - bundler: Vite\n\n","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/13892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/13892/timeline","performed_via_github_app":null,"state_reason":"completed"}