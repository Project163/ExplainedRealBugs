{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4414","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4414/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4414/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4414/events","html_url":"https://github.com/tauri-apps/tauri/issues/4414","id":1277920784,"node_id":"I_kwDOC7lts85MK4YQ","number":4414,"title":"[bug] window.__TAURI__ doesn't get injected if the Entry Url (devPath/distPath) is not an origin url (ie: entry url is a subpage)","user":{"login":"imadbz","id":3145272,"node_id":"MDQ6VXNlcjMxNDUyNzI=","avatar_url":"https://avatars.githubusercontent.com/u/3145272?v=4","gravatar_id":"","url":"https://api.github.com/users/imadbz","html_url":"https://github.com/imadbz","followers_url":"https://api.github.com/users/imadbz/followers","following_url":"https://api.github.com/users/imadbz/following{/other_user}","gists_url":"https://api.github.com/users/imadbz/gists{/gist_id}","starred_url":"https://api.github.com/users/imadbz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imadbz/subscriptions","organizations_url":"https://api.github.com/users/imadbz/orgs","repos_url":"https://api.github.com/users/imadbz/repos","events_url":"https://api.github.com/users/imadbz/events{/privacy}","received_events_url":"https://api.github.com/users/imadbz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-06-21T05:41:55Z","updated_at":"2024-10-02T23:40:34Z","closed_at":"2022-06-21T12:29:05Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nif we specify the url to be an origin (ex: http://localhost:3000), global tauri gets injected in the window.\r\n![image](https://user-images.githubusercontent.com/3145272/174723951-7994b3ff-83dc-4889-9303-a6d4eddb0be2.png)\r\n\r\nif we specify the url to be an inner page (ex: http://localhost:3000/about), global tauri doesn't get injected.\r\n![image](https://user-images.githubusercontent.com/3145272/174724015-04162c6f-cd60-4433-bb33-f2eb3157a5a5.png)\r\n\n\n### Reproduction\n\nspecify devPath to an inner page. (ex: http://localhost:3000/about)\r\nrun the app\r\ninspect and check for window.__TAURI vars \n\n### Expected behavior\n\n_No response_\n\n### Platform and versions\n\n```shell\nEnvironment\r\n  › OS: Mac OS 12.4.0 X64\r\n  › Node.js: 16.15.0\r\n  › npm: 8.10.0\r\n  › pnpm: 6.11.0\r\n  › yarn: Not installed!\r\n  › rustup: 1.24.3\r\n  › rustc: 1.60.0\r\n  › cargo: 1.60.0\r\n  › Rust toolchain: stable-aarch64-apple-darwin \r\n\r\nPackages\r\nError running CLI: only one package mangager should be used, but found npm and yarn\r\nplease remove unused package manager lock files\r\n➜  devutil git:(master) ✗ npm run tauri info\r\n\r\n> devutil@0.0.0 tauri\r\n> tauri \"info\"\r\n\r\n\r\nEnvironment\r\n  › OS: Mac OS 12.4.0 X64\r\n  › Node.js: 16.15.0\r\n  › npm: 8.10.0\r\n  › pnpm: 6.11.0\r\n  › yarn: Not installed!\r\n  › rustup: 1.24.3\r\n  › rustc: 1.60.0\r\n  › cargo: 1.60.0\r\n  › Rust toolchain: stable-aarch64-apple-darwin \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.0.0\r\n  › @tauri-apps/api [NPM]: 1.0.1\r\n  › tauri [RUST]: 1.0.0,\r\n  › tauri-build [RUST]: 1.0.0,\r\n  › tao [RUST]: 0.11.2,\r\n  › wry [RUST]: 0.18.3,\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: ../dist\r\n  › devPath: http://localhost:3000/about\r\n  › framework: Vue.js\r\n\r\nApp directory structure\r\n  ├─ node_modules\r\n  ├─ public\r\n  ├─ src-tauri\r\n  ├─ .git\r\n  └─ src\n```\n\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4414/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4414/timeline","performed_via_github_app":null,"state_reason":"completed"}