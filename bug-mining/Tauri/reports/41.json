{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2978","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2978/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2978/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2978/events","html_url":"https://github.com/tauri-apps/tauri/issues/2978","id":1065412618,"node_id":"I_kwDOC7lts84_gOgK","number":2978,"title":"Centering application window with width or height that is bigger than the current screen size results in app crash","user":{"login":"srg-kostyrko","id":7421135,"node_id":"MDQ6VXNlcjc0MjExMzU=","avatar_url":"https://avatars.githubusercontent.com/u/7421135?v=4","gravatar_id":"","url":"https://api.github.com/users/srg-kostyrko","html_url":"https://github.com/srg-kostyrko","followers_url":"https://api.github.com/users/srg-kostyrko/followers","following_url":"https://api.github.com/users/srg-kostyrko/following{/other_user}","gists_url":"https://api.github.com/users/srg-kostyrko/gists{/gist_id}","starred_url":"https://api.github.com/users/srg-kostyrko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srg-kostyrko/subscriptions","organizations_url":"https://api.github.com/users/srg-kostyrko/orgs","repos_url":"https://api.github.com/users/srg-kostyrko/repos","events_url":"https://api.github.com/users/srg-kostyrko/events{/privacy}","received_events_url":"https://api.github.com/users/srg-kostyrko/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-28T19:16:26Z","updated_at":"2021-12-09T03:21:31Z","closed_at":"2021-12-09T03:21:31Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- BEFORE YOU FILE A NEW ISSUE-->\r\n<!--\r\n\r\n0. Please search open issues before duplicating a new one.\r\n1. Make sure you are using the latest version of everything including:\r\n  - rustc\r\n  - ALL relevant Tauri Libs\r\n2. You must attach the results of cargo tauri info or yarn tauri info to your issue.\r\n3. Make sure it is an issue with Tauri, and not something to do with your side of the stack.\r\n4. Consider starting a discussion. Speaking of which, have you looked there? Maybe your question has been answered.\r\n5. Remember to follow our community guidelines and be friendly.\r\n6. Is this an issue or a feature request? If the latter, please use the other template.\r\n\r\n-->\r\n\r\n### **Describe the bug**\r\nCentering application window with width or height that is bigger than the current screen size results in app crash with the following message in the console \r\n```\r\nthread 'main' panicked at 'attempt to subtract with overflow',  C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-runtime-wry-0.2.1\\src\\lib.rs:2318:13\r\n```\r\n\r\n### **To Reproduce**\r\nAssuming that current screen size is 1920x1080, follwoing js snippet will crash app\r\n```\r\nimport { appWindow, LogicalSize } from '@tauri-apps/api/window'\r\nawait appWindow.setSize(new LogicalSize(2000, 1100)).then(() => appWindow.center());\r\n```\r\n\r\n### **Expected behavior**\r\nNo crash when centering window.\r\n\r\n\r\n### **Platform and Versions (required):**\r\n<!-- Use `yarn tauri info` or `cargo tauri info` command to get this information, and paste it here: -->\r\n```\r\n\r\n\r\nOperating System - Windows, version 10.0.19042 X64\r\nWebview2 - 96.0.1054.34\r\n\r\nNode.js environment\r\n  Node.js - 14.17.0\r\n  @tauri-apps/cli - 1.0.0-beta.10\r\n  @tauri-apps/api - 1.0.0-beta.8\r\n\r\nGlobal packages\r\n  npm - 6.14.13\r\n  yarn - 1.22.11\r\n\r\nRust environment\r\n  rustc - 1.56.0\r\n  cargo - 1.56.0\r\n\r\nApp directory structure\r\n/.git\r\n/.github\r\n/.husky\r\n/.vscode\r\n/apps\r\n/demo\r\n/dist\r\n/game\r\n/libs\r\n/node_modules\r\n/src-tauri\r\n/tools\r\n\r\nApp\r\n  tauri.rs - 1.0.0-beta.8\r\n  build-type - bundle\r\n  CSP - default-src blob: data: filesystem: ws: wss: http: https: tauri: 'unsafe-eval' 'unsafe-inline' 'self' img-src: 'self'\r\n  distDir - ../dist/apps/player-desktop\r\n  devPath - http://localhost:4200\r\n  framework - React\r\n```\r\n\r\n### **Stack Trace**\r\n```\r\nthread 'main' panicked at 'attempt to subtract with overflow', C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-runtime-wry-0.2.1\\src\\lib.rs:2318:13\r\nstack backtrace:\r\n   0: std::panicking::begin_panic_handler\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\/library\\std\\src\\panicking.rs:517\r\n   1: core::panicking::panic_fmt\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\/library\\core\\src\\panicking.rs:101\r\n   2: core::panicking::panic\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\/library\\core\\src\\panicking.rs:50\r\n   3: tauri_runtime_wry::center_window\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-runtime-wry-0.2.1\\src\\lib.rs:2318\r\n   4: tauri_runtime_wry::handle_event_loop\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-runtime-wry-0.2.1\\src\\lib.rs:2036\r\n   5: tauri_runtime_wry::impl$36::run::closure$0<tauri::app::impl$13::run::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-runtime-wry-0.2.1\\src\\lib.rs:1798\r\n   6: tao::platform_impl::platform::event_loop::impl$2::run_return::closure$0<enum$<tauri_runtime_wry::Message>,tauri_runtime_wry::impl$36::run::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop.rs:219\r\n   7: alloc::boxed::impl$45::call_mut<tuple$<enum$<tao::event::Event<enum$<tauri_runtime_wry::Message> > >,ref_mut$<enum$<tao::event_loop::ControlFlow> > >,dyn$<core::ops::function::FnMut<tuple$<enum$<tao::event::Event<enum$<tauri_runtime_wry::Message> > >,ref_\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\alloc\\src\\boxed.rs:1643\r\n   8: tao::platform_impl::platform::event_loop::runner::impl$3::call_event_handler::closure$0<enum$<tauri_runtime_wry::Message> >\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop\\runner.rs:249\r\n   9: core::panic::unwind_safe::impl$23::call_once<tuple$<>,tao::platform_impl::platform::event_loop::runner::impl$3::call_event_handler::closure$0>\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\core\\src\\panic\\unwind_safe.rs:271\r\n  10: std::panicking::try::do_call<core::panic::unwind_safe::AssertUnwindSafe<tao::platform_impl::platform::event_loop::runner::impl$3::call_event_handler::closure$0>,tuple$<> >\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\std\\src\\panicking.rs:403\r\n  11: hashbrown::raw::bitmask::BitMask::invert\r\n  12: std::panicking::try<tuple$<>,core::panic::unwind_safe::AssertUnwindSafe<tao::platform_impl::platform::event_loop::runner::impl$3::call_event_handler::closure$0> >\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\std\\src\\panicking.rs:367\r\n  13: std::panic::catch_unwind<core::panic::unwind_safe::AssertUnwindSafe<tao::platform_impl::platform::event_loop::runner::impl$3::call_event_handler::closure$0>,tuple$<> >\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\std\\src\\panic.rs:129\r\n  14: tao::platform_impl::platform::event_loop::runner::EventLoopRunner<enum$<tauri_runtime_wry::Message> >::catch_unwind<enum$<tauri_runtime_wry::Message>,tuple$<>,tao::platform_impl::platform::event_loop::runner::impl$3::call_event_handler::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop\\runner.rs:155\r\n  15: tao::platform_impl::platform::event_loop::runner::EventLoopRunner<enum$<tauri_runtime_wry::Message> >::call_event_handler<enum$<tauri_runtime_wry::Message> >\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop\\runner.rs:243\r\n  16: tao::platform_impl::platform::event_loop::runner::EventLoopRunner<enum$<tauri_runtime_wry::Message> >::send_event<enum$<tauri_runtime_wry::Message> >\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop\\runner.rs:224\r\n  17: tao::platform_impl::platform::event_loop::ThreadMsgTargetSubclassInput<enum$<tauri_runtime_wry::Message> >::send_event<enum$<tauri_runtime_wry::Message> >\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop.rs:113\r\n  18: tao::platform_impl::platform::event_loop::thread_event_target_callback::closure$0<enum$<tauri_runtime_wry::Message> >\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop.rs:2034\r\n  19: core::ops::function::FnOnce::call_once<tao::platform_impl::platform::event_loop::thread_event_target_callback::closure$0,tuple$<> >\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\core\\src\\ops\\function.rs:227\r\n  20: core::panic::unwind_safe::impl$23::call_once<isize,tao::platform_impl::platform::event_loop::thread_event_target_callback::closure$0>\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\core\\src\\panic\\unwind_safe.rs:271\r\n  21: std::panicking::try::do_call<core::panic::unwind_safe::AssertUnwindSafe<tao::platform_impl::platform::event_loop::thread_event_target_callback::closure$0>,isize>\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\std\\src\\panicking.rs:403\r\n  22: hashbrown::raw::bitmask::BitMask::invert\r\n  23: std::panicking::try<isize,core::panic::unwind_safe::AssertUnwindSafe<tao::platform_impl::platform::event_loop::thread_event_target_callback::closure$0> >\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\std\\src\\panicking.rs:367\r\n  24: std::panic::catch_unwind<core::panic::unwind_safe::AssertUnwindSafe<tao::platform_impl::platform::event_loop::thread_event_target_callback::closure$0>,isize>\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\std\\src\\panic.rs:129\r\n  25: tao::platform_impl::platform::event_loop::runner::EventLoopRunner<enum$<tauri_runtime_wry::Message> >::catch_unwind<enum$<tauri_runtime_wry::Message>,isize,tao::platform_impl::platform::event_loop::thread_event_target_callback::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop\\runner.rs:155\r\n  26: tao::platform_impl::platform::event_loop::thread_event_target_callback<enum$<tauri_runtime_wry::Message> >\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop.rs:2085\r\n  27: DefSubclassProc\r\n  28: DefSubclassProc\r\n  29: CallWindowProcW\r\n  30: DispatchMessageW\r\n  31: tao::platform_impl::platform::event_loop::EventLoop<enum$<tauri_runtime_wry::Message> >::run_return<enum$<tauri_runtime_wry::Message>,tauri_runtime_wry::impl$36::run::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop.rs:248\r\n  32: tao::platform_impl::platform::event_loop::EventLoop<enum$<tauri_runtime_wry::Message> >::run<enum$<tauri_runtime_wry::Message>,tauri_runtime_wry::impl$36::run::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\platform_impl\\windows\\event_loop.rs:203\r\n  33: tao::event_loop::EventLoop<enum$<tauri_runtime_wry::Message> >::run<enum$<tauri_runtime_wry::Message>,tauri_runtime_wry::impl$36::run::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tao-0.5.2\\src\\event_loop.rs:151\r\n  34: tauri_runtime_wry::impl$36::run<tauri::app::impl$13::run::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-runtime-wry-0.2.1\\src\\lib.rs:1797\r\n  35: tauri::app::App<tauri_runtime_wry::Wry>::run<tauri_runtime_wry::Wry,tauri::app::impl$15::run::closure$0>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-1.0.0-beta.8\\src\\app.rs:431\r\n  36: tauri::app::Builder<tauri_runtime_wry::Wry>::run<tauri_runtime_wry::Wry,tauri_utils::assets::EmbeddedAssets>\r\n             at C:\\Users\\srgko\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\tauri-1.0.0-beta.8\\src\\app.rs:1040\r\n  37: qspider::main\r\n             at .\\src\\main.rs:47\r\n  38: core::ops::function::FnOnce::call_once<void (*)(),tuple$<> >\r\n             at /rustc/09c42c45858d5f3aedfa670698275303a3d19afa\\library\\core\\src\\ops\\function.rs:227\r\n```","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2978/timeline","performed_via_github_app":null,"state_reason":"completed"}