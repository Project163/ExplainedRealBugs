{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6192","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6192/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6192/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6192/events","html_url":"https://github.com/tauri-apps/tauri/issues/6192","id":1570127426,"node_id":"I_kwDOC7lts85dlj5C","number":6192,"title":"[bug] Updater server returning a 204 causes issues.","user":{"login":"colin99d","id":72827203,"node_id":"MDQ6VXNlcjcyODI3MjAz","avatar_url":"https://avatars.githubusercontent.com/u/72827203?v=4","gravatar_id":"","url":"https://api.github.com/users/colin99d","html_url":"https://github.com/colin99d","followers_url":"https://api.github.com/users/colin99d/followers","following_url":"https://api.github.com/users/colin99d/following{/other_user}","gists_url":"https://api.github.com/users/colin99d/gists{/gist_id}","starred_url":"https://api.github.com/users/colin99d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colin99d/subscriptions","organizations_url":"https://api.github.com/users/colin99d/orgs","repos_url":"https://api.github.com/users/colin99d/repos","events_url":"https://api.github.com/users/colin99d/events{/privacy}","received_events_url":"https://api.github.com/users/colin99d/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3306923091,"node_id":"MDU6TGFiZWwzMzA2OTIzMDkx","url":"https://api.github.com/repos/tauri-apps/tauri/labels/scope:%20core","name":"scope: core","color":"D4C5F9","default":false,"description":"Core packages of Tauri"},{"id":3410829358,"node_id":"LA_kwDOC7lts87LTSAu","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20backlog","name":"status: backlog","color":"059372","default":false,"description":"Issue is ready and we can work on it"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-02-03T16:45:06Z","updated_at":"2023-03-31T13:07:02Z","closed_at":"2023-03-31T13:07:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nWhen using the auto updater, Tauri gets the below error when receiving a 204 NO CONTENT:\r\n```\r\nthread 'tokio-runtime-worker' panicked at 'called `Result::unwrap()` on an `Err` value: TauriApi(Network(Error(Json(Error(\"EOF while parsing a value\", line: 1, column: 0)))))', src/main.rs:55:48\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\nfailed to update: Tauri API error: Network Error: Json Error: EOF while parsing a value at line 1 column 0\r\n```\r\nTo confirm things are working properly, I used this url: https://api.fabianlars.de/v1/update/mw-toolbox/windows/x86_64/0.0.1.\r\nI also tried it using dialogue as true or false. The issue fails on this line: \r\n```\r\ntauri::async_runtime::spawn(async move {\r\n    handle.updater().check().await.unwrap();\r\n});\r\n```\r\n\n\n### Reproduction\n\nRun: `cargo tauri dev`\n\n### Expected behavior\n\nSending an event saying that the app is already up to date.\n\n### Platform and versions\n\n(base) ➜  terminalpro-poc git:(main) ✗ cargo tauri info\r\n\r\nEnvironment\r\n  › OS: Mac OS 13.1.0 X64\r\n  › Node.js: 16.19.0\r\n  › npm: 8.19.3\r\n  › pnpm: Not installed!\r\n  › yarn: 1.22.19\r\n  › rustup: 1.25.1\r\n  › rustc: 1.67.0\r\n  › cargo: 1.67.0\r\n  › Rust toolchain: stable-aarch64-apple-darwin\r\n\r\nPackages\r\n       Error only one package manager should be used, but found npm and yarn\r\nplease remove unused package manager lock files\r\n\r\n(base) ➜  terminalpro-poc git:(main) ✗ cargo tauri --version\r\ntauri-cli 1.2.3\r\n(base) ➜  terminalpro-poc git:(main) ✗\r\n\r\n\n\n### Stack trace\n\n```shell\n➜  Local:   http://127.0.0.1:1420/\r\n  ➜  Network: use --host to expose\r\n        Info Watching /Users/colindelahunty/terminalpro-poc/src-tauri for changes...\r\n   Compiling terminalpro-poc v0.0.0 (/Users/colindelahunty/terminalpro-poc/src-tauri)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 2.83s\r\nthread 'tokio-runtime-worker' panicked at 'called `Result::unwrap()` on an `Err` value: TauriApi(Network(Error(Json(Error(\"EOF while parsing a value\", line: 1, column: 0)))))', src/main.rs:55:48\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/panicking.rs:575:5\r\n   1: core::panicking::panic_fmt\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/panicking.rs:64:14\r\n   2: core::result::unwrap_failed\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/result.rs:1791:5\r\n   3: core::result::Result<T,E>::unwrap\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/result.rs:1113:23\r\n   4: terminalpro_poc::main::{{closure}}::{{closure}}\r\n             at ./src/main.rs:55:17\r\n   5: <core::pin::Pin<P> as core::future::future::Future>::poll\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/future/future.rs:124:9\r\n   6: tokio::runtime::task::core::CoreStage<T>::poll::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/core.rs:184:17\r\n   7: tokio::loom::std::unsafe_cell::UnsafeCell<T>::with_mut\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/loom/std/unsafe_cell.rs:14:9\r\n   8: tokio::runtime::task::core::CoreStage<T>::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/core.rs:174:13\r\n   9: tokio::runtime::task::harness::poll_future::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:480:19\r\n  10: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/panic/unwind_safe.rs:271:9\r\n  11: std::panicking::try::do_call\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/panicking.rs:483:40\r\n  12: ___rust_try\r\n  13: std::panicking::try\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/panicking.rs:447:19\r\n  14: std::panic::catch_unwind\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/panic.rs:137:14\r\n15: tokio::runtime::task::harness::poll_future\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:468:18\r\n  16: tokio::runtime::task::harness::Harness<T,S>::poll_inner\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:104:27\r\n  17: tokio::runtime::task::harness::Harness<T,S>::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:57:15\r\n  18: tokio::runtime::task::raw::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/raw.rs:194:5\r\n  19: tokio::runtime::task::raw::RawTask::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/raw.rs:134:18\r\n  20: tokio::runtime::task::LocalNotified<S>::run\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/mod.rs:385:9\r\n  21: tokio::runtime::scheduler::multi_thread::worker::Context::run_task::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/scheduler/multi_thread/worker.rs:421:13\r\n  22: tokio::coop::with_budget::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/coop.rs:102:9\r\n  23: std::thread::local::LocalKey<T>::try_with\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/thread/local.rs:446:16\r\n  24: std::thread::local::LocalKey<T>::with\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/thread/local.rs:422:9\r\n  25: tokio::coop::with_budget\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/coop.rs:95:5\r\n  26: tokio::coop::budget\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/coop.rs:72:5\r\n  27: tokio::runtime::scheduler::multi_thread::worker::Context::run_task\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/scheduler/multi_thread/worker.rs:420:9\r\n  28: tokio::runtime::scheduler::multi_thread::worker::Context::run\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/scheduler/multi_thread/worker.rs:387:24\r\n  29: tokio::runtime::scheduler::multi_thread::worker::run::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/scheduler/multi_thread/worker.rs:372:17\r\n  30: tokio::macros::scoped_tls::ScopedKey<T>::set\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/macros/scoped_tls.rs:61:9\r\n  31: tokio::runtime::scheduler::multi_thread::worker::run\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/scheduler/multi_thread/worker.rs:369:5\r\n  32: tokio::runtime::scheduler::multi_thread::worker::Launch::launch::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/scheduler/multi_thread/worker.rs:348:45\r\n  33: <tokio::runtime::blocking::task::BlockingTask<T> as core::future::future::Future>::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/blocking/task.rs:42:21\r\n  34: tokio::runtime::task::core::CoreStage<T>::poll::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/core.rs:184:17\r\n  35: tokio::loom::std::unsafe_cell::UnsafeCell<T>::with_mut\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/loom/std/unsafe_cell.rs:14:9\r\n  36: tokio::runtime::task::core::CoreStage<T>::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/core.rs:174:13\r\n  37: tokio::runtime::task::harness::poll_future::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:480:19\r\n  38: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/panic/unwind_safe.rs:271:9\r\n  39: std::panicking::try::do_call\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/panicking.rs:483:40\r\n  40: ___rust_try\r\n  41: std::panicking::try\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/panicking.rs:447:19\r\n  42: std::panic::catch_unwind\r\n             at /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/std/src/panic.rs:137:14\r\n  43: tokio::runtime::task::harness::poll_future\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:468:18\r\n  44: tokio::runtime::task::harness::Harness<T,S>::poll_inner\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:104:27\r\n  45: tokio::runtime::task::harness::Harness<T,S>::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/harness.rs:57:15\r\n  46: tokio::runtime::task::raw::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/raw.rs:194:5\r\n  47: tokio::runtime::task::raw::RawTask::poll\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/raw.rs:134:18\r\n  48: tokio::runtime::task::UnownedTask<S>::run\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/task/mod.rs:422:9\r\n  49: tokio::runtime::blocking::pool::Task::run\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/blocking/pool.rs:111:9\r\n  50: tokio::runtime::blocking::pool::Inner::run\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/blocking/pool.rs:346:17\r\n  51: tokio::runtime::blocking::pool::Spawner::spawn_thread::{{closure}}\r\n             at /Users/colindelahunty/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.21.2/src/runtime/blocking/pool.rs:321:13\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nfailed to update: Tauri API error: Network Error: Json Error: EOF while parsing a value at line 1 column 0\n```\n\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6192/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6192/timeline","performed_via_github_app":null,"state_reason":"completed"}