{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/8872","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8872/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8872/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8872/events","html_url":"https://github.com/tauri-apps/tauri/issues/8872","id":2137733015,"node_id":"I_kwDOC7lts85_azeX","number":8872,"title":"[bug] beta autogenerate permissions for plugins","user":{"login":"keeganstothert","id":3612936,"node_id":"MDQ6VXNlcjM2MTI5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/3612936?v=4","gravatar_id":"","url":"https://api.github.com/users/keeganstothert","html_url":"https://github.com/keeganstothert","followers_url":"https://api.github.com/users/keeganstothert/followers","following_url":"https://api.github.com/users/keeganstothert/following{/other_user}","gists_url":"https://api.github.com/users/keeganstothert/gists{/gist_id}","starred_url":"https://api.github.com/users/keeganstothert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keeganstothert/subscriptions","organizations_url":"https://api.github.com/users/keeganstothert/orgs","repos_url":"https://api.github.com/users/keeganstothert/repos","events_url":"https://api.github.com/users/keeganstothert/events{/privacy}","received_events_url":"https://api.github.com/users/keeganstothert/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-16T01:48:11Z","updated_at":"2024-02-26T15:54:33Z","closed_at":"2024-02-26T15:54:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nThe autogenerate permissions only appears to work with snake case command names, this is fine for any custom commands but is incompatible when trying to call out to the mobile `Plugin` class methods (ios & android base class). These are all camel case `checkPermissions` `requestPermissions` etc.\r\n\r\nin order to solve this for now I had to first populate the `build.rs` with\r\n\r\n```rust\r\nconst COMMANDS: &[&str] = &[\"get_location\", \"check_permissions\", \"request_permissions\"];\r\n\r\nfn main() {\r\n    tauri_plugin::Builder::new(COMMANDS)\r\n        .android_path(\"android\")\r\n        .ios_path(\"ios\")\r\n        .build();\r\n}\r\n```\r\n\r\nthen run `cargo build` to generate the permissions, then remove the commands to prevent the autogenerated files from being overwritten\r\n\r\n```rust\r\nconst COMMANDS: &[&str] = &[];\r\n```\r\n\r\nthen I manually changed the autogenerated `permissions/autogenerated/commands/check_permissions.toml`\r\n\r\n```toml\r\n# Automatically generated - DO NOT EDIT!\r\n\r\n\"$schema\" = \"../../schemas/schema.json\"\r\n\r\n[[permission]]\r\nidentifier = \"allow-check-permissions\"\r\ndescription = \"Enables the check_permissions command without any pre-configured scope.\"\r\ncommands.allow = [\"checkPermissions\"] <- change to camelcase\r\n\r\n[[permission]]\r\nidentifier = \"deny-check-permissions\"\r\ndescription = \"Denies the check_permissions command without any pre-configured scope.\"\r\ncommands.deny = [\"checkPermissions\"] <- change to camelcase\r\n```\r\n\r\n\n\n### Reproduction\n\n_No response_\n\n### Expected behavior\n\nremove the snake case requirement and be more flexible in how the permissions are generated OR provide a detailed guide on how users can create their own permissions without using the autogenerate.\n\n### Full `tauri info` output\n\n```text\n[✔] Environment\r\n    - OS: Mac OS 14.2.1 X64\r\n    ✔ Xcode Command Line Tools: installed\r\n    ✔ rustc: 1.76.0 (07dca489a 2024-02-04)\r\n    ✔ cargo: 1.76.0 (c84b36747 2024-01-18)\r\n    ✔ rustup: 1.26.0 (5af9b9484 2023-04-05)\r\n    ✔ Rust toolchain: stable-aarch64-apple-darwin (environment override by RUSTUP_TOOLCHAIN)\r\n    - node: 18.19.0\r\n    - npm: 10.2.3\r\n\r\n[-] Packages\r\n    - tauri-cli [RUST]: 2.0.0-beta.1\r\n    - @tauri-apps/api [NPM]: 2.0.0-beta.0\r\n    - @tauri-apps/cli [NPM]: 2.0.0-beta.1\r\n\r\n[-] App\n```\n\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\nhttps://discord.com/channels/616186924390023171/1207460554940358696","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/8872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/8872/timeline","performed_via_github_app":null,"state_reason":"completed"}