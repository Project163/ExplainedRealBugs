{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2643","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2643/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2643/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2643/events","html_url":"https://github.com/tauri-apps/tauri/issues/2643","id":1005580001,"node_id":"I_kwDOC7lts8477-7h","number":2643,"title":"Tauri forced layout of `src-tauri` prevents some organizational strategies","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-09-23T15:39:15Z","updated_at":"2021-09-27T17:54:42Z","closed_at":"2021-09-27T17:54:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### **Describe the bug**\r\n\r\nTauri right now assumes that its source always live in a `src-tauri` folder.\r\n\r\n### **To Reproduce**\r\n\r\n1. Take any valid Tauri app.\r\n2. Rename the `src-tauri` folder to anything else.\r\n3. Try to run any command like `cargo tauri dev` or `cargo tauri build`.\r\n\r\n### **Expected behavior**\r\nThe application builds as usual.\r\n\r\n### **Screenshots**\r\n\r\nN/A.\r\n\r\n### **Platform and Versions (required):**\r\n\r\n```\r\nOperating System - Windows, version 10.0.19043 X64\r\nWebview2 - 93.0.961.52\r\n\r\nNode.js environment\r\n  Node.js - 16.9.1\r\n  @tauri-apps/cli - 1.0.0-beta.10\r\n\r\nGlobal packages\r\n  npm - 7.24.0\r\n  yarn - 1.22.11\r\n\r\nRust environment\r\n  rustc - 1.54.0\r\n  cargo - 1.54.0\r\n```\r\n\r\n### **Additional context**\r\n\r\nWe use Tauri in our monorepo of Rust code which contains many binaries, several of which are actually Tauri applications. Their frontends are generated in various ways and not tied to a particular frontend framework (like `vue.js` for instance).\r\n\r\nMy understanding is that Tauri assumes so far that it lives on top of an existing frontend code but there seem to be no strong technical reason why it couldn't be considered as an entrypoint that just loads an opaque `dist` folder of web-related files.\r\n\r\nTo give some context, our current Rust repository structure looks like:\r\n\r\n```\r\nlib/\r\n  ...\r\nclient/\r\n  editor/    <-- Tauri app.\r\n    Cargo.toml\r\n    tauri.conf.json\r\n    src/\r\n    frontend/  <-- Root of the web frontend project.\r\n      dist/    <-- Compiled web files.\r\n      package.json\r\n      node_modules/\r\n        ...\r\n      ...\r\n  viewer/   <-- Another Tauri app.\r\n    ...\r\n  compiler/  <-- A Rust app, but not a Tauri one.\r\n    Cargo.toml\r\n    src/\r\n      ...\r\n    ...\r\n  merger/\r\n    ...\r\n   ...\r\n```\r\n\r\nAny attempt to run `cargo tauri dev` or `cargo tauri build` in that structure yields an error, as [this line](https://github.com/tauri-apps/tauri/blob/262781d9f7db0318517834982690ebe3d71812c4/tooling/cli.rs/src/helpers/app_paths.rs#L16) clearly expects the `Cargo.toml` and associated Rust directory-structure to be under a `src-tauri`-named folder.\r\n\r\nWhile we could technically add an extra folder on top of all Tauri-based clients, we'd like to avoid it as:\r\n\r\n- It breaks symmetry with the other clients that are not Tauri-based.\r\n- It really doesn't look nice from a cosmetic PoV.\r\n\r\nAre we attempting something that just should not be done and are we missing obvious reasons why it cannot work ?\r\n\r\n**I wonder if just looking for the first folder that contains the `tauri.conf.json` file, regardless of whether it is actually called `src-tauri` instead would work equally well, while permitting more liberal directory structures.**\r\n\r\nIf that's a scenario that you think should be supported, I'd be more than happy to contribute to this awesome project and make the necessary changes and PRs to make this happen. Let me know!\r\n\r\n### **Stack Trace**\r\n\r\n```\r\nPS C:\\Users\\<redacted>\\monorepo\\client\\editor> cargo tauri dev\r\nthread 'main' panicked at 'Couldn't recognize the current folder as a Tauri project.', src\\helpers\\app_paths.rs:29:3\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2643/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2643/timeline","performed_via_github_app":null,"state_reason":"completed"}