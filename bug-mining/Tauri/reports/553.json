{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/11103","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/11103/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/11103/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/11103/events","html_url":"https://github.com/tauri-apps/tauri/issues/11103","id":2543879293,"node_id":"I_kwDOC7lts86XoIR9","number":11103,"title":"[bug] - Using sysroot for 'iPhoneOS' but targeting 'MacOSX'","user":{"login":"stolinski","id":669383,"node_id":"MDQ6VXNlcjY2OTM4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/669383?v=4","gravatar_id":"","url":"https://api.github.com/users/stolinski","html_url":"https://github.com/stolinski","followers_url":"https://api.github.com/users/stolinski/followers","following_url":"https://api.github.com/users/stolinski/following{/other_user}","gists_url":"https://api.github.com/users/stolinski/gists{/gist_id}","starred_url":"https://api.github.com/users/stolinski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolinski/subscriptions","organizations_url":"https://api.github.com/users/stolinski/orgs","repos_url":"https://api.github.com/users/stolinski/repos","events_url":"https://api.github.com/users/stolinski/events{/privacy}","received_events_url":"https://api.github.com/users/stolinski/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":7,"created_at":"2024-09-23T22:56:41Z","updated_at":"2025-10-07T22:46:23Z","closed_at":"2024-10-01T11:54:48Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nI'm attempting to port Tauri In App Payments to both v2 as well as iOS. Everything is building, but when running tauri ios dev i'm getting an invalid manifest error.\r\n\r\nI had posted on Discord about if this was a swift-rs issue or a Tauri issue and was told to open here, but it's possibly a swift-rs issue.\n\n### Reproduction\n\nhttps://github.com/stolinski/scott-ttemp\r\n\r\nRun `tauri dev ios`\n\n### Expected behavior\n\nApp loads.\n\n### Full `tauri info` output\n\n```text\n[âœ”] Environment\r\n    - OS: Mac OS 15.0.0 arm64 (X64)\r\n    âœ” Xcode Command Line Tools: installed\r\n    âœ” rustc: 1.81.0 (eeb90cda1 2024-09-04)\r\n    âœ” cargo: 1.81.0 (2dbb1af80 2024-08-20)\r\n    âœ” rustup: 1.27.1 (54dd3d00f 2024-04-24)\r\n    âœ” Rust toolchain: stable-aarch64-apple-darwin (default)\r\n    - node: 20.16.0\r\n    - pnpm: 9.7.0\r\n    - npm: 10.8.1\r\n    - bun: 1.0.25\r\n\r\n[-] Packages\r\n    - tauri ðŸ¦€: 2.0.0-rc.6\r\n    - tauri-build ðŸ¦€: 2.0.0-rc.6\r\n    - wry ðŸ¦€: 0.42.0\r\n    - tao ðŸ¦€: 0.29.1\r\n    - @tauri-apps/api îœ˜: 2.0.0-rc.4\r\n    - @tauri-apps/cli îœ˜: 2.0.0-rc.13\r\n\r\n[-] Plugins\r\n    - tauri-plugin-shell ðŸ¦€: 2.0.0-rc.2\r\n    - @tauri-apps/plugin-shell îœ˜: 2.0.0-rc.1\r\n\r\n[-] App\r\n    - build-type: bundle\r\n    - CSP: unset\r\n    - frontendDist: ../build\r\n    - devUrl: http://localhost:1420/\r\n    - framework: Svelte\r\n    - bundler: Vite\r\n\r\n[-] iOS\r\n    - Developer Teams: Level Up Tutorials LLC (ID: AS6YFWZTTJ), Scott Tolinski (ID: WX3RQ7F2B7)\n```\n\n\n### Stack trace\n\n```text\nerror: failed to run custom build command for `tauri-plugin-iap v0.0.1 (/Users/scotttolinski/Sites/projects/decider-app/plugins/iap)`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/Users/scotttolinski/Sites/projects/decider-app/src-tauri/target/debug/build/tauri-plugin-iap-096f22ba769ec6f5/build-script-build` (exit status: 101)\r\n  --- stdout\r\n  cargo:rustc-link-search=native=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift/iphoneos\r\n  cargo:rustc-link-search=native=/usr/lib/swift\r\n  cargo:rustc-link-lib=clang_rt.ios\r\n  cargo:rustc-link-search=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/16/lib/darwin\r\n\r\n  --- stderr\r\n  error: 'swift-iap': Invalid manifest (compiled with: [\"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swiftc\", \"-vfsoverlay\", \"/var/folders/fm/_sgpt7q91_x97jrvd53whjtm0000gn/T/TemporaryDirectory.0ewK2P/vfs.yaml\", \"-L\", \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift/pm/ManifestAPI\", \"-lPackageDescription\", \"-Xlinker\", \"-rpath\", \"-Xlinker\", \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift/pm/ManifestAPI\", \"-target\", \"arm64-apple-macosx13.0\", \"-sdk\", \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk\", \"-F\", \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/Library/Frameworks\", \"-I\", \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/usr/lib\", \"-L\", \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/usr/lib\", \"-swift-version\", \"5\", \"-I\", \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift/pm/ManifestAPI\", \"-sdk\", \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk\", \"-package-description-version\", \"5.10.0\", \"/Users/scotttolinski/Sites/projects/decider-app/plugins/iap/swift-iap/Package.swift\", \"-o\", \"/var/folders/fm/_sgpt7q91_x97jrvd53whjtm0000gn/T/TemporaryDirectory.FtT0p1/swift-iap-manifest\"])\r\n  <unknown>:0: warning: using sysroot for 'iPhoneOS' but targeting 'MacOSX'\r\n  <unknown>:0: error: unable to load standard library for target 'arm64-apple-macosx13.0'\r\n  error: 'swift-iap': Invalid manifest (compiled with: [\"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swiftc\", \"-vfsoverlay\", \"/var/folders/fm/_sgpt7q91_x97jrvd53whjtm0000gn/T/TemporaryDirectory.JpQjNZ/vfs.yaml\", \"-L\", \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift/pm/ManifestAPI\", \"-lPackageDescription\", \"-Xlinker\", \"-rpath\", \"-Xlinker\", \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift/pm/ManifestAPI\", \"-target\", \"arm64-apple-macosx13.0\", \"-sdk\", \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk\", \"-F\", \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/Library/Frameworks\", \"-I\", \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/usr/lib\", \"-L\", \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/usr/lib\", \"-swift-version\", \"5\", \"-I\", \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift/pm/ManifestAPI\", \"-sdk\", \"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk\", \"-package-description-version\", \"5.10.0\", \"/Users/scotttolinski/Sites/projects/decider-app/plugins/iap/swift-iap/Package.swift\", \"-o\", \"/var/folders/fm/_sgpt7q91_x97jrvd53whjtm0000gn/T/TemporaryDirectory.m4eIAY/swift-iap-manifest\"])\r\n  <unknown>:0: warning: using sysroot for 'iPhoneOS' but targeting 'MacOSX'\r\n  <unknown>:0: error: unable to load standard library for target 'arm64-apple-macosx13.0'\r\n  thread 'main' panicked at /Users/scotttolinski/.cargo/registry/src/index.crates.io-6f17d22bba15001f/swift-rs-1.0.7/src-rs/build.rs:281:17:\r\n  Failed to compile swift package TauriIAP\r\n  stack backtrace:\r\n     0: rust_begin_unwind\r\n               at /rustc/eeb90cda1969383f56a2637cbd3037bdf598841c/library/std/src/panicking.rs:665:5\r\n     1: core::panicking::panic_fmt\r\n               at /rustc/eeb90cda1969383f56a2637cbd3037bdf598841c/library/core/src/panicking.rs:74:14\r\n     2: swift_rs::build::SwiftLinker::link\r\n               at /Users/scotttolinski/.cargo/registry/src/index.crates.io-6f17d22bba15001f/swift-rs-1.0.7/src-rs/build.rs:281:17\r\n     3: build_script_build::main\r\n               at ./build.rs:6:5\r\n     4: core::ops::function::FnOnce::call_once\r\n               at /rustc/eeb90cda1969383f56a2637cbd3037bdf598841c/library/core/src/ops/function.rs:250:5\r\n  note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\n    Error [tauri_cli_node] Failed to run `cargo build`: command [\"cargo\", \"build\", \"--package\", \"decider-app\", \"--manifest-path\", \"/Users/scotttolinski/Sites/projects/decider-app/src-tauri/Cargo.toml\", \"--target\", \"aarch64-apple-ios\", \"--features\", \"tauri/rustls-tls\", \"--lib\", \"--no-default-features\"] exited with code 101\r\nâ€‰ELIFECYCLEâ€‰ Command failed with exit code 1.\r\n\r\nnote: Run script build phase 'Build Rust Code' will be run during every build because the option to run the script phase \"Based on dependency analysis\" is unchecked. (in target 'decider-app_iOS' from project 'decider-app')\r\n** BUILD FAILED **\r\n\r\n\r\nThe following build commands failed:\r\n\tPhaseScriptExecution Build\\ Rust\\ Code /Users/scotttolinski/Library/Developer/Xcode/DerivedData/decider-app-hepjwdpaecdpowcrsqiophscuzit/Build/Intermediates.noindex/decider-app.build/debug-iphoneos/decider-app_iOS.build/Script-BFE46E4EC9F9451DEBF6C466.sh (in target 'decider-app_iOS' from project 'decider-app')\r\n\tBuilding workspace decider-app with scheme decider-app_iOS and configuration debug\r\n(2 failures)\r\n    Error command [\"xcodebuild\"] exited with code 65\r\nâ€‰ELIFECYCLEâ€‰ Command failed with exit code 1.\n```\n\n\n### Additional context\n\nWith some adjustments it worked just fine for MacOS but never for iOS.","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/11103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/11103/timeline","performed_via_github_app":null,"state_reason":"completed"}