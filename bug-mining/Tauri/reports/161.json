{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4008","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4008/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4008/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4008/events","html_url":"https://github.com/tauri-apps/tauri/issues/4008","id":1221445120,"node_id":"I_kwDOC7lts85IzcYA","number":4008,"title":"CLI doesn’t clear keychain on macos","user":{"login":"JonasKruckenberg","id":25329995,"node_id":"MDQ6VXNlcjI1MzI5OTk1","avatar_url":"https://avatars.githubusercontent.com/u/25329995?v=4","gravatar_id":"","url":"https://api.github.com/users/JonasKruckenberg","html_url":"https://github.com/JonasKruckenberg","followers_url":"https://api.github.com/users/JonasKruckenberg/followers","following_url":"https://api.github.com/users/JonasKruckenberg/following{/other_user}","gists_url":"https://api.github.com/users/JonasKruckenberg/gists{/gist_id}","starred_url":"https://api.github.com/users/JonasKruckenberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonasKruckenberg/subscriptions","organizations_url":"https://api.github.com/users/JonasKruckenberg/orgs","repos_url":"https://api.github.com/users/JonasKruckenberg/repos","events_url":"https://api.github.com/users/JonasKruckenberg/events{/privacy}","received_events_url":"https://api.github.com/users/JonasKruckenberg/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3176728874,"node_id":"MDU6TGFiZWwzMTc2NzI4ODc0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/scope:%20cli.rs","name":"scope: cli.rs","color":"D4C5F9","default":false,"description":"The tauri-cli rust crate"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-04-29T19:35:33Z","updated_at":"2022-05-05T21:29:42Z","closed_at":"2022-05-05T21:29:42Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nDuring signing on macOS we create a keychain that holds the certificate and keys used for that process. \r\nWe also set it as the default keychain for the system. This would be fine normally, but we just don’t revert the default and remove the keychain. This makes signing on non-CI machines pretty awkward.\r\n\r\ne.g. I couldn’t log in to any apps anymore.\r\n\r\n### Reproduction\r\n\r\n_No response_\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Platform and versions\r\n\r\n```shell\r\ncargo tauri info\r\n\r\nEnvironment\r\n  › OS: Mac OS 12.4.0 X64\r\n  › Node.js: 18.0.0\r\n  › npm: 8.6.0\r\n  › pnpm: 7.0.0-rc.7\r\n  › yarn: 3.1.0\r\n  › rustup: 1.24.3\r\n  › rustc: 1.59.0\r\n  › cargo: 1.59.0\r\n  › Rust toolchain: stable-aarch64-apple-darwin \r\n\r\nPackages\r\nWARNING: no lock files found, defaulting to npm\r\n  › @tauri-apps/cli [NPM]: 1.0.0-rc.9\r\n  › @tauri-apps/api [NPM]: 1.0.0-rc.3(outdated, latest: 1.0.0-rc.4)\r\n  › tauri [RUST]: 1.0.0-rc.6 (no lockfile),\r\n  › tauri-build [RUST]: no manifest (no lockfile),\r\n  › tao [RUST]: no manifest (no lockfile),\r\n  › wry [RUST]: no manifest (no lockfile),\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: default-src 'self' style-src 'self' 'unsafe-inline' connect-src http://localhost:55001\r\n  › distDir: ../../plz-out/gen/frontend/dist/client\r\n  › devPath: http://localhost:3000/\r\npackage.json not found\r\n\r\nApp directory structure\r\n  ├─ app\r\n  ├─ extension-host\r\n  ├─ common\r\n  ├─ ext-youtube\r\n  └─ ext-twitter\r\n```\r\n\r\n\r\n### Stack trace\r\n\r\n_No response_\r\n\r\n### Additional context\r\n\r\nWe should do two things:\r\n1.  Remove the keychain after every signing attempt (successful or not)\r\n2. We shouldn’t rely on a default keychain if possible (I think reverting the default keychain requires a restart)","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4008/timeline","performed_via_github_app":null,"state_reason":"completed"}