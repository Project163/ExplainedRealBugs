{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4087","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4087/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4087/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4087/events","html_url":"https://github.com/tauri-apps/tauri/issues/4087","id":1229285158,"node_id":"I_kwDOC7lts85JRWcm","number":4087,"title":"[bug] Unnecessary folder for resources on windows","user":{"login":"gimait","id":14293015,"node_id":"MDQ6VXNlcjE0MjkzMDE1","avatar_url":"https://avatars.githubusercontent.com/u/14293015?v=4","gravatar_id":"","url":"https://api.github.com/users/gimait","html_url":"https://github.com/gimait","followers_url":"https://api.github.com/users/gimait/followers","following_url":"https://api.github.com/users/gimait/following{/other_user}","gists_url":"https://api.github.com/users/gimait/gists{/gist_id}","starred_url":"https://api.github.com/users/gimait/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gimait/subscriptions","organizations_url":"https://api.github.com/users/gimait/orgs","repos_url":"https://api.github.com/users/gimait/repos","events_url":"https://api.github.com/users/gimait/events{/privacy}","received_events_url":"https://api.github.com/users/gimait/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3310697304,"node_id":"MDU6TGFiZWwzMzEwNjk3MzA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20Windows","name":"platform: Windows","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-05-09T07:14:51Z","updated_at":"2022-05-13T12:56:06Z","closed_at":"2022-05-13T12:56:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nResources are not added correctly to the Wix file, producing a faulty bundle on Windows builds.\n\n### Reproduction\n\n1. Add a resource file to `tauri.conf.json`.\r\n2. Create a Windows build.\r\n3. Install the application using the generated .msi file.\n\n### Expected behavior\n\nWhen adding a resource folder in the path `../res`, the resources should be installed in a folder called `_up_/res`. \r\nI would also expect that a file `../res/resource1.txt` would appear in the path `_up_/res/resource1.txt`.\r\nThis is for consistency with other builds and the expected behaviour for the dev environment.\r\n\r\nIn the current state of the bundler, the generated wix file ignores the standard defined in https://github.com/tauri-apps/tauri/blob/87a2c2f8f6bd513e6c1f925ec7da480370f5a2a7/core/tauri-utils/src/resources.rs#L10\r\nIt also adds an extra directory for each file with its file name, moving the resources to folders with their own name.\r\n\r\nThis means that a resource `../res/resource1.txt` gets copied to `res/resource1.txt/resource1.txt`, rather than the correct `_up_/res/resource1.txt`.\r\n\r\n\n\n### Platform and versions\n\n```shell\nEnvironment\r\n  › OS: Windows 10.0.19043 X64\r\n  › Webview2: 101.0.1210.39\r\n  › MSVC: \r\n      - Visual Studio Community 2019\r\n  › Node.js: 18.0.0\r\n  › npm: 8.6.0\r\n  › pnpm: 6.11.0\r\n  › yarn: 1.22.15\r\n  › rustup: 1.24.3\r\n  › rustc: 1.59.0\r\n  › cargo: 1.59.0\r\n  › Rust toolchain: stable-x86_64-pc-windows-msvc \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.0.0-rc.10\r\n  › @tauri-apps/api [NPM]: 1.0.0-rc.5\r\n  › tauri [RUST]: 1.0.0-rc.8,\r\n  › tauri-build [RUST]: 1.0.0-rc.7,\r\n  › tao [RUST]: 0.8.3,\r\n  › wry [RUST]: 0.15.1,\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: ../build\r\n  › devPath: http://localhost:3000/\r\n  › framework: React\n```\n\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4087/timeline","performed_via_github_app":null,"state_reason":"completed"}