{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4126","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4126/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4126/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4126/events","html_url":"https://github.com/tauri-apps/tauri/issues/4126","id":1235792174,"node_id":"I_kwDOC7lts85JqLEu","number":4126,"title":"[bug] Using glob syntax in tauri.conf \"resources\" causes error during build: \"error running light.exe\"","user":{"login":"nathanbabcock","id":9583103,"node_id":"MDQ6VXNlcjk1ODMxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/9583103?v=4","gravatar_id":"","url":"https://api.github.com/users/nathanbabcock","html_url":"https://github.com/nathanbabcock","followers_url":"https://api.github.com/users/nathanbabcock/followers","following_url":"https://api.github.com/users/nathanbabcock/following{/other_user}","gists_url":"https://api.github.com/users/nathanbabcock/gists{/gist_id}","starred_url":"https://api.github.com/users/nathanbabcock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nathanbabcock/subscriptions","organizations_url":"https://api.github.com/users/nathanbabcock/orgs","repos_url":"https://api.github.com/users/nathanbabcock/repos","events_url":"https://api.github.com/users/nathanbabcock/events{/privacy}","received_events_url":"https://api.github.com/users/nathanbabcock/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3307096872,"node_id":"MDU6TGFiZWwzMzA3MDk2ODcy","url":"https://api.github.com/repos/tauri-apps/tauri/labels/priority:%201%20high","name":"priority: 1 high","color":"E844A1","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-05-13T23:32:40Z","updated_at":"2022-05-15T13:01:11Z","closed_at":"2022-05-15T13:01:11Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nSpecify glob syntax in `tauri.conf.json`:\r\n\r\n```json\r\n\"resources\": [\"./assets/**/*\"],\r\n```\r\n\r\nThis will work during dev, and in fact the assets will be properly bundled into both `/target/debug/` and `/target/release/`.\r\n\r\nHowever, it results in this error after running `npm run tauri build`:\r\n\r\n```\r\nError running CLI: failed to bundle project: error running light.exe: error running light.exe: ``\r\n```\r\n\r\nNotes:\r\n- It seems there must be a subfolder inside the `/assets` folder for the error to occur\r\n- If the glob syntax is omitted via `\"resources\": [\"./assets\"]`, then it seems that assets inside the subfolder are not re-copied during debug\n\n### Reproduction\n\n**Minimal reproduction in git repo:**\r\n1. `git clone https://github.com/nathanbabcock/tauri-app`\r\n2. `npm install`\r\n3. `npm run tauri build`\r\n4. Error occurs\r\n\r\n```\r\nError running CLI: failed to bundle project: error running light.exe: error running light.exe: ``\r\n```\r\n\r\n**Repro from scratch:**\r\n1. Create an asset in a nested subfolder, e.g. `/assets/subfolder/resource.txt`\r\n2. Add these resources to `tauri.conf.json` using glob syntax: `\"resources\": [\"./assets/**/*\"]`\r\n3. `npm run tauri build`\r\n4. Error occurs\r\n\r\n```\r\nError running CLI: failed to bundle project: error running light.exe: error running light.exe: ``\r\n```\n\n### Expected behavior\n\nInstaller should be correctly bundled when using glob syntax for `resources`.\n\n### Platform and versions\n\n```shell\nEnvironment\r\n  › OS: Windows 10.0.19044 X64\r\n  › Webview2: 101.0.1210.39\r\n  › MSVC: \r\n      - Visual Studio Community 2019\r\n      - Visual Studio Build Tools 2017\r\n  › Node.js: 14.18.0\r\n  › npm: 8.7.0\r\n  › pnpm: Not installed!\r\n  › yarn: Not installed!\r\n  › rustup: 1.24.3\r\n  › rustc: 1.60.0\r\n  › cargo: 1.60.0\r\n  › Rust toolchain: stable-x86_64-pc-windows-msvc \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.0.0-rc.10\r\n  › @tauri-apps/api [NPM]: 1.0.0-rc.5\r\n  › tauri [RUST]: 1.0.0-rc.10,\r\n  › tauri-build [RUST]: 1.0.0-rc.8,\r\n  › tao [RUST]: 0.8.4,\r\n  › wry [RUST]: 0.16.2,\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: ../dist\r\n  › devPath: http://localhost:3000/\r\n  › framework: React\r\n\r\nApp directory structure\r\n  ├─ .git\r\n  ├─ dist\r\n  ├─ node_modules\r\n  ├─ src\r\n  └─ src-tauri\r\n```\n```\n\n\n### Stack trace\n\n```shell\n$ npm run tauri build\r\n\r\n> tauri-app@0.0.0 tauri\r\n> tauri \"build\"\r\n\r\n     Running beforeBuildCommand `npm run build`\r\n\r\n> tauri-app@0.0.0 build\r\n> tsc && vite build\r\n\r\nvite v2.9.9 building for production...\r\n✓ 34 modules transformed.\r\ndist/assets/favicon.17e50649.svg   1.49 KiB\r\ndist/assets/logo.ecc203fb.svg      2.61 KiB\r\ndist/index.html                    0.46 KiB\r\ndist/assets/index.62f502b0.css     0.75 KiB / gzip: 0.48 KiB\r\ndist/assets/index.2b0e2339.js      140.35 KiB / gzip: 45.10 KiB\r\n   Compiling app v0.1.0 (F:\\git\\tauri-app\\src-tauri)\r\n    Finished release [optimized] target(s) in 26.50s\r\n        Info Target: x64\r\n     Running candle for \"main.wxs\"\r\n     Running light to produce F:\\git\\tauri-app\\src-tauri\\target\\release\\bundle/msi/tauri-app_0.1.0_x64_en-US.msi\r\nError running CLI: failed to bundle project: error running light.exe: error running light.exe: ``\r\n```\n```\n\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4126/timeline","performed_via_github_app":null,"state_reason":"completed"}