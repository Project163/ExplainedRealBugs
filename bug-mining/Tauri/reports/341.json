{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6928","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6928/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6928/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6928/events","html_url":"https://github.com/tauri-apps/tauri/issues/6928","id":1704325943,"node_id":"I_kwDOC7lts85llfM3","number":6928,"title":"[feat] Overriding installation path for NSIS installation packages during silent instalation doesn't work","user":{"login":"gribunin","id":10184515,"node_id":"MDQ6VXNlcjEwMTg0NTE1","avatar_url":"https://avatars.githubusercontent.com/u/10184515?v=4","gravatar_id":"","url":"https://api.github.com/users/gribunin","html_url":"https://github.com/gribunin","followers_url":"https://api.github.com/users/gribunin/followers","following_url":"https://api.github.com/users/gribunin/following{/other_user}","gists_url":"https://api.github.com/users/gribunin/gists{/gist_id}","starred_url":"https://api.github.com/users/gribunin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gribunin/subscriptions","organizations_url":"https://api.github.com/users/gribunin/orgs","repos_url":"https://api.github.com/users/gribunin/repos","events_url":"https://api.github.com/users/gribunin/events{/privacy}","received_events_url":"https://api.github.com/users/gribunin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3307089819,"node_id":"MDU6TGFiZWwzMzA3MDg5ODE5","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20feature%20request","name":"type: feature request","color":"446DBA","default":false,"description":""},{"id":3310697304,"node_id":"MDU6TGFiZWwzMzEwNjk3MzA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20Windows","name":"platform: Windows","color":"fef2c0","default":false,"description":""},{"id":3413949527,"node_id":"LA_kwDOC7lts87LfLxX","url":"https://api.github.com/repos/tauri-apps/tauri/labels/scope:%20bundler","name":"scope: bundler","color":"D4C5F9","default":false,"description":"The bundler used in our cli to make installers"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-05-10T17:06:22Z","updated_at":"2023-05-15T15:14:19Z","closed_at":"2023-05-15T15:14:19Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the problem\n\nUsually the installation package generated with NSIS allows to pass the installation directory via command line. This is especially important for silent installations. The command line looks like this:\r\n```\r\ninstaller.exe /S /D=C:\\Users\\Public\\installDir\r\n```\r\nIn order the installer to support this parameter the code in the installer must look something like this:\r\n```nsis\r\n${If} $InstDir == \"\" ; /D not used\r\n    ; custom logic to set installation path\r\n${EndIf}\r\n```\r\nNSIS template in the Tauri codebase (\\tooling\\bundler\\src\\bundle\\windows\\templates\\installer.nsi ) doesn't check against if the $InstDir is already set (via command line) and just sets the $InstDir value based on install mode.\n\n### Describe the solution you'd like\n\nI think the NSIS installation template must be modified so that the $InstDir  will be set only if it wasn't set via command line parameter. Something like this:\r\n```nsis\r\n${If} $InstDir == \"\" ; /D not used\r\n  !if \"${INSTALLMODE}\" == \"perMachine\"\r\n    ; Set default install location\r\n    ${If} ${RunningX64}\r\n      !if \"${ARCH}\" == \"x64\"\r\n        StrCpy $INSTDIR \"$PROGRAMFILES64\\${PRODUCTNAME}\"\r\n      !else if \"${ARCH}\" == \"arm64\"\r\n        StrCpy $INSTDIR \"$PROGRAMFILES64\\${PRODUCTNAME}\"\r\n      !else\r\n        StrCpy $INSTDIR \"$PROGRAMFILES\\${PRODUCTNAME}\"\r\n      !endif\r\n    ${Else}\r\n      StrCpy $INSTDIR \"$PROGRAMFILES\\${PRODUCTNAME}\"\r\n    ${EndIf}\r\n  !else if \"${INSTALLMODE}\" == \"currentUser\"\r\n    StrCpy $INSTDIR \"$LOCALAPPDATA\\${PRODUCTNAME}\"\r\n  !endif\r\n!endif\r\n```\n\n### Alternatives considered\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"amrbashir","id":48618675,"node_id":"MDQ6VXNlcjQ4NjE4Njc1","avatar_url":"https://avatars.githubusercontent.com/u/48618675?v=4","gravatar_id":"","url":"https://api.github.com/users/amrbashir","html_url":"https://github.com/amrbashir","followers_url":"https://api.github.com/users/amrbashir/followers","following_url":"https://api.github.com/users/amrbashir/following{/other_user}","gists_url":"https://api.github.com/users/amrbashir/gists{/gist_id}","starred_url":"https://api.github.com/users/amrbashir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrbashir/subscriptions","organizations_url":"https://api.github.com/users/amrbashir/orgs","repos_url":"https://api.github.com/users/amrbashir/repos","events_url":"https://api.github.com/users/amrbashir/events{/privacy}","received_events_url":"https://api.github.com/users/amrbashir/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6928/timeline","performed_via_github_app":null,"state_reason":"completed"}