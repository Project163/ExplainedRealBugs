{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2622","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2622/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2622/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2622/events","html_url":"https://github.com/tauri-apps/tauri/issues/2622","id":1002558670,"node_id":"I_kwDOC7lts847wdTO","number":2622,"title":"Production build flashing then crash on macOS","user":{"login":"bangnokia","id":5652494,"node_id":"MDQ6VXNlcjU2NTI0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5652494?v=4","gravatar_id":"","url":"https://api.github.com/users/bangnokia","html_url":"https://github.com/bangnokia","followers_url":"https://api.github.com/users/bangnokia/followers","following_url":"https://api.github.com/users/bangnokia/following{/other_user}","gists_url":"https://api.github.com/users/bangnokia/gists{/gist_id}","starred_url":"https://api.github.com/users/bangnokia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bangnokia/subscriptions","organizations_url":"https://api.github.com/users/bangnokia/orgs","repos_url":"https://api.github.com/users/bangnokia/repos","events_url":"https://api.github.com/users/bangnokia/events{/privacy}","received_events_url":"https://api.github.com/users/bangnokia/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-09-21T14:06:04Z","updated_at":"2021-09-29T19:28:38Z","closed_at":"2021-09-29T19:28:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- BEFORE YOU FILE A NEW ISSUE-->\r\n<!--\r\n\r\n0. Please search open issues before duplicating a new one.\r\n1. Make sure you are using the latest version of everything including: \r\n  - rustc \r\n  - ALL relevant Tauri Libs\r\n2. You must attach the results of cargo tauri info or yarn tauri info to your issue.\r\n3. Make sure it is an issue with Tauri, and not something to do with your side of the stack.\r\n4. Consider starting a discussion. Speaking of which, have you looked there? Maybe your question has been answered.\r\n5. Remember to follow our community guidelines and be friendly.\r\n6. Is this an issue or a feature request? If the latter, please use the other template.\r\n\r\n-->\r\n\r\n### **Describe the bug**\r\nThe built version of app crash and can not open on MacOS (windows working fine)\r\n\r\n### **To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build app target MacOS\r\n2. Open the app, the it flashing an windows error then close\r\n![Screen Shot 2021-09-21 at 21 04 25](https://user-images.githubusercontent.com/5652494/134185635-24336fd9-1e12-4eba-be05-4d96a21c585a.png)\r\n3. I get some error reported by macos\r\n\r\n```\r\nOS Version:            macOS 11.3.1 (20E241)\r\nReport Version:        12\r\nAnonymous UUID:        D03E5307-1685-B2C2-5C0D-68B7CC89710D\r\n\r\nSleep/Wake UUID:       CE66EF6F-8370-4B4A-9155-29A5D2BA22CD\r\n\r\nTime Awake Since Boot: 79000 seconds\r\nTime Since Wake:       24000 seconds\r\n\r\nSystem Integrity Protection: disabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BAD_ACCESS (SIGSEGV)\r\nException Codes:       EXC_I386_GPFLT\r\nException Note:        EXC_CORPSE_NOTIFY\r\n\r\nTermination Signal:    Segmentation fault: 11\r\nTermination Reason:    Namespace SIGNAL, Code 0xb\r\nTerminating Process:   exc handler [48339]\r\n\r\nThread 0 Crashed:: Dispatch queue: com.apple.main-thread\r\n0   com.daudau.tinker2            \t0x000000010d4b63e1 wry::webview::wkwebview::InnerWebView::new::start_task::h800cb655ae241e2e + 1905\r\n1   com.apple.WebKit              \t0x00007fff3c41613b WebKit::WebURLSchemeHandlerCocoa::platformStartTask(WebKit::WebPageProxy&, WebKit::WebURLSchemeTask&) + 551\r\n2   com.apple.WebKit              \t0x00007fff3c4d7e5e WebKit::WebURLSchemeHandler::startTask(WebKit::WebPageProxy&, WebKit::WebProcessProxy&, WTF::ObjectIdentifier<WebCore::PageIdentifierType>, WebKit::URLSchemeTaskParameters&&, WTF::CompletionHandler<void (WebCore::ResourceResponse const&, WebCore::ResourceError const&, WTF::Vector<char, 0ul, WTF::CrashOnOverflow, 16ul, WTF::FastMalloc> const&)>&&) + 242\r\n3   com.apple.WebKit              \t0x00007fff3c496f33 WebKit::WebPageProxy::startURLSchemeTaskShared(WTF::Ref<WebKit::WebProcessProxy, WTF::RawPtrTraits<WebKit::WebProcessProxy> >&&, WTF::ObjectIdentifier<WebCore::PageIdentifierType>, WebKit::URLSchemeTaskParameters&&) + 119\r\n4   com.apple.WebKit              \t0x00007fff3c496e8f WebKit::WebPageProxy::startURLSchemeTask(WebKit::URLSchemeTaskParameters&&) + 39\r\n5   com.apple.WebKit              \t0x00007fff3c74d0d0 WebKit::WebPageProxy::didReceiveMessage(IPC::Connection&, IPC::Decoder&) + 96708\r\n6   com.apple.WebKit              \t0x00007fff3c14876b IPC::MessageReceiverMap::dispatchMessage(IPC::Connection&, IPC::Decoder&) + 125\r\n7   com.apple.WebKit              \t0x00007fff3c4d31d2 WebKit::WebProcessProxy::didReceiveMessage(IPC::Connection&, IPC::Decoder&) + 28\r\n8   com.apple.WebKit              \t0x00007fff3c12a268 IPC::Connection::dispatchMessage(std::__1::unique_ptr<IPC::Decoder, std::__1::default_delete<IPC::Decoder> >) + 700\r\n9   com.apple.WebKit              \t0x00007fff3c129aa6 IPC::Connection::dispatchIncomingMessages() + 488\r\n10  com.apple.JavaScriptCore      \t0x00007fff3755a9ed WTF::RunLoop::performWork() + 573\r\n11  com.apple.JavaScriptCore      \t0x00007fff3755b75a WTF::RunLoop::performWork(void*) + 26\r\n12  com.apple.CoreFoundation      \t0x00007fff206a8a8c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17\r\n13  com.apple.CoreFoundation      \t0x00007fff206a89f4 __CFRunLoopDoSource0 + 180\r\n14  com.apple.CoreFoundation      \t0x00007fff206a8774 __CFRunLoopDoSources0 + 242\r\n15  com.apple.CoreFoundation      \t0x00007fff206a719c __CFRunLoopRun + 893\r\n16  com.apple.CoreFoundation      \t0x00007fff206a675c CFRunLoopRunSpecific + 563\r\n17  com.apple.HIToolbox           \t0x00007fff288c8203 RunCurrentEventLoopInMode + 292\r\n18  com.apple.HIToolbox           \t0x00007fff288c7f65 ReceiveNextEventCommon + 587\r\n19  com.apple.HIToolbox           \t0x00007fff288c7d03 _BlockUntilNextEventMatchingListInModeWithFilter + 70\r\n20  com.apple.AppKit              \t0x00007fff22ea2b32 _DPSNextEvent + 864\r\n21  com.apple.AppKit              \t0x00007fff22ea1305 -[NSApplication(NSEvent) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 1364\r\n22  com.apple.AppKit              \t0x00007fff23179d46 -[NSApplication _doModalLoop:peek:] + 301\r\n23  com.apple.AppKit              \t0x00007fff23178b09 __35-[NSApplication runModalForWindow:]_block_invoke_2 + 64\r\n24  com.apple.AppKit              \t0x00007fff23178ab6 __35-[NSApplication runModalForWindow:]_block_invoke + 70\r\n25  com.apple.AppKit              \t0x00007fff23178310 _NSTryRunModal + 100\r\n26  com.apple.AppKit              \t0x00007fff231781f5 -[NSApplication runModalForWindow:] + 128\r\n27  com.apple.AppKit              \t0x00007fff232f61a1 __19-[NSAlert runModal]_block_invoke_2 + 147\r\n28  com.apple.AppKit              \t0x00007fff232f60fb __19-[NSAlert runModal]_block_invoke + 70\r\n29  com.apple.AppKit              \t0x00007fff23178310 _NSTryRunModal + 100\r\n30  com.apple.AppKit              \t0x00007fff23209761 -[NSAlert runModal] + 121\r\n31  com.apple.AppKit              \t0x00007fff22ea95e0 __55-[NSPersistentUIRestorer promptToIgnorePersistentState]_block_invoke + 918\r\n32  com.apple.AppKit              \t0x00007fff22ea920b -[NSApplication _suppressFinishLaunchingFromEventHandlersWhilePerformingBlock:] + 25\r\n33  com.apple.AppKit              \t0x00007fff22ea91bd -[NSPersistentUIRestorer promptToIgnorePersistentState] + 229\r\n34  com.apple.AppKit              \t0x00007fff22ea8ea1 -[NSApplication _reopenWindowsAsNecessaryIncludingRestorableState:completionHandler:] + 171\r\n35  com.apple.AppKit              \t0x00007fff22ea8ce4 -[NSApplication(NSAppleEventHandling) _handleAEOpenEvent:] + 528\r\n36  com.apple.AppKit              \t0x00007fff22ea8947 -[NSApplication(NSAppleEventHandling) _handleCoreEvent:withReplyEvent:] + 665\r\n37  com.apple.Foundation          \t0x00007fff21405a16 -[NSAppleEventManager dispatchRawAppleEvent:withRawReply:handlerRefCon:] + 308\r\n38  com.apple.Foundation          \t0x00007fff21405886 _NSAppleEventManagerGenericHandler + 80\r\n39  com.apple.AE                  \t0x00007fff2646e7d3 0x7fff26462000 + 51155\r\n40  com.apple.AE                  \t0x00007fff2646deee 0x7fff26462000 + 48878\r\n41  com.apple.AE                  \t0x00007fff26466bf3 aeProcessAppleEvent + 448\r\n42  com.apple.HIToolbox           \t0x00007fff288da022 AEProcessAppleEvent + 54\r\n43  com.apple.AppKit              \t0x00007fff22ea2fd0 _DPSNextEvent + 2046\r\n44  com.apple.AppKit              \t0x00007fff22ea1305 -[NSApplication(NSEvent) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 1364\r\n45  com.apple.AppKit              \t0x00007fff22e93679 -[NSApplication run] + 586\r\n46  com.daudau.tinker2            \t0x000000010d3896ae tao::platform_impl::platform::event_loop::EventLoop$LT$T$GT$::run::hafe4c5569474c956 + 718\r\n47  com.daudau.tinker2            \t0x000000010d36a173 tao::event_loop::EventLoop$LT$T$GT$::run::h1eb876e8ee5c3c25 + 83\r\n48  com.daudau.tinker2            \t0x000000010d375050 _$LT$tauri_runtime_wry..Wry$u20$as$u20$tauri_runtime..Runtime$GT$::run::hef6c014c724c7665 + 720\r\n49  com.daudau.tinker2            \t0x000000010d3b1368 tauri::app::Builder$LT$R$GT$::run::h09aa12c5674491b7 + 17816\r\n50  com.daudau.tinker2            \t0x000000010d412872 app::main::hfdac62b0adb2bb8b + 3618\r\n51  com.daudau.tinker2            \t0x000000010d3a009a std::sys_common::backtrace::__rust_begin_short_backtrace::h70f0e07807a0540f + 10\r\n52  com.daudau.tinker2            \t0x000000010d3dc89c std::rt::lang_start::_$u7b$$u7b$closure$u7d$$u7d$::hcdf6eb4d2405505a + 12\r\n53  com.daudau.tinker2            \t0x000000010d5b3399 std::rt::lang_start_internal::h5f9b030f0a63c040 + 649\r\n54  com.daudau.tinker2            \t0x000000010d412b49 main + 41\r\n55  libdyld.dylib                 \t0x00007fff205caf3d start + 1\r\n\r\nThread 1:\r\n0   libsystem_pthread.dylib       \t0x00007fff205ab484 start_wqthread + 0\r\n\r\nThread 2:\r\n0   libsystem_pthread.dylib       \t0x00007fff205ab484 start_wqthread + 0\r\n\r\nThread 3:\r\n0   libsystem_pthread.dylib       \t0x00007fff205ab484 start_wqthread + 0\r\n\r\nThread 4:\r\n0   libsystem_pthread.dylib       \t0x00007fff205ab484 start_wqthread + 0\r\n```\r\n\r\n\r\n### **Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n### **Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n### **Platform and Versions (required):**\r\n\r\n```\r\nOperating System - Mac OS, version 11.3.1 X64\r\n\r\nNode.js environment\r\n  Node.js - 16.6.2\r\n  @tauri-apps/cli - 1.0.0-beta.10\r\n  @tauri-apps/api - 1.0.0-beta.8\r\n\r\nGlobal packages\r\n  npm - 7.20.3\r\n  yarn - 1.22.10\r\n\r\nRust environment\r\n  rustc - 1.55.0\r\n  cargo - 1.55.0\r\n\r\nApp directory structure\r\n/node_modules\r\n/public\r\n/.github\r\n/src-tauri\r\n/build\r\n/.git\r\n/src\r\n\r\nApp\r\n  tauri.rs - 1.0.0-beta.8\r\n  build-type - bundle\r\n  CSP - default-src blob: data: filesystem: ws: wss: http: https: tauri: 'unsafe-eval' 'unsafe-inline' 'self' img-src: 'self'\r\n  distDir - ../build\r\n  devPath - http://localhost:3000\r\n  framework - React\r\n```\r\n\r\n### **Additional context**\r\nI'm using the `next` branch in the app\r\n","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2622/timeline","performed_via_github_app":null,"state_reason":"completed"}