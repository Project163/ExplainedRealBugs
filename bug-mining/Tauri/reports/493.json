{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/9533","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/9533/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/9533/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/9533/events","html_url":"https://github.com/tauri-apps/tauri/issues/9533","id":2255438115,"node_id":"I_kwDOC7lts86Gb0Ej","number":9533,"title":"[bug] Tauri migrate util fails to install NPM package","user":{"login":"ThallesP","id":76017384,"node_id":"MDQ6VXNlcjc2MDE3Mzg0","avatar_url":"https://avatars.githubusercontent.com/u/76017384?v=4","gravatar_id":"","url":"https://api.github.com/users/ThallesP","html_url":"https://github.com/ThallesP","followers_url":"https://api.github.com/users/ThallesP/followers","following_url":"https://api.github.com/users/ThallesP/following{/other_user}","gists_url":"https://api.github.com/users/ThallesP/gists{/gist_id}","starred_url":"https://api.github.com/users/ThallesP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThallesP/subscriptions","organizations_url":"https://api.github.com/users/ThallesP/orgs","repos_url":"https://api.github.com/users/ThallesP/repos","events_url":"https://api.github.com/users/ThallesP/events{/privacy}","received_events_url":"https://api.github.com/users/ThallesP/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-22T02:14:27Z","updated_at":"2024-04-22T13:28:20Z","closed_at":"2024-04-22T13:28:20Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nWhen trying to run the `pnpm tauri migrate` command I get an error about trying to install NPM package.\r\n\r\n### Reproduction\r\n\r\nJust run the install and migrate command inside the `apps/desktop` folder\r\nhttps://github.com/get-boonda/boonda\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Full `tauri info` output\r\n\r\n```text\r\n❯ npm run tauri info\r\n\r\n> boonda-desktop@0.0.0 tauri\r\n> tauri info\r\n\r\n\r\n[✔] Environment\r\n    - OS: Ubuntu 22.04 X64\r\n    ✔ webkit2gtk-4.0: 2.44.0\r\n    ✔ rsvg2: 2.52.5\r\n    ✔ rustc: 1.76.0 (07dca489a 2024-02-04)\r\n    ✔ cargo: 1.76.0 (c84b36747 2024-01-18)\r\n    ✔ rustup: 1.27.0 (bbb9276d2 2024-03-08)\r\n    ✔ Rust toolchain: stable-x86_64-unknown-linux-gnu (default)\r\n    - node: 20.11.0\r\n    - pnpm: 8.9.0\r\n    - npm: 10.2.4\r\n    - bun: 1.0.31\r\n\r\n[-] Packages\r\n    - tauri [RUST]: 1.6.1\r\n    - tauri-build [RUST]: 1.5.1\r\n    - wry [RUST]: 0.24.7\r\n    - tao [RUST]: 0.16.8\r\n    - @tauri-apps/api [NPM]: 1.5.3\r\n    - @tauri-apps/cli [NPM]: 1.5.11\r\n\r\n[-] App\r\n    - build-type: bundle\r\n    - CSP: unset\r\n    - distDir: ../dist\r\n    - devPath: http://localhost:1420/\r\n    - framework: React\r\n    - bundler: Vite\r\n\r\n(**tauri cli version @tauri-apps/cli 2.0.0-beta.13 fails to provide an output so I reverted it back**)\r\n```\r\n\r\n\r\n### Stack trace\r\n\r\n```text\r\n❯ pnpm tauri migrate --verbose\r\n\r\n> boonda-desktop@0.0.0 tauri /home/thalles/boonda/apps/desktop\r\n> tauri \"migrate\" \"--verbose\"\r\n\r\n    Debug [globset] built glob set; 0 literals, 2 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\n    Debug [globset] built glob set; 1 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\n    Debug [globset] glob converted to regex: Glob { glob: \"**/npm-debug.log*\", re: \"(?-u)^(?:/?|.*/)npm\\\\-debug\\\\.log[^/]*$\", opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('n'), Literal('p'), Literal('m'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }\r\n    Debug [globset] glob converted to regex: Glob { glob: \"**/yarn-debug.log*\", re: \"(?-u)^(?:/?|.*/)yarn\\\\-debug\\\\.log[^/]*$\", opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('y'), Literal('a'), Literal('r'), Literal('n'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }\r\n    Debug [globset] glob converted to regex: Glob { glob: \"**/yarn-error.log*\", re: \"(?-u)^(?:/?|.*/)yarn\\\\-error\\\\.log[^/]*$\", opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('y'), Literal('a'), Literal('r'), Literal('n'), Literal('-'), Literal('e'), Literal('r'), Literal('r'), Literal('o'), Literal('r'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }\r\n    Debug [globset] built glob set; 0 literals, 17 basenames, 1 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 3 regexes\r\n    Debug [ignore::walk] ignoring /home/thalles/boonda/apps/desktop/src-tauri/target: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(\"/home/thalles/boonda/.gitignore\"), original: \"target/\", actual: \"**/target\", is_whitelist: false, is_only_dir: true })))\r\n    Debug [ignore::walk] ignoring /home/thalles/boonda/apps/desktop/node_modules: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(\"/home/thalles/boonda/.gitignore\"), original: \"node_modules\", actual: \"**/node_modules\", is_whitelist: false, is_only_dir: false })))\r\n    Info [tauri_cli::migrate::frontend] Replacing `@tauri-apps/api/webviewWindow` with `@tauri-apps/plugin-webviewWindow` on /home/thalles/boonda/apps/desktop/src/App.tsx\r\n    Info [tauri_cli::helpers::npm] Installing NPM dependency \"@tauri-apps/plugin-webviewWindow\"...\r\n    Error [tauri_cli_node] Error installing new npm packages: Failed to install NPM dependency\r\n ELIFECYCLE  Command failed with exit code 1.\r\n```\r\n\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"amrbashir","id":48618675,"node_id":"MDQ6VXNlcjQ4NjE4Njc1","avatar_url":"https://avatars.githubusercontent.com/u/48618675?v=4","gravatar_id":"","url":"https://api.github.com/users/amrbashir","html_url":"https://github.com/amrbashir","followers_url":"https://api.github.com/users/amrbashir/followers","following_url":"https://api.github.com/users/amrbashir/following{/other_user}","gists_url":"https://api.github.com/users/amrbashir/gists{/gist_id}","starred_url":"https://api.github.com/users/amrbashir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrbashir/subscriptions","organizations_url":"https://api.github.com/users/amrbashir/orgs","repos_url":"https://api.github.com/users/amrbashir/repos","events_url":"https://api.github.com/users/amrbashir/events{/privacy}","received_events_url":"https://api.github.com/users/amrbashir/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/9533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/9533/timeline","performed_via_github_app":null,"state_reason":"completed"}