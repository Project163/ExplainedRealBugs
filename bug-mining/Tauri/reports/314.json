{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6089","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6089/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6089/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6089/events","html_url":"https://github.com/tauri-apps/tauri/issues/6089","id":1537402611,"node_id":"I_kwDOC7lts85boubz","number":6089,"title":"[bug] Setting empty TAURI_KEY_PASSWORD still causes an interactive password prompt on Windows","user":{"login":"kornelski","id":72159,"node_id":"MDQ6VXNlcjcyMTU5","avatar_url":"https://avatars.githubusercontent.com/u/72159?v=4","gravatar_id":"","url":"https://api.github.com/users/kornelski","html_url":"https://github.com/kornelski","followers_url":"https://api.github.com/users/kornelski/followers","following_url":"https://api.github.com/users/kornelski/following{/other_user}","gists_url":"https://api.github.com/users/kornelski/gists{/gist_id}","starred_url":"https://api.github.com/users/kornelski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kornelski/subscriptions","organizations_url":"https://api.github.com/users/kornelski/orgs","repos_url":"https://api.github.com/users/kornelski/repos","events_url":"https://api.github.com/users/kornelski/events{/privacy}","received_events_url":"https://api.github.com/users/kornelski/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":3310697304,"node_id":"MDU6TGFiZWwzMzEwNjk3MzA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/platform:%20Windows","name":"platform: Windows","color":"fef2c0","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-01-18T04:59:30Z","updated_at":"2023-01-19T02:43:40Z","closed_at":"2023-01-19T02:43:40Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nI have a tauri updater key with an empty passphrase. I want to automate builds (and very much not deal with passwords), but it doesn't seem to be possible to disable the password prompt. Specifically, it doesn't seem to be possible to set `TAURI_KEY_PASSWORD` to an empty string.\r\n\r\nI've tried:\r\n\r\n```bash\r\nset TAURI_KEY_PASSWORD=\r\nset TAURI_KEY_PASSWORD=\"\"\r\nset /p TAURI_KEY_PASSWORD < zerobytefile\r\n```\r\n\r\nThese either cause the prompt to still appear or result in an invalid password to be set (like literal two quote characters).\r\n\r\n----\r\n\r\nThe password prompt is disastrous for my setup, because I'm using SSH to build the tauri app on a remote Windows 10 machine. I can't press Enter there. The ssh connection hangs forever if there is a password prompt, even if I make SSH close stdin:\r\n\r\n```bash\r\nssh </dev/null pc 'cd theappdir & set TAURI_PRIVATE_KEY=tauri-update.key & set /p TAURI_KEY_PASSWORD= < zerobytefile & del /q /s target\\release\\bundle\\msi\\*.* & cargo tauri build' \r\n```\r\n\r\nIt doesn't seem to be possible to fill it in the prompt remotely from a script. I've also tried `printf \"\\r\\n\" | ssh …`. It's probably an incompatibility with ssh. I'm using Microsoft's SSH server that ships with Windows 10, and I'm shocked that it works at all with the archaic `cmd.exe`. \r\n\r\n----\r\n\r\n\r\n\r\n### Reproduction\r\n\r\n```\r\nset TAURI_KEY_PASSWORD=\r\nset TAURI_PRIVATE_KEY=tauri-update.key\r\ncargo tauri build\r\n```\r\n\r\n### Expected behavior\r\n\r\nIt would be useful if `cargo tauri build` could support `TAURI_KEY_PASSWORD` set to an empty string, or try an empty passphrase before prompting, or skip the password prompt entirely when invoked via SSH if possible.\r\n\r\n\r\n### Platform and versions\r\n\r\nEnvironment\r\n  › OS: Windows 10.0.19044 X64\r\n  › Webview2: 109.0.1518.52\r\n  › MSVC:\r\n      - Visual Studio Community 2019\r\n  › Node.js: Not installed!\r\n  › npm: Not installed!\r\n  › pnpm: Not installed!\r\n  › yarn: Not installed!\r\n  › rustup: 1.25.1\r\n  › rustc: 1.66.1\r\n  › cargo: 1.66.1\r\n  › Rust toolchain: stable-x86_64-pc-windows-msvc\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: html\r\n  › devPath: html\r\n\r\n### Stack trace\r\n\r\n_No response_\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/6089/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/6089/timeline","performed_via_github_app":null,"state_reason":"completed"}