{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2901","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2901/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2901/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2901/events","html_url":"https://github.com/tauri-apps/tauri/issues/2901","id":1055087045,"node_id":"I_kwDOC7lts84-41nF","number":2901,"title":"can't listen to tauri events in rust","user":{"login":"FabianLars","id":30730186,"node_id":"MDQ6VXNlcjMwNzMwMTg2","avatar_url":"https://avatars.githubusercontent.com/u/30730186?v=4","gravatar_id":"","url":"https://api.github.com/users/FabianLars","html_url":"https://github.com/FabianLars","followers_url":"https://api.github.com/users/FabianLars/followers","following_url":"https://api.github.com/users/FabianLars/following{/other_user}","gists_url":"https://api.github.com/users/FabianLars/gists{/gist_id}","starred_url":"https://api.github.com/users/FabianLars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabianLars/subscriptions","organizations_url":"https://api.github.com/users/FabianLars/orgs","repos_url":"https://api.github.com/users/FabianLars/repos","events_url":"https://api.github.com/users/FabianLars/events{/privacy}","received_events_url":"https://api.github.com/users/FabianLars/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-11-16T16:35:32Z","updated_at":"2021-11-16T19:41:46Z","closed_at":"2021-11-16T19:41:46Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### **Describe the bug**\r\nlistening to tauri events (https://github.com/tauri-apps/tauri/blob/next/tooling/api/src/event.ts#L26) is not possible in rust via the `.listen`/`.listen_global` methods.\r\nimo this is fine for window events as i feel like `.on_window_event` should be preferred here anyway, but unfortunately this makes the file drop and updater events completely inaccessible in rust.\r\n\r\nTried to look into it myself, but was to impatient to find the issue lol (aka didn't find it at first glance).\r\n**Also i'm not sure if it's actually desirable to reintroduce this way to listen to tauri events** (as we have `.on_(window|menu)_event` hooks now).\r\n\r\n### **To Reproduce**\r\nAdd the following to the App Builder and drop files into the window.\r\n```rs\r\n.on_page_load(|window, _| {\r\n    window.listen(\"tauri://file-drop\", |event| {\r\n        dbg!(event);\r\n    });\r\n})\r\n```\r\n\r\n### **Platform and Versions (required):**\r\nsame behavior on current release and next branch.\r\n\r\nOperating System - Windows, version 10.0.19043 X64\r\nWebview2 - 95.0.1020.53\r\n\r\nNode.js environment\r\n  Node.js - 16.13.0\r\n  @tauri-apps/cli - 1.0.0-beta.10\r\n  @tauri-apps/api - 1.0.0-beta.8\r\n\r\nGlobal packages\r\n  npm - 8.0.0\r\n  yarn - 1.22.15\r\n\r\nRust environment\r\n  rustc - 1.56.1\r\n  cargo - 1.56.0","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/2901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/2901/timeline","performed_via_github_app":null,"state_reason":"completed"}