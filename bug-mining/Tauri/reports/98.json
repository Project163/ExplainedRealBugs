{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3505","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3505/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3505/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3505/events","html_url":"https://github.com/tauri-apps/tauri/issues/3505","id":1143376499,"node_id":"I_kwDOC7lts85EJopz","number":3505,"title":"[bug] Command::output() never executes/completes in async commands","user":{"login":"FabianLars","id":30730186,"node_id":"MDQ6VXNlcjMwNzMwMTg2","avatar_url":"https://avatars.githubusercontent.com/u/30730186?v=4","gravatar_id":"","url":"https://api.github.com/users/FabianLars","html_url":"https://github.com/FabianLars","followers_url":"https://api.github.com/users/FabianLars/followers","following_url":"https://api.github.com/users/FabianLars/following{/other_user}","gists_url":"https://api.github.com/users/FabianLars/gists{/gist_id}","starred_url":"https://api.github.com/users/FabianLars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabianLars/subscriptions","organizations_url":"https://api.github.com/users/FabianLars/orgs","repos_url":"https://api.github.com/users/FabianLars/repos","events_url":"https://api.github.com/users/FabianLars/events{/privacy}","received_events_url":"https://api.github.com/users/FabianLars/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-02-18T16:39:25Z","updated_at":"2022-02-24T13:06:51Z","closed_at":"2022-02-24T13:06:51Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nIf you try to execute a sidecar or Commands in general in an async command it never drives to completion (or probably doesn't even start in the first place).\r\n\r\nI tested this only on windows, but according to discord it's a problem on linux or macOS too (can't remember which one they had)\n\n### Reproduction\n\nCreate a simple async command (I'm using windows for this example):\r\n```rs\r\n#[tauri::command]\r\nasync fn list_dir() {\r\n    let c = Command::new(\"powershell.exe\").args([\"ls\"]);\r\n    dbg!(c.output().unwrap());\r\n}\r\n```\r\n\r\nIt works if you remove the async keyword. Same if you use (the underlying) `std::process::Command::output()`.\r\n`Command::spawn()` works fine fwiw.\n\n### Expected behavior\n\n_No response_\n\n### Platform and versions\n\n```shell\nOperating System - Windows, version 10.0.19044 X64\r\nWebview2 - 98.0.1108.55\r\nVisual Studio Build Tools:\r\n   - Visual Studio Build Tools 2022\r\n\r\nNode.js environment\r\n  Node.js - 16.14.0\r\n  @tauri-apps/cli - 1.0.0-rc.5\r\n  @tauri-apps/api - 1.0.0-rc.1\r\n\r\nGlobal packages\r\n  npm - 8.3.1\r\n  pnpm - 6.31.0\r\n  yarn - Not installed\r\n\r\nRust environment\r\n  rustup - 1.24.3\r\n  rustc - 1.58.1\r\n  cargo - 1.58.0\r\n  toolchain - stable-x86_64-pc-windows-msvc \r\n\r\nApp directory structure\r\n/dist\r\n/node_modules\r\n/src\r\n/src-tauri\r\n\r\nApp\r\n  tauri - 1.0.0-rc.3 (no lockfile)\r\n  tauri-build - no manifest (no lockfile)\r\n  tao - no manifest (no lockfile)\r\n  wry - no manifest (no lockfile)\r\n  build-type - bundle\r\n  CSP - default-src 'self'\r\n  distDir - ../dist\r\n  devPath - http://localhost:3000/\r\n  framework - React\n```\n\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/3505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/3505/timeline","performed_via_github_app":null,"state_reason":"completed"}