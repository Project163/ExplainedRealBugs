{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4106","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4106/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4106/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4106/events","html_url":"https://github.com/tauri-apps/tauri/issues/4106","id":1233120972,"node_id":"I_kwDOC7lts85Jf-7M","number":4106,"title":"[bug] `tauri info` does not correctly identify @tauri-apps/api version","user":{"login":"damien","id":12211,"node_id":"MDQ6VXNlcjEyMjEx","avatar_url":"https://avatars.githubusercontent.com/u/12211?v=4","gravatar_id":"","url":"https://api.github.com/users/damien","html_url":"https://github.com/damien","followers_url":"https://api.github.com/users/damien/followers","following_url":"https://api.github.com/users/damien/following{/other_user}","gists_url":"https://api.github.com/users/damien/gists{/gist_id}","starred_url":"https://api.github.com/users/damien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damien/subscriptions","organizations_url":"https://api.github.com/users/damien/orgs","repos_url":"https://api.github.com/users/damien/repos","events_url":"https://api.github.com/users/damien/events{/privacy}","received_events_url":"https://api.github.com/users/damien/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-05-11T19:59:59Z","updated_at":"2022-05-23T12:37:34Z","closed_at":"2022-05-23T12:37:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nWhen using Yarn Berry (3.2, PnP mode), the Tauri CLI does not correctly identify the installed version of `@tauri-apps/api`.\n\n### Reproduction\n\n1. `yarn init -2`\r\n2. `yarn add -D @tauri-apps/cli`\r\n3. `yarn add @tauri-apps/api`\r\n4. `yarn install`\r\n5. `yarn tauri info`\n\n### Expected behavior\n\n`yarn tauri info` currently returns `@tauri-apps/api [NPM]: Not installed!` when listing packages.\r\n\r\n`yarn tauri info` should return the correct version of the installed package (e.g. `@tauri-apps/api [NPM]: 1.0.0-rc.5`) when listing packages.\n\n### Platform and versions\n\n```shell\nvscode ➜ /workspaces/manager-desktop (master ✗) $ yarn tauri info\r\n\r\nEnvironment\r\n  › OS: Debian 10 X64\r\n  › Node.js: 16.15.0\r\n  › npm: 8.10.0\r\n  › pnpm: Not installed!\r\n  › yarn: 3.2.0\r\n  › rustup: 1.24.3\r\n  › rustc: 1.60.0\r\n  › cargo: 1.60.0\r\n  › Rust toolchain: 1.60.0-x86_64-unknown-linux-gnu \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.0.0-rc.10\r\n  › @tauri-apps/api [NPM]: Not installed!\r\n  › tauri [RUST]: 1.0.0-rc.9 (no lockfile),\r\n  › tauri-build [RUST]: no manifest (no lockfile),\r\n  › tao [RUST]: no manifest (no lockfile),\r\n  › wry [RUST]: no manifest (no lockfile),\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: ../src-ts\r\n  › devPath: localhost:9009\r\n\r\nApp directory structure\r\n  ├─ .devcontainer\r\n  ├─ .git\r\n  ├─ .vscode\r\n  ├─ .yarn\r\n  └─ src-tauri\n```\n\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\nLikely not required, but for exact reproduction you can use the following VSCode devcontainer.\r\n\r\nDockerfile\r\n```\r\n# See here for image contents: https://github.com/microsoft/vscode-dev-containers/tree/v0.234.0/containers/rust/.devcontainer/base.Dockerfile\r\n\r\n# [Choice] Debian OS version (use bullseye on local arm64/Apple Silicon): buster, bullseye\r\nARG VARIANT=\"buster\"\r\nFROM mcr.microsoft.com/vscode/devcontainers/rust:0-${VARIANT}\r\n\r\n# Tauri system dependencies\r\n# See: https://tauri.studio/v1/guides/getting-started/setup/linux\r\nARG TAURI_SYSTEM_DEPENDENCIES=\"libwebkit2gtk-4.0-dev build-essential curl wget libssl-dev libgtk-3-dev libappindicator3-dev librsvg2-dev\"\r\n\r\n# [Optional] Uncomment this section to install additional packages.\r\nRUN apt-get update && export DEBIAN_FRONTEND=noninteractive \\\r\n    && apt-get -y install --no-install-recommends $TAURI_SYSTEM_DEPENDENCIES\r\n```\r\n\r\ndevcontainer.json\r\n```\r\n// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:\r\n// https://github.com/microsoft/vscode-dev-containers/tree/v0.234.0/containers/rust\r\n{\r\n\t\"name\": \"Rust\",\r\n\t\"build\": {\r\n\t\t\"dockerfile\": \"Dockerfile\",\r\n\t\t\"args\": {\r\n\t\t\t// Use the VARIANT arg to pick a Debian OS version: buster, bullseye\r\n\t\t\t// Use bullseye when on local on arm64/Apple Silicon.\r\n\t\t\t\"VARIANT\": \"buster\"\r\n\t\t}\r\n\t},\r\n\t\"runArgs\": [\r\n\t\t\"--cap-add=SYS_PTRACE\",\r\n\t\t\"--security-opt\",\r\n\t\t\"seccomp=unconfined\"\r\n\t],\r\n\r\n\t// Set *default* container specific settings.json values on container create.\r\n\t\"settings\": {\r\n\t\t\"lldb.executable\": \"/usr/bin/lldb\",\r\n\t\t// VS Code don't watch files under ./target\r\n\t\t\"files.watcherExclude\": {\r\n\t\t\t\"**/target/**\": true\r\n\t\t},\r\n\t\t\"rust-analyzer.checkOnSave.command\": \"clippy\"\r\n\t},\r\n\r\n\t// Add the IDs of extensions you want installed when the container is created.\r\n\t\"extensions\": [\r\n\t\t\"vadimcn.vscode-lldb\",\r\n\t\t\"mutantdino.resourcemonitor\",\r\n\t\t\"matklad.rust-analyzer\",\r\n\t\t\"tamasfe.even-better-toml\",\r\n\t\t\"serayuzgur.crates\"\r\n\t],\r\n\r\n\t// Use 'forwardPorts' to make a list of ports inside the container available locally.\r\n\t// \"forwardPorts\": [],\r\n\r\n\t// Use 'postCreateCommand' to run commands after the container is created.\r\n\t// \"postCreateCommand\": \"rustc --version\",\r\n\r\n\t// Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.\r\n\t\"remoteUser\": \"vscode\",\r\n\t\"features\": {\r\n\t\t\"node\": \"lts\"\r\n\t}\r\n}\r\n```","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4106/timeline","performed_via_github_app":null,"state_reason":"completed"}