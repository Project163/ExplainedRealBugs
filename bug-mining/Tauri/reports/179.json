{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4132","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4132/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4132/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4132/events","html_url":"https://github.com/tauri-apps/tauri/issues/4132","id":1236295565,"node_id":"I_kwDOC7lts85JsF-N","number":4132,"title":"[bug] `asset` protocol will replace `asset://` too many times","user":{"login":"reivilibre","id":38398653,"node_id":"MDQ6VXNlcjM4Mzk4NjUz","avatar_url":"https://avatars.githubusercontent.com/u/38398653?v=4","gravatar_id":"","url":"https://api.github.com/users/reivilibre","html_url":"https://github.com/reivilibre","followers_url":"https://api.github.com/users/reivilibre/followers","following_url":"https://api.github.com/users/reivilibre/following{/other_user}","gists_url":"https://api.github.com/users/reivilibre/gists{/gist_id}","starred_url":"https://api.github.com/users/reivilibre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reivilibre/subscriptions","organizations_url":"https://api.github.com/users/reivilibre/orgs","repos_url":"https://api.github.com/users/reivilibre/repos","events_url":"https://api.github.com/users/reivilibre/events{/privacy}","received_events_url":"https://api.github.com/users/reivilibre/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":1449401613,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjEz","url":"https://api.github.com/repos/tauri-apps/tauri/labels/good%20first%20issue","name":"good first issue","color":"ffb156","default":true,"description":"Good for newcomers"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-05-15T13:55:38Z","updated_at":"2022-05-23T12:37:52Z","closed_at":"2022-05-23T12:37:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nI noticed that this code:\r\nhttps://github.com/tauri-apps/tauri/blob/3e702cf8b15762cdca43c8d7ff6f6e8ee9670244/core/tauri/src/manager.rs#L520-L523=\r\n\r\n(EDIT: Don't know why it's not showing embedded code for that URL, nevertheless here it is:)#\r\n```rust\r\n        #[cfg(target_os = \"windows\")]\r\n        let path = filtered_path.replace(\"asset://localhost/\", \"\");\r\n        #[cfg(not(target_os = \"windows\"))]\r\n        let path = filtered_path.replace(\"asset://\", \"\");\r\n```\r\n\r\nwill consume extra occurrences of `asset://` in the URL. (See https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=52f3c5bdb3655430b0493537fe762ec4)\r\n\r\n```rust\r\nuse url::Url;\r\n\r\nfn main() {\r\n    let parsed_path = Url::parse(\"asset://blahblah/asset://123\").unwrap();\r\n    println!(\"{:?}\", &parsed_path[..].replace(\"asset://\", \"\"));\r\n}\r\n```\r\n\r\nI don't think this is major but it may be worth being a little bit more paranoid in case this could interact badly with some application code and lead to an exploit.\r\n\r\nSorry if this issue is invalid because it's somehow being escaped by this point, but I thought it would be better safe than sorry.\r\n\r\n### Reproduction\r\n\r\n_No response_\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Platform and versions\r\n\r\n```shell\r\nThis is based on an examination of the source code only.\r\n```\r\n\r\n\r\n### Stack trace\r\n\r\n_No response_\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/4132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/4132/timeline","performed_via_github_app":null,"state_reason":"completed"}