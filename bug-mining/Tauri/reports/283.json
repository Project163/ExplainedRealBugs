{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/5482","repository_url":"https://api.github.com/repos/tauri-apps/tauri","labels_url":"https://api.github.com/repos/tauri-apps/tauri/issues/5482/labels{/name}","comments_url":"https://api.github.com/repos/tauri-apps/tauri/issues/5482/comments","events_url":"https://api.github.com/repos/tauri-apps/tauri/issues/5482/events","html_url":"https://github.com/tauri-apps/tauri/issues/5482","id":1423061393,"node_id":"I_kwDOC7lts85U0jGR","number":5482,"title":"[bug] Event payload sent between frontends does not get parsed into an object","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1449401604,"node_id":"MDU6TGFiZWwxNDQ5NDAxNjA0","url":"https://api.github.com/repos/tauri-apps/tauri/labels/type:%20bug","name":"type: bug","color":"B60205","default":false,"description":""},{"id":4288483270,"node_id":"LA_kwDOC7lts87_nQ_G","url":"https://api.github.com/repos/tauri-apps/tauri/labels/status:%20needs%20triage","name":"status: needs triage","color":"059372","default":false,"description":"This issue needs to triage, applied to new issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-10-25T20:46:03Z","updated_at":"2022-10-27T22:01:40Z","closed_at":"2022-10-27T22:01:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nI have two Tauri windows communicating with each other via events on the frontend. I would like to send an object from one window to another. From my understanding, the serialized JSON should be parsed automatically on the receiving end, but instead I'm getting the string representation. This does not seem to be intended behavior.\r\n\r\nPossibly related: https://github.com/tauri-apps/tauri/issues/2929\n\n### Reproduction\n\nIn the main window:\r\n```ts\r\ntype Message = { message: string };\r\n\r\nconst secondWindow = new WebviewWindow(\"secondWindow\", { /* ... */ });\r\n\r\nsecondWindow.listen<Message>(\"message-sent\", (e) => console.log(e.payload.message)); // ERROR: `e.payload` is a string\r\n```\r\n\r\nIn the secondary window:\r\n```ts\r\nconst mainWindow = WebviewWindow.getByLabel(\"main\");\r\n\r\nmainWindow?.emit(\"message-sent\", { message: \"Hello from other window!\" });\r\n```\r\n\n\n### Expected behavior\n\n`e.payload` should be an object instead of a string.\n\n### Platform and versions\n\n```\r\nEnvironment\r\n  › OS: Windows 10.0.22621 X64\r\n  › Webview2: 106.0.1370.52\r\n  › MSVC: \r\n      - Visual Studio Build Tools 2022\r\n  › Node.js: 16.17.1\r\n  › npm: 8.15.0\r\n  › pnpm: Not installed!\r\n  › yarn: Not installed!\r\n  › rustup: 1.25.1\r\n  › rustc: 1.64.0\r\n  › cargo: 1.64.0\r\n  › Rust toolchain: stable-x86_64-pc-windows-msvc \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.1.1\r\n  › @tauri-apps/api [NPM]: 1.1.0\r\n  › tauri [RUST]: 1.1.1,\r\n  › tauri-build [RUST]: 1.1.1,\r\n  › tao [RUST]: 0.14.0,\r\n  › wry [RUST]: 0.21.1,\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: unset\r\n  › distDir: ../build\r\n  › devPath: http://localhost:5173/\r\n  › framework: Svelte\r\n\r\nApp directory structure\r\n  ├─ .git\r\n  ├─ .svelte-kit\r\n  ├─ build\r\n  ├─ node_modules\r\n  ├─ src\r\n  ├─ src-tauri\r\n  └─ static\r\n```\n\n### Stack trace\n\n_No response_\n\n### Additional context\n\n_No response_","closed_by":{"login":"lucasfernog","id":20051258,"node_id":"MDQ6VXNlcjIwMDUxMjU4","avatar_url":"https://avatars.githubusercontent.com/u/20051258?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasfernog","html_url":"https://github.com/lucasfernog","followers_url":"https://api.github.com/users/lucasfernog/followers","following_url":"https://api.github.com/users/lucasfernog/following{/other_user}","gists_url":"https://api.github.com/users/lucasfernog/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasfernog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasfernog/subscriptions","organizations_url":"https://api.github.com/users/lucasfernog/orgs","repos_url":"https://api.github.com/users/lucasfernog/repos","events_url":"https://api.github.com/users/lucasfernog/events{/privacy}","received_events_url":"https://api.github.com/users/lucasfernog/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/tauri-apps/tauri/issues/5482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tauri-apps/tauri/issues/5482/timeline","performed_via_github_app":null,"state_reason":"completed"}