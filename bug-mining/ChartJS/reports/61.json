{"url":"https://api.github.com/repos/chartjs/Chart.js/issues/10915","repository_url":"https://api.github.com/repos/chartjs/Chart.js","labels_url":"https://api.github.com/repos/chartjs/Chart.js/issues/10915/labels{/name}","comments_url":"https://api.github.com/repos/chartjs/Chart.js/issues/10915/comments","events_url":"https://api.github.com/repos/chartjs/Chart.js/issues/10915/events","html_url":"https://github.com/chartjs/Chart.js/issues/10915","id":1463675016,"node_id":"I_kwDOAIbxo85XPeiI","number":10915,"title":"Cannot find module '@kurkle/color' or its corresponding type declarations.","user":{"login":"stockiNail","id":11741250,"node_id":"MDQ6VXNlcjExNzQxMjUw","avatar_url":"https://avatars.githubusercontent.com/u/11741250?v=4","gravatar_id":"","url":"https://api.github.com/users/stockiNail","html_url":"https://github.com/stockiNail","followers_url":"https://api.github.com/users/stockiNail/followers","following_url":"https://api.github.com/users/stockiNail/following{/other_user}","gists_url":"https://api.github.com/users/stockiNail/gists{/gist_id}","starred_url":"https://api.github.com/users/stockiNail/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stockiNail/subscriptions","organizations_url":"https://api.github.com/users/stockiNail/orgs","repos_url":"https://api.github.com/users/stockiNail/repos","events_url":"https://api.github.com/users/stockiNail/events{/privacy}","received_events_url":"https://api.github.com/users/stockiNail/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":32309884,"node_id":"MDU6TGFiZWwzMjMwOTg4NA==","url":"https://api.github.com/repos/chartjs/Chart.js/labels/type:%20bug","name":"type: bug","color":"dd3300","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2022-11-24T17:59:29Z","updated_at":"2023-09-08T14:54:10Z","closed_at":"2022-11-30T14:31:45Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Expected behavior\n\nI'm supporting to apply CHART.JS 4 compatibility to [treemap](https://github.com/kurkle/chartjs-chart-treemap/pull/165) controller.\r\n\r\nI'm expecting that the import of chart.js/helpers is working properly when I'm testing the TS types of the controller.\r\n\n\n### Current behavior\n\nThe test of TS types of the controller failed with the following error:\r\n\r\n```\r\nnpm run test-types\r\n\r\n> chartjs-chart-treemap@2.1.3 test-types\r\n> tsc -p types/tests/\r\n\r\nnode_modules/chart.js/dist/helpers.d.ts:1:23 - error TS2307: Cannot find module '@kurkle/color' or its corresponding type declarations.\r\n\r\n1 import { Color } from '@kurkle/color';\r\n                        ~~~~~~~~~~~~~~~\r\n\r\n\r\nFound 1 error in node_modules/chart.js/dist/helpers.d.ts:1\r\n```\r\n\r\nThe [test code](https://github.com/kurkle/chartjs-chart-treemap/blob/main/types/tests/options.ts):\r\n\r\n```ts\r\nimport '../index.esm';\r\nimport { Chart } from 'chart.js';\r\nimport { color as colorLib } from 'chart.js/helpers';\r\n\r\nfunction colorFromValue(value: number, border?: boolean) {\r\n  let alpha = (1 + Math.log(value)) / 5;\r\n  const color = 'purple';\r\n  if (border) {\r\n    alpha += 0.01;\r\n  }\r\n  return colorLib(color)\r\n    .alpha(alpha)\r\n    .rgbString();\r\n}\r\n.... // not all\r\n```\r\n\r\n\r\nIt seems we are obliged to add the dependency to kurkle/color,In version 3, the types were providing a \"wrapper\" con Color class and the direct dependency wasn't needed. Now the helpers are forcing to add the dependency.\r\n\r\nAs workaround, (thanks @LeeLenaleee) we added   `\"skipLibCheck\": true,` to tsconfig, but maybe it sounds to me just a workaround.\n\n### Reproducible sample\n\nnpm run test-types (checking out PR https://github.com/kurkle/chartjs-chart-treemap/pull/165)\n\n### Optional extra steps/info to reproduce\n\n_No response_\n\n### Possible solution\n\n_No response_\n\n### Context\n\n_No response_\n\n### chart.js version\n\nv4.0.1\n\n### Browser name and version\n\n_No response_\n\n### Link to your project\n\nhttps://github.com/kurkle/chartjs-chart-treemap","closed_by":{"login":"etimberg","id":6757853,"node_id":"MDQ6VXNlcjY3NTc4NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6757853?v=4","gravatar_id":"","url":"https://api.github.com/users/etimberg","html_url":"https://github.com/etimberg","followers_url":"https://api.github.com/users/etimberg/followers","following_url":"https://api.github.com/users/etimberg/following{/other_user}","gists_url":"https://api.github.com/users/etimberg/gists{/gist_id}","starred_url":"https://api.github.com/users/etimberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/etimberg/subscriptions","organizations_url":"https://api.github.com/users/etimberg/orgs","repos_url":"https://api.github.com/users/etimberg/repos","events_url":"https://api.github.com/users/etimberg/events{/privacy}","received_events_url":"https://api.github.com/users/etimberg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/chartjs/Chart.js/issues/10915/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/chartjs/Chart.js/issues/10915/timeline","performed_via_github_app":null,"state_reason":"completed"}