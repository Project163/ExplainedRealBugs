{"url":"https://api.github.com/repos/chartjs/Chart.js/issues/12032","repository_url":"https://api.github.com/repos/chartjs/Chart.js","labels_url":"https://api.github.com/repos/chartjs/Chart.js/issues/12032/labels{/name}","comments_url":"https://api.github.com/repos/chartjs/Chart.js/issues/12032/comments","events_url":"https://api.github.com/repos/chartjs/Chart.js/issues/12032/events","html_url":"https://github.com/chartjs/Chart.js/issues/12032","id":2848664738,"node_id":"I_kwDOAIbxo86pyyyi","number":12032,"title":"Cannot read properties of undefined (reading 'handleEvent')","user":{"login":"mcrrobinson","id":58814711,"node_id":"MDQ6VXNlcjU4ODE0NzEx","avatar_url":"https://avatars.githubusercontent.com/u/58814711?v=4","gravatar_id":"","url":"https://api.github.com/users/mcrrobinson","html_url":"https://github.com/mcrrobinson","followers_url":"https://api.github.com/users/mcrrobinson/followers","following_url":"https://api.github.com/users/mcrrobinson/following{/other_user}","gists_url":"https://api.github.com/users/mcrrobinson/gists{/gist_id}","starred_url":"https://api.github.com/users/mcrrobinson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcrrobinson/subscriptions","organizations_url":"https://api.github.com/users/mcrrobinson/orgs","repos_url":"https://api.github.com/users/mcrrobinson/repos","events_url":"https://api.github.com/users/mcrrobinson/events{/privacy}","received_events_url":"https://api.github.com/users/mcrrobinson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-02-12T15:52:25Z","updated_at":"2025-07-12T16:29:52Z","closed_at":"2025-07-12T16:29:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"> Closing due to lack of test case \n\n _Originally posted by @etimberg in [#9778](https://github.com/chartjs/Chart.js/issues/9778#issuecomment-968074766)_\n\nI cannot reopen that issue, however I am getting the same when I attempt to do what OP was trying to do. Here is a standalone to reproduce.\n\nClick on one of the bar graphs and you will see the error pop up. Seems to be something to do with the legend. Tried disabling the legend, etc. No change.\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <style>\n      body {\n        text-align: center;\n        font-family: Arial, sans-serif;\n      }\n      canvas {\n        max-width: 600px;\n        margin-top: 20px;\n      }\n      #backButton {\n        margin-top: 10px;\n        padding: 10px 15px;\n        font-size: 16px;\n        border: none;\n        background-color: #007bff;\n        color: white;\n        cursor: pointer;\n        border-radius: 5px;\n      }\n      #backButton:hover {\n        background-color: #0056b3;\n      }\n      #backButton:disabled {\n        background-color: #81beff;\n      }\n    </style>\n  </head>\n  <body>\n    <h2>Expandable Bar Chart</h2>\n    <canvas id=\"expenseChart\"></canvas>\n    <button disabled id=\"backButton\">Back</button>\n\n    <script>\n      const data = {\n        root: {\n          type: 'bar',\n          data: {\n            labels: ['Team 1', 'Team 2', 'Team 3', 'Team 4'],\n            datasets: [\n              {\n                label: 'Total Expenses',\n                backgroundColor: ['red', 'red', 'red', 'red'],\n                data: [4000, 5000, 3000, 6000],\n              },\n            ],\n          },\n        },\n        'Team 1': {\n          type: 'pie',\n          data: {\n            labels: ['Matt', 'Cory', 'Jim'],\n            datasets: [\n              {\n                label: 'Team 1',\n                backgroundColor: ['red', 'red', 'red'],\n                data: [1500, 1300, 1200],\n              },\n            ],\n          },\n        },\n        'Team 2': {\n          type: 'bar',\n          data: {\n            labels: ['Matt', 'Cory', 'Jim'],\n            datasets: [\n              {\n                label: 'Team 2',\n                backgroundColor: ['red', 'red', 'red'],\n                data: [2000, 1800, 1200],\n              },\n            ],\n          },\n        },\n\n        'Team 3': {\n          type: 'bar',\n          data: {\n            labels: ['Matt', 'Cory', 'Jim'],\n            datasets: [\n              {\n                label: 'Team 3',\n                backgroundColor: ['red', 'red', 'red'],\n                borderWidth: 1,\n                data: [1000, 1200, 800],\n              },\n            ],\n          },\n        },\n\n        'Team 4': {\n          type: 'bar',\n          data: {\n            labels: ['Chris', 'Pat', 'Jamie'],\n            datasets: [\n              {\n                label: 'Team 4',\n                backgroundColor: ['red', 'red', 'red'],\n                borderWidth: 1,\n                data: [2500, 2000, 1500],\n              },\n            ],\n          },\n        },\n      };\n\n      let path = ['root'];\n      let ctx = document.getElementById('expenseChart').getContext('2d');\n      let backButton = document.getElementById('backButton');\n\n      let chart = new Chart(ctx, {\n        type: data['root'].type,\n        data: data['root'].data,\n        options: {\n          responsive: true,\n          onClick: onClickFunction,\n          plugins: {\n            legend: { display: true },\n          },\n        },\n      });\n\n      function onClickFunction(event, elements) {\n        if (elements.length > 0) {\n          const index = elements[0].index;\n          const currentKey = path[path.length - 1];\n          const nextKey = data[currentKey].data.labels[index];\n\n          // If there is no more key for the item, no more depth.\n          if (!data.hasOwnProperty(nextKey)) {\n            return;\n          }\n\n          path.push(nextKey);\n          updateChart(nextKey);\n        }\n      }\n\n      function updateChart(key) {\n        // Destroy the existing chart instance\n        if (chart) {\n          chart.destroy();\n        }\n\n        // Create a new chart with the updated type and data\n        chart = new Chart(ctx, {\n          type: data[key].type,\n          data: data[key].data,\n          options: {\n            responsive: true,\n            onClick: onClickFunction,\n            plugins: {\n              legend: { display: true },\n            },\n          },\n        });\n\n        // Enable/Disable back button based on navigation depth\n        backButton.disabled = path.length === 1;\n      }\n\n      function resetChart() {\n        if (path.length > 1) {\n          path.pop();\n          updateChart(path[path.length - 1]);\n        }\n      }\n\n      backButton.addEventListener('click', resetChart);\n    </script>\n  </body>\n</html>\n\n```","closed_by":{"login":"etimberg","id":6757853,"node_id":"MDQ6VXNlcjY3NTc4NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6757853?v=4","gravatar_id":"","url":"https://api.github.com/users/etimberg","html_url":"https://github.com/etimberg","followers_url":"https://api.github.com/users/etimberg/followers","following_url":"https://api.github.com/users/etimberg/following{/other_user}","gists_url":"https://api.github.com/users/etimberg/gists{/gist_id}","starred_url":"https://api.github.com/users/etimberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/etimberg/subscriptions","organizations_url":"https://api.github.com/users/etimberg/orgs","repos_url":"https://api.github.com/users/etimberg/repos","events_url":"https://api.github.com/users/etimberg/events{/privacy}","received_events_url":"https://api.github.com/users/etimberg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/chartjs/Chart.js/issues/12032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/chartjs/Chart.js/issues/12032/timeline","performed_via_github_app":null,"state_reason":"completed"}