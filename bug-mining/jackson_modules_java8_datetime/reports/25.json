{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/286","repository_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/286/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/286/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/286/events","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/286","id":1999486680,"node_id":"I_kwDOBFVThM53Lb7Y","number":286,"title":"Breaking change in `InstantDeserializer API between 2.15 and 2.16","user":{"login":"haraldk","id":110299,"node_id":"MDQ6VXNlcjExMDI5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/110299?v=4","gravatar_id":"","url":"https://api.github.com/users/haraldk","html_url":"https://github.com/haraldk","followers_url":"https://api.github.com/users/haraldk/followers","following_url":"https://api.github.com/users/haraldk/following{/other_user}","gists_url":"https://api.github.com/users/haraldk/gists{/gist_id}","starred_url":"https://api.github.com/users/haraldk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haraldk/subscriptions","organizations_url":"https://api.github.com/users/haraldk/orgs","repos_url":"https://api.github.com/users/haraldk/repos","events_url":"https://api.github.com/users/haraldk/events{/privacy}","received_events_url":"https://api.github.com/users/haraldk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-17T16:22:24Z","updated_at":"2023-11-21T04:35:23Z","closed_at":"2023-11-21T04:35:23Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Version 2.16 seems to have introduced a breaking change in the API for `InstantDeserializer`.\r\n\r\nSince 6 years agoâ€¦. And up until 2.15, the [InstantDeserializer constructor](https://github.com/FasterXML/jackson-modules-java8/blob/cc5b7f030be0b2ff9641b3f79e7be16e5b3078a6/datetime/src/main/java/com/fasterxml/jackson/datatype/jsr310/deser/InstantDeserializer.java#L115C1-L121C42) looked like this:\r\n\r\n```java\r\n    protected InstantDeserializer(Class<T> supportedType,\r\n            DateTimeFormatter formatter,\r\n            Function<TemporalAccessor, T> parsedToValue,\r\n            Function<FromIntegerArguments, T> fromMilliseconds,\r\n            Function<FromDecimalArguments, T> fromNanoseconds,\r\n            BiFunction<T, ZoneId, T> adjust,\r\n            boolean replaceZeroOffsetAsZ)\r\n```\r\n\r\nHowever, since 2.16 and onwards, [it was changed](https://github.com/FasterXML/jackson-modules-java8/blob/badd731b300c42def95fc35bfaa3dc436f8e8796/datetime/src/main/java/com/fasterxml/jackson/datatype/jsr310/deser/InstantDeserializer.java#L156C1-L165C6) to this:\r\n\r\n```java\r\n    protected InstantDeserializer(Class<T> supportedType,\r\n            DateTimeFormatter formatter,\r\n            Function<TemporalAccessor, T> parsedToValue,\r\n            Function<FromIntegerArguments, T> fromMilliseconds,\r\n            Function<FromDecimalArguments, T> fromNanoseconds,\r\n            BiFunction<T, ZoneId, T> adjust,\r\n            boolean replaceZeroOffsetAsZ,\r\n            boolean normalizeZoneId,\r\n            boolean readNumericStringsAsTimestamp\r\n    )\r\n```\r\n\r\nTwo new `boolean` parameters added.\r\n\r\nThis breaks our custom subclass, that no longer finds it `super` constructor. To make things worse for us, the subclass is shared between multiple projects, that use different versions of Jackson, so we can't just upgrade and fix it for the latest version...\r\n\r\nCan we have the old version (with defaults for the missing parameters) back, please. ðŸ˜€ \r\n\r\nIf you like, I can make a PR, I just need to figure out what the defaults should be.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/286/timeline","performed_via_github_app":null,"state_reason":"completed"}