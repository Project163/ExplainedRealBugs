[{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595302391","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/165#issuecomment-595302391","issue_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/165","id":595302391,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTMwMjM5MQ==","user":{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T15:53:51Z","updated_at":"2020-03-05T15:53:51Z","body":"Will take a look, but in the meantime, what release are you seeing this in, and what flags do you have set. (If you have a test case, that would be great.) Taking a quick look, the `DurationSerializer` _should_ be using millis, unless otherwise specified. \r\n\r\nHowever, we happened to just be discussing this the other day and I think the nanos flag `WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS` is (probably incorrectly) defaulting to true:\r\n ```\r\n       if (useTimestamp(provider)) {\r\n            if (useNanoseconds(provider)) {\r\n                generator.writeNumber(DecimalUtils.toBigDecimal(\r\n                        duration.getSeconds(), duration.getNano()\r\n                ));\r\n            } else {\r\n                **generator.writeNumber(duration.toMillis());**\r\n            }\r\n\r\n```\r\nhttps://github.com/FasterXML/jackson-modules-java8/blob/ff084de89a7a1f2a0f857b246ad4eb46cbfc6f60/datetime/src/main/java/com/fasterxml/jackson/datatype/jsr310/ser/DurationSerializer.java#L82","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595302391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595331975","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/165#issuecomment-595331975","issue_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/165","id":595331975,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTMzMTk3NQ==","user":{"login":"jpsyri","id":33380315,"node_id":"MDQ6VXNlcjMzMzgwMzE1","avatar_url":"https://avatars.githubusercontent.com/u/33380315?v=4","gravatar_id":"","url":"https://api.github.com/users/jpsyri","html_url":"https://github.com/jpsyri","followers_url":"https://api.github.com/users/jpsyri/followers","following_url":"https://api.github.com/users/jpsyri/following{/other_user}","gists_url":"https://api.github.com/users/jpsyri/gists{/gist_id}","starred_url":"https://api.github.com/users/jpsyri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpsyri/subscriptions","organizations_url":"https://api.github.com/users/jpsyri/orgs","repos_url":"https://api.github.com/users/jpsyri/repos","events_url":"https://api.github.com/users/jpsyri/events{/privacy}","received_events_url":"https://api.github.com/users/jpsyri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T16:50:50Z","updated_at":"2020-03-05T16:50:50Z","body":"I think we are using 2.10.2 (can't check at the moment). Only feature we have set is the \"write datetimes as timestamps\"- one. I however did run the serialization on debugger while investigating and both if-conditions on that snippet were evaluating to true, but I didn't really think about that further\r\n\r\nI might be able to provide test case tomorrow","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595331975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jpsyri","id":33380315,"node_id":"MDQ6VXNlcjMzMzgwMzE1","avatar_url":"https://avatars.githubusercontent.com/u/33380315?v=4","gravatar_id":"","url":"https://api.github.com/users/jpsyri","html_url":"https://github.com/jpsyri","followers_url":"https://api.github.com/users/jpsyri/followers","following_url":"https://api.github.com/users/jpsyri/following{/other_user}","gists_url":"https://api.github.com/users/jpsyri/gists{/gist_id}","starred_url":"https://api.github.com/users/jpsyri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpsyri/subscriptions","organizations_url":"https://api.github.com/users/jpsyri/orgs","repos_url":"https://api.github.com/users/jpsyri/repos","events_url":"https://api.github.com/users/jpsyri/events{/privacy}","received_events_url":"https://api.github.com/users/jpsyri/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595355779","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/165#issuecomment-595355779","issue_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/165","id":595355779,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTM1NTc3OQ==","user":{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T17:39:19Z","updated_at":"2020-03-05T17:39:19Z","body":"> and both if-conditions on that snippet were evaluating to true,\r\n\r\nWould you please try setting the SerializationFeature `WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS` to false and retry, and see if that resolves the issue? You can see some examples here:\r\n\r\nhttps://github.com/FasterXML/jackson-modules-java8/blob/master/datetime/src/test/java/com/fasterxml/jackson/datatype/jsr310/ser/DurationSerTest.java\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595355779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3102440054,"node_id":"MDEyOkxhYmVsZWRFdmVudDMxMDI0NDAwNTQ=","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events/3102440054","actor":{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-03-05T18:43:08Z","label":{"name":"date-time-config","color":"FFA060"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595696886","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/165#issuecomment-595696886","issue_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/165","id":595696886,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTY5Njg4Ng==","user":{"login":"jpsyri","id":33380315,"node_id":"MDQ6VXNlcjMzMzgwMzE1","avatar_url":"https://avatars.githubusercontent.com/u/33380315?v=4","gravatar_id":"","url":"https://api.github.com/users/jpsyri","html_url":"https://github.com/jpsyri","followers_url":"https://api.github.com/users/jpsyri/followers","following_url":"https://api.github.com/users/jpsyri/following{/other_user}","gists_url":"https://api.github.com/users/jpsyri/gists{/gist_id}","starred_url":"https://api.github.com/users/jpsyri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpsyri/subscriptions","organizations_url":"https://api.github.com/users/jpsyri/orgs","repos_url":"https://api.github.com/users/jpsyri/repos","events_url":"https://api.github.com/users/jpsyri/events{/privacy}","received_events_url":"https://api.github.com/users/jpsyri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-06T10:08:09Z","updated_at":"2020-03-06T10:08:09Z","body":"I created some test cases at https://github.com/jpsyri/jackson-duration-serialization\r\n\r\nDisabling the `WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS` seems to result serialization as whole milliseconds as expected: `Duration` of -1 milliseconds is serialized as \"-1\". That feature enabled (including when state of that feature is not explicitly changed) results \"-1.999000000\"","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments/595696886/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jpsyri","id":33380315,"node_id":"MDQ6VXNlcjMzMzgwMzE1","avatar_url":"https://avatars.githubusercontent.com/u/33380315?v=4","gravatar_id":"","url":"https://api.github.com/users/jpsyri","html_url":"https://github.com/jpsyri","followers_url":"https://api.github.com/users/jpsyri/followers","following_url":"https://api.github.com/users/jpsyri/following{/other_user}","gists_url":"https://api.github.com/users/jpsyri/gists{/gist_id}","starred_url":"https://api.github.com/users/jpsyri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpsyri/subscriptions","organizations_url":"https://api.github.com/users/jpsyri/orgs","repos_url":"https://api.github.com/users/jpsyri/repos","events_url":"https://api.github.com/users/jpsyri/events{/privacy}","received_events_url":"https://api.github.com/users/jpsyri/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-05T18:39:08Z","updated_at":"2020-10-05T18:39:08Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/184","repository_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/184/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/184/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/184/events","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/184","id":710231512,"node_id":"MDU6SXNzdWU3MTAyMzE1MTI=","number":184,"title":"`DurationDeserializer` should use `@JsonFormat.pattern` (and config override) to support configurable `ChronoUnit`","user":{"login":"chisui","id":4526429,"node_id":"MDQ6VXNlcjQ1MjY0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4526429?v=4","gravatar_id":"","url":"https://api.github.com/users/chisui","html_url":"https://github.com/chisui","followers_url":"https://api.github.com/users/chisui/followers","following_url":"https://api.github.com/users/chisui/following{/other_user}","gists_url":"https://api.github.com/users/chisui/gists{/gist_id}","starred_url":"https://api.github.com/users/chisui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chisui/subscriptions","organizations_url":"https://api.github.com/users/chisui/orgs","repos_url":"https://api.github.com/users/chisui/repos","events_url":"https://api.github.com/users/chisui/events{/privacy}","received_events_url":"https://api.github.com/users/chisui/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2386945681,"node_id":"MDU6TGFiZWwyMzg2OTQ1Njgx","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels/json-format","name":"json-format","color":"c99f3c","default":false,"description":"Missing handling of `@JsonFormat` property annotation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/milestones/18","html_url":"https://github.com/FasterXML/jackson-modules-java8/milestone/18","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/milestones/18/labels","id":6014177,"node_id":"MDk6TWlsZXN0b25lNjAxNDE3Nw==","number":18,"title":"2.12.0-rc2","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":4,"state":"open","created_at":"2020-10-21T01:01:04Z","updated_at":"2020-10-29T05:36:54Z","due_on":null,"closed_at":null},"comments":25,"created_at":"2020-09-28T12:42:33Z","updated_at":"2020-10-21T01:01:49Z","closed_at":"2020-10-21T01:01:49Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":72700804,"node_id":"MDEwOlJlcG9zaXRvcnk3MjcwMDgwNA==","name":"jackson-modules-java8","full_name":"FasterXML/jackson-modules-java8","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-modules-java8","description":"Set of support modules for Java 8 datatypes (Optionals, date/time) and features (parameter names)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","forks_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/deployments","created_at":"2016-11-03T02:26:02Z","updated_at":"2025-10-31T00:02:49Z","pushed_at":"2025-10-31T00:02:44Z","git_url":"git://github.com/FasterXML/jackson-modules-java8.git","ssh_url":"git@github.com:FasterXML/jackson-modules-java8.git","clone_url":"https://github.com/FasterXML/jackson-modules-java8.git","svn_url":"https://github.com/FasterXML/jackson-modules-java8","homepage":"","size":2864,"stargazers_count":416,"watchers_count":416,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":124,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":29,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","java-date"],"visibility":"public","forks":124,"open_issues":29,"watchers":416,"default_branch":"2.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"When deserializing `DurationDeserializer` treats all durations of number values as seconds and delegates string values to `Duration.parse`. \r\n\r\n## Versions\r\n\r\n```\r\ncom.fasterxml.jackson.core:jackson-core:jar:2.11.2\r\ncom.fasterxml.jackson.core:jackson-databind:jar:2.11.2\r\ncom.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.11.2\r\ncom.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.11.2\r\ncom.fasterxml.jackson.core:jackson-annotations:jar:2.11.2\r\n```\r\n\r\n## Example\r\n\r\n```java\r\nclass A {\r\n    @JsonFormat(pattern = \"h\")\r\n    Duration dur;\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        JsonMapper m = JsonMapper.builder()\r\n                .addModule(new JavaTimeModule())\r\n                .build();\r\n        A a0 = m.readValue(\"{\\\"dur\\\":2}\".getBytes(), A.class);\r\n        System.out.println(a0.dur.equals(Duration.ofHours(2))); // should print \"true\" but prints \"false\r\n\r\n        A a1 = m.readValue(\"{\\\"dur\\\":\\\"2\\\"}\".getBytes(), A.class);\r\n        System.out.println(a1.dur.equals(Duration.ofHours(2))); // should print \"true\" but throws Exception\r\n    }\r\n}\r\n```\r\n\r\nThe Exception thrown by the second `readValue` call:\r\n\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `java.time.Duration` from String \"2\": Failed to deserialize java.time.Duration: (java.time.format.DateTimeParseException) Text cannot be parsed to a Duration\r\n at [Source: (byte[])\"{\"dur\":\"2\"}\"; line: 1, column: 8] (through reference chain: *****)\r\n\r\n\tat com.fasterxml.jackson.databind.exc.InvalidFormatException.from(InvalidFormatException.java:67)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.weirdStringException(DeserializationContext.java:1702)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleWeirdStringValue(DeserializationContext.java:947)\r\n\tat com.fasterxml.jackson.datatype.jsr310.deser.JSR310DeserializerBase._handleDateTimeException(JSR310DeserializerBase.java:129)\r\n\tat com.fasterxml.jackson.datatype.jsr310.deser.DurationDeserializer.deserialize(DurationDeserializer.java:92)\r\n\tat com.fasterxml.jackson.datatype.jsr310.deser.DurationDeserializer.deserialize(DurationDeserializer.java:43)\r\n\tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:138)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:293)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:156)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4524)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3527)\r\n        ...\r\nCaused by: java.time.format.DateTimeParseException: Text cannot be parsed to a Duration\r\n\tat java.base/java.time.Duration.parse(Duration.java:417)\r\n\tat com.fasterxml.jackson.datatype.jsr310.deser.DurationDeserializer.deserialize(DurationDeserializer.java:90)\r\n\t... 70 more\r\n```\r\n\r\nEven though `JsonFormat` doesn't explicitly mention any `jsr310` classes in its documentation they should still work with it. Especially since `DurationDeserializer` already respects `JsonFormat#lenient`.","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/184/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":3901463341,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MzkwMTQ2MzM0MQ==","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events/3901463341","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-10-21T01:43:10Z","label":{"name":"date-time-config","color":"FFA060"},"performed_via_github_app":null},{"id":3901463344,"node_id":"MDEyOkxhYmVsZWRFdmVudDM5MDE0NjMzNDQ=","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events/3901463344","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-21T01:43:11Z","label":{"name":"2.12","color":"a9f9b8"},"performed_via_github_app":null},{"id":3901463503,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDM5MDE0NjM1MDM=","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events/3901463503","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2020-10-21T01:43:15Z","milestone":{"title":"2.12.0-rc2"},"performed_via_github_app":null},{"id":3901466741,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM5MDE0NjY3NDE=","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events/3901466741","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ce77a34d7d5ad6118c8a1d269f4263978a50c54a","commit_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/commits/ce77a34d7d5ad6118c8a1d269f4263978a50c54a","created_at":"2020-10-21T01:45:01Z","performed_via_github_app":null},{"id":3901470119,"node_id":"MDExOkNsb3NlZEV2ZW50MzkwMTQ3MDExOQ==","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events/3901470119","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ce77a34d7d5ad6118c8a1d269f4263978a50c54a","commit_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/commits/ce77a34d7d5ad6118c8a1d269f4263978a50c54a","created_at":"2020-10-21T01:46:51Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"jmuia","id":3421338,"node_id":"MDQ6VXNlcjM0MjEzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/3421338?v=4","gravatar_id":"","url":"https://api.github.com/users/jmuia","html_url":"https://github.com/jmuia","followers_url":"https://api.github.com/users/jmuia/followers","following_url":"https://api.github.com/users/jmuia/following{/other_user}","gists_url":"https://api.github.com/users/jmuia/gists{/gist_id}","starred_url":"https://api.github.com/users/jmuia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmuia/subscriptions","organizations_url":"https://api.github.com/users/jmuia/orgs","repos_url":"https://api.github.com/users/jmuia/repos","events_url":"https://api.github.com/users/jmuia/events{/privacy}","received_events_url":"https://api.github.com/users/jmuia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-19T20:30:06Z","updated_at":"2024-12-19T20:30:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/337","repository_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/337/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/337/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/337/events","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/337","id":2751359800,"node_id":"I_kwDOBFVThM6j_ms4","number":337,"title":"Negative `Duration` does not round-trip properly with `WRITE_DURATIONS_AS_TIMESTAMPS` enabled","user":{"login":"jmuia","id":3421338,"node_id":"MDQ6VXNlcjM0MjEzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/3421338?v=4","gravatar_id":"","url":"https://api.github.com/users/jmuia","html_url":"https://github.com/jmuia","followers_url":"https://api.github.com/users/jmuia/followers","following_url":"https://api.github.com/users/jmuia/following{/other_user}","gists_url":"https://api.github.com/users/jmuia/gists{/gist_id}","starred_url":"https://api.github.com/users/jmuia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmuia/subscriptions","organizations_url":"https://api.github.com/users/jmuia/orgs","repos_url":"https://api.github.com/users/jmuia/repos","events_url":"https://api.github.com/users/jmuia/events{/privacy}","received_events_url":"https://api.github.com/users/jmuia/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4248904762,"node_id":"LA_kwDOBFVThM79QSQ6","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels/has-failing-test","name":"has-failing-test","color":"4e8a16","default":false,"description":"Indicates that there exists a test case (under `failing/`) to reproduce the issue"},{"id":7716579246,"node_id":"LA_kwDOBFVThM8AAAABy_Gnrg","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels/2.19","name":"2.19","color":"0E8A16","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-12-19T20:30:05Z","updated_at":"2025-01-29T03:58:05Z","closed_at":"2025-01-29T03:58:05Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":72700804,"node_id":"MDEwOlJlcG9zaXRvcnk3MjcwMDgwNA==","name":"jackson-modules-java8","full_name":"FasterXML/jackson-modules-java8","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-modules-java8","description":"Set of support modules for Java 8 datatypes (Optionals, date/time) and features (parameter names)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","forks_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/deployments","created_at":"2016-11-03T02:26:02Z","updated_at":"2025-10-31T00:02:49Z","pushed_at":"2025-10-31T00:02:44Z","git_url":"git://github.com/FasterXML/jackson-modules-java8.git","ssh_url":"git@github.com:FasterXML/jackson-modules-java8.git","clone_url":"https://github.com/FasterXML/jackson-modules-java8.git","svn_url":"https://github.com/FasterXML/jackson-modules-java8","homepage":"","size":2864,"stargazers_count":416,"watchers_count":416,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":124,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":29,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","java-date"],"visibility":"public","forks":124,"open_issues":29,"watchers":416,"default_branch":"2.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I found this similar issue https://github.com/FasterXML/jackson-modules-java8/issues/165 but it seems different, as that user reported a bug on `2.10.2` and refers to a different config option.\r\n\r\n`WRITE_DURATIONS_AS_TIMESTAMPS` defaults to true.\r\n\r\n### Before v2.12.0\r\n`WRITE_DURATIONS_AS_TIMESTAMPS` set to true.\r\n\r\nIt seems that a negative value...\r\n* Serializes incorrectly ❌ \r\n* Deserializes back to the original value ✅ \r\n\r\n### v2.12.0 and later (including 2.18.2)\r\n`WRITE_DURATIONS_AS_TIMESTAMPS` set to true.\r\n\r\nIt seems that a negative value...\r\n* Serializes correctly ✅ \r\n* Deserializes incorrectly ❌ \r\n\r\n\r\nHere is an example repo demonstrating the problem https://github.com/jmuia/jackson-duration-serialization\r\n","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/337/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]