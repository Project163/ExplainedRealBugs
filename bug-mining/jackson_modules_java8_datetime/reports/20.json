{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/224","repository_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/224/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/224/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/224/events","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/224","id":947103361,"node_id":"MDU6SXNzdWU5NDcxMDMzNjE=","number":224,"title":"`DurationSerializer` ignores format pattern if nano-second serialization enabled","user":{"login":"Sam-Kruglov","id":23556336,"node_id":"MDQ6VXNlcjIzNTU2MzM2","avatar_url":"https://avatars.githubusercontent.com/u/23556336?v=4","gravatar_id":"","url":"https://api.github.com/users/Sam-Kruglov","html_url":"https://github.com/Sam-Kruglov","followers_url":"https://api.github.com/users/Sam-Kruglov/followers","following_url":"https://api.github.com/users/Sam-Kruglov/following{/other_user}","gists_url":"https://api.github.com/users/Sam-Kruglov/gists{/gist_id}","starred_url":"https://api.github.com/users/Sam-Kruglov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sam-Kruglov/subscriptions","organizations_url":"https://api.github.com/users/Sam-Kruglov/orgs","repos_url":"https://api.github.com/users/Sam-Kruglov/repos","events_url":"https://api.github.com/users/Sam-Kruglov/events{/privacy}","received_events_url":"https://api.github.com/users/Sam-Kruglov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2386945681,"node_id":"MDU6TGFiZWwyMzg2OTQ1Njgx","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels/json-format","name":"json-format","color":"c99f3c","default":false,"description":"Missing handling of `@JsonFormat` property annotation"}],"state":"closed","locked":false,"assignee":{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"kupci","id":454889,"node_id":"MDQ6VXNlcjQ1NDg4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/454889?v=4","gravatar_id":"","url":"https://api.github.com/users/kupci","html_url":"https://github.com/kupci","followers_url":"https://api.github.com/users/kupci/followers","following_url":"https://api.github.com/users/kupci/following{/other_user}","gists_url":"https://api.github.com/users/kupci/gists{/gist_id}","starred_url":"https://api.github.com/users/kupci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupci/subscriptions","organizations_url":"https://api.github.com/users/kupci/orgs","repos_url":"https://api.github.com/users/kupci/repos","events_url":"https://api.github.com/users/kupci/events{/privacy}","received_events_url":"https://api.github.com/users/kupci/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-07-18T19:33:43Z","updated_at":"2022-08-03T18:43:28Z","closed_at":"2022-08-03T18:34:14Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"https://github.com/FasterXML/jackson-modules-java8/blob/3075bfe40669fd1853407c2f949a63d1f1f1fa8b/datetime/src/main/java/com/fasterxml/jackson/datatype/jsr310/ser/DurationSerializer.java#L84-L88\r\n\r\nIf I do this, I expect an integer number in JSON representing the number minutes:\r\n\r\n```java\r\n@JsonFormat(pattern = \"MINUTES\")\r\n@JsonProperty(\"durationInMins\")\r\nDuration duration;\r\n```\r\n\r\nBut it serializes it as nanoseconds. After some debugging, I decided to add `, shape = NUMBER_INT` in order to force `com.fasterxml.jackson.datatype.jsr310.ser.JSR310FormattedSerializerBase#useNanoseconds` respond `false`, but it has no effect because shape is not used in the factory method I linked above.\r\n\r\nFound a workaround: adding `, without = JsonFormat.Feature.WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS` to `@JsonFormat`. However, it only works if I add it to each property, adding it on class level has no effect.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/224/timeline","performed_via_github_app":null,"state_reason":"completed"}