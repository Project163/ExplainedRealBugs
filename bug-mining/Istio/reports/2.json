{"url":"https://api.github.com/repos/istio/istio/issues/47552","repository_url":"https://api.github.com/repos/istio/istio","labels_url":"https://api.github.com/repos/istio/istio/issues/47552/labels{/name}","comments_url":"https://api.github.com/repos/istio/istio/issues/47552/comments","events_url":"https://api.github.com/repos/istio/istio/issues/47552/events","html_url":"https://github.com/istio/istio/issues/47552","id":1960232227,"node_id":"I_kwDOBGvVPc501sUj","number":47552,"title":"Primary-Remote cluster in multiple network installation not working with revisioned control plane","user":{"login":"xu-jianchu","id":45411683,"node_id":"MDQ6VXNlcjQ1NDExNjgz","avatar_url":"https://avatars.githubusercontent.com/u/45411683?v=4","gravatar_id":"","url":"https://api.github.com/users/xu-jianchu","html_url":"https://github.com/xu-jianchu","followers_url":"https://api.github.com/users/xu-jianchu/followers","following_url":"https://api.github.com/users/xu-jianchu/following{/other_user}","gists_url":"https://api.github.com/users/xu-jianchu/gists{/gist_id}","starred_url":"https://api.github.com/users/xu-jianchu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xu-jianchu/subscriptions","organizations_url":"https://api.github.com/users/xu-jianchu/orgs","repos_url":"https://api.github.com/users/xu-jianchu/repos","events_url":"https://api.github.com/users/xu-jianchu/events{/privacy}","received_events_url":"https://api.github.com/users/xu-jianchu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":572371847,"node_id":"MDU6TGFiZWw1NzIzNzE4NDc=","url":"https://api.github.com/repos/istio/istio/labels/kind/docs","name":"kind/docs","color":"fbca04","default":false,"description":null},{"id":670442116,"node_id":"MDU6TGFiZWw2NzA0NDIxMTY=","url":"https://api.github.com/repos/istio/istio/labels/area/environments","name":"area/environments","color":"0e8a16","default":false,"description":null},{"id":1935158527,"node_id":"MDU6TGFiZWwxOTM1MTU4NTI3","url":"https://api.github.com/repos/istio/istio/labels/feature/Multi-cluster","name":"feature/Multi-cluster","color":"cee248","default":false,"description":"issues related with multi-cluster support"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-10-24T23:08:21Z","updated_at":"2024-01-23T21:46:27Z","closed_at":"2024-01-23T21:46:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Is this the right place to submit this?\n\n- [X] This is not a security vulnerability or a crashing bug\n- [X] This is not a question about how to use Istio\n\n### Bug Description\n\nFollowing https://istio.io/latest/docs/setup/install/multicluster/primary-remote_multi-network/\nIf the control plane is installed with revision, the remote cluster can not properly injected with sidecars. \n\nObservation:\nIf the remote cluster is installed with `--set revision=...`, the `MutatingWebhookConfiguration` would point to a `Service` `istiod-{revision}` but only `Service` created is `istiod`\n\nIf the remote cluster is installed without the revision, the webhook call would fail with the eastwest gateway on the primary cluster report\n```\n0 NR filter_chain_not_found - \"-\" 0 0 0 - \"-\" \"-\" \"-\" \"-\" \"-\" - - {ip} {ip} istiod.istio-system.svc\n```\n\nwhich is not there since revisioned installation would not create `istiod` service but `istiod-{revision}` service.\n\n\n### Version\n\n```Text\nclient version: 1.18.2-asm.4\ncontrol plane version: 1.18.2-asm.4\ndata plane version: 1.18.2-asm.4 (2 proxies)\n\nprimary cluster version:\n\nClient Version: v1.23.5\nServer Version: v1.27.4-gke.1600\n```\n\nRemote cluster version\n```\nClient Version: v1.23.5\nServer Version: v1.27.4-gke.1600\n```\n```\n\n\n### Additional Information\n\n_No response_","closed_by":{"login":"xu-jianchu","id":45411683,"node_id":"MDQ6VXNlcjQ1NDExNjgz","avatar_url":"https://avatars.githubusercontent.com/u/45411683?v=4","gravatar_id":"","url":"https://api.github.com/users/xu-jianchu","html_url":"https://github.com/xu-jianchu","followers_url":"https://api.github.com/users/xu-jianchu/followers","following_url":"https://api.github.com/users/xu-jianchu/following{/other_user}","gists_url":"https://api.github.com/users/xu-jianchu/gists{/gist_id}","starred_url":"https://api.github.com/users/xu-jianchu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xu-jianchu/subscriptions","organizations_url":"https://api.github.com/users/xu-jianchu/orgs","repos_url":"https://api.github.com/users/xu-jianchu/repos","events_url":"https://api.github.com/users/xu-jianchu/events{/privacy}","received_events_url":"https://api.github.com/users/xu-jianchu/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/istio/istio/issues/47552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/istio/istio/issues/47552/timeline","performed_via_github_app":null,"state_reason":"completed"}