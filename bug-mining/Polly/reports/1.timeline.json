[{"url":"https://api.github.com/repos/App-vNext/Polly/issues/comments/18440158","html_url":"https://github.com/App-vNext/Polly/issues/1#issuecomment-18440158","issue_url":"https://api.github.com/repos/App-vNext/Polly/issues/1","id":18440158,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQwMTU4","user":{"login":"michael-wolfenden","id":780521,"node_id":"MDQ6VXNlcjc4MDUyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/780521?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-wolfenden","html_url":"https://github.com/michael-wolfenden","followers_url":"https://api.github.com/users/michael-wolfenden/followers","following_url":"https://api.github.com/users/michael-wolfenden/following{/other_user}","gists_url":"https://api.github.com/users/michael-wolfenden/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-wolfenden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-wolfenden/subscriptions","organizations_url":"https://api.github.com/users/michael-wolfenden/orgs","repos_url":"https://api.github.com/users/michael-wolfenden/repos","events_url":"https://api.github.com/users/michael-wolfenden/events{/privacy}","received_events_url":"https://api.github.com/users/michael-wolfenden/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-05-25T05:40:17Z","updated_at":"2013-05-25T05:40:17Z","body":"I think this is a really good idea and I will look into implementing it.\n\nIn the meantime, you can probably get information about the call that raised the exception from either the exception itself or the call stack. See [How to get the name of the method that caused the exception](http://stackoverflow.com/questions/4598255/how-to-get-the-name-of-the-method-that-caused-the-exception) for more information.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/comments/18440158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"michael-wolfenden","id":780521,"node_id":"MDQ6VXNlcjc4MDUyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/780521?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-wolfenden","html_url":"https://github.com/michael-wolfenden","followers_url":"https://api.github.com/users/michael-wolfenden/followers","following_url":"https://api.github.com/users/michael-wolfenden/following{/other_user}","gists_url":"https://api.github.com/users/michael-wolfenden/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-wolfenden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-wolfenden/subscriptions","organizations_url":"https://api.github.com/users/michael-wolfenden/orgs","repos_url":"https://api.github.com/users/michael-wolfenden/repos","events_url":"https://api.github.com/users/michael-wolfenden/events{/privacy}","received_events_url":"https://api.github.com/users/michael-wolfenden/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/App-vNext/Polly/issues/comments/18521435","html_url":"https://github.com/App-vNext/Polly/issues/1#issuecomment-18521435","issue_url":"https://api.github.com/repos/App-vNext/Polly/issues/1","id":18521435,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTIxNDM1","user":{"login":"waynebrantley","id":157082,"node_id":"MDQ6VXNlcjE1NzA4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/157082?v=4","gravatar_id":"","url":"https://api.github.com/users/waynebrantley","html_url":"https://github.com/waynebrantley","followers_url":"https://api.github.com/users/waynebrantley/followers","following_url":"https://api.github.com/users/waynebrantley/following{/other_user}","gists_url":"https://api.github.com/users/waynebrantley/gists{/gist_id}","starred_url":"https://api.github.com/users/waynebrantley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waynebrantley/subscriptions","organizations_url":"https://api.github.com/users/waynebrantley/orgs","repos_url":"https://api.github.com/users/waynebrantley/repos","events_url":"https://api.github.com/users/waynebrantley/events{/privacy}","received_events_url":"https://api.github.com/users/waynebrantley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-05-28T02:18:50Z","updated_at":"2013-05-28T02:18:50Z","body":"Great, thanks...\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/comments/18521435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"waynebrantley","id":157082,"node_id":"MDQ6VXNlcjE1NzA4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/157082?v=4","gravatar_id":"","url":"https://api.github.com/users/waynebrantley","html_url":"https://github.com/waynebrantley","followers_url":"https://api.github.com/users/waynebrantley/followers","following_url":"https://api.github.com/users/waynebrantley/following{/other_user}","gists_url":"https://api.github.com/users/waynebrantley/gists{/gist_id}","starred_url":"https://api.github.com/users/waynebrantley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waynebrantley/subscriptions","organizations_url":"https://api.github.com/users/waynebrantley/orgs","repos_url":"https://api.github.com/users/waynebrantley/repos","events_url":"https://api.github.com/users/waynebrantley/events{/privacy}","received_events_url":"https://api.github.com/users/waynebrantley/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":52823180,"node_id":"MDExOkNsb3NlZEV2ZW50NTI4MjMxODA=","url":"https://api.github.com/repos/App-vNext/Polly/issues/events/52823180","actor":{"login":"michael-wolfenden","id":780521,"node_id":"MDQ6VXNlcjc4MDUyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/780521?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-wolfenden","html_url":"https://github.com/michael-wolfenden","followers_url":"https://api.github.com/users/michael-wolfenden/followers","following_url":"https://api.github.com/users/michael-wolfenden/following{/other_user}","gists_url":"https://api.github.com/users/michael-wolfenden/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-wolfenden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-wolfenden/subscriptions","organizations_url":"https://api.github.com/users/michael-wolfenden/orgs","repos_url":"https://api.github.com/users/michael-wolfenden/repos","events_url":"https://api.github.com/users/michael-wolfenden/events{/privacy}","received_events_url":"https://api.github.com/users/michael-wolfenden/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"c28ce9634ae93711d35bc90faf3fc7271026229b","commit_url":"https://api.github.com/repos/App-vNext/Polly/commits/c28ce9634ae93711d35bc90faf3fc7271026229b","created_at":"2013-06-16T08:35:30Z","state_reason":null,"performed_via_github_app":null},{"id":295975785,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI5NTk3NTc4NQ==","url":"https://api.github.com/repos/App-vNext/Polly/issues/events/295975785","actor":{"login":"asherw","id":4520413,"node_id":"MDQ6VXNlcjQ1MjA0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/4520413?v=4","gravatar_id":"","url":"https://api.github.com/users/asherw","html_url":"https://github.com/asherw","followers_url":"https://api.github.com/users/asherw/followers","following_url":"https://api.github.com/users/asherw/following{/other_user}","gists_url":"https://api.github.com/users/asherw/gists{/gist_id}","starred_url":"https://api.github.com/users/asherw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asherw/subscriptions","organizations_url":"https://api.github.com/users/asherw/orgs","repos_url":"https://api.github.com/users/asherw/repos","events_url":"https://api.github.com/users/asherw/events{/privacy}","received_events_url":"https://api.github.com/users/asherw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2b5ed2041d0890093d1936a8c20c5d28145283af","commit_url":"https://api.github.com/repos/asherw/Polly/commits/2b5ed2041d0890093d1936a8c20c5d28145283af","created_at":"2015-05-04T06:50:42Z","performed_via_github_app":null},{"actor":{"login":"reisenberger","id":9608723,"node_id":"MDQ6VXNlcjk2MDg3MjM=","avatar_url":"https://avatars.githubusercontent.com/u/9608723?v=4","gravatar_id":"","url":"https://api.github.com/users/reisenberger","html_url":"https://github.com/reisenberger","followers_url":"https://api.github.com/users/reisenberger/followers","following_url":"https://api.github.com/users/reisenberger/following{/other_user}","gists_url":"https://api.github.com/users/reisenberger/gists{/gist_id}","starred_url":"https://api.github.com/users/reisenberger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reisenberger/subscriptions","organizations_url":"https://api.github.com/users/reisenberger/orgs","repos_url":"https://api.github.com/users/reisenberger/repos","events_url":"https://api.github.com/users/reisenberger/events{/privacy}","received_events_url":"https://api.github.com/users/reisenberger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-24T11:09:05Z","updated_at":"2016-01-24T11:09:05Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/38","repository_url":"https://api.github.com/repos/App-vNext/Polly","labels_url":"https://api.github.com/repos/App-vNext/Polly/issues/38/labels{/name}","comments_url":"https://api.github.com/repos/App-vNext/Polly/issues/38/comments","events_url":"https://api.github.com/repos/App-vNext/Polly/issues/38/events","html_url":"https://github.com/App-vNext/Polly/issues/38","id":90408438,"node_id":"MDU6SXNzdWU5MDQwODQzOA==","number":38,"title":"Passing exception and retry count to execution (general: pass mutable data between onRetry and Execute)","user":{"login":"YoniH","id":7694280,"node_id":"MDQ6VXNlcjc2OTQyODA=","avatar_url":"https://avatars.githubusercontent.com/u/7694280?v=4","gravatar_id":"","url":"https://api.github.com/users/YoniH","html_url":"https://github.com/YoniH","followers_url":"https://api.github.com/users/YoniH/followers","following_url":"https://api.github.com/users/YoniH/following{/other_user}","gists_url":"https://api.github.com/users/YoniH/gists{/gist_id}","starred_url":"https://api.github.com/users/YoniH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YoniH/subscriptions","organizations_url":"https://api.github.com/users/YoniH/orgs","repos_url":"https://api.github.com/users/YoniH/repos","events_url":"https://api.github.com/users/YoniH/events{/privacy}","received_events_url":"https://api.github.com/users/YoniH/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":38476907,"node_id":"MDU6TGFiZWwzODQ3NjkwNw==","url":"https://api.github.com/repos/App-vNext/Polly/labels/enhancement","name":"enhancement","color":"c2e0c6","default":true,"description":null},{"id":38476909,"node_id":"MDU6TGFiZWwzODQ3NjkwOQ==","url":"https://api.github.com/repos/App-vNext/Polly/labels/question","name":"question","color":"cc317c","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/App-vNext/Polly/milestones/16","html_url":"https://github.com/App-vNext/Polly/milestone/16","labels_url":"https://api.github.com/repos/App-vNext/Polly/milestones/16/labels","id":2495634,"node_id":"MDk6TWlsZXN0b25lMjQ5NTYzNA==","number":16,"title":"v5.1","description":"Polly v5.1.0: Allow different parts of an execution to exchange state through `Context` flowing with execution","creator":{"login":"reisenberger","id":9608723,"node_id":"MDQ6VXNlcjk2MDg3MjM=","avatar_url":"https://avatars.githubusercontent.com/u/9608723?v=4","gravatar_id":"","url":"https://api.github.com/users/reisenberger","html_url":"https://github.com/reisenberger","followers_url":"https://api.github.com/users/reisenberger/followers","following_url":"https://api.github.com/users/reisenberger/following{/other_user}","gists_url":"https://api.github.com/users/reisenberger/gists{/gist_id}","starred_url":"https://api.github.com/users/reisenberger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reisenberger/subscriptions","organizations_url":"https://api.github.com/users/reisenberger/orgs","repos_url":"https://api.github.com/users/reisenberger/repos","events_url":"https://api.github.com/users/reisenberger/events{/privacy}","received_events_url":"https://api.github.com/users/reisenberger/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":4,"state":"closed","created_at":"2017-05-02T18:03:14Z","updated_at":"2017-05-09T14:07:46Z","due_on":"2017-05-03T07:00:00Z","closed_at":"2017-05-09T14:07:46Z"},"comments":4,"created_at":"2015-06-23T14:43:02Z","updated_at":"2017-05-04T19:17:52Z","closed_at":"2017-05-04T19:17:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":9864166,"node_id":"MDEwOlJlcG9zaXRvcnk5ODY0MTY2","name":"Polly","full_name":"App-vNext/Polly","private":false,"owner":{"login":"App-vNext","id":9165070,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNjUwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/9165070?v=4","gravatar_id":"","url":"https://api.github.com/users/App-vNext","html_url":"https://github.com/App-vNext","followers_url":"https://api.github.com/users/App-vNext/followers","following_url":"https://api.github.com/users/App-vNext/following{/other_user}","gists_url":"https://api.github.com/users/App-vNext/gists{/gist_id}","starred_url":"https://api.github.com/users/App-vNext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/App-vNext/subscriptions","organizations_url":"https://api.github.com/users/App-vNext/orgs","repos_url":"https://api.github.com/users/App-vNext/repos","events_url":"https://api.github.com/users/App-vNext/events{/privacy}","received_events_url":"https://api.github.com/users/App-vNext/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/App-vNext/Polly","description":"Polly is a .NET resilience and transient-fault-handling library that allows developers to express policies such as Retry, Circuit Breaker, Timeout, Bulkhead Isolation, and Fallback in a fluent and thread-safe manner. From version 6.0.1, Polly targets .NET Standard 1.1 and 2.0+.","fork":false,"url":"https://api.github.com/repos/App-vNext/Polly","forks_url":"https://api.github.com/repos/App-vNext/Polly/forks","keys_url":"https://api.github.com/repos/App-vNext/Polly/keys{/key_id}","collaborators_url":"https://api.github.com/repos/App-vNext/Polly/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/App-vNext/Polly/teams","hooks_url":"https://api.github.com/repos/App-vNext/Polly/hooks","issue_events_url":"https://api.github.com/repos/App-vNext/Polly/issues/events{/number}","events_url":"https://api.github.com/repos/App-vNext/Polly/events","assignees_url":"https://api.github.com/repos/App-vNext/Polly/assignees{/user}","branches_url":"https://api.github.com/repos/App-vNext/Polly/branches{/branch}","tags_url":"https://api.github.com/repos/App-vNext/Polly/tags","blobs_url":"https://api.github.com/repos/App-vNext/Polly/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/App-vNext/Polly/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/App-vNext/Polly/git/refs{/sha}","trees_url":"https://api.github.com/repos/App-vNext/Polly/git/trees{/sha}","statuses_url":"https://api.github.com/repos/App-vNext/Polly/statuses/{sha}","languages_url":"https://api.github.com/repos/App-vNext/Polly/languages","stargazers_url":"https://api.github.com/repos/App-vNext/Polly/stargazers","contributors_url":"https://api.github.com/repos/App-vNext/Polly/contributors","subscribers_url":"https://api.github.com/repos/App-vNext/Polly/subscribers","subscription_url":"https://api.github.com/repos/App-vNext/Polly/subscription","commits_url":"https://api.github.com/repos/App-vNext/Polly/commits{/sha}","git_commits_url":"https://api.github.com/repos/App-vNext/Polly/git/commits{/sha}","comments_url":"https://api.github.com/repos/App-vNext/Polly/comments{/number}","issue_comment_url":"https://api.github.com/repos/App-vNext/Polly/issues/comments{/number}","contents_url":"https://api.github.com/repos/App-vNext/Polly/contents/{+path}","compare_url":"https://api.github.com/repos/App-vNext/Polly/compare/{base}...{head}","merges_url":"https://api.github.com/repos/App-vNext/Polly/merges","archive_url":"https://api.github.com/repos/App-vNext/Polly/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/App-vNext/Polly/downloads","issues_url":"https://api.github.com/repos/App-vNext/Polly/issues{/number}","pulls_url":"https://api.github.com/repos/App-vNext/Polly/pulls{/number}","milestones_url":"https://api.github.com/repos/App-vNext/Polly/milestones{/number}","notifications_url":"https://api.github.com/repos/App-vNext/Polly/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/App-vNext/Polly/labels{/name}","releases_url":"https://api.github.com/repos/App-vNext/Polly/releases{/id}","deployments_url":"https://api.github.com/repos/App-vNext/Polly/deployments","created_at":"2013-05-05T04:40:04Z","updated_at":"2025-11-09T07:09:31Z","pushed_at":"2025-11-06T17:28:00Z","git_url":"git://github.com/App-vNext/Polly.git","ssh_url":"git@github.com:App-vNext/Polly.git","clone_url":"https://github.com/App-vNext/Polly.git","svn_url":"https://github.com/App-vNext/Polly","homepage":"https://www.thepollyproject.org","size":52503,"stargazers_count":14028,"watchers_count":14028,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1263,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["circuit-breaker","circuit-breaker-pattern","dotnet","fault-handler","resilience","resiliency-patterns","retry-strategies","transient-fault-handling"],"visibility":"public","forks":1263,"open_issues":7,"watchers":14028,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi,\n\nIn policy execution, I need to access the retry number and the exception that was thrown.\n\nI managed to do this only with class members, as in this console app:\n\n```\nclass Program\n{\n    private static Exception mException;\n    private static int mRetryCount;\n\n    static void Main(string[] args)\n    {\n        var policy = Policy.Handle<DivideByZeroException>().Retry((exception, retryCount, context) =>\n        {\n            mException = exception;\n            mRetryCount = retryCount;\n        });\n\n        policy.Execute(DoSomething);\n    }\n\n    private static void DoSomething()\n    {\n        Console.WriteLine(\"Try number {0}\", mRetryCount);\n        Console.WriteLine(\"Exception was {0}\", mException);\n        Console.WriteLine();\n\n        int x = 0;\n        var y = 2/x;\n    }\n}\n```\n\nHowever, is there a way to do this only with Polly, without class members?\n","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/38/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/App-vNext/Polly/issues/38/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":627940329,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDYyNzk0MDMyOQ==","url":"https://api.github.com/repos/App-vNext/Polly/issues/events/627940329","actor":{"login":"joelhulen","id":5950304,"node_id":"MDQ6VXNlcjU5NTAzMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5950304?v=4","gravatar_id":"","url":"https://api.github.com/users/joelhulen","html_url":"https://github.com/joelhulen","followers_url":"https://api.github.com/users/joelhulen/followers","following_url":"https://api.github.com/users/joelhulen/following{/other_user}","gists_url":"https://api.github.com/users/joelhulen/gists{/gist_id}","starred_url":"https://api.github.com/users/joelhulen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelhulen/subscriptions","organizations_url":"https://api.github.com/users/joelhulen/orgs","repos_url":"https://api.github.com/users/joelhulen/repos","events_url":"https://api.github.com/users/joelhulen/events{/privacy}","received_events_url":"https://api.github.com/users/joelhulen/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"db8adb323fa609fcaeb1fd445508d98cbe9ff8e6","commit_url":"https://api.github.com/repos/App-vNext/Polly/commits/db8adb323fa609fcaeb1fd445508d98cbe9ff8e6","created_at":"2016-04-14T20:15:46Z","performed_via_github_app":null},{"actor":{"login":"jjxtra","id":1271832,"node_id":"MDQ6VXNlcjEyNzE4MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1271832?v=4","gravatar_id":"","url":"https://api.github.com/users/jjxtra","html_url":"https://github.com/jjxtra","followers_url":"https://api.github.com/users/jjxtra/followers","following_url":"https://api.github.com/users/jjxtra/following{/other_user}","gists_url":"https://api.github.com/users/jjxtra/gists{/gist_id}","starred_url":"https://api.github.com/users/jjxtra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjxtra/subscriptions","organizations_url":"https://api.github.com/users/jjxtra/orgs","repos_url":"https://api.github.com/users/jjxtra/repos","events_url":"https://api.github.com/users/jjxtra/events{/privacy}","received_events_url":"https://api.github.com/users/jjxtra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-22T14:55:10Z","updated_at":"2019-12-22T14:55:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/735","repository_url":"https://api.github.com/repos/App-vNext/Polly","labels_url":"https://api.github.com/repos/App-vNext/Polly/issues/735/labels{/name}","comments_url":"https://api.github.com/repos/App-vNext/Polly/issues/735/comments","events_url":"https://api.github.com/repos/App-vNext/Polly/issues/735/events","html_url":"https://github.com/App-vNext/Polly/issues/735","id":541410883,"node_id":"MDU6SXNzdWU1NDE0MTA4ODM=","number":735,"title":"Applying policies by attributes","user":{"login":"jjxtra","id":1271832,"node_id":"MDQ6VXNlcjEyNzE4MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1271832?v=4","gravatar_id":"","url":"https://api.github.com/users/jjxtra","html_url":"https://github.com/jjxtra","followers_url":"https://api.github.com/users/jjxtra/followers","following_url":"https://api.github.com/users/jjxtra/following{/other_user}","gists_url":"https://api.github.com/users/jjxtra/gists{/gist_id}","starred_url":"https://api.github.com/users/jjxtra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjxtra/subscriptions","organizations_url":"https://api.github.com/users/jjxtra/orgs","repos_url":"https://api.github.com/users/jjxtra/repos","events_url":"https://api.github.com/users/jjxtra/events{/privacy}","received_events_url":"https://api.github.com/users/jjxtra/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":641192991,"node_id":"MDU6TGFiZWw2NDExOTI5OTE=","url":"https://api.github.com/repos/App-vNext/Polly/labels/advanced","name":"advanced","color":"5319e7","default":false,"description":null},{"id":1747848886,"node_id":"MDU6TGFiZWwxNzQ3ODQ4ODg2","url":"https://api.github.com/repos/App-vNext/Polly/labels/feature%20suggestion","name":"feature suggestion","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2019-12-22T05:37:37Z","updated_at":"2023-06-26T10:39:50Z","closed_at":"2023-01-24T23:23:15Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":9864166,"node_id":"MDEwOlJlcG9zaXRvcnk5ODY0MTY2","name":"Polly","full_name":"App-vNext/Polly","private":false,"owner":{"login":"App-vNext","id":9165070,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNjUwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/9165070?v=4","gravatar_id":"","url":"https://api.github.com/users/App-vNext","html_url":"https://github.com/App-vNext","followers_url":"https://api.github.com/users/App-vNext/followers","following_url":"https://api.github.com/users/App-vNext/following{/other_user}","gists_url":"https://api.github.com/users/App-vNext/gists{/gist_id}","starred_url":"https://api.github.com/users/App-vNext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/App-vNext/subscriptions","organizations_url":"https://api.github.com/users/App-vNext/orgs","repos_url":"https://api.github.com/users/App-vNext/repos","events_url":"https://api.github.com/users/App-vNext/events{/privacy}","received_events_url":"https://api.github.com/users/App-vNext/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/App-vNext/Polly","description":"Polly is a .NET resilience and transient-fault-handling library that allows developers to express policies such as Retry, Circuit Breaker, Timeout, Bulkhead Isolation, and Fallback in a fluent and thread-safe manner. From version 6.0.1, Polly targets .NET Standard 1.1 and 2.0+.","fork":false,"url":"https://api.github.com/repos/App-vNext/Polly","forks_url":"https://api.github.com/repos/App-vNext/Polly/forks","keys_url":"https://api.github.com/repos/App-vNext/Polly/keys{/key_id}","collaborators_url":"https://api.github.com/repos/App-vNext/Polly/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/App-vNext/Polly/teams","hooks_url":"https://api.github.com/repos/App-vNext/Polly/hooks","issue_events_url":"https://api.github.com/repos/App-vNext/Polly/issues/events{/number}","events_url":"https://api.github.com/repos/App-vNext/Polly/events","assignees_url":"https://api.github.com/repos/App-vNext/Polly/assignees{/user}","branches_url":"https://api.github.com/repos/App-vNext/Polly/branches{/branch}","tags_url":"https://api.github.com/repos/App-vNext/Polly/tags","blobs_url":"https://api.github.com/repos/App-vNext/Polly/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/App-vNext/Polly/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/App-vNext/Polly/git/refs{/sha}","trees_url":"https://api.github.com/repos/App-vNext/Polly/git/trees{/sha}","statuses_url":"https://api.github.com/repos/App-vNext/Polly/statuses/{sha}","languages_url":"https://api.github.com/repos/App-vNext/Polly/languages","stargazers_url":"https://api.github.com/repos/App-vNext/Polly/stargazers","contributors_url":"https://api.github.com/repos/App-vNext/Polly/contributors","subscribers_url":"https://api.github.com/repos/App-vNext/Polly/subscribers","subscription_url":"https://api.github.com/repos/App-vNext/Polly/subscription","commits_url":"https://api.github.com/repos/App-vNext/Polly/commits{/sha}","git_commits_url":"https://api.github.com/repos/App-vNext/Polly/git/commits{/sha}","comments_url":"https://api.github.com/repos/App-vNext/Polly/comments{/number}","issue_comment_url":"https://api.github.com/repos/App-vNext/Polly/issues/comments{/number}","contents_url":"https://api.github.com/repos/App-vNext/Polly/contents/{+path}","compare_url":"https://api.github.com/repos/App-vNext/Polly/compare/{base}...{head}","merges_url":"https://api.github.com/repos/App-vNext/Polly/merges","archive_url":"https://api.github.com/repos/App-vNext/Polly/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/App-vNext/Polly/downloads","issues_url":"https://api.github.com/repos/App-vNext/Polly/issues{/number}","pulls_url":"https://api.github.com/repos/App-vNext/Polly/pulls{/number}","milestones_url":"https://api.github.com/repos/App-vNext/Polly/milestones{/number}","notifications_url":"https://api.github.com/repos/App-vNext/Polly/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/App-vNext/Polly/labels{/name}","releases_url":"https://api.github.com/repos/App-vNext/Polly/releases{/id}","deployments_url":"https://api.github.com/repos/App-vNext/Polly/deployments","created_at":"2013-05-05T04:40:04Z","updated_at":"2025-11-09T07:09:31Z","pushed_at":"2025-11-06T17:28:00Z","git_url":"git://github.com/App-vNext/Polly.git","ssh_url":"git@github.com:App-vNext/Polly.git","clone_url":"https://github.com/App-vNext/Polly.git","svn_url":"https://github.com/App-vNext/Polly","homepage":"https://www.thepollyproject.org","size":52503,"stargazers_count":14028,"watchers_count":14028,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1263,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["circuit-breaker","circuit-breaker-pattern","dotnet","fault-handler","resilience","resiliency-patterns","retry-strategies","transient-fault-handling"],"visibility":"public","forks":1263,"open_issues":7,"watchers":14028,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This feature request is related to policies.\r\n\r\nI would like to be able to annotate my class and interface methods with attributes that represent Polly policies, such as retry, circuit breaker, caching, etc. Something like this:\r\n\r\n```cs\r\n[Cache(...)] // cache ALL the methods of this interface unless overridden\r\n[Retry(...)] // retry ALL the methods on this interface unless overridden\r\npublic interface IWebInterface\r\n{\r\n    [Cache(...)]\r\n    [Retry(...)]\r\n    [CircuitBreaker(...)]\r\n    [Bulkhead(...)]\r\n    Task<string> FetchJson1Async(string param1);\r\n\r\n    [PollyIgnore] // ignore all polly attributes for just this method\r\n    Task<string> FetchJson2Async(string param1);\r\n\r\n    // this method inherits cache and retry from the interface definition\r\n    Task<string> FetchJson3Async(string param1);\r\n}\r\n```\r\n\r\nThese attributes would inherit from a `PollyBaseAttribute` class. This saves having to type the policies everywhere the function is called. You could also provide a \"uber\" attribute that allowed specifying all the policies in a single attribute with named parameters. I could see people making some attribute sub-classes that setup all the policies they care about and then applying those attributes as needed.\r\n\r\nThe attributes would provide all the necessary properties to create a policy automatically. For example, the `Cache` attribute could provider a Key string property. If left null, an automatic key could be created using the full type name plus method name.\r\n\r\nIf a class implements an interface or overrides base class methods with Polly attributes, the class implementation would always get priority for Polly attributes.\r\n\r\nThe attributes would be applied in order. With the attributes, the interface call could work one of two ways:\r\n\r\n1] Have an expression tree based utility method that allows calling the interface method through a Polly helper method, like Policy.Execute already does. The helper method would take care of finding the attributes and applying the appropriate Polly policies. There is still some repetition of code, since a Polly helper method would be needed anywhere you want to call a method with Polly attributes.\r\n\r\nExample:\r\n\r\n```cs\r\nIWebInterface baseInterface = new WebInterface(); // WebInterface class implements IWebInterface\r\nstring result = await Polly.Execute(obj => obj.FetchJson1Async(param1)); // finds Polly attributes and adds appropriate policies to the method call\r\n```\r\n\r\nThe `Polly.Wrap` call would take care of finding the attributes and applying policies. You could cache the type and method name for fast attribute lookup.\r\n\r\n2] Use TypeBuilder and allow generating a Polly wrapper on an interface. For example:\r\n\r\n```cs\r\nIWebInterface baseInterface = new WebInterface(); // WebInterface class implements IWebInterface\r\nIWebInterface wrappedInterface = Polly.Wrap(baseInterface); // MOQ style interface wrapper builder magic\r\nstring result = await wrappedInterface.FetchJson1(\"param1\"); // wrappedInterface provides Polly policies using TypeBuilder magic.\r\n```\r\n\r\nOnce that is done, you could call wrappedInterface and the Polly policies would be called automatically. This requires either building up an interface at runtime that wraps the existing interface, or having some sort of code generator that could generate a C# class that wraps the interface. Frameworks like MOQ do this already. This eliminates all the redundant calls to Polly and helper methods, and would be my ideal solution.\r\n\r\n`TypeBuilder` documentation: https://docs.microsoft.com/en-us/dotnet/api/system.reflection.emit.typebuilder?view=netcore-3.1\r\n\r\nI'd love any thoughts or feedback on this proposal.","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/735/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/App-vNext/Polly/issues/735/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"dgoldm","id":11911957,"node_id":"MDQ6VXNlcjExOTExOTU3","avatar_url":"https://avatars.githubusercontent.com/u/11911957?v=4","gravatar_id":"","url":"https://api.github.com/users/dgoldm","html_url":"https://github.com/dgoldm","followers_url":"https://api.github.com/users/dgoldm/followers","following_url":"https://api.github.com/users/dgoldm/following{/other_user}","gists_url":"https://api.github.com/users/dgoldm/gists{/gist_id}","starred_url":"https://api.github.com/users/dgoldm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgoldm/subscriptions","organizations_url":"https://api.github.com/users/dgoldm/orgs","repos_url":"https://api.github.com/users/dgoldm/repos","events_url":"https://api.github.com/users/dgoldm/events{/privacy}","received_events_url":"https://api.github.com/users/dgoldm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-29T06:32:55Z","updated_at":"2020-06-29T06:32:55Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/782","repository_url":"https://api.github.com/repos/App-vNext/Polly","labels_url":"https://api.github.com/repos/App-vNext/Polly/issues/782/labels{/name}","comments_url":"https://api.github.com/repos/App-vNext/Polly/issues/782/comments","events_url":"https://api.github.com/repos/App-vNext/Polly/issues/782/events","html_url":"https://github.com/App-vNext/Polly/issues/782","id":647154486,"node_id":"MDU6SXNzdWU2NDcxNTQ0ODY=","number":782,"title":"HttpClient ignoring timeout policy when downloading files","user":{"login":"dgoldm","id":11911957,"node_id":"MDQ6VXNlcjExOTExOTU3","avatar_url":"https://avatars.githubusercontent.com/u/11911957?v=4","gravatar_id":"","url":"https://api.github.com/users/dgoldm","html_url":"https://github.com/dgoldm","followers_url":"https://api.github.com/users/dgoldm/followers","following_url":"https://api.github.com/users/dgoldm/following{/other_user}","gists_url":"https://api.github.com/users/dgoldm/gists{/gist_id}","starred_url":"https://api.github.com/users/dgoldm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgoldm/subscriptions","organizations_url":"https://api.github.com/users/dgoldm/orgs","repos_url":"https://api.github.com/users/dgoldm/repos","events_url":"https://api.github.com/users/dgoldm/events{/privacy}","received_events_url":"https://api.github.com/users/dgoldm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":5675579990,"node_id":"LA_kwDOAJaD5s8AAAABUkp6Vg","url":"https://api.github.com/repos/App-vNext/Polly/labels/stale","name":"stale","color":"E99695","default":false,"description":"Stale issues or pull requests"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-06-29T06:32:54Z","updated_at":"2023-08-04T01:50:14Z","closed_at":"2023-08-04T01:50:13Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":9864166,"node_id":"MDEwOlJlcG9zaXRvcnk5ODY0MTY2","name":"Polly","full_name":"App-vNext/Polly","private":false,"owner":{"login":"App-vNext","id":9165070,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNjUwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/9165070?v=4","gravatar_id":"","url":"https://api.github.com/users/App-vNext","html_url":"https://github.com/App-vNext","followers_url":"https://api.github.com/users/App-vNext/followers","following_url":"https://api.github.com/users/App-vNext/following{/other_user}","gists_url":"https://api.github.com/users/App-vNext/gists{/gist_id}","starred_url":"https://api.github.com/users/App-vNext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/App-vNext/subscriptions","organizations_url":"https://api.github.com/users/App-vNext/orgs","repos_url":"https://api.github.com/users/App-vNext/repos","events_url":"https://api.github.com/users/App-vNext/events{/privacy}","received_events_url":"https://api.github.com/users/App-vNext/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/App-vNext/Polly","description":"Polly is a .NET resilience and transient-fault-handling library that allows developers to express policies such as Retry, Circuit Breaker, Timeout, Bulkhead Isolation, and Fallback in a fluent and thread-safe manner. From version 6.0.1, Polly targets .NET Standard 1.1 and 2.0+.","fork":false,"url":"https://api.github.com/repos/App-vNext/Polly","forks_url":"https://api.github.com/repos/App-vNext/Polly/forks","keys_url":"https://api.github.com/repos/App-vNext/Polly/keys{/key_id}","collaborators_url":"https://api.github.com/repos/App-vNext/Polly/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/App-vNext/Polly/teams","hooks_url":"https://api.github.com/repos/App-vNext/Polly/hooks","issue_events_url":"https://api.github.com/repos/App-vNext/Polly/issues/events{/number}","events_url":"https://api.github.com/repos/App-vNext/Polly/events","assignees_url":"https://api.github.com/repos/App-vNext/Polly/assignees{/user}","branches_url":"https://api.github.com/repos/App-vNext/Polly/branches{/branch}","tags_url":"https://api.github.com/repos/App-vNext/Polly/tags","blobs_url":"https://api.github.com/repos/App-vNext/Polly/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/App-vNext/Polly/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/App-vNext/Polly/git/refs{/sha}","trees_url":"https://api.github.com/repos/App-vNext/Polly/git/trees{/sha}","statuses_url":"https://api.github.com/repos/App-vNext/Polly/statuses/{sha}","languages_url":"https://api.github.com/repos/App-vNext/Polly/languages","stargazers_url":"https://api.github.com/repos/App-vNext/Polly/stargazers","contributors_url":"https://api.github.com/repos/App-vNext/Polly/contributors","subscribers_url":"https://api.github.com/repos/App-vNext/Polly/subscribers","subscription_url":"https://api.github.com/repos/App-vNext/Polly/subscription","commits_url":"https://api.github.com/repos/App-vNext/Polly/commits{/sha}","git_commits_url":"https://api.github.com/repos/App-vNext/Polly/git/commits{/sha}","comments_url":"https://api.github.com/repos/App-vNext/Polly/comments{/number}","issue_comment_url":"https://api.github.com/repos/App-vNext/Polly/issues/comments{/number}","contents_url":"https://api.github.com/repos/App-vNext/Polly/contents/{+path}","compare_url":"https://api.github.com/repos/App-vNext/Polly/compare/{base}...{head}","merges_url":"https://api.github.com/repos/App-vNext/Polly/merges","archive_url":"https://api.github.com/repos/App-vNext/Polly/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/App-vNext/Polly/downloads","issues_url":"https://api.github.com/repos/App-vNext/Polly/issues{/number}","pulls_url":"https://api.github.com/repos/App-vNext/Polly/pulls{/number}","milestones_url":"https://api.github.com/repos/App-vNext/Polly/milestones{/number}","notifications_url":"https://api.github.com/repos/App-vNext/Polly/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/App-vNext/Polly/labels{/name}","releases_url":"https://api.github.com/repos/App-vNext/Polly/releases{/id}","deployments_url":"https://api.github.com/repos/App-vNext/Polly/deployments","created_at":"2013-05-05T04:40:04Z","updated_at":"2025-11-09T07:09:31Z","pushed_at":"2025-11-06T17:28:00Z","git_url":"git://github.com/App-vNext/Polly.git","ssh_url":"git@github.com:App-vNext/Polly.git","clone_url":"https://github.com/App-vNext/Polly.git","svn_url":"https://github.com/App-vNext/Polly","homepage":"https://www.thepollyproject.org","size":52503,"stargazers_count":14028,"watchers_count":14028,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1263,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["circuit-breaker","circuit-breaker-pattern","dotnet","fault-handler","resilience","resiliency-patterns","retry-strategies","transient-fault-handling"],"visibility":"public","forks":1263,"open_issues":7,"watchers":14028,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Summary:**\r\n\r\nWhen configuring a timeout for HttpClient with AddPolicyHandler, then using the HttpClient to download a file, the policy is ignored.\r\n</br>\r\n\r\n**Expected behavior:**\r\n1) With a large download that normally takes n>100 seconds and setting a long timeout x>n seconds,  the download should succeed.\r\n2) With a smaller download that normally takes n<100 seconds, and setting a short timeout x<n seconds, the request should fail, throwing a Timeout or TaskCanceled exception after x seconds.\r\n\r\n\r\n**Actual behavior:**\r\n1) The client throws a TaskCanceled exception after approx, 100 seconds (which is the default HttpClient timeout).\r\n2) The download succeeds.\r\n\r\n<br/>\r\n<br/>\r\n\r\n**Code to reproduce the problem**: \r\n\r\n**Program.cs**\r\n```cs\r\nusing Microsoft.Extensions.DependencyInjection;\r\nusing Polly;\r\nusing System;\r\nusing System.Diagnostics;\r\nusing System.Net.Http;\r\nusing System.Threading.Tasks;\r\n\r\nnamespace TimeoutTest\r\n{\r\n    class Program\r\n    {\r\n        static IHttpClientFactory factory;\r\n        static int i = 0;\r\n\r\n        static async Task Main(string[] args)\r\n        {\r\n            var services = new ServiceCollection();\r\n\r\n            //setting timeout via policy\r\n            services.AddHttpClient(\"p200\")\r\n                .AddPolicyHandler(Policy.TimeoutAsync<HttpResponseMessage>(TimeSpan.FromMilliseconds(200)));\r\n            services.AddHttpClient(\"p2000\")\r\n                .AddPolicyHandler(Policy.TimeoutAsync<HttpResponseMessage>(TimeSpan.FromMilliseconds(2000)));\r\n            services.AddHttpClient(\"p200_000\")\r\n                .AddPolicyHandler(Policy.TimeoutAsync<HttpResponseMessage>(TimeSpan.FromMilliseconds(200_000)));\r\n\r\n            //setting timeout via config\r\n            services.AddHttpClient(\"c200\",\r\n                config => config.Timeout = TimeSpan.FromMilliseconds(200));\r\n            services.AddHttpClient(\"c2000\",\r\n                config => config.Timeout = TimeSpan.FromMilliseconds(2000));\r\n            services.AddHttpClient(\"c200_000\",\r\n                config => config.Timeout = TimeSpan.FromMilliseconds(200_000));\r\n\r\n            var serviceProvider = services.BuildServiceProvider();\r\n\r\n            factory = serviceProvider.GetService<IHttpClientFactory>();\r\n\r\n            Console.WriteLine(\"Using policy-based timeout:\");\r\n            await TestDownload(\"http://download.inspire.net.nz/data/200MB.zip\", \"p200_000\");\r\n            await TestDownload(\"http://download.inspire.net.nz/data/20MB.zip\", \"p2000\");\r\n            await TestDownload(\"http://download.inspire.net.nz/data/20MB.zip\", \"p200\");\r\n\r\n            Console.WriteLine(\"\\nUsing config-based timeout:\");\r\n            await TestDownload(\"http://download.inspire.net.nz/data/200MB.zip\", \"c200_000\");\r\n            await TestDownload(\"http://download.inspire.net.nz/data/20MB.zip\", \"c2000\");\r\n\r\n            Console.WriteLine(\"\\nUsing policy-based timeout for a long running request with a small response:\");\r\n            await TestDownload(\"http://httpbin.org/delay/5\", \"p2000\");\r\n\r\n        }\r\n        static async Task TestDownload(string url, string clientName)\r\n        {\r\n            var watch = new Stopwatch();\r\n            watch.Start();\r\n            try\r\n            {\r\n                Console.WriteLine($\"#{++i} Url: {url}, Timeout: {clientName.Substring(1)}ms\");\r\n                await factory.CreateClient(clientName).GetAsync(url).Result.Content.ReadAsByteArrayAsync();\r\n                watch.Stop();\r\n                Console.WriteLine($\" Result: Success, Elapsed: {watch.ElapsedMilliseconds}ms\");\r\n            }\r\n            catch (AggregateException ex) when (ex.InnerException is Polly.Timeout.TimeoutRejectedException)\r\n            {\r\n                Console.WriteLine($\" Result: TimeoutRejected, Elapsed: {watch.ElapsedMilliseconds}ms\");\r\n            }\r\n            catch (AggregateException ex) when (ex.InnerException is TaskCanceledException)\r\n            {\r\n                Console.WriteLine($\" Result: TaskCanceled, Elapsed: {watch.ElapsedMilliseconds}ms\");\r\n            }\r\n            catch (Exception ex)\r\n            {\r\n                Console.WriteLine(ex.ToString());\r\n                throw;\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n**TimeoutTest.csproj**\r\n```cs\r\n<Project Sdk=\"Microsoft.NET.Sdk\">\r\n\r\n  <PropertyGroup>\r\n    <OutputType>Exe</OutputType>\r\n    <TargetFramework>netcoreapp3.1</TargetFramework>\r\n  </PropertyGroup>\r\n\r\n  <ItemGroup>\r\n    <PackageReference Include=\"Polly\" Version=\"7.2.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Http\" Version=\"3.1.5\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Http.Polly\" Version=\"3.1.5\" />\r\n  </ItemGroup>\r\n\r\n</Project>\r\n```\r\n\r\n**Output:**\r\n```\r\nUsing policy-based timeout:\r\n#1 Url: http://download.inspire.net.nz/data/512MB.zip, Timeout: 300_000ms\r\n Result: TaskCanceled, Elapsed: 100379ms\r\n#2 Url: http://download.inspire.net.nz/data/20MB.zip, Timeout: 3000ms\r\n Result: Success, Elapsed: 11079ms\r\n\r\nUsing config-based timeout:\r\n#3 Url: http://download.inspire.net.nz/data/512MB.zip, Timeout: 300_000ms\r\n Result: Success, Elapsed: 193739ms\r\n#4 Url: http://download.inspire.net.nz/data/20MB.zip, Timeout: 3000ms\r\n Result: TaskCanceled, Elapsed: 3044ms\r\n\r\nUsing policy-based timeout for a long running request with a small response:\r\n#5 Url: http://httpbin.org/delay/5, Timeout: 3000ms\r\n Result: TimeoutRejected, Elapsed: 3016ms\r\n\r\nUsing policy-based timeout with a very short timeout:\r\n#6 Url: http://download.inspire.net.nz/data/20MB.zip, Timeout: 300ms\r\n Result: TimeoutRejected, Elapsed: 327ms\r\n```\r\n\r\n**Remarks:**\r\nAttempts 1 & 2 demonstrate the unexpected behavior described above.\r\n3 & 4 demonstrate how similar requests, using a config-based timeout, behave as expected. \r\n5 & 6 are sanity checks that demonstrate cases where policy-based timeouts do behave as expected \r\n\r\nOf course the actual download times may vary according to your internet speed, so you may have to download different sized files, and/or specify different timeout values in order to reproduce the problem.","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/App-vNext/Polly/issues/782/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"nikriaz","id":52108512,"node_id":"MDQ6VXNlcjUyMTA4NTEy","avatar_url":"https://avatars.githubusercontent.com/u/52108512?v=4","gravatar_id":"","url":"https://api.github.com/users/nikriaz","html_url":"https://github.com/nikriaz","followers_url":"https://api.github.com/users/nikriaz/followers","following_url":"https://api.github.com/users/nikriaz/following{/other_user}","gists_url":"https://api.github.com/users/nikriaz/gists{/gist_id}","starred_url":"https://api.github.com/users/nikriaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikriaz/subscriptions","organizations_url":"https://api.github.com/users/nikriaz/orgs","repos_url":"https://api.github.com/users/nikriaz/repos","events_url":"https://api.github.com/users/nikriaz/events{/privacy}","received_events_url":"https://api.github.com/users/nikriaz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-17T17:43:13Z","updated_at":"2023-04-17T17:43:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/1139","repository_url":"https://api.github.com/repos/App-vNext/Polly","labels_url":"https://api.github.com/repos/App-vNext/Polly/issues/1139/labels{/name}","comments_url":"https://api.github.com/repos/App-vNext/Polly/issues/1139/comments","events_url":"https://api.github.com/repos/App-vNext/Polly/issues/1139/events","html_url":"https://github.com/App-vNext/Polly/issues/1139","id":1671673372,"node_id":"I_kwDOAJaD5s5jo7Yc","number":1139,"title":"Struggling to understand wrapping concept for WaitAndRetry, Circuit Breaker and Fallback alltogether","user":{"login":"nikriaz","id":52108512,"node_id":"MDQ6VXNlcjUyMTA4NTEy","avatar_url":"https://avatars.githubusercontent.com/u/52108512?v=4","gravatar_id":"","url":"https://api.github.com/users/nikriaz","html_url":"https://github.com/nikriaz","followers_url":"https://api.github.com/users/nikriaz/followers","following_url":"https://api.github.com/users/nikriaz/following{/other_user}","gists_url":"https://api.github.com/users/nikriaz/gists{/gist_id}","starred_url":"https://api.github.com/users/nikriaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikriaz/subscriptions","organizations_url":"https://api.github.com/users/nikriaz/orgs","repos_url":"https://api.github.com/users/nikriaz/repos","events_url":"https://api.github.com/users/nikriaz/events{/privacy}","received_events_url":"https://api.github.com/users/nikriaz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":5675579990,"node_id":"LA_kwDOAJaD5s8AAAABUkp6Vg","url":"https://api.github.com/repos/App-vNext/Polly/labels/stale","name":"stale","color":"E99695","default":false,"description":"Stale issues or pull requests"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-17T17:43:13Z","updated_at":"2023-07-16T02:13:06Z","closed_at":"2023-07-16T02:13:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":9864166,"node_id":"MDEwOlJlcG9zaXRvcnk5ODY0MTY2","name":"Polly","full_name":"App-vNext/Polly","private":false,"owner":{"login":"App-vNext","id":9165070,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNjUwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/9165070?v=4","gravatar_id":"","url":"https://api.github.com/users/App-vNext","html_url":"https://github.com/App-vNext","followers_url":"https://api.github.com/users/App-vNext/followers","following_url":"https://api.github.com/users/App-vNext/following{/other_user}","gists_url":"https://api.github.com/users/App-vNext/gists{/gist_id}","starred_url":"https://api.github.com/users/App-vNext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/App-vNext/subscriptions","organizations_url":"https://api.github.com/users/App-vNext/orgs","repos_url":"https://api.github.com/users/App-vNext/repos","events_url":"https://api.github.com/users/App-vNext/events{/privacy}","received_events_url":"https://api.github.com/users/App-vNext/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/App-vNext/Polly","description":"Polly is a .NET resilience and transient-fault-handling library that allows developers to express policies such as Retry, Circuit Breaker, Timeout, Bulkhead Isolation, and Fallback in a fluent and thread-safe manner. From version 6.0.1, Polly targets .NET Standard 1.1 and 2.0+.","fork":false,"url":"https://api.github.com/repos/App-vNext/Polly","forks_url":"https://api.github.com/repos/App-vNext/Polly/forks","keys_url":"https://api.github.com/repos/App-vNext/Polly/keys{/key_id}","collaborators_url":"https://api.github.com/repos/App-vNext/Polly/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/App-vNext/Polly/teams","hooks_url":"https://api.github.com/repos/App-vNext/Polly/hooks","issue_events_url":"https://api.github.com/repos/App-vNext/Polly/issues/events{/number}","events_url":"https://api.github.com/repos/App-vNext/Polly/events","assignees_url":"https://api.github.com/repos/App-vNext/Polly/assignees{/user}","branches_url":"https://api.github.com/repos/App-vNext/Polly/branches{/branch}","tags_url":"https://api.github.com/repos/App-vNext/Polly/tags","blobs_url":"https://api.github.com/repos/App-vNext/Polly/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/App-vNext/Polly/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/App-vNext/Polly/git/refs{/sha}","trees_url":"https://api.github.com/repos/App-vNext/Polly/git/trees{/sha}","statuses_url":"https://api.github.com/repos/App-vNext/Polly/statuses/{sha}","languages_url":"https://api.github.com/repos/App-vNext/Polly/languages","stargazers_url":"https://api.github.com/repos/App-vNext/Polly/stargazers","contributors_url":"https://api.github.com/repos/App-vNext/Polly/contributors","subscribers_url":"https://api.github.com/repos/App-vNext/Polly/subscribers","subscription_url":"https://api.github.com/repos/App-vNext/Polly/subscription","commits_url":"https://api.github.com/repos/App-vNext/Polly/commits{/sha}","git_commits_url":"https://api.github.com/repos/App-vNext/Polly/git/commits{/sha}","comments_url":"https://api.github.com/repos/App-vNext/Polly/comments{/number}","issue_comment_url":"https://api.github.com/repos/App-vNext/Polly/issues/comments{/number}","contents_url":"https://api.github.com/repos/App-vNext/Polly/contents/{+path}","compare_url":"https://api.github.com/repos/App-vNext/Polly/compare/{base}...{head}","merges_url":"https://api.github.com/repos/App-vNext/Polly/merges","archive_url":"https://api.github.com/repos/App-vNext/Polly/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/App-vNext/Polly/downloads","issues_url":"https://api.github.com/repos/App-vNext/Polly/issues{/number}","pulls_url":"https://api.github.com/repos/App-vNext/Polly/pulls{/number}","milestones_url":"https://api.github.com/repos/App-vNext/Polly/milestones{/number}","notifications_url":"https://api.github.com/repos/App-vNext/Polly/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/App-vNext/Polly/labels{/name}","releases_url":"https://api.github.com/repos/App-vNext/Polly/releases{/id}","deployments_url":"https://api.github.com/repos/App-vNext/Polly/deployments","created_at":"2013-05-05T04:40:04Z","updated_at":"2025-11-09T07:09:31Z","pushed_at":"2025-11-06T17:28:00Z","git_url":"git://github.com/App-vNext/Polly.git","ssh_url":"git@github.com:App-vNext/Polly.git","clone_url":"https://github.com/App-vNext/Polly.git","svn_url":"https://github.com/App-vNext/Polly","homepage":"https://www.thepollyproject.org","size":52503,"stargazers_count":14028,"watchers_count":14028,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1263,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["circuit-breaker","circuit-breaker-pattern","dotnet","fault-handler","resilience","resiliency-patterns","retry-strategies","transient-fault-handling"],"visibility":"public","forks":1263,"open_issues":7,"watchers":14028,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Im struggling to understand wrapping concept for WaitAndRetry (WR), Circuit Breaker(CB) and Fallback (FB) policies all together. Specifically, Im referring to the table Ordering the available policy-types in a wrap in the [Wiki]( https://github.com/App-vNext/Polly/wiki/PolicyWrap)   Can someone please clarify?\r\n\r\n1.\tScenario 1.  WR wraps CB. Wiki suggests to have CBs break time shorter then waiting time in WR. In this case, CB will able to open and close between tries. So, what is the meaning of the circuit breaker then, if no calls to its open state, i.e., able to use its open state? If in this scenario break time is longer than WRs waiting time, then its simply equal to lesser number of retries because it seems retries to the open state will be immediately thrown, so no reason to plan such hopeless retries in advance. \r\nI cant understand reasoning of such scenario at all.\r\n\r\n2.\tScenario 2. CB wraps WR. Im struggling to understand how fails are counted for CB in this scenario. If all retries of WR are counted, does it mean that number of fails for CB should be **exactly** equal to WRs number of retries? Otherwise, if CBs config number of fails less than WRs retries, then WR has no chance to execute all retries. If CB fails greater than WR retries, than CB has no chance to switch to the open state, because CB does not trigger retries. Or, maybe CB counts fails of WR itself (when all retries are over)? Meaning, if CB fails = 5 and WR = 5, we need to have 5 external calls, to have make total 5*5=25 calls to the world, to switch CB to open state? \r\n\r\nFurthermore, its unclear how to wrap Fallback policy then. Wiki says it Can also be used mid-wrap ... eg as a failover strategy.  This is my case, \r\n\r\nLets say we have `Policy.Wrap(CB, FB, WR) `and for CB number of fails = 5 and WR retries = 5. Then, on the fifth retry CB will be opened, then seems no chance for FB to execute. If the CB = 7 and WR = 5, then who will make retry to execute FB? For me it looks like if the number of fails for CB should be **exactly** equal to WRs number of retries, then there is no room for FB.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/1139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/App-vNext/Polly/issues/1139/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"peter-csala","id":57183693,"node_id":"MDQ6VXNlcjU3MTgzNjkz","avatar_url":"https://avatars.githubusercontent.com/u/57183693?v=4","gravatar_id":"","url":"https://api.github.com/users/peter-csala","html_url":"https://github.com/peter-csala","followers_url":"https://api.github.com/users/peter-csala/followers","following_url":"https://api.github.com/users/peter-csala/following{/other_user}","gists_url":"https://api.github.com/users/peter-csala/gists{/gist_id}","starred_url":"https://api.github.com/users/peter-csala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peter-csala/subscriptions","organizations_url":"https://api.github.com/users/peter-csala/orgs","repos_url":"https://api.github.com/users/peter-csala/repos","events_url":"https://api.github.com/users/peter-csala/events{/privacy}","received_events_url":"https://api.github.com/users/peter-csala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T09:42:16Z","updated_at":"2023-12-21T09:42:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/1863","repository_url":"https://api.github.com/repos/App-vNext/Polly","labels_url":"https://api.github.com/repos/App-vNext/Polly/issues/1863/labels{/name}","comments_url":"https://api.github.com/repos/App-vNext/Polly/issues/1863/comments","events_url":"https://api.github.com/repos/App-vNext/Polly/issues/1863/events","html_url":"https://github.com/App-vNext/Polly/pull/1863","id":2051990081,"node_id":"PR_kwDOAJaD5s5ijFZR","number":1863,"title":"[Docs] Revise reactive strategy sample","user":{"login":"peter-csala","id":57183693,"node_id":"MDQ6VXNlcjU3MTgzNjkz","avatar_url":"https://avatars.githubusercontent.com/u/57183693?v=4","gravatar_id":"","url":"https://api.github.com/users/peter-csala","html_url":"https://github.com/peter-csala","followers_url":"https://api.github.com/users/peter-csala/followers","following_url":"https://api.github.com/users/peter-csala/following{/other_user}","gists_url":"https://api.github.com/users/peter-csala/gists{/gist_id}","starred_url":"https://api.github.com/users/peter-csala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peter-csala/subscriptions","organizations_url":"https://api.github.com/users/peter-csala/orgs","repos_url":"https://api.github.com/users/peter-csala/repos","events_url":"https://api.github.com/users/peter-csala/events{/privacy}","received_events_url":"https://api.github.com/users/peter-csala/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":380980576,"node_id":"MDU6TGFiZWwzODA5ODA1NzY=","url":"https://api.github.com/repos/App-vNext/Polly/labels/documentation","name":"documentation","color":"006b75","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-12-21T08:52:53Z","updated_at":"2023-12-22T08:43:33Z","closed_at":"2023-12-22T08:24:53Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":9864166,"node_id":"MDEwOlJlcG9zaXRvcnk5ODY0MTY2","name":"Polly","full_name":"App-vNext/Polly","private":false,"owner":{"login":"App-vNext","id":9165070,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNjUwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/9165070?v=4","gravatar_id":"","url":"https://api.github.com/users/App-vNext","html_url":"https://github.com/App-vNext","followers_url":"https://api.github.com/users/App-vNext/followers","following_url":"https://api.github.com/users/App-vNext/following{/other_user}","gists_url":"https://api.github.com/users/App-vNext/gists{/gist_id}","starred_url":"https://api.github.com/users/App-vNext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/App-vNext/subscriptions","organizations_url":"https://api.github.com/users/App-vNext/orgs","repos_url":"https://api.github.com/users/App-vNext/repos","events_url":"https://api.github.com/users/App-vNext/events{/privacy}","received_events_url":"https://api.github.com/users/App-vNext/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/App-vNext/Polly","description":"Polly is a .NET resilience and transient-fault-handling library that allows developers to express policies such as Retry, Circuit Breaker, Timeout, Bulkhead Isolation, and Fallback in a fluent and thread-safe manner. From version 6.0.1, Polly targets .NET Standard 1.1 and 2.0+.","fork":false,"url":"https://api.github.com/repos/App-vNext/Polly","forks_url":"https://api.github.com/repos/App-vNext/Polly/forks","keys_url":"https://api.github.com/repos/App-vNext/Polly/keys{/key_id}","collaborators_url":"https://api.github.com/repos/App-vNext/Polly/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/App-vNext/Polly/teams","hooks_url":"https://api.github.com/repos/App-vNext/Polly/hooks","issue_events_url":"https://api.github.com/repos/App-vNext/Polly/issues/events{/number}","events_url":"https://api.github.com/repos/App-vNext/Polly/events","assignees_url":"https://api.github.com/repos/App-vNext/Polly/assignees{/user}","branches_url":"https://api.github.com/repos/App-vNext/Polly/branches{/branch}","tags_url":"https://api.github.com/repos/App-vNext/Polly/tags","blobs_url":"https://api.github.com/repos/App-vNext/Polly/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/App-vNext/Polly/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/App-vNext/Polly/git/refs{/sha}","trees_url":"https://api.github.com/repos/App-vNext/Polly/git/trees{/sha}","statuses_url":"https://api.github.com/repos/App-vNext/Polly/statuses/{sha}","languages_url":"https://api.github.com/repos/App-vNext/Polly/languages","stargazers_url":"https://api.github.com/repos/App-vNext/Polly/stargazers","contributors_url":"https://api.github.com/repos/App-vNext/Polly/contributors","subscribers_url":"https://api.github.com/repos/App-vNext/Polly/subscribers","subscription_url":"https://api.github.com/repos/App-vNext/Polly/subscription","commits_url":"https://api.github.com/repos/App-vNext/Polly/commits{/sha}","git_commits_url":"https://api.github.com/repos/App-vNext/Polly/git/commits{/sha}","comments_url":"https://api.github.com/repos/App-vNext/Polly/comments{/number}","issue_comment_url":"https://api.github.com/repos/App-vNext/Polly/issues/comments{/number}","contents_url":"https://api.github.com/repos/App-vNext/Polly/contents/{+path}","compare_url":"https://api.github.com/repos/App-vNext/Polly/compare/{base}...{head}","merges_url":"https://api.github.com/repos/App-vNext/Polly/merges","archive_url":"https://api.github.com/repos/App-vNext/Polly/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/App-vNext/Polly/downloads","issues_url":"https://api.github.com/repos/App-vNext/Polly/issues{/number}","pulls_url":"https://api.github.com/repos/App-vNext/Polly/pulls{/number}","milestones_url":"https://api.github.com/repos/App-vNext/Polly/milestones{/number}","notifications_url":"https://api.github.com/repos/App-vNext/Polly/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/App-vNext/Polly/labels{/name}","releases_url":"https://api.github.com/repos/App-vNext/Polly/releases{/id}","deployments_url":"https://api.github.com/repos/App-vNext/Polly/deployments","created_at":"2013-05-05T04:40:04Z","updated_at":"2025-11-09T07:09:31Z","pushed_at":"2025-11-06T17:28:00Z","git_url":"git://github.com/App-vNext/Polly.git","ssh_url":"git@github.com:App-vNext/Polly.git","clone_url":"https://github.com/App-vNext/Polly.git","svn_url":"https://github.com/App-vNext/Polly","homepage":"https://www.thepollyproject.org","size":52503,"stargazers_count":14028,"watchers_count":14028,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1263,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["circuit-breaker","circuit-breaker-pattern","dotnet","fault-handler","resilience","resiliency-patterns","retry-strategies","transient-fault-handling"],"visibility":"public","forks":1263,"open_issues":7,"watchers":14028,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/App-vNext/Polly/pulls/1863","html_url":"https://github.com/App-vNext/Polly/pull/1863","diff_url":"https://github.com/App-vNext/Polly/pull/1863.diff","patch_url":"https://github.com/App-vNext/Polly/pull/1863.patch","merged_at":"2023-12-22T08:24:53Z"},"body":"# Pull Request\r\n\r\n## The issue or feature being addressed\r\n\r\n- `Arguments` and `PredicateArguments` were defined as `struct` not as `readonly struct`\r\n- Inside the `samples/Extensibility/Program.cs` there were some dead code\r\n- The comments on the reactive sample were a bit different than on the proactive sample\r\n\r\n\r\n## Details on the issue fix or feature implementation\r\n\r\n- Defined `Arguments` and `PredicateArguments` as `readonly struct`\r\n- Deleted dead code Inside the `samples/Extensibility/Program.cs`\r\n- Simplified one of the switch case's pattern matching\r\n- Synchronized the comments between the reactive and the proactive samples\r\n- Change the target of `samples/Extensibility/Extensibility.csproj` from .NET 7 to .NET 8\r\n\r\n## Open question\r\n- In order to enhance clarity shouldn't we use `TResult` instead of `T` for the `ResultReportingResilienceStrategy` class?\r\n\r\n## Confirm the following\r\n\r\n- [x]  I started this PR by branching from the head of the default branch\r\n- [x]  I have targeted the PR to merge into the default branch\r\n- [ ]  I have included unit tests for the issue/feature\r\n- [x]  I have successfully run a local build\r\n","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/1863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/App-vNext/Polly/issues/1863/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"peter-csala","id":57183693,"node_id":"MDQ6VXNlcjU3MTgzNjkz","avatar_url":"https://avatars.githubusercontent.com/u/57183693?v=4","gravatar_id":"","url":"https://api.github.com/users/peter-csala","html_url":"https://github.com/peter-csala","followers_url":"https://api.github.com/users/peter-csala/followers","following_url":"https://api.github.com/users/peter-csala/following{/other_user}","gists_url":"https://api.github.com/users/peter-csala/gists{/gist_id}","starred_url":"https://api.github.com/users/peter-csala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peter-csala/subscriptions","organizations_url":"https://api.github.com/users/peter-csala/orgs","repos_url":"https://api.github.com/users/peter-csala/repos","events_url":"https://api.github.com/users/peter-csala/events{/privacy}","received_events_url":"https://api.github.com/users/peter-csala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-26T11:02:57Z","updated_at":"2024-03-26T11:02:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/2014","repository_url":"https://api.github.com/repos/App-vNext/Polly","labels_url":"https://api.github.com/repos/App-vNext/Polly/issues/2014/labels{/name}","comments_url":"https://api.github.com/repos/App-vNext/Polly/issues/2014/comments","events_url":"https://api.github.com/repos/App-vNext/Polly/issues/2014/events","html_url":"https://github.com/App-vNext/Polly/issues/2014","id":2180768836,"node_id":"I_kwDOAJaD5s6B--RE","number":2014,"title":"Refresh Authorization Code on When.All (causing multiple refresh authentications)","user":{"login":"LeoJHarris","id":5468757,"node_id":"MDQ6VXNlcjU0Njg3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/5468757?v=4","gravatar_id":"","url":"https://api.github.com/users/LeoJHarris","html_url":"https://github.com/LeoJHarris","followers_url":"https://api.github.com/users/LeoJHarris/followers","following_url":"https://api.github.com/users/LeoJHarris/following{/other_user}","gists_url":"https://api.github.com/users/LeoJHarris/gists{/gist_id}","starred_url":"https://api.github.com/users/LeoJHarris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeoJHarris/subscriptions","organizations_url":"https://api.github.com/users/LeoJHarris/orgs","repos_url":"https://api.github.com/users/LeoJHarris/repos","events_url":"https://api.github.com/users/LeoJHarris/events{/privacy}","received_events_url":"https://api.github.com/users/LeoJHarris/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":38476909,"node_id":"MDU6TGFiZWwzODQ3NjkwOQ==","url":"https://api.github.com/repos/App-vNext/Polly/labels/question","name":"question","color":"cc317c","default":true,"description":null},{"id":5675579990,"node_id":"LA_kwDOAJaD5s8AAAABUkp6Vg","url":"https://api.github.com/repos/App-vNext/Polly/labels/stale","name":"stale","color":"E99695","default":false,"description":"Stale issues or pull requests"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2024-03-12T05:31:56Z","updated_at":"2024-06-19T01:49:11Z","closed_at":"2024-06-19T01:49:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":9864166,"node_id":"MDEwOlJlcG9zaXRvcnk5ODY0MTY2","name":"Polly","full_name":"App-vNext/Polly","private":false,"owner":{"login":"App-vNext","id":9165070,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNjUwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/9165070?v=4","gravatar_id":"","url":"https://api.github.com/users/App-vNext","html_url":"https://github.com/App-vNext","followers_url":"https://api.github.com/users/App-vNext/followers","following_url":"https://api.github.com/users/App-vNext/following{/other_user}","gists_url":"https://api.github.com/users/App-vNext/gists{/gist_id}","starred_url":"https://api.github.com/users/App-vNext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/App-vNext/subscriptions","organizations_url":"https://api.github.com/users/App-vNext/orgs","repos_url":"https://api.github.com/users/App-vNext/repos","events_url":"https://api.github.com/users/App-vNext/events{/privacy}","received_events_url":"https://api.github.com/users/App-vNext/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/App-vNext/Polly","description":"Polly is a .NET resilience and transient-fault-handling library that allows developers to express policies such as Retry, Circuit Breaker, Timeout, Bulkhead Isolation, and Fallback in a fluent and thread-safe manner. From version 6.0.1, Polly targets .NET Standard 1.1 and 2.0+.","fork":false,"url":"https://api.github.com/repos/App-vNext/Polly","forks_url":"https://api.github.com/repos/App-vNext/Polly/forks","keys_url":"https://api.github.com/repos/App-vNext/Polly/keys{/key_id}","collaborators_url":"https://api.github.com/repos/App-vNext/Polly/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/App-vNext/Polly/teams","hooks_url":"https://api.github.com/repos/App-vNext/Polly/hooks","issue_events_url":"https://api.github.com/repos/App-vNext/Polly/issues/events{/number}","events_url":"https://api.github.com/repos/App-vNext/Polly/events","assignees_url":"https://api.github.com/repos/App-vNext/Polly/assignees{/user}","branches_url":"https://api.github.com/repos/App-vNext/Polly/branches{/branch}","tags_url":"https://api.github.com/repos/App-vNext/Polly/tags","blobs_url":"https://api.github.com/repos/App-vNext/Polly/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/App-vNext/Polly/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/App-vNext/Polly/git/refs{/sha}","trees_url":"https://api.github.com/repos/App-vNext/Polly/git/trees{/sha}","statuses_url":"https://api.github.com/repos/App-vNext/Polly/statuses/{sha}","languages_url":"https://api.github.com/repos/App-vNext/Polly/languages","stargazers_url":"https://api.github.com/repos/App-vNext/Polly/stargazers","contributors_url":"https://api.github.com/repos/App-vNext/Polly/contributors","subscribers_url":"https://api.github.com/repos/App-vNext/Polly/subscribers","subscription_url":"https://api.github.com/repos/App-vNext/Polly/subscription","commits_url":"https://api.github.com/repos/App-vNext/Polly/commits{/sha}","git_commits_url":"https://api.github.com/repos/App-vNext/Polly/git/commits{/sha}","comments_url":"https://api.github.com/repos/App-vNext/Polly/comments{/number}","issue_comment_url":"https://api.github.com/repos/App-vNext/Polly/issues/comments{/number}","contents_url":"https://api.github.com/repos/App-vNext/Polly/contents/{+path}","compare_url":"https://api.github.com/repos/App-vNext/Polly/compare/{base}...{head}","merges_url":"https://api.github.com/repos/App-vNext/Polly/merges","archive_url":"https://api.github.com/repos/App-vNext/Polly/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/App-vNext/Polly/downloads","issues_url":"https://api.github.com/repos/App-vNext/Polly/issues{/number}","pulls_url":"https://api.github.com/repos/App-vNext/Polly/pulls{/number}","milestones_url":"https://api.github.com/repos/App-vNext/Polly/milestones{/number}","notifications_url":"https://api.github.com/repos/App-vNext/Polly/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/App-vNext/Polly/labels{/name}","releases_url":"https://api.github.com/repos/App-vNext/Polly/releases{/id}","deployments_url":"https://api.github.com/repos/App-vNext/Polly/deployments","created_at":"2013-05-05T04:40:04Z","updated_at":"2025-11-09T07:09:31Z","pushed_at":"2025-11-06T17:28:00Z","git_url":"git://github.com/App-vNext/Polly.git","ssh_url":"git@github.com:App-vNext/Polly.git","clone_url":"https://github.com/App-vNext/Polly.git","svn_url":"https://github.com/App-vNext/Polly","homepage":"https://www.thepollyproject.org","size":52503,"stargazers_count":14028,"watchers_count":14028,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1263,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["circuit-breaker","circuit-breaker-pattern","dotnet","fault-handler","resilience","resiliency-patterns","retry-strategies","transient-fault-handling"],"visibility":"public","forks":1263,"open_issues":7,"watchers":14028,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### What are you wanting to achieve?\r\n\r\nI am trying to refresh an expired authentication code whilst also ensuring that the refreshing authentication code block is not called repeated times for every fail.\r\n\r\nIn our application we use `Task.WhenAll` that will fire multiple requests, if all requests should fail due to `Unauthorized` then the `AuthEnsuringPolicy` executes which is currently being called multiple times which is not ideal.\r\n\r\n### What code or approach do you have so far?\r\n\r\nI followed this [example ](https://www.thepollyproject.org/2017/05/04/putting-the-context-into-polly/) to use the `Context` and it works fine when making single requests. The issues starts happening for multiple requests such as using `Task.WhenAll` for sending multiple http requests, the Polly Policy is called for every fail resulting in many attempts to refresh code, it would be better if we can cancel other attempts to refresh code on first entering the code block and then retry all requests again once a successful refresh was achieved on the first attempt. Can this be done?\r\n\r\nSo far my code is:\r\n\r\n```csharp\r\n public static AsyncRetryPolicy<HttpResponseMessage> AuthEnsuringPolicy = Policy<HttpResponseMessage>\r\n        .HandleResult(r => r.StatusCode == HttpStatusCode.Unauthorized)\r\n        .RetryAsync(1, onRetryAsync: async (ex, i, context) =>\r\n        {\r\n            Debug.WriteLine(\"Unauthorized request, refreshing token.\");\r\n\r\n            IUserManagementService userManagementService = App.ContainerProvider.Resolve<IUserManagementService>();\r\n            ILocalStorageService localStorageService = App.ContainerProvider.Resolve<ILocalStorageService>();\r\n\r\n            HttpClient httpClient = (HttpClient)context[\"httpClient\"];\r\n            CancellationTokenSource cancellationTokenSource = (CancellationTokenSource)context[\"cancellationTokenSource\"];\r\n\r\n            cancellationTokenSource.Cancel();\r\n\r\n            if (localStorageService.GetCustomer() is Customer customer && await customer.GetPasswordAsync().ConfigureAwait(true) is string password && await userManagementService.RefreshAuthorizationTokenAsync(customer.Mobile, password).ConfigureAwait(true) is not null)\r\n            {\r\n                if (await localStorageService.GetSecurityTokenAsync().ConfigureAwait(false) is string securityToken && !string.IsNullOrEmpty(securityToken))\r\n                {\r\n                    if (httpClient.DefaultRequestHeaders.Contains(Constants.AuthenticationTokenHeaderKey))\r\n                    {\r\n                        _ = httpClient.DefaultRequestHeaders.Remove(Constants.AuthenticationTokenHeaderKey);\r\n                    }\r\n\r\n                    httpClient.DefaultRequestHeaders.Add(Constants.AuthenticationTokenHeaderKey, securityToken);\r\n                }\r\n            }\r\n        });\r\n```\r\n\r\nAlso we setup like this:\r\n\r\n```csharp\r\nIAsyncPolicy<HttpResponseMessage> wrapOfRetryAndFallback = Policy.WrapAsync(Policy.HandleResult<HttpResponseMessage>(r => !r.IsSuccessStatusCode).FallbackAsync(fallbackAction, onFallBackAsync), PollyPolicies.AuthEnsuringPolicy);\r\n\r\n        _ = containerRegistry.RegisterSingleton<IHttpClientFactory>(() => new ServiceCollection().AddHttpClient(Constants.HttpClientWithRetry).AddPolicyHandler(wrapOfRetryAndFallback).Services.BuildServiceProvider().GetService<IHttpClientFactory>());\r\n```\r\n\r\nUsage:\r\n\r\n```csharp\r\nCancellationTokenSource _policyCTS = new();\r\n\r\n        requestMessage.SetPolicyExecutionContext(new Context\r\n            {\r\n                { \"retrycount\", 0 },\r\n                { \"httpClient\", httpClient },\r\n                {  \"cancellationTokenSource\", _policyCTS  }\r\n            });\r\n\r\n        HttpResponseMessage httpResponseMessage = await httpClient.SendAsync(requestMessage, _policyCTS.Token).ConfigureAwait(false);\r\n```\r\n\r\n### Additional context\r\n\r\nInitially I thought we could use the CancellationTokenSource somewhere but not to sure.","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/2014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/App-vNext/Polly/issues/2014/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"Mahantesh-DotNet","id":66260047,"node_id":"MDQ6VXNlcjY2MjYwMDQ3","avatar_url":"https://avatars.githubusercontent.com/u/66260047?v=4","gravatar_id":"","url":"https://api.github.com/users/Mahantesh-DotNet","html_url":"https://github.com/Mahantesh-DotNet","followers_url":"https://api.github.com/users/Mahantesh-DotNet/followers","following_url":"https://api.github.com/users/Mahantesh-DotNet/following{/other_user}","gists_url":"https://api.github.com/users/Mahantesh-DotNet/gists{/gist_id}","starred_url":"https://api.github.com/users/Mahantesh-DotNet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mahantesh-DotNet/subscriptions","organizations_url":"https://api.github.com/users/Mahantesh-DotNet/orgs","repos_url":"https://api.github.com/users/Mahantesh-DotNet/repos","events_url":"https://api.github.com/users/Mahantesh-DotNet/events{/privacy}","received_events_url":"https://api.github.com/users/Mahantesh-DotNet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-08T11:07:04Z","updated_at":"2024-07-08T11:07:04Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/2181","repository_url":"https://api.github.com/repos/App-vNext/Polly","labels_url":"https://api.github.com/repos/App-vNext/Polly/issues/2181/labels{/name}","comments_url":"https://api.github.com/repos/App-vNext/Polly/issues/2181/comments","events_url":"https://api.github.com/repos/App-vNext/Polly/issues/2181/events","html_url":"https://github.com/App-vNext/Polly/issues/2181","id":2392948727,"node_id":"I_kwDOAJaD5s6OoX_3","number":2181,"title":"[Question]: How to use a CircuitBreaker(basic or advanced) policy with multiple retry policies","user":{"login":"Mahantesh-DotNet","id":66260047,"node_id":"MDQ6VXNlcjY2MjYwMDQ3","avatar_url":"https://avatars.githubusercontent.com/u/66260047?v=4","gravatar_id":"","url":"https://api.github.com/users/Mahantesh-DotNet","html_url":"https://github.com/Mahantesh-DotNet","followers_url":"https://api.github.com/users/Mahantesh-DotNet/followers","following_url":"https://api.github.com/users/Mahantesh-DotNet/following{/other_user}","gists_url":"https://api.github.com/users/Mahantesh-DotNet/gists{/gist_id}","starred_url":"https://api.github.com/users/Mahantesh-DotNet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mahantesh-DotNet/subscriptions","organizations_url":"https://api.github.com/users/Mahantesh-DotNet/orgs","repos_url":"https://api.github.com/users/Mahantesh-DotNet/repos","events_url":"https://api.github.com/users/Mahantesh-DotNet/events{/privacy}","received_events_url":"https://api.github.com/users/Mahantesh-DotNet/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":38476909,"node_id":"MDU6TGFiZWwzODQ3NjkwOQ==","url":"https://api.github.com/repos/App-vNext/Polly/labels/question","name":"question","color":"cc317c","default":true,"description":null},{"id":5675579990,"node_id":"LA_kwDOAJaD5s8AAAABUkp6Vg","url":"https://api.github.com/repos/App-vNext/Polly/labels/stale","name":"stale","color":"E99695","default":false,"description":"Stale issues or pull requests"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2024-07-05T17:36:56Z","updated_at":"2024-09-22T02:02:20Z","closed_at":"2024-09-22T02:02:20Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":9864166,"node_id":"MDEwOlJlcG9zaXRvcnk5ODY0MTY2","name":"Polly","full_name":"App-vNext/Polly","private":false,"owner":{"login":"App-vNext","id":9165070,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNjUwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/9165070?v=4","gravatar_id":"","url":"https://api.github.com/users/App-vNext","html_url":"https://github.com/App-vNext","followers_url":"https://api.github.com/users/App-vNext/followers","following_url":"https://api.github.com/users/App-vNext/following{/other_user}","gists_url":"https://api.github.com/users/App-vNext/gists{/gist_id}","starred_url":"https://api.github.com/users/App-vNext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/App-vNext/subscriptions","organizations_url":"https://api.github.com/users/App-vNext/orgs","repos_url":"https://api.github.com/users/App-vNext/repos","events_url":"https://api.github.com/users/App-vNext/events{/privacy}","received_events_url":"https://api.github.com/users/App-vNext/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/App-vNext/Polly","description":"Polly is a .NET resilience and transient-fault-handling library that allows developers to express policies such as Retry, Circuit Breaker, Timeout, Bulkhead Isolation, and Fallback in a fluent and thread-safe manner. From version 6.0.1, Polly targets .NET Standard 1.1 and 2.0+.","fork":false,"url":"https://api.github.com/repos/App-vNext/Polly","forks_url":"https://api.github.com/repos/App-vNext/Polly/forks","keys_url":"https://api.github.com/repos/App-vNext/Polly/keys{/key_id}","collaborators_url":"https://api.github.com/repos/App-vNext/Polly/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/App-vNext/Polly/teams","hooks_url":"https://api.github.com/repos/App-vNext/Polly/hooks","issue_events_url":"https://api.github.com/repos/App-vNext/Polly/issues/events{/number}","events_url":"https://api.github.com/repos/App-vNext/Polly/events","assignees_url":"https://api.github.com/repos/App-vNext/Polly/assignees{/user}","branches_url":"https://api.github.com/repos/App-vNext/Polly/branches{/branch}","tags_url":"https://api.github.com/repos/App-vNext/Polly/tags","blobs_url":"https://api.github.com/repos/App-vNext/Polly/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/App-vNext/Polly/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/App-vNext/Polly/git/refs{/sha}","trees_url":"https://api.github.com/repos/App-vNext/Polly/git/trees{/sha}","statuses_url":"https://api.github.com/repos/App-vNext/Polly/statuses/{sha}","languages_url":"https://api.github.com/repos/App-vNext/Polly/languages","stargazers_url":"https://api.github.com/repos/App-vNext/Polly/stargazers","contributors_url":"https://api.github.com/repos/App-vNext/Polly/contributors","subscribers_url":"https://api.github.com/repos/App-vNext/Polly/subscribers","subscription_url":"https://api.github.com/repos/App-vNext/Polly/subscription","commits_url":"https://api.github.com/repos/App-vNext/Polly/commits{/sha}","git_commits_url":"https://api.github.com/repos/App-vNext/Polly/git/commits{/sha}","comments_url":"https://api.github.com/repos/App-vNext/Polly/comments{/number}","issue_comment_url":"https://api.github.com/repos/App-vNext/Polly/issues/comments{/number}","contents_url":"https://api.github.com/repos/App-vNext/Polly/contents/{+path}","compare_url":"https://api.github.com/repos/App-vNext/Polly/compare/{base}...{head}","merges_url":"https://api.github.com/repos/App-vNext/Polly/merges","archive_url":"https://api.github.com/repos/App-vNext/Polly/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/App-vNext/Polly/downloads","issues_url":"https://api.github.com/repos/App-vNext/Polly/issues{/number}","pulls_url":"https://api.github.com/repos/App-vNext/Polly/pulls{/number}","milestones_url":"https://api.github.com/repos/App-vNext/Polly/milestones{/number}","notifications_url":"https://api.github.com/repos/App-vNext/Polly/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/App-vNext/Polly/labels{/name}","releases_url":"https://api.github.com/repos/App-vNext/Polly/releases{/id}","deployments_url":"https://api.github.com/repos/App-vNext/Polly/deployments","created_at":"2013-05-05T04:40:04Z","updated_at":"2025-11-09T07:09:31Z","pushed_at":"2025-11-06T17:28:00Z","git_url":"git://github.com/App-vNext/Polly.git","ssh_url":"git@github.com:App-vNext/Polly.git","clone_url":"https://github.com/App-vNext/Polly.git","svn_url":"https://github.com/App-vNext/Polly","homepage":"https://www.thepollyproject.org","size":52503,"stargazers_count":14028,"watchers_count":14028,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1263,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["circuit-breaker","circuit-breaker-pattern","dotnet","fault-handler","resilience","resiliency-patterns","retry-strategies","transient-fault-handling"],"visibility":"public","forks":1263,"open_issues":7,"watchers":14028,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### What are you wanting to achieve?\n\nI have attached my usecase or question in the attached document. Please help either in polly 7 or 8 version. Thanks in advance.\n\n### What code or approach do you have so far?\n\nI have attached the code snippet in the attachment.\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/App-vNext/Polly/issues/2181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/App-vNext/Polly/issues/2181/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"}]