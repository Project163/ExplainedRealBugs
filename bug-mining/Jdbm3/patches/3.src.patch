diff --git a/src/main/java/net/kotek/jdbm/DB.java b/src/main/java/net/kotek/jdbm/DB.java
index c0ce54f..4147ac5 100644
--- a/src/main/java/net/kotek/jdbm/DB.java
+++ b/src/main/java/net/kotek/jdbm/DB.java
@@ -70,6 +70,14 @@ public interface DB {
     String calculateStatistics();
 
 
+    /**
+     * Copy database content into ZIP file
+     * @param zipFile
+     */
+    void copyToZip(String zipFile);
+
+
+
     /**
      * Get a <code>Map</code> which was already created and saved in DB.
      * This map uses disk based H*Tree and should have similar performance
diff --git a/src/main/java/net/kotek/jdbm/DBMaker.java b/src/main/java/net/kotek/jdbm/DBMaker.java
index 2e4c324..0d02445 100755
--- a/src/main/java/net/kotek/jdbm/DBMaker.java
+++ b/src/main/java/net/kotek/jdbm/DBMaker.java
@@ -67,6 +67,26 @@ public class DBMaker {
         return new DBMaker();
     }
 
+    /**
+     * Open store in zip file
+     *
+     * @param zip file
+     * @return new DBMaker
+     */
+    public static DBMaker openZip(String zip) {
+        DBMaker m = new DBMaker();
+        m.location = "$$ZIP$$://"+zip;
+        return m;
+    }
+
+     static String  isZipFileLocation(String location){
+         String match = "$$ZIP$$://";
+         if( location.startsWith(match)){
+             return location.substring(match.length());
+         }
+         return null;
+     }
+
     /**
      * Use WeakReference for cache.
      * This cache does not improve performance much,
diff --git a/src/main/java/net/kotek/jdbm/DBStore.java b/src/main/java/net/kotek/jdbm/DBStore.java
index 07eb8c1..db2bced 100644
--- a/src/main/java/net/kotek/jdbm/DBStore.java
+++ b/src/main/java/net/kotek/jdbm/DBStore.java
@@ -476,15 +476,15 @@ class DBStore
 
     }
 
-    public void copyToZipStore(String zipFile) {
+    public void copyToZip(String zipFile) {
         try {
-            String zip = zipFile.substring(0, zipFile.indexOf("!/")); //TODO does not work on windows
-            String zip2 = zipFile.substring(zipFile.indexOf("!/") + 2);
+            String zip = zipFile;
+            String zip2 = "db";
             ZipOutputStream z = new ZipOutputStream(new FileOutputStream(zip));
 
             //copy zero pages
             {
-                String file = zip2 + StorageDiskMapped.DBR + 0;
+                String file = zip2 +  0;
                 z.putNextEntry(new ZipEntry(file));
                 z.write(Utils.encrypt(cipherIn, _pageman.getHeaderBufData()));
                 z.closeEntry();
@@ -496,7 +496,7 @@ class DBStore
                  pageid = _pageman.getNext(pageid)
                     ) {
                 BlockIo block = _file.get(pageid);
-                String file = zip2 + StorageDiskMapped.IDR + pageid;
+                String file = zip2 +  pageid;
                 z.putNextEntry(new ZipEntry(file));
                 z.write(Utils.encrypt(cipherIn, block.getData()));
                 z.closeEntry();
@@ -507,7 +507,7 @@ class DBStore
                  pageid = _pageman.getNext(pageid)
                     ) {
                 BlockIo block = _file.get(pageid);
-                String file = zip2 + StorageDiskMapped.IDR + pageid;
+                String file = zip2 + pageid;
                 z.putNextEntry(new ZipEntry(file));
                 z.write(Utils.encrypt(cipherIn, block.getData()));
                 z.closeEntry();
@@ -519,7 +519,7 @@ class DBStore
                  pageid = _pageman.getNext(pageid)
                     ) {
                 BlockIo block = _file.get(pageid);
-                String file = zip2 + StorageDiskMapped.DBR + pageid;
+                String file = zip2 + pageid;
                 z.putNextEntry(new ZipEntry(file));
                 z.write(Utils.encrypt(cipherIn, block.getData()));
                 z.closeEntry();
@@ -530,7 +530,7 @@ class DBStore
                  pageid = _pageman.getNext(pageid)
                     ) {
                 BlockIo block = _file.get(pageid);
-                String file = zip2 + StorageDiskMapped.DBR + pageid;
+                String file = zip2 + pageid;
                 z.putNextEntry(new ZipEntry(file));
                 z.write(Utils.encrypt(cipherIn, block.getData()));
                 z.closeEntry();
diff --git a/src/main/java/net/kotek/jdbm/RecordFile.java b/src/main/java/net/kotek/jdbm/RecordFile.java
index 4f18f4b..82e57f4 100644
--- a/src/main/java/net/kotek/jdbm/RecordFile.java
+++ b/src/main/java/net/kotek/jdbm/RecordFile.java
@@ -87,8 +87,10 @@ final class RecordFile {
         this.transactionsDisabled = transactionsDisabled;
         if(fileName == null){
             this.storage = new StorageMemory(transactionsDisabled);
-        }else if (fileName.contains("!/"))
-            this.storage = new StorageZip(fileName);
+        }else if(DBMaker.isZipFileLocation(fileName)!=null)
+                this.storage = new StorageZip(DBMaker.isZipFileLocation(fileName));
+//        }else if (fileName.contains("!/"))
+//            this.storage = new StorageZip(fileName);
         else if(useRandomAccessFile)
             this.storage = new StorageDisk(fileName,readonly);
         else
diff --git a/src/main/java/net/kotek/jdbm/StorageZip.java b/src/main/java/net/kotek/jdbm/StorageZip.java
index d4ea47e..aa4d03e 100644
--- a/src/main/java/net/kotek/jdbm/StorageZip.java
+++ b/src/main/java/net/kotek/jdbm/StorageZip.java
@@ -19,10 +19,9 @@ class StorageZip implements Storage {
     private ZipFile z;
 
     StorageZip(String zipFile) throws IOException {
-        zip = zipFile.substring(0, zipFile.indexOf("!/")); //TODO does not work on windows
+        zip = zipFile;
         z = new ZipFile(zip);
-        zip2 = zipFile.substring(zipFile.indexOf("!/") + 2);
-
+        zip2 = "db";
     }
 
     public void write(long pageNumber, ByteBuffer data) throws IOException {
diff --git a/src/test/java/net/kotek/jdbm/StorageZipTest.java b/src/test/java/net/kotek/jdbm/StorageZipTest.java
index 3ee9d43..469b42c 100644
--- a/src/test/java/net/kotek/jdbm/StorageZipTest.java
+++ b/src/test/java/net/kotek/jdbm/StorageZipTest.java
@@ -1,38 +1,39 @@
-//package net.kotek.jdbm;
-//
-//import java.io.File;
-//import java.io.IOException;
-//import java.util.Set;
-// //TODO Make this work!!
-//public class StorageZipTest extends TestCaseWithTestFile {
-//
-//
-//
-//    public void test_archive_creation() throws IOException {
-//
-//        File tmp = File.createTempFile("JDBM_TEST_ZIP", "zip");
-//        String dbpath = tmp.getPath() + "!/test/db";
-//        tmp.deleteOnExit();
-//
-//        //first create archie and put it in zip file
-//        DBStore r = new DBStore(newTestFile(), false, true);
-//        Set<Long> h = r.createHashSet("hash");
-//        for (Long l = 0L; l < 1e3; l++) {
-//            h.add(l);
-//        }
-//        r.commit();
-//        r.copyToZipStore(dbpath);
-//        r.close();
-//
-//        System.out.println("Zip file created, size: " + tmp.length());
-//
-//        //open zip file and check it contains all data
-//        DB r2 = new DBMaker(dbpath).readonly().build();
-//        Set<Long> h2 = r2.getHashSet("hash");
-//        for (Long l = 0L; l < 1e3; l++) {
-//            assertTrue(h2.contains(l));
-//        }
-//
-//    }
-//
-//}
+package net.kotek.jdbm;
+
+import java.io.File;
+import java.io.IOException;
+import java.util.Set;
+//TODO Make this work!!
+public class StorageZipTest extends TestCaseWithTestFile {
+
+
+
+    public void test_archive_creation() throws IOException {
+
+        File tmp = File.createTempFile("JDBM_TEST_ZIP", ".zip");
+        String dbpath = tmp.getPath() ;
+        tmp.deleteOnExit();
+
+        //first create archie and put it in zip file
+        DBStore r = new DBStore(newTestFile(), false, true);
+        Set<Long> h = r.createHashSet("hash");
+        for (Long l = 0L; l < 1e3; l++) {
+            h.add(l);
+        }
+        r.commit();
+        r.copyToZip(dbpath);
+        r.close();
+
+        System.out.println("Zip file created, size: " + tmp.length());
+
+        //open zip file and check it contains all data
+        DB r2 =  DBMaker.openZip(dbpath).readonly().make();
+
+        Set<Long> h2 = r2.getHashSet("hash");
+        for (Long l = 0L; l < 1e3; l++) {
+            assertTrue(h2.contains(l));
+        }
+
+    }
+
+}
