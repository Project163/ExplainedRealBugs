diff --git a/src/modules/username.rs b/src/modules/username.rs
index 36f88385..7fbd9e6e 100644
--- a/src/modules/username.rs
+++ b/src/modules/username.rs
@@ -21,10 +21,14 @@ pub fn module<'a>(context: &'a Context) -> Option<Module<'a>> {
     let username = context.get_env(USERNAME_ENV_VAR)?;
     let logname = context.get_env("LOGNAME");
 
-    let user_uid = get_uid();
+    let is_root = if cfg!(not(target_os = "windows")) {
+        let user_uid = get_uid();
+        user_uid == ROOT_UID
+    } else {
+        false
+    };
 
     let is_not_login = logname.is_some() && username != logname.unwrap();
-    let is_root = user_uid == ROOT_UID;
 
     let mut module = context.new_module("username");
     let config: UsernameConfig = UsernameConfig::try_load(module.config);
diff --git a/src/utils.rs b/src/utils.rs
index 2ab34a88..6d561222 100644
--- a/src/utils.rs
+++ b/src/utils.rs
@@ -277,6 +277,7 @@ fn internal_exec_cmd(cmd: &str, args: &[&str]) -> Option<CommandOutput> {
         .args(args)
         .stderr(Stdio::piped())
         .stdout(Stdio::piped())
+        .stdin(Stdio::null())
         .spawn()
     {
         Ok(process) => process,
