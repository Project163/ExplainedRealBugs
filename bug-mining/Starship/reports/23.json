{"url":"https://api.github.com/repos/starship/starship/issues/3419","repository_url":"https://api.github.com/repos/starship/starship","labels_url":"https://api.github.com/repos/starship/starship/issues/3419/labels{/name}","comments_url":"https://api.github.com/repos/starship/starship/issues/3419/comments","events_url":"https://api.github.com/repos/starship/starship/issues/3419/events","html_url":"https://github.com/starship/starship/issues/3419","id":1100656699,"node_id":"I_kwDOCqswNs5BmrA7","number":3419,"title":"Starship should set Set-PSReadLineOption -ExtraPromptLineCount for PowerShell","user":{"login":"segevfiner","id":24731903,"node_id":"MDQ6VXNlcjI0NzMxOTAz","avatar_url":"https://avatars.githubusercontent.com/u/24731903?v=4","gravatar_id":"","url":"https://api.github.com/users/segevfiner","html_url":"https://github.com/segevfiner","followers_url":"https://api.github.com/users/segevfiner/followers","following_url":"https://api.github.com/users/segevfiner/following{/other_user}","gists_url":"https://api.github.com/users/segevfiner/gists{/gist_id}","starred_url":"https://api.github.com/users/segevfiner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/segevfiner/subscriptions","organizations_url":"https://api.github.com/users/segevfiner/orgs","repos_url":"https://api.github.com/users/segevfiner/repos","events_url":"https://api.github.com/users/segevfiner/events{/privacy}","received_events_url":"https://api.github.com/users/segevfiner/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1300028463,"node_id":"MDU6TGFiZWwxMzAwMDI4NDYz","url":"https://api.github.com/repos/starship/starship/labels/%F0%9F%90%9B%20bug","name":"üêõ bug","color":"d73a4a","default":false,"description":"Something isn't working as expected."},{"id":1324164943,"node_id":"MDU6TGFiZWwxMzI0MTY0OTQz","url":"https://api.github.com/repos/starship/starship/labels/%F0%9F%8C%B1%20good%20first%20issue","name":"üå± good first issue","color":"ffa0e1","default":false,"description":"Good first issue to get your feet wet."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-01-12T18:24:46Z","updated_at":"2022-02-05T20:12:47Z","closed_at":"2022-02-05T20:12:47Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Current Behavior\r\nStarship doesn't set `ExtraPromptLineCount`  in PSReadline in PowerShell. This leads to weird behavior on prompt redraw as done by some plugins, e.g. PSFzf.\r\n\r\n#### Expected Behavior\r\nStarship should set `ExtraPromptLineCount` to the correct value, the value I needed to set was `2` when using the default two lines configuration.\r\n\r\n#### Additional context/Screenshots\r\n<!-- Add any other context about the problem here. If applicable, add screenshots to help explain. -->\r\nSee https://docs.microsoft.com/en-us/powershell/module/psreadline/set-psreadlineoption?view=powershell-7.2\r\n\r\n#### Possible Solution\r\nAdd a call to `Set-PSReadLineOption -ExtraPromptLineCount` to the PowerShell init script with the correct value.\r\n\r\n#### Environment\r\n- Starship version: 1.1.1\r\n- powershell version: 7.2.1\r\n- Operating system: Windows 10.0.19044\r\n- Terminal emulator: Windows Terminal 1.11.3471.0\r\n- Git Commit Hash: 9a4b2bb5\r\n- Branch/Tag: v1.1.1\r\n- Rust Version: rustc 1.57.0 (f1edd0429 2021-11-29)\r\n- Rust channel: stable-x86_64-pc-windows-msvc release\r\n- Build Time: 2021-12-21 20:14:52 +00:00\r\n#### Relevant Shell Configuration\r\n\r\n```pwsh\r\nImport-Module PSFzf\r\nImport-Module posh-git\r\nImport-Module DockerCompletion\r\n\r\n~\\scoop\\apps\\ripgrep\\current\\complete\\_rg.ps1\r\n~\\scoop\\apps\\fd\\current\\autocomplete\\_fd.ps1\r\n~\\scoop\\apps\\bat\\current\\autocomplete\\_bat.ps1\r\n\r\n$env:PAGER='less'\r\n$env:LESS='-R --mouse'\r\n$env:LESSCHARSET='utf-8'\r\n\r\nSet-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward\r\nSet-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward\r\nSet-PSReadLineOption -HistorySearchCursorMovesToEnd\r\nSet-PSReadLineOption -PredictionSource History\r\nSet-PSReadLineOption -ExtraPromptLineCount 2\r\nSet-PSReadLineOption -ContinuationPrompt \"`e[1;33m‚ùØ`e[0m \"\r\n\r\nSet-PsFzfOption -PSReadlineChordReverseHistory 'Ctrl+r'\r\n\r\nInvoke-Expression (&starship init powershell)\r\n\r\nNew-Alias npp 'C:\\Program Files\\Notepad++\\notepad++.exe'\r\nNew-Alias 7z 'C:\\Program Files\\7-Zip\\7z.exe'\r\n```\r\n\r\n#### Starship Configuration\r\n\r\n```toml\r\n[directory]\r\ntruncation_symbol = \"‚Ä¶/\"\r\n\r\n[battery]\r\nfull_symbol = \"‚Ä¢ \"\r\ncharging_symbol = \"‚á° \"\r\ndischarging_symbol = \"‚á£ \"\r\nunknown_symbol = \"‚ùì \"\r\nempty_symbol = \"‚ùó \"\r\n\r\n[erlang]\r\nsymbol = \"erl \"\r\n\r\n[nodejs]\r\nsymbol = \"[‚¨¢](bold green) \"\r\n\r\n[pulumi]\r\nsymbol = \"pulumi \"\r\n\r\n```","closed_by":{"login":"davidkna","id":835177,"node_id":"MDQ6VXNlcjgzNTE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/835177?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkna","html_url":"https://github.com/davidkna","followers_url":"https://api.github.com/users/davidkna/followers","following_url":"https://api.github.com/users/davidkna/following{/other_user}","gists_url":"https://api.github.com/users/davidkna/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkna/subscriptions","organizations_url":"https://api.github.com/users/davidkna/orgs","repos_url":"https://api.github.com/users/davidkna/repos","events_url":"https://api.github.com/users/davidkna/events{/privacy}","received_events_url":"https://api.github.com/users/davidkna/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/starship/starship/issues/3419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/starship/starship/issues/3419/timeline","performed_via_github_app":null,"state_reason":"completed"}