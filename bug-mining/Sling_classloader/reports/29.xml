<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:36:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-5980] Duplicate Script Cache Clearing Functionality</title>
                <link>https://issues.apache.org/jira/browse/SLING-5980</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, there are two ways to clear the scripting classloader cache, one in the &lt;span class=&quot;error&quot;&gt;&amp;#91;JSP Scripting Console&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/scripting/jsp/src/main/java/org/apache/sling/scripting/jsp/JspScriptEngineFactory.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/scripting/jsp/src/main/java/org/apache/sling/scripting/jsp/JspScriptEngineFactory.java&lt;/a&gt;) (&lt;a href=&quot;http://localhost:8080/system/console/slingjsp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/slingjsp&lt;/a&gt;) and on in the &lt;span class=&quot;error&quot;&gt;&amp;#91;File System ClassLoader Console&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/commons/fsclassloader/src/main/java/org/apache/sling/commons/fsclassloader/impl/FSClassLoaderWebConsole.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/commons/fsclassloader/src/main/java/org/apache/sling/commons/fsclassloader/impl/FSClassLoaderWebConsole.java&lt;/a&gt;) (&lt;a href=&quot;http://localhost:8080/system/console/fsclassloader&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/fsclassloader&lt;/a&gt;) &lt;br/&gt;
Unfortunately these two consoles perform slightly differently:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;JSP Scripting Console - only clears out the JSPs and also destroys the JSP Runtime Context&lt;/li&gt;
	&lt;li&gt;FS ClassLoader - Clears out all script compiled files including JSP, Sightly, etc&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m thinking about doing the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Removing the JSP Scripting Console&lt;/li&gt;
	&lt;li&gt;Adding a method into the ClassLoaderWriter for scripting providers to register and unregister a listener for classloader cache flushes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Consolidating the functionality will make the use of the console clearer. With the callback, the JSP Script Engine (or any other scripting engine for that matter) could react to a cache clear and perform the appropriate actions. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12998524">SLING-5980</key>
            <summary>Duplicate Script Cache Clearing Functionality</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2016 16:25:19 +0000</created>
                <updated>Mon, 20 Mar 2017 22:14:40 +0000</updated>
                            <resolved>Fri, 17 Mar 2017 10:05:28 +0000</resolved>
                                    <version>Scripting JSP 2.1.8</version>
                    <version>Commons ClassLoader 1.3.8</version>
                    <version>File System ClassLoader 1.0.2</version>
                                    <fixVersion>Scripting JSP 2.3.0</fixVersion>
                    <fixVersion>Commons ClassLoader 1.4.0</fixVersion>
                    <fixVersion>File System ClassLoader 1.0.6</fixVersion>
                                    <component>Commons</component>
                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15429795" author="justinedelson" created="Sun, 21 Aug 2016 16:50:58 +0000"  >&lt;p&gt;Would a whiteboard make sense for the listener instead of a new method on the ClassLoaderWriter?&lt;/p&gt;</comment>
                            <comment id="15438497" author="cziegeler" created="Fri, 26 Aug 2016 05:45:01 +0000"  >&lt;p&gt;I think adding the registration to the CLWriter is fine, as the scripting needs to get this service already anyway - a whiteboard registration would be more flexible but I don&apos;t think we need it&lt;/p&gt;</comment>
                            <comment id="15439440" author="joerghoh" created="Fri, 26 Aug 2016 17:32:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt; Could you make the cache clear functionality available via JMX as well? Although it shouldn&apos;t be required, it&apos;s benefical to have it.&lt;/p&gt;</comment>
                            <comment id="15441634" author="klcodanr" created="Sat, 27 Aug 2016 14:24:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; a whiteboard would be the correct way to handle this, even if it is a somewhat limited use case. I&apos;m not sure I can come up with a case where you&apos;d need to listen for cache clears and not require the ClassLoaderWriter, but it seems prudent to follow the pattern versus creating a one-off.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; makes sense, I&apos;m also thinking the MBean could report basic statistics such as the number of files in cache and potentially listing the contents of the cache.&lt;/p&gt;</comment>
                            <comment id="15872332" author="klcodanr" created="Fri, 17 Feb 2017 19:11:37 +0000"  >&lt;p&gt;Added in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1783452&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Rev.1783452&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15907345" author="olli" created="Mon, 13 Mar 2017 12:11:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt;, is it &lt;b&gt;done&lt;/b&gt; for Scripting JSP?&lt;/p&gt;</comment>
                            <comment id="15907522" author="klcodanr" created="Mon, 13 Mar 2017 14:10:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - Yes, this is done in Scripting JSP.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32j3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>