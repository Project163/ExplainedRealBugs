{"url":"https://api.github.com/repos/yiisoft/yii2/issues/19743","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/19743/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/19743/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/19743/events","html_url":"https://github.com/yiisoft/yii2/issues/19743","id":1550205841,"node_id":"I_kwDOADRbGc5cZkOR","number":19743,"title":"BaseActiveRecord::isAttributeDirty breaking change >= 2.0.46","user":{"login":"everskies","id":17406493,"node_id":"MDQ6VXNlcjE3NDA2NDkz","avatar_url":"https://avatars.githubusercontent.com/u/17406493?v=4","gravatar_id":"","url":"https://api.github.com/users/everskies","html_url":"https://github.com/everskies","followers_url":"https://api.github.com/users/everskies/followers","following_url":"https://api.github.com/users/everskies/following{/other_user}","gists_url":"https://api.github.com/users/everskies/gists{/gist_id}","starred_url":"https://api.github.com/users/everskies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/everskies/subscriptions","organizations_url":"https://api.github.com/users/everskies/orgs","repos_url":"https://api.github.com/users/everskies/repos","events_url":"https://api.github.com/users/everskies/events{/privacy}","received_events_url":"https://api.github.com/users/everskies/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208443,"node_id":"MDU6TGFiZWwzMzIwODQ0Mw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:bug","name":"type:bug","color":"e102d8","default":false,"description":"Bug"}],"state":"closed","locked":false,"assignee":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/70","html_url":"https://github.com/yiisoft/yii2/milestone/70","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/70/labels","id":8362194,"node_id":"MI_kwDOADRbGc4Af5jS","number":70,"title":"2.0.48","description":"","creator":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":74,"state":"closed","created_at":"2022-08-29T19:57:57Z","updated_at":"2023-07-22T10:03:53Z","due_on":null,"closed_at":"2023-05-22T06:34:36Z"},"comments":3,"created_at":"2023-01-20T01:55:25Z","updated_at":"2023-06-29T20:26:06Z","closed_at":"2023-05-21T09:06:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nPlease use this issue tracker for bugs and feature requests only. In case you need support please use one of\r\nYii communities listed at https://github.com/yiisoft/yii2/wiki/communities\r\n-->\r\n\r\nI've noticed that #19272 modified the way that ActiveRecord `array` attributes are compared when marking them as dirty. \r\n\r\nThe newest version sorts the old and new array values recursively before comparing for equality.\r\n\r\nThis makes perfect sense for associative arrays, however the change didn't take lists into account. \r\n\r\nI assume that we should first check if the array is not associative by using `BaseArrayHelper::isIndexed` or similar, and sort only if it's associative (not indexed). Otherwise the above mentioned PR is a breaking change and should be noted\r\n\r\n### What steps will reproduce the problem?\r\n\r\nChanging the order of array elements for an ActiveRecord property doesn't mark the attribute as dirty.\r\n\r\n```php\r\n\r\n$someNewRecord->data = [1, 2];\r\n$someNewRecord->save();\r\n\r\n$someNewRecord->data = [2, 1];\r\n$someNewRecord->save();\r\n```\r\n\r\n### What is the expected result?\r\n\r\nThe `data` attribute should should be `[2, 1]`\r\n\r\n### What do you get instead?\r\nThe `data` attribute is `[1, 2]` (Didn't get committed to DB)\r\n\r\n### Additional info\r\n\r\n| Q                | A\r\n| ---------------- | ---\r\n| Yii version      | 2.0.47\r\n| PHP version      | 8.2\r\n| Operating system | Unix\r\n","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/19743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/19743/timeline","performed_via_github_app":null,"state_reason":"completed"}