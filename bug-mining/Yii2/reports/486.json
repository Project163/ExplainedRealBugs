{"url":"https://api.github.com/repos/yiisoft/yii2/issues/14289","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/14289/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/14289/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/14289/events","html_url":"https://github.com/yiisoft/yii2/issues/14289","id":235463799,"node_id":"MDU6SXNzdWUyMzU0NjM3OTk=","number":14289,"title":"resetSequence fail with an oci database","user":{"login":"vinpel","id":1699839,"node_id":"MDQ6VXNlcjE2OTk4Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1699839?v=4","gravatar_id":"","url":"https://api.github.com/users/vinpel","html_url":"https://github.com/vinpel","followers_url":"https://api.github.com/users/vinpel/followers","following_url":"https://api.github.com/users/vinpel/following{/other_user}","gists_url":"https://api.github.com/users/vinpel/gists{/gist_id}","starred_url":"https://api.github.com/users/vinpel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinpel/subscriptions","organizations_url":"https://api.github.com/users/vinpel/orgs","repos_url":"https://api.github.com/users/vinpel/repos","events_url":"https://api.github.com/users/vinpel/events{/privacy}","received_events_url":"https://api.github.com/users/vinpel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208443,"node_id":"MDU6TGFiZWwzMzIwODQ0Mw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:bug","name":"type:bug","color":"e102d8","default":false,"description":"Bug"},{"id":539670537,"node_id":"MDU6TGFiZWw1Mzk2NzA1Mzc=","url":"https://api.github.com/repos/yiisoft/yii2/labels/Codeception","name":"Codeception","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-06-13T07:43:10Z","updated_at":"2018-06-27T19:30:02Z","closed_at":"2018-06-27T19:30:02Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"\r\n### What steps will reproduce the problem?\r\nIn a codeception unit test :\r\n```php\r\n  public function _before()\r\n  {\r\n  $this->tester->haveFixtures([\r\n      'table_track' => [\r\n        'class' => TableTrackFixture::className(),\r\n      ],\r\n    ]);\r\n  }\r\n```\r\n### What is the expected result?\r\nThe goal is to clean table before doing my test.\r\nThe code work perfectly fine in a mySQL database.\r\n\r\n### What do you get instead?\r\n```bash\r\n1) BDDTrackImportTest: My big test\r\n Test  tests/unit/BDDTrackImportTest.php:myBigTest\r\n                                                                                                                                                                                                               \r\n  [yii\\db\\Exception] SQLSTATE[HY000]: General error: 911 OCIStmtExecute: ORA-00911: caractâ–’re non valide\r\n (/tmp/pear/download/PDO_OCI-1.0/oci_statement.c:142)\r\nThe SQL being executed was: DROP SEQUENCE \"table_track_SEQ\";CREATE SEQUENCE \"table_track_SEQ\" START WITH 1 INCREMENT BY 1 NOMAXVALUE NOCACHE\r\n                                                                                                                                                                                                               \r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/yiisoft/yii2/db/Command.php:856\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/yiisoft/yii2/test/ActiveFixture.php:118\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/yiisoft/yii2/test/ActiveFixture.php:78\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/tests/fixtures/TableTrack.php:18\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/yiisoft/yii2/test/FixtureTrait.php:95\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Module/Yii2.php:301\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Step.php:260\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Scenario.php:72\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/tests/_support/_generated/UnitTesterActions.php:41\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/tests/unit/components/BDDTrackImportTest.php:90\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Test/Unit.php:55\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/phpunit/phpunit/src/Framework/TestCase.php:764\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/phpunit/phpunit/src/Framework/TestResult.php:612\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/phpunit/phpunit/src/Framework/TestCase.php:724\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/phpunit/phpunit/src/Framework/TestSuite.php:722\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/PHPUnit/Runner.php:106\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/SuiteManager.php:157\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Codecept.php:184\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Codecept.php:153\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Command/Run.php:288\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/symfony/console/Command/Command.php:265\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/symfony/console/Application.php:826\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/symfony/console/Application.php:189\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/symfony/console/Application.php:120\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/src/Codeception/Application.php:103\r\n/385e665a-0314-47e9-a3d8-90c6fe83712a/vendor/codeception/base/codecept:36\r\n\r\n``` \r\n\r\n### Additional info\r\n\r\n\r\nfor me yii2 try to execute 2 query at the same time, and oracle don't like it\r\n\r\n\r\nI can reproduce the error  with this code :\r\n```php \r\npublic function actionDouble(){\r\n    Yii::$app->db->createCommand('DROP SEQUENCE \"table_track_SEQ\";CREATE SEQUENCE \"table_track_SEQ\" START WITH 1 INCREMENT BY 1 NOMAXVALUE NOCACHE')->execute();\r\n  }\r\n```\r\n\r\n| Q                | A\r\n| ---------------- | ---\r\n| Yii version      | 2.0.11.2\r\n| PHP version      |  PHP 5.6.25\r\n| Operating system | RHEL \r\n| Oracle version | Oracle Database 11g Release 11.2.0.4.0 - 64bit Production\r\n","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/14289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/14289/timeline","performed_via_github_app":null,"state_reason":"completed"}