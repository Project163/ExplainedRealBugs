{"url":"https://api.github.com/repos/yiisoft/yii2/issues/18590","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/18590/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/18590/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/18590/events","html_url":"https://github.com/yiisoft/yii2/issues/18590","id":848442148,"node_id":"MDU6SXNzdWU4NDg0NDIxNDg=","number":18590,"title":"UrlManager with enablePrettyUrl and zero rules spams \"Unable to use cache for URL manager\"","user":{"login":"PowerGamer1","id":8275897,"node_id":"MDQ6VXNlcjgyNzU4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/8275897?v=4","gravatar_id":"","url":"https://api.github.com/users/PowerGamer1","html_url":"https://github.com/PowerGamer1","followers_url":"https://api.github.com/users/PowerGamer1/followers","following_url":"https://api.github.com/users/PowerGamer1/following{/other_user}","gists_url":"https://api.github.com/users/PowerGamer1/gists{/gist_id}","starred_url":"https://api.github.com/users/PowerGamer1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PowerGamer1/subscriptions","organizations_url":"https://api.github.com/users/PowerGamer1/orgs","repos_url":"https://api.github.com/users/PowerGamer1/repos","events_url":"https://api.github.com/users/PowerGamer1/events{/privacy}","received_events_url":"https://api.github.com/users/PowerGamer1/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208443,"node_id":"MDU6TGFiZWwzMzIwODQ0Mw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:bug","name":"type:bug","color":"e102d8","default":false,"description":"Bug"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/62","html_url":"https://github.com/yiisoft/yii2/milestone/62","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/62/labels","id":6494306,"node_id":"MDk6TWlsZXN0b25lNjQ5NDMwNg==","number":62,"title":"2.0.42","description":"","creator":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":47,"state":"closed","created_at":"2021-03-01T21:26:17Z","updated_at":"2021-05-05T21:15:45Z","due_on":null,"closed_at":"2021-05-05T21:15:45Z"},"comments":3,"created_at":"2021-04-01T12:54:02Z","updated_at":"2021-04-10T10:02:27Z","closed_at":"2021-04-10T10:02:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When `UrlManager` is configured with enablePrettyUrl = true and has zero parsing rules the `UrlManager::cache` should never be accessed at all (if ruleset is empty UrlManager will never end up filling cache with anything but will try to read from it which it shouldn't and all those code places should be fixed by checking if ruleset is empty and if so there is no need to access cache at all).\r\n\r\nYet in such a case (`enablePrettyUrl` = true and empty ruleset) a warning \"Unable to use cache for URL manager\" is spammed in the logs. This is not good and should have been handled in one of the following ways:\r\n\r\n1. Make UrlManager::cache = null by default. When enablePrettyUrl = false (which is also a default) or rulseset is empty (which it so happens is also a default) then having UrlManager::cache = null by default would be a perfectly fine and maximally optimal configuration setting.\r\nThen, if `UrlManager::cache` is not null/false during `init()` and is not valid produce an ERROR unconditionally (alternatively do nothing and let an actual unchecked access to cache produce some PHP error exception later in the code). Yes, this is BC break, document it in the UPGRADE.md as was done in Yii2 2.0.33 !\r\n\r\n2. At least produce a warning only when the cache is being actually accessed (which in turn should only ever happen when ruleset is not empty).\r\n\r\nRelated to https://github.com/yiisoft/yii2/issues/17933 and https://github.com/yiisoft/yii2/pull/17940.","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/18590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/18590/timeline","performed_via_github_app":null,"state_reason":"completed"}