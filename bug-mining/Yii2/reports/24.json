{"url":"https://api.github.com/repos/yiisoft/yii2/issues/10993","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/10993/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/10993/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/10993/events","html_url":"https://github.com/yiisoft/yii2/issues/10993","id":137526555,"node_id":"MDU6SXNzdWUxMzc1MjY1NTU=","number":10993,"title":"yii\\rbac\\DbManager removeAllRules() no such column: ruleName","user":{"login":"nlrooat","id":16685667,"node_id":"MDQ6VXNlcjE2Njg1NjY3","avatar_url":"https://avatars.githubusercontent.com/u/16685667?v=4","gravatar_id":"","url":"https://api.github.com/users/nlrooat","html_url":"https://github.com/nlrooat","followers_url":"https://api.github.com/users/nlrooat/followers","following_url":"https://api.github.com/users/nlrooat/following{/other_user}","gists_url":"https://api.github.com/users/nlrooat/gists{/gist_id}","starred_url":"https://api.github.com/users/nlrooat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nlrooat/subscriptions","organizations_url":"https://api.github.com/users/nlrooat/orgs","repos_url":"https://api.github.com/users/nlrooat/repos","events_url":"https://api.github.com/users/nlrooat/events{/privacy}","received_events_url":"https://api.github.com/users/nlrooat/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208443,"node_id":"MDU6TGFiZWwzMzIwODQ0Mw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:bug","name":"type:bug","color":"e102d8","default":false,"description":"Bug"}],"state":"closed","locked":false,"assignee":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/16","html_url":"https://github.com/yiisoft/yii2/milestone/16","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/16/labels","id":1242959,"node_id":"MDk6TWlsZXN0b25lMTI0Mjk1OQ==","number":16,"title":"2.0.8","description":"","creator":{"login":"cebe","id":189796,"node_id":"MDQ6VXNlcjE4OTc5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/189796?v=4","gravatar_id":"","url":"https://api.github.com/users/cebe","html_url":"https://github.com/cebe","followers_url":"https://api.github.com/users/cebe/followers","following_url":"https://api.github.com/users/cebe/following{/other_user}","gists_url":"https://api.github.com/users/cebe/gists{/gist_id}","starred_url":"https://api.github.com/users/cebe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cebe/subscriptions","organizations_url":"https://api.github.com/users/cebe/orgs","repos_url":"https://api.github.com/users/cebe/repos","events_url":"https://api.github.com/users/cebe/events{/privacy}","received_events_url":"https://api.github.com/users/cebe/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":261,"state":"closed","created_at":"2015-08-05T22:18:21Z","updated_at":"2016-06-20T13:18:51Z","due_on":"2016-04-25T07:00:00Z","closed_at":"2016-04-28T15:04:35Z"},"comments":0,"created_at":"2016-03-01T09:59:10Z","updated_at":"2016-03-15T22:56:26Z","closed_at":"2016-03-15T22:56:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\n\nWhen calling removeAllRules() from yii\\rbac\\DbManager I get the following SQL error: \n`Exception 'yii\\db\\Exception' with message 'SQLSTATE[HY000]: General error: 1 no such column: ruleName\nFailed to prepare SQL: UPDATE`auth_item`SET`ruleName`=:qp0'\n\nin /usr/share/nginx/mme/www/vendor/yiisoft/yii2/db/Command.php:227\n\nError Info:\nArray\n(\n    [0] => HY000\n    [1] => 1\n    [2] => no such column: ruleName\n)\n\nStack trace:\n#0 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/db/Command.php(775): yii\\db\\Command->prepare(false)\n#1 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/rbac/DbManager.php(861): yii\\db\\Command->execute()\n#2 /usr/share/nginx/mme/www/console/controllers/MmeController.php(386): yii\\rbac\\DbManager->removeAllRules()\n#3 /usr/share/nginx/mme/www/console/controllers/MmeController.php(60): console\\controllers\\MmeController->deleteExistingData()\n#4 [internal function]: console\\controllers\\MmeController->actionRedisImport()\n#5 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/base/InlineAction.php(55): call_user_func_array(Array, Array)\n#6 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/base/Controller.php(151): yii\\base\\InlineAction->runWithParams(Array)\n#7 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/console/Controller.php(91): yii\\base\\Controller->runAction('redis-import', Array)\n#8 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/base/Module.php(455): yii\\console\\Controller->runAction('redis-import', Array)\n#9 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/console/Application.php(167): yii\\base\\Module->runAction('mme/redis-impor...', Array)\n#10 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/console/Application.php(143): yii\\console\\Application->runAction('mme/redis-impor...', Array)\n#11 /usr/share/nginx/mme/www/vendor/yiisoft/yii2/base/Application.php(375): yii\\console\\Application->handleRequest(Object(yii\\console\\Request))\n#12 /usr/share/nginx/mme/www/yii(27): yii\\base\\Application->run()\n#13 {main}`\n\nLooking at the structure of my auth_rule table I noticed the column is named rule_name instead of ruleName. Seems to be a mismatch between DbManager and the RBAC init migration (m140506_102106_rbac_init). My Yii2 version is 2.0.6. \n\nTo get things working I renamed ruleName to rule_name in removeAllRules().\n","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/10993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/10993/timeline","performed_via_github_app":null,"state_reason":"completed"}