{"url":"https://api.github.com/repos/yiisoft/yii2/issues/19899","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/19899/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/19899/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/19899/events","html_url":"https://github.com/yiisoft/yii2/issues/19899","id":1809645379,"node_id":"I_kwDOADRbGc5r3P9D","number":19899,"title":"ActiveDataProvider generates label values which are never used","user":{"login":"PowerGamer1","id":8275897,"node_id":"MDQ6VXNlcjgyNzU4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/8275897?v=4","gravatar_id":"","url":"https://api.github.com/users/PowerGamer1","html_url":"https://github.com/PowerGamer1","followers_url":"https://api.github.com/users/PowerGamer1/followers","following_url":"https://api.github.com/users/PowerGamer1/following{/other_user}","gists_url":"https://api.github.com/users/PowerGamer1/gists{/gist_id}","starred_url":"https://api.github.com/users/PowerGamer1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PowerGamer1/subscriptions","organizations_url":"https://api.github.com/users/PowerGamer1/orgs","repos_url":"https://api.github.com/users/PowerGamer1/repos","events_url":"https://api.github.com/users/PowerGamer1/events{/privacy}","received_events_url":"https://api.github.com/users/PowerGamer1/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208443,"node_id":"MDU6TGFiZWwzMzIwODQ0Mw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:bug","name":"type:bug","color":"e102d8","default":false,"description":"Bug"},{"id":33330247,"node_id":"MDU6TGFiZWwzMzMzMDI0Nw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/status:ready%20for%20adoption","name":"status:ready for adoption","color":"02e10c","default":false,"description":"Feel free to implement this issue."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/71","html_url":"https://github.com/yiisoft/yii2/milestone/71","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/71/labels","id":9418758,"node_id":"MI_kwDOADRbGc4Aj7gG","number":71,"title":"2.0.49","description":"","creator":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":33,"state":"closed","created_at":"2023-05-20T16:24:55Z","updated_at":"2023-08-29T14:18:03Z","due_on":null,"closed_at":"2023-08-29T14:18:03Z"},"comments":0,"created_at":"2023-07-18T10:27:04Z","updated_at":"2023-07-24T08:52:52Z","closed_at":"2023-07-24T08:52:51Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When `GridView` is based on `ActiveDataProvider` the `Model::generateAttributeLabel()` will be called even when the label is explicitly specified in `GridView::columns`.  The correct label value (from `GridView::columns`) is rendered but the incorrect label value is still being generated and never used. In such situation automatic label generation should not happen because it is pointless and also interferes with user intention of raising an error instead of generating values for labels that are not explicitly defined (by throwing exception in overridden `generateAttributeLabel()` method).\r\n\r\n### What steps will reproduce the problem?\r\n```PHP\r\n// Database table for this class has 2 attributes: \"attr1\" and \"attr2\".\r\nclass MyModel extends \\yii\\db\\ActiveRecord\r\n{\r\n    public function attributeLabels() {\r\n        return [\r\n            'attr1' => 'Label for attr1',\r\n            // Label for 'attr2' is NOT defined here\r\n        ];\r\n    }\r\n    public function generateAttributeLabel($name) {\r\n        throw new \\yii\\base\\InvalidArgumentException('Label not defined!');\r\n    }\r\n}\r\n\r\n$grid = new \\yii\\grid\\GridView([\r\n    'dataProvider' => new \\yii\\data\\ActiveDataProvider([\r\n        'query' => MyModel::find(),\r\n    ]),\r\n    'columns' => [\r\n        'attr1',\r\n        'attr2:text:Label for attr2', // Defines label for 'attr2'.\r\n    ],\r\n]);\r\n$grid->renderTableHeader();\r\n```\r\n### What is the expected result?\r\n`MyModel::generateAttributeLabel('attr2')` IS NEVER CALLED and exception is not thrown.\r\n\r\n### What do you get instead?\r\n`MyModel::generateAttributeLabel('attr2')` IS CALLED and throws exception.\r\n\r\n### Additional info\r\n\r\n| Q                | A\r\n| ---------------- | ---\r\n| Yii version      | 2.0.48.1","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/19899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/19899/timeline","performed_via_github_app":null,"state_reason":"completed"}