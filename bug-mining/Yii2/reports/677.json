{"url":"https://api.github.com/repos/yiisoft/yii2/issues/17979","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/17979/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/17979/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/17979/events","html_url":"https://github.com/yiisoft/yii2/issues/17979","id":602105563,"node_id":"MDU6SXNzdWU2MDIxMDU1NjM=","number":17979,"title":"Make Yii Migrate Commands clear","user":{"login":"mtangoo","id":1502872,"node_id":"MDQ6VXNlcjE1MDI4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1502872?v=4","gravatar_id":"","url":"https://api.github.com/users/mtangoo","html_url":"https://github.com/mtangoo","followers_url":"https://api.github.com/users/mtangoo/followers","following_url":"https://api.github.com/users/mtangoo/following{/other_user}","gists_url":"https://api.github.com/users/mtangoo/gists{/gist_id}","starred_url":"https://api.github.com/users/mtangoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtangoo/subscriptions","organizations_url":"https://api.github.com/users/mtangoo/orgs","repos_url":"https://api.github.com/users/mtangoo/repos","events_url":"https://api.github.com/users/mtangoo/events{/privacy}","received_events_url":"https://api.github.com/users/mtangoo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208865,"node_id":"MDU6TGFiZWwzMzIwODg2NQ==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:docs","name":"type:docs","color":"207de5","default":false,"description":"Documentation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/52","html_url":"https://github.com/yiisoft/yii2/milestone/52","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/52/labels","id":5240720,"node_id":"MDk6TWlsZXN0b25lNTI0MDcyMA==","number":52,"title":"2.0.35","description":"","creator":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":34,"state":"closed","created_at":"2020-03-26T15:33:46Z","updated_at":"2020-05-04T11:04:55Z","due_on":null,"closed_at":"2020-05-02T11:12:31Z"},"comments":2,"created_at":"2020-04-17T16:48:07Z","updated_at":"2020-04-18T08:53:39Z","closed_at":"2020-04-18T08:53:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Today I faced a disaster. I wanted to truncate every table in the database and start afresh so I checked if there exists such command\r\n\r\n```\r\n\r\n- migrate/create        Creates a new migration.\r\n- migrate/down          Downgrades the application by reverting old migrations.\r\n- migrate/fresh         Truncates the whole database and starts the migration from the beginning.\r\n- migrate/history       Displays the migration history.\r\n- migrate/mark          Modifies the migration history to the specified version.\r\n- migrate/new           Displays the un-applied new migrations.\r\n- migrate/redo          Redoes the last few migrations.\r\n- migrate/to            Upgrades or downgrades till the specified version.\r\n- migrate/up (default)  Upgrades the application by applying new migrations.\r\n\r\nTo see the detailed information about individual sub-commands, enter:\r\n\r\n  yii help <sub-command>\r\n```\r\n\r\nAnd voila, there is `fresh`\r\n\r\nSo I ran fresh and warning was\r\n\r\n```\r\n$ ./yii migrate/fresh\r\nYii Migration Tool (based on Yii v2.0.34)\r\n\r\nAre you sure you want to reset the database and start the migration from the beginning?\r\nAll data will be lost irreversibly! (yes|no) [no]:y\r\nForeign key xxxxx dropped.\r\nForeign key xxxx dropped.\r\n....\r\n```\r\n\r\nThat still sounded reseting the database which is what I wanted. Upon accepting, it dropped every single table.\r\n\r\nWell the command `fresh` is misleading. But that could be tolerable if command explanation said exactly what is is doing, namely dropping/deleting all tables and related constraints/entities\r\n\r\nMoreover warning in the command should clearly say that it is deleting everything (tables, constraints, everything). Data always implies rows in context of migrations. So it is very misleading.\r\n\r\nPlease make dangerous commands as explicit as possible.","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/17979/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/17979/timeline","performed_via_github_app":null,"state_reason":"completed"}