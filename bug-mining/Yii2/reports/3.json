{"url":"https://api.github.com/repos/yiisoft/yii2/issues/10462","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/10462/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/10462/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/10462/events","html_url":"https://github.com/yiisoft/yii2/issues/10462","id":123585228,"node_id":"MDU6SXNzdWUxMjM1ODUyMjg=","number":10462,"title":"Error when querying using LIKE with params","user":{"login":"sdlins","id":412490,"node_id":"MDQ6VXNlcjQxMjQ5MA==","avatar_url":"https://avatars.githubusercontent.com/u/412490?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlins","html_url":"https://github.com/sdlins","followers_url":"https://api.github.com/users/sdlins/followers","following_url":"https://api.github.com/users/sdlins/following{/other_user}","gists_url":"https://api.github.com/users/sdlins/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlins/subscriptions","organizations_url":"https://api.github.com/users/sdlins/orgs","repos_url":"https://api.github.com/users/sdlins/repos","events_url":"https://api.github.com/users/sdlins/events{/privacy}","received_events_url":"https://api.github.com/users/sdlins/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208865,"node_id":"MDU6TGFiZWwzMzIwODg2NQ==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:docs","name":"type:docs","color":"207de5","default":false,"description":"Documentation"},{"id":33330247,"node_id":"MDU6TGFiZWwzMzMzMDI0Nw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/status:ready%20for%20adoption","name":"status:ready for adoption","color":"02e10c","default":false,"description":"Feel free to implement this issue."},{"id":80755596,"node_id":"MDU6TGFiZWw4MDc1NTU5Ng==","url":"https://api.github.com/repos/yiisoft/yii2/labels/complexity:easy","name":"complexity:easy","color":"bfe5bf","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2015-12-23T01:24:06Z","updated_at":"2015-12-31T16:35:04Z","closed_at":"2015-12-26T11:07:24Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"``` php\n...\nclass Suite extends \\yii\\db\\ActiveRecord\n{\n   ...\n    public static function findByLocation(string $location) : array\n    {\n        return self::find()\n            ->innerJoin('hotel', 'suite.hotel_id=hotel.id')\n            ->innerJoin('pt_hotel_address', 'hotel.id=pt_hotel_address.hotel_id')\n            ->innerJoin('address', 'pt_hotel_address.address_id=address.id')\n            ->where(['like', 'address.district', ':location'], [':location' => $location])\n//            ->params([':location' => $location]) <--- it does not work too, same error. Same for addParams()\n            ->all();\n    }\n}\n```\n\nError:\n\n```\nDatabase Exception – yii\\db\\Exception\n\nSQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens\nThe SQL being executed was: SELECT `suite`.* FROM `suite` INNER JOIN `hotel` ON suite.hotel_id=hotel.id INNER JOIN `pt_hotel_address` ON hotel.id=pt_hotel_address.hotel_id INNER JOIN `address` ON pt_hotel_address.address_id=address.id WHERE `address`.`district` LIKE '%:location%'\nError Info: Array\n(\n    [0] => HY093\n    [1] => 0\n)\n↵\nCaused by: PDOException\n\nSQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens\n\nin /home/sidney/www/bitbucket/..../vendor/yiisoft/yii2/db/Command.php at line 837\n```\n\nShould not any of those tries do work?\n\nYii 2.0.6\nPHP 7.0\n","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/10462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/10462/timeline","performed_via_github_app":null,"state_reason":"completed"}