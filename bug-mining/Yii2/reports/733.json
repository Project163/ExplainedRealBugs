{"url":"https://api.github.com/repos/yiisoft/yii2/issues/16892","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/16892/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/16892/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/16892/events","html_url":"https://github.com/yiisoft/yii2/issues/16892","id":381861429,"node_id":"MDU6SXNzdWUzODE4NjE0Mjk=","number":16892,"title":"Validation error classes not applying to checkbox and radio when ActiveForm::$validationStateOn = self::VALIDATION_STATE_ON_INPUT","user":{"login":"karolls","id":8810985,"node_id":"MDQ6VXNlcjg4MTA5ODU=","avatar_url":"https://avatars.githubusercontent.com/u/8810985?v=4","gravatar_id":"","url":"https://api.github.com/users/karolls","html_url":"https://github.com/karolls","followers_url":"https://api.github.com/users/karolls/followers","following_url":"https://api.github.com/users/karolls/following{/other_user}","gists_url":"https://api.github.com/users/karolls/gists{/gist_id}","starred_url":"https://api.github.com/users/karolls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karolls/subscriptions","organizations_url":"https://api.github.com/users/karolls/orgs","repos_url":"https://api.github.com/users/karolls/repos","events_url":"https://api.github.com/users/karolls/events{/privacy}","received_events_url":"https://api.github.com/users/karolls/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208443,"node_id":"MDU6TGFiZWwzMzIwODQ0Mw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:bug","name":"type:bug","color":"e102d8","default":false,"description":"Bug"},{"id":38412944,"node_id":"MDU6TGFiZWwzODQxMjk0NA==","url":"https://api.github.com/repos/yiisoft/yii2/labels/status:to%20be%20verified","name":"status:to be verified","color":"fbca04","default":false,"description":"Needs to be reproduced and validated."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/55","html_url":"https://github.com/yiisoft/yii2/milestone/55","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/55/labels","id":5730965,"node_id":"MDk6TWlsZXN0b25lNTczMDk2NQ==","number":55,"title":"2.0.38","description":"","creator":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":31,"state":"closed","created_at":"2020-08-04T11:51:34Z","updated_at":"2020-09-14T21:55:41Z","due_on":null,"closed_at":"2020-09-14T21:55:41Z"},"comments":0,"created_at":"2018-11-17T13:03:55Z","updated_at":"2020-09-11T19:28:13Z","closed_at":"2020-09-11T19:28:13Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### What steps will reproduce the problem?\r\n\r\nIn yii\\widgets\\ActiveForm::radio() and yii\\widgets\\ActiveForm::checkbox() methods, code: \r\n\r\n```php\r\nif ($this->form->validationStateOn === ActiveForm::VALIDATION_STATE_ON_INPUT) {\r\n\t$this->addErrorClassIfNeeded($options);\r\n}\r\n\r\n$this->addAriaAttributes($options);\r\n$this->adjustLabelFor($options);\r\n```\r\n\r\nshould be at the beginning of those methods an not at the end. Otherwise input and label code is generated without particular css classes (ex. indicating error on those fields when \r\nActiveForm::VALIDATION_STATE_ON_INPUT which is used on yii2-bootstrap4/ActiveForm).\r\n\r\n### What is the expected result?\r\n\r\nValidation flags to be applied to inputs.\r\n\r\n### What do you get instead?\r\n\r\nWhen using yii2-bootstrap4/ActiveForm we have no validation state for checkbox and radio inputs \r\n\r\nin yii2-bootstrap4/ActiveForm:\r\npublic $validationStateOn = self::VALIDATION_STATE_ON_INPUT \r\n\r\nbut the yii\\widgets\\ActiveForm::radio() and yii\\widgets\\ActiveForm::checkbox() methods that are used generates the inputs code before setting particular flags and classes with the following code: \r\n\r\n```php\r\nif ($this->form->validationStateOn === ActiveForm::VALIDATION_STATE_ON_INPUT) {\r\n\t$this->addErrorClassIfNeeded($options);\r\n}\r\n\r\n$this->addAriaAttributes($options);\r\n$this->adjustLabelFor($options);\r\n```\r\nwhich is called after the input is generated\r\n\r\n### Additional info\r\n\r\n| Q                | A\r\n| ---------------- | ---\r\n| Yii version      | 2.0.15.1","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/16892/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/16892/timeline","performed_via_github_app":null,"state_reason":"completed"}