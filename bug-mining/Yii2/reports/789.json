{"url":"https://api.github.com/repos/yiisoft/yii2/issues/18637","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/18637/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/18637/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/18637/events","html_url":"https://github.com/yiisoft/yii2/issues/18637","id":878983549,"node_id":"MDU6SXNzdWU4Nzg5ODM1NDk=","number":18637,"title":"Relation named 'relation' literally","user":{"login":"Aresenka","id":38325864,"node_id":"MDQ6VXNlcjM4MzI1ODY0","avatar_url":"https://avatars.githubusercontent.com/u/38325864?v=4","gravatar_id":"","url":"https://api.github.com/users/Aresenka","html_url":"https://github.com/Aresenka","followers_url":"https://api.github.com/users/Aresenka/followers","following_url":"https://api.github.com/users/Aresenka/following{/other_user}","gists_url":"https://api.github.com/users/Aresenka/gists{/gist_id}","starred_url":"https://api.github.com/users/Aresenka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aresenka/subscriptions","organizations_url":"https://api.github.com/users/Aresenka/orgs","repos_url":"https://api.github.com/users/Aresenka/repos","events_url":"https://api.github.com/users/Aresenka/events{/privacy}","received_events_url":"https://api.github.com/users/Aresenka/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208865,"node_id":"MDU6TGFiZWwzMzIwODg2NQ==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:docs","name":"type:docs","color":"207de5","default":false,"description":"Documentation"},{"id":33330247,"node_id":"MDU6TGFiZWwzMzMzMDI0Nw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/status:ready%20for%20adoption","name":"status:ready for adoption","color":"02e10c","default":false,"description":"Feel free to implement this issue."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/64","html_url":"https://github.com/yiisoft/yii2/milestone/64","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/64/labels","id":6730315,"node_id":"MDk6TWlsZXN0b25lNjczMDMxNQ==","number":64,"title":"2.0.43","description":"","creator":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":58,"state":"closed","created_at":"2021-05-05T16:04:40Z","updated_at":"2021-08-09T17:39:37Z","due_on":null,"closed_at":"2021-08-09T17:39:37Z"},"comments":0,"created_at":"2021-05-07T13:14:32Z","updated_at":"2021-05-25T07:32:27Z","closed_at":"2021-05-25T07:32:16Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### What steps will reproduce the problem?\r\nUsing any ActiveRecord instanse, call \r\n`$model->getRelation('relation');`\r\n\r\n### What is the expected result?\r\nMethod returns ActiveQuery or null/throws an InvalidArgumentException\r\n\r\n### What do you get instead?\r\nPHP ArgumentCountError:\r\n`Too few arguments to function yii\\db\\BaseActiveRecord::getRelation(), 0 passed in /usr/src/app/vendor/yiisoft/yii2/db/BaseActiveRecord.php on line 1244 and at least 1 expected`\r\n\r\n### Additional info\r\nThis is because of BaseActiveRecord->getRelation have such code (line 1241):\r\n```\r\n\r\n    $getter = 'get' . $name;\r\n    try {\r\n        // the relation could be defined in a behavior\r\n        $relation = $this->$getter();\r\n    } catch (UnknownMethodException $e) {\r\n    ...\r\n```\r\nIn case of `$name === 'relation'`, it would be `$getter === 'getRelation'`, which would call `$this->getRelation()` itself without any attributes, and this is causing an PHP error.\r\nThis is not explained in documentation or somewhere that this name of relations is prohibited, so it was very confusing to see this error.\r\n\r\n| Q                | A\r\n| ---------------- | ---\r\n| Yii version      | 2.0.42.1\r\n| PHP version      |  7.4.18\r\n| Operating system | Alpine Linux 3.13\r\n","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/18637/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/18637/timeline","performed_via_github_app":null,"state_reason":"completed"}