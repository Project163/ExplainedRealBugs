{"url":"https://api.github.com/repos/yiisoft/yii2/issues/13824","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/13824/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/13824/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/13824/events","html_url":"https://github.com/yiisoft/yii2/issues/13824","id":216059145,"node_id":"MDU6SXNzdWUyMTYwNTkxNDU=","number":13824,"title":"\"yii message\" does not support extracting concatenated constant strings","user":{"login":"AlessandroMenti","id":1402524,"node_id":"MDQ6VXNlcjE0MDI1MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1402524?v=4","gravatar_id":"","url":"https://api.github.com/users/AlessandroMenti","html_url":"https://github.com/AlessandroMenti","followers_url":"https://api.github.com/users/AlessandroMenti/followers","following_url":"https://api.github.com/users/AlessandroMenti/following{/other_user}","gists_url":"https://api.github.com/users/AlessandroMenti/gists{/gist_id}","starred_url":"https://api.github.com/users/AlessandroMenti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlessandroMenti/subscriptions","organizations_url":"https://api.github.com/users/AlessandroMenti/orgs","repos_url":"https://api.github.com/users/AlessandroMenti/repos","events_url":"https://api.github.com/users/AlessandroMenti/events{/privacy}","received_events_url":"https://api.github.com/users/AlessandroMenti/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208443,"node_id":"MDU6TGFiZWwzMzIwODQ0Mw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:bug","name":"type:bug","color":"e102d8","default":false,"description":"Bug"},{"id":33330247,"node_id":"MDU6TGFiZWwzMzMzMDI0Nw==","url":"https://api.github.com/repos/yiisoft/yii2/labels/status:ready%20for%20adoption","name":"status:ready for adoption","color":"02e10c","default":false,"description":"Feel free to implement this issue."}],"state":"closed","locked":false,"assignee":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/yiisoft/yii2/milestones/23","html_url":"https://github.com/yiisoft/yii2/milestone/23","labels_url":"https://api.github.com/repos/yiisoft/yii2/milestones/23/labels","id":2082378,"node_id":"MDk6TWlsZXN0b25lMjA4MjM3OA==","number":23,"title":"2.0.13","description":"","creator":{"login":"cebe","id":189796,"node_id":"MDQ6VXNlcjE4OTc5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/189796?v=4","gravatar_id":"","url":"https://api.github.com/users/cebe","html_url":"https://github.com/cebe","followers_url":"https://api.github.com/users/cebe/followers","following_url":"https://api.github.com/users/cebe/following{/other_user}","gists_url":"https://api.github.com/users/cebe/gists{/gist_id}","starred_url":"https://api.github.com/users/cebe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cebe/subscriptions","organizations_url":"https://api.github.com/users/cebe/orgs","repos_url":"https://api.github.com/users/cebe/repos","events_url":"https://api.github.com/users/cebe/events{/privacy}","received_events_url":"https://api.github.com/users/cebe/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":342,"state":"closed","created_at":"2016-10-20T12:05:24Z","updated_at":"2018-03-21T16:57:33Z","due_on":"2017-07-09T07:00:00Z","closed_at":"2017-11-02T22:18:20Z"},"comments":0,"created_at":"2017-03-22T13:20:14Z","updated_at":"2017-06-20T22:26:03Z","closed_at":"2017-06-20T22:25:59Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### What steps will reproduce the problem?\r\n1. Install the [basic application template](https://github.com/yiisoft/yii2-app-basic) via Composer.\r\n2. In `views/site/index.php`, change the paragraph that starts at line 23 (the first \"Lorem Ipsum\" one) with:\r\n\r\n```\r\n<p><?= \\Yii::t('app', 'Lorem ipsum dolor sit amet, consectetur '\r\n. 'adipisicing elit, sed do eiusmod tempor incididunt ut '\r\n. 'labore et dolore magna aliqua. Ut enim ad minim veniam, '\r\n. 'quis nostrud exercitation ullamco laboris nisi ut '\r\n. 'aliquip ex ea commodo consequat. Duis aute irure dolor '\r\n. 'in reprehenderit in voluptate velit esse cillum dolore '\r\n. 'eu fugiat nulla pariatur.'); ?></p>\r\n```\r\n\r\n3. In `config/web.php`, add the internationalization (`i18n`) component in the `components` section:\r\n\r\n```\r\n'i18n' => [\r\n    'translations' => [\r\n        'app*' => [\r\n            'class' => 'yii\\i18n\\PhpMessageSource',\r\n            'basePath' => '@app/messages',\r\n            'sourceLanguage' => 'en-US',\r\n            'fileMap' => [\r\n                'app' => 'app.php',\r\n            ],\r\n        ],\r\n    ],\r\n],\r\n```\r\n\r\n4. Create a directory named `messages` in the root directory of the application.\r\n5. Open a terminal, `cd` to the root directory of the application. Run `./yii message/config-template messages/config.php` and then `./yii message messages/config.php`.\r\n6. Open `messages/de/app.php`.\r\n\r\n### What is the expected result?\r\nThe concatenated constant string passed as an argument to `Yii::t` in step 2 should be rendered in the message file as a single string, as follows:\r\n\r\n```\r\nreturn [\r\n    'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.' => '',\r\n];\r\n```\r\n\r\n### What do you get instead?\r\nOnly the first token of the string (the one before the first line break) is saved into `messages/de/app.php`:\r\n\r\n```\r\nreturn [\r\n    'Lorem ipsum dolor sit amet, consectetur ' => '',\r\n];\r\n```\r\n\r\n### Additional info\r\n\r\n| Q                | A\r\n| ---------------- | ---\r\n| Yii version      | `dev-master#0b88d30` (also tested with Yii 2.0.11.2)\r\n| PHP version      | 7.1.3\r\n| Operating system | Arch Linux\r\n","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/13824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/13824/timeline","performed_via_github_app":null,"state_reason":"completed"}