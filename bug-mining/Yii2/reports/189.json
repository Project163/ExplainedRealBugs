{"url":"https://api.github.com/repos/yiisoft/yii2/issues/13183","repository_url":"https://api.github.com/repos/yiisoft/yii2","labels_url":"https://api.github.com/repos/yiisoft/yii2/issues/13183/labels{/name}","comments_url":"https://api.github.com/repos/yiisoft/yii2/issues/13183/comments","events_url":"https://api.github.com/repos/yiisoft/yii2/issues/13183/events","html_url":"https://github.com/yiisoft/yii2/issues/13183","id":194790640,"node_id":"MDU6SXNzdWUxOTQ3OTA2NDA=","number":13183,"title":"Migrations history is not filtered based on enabled migrations namespaces","user":{"login":"djagya","id":2600431,"node_id":"MDQ6VXNlcjI2MDA0MzE=","avatar_url":"https://avatars.githubusercontent.com/u/2600431?v=4","gravatar_id":"","url":"https://api.github.com/users/djagya","html_url":"https://github.com/djagya","followers_url":"https://api.github.com/users/djagya/followers","following_url":"https://api.github.com/users/djagya/following{/other_user}","gists_url":"https://api.github.com/users/djagya/gists{/gist_id}","starred_url":"https://api.github.com/users/djagya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djagya/subscriptions","organizations_url":"https://api.github.com/users/djagya/orgs","repos_url":"https://api.github.com/users/djagya/repos","events_url":"https://api.github.com/users/djagya/events{/privacy}","received_events_url":"https://api.github.com/users/djagya/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":33208865,"node_id":"MDU6TGFiZWwzMzIwODg2NQ==","url":"https://api.github.com/repos/yiisoft/yii2/labels/type:docs","name":"type:docs","color":"207de5","default":false,"description":"Documentation"}],"state":"closed","locked":false,"assignee":{"login":"klimov-paul","id":1482054,"node_id":"MDQ6VXNlcjE0ODIwNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1482054?v=4","gravatar_id":"","url":"https://api.github.com/users/klimov-paul","html_url":"https://github.com/klimov-paul","followers_url":"https://api.github.com/users/klimov-paul/followers","following_url":"https://api.github.com/users/klimov-paul/following{/other_user}","gists_url":"https://api.github.com/users/klimov-paul/gists{/gist_id}","starred_url":"https://api.github.com/users/klimov-paul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klimov-paul/subscriptions","organizations_url":"https://api.github.com/users/klimov-paul/orgs","repos_url":"https://api.github.com/users/klimov-paul/repos","events_url":"https://api.github.com/users/klimov-paul/events{/privacy}","received_events_url":"https://api.github.com/users/klimov-paul/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"klimov-paul","id":1482054,"node_id":"MDQ6VXNlcjE0ODIwNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1482054?v=4","gravatar_id":"","url":"https://api.github.com/users/klimov-paul","html_url":"https://github.com/klimov-paul","followers_url":"https://api.github.com/users/klimov-paul/followers","following_url":"https://api.github.com/users/klimov-paul/following{/other_user}","gists_url":"https://api.github.com/users/klimov-paul/gists{/gist_id}","starred_url":"https://api.github.com/users/klimov-paul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klimov-paul/subscriptions","organizations_url":"https://api.github.com/users/klimov-paul/orgs","repos_url":"https://api.github.com/users/klimov-paul/repos","events_url":"https://api.github.com/users/klimov-paul/events{/privacy}","received_events_url":"https://api.github.com/users/klimov-paul/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":8,"created_at":"2016-12-10T20:07:45Z","updated_at":"2016-12-14T10:20:02Z","closed_at":"2016-12-14T10:20:02Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Lets say in our app we have a module (for example `app/modules/admin`) with namespaced migrations and our own namespaced migrations.\r\nIn the app config we have this block:\r\n```php\r\n'controllerMap' => [\r\n    'migrate' => [\r\n        'class' => 'yii\\console\\controllers\\MigrateController',\r\n        'migrationNamespaces' => ['app\\migrations'],\r\n        'migrationPath' => null, // disable all non-namespaced migrations\r\n    ],\r\n],\r\n```\r\nAnd applied migrations ordered by apply_time:\r\n- `app\\migrations\\M161210195701CreateUserTable`\r\n- `app\\migrations\\M161210195702CreateProfileTable`\r\n- `app\\modules\\admin\\migrations\\M161210195703CreateAccessTable`\r\n- `app\\modules\\admin\\migrations\\M161210195704CreatePostTable`\r\n- `app\\migrations\\M161210195705CreateRoleTable`\r\n- `app\\modules\\admin\\migrations\\M161210195706AddSomeColumn`\r\n\r\nI expect the `yii\\console\\controllers\\MigrateController::getMigrationHistory()` method, that's used by `migrate/history` and `migrate/down` commands, will filter the applied migrations by the migration namespaces.\r\n\r\nFor example:\r\n`./yii migrate/history` (where `migrationNamespaces` = `['app\\migrations']` from the app config) should return only migrations from the `app\\migrations` namespace:\r\n\r\n``` bash\r\n(datetime) app\\migrations\\M161210195701CreateUserTable\r\n(datetime) app\\migrations\\M161210195702CreateProfileTable\r\n(datetime) app\\migrations\\M161210195705CreateRoleTable\r\n```\r\n\r\nWhereas `./yii migrate/history --migrationNamespaces=app\\modules\\admin\\migrations` should return only migrations from the module namespace:\r\n\r\n```bash\r\n(datetime) app\\modules\\admin\\migrations\\M161210195703CreateAccessTable\r\n(datetime) app\\modules\\admin\\migrations\\M161210195704CreatePostTable\r\n(datetime) app\\modules\\admin\\migrations\\M161210195706AddSomeColumn\r\n```\r\n\r\n\r\nIsn't that the expected behavior?","closed_by":{"login":"samdark","id":47294,"node_id":"MDQ6VXNlcjQ3Mjk0","avatar_url":"https://avatars.githubusercontent.com/u/47294?v=4","gravatar_id":"","url":"https://api.github.com/users/samdark","html_url":"https://github.com/samdark","followers_url":"https://api.github.com/users/samdark/followers","following_url":"https://api.github.com/users/samdark/following{/other_user}","gists_url":"https://api.github.com/users/samdark/gists{/gist_id}","starred_url":"https://api.github.com/users/samdark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdark/subscriptions","organizations_url":"https://api.github.com/users/samdark/orgs","repos_url":"https://api.github.com/users/samdark/repos","events_url":"https://api.github.com/users/samdark/events{/privacy}","received_events_url":"https://api.github.com/users/samdark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yiisoft/yii2/issues/13183/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yiisoft/yii2/issues/13183/timeline","performed_via_github_app":null,"state_reason":"completed"}