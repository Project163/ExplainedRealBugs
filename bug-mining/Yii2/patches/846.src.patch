diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index 9b0594725..2f070d0a9 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -5,6 +5,7 @@ Yii Framework 2 Change Log
 ------------------------
 
 - Bug #19508: Fix wrong selection for boolean attributes in GridView (alnidok)
+- Bug #19517: Fix regression in `CompositeAuth::authenticate()` introduced in #19418 (WinterSilence)
 
 
 2.0.46 August 18, 2022
diff --git a/framework/filters/auth/CompositeAuth.php b/framework/filters/auth/CompositeAuth.php
index ee58276cf..81679ea11 100644
--- a/framework/filters/auth/CompositeAuth.php
+++ b/framework/filters/auth/CompositeAuth.php
@@ -8,6 +8,7 @@
 namespace yii\filters\auth;
 
 use Yii;
+use yii\base\Controller;
 use yii\base\InvalidConfigException;
 
 /**
@@ -70,11 +71,15 @@ class CompositeAuth extends AuthMethod
                 }
             }
 
-            if (isset($this->owner->action) && $auth->isActive($this->owner->action)) {
-                $identity = $auth->authenticate($user, $request, $response);
-                if ($identity !== null) {
-                    return $identity;
-                }
+            if (
+                $this->owner instanceof Controller
+                && (!isset($this->owner->action) || !$auth->isActive($this->owner->action))
+            ) {
+                continue;
+            }
+            $identity = $auth->authenticate($user, $request, $response);
+            if ($identity !== null) {
+                return $identity;
             }
         }
 
@@ -87,7 +92,7 @@ class CompositeAuth extends AuthMethod
     public function challenge($response)
     {
         foreach ($this->authMethods as $method) {
-            /* @var $method AuthInterface */
+            /** @var AuthInterface $method */
             $method->challenge($response);
         }
     }
diff --git a/tests/framework/filters/auth/CompositeAuthTest.php b/tests/framework/filters/auth/CompositeAuthTest.php
index 9476d9f99..6a9245c5e 100644
--- a/tests/framework/filters/auth/CompositeAuthTest.php
+++ b/tests/framework/filters/auth/CompositeAuthTest.php
@@ -91,9 +91,7 @@ class TestController extends Controller
         return [
             'authenticator' => [
                 'class' => CompositeAuth::className(),
-                'authMethods' => $this->authMethods ?: [
-                    TestAuth::className(),
-                ],
+                'authMethods' => $this->authMethods ?: [TestAuth::className()],
                 'optional' => $this->optional
             ],
         ];
@@ -257,12 +255,10 @@ class CompositeAuthTest extends \yiiunit\TestCase
     public function testCompositeAuth($authMethods, $actionId, $expectedAuth)
     {
         Yii::$app->request->headers->set('X-Api-Key', 'user1');
-        /** @var TestController $controller */
-        $controller = Yii::$app->createController('test')[0];
-        $controller->authMethods = $authMethods;
-        if( $expectedAuth)
+        $controller = new TestController('test', Yii::$app, ['authMethods' => $authMethods]);
+        if ($expectedAuth) {
             $this->assertEquals('success', $controller->run($actionId));
-        else {
+        } else {
             $this->expectException('yii\web\UnauthorizedHttpException');
             $controller->run($actionId);
         }
