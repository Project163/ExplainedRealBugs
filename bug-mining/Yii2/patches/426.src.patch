diff --git a/framework/web/Session.php b/framework/web/Session.php
index d770f282c..0db2388d6 100644
--- a/framework/web/Session.php
+++ b/framework/web/Session.php
@@ -925,8 +925,8 @@ class Session extends Component implements \IteratorAggregate, \ArrayAccess, \Co
     {
         if (isset($_SESSION) && $this->getIsActive()) {
             $this->frozenSessionData = $_SESSION;
+            $this->close();
         }
-        $this->close();
     }
 
     /**
@@ -935,8 +935,8 @@ class Session extends Component implements \IteratorAggregate, \ArrayAccess, \Co
      */
     protected function unfreeze()
     {
-        $this->open();
         if (null !== $this->frozenSessionData) {
+            $this->open();
             $_SESSION = $this->frozenSessionData;
             $this->frozenSessionData = null;
         }
diff --git a/tests/framework/web/session/AbstractDbSessionTest.php b/tests/framework/web/session/AbstractDbSessionTest.php
index e1381a723..e5315d573 100644
--- a/tests/framework/web/session/AbstractDbSessionTest.php
+++ b/tests/framework/web/session/AbstractDbSessionTest.php
@@ -98,6 +98,19 @@ abstract class AbstractDbSessionTest extends TestCase
         $this->assertEquals('', $session->readSession('test'));
     }
 
+    public function testInitializeWithConfig()
+    {
+        // should produce no exceptions
+        $session = new DbSession([
+            'useCookies' => true,
+        ]);
+
+        $session->writeSession('test', 'session data');
+        $this->assertEquals('session data', $session->readSession('test'));
+        $session->destroySession('test');
+        $this->assertEquals('', $session->readSession('test'));
+    }
+
     /**
      * @depends testReadWrite
      */
