diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index 62fa5a04d..5786abc65 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -4,6 +4,7 @@ Yii Framework 2 Change Log
 2.0.12 under development
 --------------------------
 
+- Bug #13848: `yii\di\Instance::ensure()` wasn't throwing an exception when `$type` is specified and `$reference` object isn't instance of `$type` (c-jonua)
 - Enh #13226: `yii cache` command now warns about the fact that it's not able to flush APC cache from console (samdark)
 - Bug #11719: Fixed `yii\db\Connection::$enableQueryCache` caused infinite loop when the same connection was used for `yii\caching\DbCache` (michaelarnauts)
 - Bug #10346: Fixed "DOMException: Invalid Character Error" in `yii\web\XmlResponseFormatter::buildXml()` (sasha-ch)
diff --git a/framework/di/Instance.php b/framework/di/Instance.php
index b4d6dea27..2300cc4e9 100644
--- a/framework/di/Instance.php
+++ b/framework/di/Instance.php
@@ -116,7 +116,12 @@ class Instance
                 $container = Yii::$container;
             }
             unset($reference['class']);
-            return $container->get($class, [], $reference);
+            $component = $container->get($class, [], $reference);
+            if ($type === null || $component instanceof $type) {
+                return $component;
+            } else {
+                throw new InvalidConfigException('Invalid data type: ' . $class .'. ' . $type . ' is expected.');
+            }
         } elseif (empty($reference)) {
             throw new InvalidConfigException('The required component is not specified.');
         }
diff --git a/tests/framework/di/InstanceTest.php b/tests/framework/di/InstanceTest.php
index 3e673dde2..a6689195e 100644
--- a/tests/framework/di/InstanceTest.php
+++ b/tests/framework/di/InstanceTest.php
@@ -112,7 +112,6 @@ class InstanceTest extends TestCase
         $this->expectExceptionMessage('"db" refers to a yii\db\Connection component. yii\base\Widget is expected.');
 
         Instance::ensure('db', 'yii\base\Widget', $container);
-        Instance::ensure(['class' => 'yii\db\Connection', 'dsn' => 'test'], 'yii\base\Widget', $container);
     }
 
     public function testExceptionInvalidDataType()
@@ -191,4 +190,12 @@ PHP
 
         Instance::__set_state([]);
     }
+
+    public function testExceptionInvalidDataTypeInArray()
+    {
+        $this->setExpectedException('yii\base\InvalidConfigException', 'Invalid data type: yii\db\Connection. yii\base\Widget is expected.');
+        Instance::ensure([
+            'class' => Connection::className(),
+        ], 'yii\base\Widget');
+    }
 }
