diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index 789b91017..1a986d7fc 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -19,6 +19,7 @@ Yii Framework 2 Change Log
 - Bug #18435: Change the check order whether an object is an implementation of `Arrayable` or `JsonSerializable` in `\yii\base\ArrayableTrait::toArray()` and `\yii\rest\Serializer::serialize()` (spell6inder)
 - Bug #18442: Fix calls with array access to strings (bizley)
 - Bug #18395: Fix regression in `yii\helpers\BaseArrayHelper::filter()` (allowing filtering arrays with numeric keys) (bizley)
+- Bug #18414: Fix `AssetManager::appendTimestamp()` not appending timestamp for website root in sub-directory (Isitar)
 - Bug #18365: Move quoting of table names to upper level to function `getSchemaMetadata()` in MSSQL driver to get clean names from schema (darkdef)
 
 
diff --git a/framework/web/View.php b/framework/web/View.php
index c77f59fba..3d2f1e6dd 100644
--- a/framework/web/View.php
+++ b/framework/web/View.php
@@ -492,8 +492,14 @@ class View extends \yii\base\View
 
         if (empty($depends)) {
             // register directly without AssetManager
-            if ($appendTimestamp && Url::isRelative($url) && ($timestamp = @filemtime(Yii::getAlias('@webroot/' . ltrim($url, '/'), false))) > 0) {
-                $url = $timestamp ? "$url?v=$timestamp" : $url;
+            if ($appendTimestamp && Url::isRelative($url)) {
+                $prefix = Yii::getAlias('@web');
+                $prefixLength = strlen($prefix);
+                $trimmedUrl = ltrim((substr($url, 0, $prefixLength) === $prefix) ? substr($url, $prefixLength) : $url, '/');
+                $timestamp = @filemtime(Yii::getAlias('@webroot/' . $trimmedUrl, false));
+                if ($timestamp > 0) {
+                    $url = $timestamp ? "$url?v=$timestamp" : $url;
+                }
             }
             if ($type === 'js') {
                 $this->jsFiles[$position][$key] = Html::jsFile($url, $options);
diff --git a/tests/framework/web/ViewTest.php b/tests/framework/web/ViewTest.php
index 10016a0b3..e9e6cc0f5 100644
--- a/tests/framework/web/ViewTest.php
+++ b/tests/framework/web/ViewTest.php
@@ -185,6 +185,24 @@ class ViewTest extends TestCase
         $html = $view->render('@yiiunit/data/views/layout.php', ['content' => 'content']);
         $this->assertRegExp($pattern, $html);
 
+        // test append timestamp when @web is prefixed in url
+        \Yii::setAlias('@web', '/test-app');
+        $view = new View();
+        $view->registerJsFile(\Yii::getAlias('@web/assetSources/js/jquery.js'),
+            ['depends' => 'yii\web\AssetBundle']); // <script src="/assetSources/js/jquery.js?v=1541056962"></script>
+        $html = $view->render('@yiiunit/data/views/layout.php', ['content' => 'content']);
+        $this->assertRegExp($pattern, $html);
+
+        // test append timestamp when @web has the same name as the asset-source folder
+        \Yii::setAlias('@web', '/assetSources/');
+        $view = new View();
+        $view->registerJsFile(\Yii::getAlias('@web/assetSources/js/jquery.js'),
+            ['depends' => 'yii\web\AssetBundle']); // <script src="/assetSources/js/jquery.js?v=1541056962"></script>
+        $html = $view->render('@yiiunit/data/views/layout.php', ['content' => 'content']);
+        $this->assertRegExp($pattern, $html);
+        // reset aliases
+        $this->setUpAliases();
+
         // won't be used AssetManager but the timestamp will be
         $view = new View();
         $view->registerJsFile('/assetSources/js/jquery.js'); // <script src="/assetSources/js/jquery.js?v=1541056962"></script>
@@ -331,6 +349,24 @@ class ViewTest extends TestCase
         $html = $view->render('@yiiunit/data/views/layout.php', ['content' => 'content']);
         $this->assertRegExp($pattern, $html);
 
+        // test append timestamp when @web is prefixed in url
+        \Yii::setAlias('@web', '/test-app');
+        $view = new View();
+        $view->registerCssFile(\Yii::getAlias('@web/assetSources/css/stub.css'),
+            ['depends' => 'yii\web\AssetBundle']); // <link href="/assetSources/css/stub.css?v=1541056962" rel="stylesheet" >
+        $html = $view->render('@yiiunit/data/views/layout.php', ['content' => 'content']);
+        $this->assertRegExp($pattern, $html);
+
+        // test append timestamp when @web has the same name as the asset-source folder
+        \Yii::setAlias('@web', '/assetSources/');
+        $view = new View();
+        $view->registerCssFile(\Yii::getAlias('@web/assetSources/css/stub.css'),
+            ['depends' => 'yii\web\AssetBundle']); // <link href="/assetSources/css/stub.css?v=1541056962" rel="stylesheet" >
+        $html = $view->render('@yiiunit/data/views/layout.php', ['content' => 'content']);
+        $this->assertRegExp($pattern, $html);
+        // reset aliases
+        $this->setUpAliases();
+
         // won't be used AssetManager but the timestamp will be
         $view = new View();
         $view->registerCssFile('/assetSources/css/stub.css'); // <link href="/assetSources/css/stub.css?v=1541056962" rel="stylesheet" >
