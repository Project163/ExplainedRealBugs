diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index f3392f543..2d8c2a5dd 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -55,6 +55,7 @@ Yii Framework 2 Change Log
 - Bug #13704: Fixed `yii\validators\UniqueValidator` to prefix attribute name with model's database table name (vladis84)
 - Enh #13823: Refactored migrations template (Kolyunya)
 - Enh #13845: `mt_rand()` is used instead of `rand()` in `yii\captcha\CaptchaAction` (kalessil)
+- Enh #13883: `\yii\data\SqlDataProvider` now provides automatic fallback for the case when `totalCount` is not specified (SamMousa)
 
 2.0.11.2 February 08, 2017
 --------------------------
diff --git a/framework/data/SqlDataProvider.php b/framework/data/SqlDataProvider.php
index 765ad7dd3..e3f93c43f 100644
--- a/framework/data/SqlDataProvider.php
+++ b/framework/data/SqlDataProvider.php
@@ -11,6 +11,7 @@ use Yii;
 use yii\base\InvalidConfigException;
 use yii\db\Connection;
 use yii\db\Expression;
+use yii\db\Query;
 use yii\di\Instance;
 
 /**
@@ -162,6 +163,6 @@ class SqlDataProvider extends BaseDataProvider
      */
     protected function prepareTotalCount()
     {
-        return 0;
+        return (new Query())->from(['sub' => "({$this->sql})"])->count('*', $this->db);
     }
 }
diff --git a/tests/framework/data/SqlDataProviderTest.php b/tests/framework/data/SqlDataProviderTest.php
new file mode 100644
index 000000000..0be188254
--- /dev/null
+++ b/tests/framework/data/SqlDataProviderTest.php
@@ -0,0 +1,35 @@
+<?php
+
+namespace yiiunit\framework\data;
+
+use yii\data\ArrayDataProvider;
+use yii\data\SqlDataProvider;
+use yiiunit\framework\db\DatabaseTestCase;
+use yiiunit\framework\db\sqlite\ConnectionTest;
+use yiiunit\TestCase;
+
+/**
+ * @group data
+ */
+class SqlDataProviderTest extends DatabaseTestCase
+{
+    protected $driverName = 'sqlite';
+
+    public function testGetModels()
+    {
+        $dataProvider = new SqlDataProvider([
+            'sql' => 'select * from `customer`',
+            'db' => $this->getConnection(),
+        ]);
+        $this->assertCount(3, $dataProvider->getModels());
+    }
+
+    public function testTotalCount()
+    {
+        $dataProvider = new SqlDataProvider([
+            'sql' => 'select * from `customer`',
+            'db' => $this->getConnection(),
+        ]);
+        $this->assertEquals(3, $dataProvider->getTotalCount());
+    }
+}
