diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index 13ffa6967..4a58881b1 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -4,7 +4,7 @@ Yii Framework 2 Change Log
 2.0.33 under development
 ------------------------
 
-- no changes in this release.
+- Bug #17829: `yii\helpers\ArrayHelper::filter` now correctly filters data when passing a filter with more than 2 levels (rhertogh)
 
 
 2.0.32 January 21, 2020
diff --git a/framework/UPGRADE.md b/framework/UPGRADE.md
index 7b69a2622..e5f14cc33 100644
--- a/framework/UPGRADE.md
+++ b/framework/UPGRADE.md
@@ -51,6 +51,54 @@ if you want to upgrade from version A to version C and there is
 version B between A and C, you need to follow the instructions
 for both A and B.
 
+Upgrade from Yii 2.0.32
+-----------------------
+
+* `yii\helpers\ArrayHelper::filter` now correctly filters data when passing a filter with more than 2 "levels",
+  e.g. `ArrayHelper::filter($myArray, ['A.B.C']`. Until Yii 2.0.32 all data after the 2nd level was returned,
+  please see the following example:
+  
+  ```php
+  $myArray = [
+      'A' => 1,
+      'B' => [
+          'C' => 1,
+          'D' => [
+              'E' => 1,
+              'F' => 2,
+          ]
+      ],
+  ];
+  ArrayHelper::filter($myArray, ['B.D.E']);
+  ```
+  
+  Before Yii 2.0.33 this would return
+  
+  ```php
+  [
+      'B' => [
+          'D' => [
+              'E' => 1,
+              'F' => 2, //Please note the unexpected inclusion of other elements
+          ],
+      ],
+  ]
+  ```
+
+  Since Yii 2.0.33 this returns
+
+  ```php
+  [
+      'B' => [
+          'D' => [
+              'E' => 1,
+          ],
+      ],
+  ]
+  ```
+  
+  Note: If you are only using up to 2 "levels" (e.g. `ArrayHelper::filter($myArray, ['A.B']`), this change has no impact.
+
 Upgrade from Yii 2.0.31
 -----------------------
 
diff --git a/framework/helpers/BaseArrayHelper.php b/framework/helpers/BaseArrayHelper.php
index c5deb6f3d..f692e7ec2 100644
--- a/framework/helpers/BaseArrayHelper.php
+++ b/framework/helpers/BaseArrayHelper.php
@@ -923,41 +923,49 @@ class BaseArrayHelper
     public static function filter($array, $filters)
     {
         $result = [];
-        $forbiddenVars = [];
-
-        foreach ($filters as $var) {
-            $keys = explode('.', $var);
-            $globalKey = $keys[0];
-            $localKey = isset($keys[1]) ? $keys[1] : null;
-
-            if ($globalKey[0] === '!') {
-                $forbiddenVars[] = [
-                    substr($globalKey, 1),
-                    $localKey,
-                ];
-                continue;
-            }
+        $excludeFilters = [];
 
-            if (!array_key_exists($globalKey, $array)) {
-                continue;
-            }
-            if ($localKey === null) {
-                $result[$globalKey] = $array[$globalKey];
+        foreach ($filters as $filter) {
+            if ($filter[0] === '!') {
+                $excludeFilters[] = substr($filter, 1);
                 continue;
             }
-            if (!isset($array[$globalKey][$localKey])) {
-                continue;
+
+            $nodeValue = $array; //set $array as root node
+            $keys = explode('.', $filter);
+            foreach ($keys as $key) {
+                if (!array_key_exists($key, $nodeValue)) {
+                    continue 2; //Jump to next filter
+                }
+                $nodeValue = $nodeValue[$key];
             }
-            if (!array_key_exists($globalKey, $result)) {
-                $result[$globalKey] = [];
+
+            //We've found a value now let's insert it
+            $resultNode = &$result;
+            foreach ($keys as $key) {
+                if (!array_key_exists($key, $resultNode)) {
+                    $resultNode[$key] = [];
+                }
+                $resultNode = &$resultNode[$key];
             }
-            $result[$globalKey][$localKey] = $array[$globalKey][$localKey];
+            $resultNode = $nodeValue;
         }
 
-        foreach ($forbiddenVars as $var) {
-            list($globalKey, $localKey) = $var;
-            if (array_key_exists($globalKey, $result)) {
-                unset($result[$globalKey][$localKey]);
+        foreach ($excludeFilters as $filter) {
+            $excludeNode = &$result;
+            $keys = explode('.', $filter);
+            $numNestedKeys = count($keys) - 1;
+            foreach ($keys as $i => $key) {
+                if (!array_key_exists($key, $excludeNode)) {
+                    continue 2; //Jump to next filter
+                }
+
+                if ($i < $numNestedKeys) {
+                    $excludeNode = &$excludeNode[$key];
+                } else {
+                    unset($excludeNode[$key]);
+                    break;
+                }
             }
         }
 
diff --git a/tests/framework/helpers/ArrayHelperTest.php b/tests/framework/helpers/ArrayHelperTest.php
index 0a60effcf..b620f50ba 100644
--- a/tests/framework/helpers/ArrayHelperTest.php
+++ b/tests/framework/helpers/ArrayHelperTest.php
@@ -1235,13 +1235,23 @@ class ArrayHelperTest extends TestCase
             'A' => [
                 'B' => 1,
                 'C' => 2,
+                'D' => [
+                    'E' => 1,
+                    'F' => 2,
+                ],
             ],
             'G' => 1,
         ];
+
+        //Include tests
         $this->assertEquals(ArrayHelper::filter($array, ['A']), [
             'A' => [
                 'B' => 1,
                 'C' => 2,
+                'D' => [
+                    'E' => 1,
+                    'F' => 2,
+                ],
             ],
         ]);
         $this->assertEquals(ArrayHelper::filter($array, ['A.B']), [
@@ -1249,27 +1259,83 @@ class ArrayHelperTest extends TestCase
                 'B' => 1,
             ],
         ]);
+        $this->assertEquals(ArrayHelper::filter($array, ['A.D']), [
+            'A' => [
+                'D' => [
+                    'E' => 1,
+                    'F' => 2,
+                ],
+            ],
+        ]);
+        $this->assertEquals(ArrayHelper::filter($array, ['A.D.E']), [
+            'A' => [
+                'D' => [
+                    'E' => 1,
+                ],
+            ],
+        ]);
+        $this->assertEquals(ArrayHelper::filter($array, ['A', 'G']), [
+            'A' => [
+                'B' => 1,
+                'C' => 2,
+                'D' => [
+                    'E' => 1,
+                    'F' => 2,
+                ],
+            ],
+            'G' => 1,
+        ]);
+        $this->assertEquals(ArrayHelper::filter($array, ['A.D.E', 'G']), [
+            'A' => [
+                'D' => [
+                    'E' => 1,
+                ],
+            ],
+            'G' => 1,
+        ]);
+
+        //Exclude (combined with include) tests
         $this->assertEquals(ArrayHelper::filter($array, ['A', '!A.B']), [
             'A' => [
                 'C' => 2,
+                'D' => [
+                    'E' => 1,
+                    'F' => 2,
+                ],
             ],
         ]);
         $this->assertEquals(ArrayHelper::filter($array, ['!A.B', 'A']), [
             'A' => [
                 'C' => 2,
+                'D' => [
+                    'E' => 1,
+                    'F' => 2,
+                ],
+            ],
+        ]);
+        $this->assertEquals(ArrayHelper::filter($array, ['A', '!A.D.E']), [
+            'A' => [
+                'B' => 1,
+                'C' => 2,
+                'D' => [
+                    'F' => 2,
+                ],
             ],
         ]);
-        $this->assertEquals(ArrayHelper::filter($array, ['A', 'G']), [
+        $this->assertEquals(ArrayHelper::filter($array, ['A', '!A.D']), [
             'A' => [
                 'B' => 1,
                 'C' => 2,
             ],
-            'G' => 1,
         ]);
+
+        //Non existing keys tests
         $this->assertEquals(ArrayHelper::filter($array, ['X']), []);
         $this->assertEquals(ArrayHelper::filter($array, ['X.Y']), []);
+        $this->assertEquals(ArrayHelper::filter($array, ['X.Y.Z']), []);
         $this->assertEquals(ArrayHelper::filter($array, ['A.X']), []);
 
+        //Values that evaluate to `true` with `empty()` tests
         $tmp = [
             'a' => 0,
             'b' => '',
