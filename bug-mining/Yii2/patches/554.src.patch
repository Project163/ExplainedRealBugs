diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index 447b27baa..a9d8a5b5b 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -5,6 +5,7 @@ Yii Framework 2 Change Log
 ------------------------
 
 - Bug #17094: Fixed response on 204 status. Now it is empty (GHopperMSK)
+- Bug #17098: Fixed message/extract when using message params returned from method calls (rugabarbo)
 
 
 2.0.16 January 30, 2019
diff --git a/framework/console/controllers/MessageController.php b/framework/console/controllers/MessageController.php
index c143f1830..1f859efd1 100644
--- a/framework/console/controllers/MessageController.php
+++ b/framework/console/controllers/MessageController.php
@@ -503,7 +503,7 @@ EOD;
         $buffer = [];
         $pendingParenthesisCount = 0;
 
-        foreach ($tokens as $i => $token) {
+        foreach ($tokens as $tokenIndex => $token) {
             // finding out translator call
             if ($matchedTokensCount < $translatorTokensCount) {
                 if ($this->tokensEqual($token, $translatorTokens[$matchedTokensCount])) {
@@ -558,11 +558,18 @@ EOD;
                     }
                 } elseif ($this->tokensEqual('(', $token)) {
                     // count beginning of function call, skipping translator beginning
-                    // Ensure that it's not the call of the object method. See https://github.com/yiisoft/yii2/issues/16828
-                    $previousTokenId = $tokens[$i - $matchedTokensCount - 1][0];
-                    if (in_array($previousTokenId, [T_OBJECT_OPERATOR, T_PAAMAYIM_NEKUDOTAYIM], true)) {
-                        $matchedTokensCount = 0;
-                        continue;
+
+                    // If we are not yet inside the translator, make sure that it's beginning of the real translator.
+                    // See https://github.com/yiisoft/yii2/issues/16828
+                    if ($pendingParenthesisCount === 0) {
+                        $previousTokenIndex = $tokenIndex - $matchedTokensCount - 1;
+                        if (is_array($tokens[$previousTokenIndex])) {
+                            $previousToken = $tokens[$previousTokenIndex][0];
+                            if (in_array($previousToken, [T_OBJECT_OPERATOR, T_PAAMAYIM_NEKUDOTAYIM], true)) {
+                                $matchedTokensCount = 0;
+                                continue;
+                            }
+                        }
                     }
 
                     if ($pendingParenthesisCount > 0) {
diff --git a/tests/framework/console/controllers/BaseMessageControllerTest.php b/tests/framework/console/controllers/BaseMessageControllerTest.php
index fa74f9072..87a186fce 100644
--- a/tests/framework/console/controllers/BaseMessageControllerTest.php
+++ b/tests/framework/console/controllers/BaseMessageControllerTest.php
@@ -593,6 +593,52 @@ abstract class BaseMessageControllerTest extends TestCase
         $this->assertArrayHasKey($positiveKey2, $messages);
     }
 
+    /**
+     * @see https://github.com/yiisoft/yii2/issues/17098
+     */
+    public function testMessageExtractActionWhenMessageUsingParamsReturnedFromMethodCalls()
+    {
+        $sourceFileContent = "
+            echo PHP_EOL, Yii::t('app', '1. Simple message');
+            echo PHP_EOL, Yii::t('app', '2. Message with simple param {val}', [
+                'val' => 'today',
+            ]);
+            echo PHP_EOL, Yii::t('app', '3. Message with param from function call {val}', [
+                'val' => date('Y-m-d'),
+            ]);
+            
+            // the next call creates the bug:
+            echo PHP_EOL, Yii::t('app', '4. Message with param from method call {val}', [
+                'val' => \Yii::\$app->formatter->asDecimal(23, 4),
+            ]);
+            
+            // after the bug:
+            echo PHP_EOL, Yii::t('app', '5. Simple message');
+            echo PHP_EOL, Yii::t('app', '6. Message with simple param {val}', [
+                'val' => 'today',
+            ]);
+            echo PHP_EOL, Yii::t('app', '7. Message with param from function call {val}', [
+                'val' => date('Y-m-d'),
+            ]);
+        ";
+        $this->createSourceFile($sourceFileContent);
+
+        $this->saveConfigFile($this->getConfig(['translator' => ['Yii::t']]));
+        $this->runMessageControllerAction('extract', [$this->configFileName]);
+
+        $messages = $this->loadMessages('app');
+
+        $this->assertEquals([
+            '1. Simple message' => '',
+            '2. Message with simple param {val}' => '',
+            '3. Message with param from function call {val}' => '',
+            '4. Message with param from method call {val}' => '',
+            '5. Simple message' => '',
+            '6. Message with simple param {val}' => '',
+            '7. Message with param from function call {val}' => '',
+        ], $messages);
+    }
+
     public function testMessagesSorting()
     {
         $category = 'test_order_category';
