diff --git a/framework/CHANGELOG.md b/framework/CHANGELOG.md
index 447a41892..f0bdfce36 100644
--- a/framework/CHANGELOG.md
+++ b/framework/CHANGELOG.md
@@ -52,6 +52,8 @@ Yii Framework 2 Change Log
 - Enh #14188: Add constants and function for sysexits(3) to `ConsoleHelper` (tom--, samdark, cebe)
 - Bug #14165: Set `_slave` of `Connection` to `false` instead of `null` in `close` method (rossoneri)
 - Bug #14423: Fixed `ArrayHelper::merge` behavior with null values for integer-keyed elements (dmirogin)
+- Bug #13779: Fixed `yii\db\ActiveRecord::joinWith()` unable to use relation defined via attached behavior (ElisDN, klimov-paul)
+- Enh #5786: Allowed to use custom constructors in ActiveRecord-based classes (ElisDN, klimov-paul)
 - Bug #14406: Fixed caching rules in `yii\web\UrlManager` with different ruleConfig configuration (dmirogin)
 - Chg #7936: Deprecate `yii\base\Object` in favor of `yii\base\BaseObject` for compatibility with PHP 7.2 (rob006, cebe, klimov-paul)
 - Bug #14318: Trigger `yiiActiveForm.events.afterValidateAttribute` after updating attribute  (dmirogin)
diff --git a/framework/UPGRADE.md b/framework/UPGRADE.md
index 7593a3bc6..a9edba85e 100644
--- a/framework/UPGRADE.md
+++ b/framework/UPGRADE.md
@@ -108,6 +108,9 @@ Upgrade from Yii 2.0.12
   require `"yiisoft/yii2": "~2.0.13"` in composer.json and change affected classes to extend from `yii\base\BaseObject`
   instead. It is not possible to allow Yii versions `<2.0.13` and be compatible with PHP 7.2 or higher.
 
+* A new method `public static function instance($refresh = false);` has been added to the `yii\db\ActiveRecordInterface`.
+  This method is implemented in the `yii\base\Model`, so the change only affects your code if you implement `ActiveRecordInterface`
+  in a class that does not extend `Model`.
 
 Upgrade from Yii 2.0.11
 -----------------------
diff --git a/framework/base/Model.php b/framework/base/Model.php
index 5c62dce13..ffbc2898c 100644
--- a/framework/base/Model.php
+++ b/framework/base/Model.php
@@ -54,9 +54,10 @@ use yii\validators\Validator;
  * @author Qiang Xue <qiang.xue@gmail.com>
  * @since 2.0
  */
-class Model extends Component implements IteratorAggregate, ArrayAccess, Arrayable
+class Model extends Component implements StaticInstanceInterface, IteratorAggregate, ArrayAccess, Arrayable
 {
     use ArrayableTrait;
+    use StaticInstanceTrait;
 
     /**
      * The name of the default scenario.
diff --git a/framework/base/StaticInstanceInterface.php b/framework/base/StaticInstanceInterface.php
new file mode 100644
index 000000000..480cbb151
--- /dev/null
+++ b/framework/base/StaticInstanceInterface.php
@@ -0,0 +1,27 @@
+<?php
+/**
+ * @link http://www.yiiframework.com/
+ * @copyright Copyright (c) 2008 Yii Software LLC
+ * @license http://www.yiiframework.com/license/
+ */
+
+namespace yii\base;
+
+/**
+ * StaticInstanceInterface is the interface for providing static instances to classes,
+ * which can be used to obtain class meta information that can not be expressed in static methods.
+ * For example: adjustments made by DI or behaviors reveal only at object level, but might be needed
+ * at class (static) level as well.
+ *
+ * @author Paul Klimov <klimov.paul@gmail.com>
+ * @since 2.0.13
+ */
+interface StaticInstanceInterface
+{
+    /**
+     * Returns static class instance, which can be used to obtain meta information.
+     * @param bool $refresh whether to re-create static instance even, if it is already cached.
+     * @return static class instance.
+     */
+    public static function instance($refresh = false);
+}
diff --git a/framework/base/StaticInstanceTrait.php b/framework/base/StaticInstanceTrait.php
new file mode 100644
index 000000000..0969324cb
--- /dev/null
+++ b/framework/base/StaticInstanceTrait.php
@@ -0,0 +1,41 @@
+<?php
+/**
+ * @link http://www.yiiframework.com/
+ * @copyright Copyright (c) 2008 Yii Software LLC
+ * @license http://www.yiiframework.com/license/
+ */
+
+namespace yii\base;
+
+use Yii;
+
+/**
+ * StaticInstanceTrait provides methods to satisfy [[StaticInstanceInterface]] interface.
+ *
+ * @see StaticInstanceInterface
+ *
+ * @author Paul Klimov <klimov.paul@gmail.com>
+ * @since 2.0.13
+ */
+trait StaticInstanceTrait
+{
+    /**
+     * @var static[] static instances in format: `[className => object]`
+     */
+    private static $_instances = [];
+
+
+    /**
+     * Returns static class instance, which can be used to obtain meta information.
+     * @param bool $refresh whether to re-create static instance even, if it is already cached.
+     * @return static class instance.
+     */
+    public static function instance($refresh = false)
+    {
+        $className = get_called_class();
+        if ($refresh || !isset(self::$_instances[$className])) {
+            self::$_instances[$className] = Yii::createObject($className);
+        }
+        return self::$_instances[$className];
+    }
+}
\ No newline at end of file
diff --git a/framework/data/ActiveDataProvider.php b/framework/data/ActiveDataProvider.php
index e3040089d..62ef012ab 100644
--- a/framework/data/ActiveDataProvider.php
+++ b/framework/data/ActiveDataProvider.php
@@ -176,8 +176,9 @@ class ActiveDataProvider extends BaseDataProvider
     {
         parent::setSort($value);
         if (($sort = $this->getSort()) !== false && $this->query instanceof ActiveQueryInterface) {
-            /* @var $model Model */
-            $model = new $this->query->modelClass();
+            /* @var $modelClass Model */
+            $modelClass = $this->query->modelClass;
+            $model = $modelClass::instance();
             if (empty($sort->attributes)) {
                 foreach ($model->attributes() as $attribute) {
                     $sort->attributes[$attribute] = [
diff --git a/framework/db/ActiveQuery.php b/framework/db/ActiveQuery.php
index d341def09..37ca52b8d 100644
--- a/framework/db/ActiveQuery.php
+++ b/framework/db/ActiveQuery.php
@@ -435,7 +435,9 @@ class ActiveQuery extends Query implements ActiveQueryInterface
         $join = $this->join;
         $this->join = [];
 
-        $model = new $this->modelClass();
+        /* @var $modelClass ActiveRecordInterface */
+        $modelClass = $this->modelClass;
+        $model = $modelClass::instance();
         foreach ($this->joinWith as $config) {
             list($with, $eagerLoading, $joinType) = $config;
             $this->joinWithRelations($model, $with, $joinType);
@@ -515,7 +517,9 @@ class ActiveQuery extends Query implements ActiveQueryInterface
                 } else {
                     $relation = $relations[$fullName];
                 }
-                $primaryModel = new $relation->modelClass();
+                /* @var $relationModelClass ActiveRecordInterface */
+                $relationModelClass = $relation->modelClass;
+                $primaryModel = $relationModelClass::instance();
                 $parent = $relation;
                 $prefix = $fullName;
                 $name = $childName;
diff --git a/framework/db/ActiveRecordInterface.php b/framework/db/ActiveRecordInterface.php
index b5a7539c6..dbe1828bd 100644
--- a/framework/db/ActiveRecordInterface.php
+++ b/framework/db/ActiveRecordInterface.php
@@ -7,6 +7,8 @@
 
 namespace yii\db;
 
+use yii\base\StaticInstanceInterface;
+
 /**
  * ActiveRecordInterface.
  *
@@ -14,7 +16,7 @@ namespace yii\db;
  * @author Carsten Brandt <mail@cebe.cc>
  * @since 2.0
  */
-interface ActiveRecordInterface
+interface ActiveRecordInterface extends StaticInstanceInterface
 {
     /**
      * Returns the primary key **name(s)** for this AR class.
diff --git a/framework/db/ActiveRelationTrait.php b/framework/db/ActiveRelationTrait.php
index 75ff4fb9d..3dfba4c45 100644
--- a/framework/db/ActiveRelationTrait.php
+++ b/framework/db/ActiveRelationTrait.php
@@ -178,7 +178,9 @@ trait ActiveRelationTrait
                 $relatedModel->populateRelation($this->inverseOf, $inverseRelation->multiple ? [$this->primaryModel] : $this->primaryModel);
             } else {
                 if (!isset($inverseRelation)) {
-                    $inverseRelation = (new $this->modelClass())->getRelation($this->inverseOf);
+                    /* @var $modelClass ActiveRecordInterface */
+                    $modelClass = $this->modelClass;
+                    $inverseRelation = $modelClass::instance()->getRelation($this->inverseOf);
                 }
                 $result[$i][$this->inverseOf] = $inverseRelation->multiple ? [$this->primaryModel] : $this->primaryModel;
             }
@@ -298,7 +300,13 @@ trait ActiveRelationTrait
         }
         $model = reset($models);
         /* @var $relation ActiveQueryInterface|ActiveQuery */
-        $relation = $model instanceof ActiveRecordInterface ? $model->getRelation($name) : (new $this->modelClass())->getRelation($name);
+        if ($model instanceof ActiveRecordInterface) {
+            $relation = $model->getRelation($name);
+        } else {
+            /* @var $modelClass ActiveRecordInterface */
+            $modelClass = $this->modelClass;
+            $relation = $modelClass::instance()->getRelation($name);
+        }
 
         if ($relation->multiple) {
             $buckets = $this->buildBuckets($primaryModels, $relation->link, null, null, false);
diff --git a/framework/db/BaseActiveRecord.php b/framework/db/BaseActiveRecord.php
index 7f17213c6..3682a766a 100644
--- a/framework/db/BaseActiveRecord.php
+++ b/framework/db/BaseActiveRecord.php
@@ -7,7 +7,7 @@
 
 namespace yii\db;
 
-use yii\base\Event;
+use Yii;
 use yii\base\InvalidCallException;
 use yii\base\InvalidConfigException;
 use yii\base\InvalidParamException;
@@ -1290,7 +1290,7 @@ abstract class BaseActiveRecord extends Model implements ActiveRecordInterface
             if (is_array($relation->via)) {
                 /* @var $viaClass ActiveRecordInterface */
                 /* @var $record ActiveRecordInterface */
-                $record = new $viaClass();
+                $record = Yii::createObject($viaClass);
                 foreach ($columns as $column => $value) {
                     $record->$column = $value;
                 }
@@ -1589,7 +1589,9 @@ abstract class BaseActiveRecord extends Model implements ActiveRecordInterface
                     } catch (InvalidParamException $e) {
                         return $this->generateAttributeLabel($attribute);
                     }
-                    $relatedModel = new $relation->modelClass();
+                    /* @var $modelClass ActiveRecordInterface */
+                    $modelClass = $relation->modelClass;
+                    $relatedModel = $modelClass::instance();
                 }
             }
 
@@ -1629,7 +1631,9 @@ abstract class BaseActiveRecord extends Model implements ActiveRecordInterface
                     } catch (InvalidParamException $e) {
                         return '';
                     }
-                    $relatedModel = new $relation->modelClass();
+                    /* @var $modelClass ActiveRecordInterface */
+                    $modelClass = $relation->modelClass;
+                    $relatedModel = $modelClass::instance();
                 }
             }
 
diff --git a/framework/grid/DataColumn.php b/framework/grid/DataColumn.php
index e40c7d58b..5a18f424b 100644
--- a/framework/grid/DataColumn.php
+++ b/framework/grid/DataColumn.php
@@ -145,12 +145,14 @@ class DataColumn extends Column
 
         if ($this->label === null) {
             if ($provider instanceof ActiveDataProvider && $provider->query instanceof ActiveQueryInterface) {
-                /* @var $model Model */
-                $model = new $provider->query->modelClass();
+                /* @var $modelClass Model */
+                $modelClass = $provider->query->modelClass;
+                $model = $modelClass::instance();
                 $label = $model->getAttributeLabel($this->attribute);
             } elseif ($provider instanceof ArrayDataProvider && $provider->modelClass !== null) {
-                /* @var $model Model */
-                $model = new $provider->modelClass();
+                /* @var $modelClass Model */
+                $modelClass = $provider->modelClass;
+                $model = $modelClass::instance();
                 $label = $model->getAttributeLabel($this->attribute);
             } elseif ($this->grid->filterModel !== null && $this->grid->filterModel instanceof Model) {
                 $label = $this->grid->filterModel->getAttributeLabel($this->attribute);
diff --git a/tests/data/ar/CustomerWithConstructor.php b/tests/data/ar/CustomerWithConstructor.php
new file mode 100644
index 000000000..5709e4251
--- /dev/null
+++ b/tests/data/ar/CustomerWithConstructor.php
@@ -0,0 +1,45 @@
+<?php
+
+namespace yiiunit\data\ar;
+
+/**
+ * CustomerWithConstructor
+ *
+ * @property int $id
+ * @property string $name
+ * @property string $email
+ * @property string $address
+ * @property int $status
+ *
+ * @property ProfileWithConstructor $profile
+ */
+class CustomerWithConstructor extends ActiveRecord
+{
+    public static function tableName()
+    {
+        return 'customer';
+    }
+
+    public function __construct($name, $email, $address)
+    {
+        $this->name = $name;
+        $this->email = $email;
+        $this->address = $address;
+        parent::__construct();
+    }
+
+    public static function instance($refresh = false)
+    {
+        return self::instantiate([]);
+    }
+
+    public static function instantiate($row)
+    {
+        return (new \ReflectionClass(static::className()))->newInstanceWithoutConstructor();
+    }
+
+    public function getProfile()
+    {
+        return $this->hasOne(ProfileWithConstructor::className(), ['id' => 'profile_id']);
+    }
+}
\ No newline at end of file
diff --git a/tests/data/ar/OrderItemWithConstructor.php b/tests/data/ar/OrderItemWithConstructor.php
new file mode 100644
index 000000000..be388ce9b
--- /dev/null
+++ b/tests/data/ar/OrderItemWithConstructor.php
@@ -0,0 +1,41 @@
+<?php
+
+namespace yiiunit\data\ar;
+
+/**
+ * OrderItemWithConstructor
+ *
+ * @property int $order_id
+ * @property int $item_id
+ * @property int $quantity
+ * @property string $subtotal
+ */
+class OrderItemWithConstructor extends ActiveRecord
+{
+    public static function tableName()
+    {
+        return 'order_item';
+    }
+
+    public function __construct($item_id, $quantity)
+    {
+        $this->item_id = $item_id;
+        $this->quantity = $quantity;
+        parent::__construct();
+    }
+
+    public static function instance($refresh = false)
+    {
+        return self::instantiate([]);
+    }
+
+    public static function instantiate($row)
+    {
+        return (new \ReflectionClass(static::className()))->newInstanceWithoutConstructor();
+    }
+
+    public function getOrder()
+    {
+        return $this->hasOne(OrderWithConstructor::className(), ['id' => 'order_id']);
+    }
+}
\ No newline at end of file
diff --git a/tests/data/ar/OrderWithConstructor.php b/tests/data/ar/OrderWithConstructor.php
new file mode 100644
index 000000000..e5fc05852
--- /dev/null
+++ b/tests/data/ar/OrderWithConstructor.php
@@ -0,0 +1,56 @@
+<?php
+
+namespace yiiunit\data\ar;
+
+/**
+ * OrderWithConstructor
+ *
+ * @property int $id
+ * @property int $customer_id
+ * @property int $created_at
+ * @property string $total
+ *
+ * @property OrderItemWithConstructor $orderItems
+ * @property CustomerWithConstructor $customer
+ * @property CustomerWithConstructor $customerJoinedWithProfile
+ */
+class OrderWithConstructor extends ActiveRecord
+{
+    public static function tableName()
+    {
+        return 'order';
+    }
+
+    public function __construct($id)
+    {
+        $this->id = $id;
+        $this->created_at = time();
+        parent::__construct();
+    }
+
+    public static function instance($refresh = false)
+    {
+        return self::instantiate([]);
+    }
+
+    public static function instantiate($row)
+    {
+        return (new \ReflectionClass(static::className()))->newInstanceWithoutConstructor();
+    }
+
+    public function getCustomer()
+    {
+        return $this->hasOne(CustomerWithConstructor::className(), ['id' => 'customer_id']);
+    }
+
+    public function getCustomerJoinedWithProfile()
+    {
+        return $this->hasOne(CustomerWithConstructor::className(), ['id' => 'customer_id'])
+            ->joinWith('profile');
+    }
+
+    public function getOrderItems()
+    {
+        return $this->hasMany(OrderItemWithConstructor::className(), ['order_id' => 'id'])->inverseOf('order');
+    }
+}
\ No newline at end of file
diff --git a/tests/data/ar/ProfileWithConstructor.php b/tests/data/ar/ProfileWithConstructor.php
new file mode 100644
index 000000000..d94a122e3
--- /dev/null
+++ b/tests/data/ar/ProfileWithConstructor.php
@@ -0,0 +1,33 @@
+<?php
+
+namespace yiiunit\data\ar;
+
+/**
+ * ProfileWithConstructor
+ *
+ * @property int $id
+ * @property string $description
+ */
+class ProfileWithConstructor extends ActiveRecord
+{
+    public static function tableName()
+    {
+        return 'profile';
+    }
+
+    public function __construct($description)
+    {
+        $this->description = $description;
+        parent::__construct();
+    }
+
+    public static function instance($refresh = false)
+    {
+        return self::instantiate([]);
+    }
+
+    public static function instantiate($row)
+    {
+        return (new \ReflectionClass(static::className()))->newInstanceWithoutConstructor();
+    }
+}
\ No newline at end of file
diff --git a/tests/framework/base/StaticInstanceTraitTest.php b/tests/framework/base/StaticInstanceTraitTest.php
new file mode 100644
index 000000000..15247bdc9
--- /dev/null
+++ b/tests/framework/base/StaticInstanceTraitTest.php
@@ -0,0 +1,22 @@
+<?php
+
+namespace yiiunit\framework\base;
+
+use yiiunit\data\base\Singer;
+use yiiunit\data\base\Speaker;
+use yiiunit\TestCase;
+
+class StaticInstanceTraitTest extends TestCase
+{
+    public function testInstance()
+    {
+        $speakerModel = Speaker::instance();
+        $this->assertTrue($speakerModel instanceof Speaker);
+
+        $singerModel = Singer::instance();
+        $this->assertTrue($singerModel instanceof Singer);
+
+        $this->assertSame($speakerModel, Speaker::instance());
+        $this->assertNotSame($speakerModel, Speaker::instance(true));
+    }
+}
\ No newline at end of file
diff --git a/tests/framework/db/ActiveRecordTest.php b/tests/framework/db/ActiveRecordTest.php
index 6f8e95d61..989644d13 100644
--- a/tests/framework/db/ActiveRecordTest.php
+++ b/tests/framework/db/ActiveRecordTest.php
@@ -15,15 +15,19 @@ use yiiunit\data\ar\Cat;
 use yiiunit\data\ar\Category;
 use yiiunit\data\ar\Customer;
 use yiiunit\data\ar\CustomerQuery;
+use yiiunit\data\ar\CustomerWithConstructor;
 use yiiunit\data\ar\Document;
 use yiiunit\data\ar\Dog;
 use yiiunit\data\ar\Item;
 use yiiunit\data\ar\NullValues;
 use yiiunit\data\ar\Order;
 use yiiunit\data\ar\OrderItem;
+use yiiunit\data\ar\OrderItemWithConstructor;
 use yiiunit\data\ar\OrderItemWithNullFK;
+use yiiunit\data\ar\OrderWithConstructor;
 use yiiunit\data\ar\OrderWithNullFK;
 use yiiunit\data\ar\Profile;
+use yiiunit\data\ar\ProfileWithConstructor;
 use yiiunit\data\ar\Type;
 use yiiunit\framework\ar\ActiveRecordTestTrait;
 use yiiunit\framework\db\cubrid\ActiveRecordTest as CubridActiveRecordTest;
@@ -552,6 +556,9 @@ abstract class ActiveRecordTest extends DatabaseTestCase
         $this->assertEquals(2, $orders[0]->items[0]->category->id);
     }
 
+    /**
+     * @depends testJoinWith
+     */
     public function testJoinWithAndScope()
     {
         // hasOne inner join
@@ -1552,4 +1559,46 @@ abstract class ActiveRecordTest extends DatabaseTestCase
             3 => 'user3 in profile customer 3',
         ], $result);
     }
+
+    /**
+     * @see https://github.com/yiisoft/yii2/issues/5786
+     *
+     * @depends testJoinWith
+     */
+    public function testFindWithConstructors()
+    {
+        /** @var OrderWithConstructor[] $orders */
+        $orders = OrderWithConstructor::find()
+            ->with(['customer.profile', 'orderItems'])
+            ->orderBy('id')
+            ->all();
+
+        $this->assertCount(3, $orders);
+        $order = $orders[0];
+        $this->assertEquals(1, $order->id);
+
+        $this->assertNotNull($order->customer);
+        $this->assertInstanceOf(CustomerWithConstructor::className(), $order->customer);
+        $this->assertEquals(1, $order->customer->id);
+
+        $this->assertNotNull($order->customer->profile);
+        $this->assertInstanceOf(ProfileWithConstructor::className(), $order->customer->profile);
+        $this->assertEquals(1, $order->customer->profile->id);
+
+        $this->assertNotNull($order->customerJoinedWithProfile);
+        $customerWithProfile = $order->customerJoinedWithProfile;
+        $this->assertInstanceOf(CustomerWithConstructor::className(), $customerWithProfile);        
+        $this->assertEquals(1, $customerWithProfile->id);
+
+        $this->assertNotNull($customerProfile = $customerWithProfile->profile);
+        $this->assertInstanceOf(ProfileWithConstructor::className(), $customerProfile);
+        $this->assertEquals(1, $customerProfile->id);
+
+        $this->assertCount(2, $order->orderItems);
+
+        $item = $order->orderItems[0];
+        $this->assertInstanceOf(OrderItemWithConstructor::className(), $item);
+
+        $this->assertEquals(1, $item->item_id);
+    }
 }
