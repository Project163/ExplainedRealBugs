<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:53:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COLLECTIONS-239] In LinkIterator hasPrevious() is not working properly for the first entry</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-239</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In hasPrevious() method of LinkIterator &apos;next&apos; field is used, that is not correct  - method returns &apos;true&apos; for the first entry. &apos;last&apos; field should be used insted.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP, jdk-1.5.0_02&lt;/p&gt;</environment>
        <key id="12360661">COLLECTIONS-239</key>
            <summary>In LinkIterator hasPrevious() is not working properly for the first entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mic">Michael Pavlov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jan 2007 09:26:36 +0000</created>
                <updated>Sat, 27 Apr 2013 21:25:47 +0000</updated>
                            <resolved>Wed, 26 Mar 2008 05:36:22 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Iterator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12468439" author="bayard" created="Mon, 29 Jan 2007 23:18:32 +0000"  >&lt;p&gt;Looking at trunk, the actual code is:&lt;/p&gt;

&lt;p&gt;            return (next.before != parent.header);&lt;/p&gt;

&lt;p&gt;Not the most semantically clear, but the following test appears to pass quite happily:&lt;/p&gt;

&lt;p&gt;    // &lt;a href=&quot;http://issues.apache.org/jira/browse/COLLECTIONS-239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/COLLECTIONS-239&lt;/a&gt;&lt;br/&gt;
    public void testCollections239() {&lt;br/&gt;
        LinkedMap map = new LinkedMap();&lt;br/&gt;
        map.put(&quot;1&quot;, &quot;1&quot;);&lt;br/&gt;
        map.put(&quot;2&quot;, &quot;2&quot;);&lt;br/&gt;
        map.put(&quot;3&quot;, &quot;3&quot;);&lt;br/&gt;
        map.put(&quot;4&quot;, &quot;4&quot;);&lt;/p&gt;

&lt;p&gt;        OrderedIterator itr = (OrderedIterator) map.values().iterator();&lt;br/&gt;
        assertFalse( itr.hasPrevious() );&lt;br/&gt;
        for( int i=0; i &amp;lt; 4; i++) &lt;/p&gt;
{
            assertTrue( itr.hasNext() );
            Object ignore = itr.next();
            assertTrue( itr.hasPrevious() );
        }

&lt;p&gt;        assertFalse( itr.hasNext() );&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;So I think this is resolvable as &quot;cannot reproduce&quot;. Do you have a test case that fails?&lt;/p&gt;</comment>
                            <comment id="12470280" author="bayard" created="Mon, 5 Feb 2007 17:12:17 +0000"  >&lt;p&gt;Going ahead with the &apos;cannot reproduce&apos;. Please feel free to reopen the issue.&lt;/p&gt;</comment>
                            <comment id="12470528" author="mic" created="Tue, 6 Feb 2007 11:33:13 +0000"  >&lt;p&gt;Why OrderedIterator should rely on &apos;next&apos; field? Current(last returned) entry is in &apos;last&apos; field. &lt;br/&gt;
Semantically in java.util.Iterator hasNext() referes to last returned value.&lt;br/&gt;
My use case is: I need to iterate through map values in JSP and construct a table with command to move up &amp;amp;down. My code is:&lt;br/&gt;
  for (OrderedIterator I = (OrderedIterator)map.values().iterator(); I.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
  {&lt;br/&gt;
     /* next() is the only method that can return current value, but it moves iterator cursor to the next entry&lt;br/&gt;
     so hasPrevious returns true. In order to get it right i need to remember it first in separate field like these*/&lt;br/&gt;
   // boolean hasPrevious = I.hasPrevious();&lt;br/&gt;
     String s = (String) I.next();%&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;%=s%&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;%if(I.hasPrevious())&lt;/p&gt;
{%&amp;gt;&amp;lt;input type=&quot;button&quot; value=&quot;UP&quot; onClick=&quot;...&quot;/&amp;gt;&amp;lt;%}
&lt;p&gt;%&amp;gt;&amp;lt;/td&amp;gt;...&amp;lt;/tr&amp;gt;&amp;lt;%&lt;/p&gt;

&lt;p&gt;  }&lt;/p&gt;</comment>
                            <comment id="12470534" author="mic" created="Tue, 6 Feb 2007 11:51:41 +0000"  >&lt;p&gt;Semantically hasNext() referes to last returned value (&apos;last&apos; field) (in java.util.Iterator ). &lt;br/&gt;
Why hasPrevious() should use &apos;next&apos; field (in LinkIterator)?&lt;/p&gt;</comment>
                            <comment id="12470725" author="bayard" created="Tue, 6 Feb 2007 20:12:33 +0000"  >&lt;p&gt;I think I see. Your report is that hasPrevious() should still return false after the first element.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a unit test that shows that this is a problem. Thanks for reopening.&lt;/p&gt;</comment>
                            <comment id="12470730" author="bayard" created="Tue, 6 Feb 2007 20:27:16 +0000"  >&lt;p&gt;(grr&apos;s at firefox 2 for losing a long reply).&lt;/p&gt;

&lt;p&gt;I&apos;m still thinking we should resolve this as not to be fixed. Here&apos;s why:&lt;/p&gt;

&lt;p&gt;OrderedIterator oi = ...;&lt;br/&gt;
oi.next();&lt;br/&gt;
oi.previous();&lt;br/&gt;
oi.next();&lt;br/&gt;
oi.previous();&lt;br/&gt;
// back at the start&lt;/p&gt;

&lt;p&gt;If hasPrevious() was to return false after moving passed the first element, then the above would not be possible. Looking at the Javadoc for OrderedIterator, the previous() method does need to indicate that movement happens, and the class Javadoc could do with a note on this subject - that hasPrevious() returns true after calling the first next().&lt;/p&gt;</comment>
                            <comment id="12582131" author="bayard" created="Wed, 26 Mar 2008 05:36:22 +0000"  >&lt;p&gt;Closing this as WONTFIX. I think it&apos;s burnt into the semantics of how the class works and this is a side-effect.&lt;/p&gt;</comment>
                            <comment id="13423416" author="hudson" created="Thu, 26 Jul 2012 20:11:49 +0000"  >&lt;p&gt;Integrated in commons-collections #68 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/68/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/commons-collections/68/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-239&quot; title=&quot;In LinkIterator hasPrevious() is not working properly for the first entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-239&quot;&gt;&lt;del&gt;COLLECTIONS-239&lt;/del&gt;&lt;/a&gt; Use of generic Equator in EqualPredicate. (Revision 1366174)&lt;/p&gt;

&lt;p&gt;     Result = UNSTABLE&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366174&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/changes/changes.xml&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/EqualPredicate.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13423541" author="hudson" created="Thu, 26 Jul 2012 23:07:49 +0000"  >&lt;p&gt;Integrated in commons-collections #69 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/69/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/commons-collections/69/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-239&quot; title=&quot;In LinkIterator hasPrevious() is not working properly for the first entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-239&quot;&gt;&lt;del&gt;COLLECTIONS-239&lt;/del&gt;&lt;/a&gt; to keep backwards compatibility, do not use DefaultEquator in case no equator is specific, but rather use the original equals method. (Revision 1366185)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366185&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/EqualPredicate.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12365343">COLLECTIONS-246</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12350491" name="COLLECTIONS-239-test.patch" size="1568" author="bayard" created="Tue, 6 Feb 2007 20:12:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sijb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164480</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>