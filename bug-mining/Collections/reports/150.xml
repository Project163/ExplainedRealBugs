<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:54:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COLLECTIONS-602] Improve efficiency of DefaultedMap.get</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-602</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The current implementation of &lt;tt&gt;org.apache.commons.collections4.map.DefaultedMap.get()&lt;/tt&gt; is inefficient since it always require two map lookups. There is no need to check map.containsKey() every time. I would suggest implementing this method similar to the way that Java 8 does with &lt;tt&gt;Map.getOrDefault()&lt;/tt&gt;. My proposed implementation would be something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; V get(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key) {
    V v;
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((v = map.get(key) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) || map.containsKey(key)) ? v : value.transform((K) key);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It can be further optimized to not even call map.containsKey() if map is known to not contain null values.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13073447">COLLECTIONS-602</key>
            <summary>Improve efficiency of DefaultedMap.get</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="jmark">John Mark</reporter>
                        <labels>
                            <label>help-wanted</label>
                    </labels>
                <created>Fri, 19 May 2017 14:23:36 +0000</created>
                <updated>Wed, 24 May 2017 09:35:28 +0000</updated>
                            <resolved>Wed, 24 May 2017 09:35:28 +0000</resolved>
                                                    <fixVersion>4.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16018175" author="kinow" created="Fri, 19 May 2017 23:43:23 +0000"  >&lt;p&gt;Sounds like a good argument &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmark&quot; class=&quot;user-hover&quot; rel=&quot;jmark&quot;&gt;jmark&lt;/a&gt;. Would you be interested in submitting a pull request? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16018672" author="jmark" created="Sun, 21 May 2017 02:56:42 +0000"  >&lt;p&gt;Sure, just let me know what the process for that is.&lt;/p&gt;</comment>
                            <comment id="16018694" author="kinow" created="Sun, 21 May 2017 05:13:49 +0000"  >&lt;p&gt;For general information on how to contribute, see &lt;a href=&quot;https://commons.apache.org/patches.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Commons Collections is still using Subversion for code management, this is the repository &lt;a href=&quot;https://svn.apache.org/repos/asf/commons/proper/collections/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/commons/proper/collections/trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you are comfortable with Subversion, you can check out that repository, make your changes, and follow the information in the first link to create a JIRA ticket, and a patch to attach to the ticket with your changes.&lt;/p&gt;

&lt;p&gt;If you are more comfortable or prefer to use Git, you can fork &lt;a href=&quot;https://github.com/apache/commons-collections&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-collections&lt;/a&gt;, make all the changes in your own forked repository, and then &lt;a href=&quot;https://help.github.com/articles/about-pull-requests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;submit a pull request&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A committer will review your patch or pull request, and either ask for feedback or changes, and then merge it (-:&lt;/p&gt;

&lt;p&gt;Hope that helps&lt;br/&gt;
Bruno&lt;/p&gt;</comment>
                            <comment id="16019576" author="jmark" created="Mon, 22 May 2017 13:26:12 +0000"  >&lt;p&gt;Yes, that is what I was looking for, thanks.&lt;/p&gt;

&lt;p&gt;I am attaching a patch to this ticket.&lt;/p&gt;</comment>
                            <comment id="16019578" author="jmark" created="Mon, 22 May 2017 13:26:37 +0000"  >&lt;p&gt;Patch for proposed solution.&lt;/p&gt;</comment>
                            <comment id="16022611" author="kinow" created="Wed, 24 May 2017 09:35:28 +0000"  >&lt;p&gt;Patch applied. All tests pass, coverage of the get method kept at 100%, no issues found in CPD, PMD, FindBugs, or Checkstyle. Nice and simple improvement, if the object exists in the map, it will avoid some work. The class javadocs cover thread safety, and this change is aligned with what is stated there.&lt;/p&gt;

&lt;p&gt;Thanks for taking your time to submit this patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmark&quot; class=&quot;user-hover&quot; rel=&quot;jmark&quot;&gt;jmark&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Bruno&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12869258" name="COLLECTIONS-602.patch" size="853" author="jmark" created="Mon, 22 May 2017 13:26:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3f84f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>