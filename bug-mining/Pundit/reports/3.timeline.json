[{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40526693","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-40526693","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":40526693,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNTI2Njkz","user":{"login":"thomasklemm","id":1100176,"node_id":"MDQ6VXNlcjExMDAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/1100176?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasklemm","html_url":"https://github.com/thomasklemm","followers_url":"https://api.github.com/users/thomasklemm/followers","following_url":"https://api.github.com/users/thomasklemm/following{/other_user}","gists_url":"https://api.github.com/users/thomasklemm/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasklemm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasklemm/subscriptions","organizations_url":"https://api.github.com/users/thomasklemm/orgs","repos_url":"https://api.github.com/users/thomasklemm/repos","events_url":"https://api.github.com/users/thomasklemm/events{/privacy}","received_events_url":"https://api.github.com/users/thomasklemm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-04-15T19:58:09Z","updated_at":"2014-04-15T19:58:09Z","body":"Hm, deciding whether a user may see a table column seems like something closer related to strong params / strong params with user context.\n\nRegardless, instantiation the policy 10 times might not be as much as a problem in practice as some policy caching delivering wrong results in an edge case.\n\nDo you have some benchmarks showing Pundit policy object generation is a performance problem?\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40526693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thomasklemm","id":1100176,"node_id":"MDQ6VXNlcjExMDAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/1100176?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasklemm","html_url":"https://github.com/thomasklemm","followers_url":"https://api.github.com/users/thomasklemm/followers","following_url":"https://api.github.com/users/thomasklemm/following{/other_user}","gists_url":"https://api.github.com/users/thomasklemm/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasklemm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasklemm/subscriptions","organizations_url":"https://api.github.com/users/thomasklemm/orgs","repos_url":"https://api.github.com/users/thomasklemm/repos","events_url":"https://api.github.com/users/thomasklemm/events{/privacy}","received_events_url":"https://api.github.com/users/thomasklemm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40579060","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-40579060","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":40579060,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNTc5MDYw","user":{"login":"attenzione","id":284987,"node_id":"MDQ6VXNlcjI4NDk4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/284987?v=4","gravatar_id":"","url":"https://api.github.com/users/attenzione","html_url":"https://github.com/attenzione","followers_url":"https://api.github.com/users/attenzione/followers","following_url":"https://api.github.com/users/attenzione/following{/other_user}","gists_url":"https://api.github.com/users/attenzione/gists{/gist_id}","starred_url":"https://api.github.com/users/attenzione/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/attenzione/subscriptions","organizations_url":"https://api.github.com/users/attenzione/orgs","repos_url":"https://api.github.com/users/attenzione/repos","events_url":"https://api.github.com/users/attenzione/events{/privacy}","received_events_url":"https://api.github.com/users/attenzione/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-04-16T09:19:55Z","updated_at":"2018-07-02T09:52:23Z","body":"no, I don't have any benchmarks now, as i'm developing. \r\nI use pundit, to show some columns with controls, for example edit/delete. \r\nif I have 3-4 pundit policies calls for each row, and have 100 rows? it's not necessary to do so much initialisation, as my controls depends not on each row, but on logged in user and it's membership to the record.\r\nsimple solution for now - cache policy in controller and use it in view, like \r\n`@article_policy = policy(@article)`\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40579060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"attenzione","id":284987,"node_id":"MDQ6VXNlcjI4NDk4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/284987?v=4","gravatar_id":"","url":"https://api.github.com/users/attenzione","html_url":"https://github.com/attenzione","followers_url":"https://api.github.com/users/attenzione/followers","following_url":"https://api.github.com/users/attenzione/following{/other_user}","gists_url":"https://api.github.com/users/attenzione/gists{/gist_id}","starred_url":"https://api.github.com/users/attenzione/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/attenzione/subscriptions","organizations_url":"https://api.github.com/users/attenzione/orgs","repos_url":"https://api.github.com/users/attenzione/repos","events_url":"https://api.github.com/users/attenzione/events{/privacy}","received_events_url":"https://api.github.com/users/attenzione/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40614444","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-40614444","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":40614444,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjE0NDQ0","user":{"login":"thomasklemm","id":1100176,"node_id":"MDQ6VXNlcjExMDAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/1100176?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasklemm","html_url":"https://github.com/thomasklemm","followers_url":"https://api.github.com/users/thomasklemm/followers","following_url":"https://api.github.com/users/thomasklemm/following{/other_user}","gists_url":"https://api.github.com/users/thomasklemm/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasklemm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasklemm/subscriptions","organizations_url":"https://api.github.com/users/thomasklemm/orgs","repos_url":"https://api.github.com/users/thomasklemm/repos","events_url":"https://api.github.com/users/thomasklemm/events{/privacy}","received_events_url":"https://api.github.com/users/thomasklemm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-04-16T15:40:10Z","updated_at":"2014-04-16T15:40:10Z","body":"Yes, maybe you should do `@article_policy = policy(@article)` yourself, and ask `@article_policy.show_admin_columns?` afterwards.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40614444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thomasklemm","id":1100176,"node_id":"MDQ6VXNlcjExMDAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/1100176?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasklemm","html_url":"https://github.com/thomasklemm","followers_url":"https://api.github.com/users/thomasklemm/followers","following_url":"https://api.github.com/users/thomasklemm/following{/other_user}","gists_url":"https://api.github.com/users/thomasklemm/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasklemm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasklemm/subscriptions","organizations_url":"https://api.github.com/users/thomasklemm/orgs","repos_url":"https://api.github.com/users/thomasklemm/repos","events_url":"https://api.github.com/users/thomasklemm/events{/privacy}","received_events_url":"https://api.github.com/users/thomasklemm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40736819","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-40736819","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":40736819,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzM2ODE5","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-04-17T16:58:45Z","updated_at":"2014-04-17T16:58:45Z","body":"I actually think that caching the policy is quite sensible. If this is benchmarked at all, then we would have to bench memory, which is pretty difficult. Caching should be simple to implement, and I can't see how it'd have any downsides. I'm :+1:.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/40736819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/42257452","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-42257452","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":42257452,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjU3NDUy","user":{"login":"abitdodgy","id":545430,"node_id":"MDQ6VXNlcjU0NTQzMA==","avatar_url":"https://avatars.githubusercontent.com/u/545430?v=4","gravatar_id":"","url":"https://api.github.com/users/abitdodgy","html_url":"https://github.com/abitdodgy","followers_url":"https://api.github.com/users/abitdodgy/followers","following_url":"https://api.github.com/users/abitdodgy/following{/other_user}","gists_url":"https://api.github.com/users/abitdodgy/gists{/gist_id}","starred_url":"https://api.github.com/users/abitdodgy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abitdodgy/subscriptions","organizations_url":"https://api.github.com/users/abitdodgy/orgs","repos_url":"https://api.github.com/users/abitdodgy/repos","events_url":"https://api.github.com/users/abitdodgy/events{/privacy}","received_events_url":"https://api.github.com/users/abitdodgy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-05-06T00:44:51Z","updated_at":"2014-05-06T00:44:51Z","body":"I have a tasks view where each task has multiple actions based on the current user... `mark_complete`, `mark_incomplete`, `edit`, `assign`, `set_deadline`, and `delete`. That's 6 policies for the same task. I have views that could have up to 100 tasks from different lists. I don't have bench marks... (I'll get some) but caching here does seem sensible indeed. \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/42257452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abitdodgy","id":545430,"node_id":"MDQ6VXNlcjU0NTQzMA==","avatar_url":"https://avatars.githubusercontent.com/u/545430?v=4","gravatar_id":"","url":"https://api.github.com/users/abitdodgy","html_url":"https://github.com/abitdodgy","followers_url":"https://api.github.com/users/abitdodgy/followers","following_url":"https://api.github.com/users/abitdodgy/following{/other_user}","gists_url":"https://api.github.com/users/abitdodgy/gists{/gist_id}","starred_url":"https://api.github.com/users/abitdodgy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abitdodgy/subscriptions","organizations_url":"https://api.github.com/users/abitdodgy/orgs","repos_url":"https://api.github.com/users/abitdodgy/repos","events_url":"https://api.github.com/users/abitdodgy/events{/privacy}","received_events_url":"https://api.github.com/users/abitdodgy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"ecbypi","id":1111012,"node_id":"MDQ6VXNlcjExMTEwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1111012?v=4","gravatar_id":"","url":"https://api.github.com/users/ecbypi","html_url":"https://github.com/ecbypi","followers_url":"https://api.github.com/users/ecbypi/followers","following_url":"https://api.github.com/users/ecbypi/following{/other_user}","gists_url":"https://api.github.com/users/ecbypi/gists{/gist_id}","starred_url":"https://api.github.com/users/ecbypi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ecbypi/subscriptions","organizations_url":"https://api.github.com/users/ecbypi/orgs","repos_url":"https://api.github.com/users/ecbypi/repos","events_url":"https://api.github.com/users/ecbypi/events{/privacy}","received_events_url":"https://api.github.com/users/ecbypi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-05-23T15:53:11Z","updated_at":"2014-05-23T15:53:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/varvet/pundit/issues/154","repository_url":"https://api.github.com/repos/varvet/pundit","labels_url":"https://api.github.com/repos/varvet/pundit/issues/154/labels{/name}","comments_url":"https://api.github.com/repos/varvet/pundit/issues/154/comments","events_url":"https://api.github.com/repos/varvet/pundit/issues/154/events","html_url":"https://github.com/varvet/pundit/pull/154","id":34187791,"node_id":"MDExOlB1bGxSZXF1ZXN0MTYyODA3NTk=","number":154,"title":"Memoize `policy` in controller","user":{"login":"ecbypi","id":1111012,"node_id":"MDQ6VXNlcjExMTEwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1111012?v=4","gravatar_id":"","url":"https://api.github.com/users/ecbypi","html_url":"https://github.com/ecbypi","followers_url":"https://api.github.com/users/ecbypi/followers","following_url":"https://api.github.com/users/ecbypi/following{/other_user}","gists_url":"https://api.github.com/users/ecbypi/gists{/gist_id}","starred_url":"https://api.github.com/users/ecbypi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ecbypi/subscriptions","organizations_url":"https://api.github.com/users/ecbypi/orgs","repos_url":"https://api.github.com/users/ecbypi/repos","events_url":"https://api.github.com/users/ecbypi/events{/privacy}","received_events_url":"https://api.github.com/users/ecbypi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2014-05-23T15:53:11Z","updated_at":"2014-08-22T12:04:43Z","closed_at":"2014-08-22T12:04:43Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":6529205,"node_id":"MDEwOlJlcG9zaXRvcnk2NTI5MjA1","name":"pundit","full_name":"varvet/pundit","private":false,"owner":{"login":"varvet","id":3612746,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM2MTI3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/3612746?v=4","gravatar_id":"","url":"https://api.github.com/users/varvet","html_url":"https://github.com/varvet","followers_url":"https://api.github.com/users/varvet/followers","following_url":"https://api.github.com/users/varvet/following{/other_user}","gists_url":"https://api.github.com/users/varvet/gists{/gist_id}","starred_url":"https://api.github.com/users/varvet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/varvet/subscriptions","organizations_url":"https://api.github.com/users/varvet/orgs","repos_url":"https://api.github.com/users/varvet/repos","events_url":"https://api.github.com/users/varvet/events{/privacy}","received_events_url":"https://api.github.com/users/varvet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/varvet/pundit","description":"Minimal authorization through OO design and pure Ruby classes","fork":false,"url":"https://api.github.com/repos/varvet/pundit","forks_url":"https://api.github.com/repos/varvet/pundit/forks","keys_url":"https://api.github.com/repos/varvet/pundit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/varvet/pundit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/varvet/pundit/teams","hooks_url":"https://api.github.com/repos/varvet/pundit/hooks","issue_events_url":"https://api.github.com/repos/varvet/pundit/issues/events{/number}","events_url":"https://api.github.com/repos/varvet/pundit/events","assignees_url":"https://api.github.com/repos/varvet/pundit/assignees{/user}","branches_url":"https://api.github.com/repos/varvet/pundit/branches{/branch}","tags_url":"https://api.github.com/repos/varvet/pundit/tags","blobs_url":"https://api.github.com/repos/varvet/pundit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/varvet/pundit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/varvet/pundit/git/refs{/sha}","trees_url":"https://api.github.com/repos/varvet/pundit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/varvet/pundit/statuses/{sha}","languages_url":"https://api.github.com/repos/varvet/pundit/languages","stargazers_url":"https://api.github.com/repos/varvet/pundit/stargazers","contributors_url":"https://api.github.com/repos/varvet/pundit/contributors","subscribers_url":"https://api.github.com/repos/varvet/pundit/subscribers","subscription_url":"https://api.github.com/repos/varvet/pundit/subscription","commits_url":"https://api.github.com/repos/varvet/pundit/commits{/sha}","git_commits_url":"https://api.github.com/repos/varvet/pundit/git/commits{/sha}","comments_url":"https://api.github.com/repos/varvet/pundit/comments{/number}","issue_comment_url":"https://api.github.com/repos/varvet/pundit/issues/comments{/number}","contents_url":"https://api.github.com/repos/varvet/pundit/contents/{+path}","compare_url":"https://api.github.com/repos/varvet/pundit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/varvet/pundit/merges","archive_url":"https://api.github.com/repos/varvet/pundit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/varvet/pundit/downloads","issues_url":"https://api.github.com/repos/varvet/pundit/issues{/number}","pulls_url":"https://api.github.com/repos/varvet/pundit/pulls{/number}","milestones_url":"https://api.github.com/repos/varvet/pundit/milestones{/number}","notifications_url":"https://api.github.com/repos/varvet/pundit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/varvet/pundit/labels{/name}","releases_url":"https://api.github.com/repos/varvet/pundit/releases{/id}","deployments_url":"https://api.github.com/repos/varvet/pundit/deployments","created_at":"2012-11-04T09:20:19Z","updated_at":"2025-11-05T06:04:58Z","pushed_at":"2025-09-24T12:07:12Z","git_url":"git://github.com/varvet/pundit.git","ssh_url":"git@github.com:varvet/pundit.git","clone_url":"https://github.com/varvet/pundit.git","svn_url":"https://github.com/varvet/pundit","homepage":"","size":713,"stargazers_count":8444,"watchers_count":8444,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":642,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":17,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ruby"],"visibility":"public","forks":642,"open_issues":17,"watchers":8444,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/varvet/pundit/pulls/154","html_url":"https://github.com/varvet/pundit/pull/154","diff_url":"https://github.com/varvet/pundit/pull/154.diff","patch_url":"https://github.com/varvet/pundit/pull/154.patch","merged_at":null},"body":"Solves #134\n","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/varvet/pundit/issues/154/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":156022627,"node_id":"MDExOkNsb3NlZEV2ZW50MTU2MDIyNjI3","url":"https://api.github.com/repos/varvet/pundit/issues/events/156022627","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"698c9b5cb812d22a78b5c90c5697035b4ec8bcf2","commit_url":"https://api.github.com/repos/varvet/pundit/commits/698c9b5cb812d22a78b5c90c5697035b4ec8bcf2","created_at":"2014-08-22T11:20:52Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/53049943","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-53049943","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":53049943,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDQ5OTQz","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-08-22T11:28:58Z","updated_at":"2014-08-22T11:28:58Z","body":"This is now in the latest master (not in 0.3.0 though). Please take a look and see how it works for you.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/53049943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/398084894","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-398084894","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":398084894,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODA4NDg5NA==","user":{"login":"stephendolan","id":6677875,"node_id":"MDQ6VXNlcjY2Nzc4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6677875?v=4","gravatar_id":"","url":"https://api.github.com/users/stephendolan","html_url":"https://github.com/stephendolan","followers_url":"https://api.github.com/users/stephendolan/followers","following_url":"https://api.github.com/users/stephendolan/following{/other_user}","gists_url":"https://api.github.com/users/stephendolan/gists{/gist_id}","starred_url":"https://api.github.com/users/stephendolan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephendolan/subscriptions","organizations_url":"https://api.github.com/users/stephendolan/orgs","repos_url":"https://api.github.com/users/stephendolan/repos","events_url":"https://api.github.com/users/stephendolan/events{/privacy}","received_events_url":"https://api.github.com/users/stephendolan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-18T15:01:08Z","updated_at":"2018-06-18T15:01:08Z","body":"Hey there,\r\n\r\nSorry to resurrect an old issue, but I ran across this as the most promising result when trying to determine the best way to cache views based on Pundit permissions. Could anyone provide an example of how to use policy memoization to render different views based on those policies?\r\n\r\nFor example, say I have 100 roles in my application for hyperbole's sake (so I definitely don't want to cache one copy of the view for each role). Say that I also have 100,000 users (so I don't want to cache one copy of the view for each user). Say that the Pundit policy generated for a given `show` action for an instance of one model can only be rendered in two ways because the policy only relies on one of those 100 roles.\r\n\r\nIs there a way to add the Pundit policy \"fingerprint\" to my cache key, such that I cache the view in the two ways that Pundit could cause it to be rendered, based on the return value of all methods in that Pundit class?\r\n\r\nI'm happy to open up a merge request to add something about this to the README as well, if that's desired. Thought I'd try this issue thread first to see if what I'm looking for is even possible.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/398084894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stephendolan","id":6677875,"node_id":"MDQ6VXNlcjY2Nzc4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6677875?v=4","gravatar_id":"","url":"https://api.github.com/users/stephendolan","html_url":"https://github.com/stephendolan","followers_url":"https://api.github.com/users/stephendolan/followers","following_url":"https://api.github.com/users/stephendolan/following{/other_user}","gists_url":"https://api.github.com/users/stephendolan/gists{/gist_id}","starred_url":"https://api.github.com/users/stephendolan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephendolan/subscriptions","organizations_url":"https://api.github.com/users/stephendolan/orgs","repos_url":"https://api.github.com/users/stephendolan/repos","events_url":"https://api.github.com/users/stephendolan/events{/privacy}","received_events_url":"https://api.github.com/users/stephendolan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/398099803","html_url":"https://github.com/varvet/pundit/issues/134#issuecomment-398099803","issue_url":"https://api.github.com/repos/varvet/pundit/issues/134","id":398099803,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODA5OTgwMw==","user":{"login":"stephendolan","id":6677875,"node_id":"MDQ6VXNlcjY2Nzc4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6677875?v=4","gravatar_id":"","url":"https://api.github.com/users/stephendolan","html_url":"https://github.com/stephendolan","followers_url":"https://api.github.com/users/stephendolan/followers","following_url":"https://api.github.com/users/stephendolan/following{/other_user}","gists_url":"https://api.github.com/users/stephendolan/gists{/gist_id}","starred_url":"https://api.github.com/users/stephendolan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephendolan/subscriptions","organizations_url":"https://api.github.com/users/stephendolan/orgs","repos_url":"https://api.github.com/users/stephendolan/repos","events_url":"https://api.github.com/users/stephendolan/events{/privacy}","received_events_url":"https://api.github.com/users/stephendolan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-18T15:44:12Z","updated_at":"2018-06-18T15:44:12Z","body":"Here is the implementation that I've added to my `ApplicationPolicy`, in case that helps to expand on what I'm asking about:\r\n\r\n```ruby\r\n  # Determine the fingerprint of a given policy which can be used to cache distinct \"versions\" of a page.\r\n  #\r\n  # @author Stephen Dolan\r\n  #\r\n  # @return [String] a comma-delimited string of policy permission methods and their return values.\r\n  #\r\n  # @example\r\n  #   <% cache [@user, policy(@user).fingerprint] do %>\r\n  #     <h1><%= @user.name %></h1>\r\n  #\r\n  #     <% if policy(@user).update? %>\r\n  #       <button>Update User</button>\r\n  #     <% end %>\r\n  #   <% end %>\r\n  def fingerprint\r\n    permission_methods = methods - Object.methods\r\n    permission_methods = permission_methods.select   { |method| method.to_s.match?(/\\A\\w*\\?\\z/) }\r\n    permission_methods = permission_methods.map      { |method| \"#{method}#{send(method)}\" }\r\n    permission_methods = permission_methods.sort_by! { |method| method.to_s.first }\r\n    permission_methods.join(',')\r\n  end\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/varvet/pundit/issues/comments/398099803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stephendolan","id":6677875,"node_id":"MDQ6VXNlcjY2Nzc4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6677875?v=4","gravatar_id":"","url":"https://api.github.com/users/stephendolan","html_url":"https://github.com/stephendolan","followers_url":"https://api.github.com/users/stephendolan/followers","following_url":"https://api.github.com/users/stephendolan/following{/other_user}","gists_url":"https://api.github.com/users/stephendolan/gists{/gist_id}","starred_url":"https://api.github.com/users/stephendolan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephendolan/subscriptions","organizations_url":"https://api.github.com/users/stephendolan/orgs","repos_url":"https://api.github.com/users/stephendolan/repos","events_url":"https://api.github.com/users/stephendolan/events{/privacy}","received_events_url":"https://api.github.com/users/stephendolan/received_events","type":"User","user_view_type":"public","site_admin":false}}]