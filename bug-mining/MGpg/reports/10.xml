<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:19:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MGPG-59] GPG Plugin: &quot;gpg: signing failed: Inappropriate ioctl for device&quot;</title>
                <link>https://issues.apache.org/jira/browse/MGPG-59</link>
                <project id="12317521" key="MGPG">Maven GPG Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Some versions and configurations of GPG want to pop an interactive UI, which the maven-gpg-plugin cannot handle.  This appears in the log, before Maven quits without much advice:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;*gpg: WARNING: &quot;--no-use-agent&quot; is an obsolete option - it has no effect&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&quot;gpg: signing failed: Inappropriate ioctl for device&quot;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12873409/12873409_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;The remedy is for the user to do something with gpg on the command line before going into mvn-release:prepare&lt;/b&gt;. Something that will allow gpg to remember (for a period of time) the passphrase entered in that interactive UI, that the maven invocation of gpg can take advantage of afterwards.&lt;/p&gt;

&lt;p&gt;Historically there was a gpg option &apos;--no-use-agent&apos;, but not all gpg implementations support that today, not will going forwards as it is being removed.&lt;/p&gt;

&lt;p&gt;Suggestion: On command error, System.out.println the remedy above, perhaps even suggesting the command to run:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;gpg --use-agent --armor --detach-sign  --output $(mktemp) pom.xml&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13080656">MGPG-59</key>
            <summary>GPG Plugin: &quot;gpg: signing failed: Inappropriate ioctl for device&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rfscholte">Robert Scholte</assignee>
                                    <reporter username="paul">Paul Hammant</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Jun 2017 13:59:19 +0000</created>
                <updated>Sat, 14 Jun 2025 12:09:11 +0000</updated>
                            <resolved>Sat, 6 Apr 2019 17:50:45 +0000</resolved>
                                    <version>1.6</version>
                                    <fixVersion>3.0.0 (cancelled)</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="16148058" author="ulises.cervino" created="Wed, 30 Aug 2017 21:03:43 +0000"  >&lt;p&gt;This proposed remedy doesn&apos;t work for build servers, e.g. jenkins.&lt;/p&gt;

&lt;p&gt;A better approach is to use &lt;tt&gt;--pinentry-mode loopback&lt;/tt&gt; once the keys have been loaded in the agent.&lt;/p&gt;</comment>
                            <comment id="16227633" author="ludvicekj" created="Tue, 31 Oct 2017 21:18:51 +0000"  >&lt;p&gt;Spotted this error on Mac OS 10.12.6 with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ gpg --version
gpg (GnuPG) 2.2.1
libgcrypt 1.8.1

$ mvn -version
Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T09:58:13+02:00)
Maven home: /usr/local/Cellar/maven/3.5.2/libexec
Java version: 1.8.0_151, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac os x&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;10.12.6&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;x86_64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16747341" author="beamerblvd" created="Sun, 20 Jan 2019 04:51:48 +0000"  >&lt;p&gt;I&apos;d like to suggest the need for a more in-depth fix for this. The problem is that there&apos;s a wide range of GnuPG versions still in use out there. For example, Ubuntu 16.04 (still LTS) has GnuPG 1.4 while Ubuntu 18.04 (also still LTS) and Homebrew (macOS) have GnuPG 2.2. As a result, a developer working on a Mac whose project uses Travis CI for builds is kind of hosed. If he adds this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;gpgArguments&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;arg&amp;gt;&lt;/span&gt;--pinentry-mode&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/arg&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;arg&amp;gt;&lt;/span&gt;loopback&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/arg&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/gpgArguments&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;He&apos;ll be able to sign locally but his Travis CI builds will fail. On the other hand, if he leaves that off, his Travis CI builds will pass, but he&apos;ll be unable to sign locally.&lt;/p&gt;

&lt;p&gt;The Maven GPG Plugin should detect the GnuPG version before invoking it for signing purposes, and it should pass the &lt;tt&gt;--pinentry-mode loopback&lt;/tt&gt; arguments automatically (without any necessary configuration) if the GnuPG version is &amp;gt;= 2.1.&lt;/p&gt;</comment>
                            <comment id="16811651" author="rfscholte" created="Sat, 6 Apr 2019 17:50:45 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-gpg-plugin.git;a=commit;h=11aca384c4005747d797dcc4857280d0d578d05f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;11aca384c4005747d797dcc4857280d0d578d05f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16811671" author="hudson" created="Sat, 6 Apr 2019 18:52:04 +0000"  >&lt;p&gt;Build failed in Jenkins: Maven TLP &#187; maven-gpg-plugin &#187; master #8&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://builds.apache.org/job/maven-box/job/maven-gpg-plugin/job/master/8/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-box/job/maven-gpg-plugin/job/master/8/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17975138" author="JIRAUSER302100" created="Sat, 14 Jun 2025 12:09:11 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-gpg-plugin/issues/209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-gpg-plugin#209&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13281671">MGPG-76</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13094294">HBASE-18585</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12873409" name="screenshot-1.png" size="25773" author="paul" created="Sun, 18 Jun 2017 14:08:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3geyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>