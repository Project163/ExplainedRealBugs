{"url":"https://api.github.com/repos/node-fetch/node-fetch/issues/184","repository_url":"https://api.github.com/repos/node-fetch/node-fetch","labels_url":"https://api.github.com/repos/node-fetch/node-fetch/issues/184/labels{/name}","comments_url":"https://api.github.com/repos/node-fetch/node-fetch/issues/184/comments","events_url":"https://api.github.com/repos/node-fetch/node-fetch/issues/184/events","html_url":"https://github.com/node-fetch/node-fetch/issues/184","id":182106137,"node_id":"MDU6SXNzdWUxODIxMDYxMzc=","number":184,"title":"Charset detection","user":{"login":"TimothyGu","id":1538624,"node_id":"MDQ6VXNlcjE1Mzg2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1538624?v=4","gravatar_id":"","url":"https://api.github.com/users/TimothyGu","html_url":"https://github.com/TimothyGu","followers_url":"https://api.github.com/users/TimothyGu/followers","following_url":"https://api.github.com/users/TimothyGu/following{/other_user}","gists_url":"https://api.github.com/users/TimothyGu/gists{/gist_id}","starred_url":"https://api.github.com/users/TimothyGu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimothyGu/subscriptions","organizations_url":"https://api.github.com/users/TimothyGu/orgs","repos_url":"https://api.github.com/users/TimothyGu/repos","events_url":"https://api.github.com/users/TimothyGu/events{/privacy}","received_events_url":"https://api.github.com/users/TimothyGu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-10-10T20:22:24Z","updated_at":"2016-10-15T17:18:47Z","closed_at":"2016-10-15T17:18:47Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Originally reported by @gwicke in gwicke/node-fetch-polyfill#1.\n\nCurrently, node-fetch attempts to automatically detect the encoding of the input source, and [convert](https://github.com/bitinn/node-fetch/blob/e926483448c675b7443d2c085c49cee9d4619120/lib/body.js#L147) it to UTF-8. However, the [Fetch Standard](https://fetch.spec.whatwg.org/#concept-body-package-data) says that only a plain UTF-8 decode should be performed, regardless of the actual input encoding. As written in the referenced issue and confirmed by myself, the spec behavior is what's implemented by the browsers.\n\nA few options:\n1. Keep the current behavior\n2. Remove conversion process\n3. Use an option (e.g. `res.text({ convert: true })`)\n4. Make a new method (e.g. `res.textConverted()`)\n\nI'm leaning towards 4. 1 makes this module incompatible with the browser (something I don't want to do), 2 makes transition to v2 more difficult for people already using this library, and I'm reluctant to modify the behaviors of a well-defined function such as `.text()`.\n\nThoughts?\n","closed_by":{"login":"TimothyGu","id":1538624,"node_id":"MDQ6VXNlcjE1Mzg2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1538624?v=4","gravatar_id":"","url":"https://api.github.com/users/TimothyGu","html_url":"https://github.com/TimothyGu","followers_url":"https://api.github.com/users/TimothyGu/followers","following_url":"https://api.github.com/users/TimothyGu/following{/other_user}","gists_url":"https://api.github.com/users/TimothyGu/gists{/gist_id}","starred_url":"https://api.github.com/users/TimothyGu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimothyGu/subscriptions","organizations_url":"https://api.github.com/users/TimothyGu/orgs","repos_url":"https://api.github.com/users/TimothyGu/repos","events_url":"https://api.github.com/users/TimothyGu/events{/privacy}","received_events_url":"https://api.github.com/users/TimothyGu/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/node-fetch/node-fetch/issues/184/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/node-fetch/node-fetch/issues/184/timeline","performed_via_github_app":null,"state_reason":"completed"}