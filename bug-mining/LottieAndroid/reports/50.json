{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/285","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/285/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/285/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/285/events","html_url":"https://github.com/airbnb/lottie-android/issues/285","id":226825807,"node_id":"MDU6SXNzdWUyMjY4MjU4MDc=","number":285,"title":"LottieAnimationView.onRestoreInstanceState(Parcelable state)  not call  setImageAssetsFolder()","user":{"login":"shuixingge","id":11961627,"node_id":"MDQ6VXNlcjExOTYxNjI3","avatar_url":"https://avatars.githubusercontent.com/u/11961627?v=4","gravatar_id":"","url":"https://api.github.com/users/shuixingge","html_url":"https://github.com/shuixingge","followers_url":"https://api.github.com/users/shuixingge/followers","following_url":"https://api.github.com/users/shuixingge/following{/other_user}","gists_url":"https://api.github.com/users/shuixingge/gists{/gist_id}","starred_url":"https://api.github.com/users/shuixingge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuixingge/subscriptions","organizations_url":"https://api.github.com/users/shuixingge/orgs","repos_url":"https://api.github.com/users/shuixingge/repos","events_url":"https://api.github.com/users/shuixingge/events{/privacy}","received_events_url":"https://api.github.com/users/shuixingge/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-05-07T03:59:16Z","updated_at":"2017-05-07T20:50:33Z","closed_at":"2017-05-07T20:50:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"if you switch  app in background , the LottieAnimationView may be recycled. And onRestoreInstanceState() will be called when restart the app.but the method \"setImageAssetsFolder()\" not be called in  onRestoreInstanceState() before start animation(playAnimation()). this will product  \" IllegalStateException(\"You must set an images folder before loading an image.\"\r\nmy simple solution is below:\r\n```\r\n\r\n  @Override\r\n    protected Parcelable onSaveInstanceState() {\r\n        Parcelable superState = super.onSaveInstanceState();\r\n        SavedState ss = new SavedState(superState);\r\n        ss.imageFolder = imageFolder;\r\n        return ss;\r\n    }\r\n\r\n    @Override\r\n    protected void onRestoreInstanceState(Parcelable state) {\r\n        if (!(state instanceof SavedState)) return;\r\n        setImageAssetsFolder(((SavedState) state).imageFolder);\r\n        super.onRestoreInstanceState(((SavedState) state).getSuperState());\r\n\r\n    }\r\n```","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/285/timeline","performed_via_github_app":null,"state_reason":"completed"}