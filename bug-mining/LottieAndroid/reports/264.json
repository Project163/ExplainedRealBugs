{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2077","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2077/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2077/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2077/events","html_url":"https://github.com/airbnb/lottie-android/issues/2077","id":1242061266,"node_id":"I_kwDOBC8mW85KCFnS","number":2077,"title":"Compose: LottieAnimation recomposes on every frame degrading performance","user":{"login":"MSDarwish2000","id":20906401,"node_id":"MDQ6VXNlcjIwOTA2NDAx","avatar_url":"https://avatars.githubusercontent.com/u/20906401?v=4","gravatar_id":"","url":"https://api.github.com/users/MSDarwish2000","html_url":"https://github.com/MSDarwish2000","followers_url":"https://api.github.com/users/MSDarwish2000/followers","following_url":"https://api.github.com/users/MSDarwish2000/following{/other_user}","gists_url":"https://api.github.com/users/MSDarwish2000/gists{/gist_id}","starred_url":"https://api.github.com/users/MSDarwish2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MSDarwish2000/subscriptions","organizations_url":"https://api.github.com/users/MSDarwish2000/orgs","repos_url":"https://api.github.com/users/MSDarwish2000/repos","events_url":"https://api.github.com/users/MSDarwish2000/events{/privacy}","received_events_url":"https://api.github.com/users/MSDarwish2000/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1460035932,"node_id":"MDU6TGFiZWwxNDYwMDM1OTMy","url":"https://api.github.com/repos/airbnb/lottie-android/labels/Non-Rendering%20Bug","name":"Non-Rendering Bug","color":"186199","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-05-19T17:00:45Z","updated_at":"2022-05-24T23:10:43Z","closed_at":"2022-05-24T23:10:43Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Issue Repro Compose Fork : [https://github.com/MSDarwish2000/lottie-android-performance](Fork)\r\n\r\n**Describe the bug**\r\n`LottieAnimation` recomposes itself on every frame. This is completely unnecessary in most cases as the only actual change happens during the draw phase, not composition or layout phases. This happens as a result of passing `progress` to `LottieAnimation`. Even when using the function without progress, this happens internally reducing the scope of recomposition but not preventing it.\r\n\r\n**Steps To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. This can be reproduced with any Lottie Compose sample using Layout Inspector in Android Studio Dolphin\r\n2. This can be benchmarked using the code in the issue above or any similar code\r\n\r\n**Sample benchmark result**\r\n\r\n- _While running minified release variant_\r\n Drawing time: 1174.3ms - Recomposition time: 979.4ms - percentage: 45.48%\r\n- _While running debug variant_\r\n Drawing time: 1369.3ms - Recomposition time: 1219ms - percentage: 47.1%\r\n- _While debugging_\r\n Drawing time: 2398.3ms - Recomposition time: 1837.2ms - percentage: 43.38%\r\n\r\n_Note:_ The percentage of recomposition time may increase if the parent composable had more code which is very likely ","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2077/timeline","performed_via_github_app":null,"state_reason":"completed"}