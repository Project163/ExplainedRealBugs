{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1492","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1492/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1492/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1492/events","html_url":"https://github.com/airbnb/lottie-android/issues/1492","id":557454489,"node_id":"MDU6SXNzdWU1NTc0NTQ0ODk=","number":1492,"title":"LottieCompositionFactory Async methods do not load animation on API < 24 when composition is set outside of LottieListener","user":{"login":"StefanDeBruijn","id":7021747,"node_id":"MDQ6VXNlcjcwMjE3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/7021747?v=4","gravatar_id":"","url":"https://api.github.com/users/StefanDeBruijn","html_url":"https://github.com/StefanDeBruijn","followers_url":"https://api.github.com/users/StefanDeBruijn/followers","following_url":"https://api.github.com/users/StefanDeBruijn/following{/other_user}","gists_url":"https://api.github.com/users/StefanDeBruijn/gists{/gist_id}","starred_url":"https://api.github.com/users/StefanDeBruijn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StefanDeBruijn/subscriptions","organizations_url":"https://api.github.com/users/StefanDeBruijn/orgs","repos_url":"https://api.github.com/users/StefanDeBruijn/repos","events_url":"https://api.github.com/users/StefanDeBruijn/events{/privacy}","received_events_url":"https://api.github.com/users/StefanDeBruijn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":779072398,"node_id":"MDU6TGFiZWw3NzkwNzIzOTg=","url":"https://api.github.com/repos/airbnb/lottie-android/labels/Rendering%20bug","name":"Rendering bug","color":"0052cc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-30T12:14:13Z","updated_at":"2020-02-16T07:21:12Z","closed_at":"2020-02-16T07:21:12Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Tested on APIs: 19, 21, 24 and 29\r\nLottie version: 3.3.1\r\n\r\nThis is a follow up issue for https://github.com/airbnb/lottie-android/issues/1491, since that contained info which turned out to be unrelated.\r\n\r\n### The problem:\r\nWhile creating this issue and the test project, I've discovered the real problem: \r\nI'm calling `setImageDrawable(lottieDrawable)` outside of the `LottieListener`. When moving this within the listener's callback, it works fine on all API levels tested.\r\n\r\nI'll leave this test project and issue up, since it is strange how this approach works on api 24+ but not on api < 24 ðŸ¤” \r\nI am happy to accept its a case of 'works as expected' though and for the ticket to simply be closed without further action.\r\n\r\nTest project: https://github.com/StefanDeBruijn/TestLottieComposition\r\n\r\nScreenshots:\r\n\r\n| API 19        | API 21           | API 24           |\r\n| ------------- |:-------------:| :-------------:| \r\n|![api19](https://user-images.githubusercontent.com/7021747/73447800-65f51e00-4357-11ea-8623-9aeaa5c0a7e6.png)|![api21](https://user-images.githubusercontent.com/7021747/73447804-67bee180-4357-11ea-9e2c-2365d2af7e2e.png)|![api24](https://user-images.githubusercontent.com/7021747/73447810-6988a500-4357-11ea-8bf2-2f4cbf36c032.png)|\r\n\r\nDetails about the test project:\r\nAll related code is found in `FirstFragment.kt`. \r\nCode that causes the error is marked with // FIXME\r\n\r\nIt loads both our custom Lottie animation (`pull_to_refresh.json`) and another random animation from LottieFiles (`control.json`), in various ways (`fromRawRes`, `fromRawResSync`, `fromAsset` and the standard XML way).\r\n\r\n\r\n\r\n","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1492/timeline","performed_via_github_app":null,"state_reason":"completed"}