{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1143","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1143/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1143/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1143/events","html_url":"https://github.com/airbnb/lottie-android/issues/1143","id":417212665,"node_id":"MDU6SXNzdWU0MTcyMTI2NjU=","number":1143,"title":"NullPointerException on android 4.3","user":{"login":"ductranit","id":2063905,"node_id":"MDQ6VXNlcjIwNjM5MDU=","avatar_url":"https://avatars.githubusercontent.com/u/2063905?v=4","gravatar_id":"","url":"https://api.github.com/users/ductranit","html_url":"https://github.com/ductranit","followers_url":"https://api.github.com/users/ductranit/followers","following_url":"https://api.github.com/users/ductranit/following{/other_user}","gists_url":"https://api.github.com/users/ductranit/gists{/gist_id}","starred_url":"https://api.github.com/users/ductranit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ductranit/subscriptions","organizations_url":"https://api.github.com/users/ductranit/orgs","repos_url":"https://api.github.com/users/ductranit/repos","events_url":"https://api.github.com/users/ductranit/events{/privacy}","received_events_url":"https://api.github.com/users/ductranit/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-03-05T10:00:07Z","updated_at":"2019-03-10T17:13:12Z","closed_at":"2019-03-10T17:13:12Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I got the `NullPointerException` when upgrade lottie to version `3.0.0beta2`. It works on android 8,9 but not 4.3, 5 ( I don't have other devices to test)\r\nHere is my view:\r\n```\r\n<com.airbnb.lottie.LottieAnimationView\r\n        android:id=\"@+id/lottieView\"\r\n        app:lottie_autoPlay=\"true\"\r\n        app:lottie_loop=\"true\"\r\n        app:lottie_scale=\"0.2\"\r\n        app:lottie_rawRes=\"@raw/ring\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\" />\r\n```\r\nThe json animation file is downloaded from here https://lottiefiles.com/222-trail-loading\r\nAnd the crash log:\r\n\r\n```\r\nCaused by java.lang.NullPointerException\r\n       at com.airbnb.lottie.LottieAnimationView.isAnimating(SourceFile:607)\r\n       at com.airbnb.lottie.LottieAnimationView.onVisibilityChanged(SourceFile:240)\r\n       at android.view.View.dispatchVisibilityChanged(View.java:7628)\r\n       at android.view.View.setFlags(View.java:8632)\r\n       at android.view.View.(View.java:3732)\r\n       at android.widget.ImageView.(ImageView.java:121)\r\n       at androidx.appcompat.widget.AppCompatImageView.(SourceFile:3)\r\n       at com.airbnb.lottie.LottieAnimationView.androidx.appcompat.widget.AppCompatImageView.<init>(SourceFile:91)\r\n       at java.lang.reflect.Constructor.constructNative(Constructor.java)\r\n       at java.lang.reflect.Constructor.newInstance(Constructor.java:417)\r\n       at android.view.LayoutInflater.createView(LayoutInflater.java:594)\r\n       at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:696)\r\n       at android.view.LayoutInflater.rInflate(LayoutInflater.java:755)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:492)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:397)\r\n       at com.zd.ad.ui.widgets.PhotoPagerAdapter.instantiateItem(SourceFile:28)\r\n       at androidx.viewpager.widget.ViewPager.addNewItem(SourceFile:1010)\r\n       at androidx.viewpager.widget.ViewPager.populate(SourceFile:1158)\r\n       at androidx.viewpager.widget.ViewPager.populate(SourceFile:1092)\r\n       at androidx.viewpager.widget.ViewPager.onMeasure(SourceFile:1622)\r\n       at android.view.View.measure(View.java:15848)\r\n       at androidx.constraintlayout.widget.ConstraintLayout.onMeasure(SourceFile:1699)\r\n       at android.view.View.measure(View.java:15848)\r\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5012)\r\n       at androidx.coordinatorlayout.widget.CoordinatorLayout.onMeasureChild(SourceFile:743)\r\n       at com.google.android.material.appbar.HeaderScrollingViewBehavior.findFirstDependency(SourceFile:101)\r\n       at androidx.coordinatorlayout.widget.CoordinatorLayout.onMeasure(SourceFile:813)\r\n       at android.view.View.measure(View.java:15848)\r\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5012)\r\n       at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\r\n       at androidx.appcompat.widget.ContentFrameLayout.onMeasure(SourceFile:143)\r\n       at android.view.View.measure(View.java:15848)\r\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5012)\r\n       at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)\r\n       at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)\r\n       at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)\r\n       at android.view.View.measure(View.java:15848)\r\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5012)\r\n       at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\r\n       at android.view.View.measure(View.java:15848)\r\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5012)\r\n       at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)\r\n       at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)\r\n       at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)\r\n       at android.view.View.measure(View.java:15848)\r\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5012)\r\n       at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\r\n       at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2189)\r\n       at android.view.View.measure(View.java:15848)\r\n       at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1905)\r\n       at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1104)\r\n       at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1284)\r\n       at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1004)\r\n       at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5481)\r\n       at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)\r\n       at android.view.Choreographer.doCallbacks(Choreographer.java:562)\r\n       at android.view.Choreographer.doFrame(Choreographer.java:532)\r\n       at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)\r\n       at android.os.Handler.handleCallback(Handler.java:730)\r\n       at android.os.Handler.dispatchMessage(Handler.java:92)\r\n       at android.os.Looper.loop(Looper.java:137)\r\n       at android.app.ActivityThread.main(ActivityThread.java:5103)\r\n       at java.lang.reflect.Method.invokeNative(Method.java)\r\n       at java.lang.reflect.Method.invoke(Method.java:525)\r\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:737)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\r\n       at dalvik.system.NativeStart.main(NativeStart.java)\r\n```\r\n\r\nI wonder could the problem is that lottieview is in viewpager item? Because it works well on other screen without viewpager.","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1143/timeline","performed_via_github_app":null,"state_reason":"completed"}