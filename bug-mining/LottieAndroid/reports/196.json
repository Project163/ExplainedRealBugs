{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1523","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1523/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1523/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1523/events","html_url":"https://github.com/airbnb/lottie-android/issues/1523","id":569936282,"node_id":"MDU6SXNzdWU1Njk5MzYyODI=","number":1523,"title":"Add support for defStyleAttr to LottieAnimationView","user":{"login":"ataulm","id":2678555,"node_id":"MDQ6VXNlcjI2Nzg1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2678555?v=4","gravatar_id":"","url":"https://api.github.com/users/ataulm","html_url":"https://github.com/ataulm","followers_url":"https://api.github.com/users/ataulm/followers","following_url":"https://api.github.com/users/ataulm/following{/other_user}","gists_url":"https://api.github.com/users/ataulm/gists{/gist_id}","starred_url":"https://api.github.com/users/ataulm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ataulm/subscriptions","organizations_url":"https://api.github.com/users/ataulm/orgs","repos_url":"https://api.github.com/users/ataulm/repos","events_url":"https://api.github.com/users/ataulm/events{/privacy}","received_events_url":"https://api.github.com/users/ataulm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":779072574,"node_id":"MDU6TGFiZWw3NzkwNzI1NzQ=","url":"https://api.github.com/repos/airbnb/lottie-android/labels/New%20feature","name":"New feature","color":"5319e7","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-24T15:34:01Z","updated_at":"2020-03-02T00:26:29Z","closed_at":"2020-03-02T00:26:29Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\n`LottieAnimationView` provides the 3-arg view constructor, which allows passing a `defStyleAttr` from a subclass (e.g. `MyLoadingSpinnerView`), but doesn't use it.\r\n\r\nThis means that any `LottieAnimationView`-specific attributes will not be read from a default style.\r\n\r\n**Describe the solution you'd like**\r\n\r\nPass the `defStyleAttr` to the `init` function, and pass it when [obtaining styled attributes](https://developer.android.com/reference/android/content/Context#obtainStyledAttributes(android.util.AttributeSet,%20int%5B%5D,%20int,%20int)):\r\n\r\n```java\r\nprivate void init(@Nullable AttributeSet attrs, @AttrRes int defStyleAttr) {\r\n    TypedArray ta = getContext().obtainStyledAttributes(attrs, R.styleable.LottieAnimationView, defStyleAttr, 0);\r\n    if (!isInEditMode()) {\r\n        boolean hasRawRes = ta.hasValue(R.styleable.LottieAnimationView_lottie_rawRes);\r\n        ...\r\n```\r\n\r\n**Describe alternatives you've considered**\r\n\r\nApplying the style explicitly in the layout every time:\r\n\r\n```kotlin\r\n<MyLoadingSpinnerView\r\n    style=\"@style/Widget.MyApp.MyLoadingSpinnerView\"\r\n    android:layout_width=\"40dp\"\r\n    android:layout_height=\"40dp\" />\r\n```\r\n\r\n**Additional context**\r\n\r\nHappy to do a PR if this issue is accepted!\r\n\r\n\r\n\r\n*Lottie is supported and developed on nights and weekends. Please consider [sponsoring Lottie](https://github.com/users/gpeal/sponsorship) to prioritize this issue and help support this issue as well as future investments.*\r\n","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1523/timeline","performed_via_github_app":null,"state_reason":"completed"}