{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2309","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2309/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2309/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2309/events","html_url":"https://github.com/airbnb/lottie-android/issues/2309","id":1746473822,"node_id":"I_kwDOBC8mW85oGRNe","number":2309,"title":"Lottie reports error \"FileNotFoundException\" due to error \"ENAMETOOLONG (File name too long)\" ","user":{"login":"LuciferTian2010","id":1487482,"node_id":"MDQ6VXNlcjE0ODc0ODI=","avatar_url":"https://avatars.githubusercontent.com/u/1487482?v=4","gravatar_id":"","url":"https://api.github.com/users/LuciferTian2010","html_url":"https://github.com/LuciferTian2010","followers_url":"https://api.github.com/users/LuciferTian2010/followers","following_url":"https://api.github.com/users/LuciferTian2010/following{/other_user}","gists_url":"https://api.github.com/users/LuciferTian2010/gists{/gist_id}","starred_url":"https://api.github.com/users/LuciferTian2010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuciferTian2010/subscriptions","organizations_url":"https://api.github.com/users/LuciferTian2010/orgs","repos_url":"https://api.github.com/users/LuciferTian2010/repos","events_url":"https://api.github.com/users/LuciferTian2010/events{/privacy}","received_events_url":"https://api.github.com/users/LuciferTian2010/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":779072398,"node_id":"MDU6TGFiZWw3NzkwNzIzOTg=","url":"https://api.github.com/repos/airbnb/lottie-android/labels/Rendering%20bug","name":"Rendering bug","color":"0052cc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-07T18:41:43Z","updated_at":"2023-06-09T21:32:38Z","closed_at":"2023-06-09T21:32:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Checklist**\r\n\r\n1. My animation doesn't use any [unsupported features](http://airbnb.io/lottie/#/supported-features).  ✅\r\n2. I know what part of my animation doesn't work.  ✅\r\n3. I have created a simplified version of my animation  ✅\r\n4. I have attached the AEP file (as a zip file so it can be attached) that only has the part of the animation that doesn't work.  ✅\r\n\r\n**Describe the bug**\r\nI have some Lottie files whose network uris are passed to LottieAnimationView.setAnimationFromUrl. Sometimes I see Lottie reports failure the error that \"ENAMETOOLONG (File name too long)\". The cache filenames seems generated based on the network uri. It is hard for us to shorten the network url for security purpose, so I am wondering if I can customize the way that Lottie uses to generate the filename of the cache file.\r\n\r\nI have a original post here: https://github.com/airbnb/lottie-android/issues/2308 but I feel it is not resolved.  For the class mention in the post (https://github.com/airbnb/lottie-android/blob/master/lottie/src/main/java/com/airbnb/lottie/LottieCompositionFactory.java#L126), the cacheKey seems used for memory cache but is not used for disk cache and filename generation for disk cache.\r\n\r\nI also narrow down to the root cause (https://github.com/airbnb/lottie-android/blob/master/lottie/src/main/java/com/airbnb/lottie/network/NetworkCache.java#L159) and for the function mentioned above, it uses NetworkFetcher and NetworkFetcher uses NetworkCache, so I also doubt if this would that function the problem.\r\nDoes anybody know if we can customize the filename generation rule or have a fix to reduce the filename length?\r\n\r\nThanks!\r\n\r\n**What version of Lottie did you test this on?**\r\n6.0.0\r\n\r\n**What version of Android did you test this on?**\r\nAndroid 11\r\n\r\n**Steps To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Screenshots**","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2309/timeline","performed_via_github_app":null,"state_reason":"completed"}