{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1734","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1734/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1734/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1734/events","html_url":"https://github.com/airbnb/lottie-android/issues/1734","id":798206587,"node_id":"MDU6SXNzdWU3OTgyMDY1ODc=","number":1734,"title":"Animation doesn't render correctly using Lottie-Compose","user":{"login":"jossiwolf","id":10628007,"node_id":"MDQ6VXNlcjEwNjI4MDA3","avatar_url":"https://avatars.githubusercontent.com/u/10628007?v=4","gravatar_id":"","url":"https://api.github.com/users/jossiwolf","html_url":"https://github.com/jossiwolf","followers_url":"https://api.github.com/users/jossiwolf/followers","following_url":"https://api.github.com/users/jossiwolf/following{/other_user}","gists_url":"https://api.github.com/users/jossiwolf/gists{/gist_id}","starred_url":"https://api.github.com/users/jossiwolf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jossiwolf/subscriptions","organizations_url":"https://api.github.com/users/jossiwolf/orgs","repos_url":"https://api.github.com/users/jossiwolf/repos","events_url":"https://api.github.com/users/jossiwolf/events{/privacy}","received_events_url":"https://api.github.com/users/jossiwolf/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":779072398,"node_id":"MDU6TGFiZWw3NzkwNzIzOTg=","url":"https://api.github.com/repos/airbnb/lottie-android/labels/Rendering%20bug","name":"Rendering bug","color":"0052cc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-02-01T10:25:15Z","updated_at":"2021-02-24T16:16:05Z","closed_at":"2021-02-24T16:16:05Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nWith Lottie-Compose, the animation doesn't render correctly, some parts are missing. The same animation works with `LottieAnimationView`. Am I misusing `LottieAnimation`?\r\n\r\n**What version of Lottie did you test this on?**\r\nLottie-Compose Alpha 05, 06-SNAPSHOT\r\nJetpack Compose Alpha 10, 11\r\n\r\nI didn't test this with the latest snapshot yet because I didn't find the docs for that :D Will test that as soon as I figure out how to include the snapshot :) I don't expect it to change though\r\n\r\n**What version of Android did you test this on?**\r\nPixel 4XL, Android 11\r\n\r\n**Steps To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Use the attached `lightbulb.json` file in the zip (this is from https://lottiefiles.com/7955-lightbulb)\r\n[7955-lightbulb.zip](https://github.com/airbnb/lottie-android/files/5903317/7955-lightbulb.zip)\r\n2. Use `LottieAnimation` to display the animation\r\n\r\n```kotlin\r\nval animationSpec = LottieAnimationSpec.RawRes(R.raw.lightbulb)\r\nval animationState = rememberLottieAnimationState(\r\n    autoPlay = true,\r\n    repeatCount = Int.MAX_VALUE\r\n)\r\nLottieAnimation(\r\n    spec = animationSpec,\r\n    animationState = animationState\r\n)\r\n```\r\n\r\nWrapping `LottieAnimationView` using `AndroidView` works as it should.\r\n\r\n```kotlin\r\n@Composable\r\nfun AndroidLottieAnimationView(\r\n    modifier: Modifier = Modifier,\r\n    spec: LottieAnimationSpec.RawRes,\r\n    animationState: LottieAnimationState\r\n) {\r\n    AndroidView(\r\n        modifier = modifier,\r\n        viewBlock = { context -> LottieAnimationView(context) },\r\n        update = { view ->\r\n            view.apply {\r\n                setAnimation(spec.resId)\r\n                repeatCount = animationState.repeatCount\r\n                frame = animationState.frame\r\n                if (animationState.isPlaying) playAnimation()\r\n            }\r\n        }\r\n    )\r\n}\r\n```\r\n\r\n**Screenshots/Videos**\r\n\r\n|`LottieAnimationView`|`LottieAnimation`|\r\n|---|---|\r\n|![](https://user-images.githubusercontent.com/10628007/106445182-fd1b1700-647e-11eb-82db-a3730ddc282d.gif)|![](https://user-images.githubusercontent.com/10628007/106445006-ca711e80-647e-11eb-8cda-a8a7a30ea677.gif)|","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/1734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/1734/timeline","performed_via_github_app":null,"state_reason":"completed"}