{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2326","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2326/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2326/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2326/events","html_url":"https://github.com/airbnb/lottie-android/issues/2326","id":1779106827,"node_id":"I_kwDOBC8mW85qCwQL","number":2326,"title":"Setting the same URL in LottieAnimationView multiple times results in flickering","user":{"login":"chggr","id":28489751,"node_id":"MDQ6VXNlcjI4NDg5NzUx","avatar_url":"https://avatars.githubusercontent.com/u/28489751?v=4","gravatar_id":"","url":"https://api.github.com/users/chggr","html_url":"https://github.com/chggr","followers_url":"https://api.github.com/users/chggr/followers","following_url":"https://api.github.com/users/chggr/following{/other_user}","gists_url":"https://api.github.com/users/chggr/gists{/gist_id}","starred_url":"https://api.github.com/users/chggr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chggr/subscriptions","organizations_url":"https://api.github.com/users/chggr/orgs","repos_url":"https://api.github.com/users/chggr/repos","events_url":"https://api.github.com/users/chggr/events{/privacy}","received_events_url":"https://api.github.com/users/chggr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":779072398,"node_id":"MDU6TGFiZWw3NzkwNzIzOTg=","url":"https://api.github.com/repos/airbnb/lottie-android/labels/Rendering%20bug","name":"Rendering bug","color":"0052cc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-28T14:39:37Z","updated_at":"2023-12-30T01:04:07Z","closed_at":"2023-12-30T01:04:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Checklist**\r\n\r\n1. My animation doesn't use any [unsupported features](http://airbnb.io/lottie/#/supported-features). _Yes_\r\n2. I know what part of my animation doesn't work. _Yes_\r\n3. I have created a simplified version of my animation. _No, this bug can be reproduced with any animation_\r\n4. I have attached the AEP file (as a zip file so it can be attached) that only has the part of the animation that doesn't work. _No, this bug can be reproduced with any animation_\r\n\r\n**Describe the bug**\r\nSetting the same URL multiple times in a LottieAnimationView results in the view flickering. This is because each time we call LottieAnimationView#setAnimationFromUrl() with the same URL, a new LottieTask is created and the current composition is cleared from the LottieAnimationView. The expected behavior is that the LottieAnimationView should detect that the same URL is set each time and that it does not need to reset and reload the same composition.\r\n\r\nWould you be open for me to send a PR with a fix where the currently loaded URL is stored as part of the LottieAnimationView state and the call to setAnimationFromUrl() does nothing if the URL provided is the same as the currently loaded URL?\r\n\r\n**What version of Lottie did you test this on?**\r\n6.0\r\n\r\n**What version of Android did you test this on?**\r\n13\r\n\r\n**Steps To Reproduce**\r\n\r\n1. Create a UI with a single LottieAnimationView\r\n2. Create a timer that will call [LottieAnimationView#setAnimationFromUrl()](https://github.com/airbnb/lottie-android/blob/1645311b20568448f55dbdc8b8a932485af4819d/lottie/src/main/java/com/airbnb/lottie/LottieAnimationView.java#L534) periodically e.g. every 5 seconds, setting the same URL each time\r\n3. Observe that the LottieAnimationView flickers, although the same composition is loaded each time.\r\n4. The expected behavior is that the LottieAnimationView is not cleared when the same URL is set, because the composition is already loaded and does not need to be reloaded.\r\n\r\n**Screenshots**\r\nI have not created any screenshots yet, please let me know if that would be helpful.","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2326/timeline","performed_via_github_app":null,"state_reason":"completed"}