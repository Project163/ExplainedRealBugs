{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2384","repository_url":"https://api.github.com/repos/airbnb/lottie-android","labels_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2384/labels{/name}","comments_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2384/comments","events_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2384/events","html_url":"https://github.com/airbnb/lottie-android/issues/2384","id":1881962015,"node_id":"I_kwDOBC8mW85wLHYf","number":2384,"title":"The height parameter is not considered when using the SZ property for multiline dynamic text.","user":{"login":"kiran-mercari","id":122421424,"node_id":"U_kgDOB0wAsA","avatar_url":"https://avatars.githubusercontent.com/u/122421424?v=4","gravatar_id":"","url":"https://api.github.com/users/kiran-mercari","html_url":"https://github.com/kiran-mercari","followers_url":"https://api.github.com/users/kiran-mercari/followers","following_url":"https://api.github.com/users/kiran-mercari/following{/other_user}","gists_url":"https://api.github.com/users/kiran-mercari/gists{/gist_id}","starred_url":"https://api.github.com/users/kiran-mercari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiran-mercari/subscriptions","organizations_url":"https://api.github.com/users/kiran-mercari/orgs","repos_url":"https://api.github.com/users/kiran-mercari/repos","events_url":"https://api.github.com/users/kiran-mercari/events{/privacy}","received_events_url":"https://api.github.com/users/kiran-mercari/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":779072398,"node_id":"MDU6TGFiZWw3NzkwNzIzOTg=","url":"https://api.github.com/repos/airbnb/lottie-android/labels/Rendering%20bug","name":"Rendering bug","color":"0052cc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-09-05T13:15:29Z","updated_at":"2023-12-30T00:02:14Z","closed_at":"2023-12-30T00:02:14Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nWhen using the SZ property for dynamic text in the TextLayer, the height parameter is ignored. This means that if a larger text is passed that exceeds the size of the SZ box, the content will overflow and go outside the box.\r\n\r\n\r\n**What version of Lottie did you test this on?**\r\n- 6.1.0\r\n- 6.0.0\r\n\r\n**What version of Android did you test this on?**\r\n- Emulator - Android 6 to 13\r\n- Samsung Galaxy S23+ \r\n- Samsung Galaxy S23 Ultra+\r\n\r\n**Steps To Reproduce**\r\nPlease refer the bellow code:\r\n\r\n@Composable\r\nfun DynamicTextDemo() {\r\n\r\n    val composition by rememberLottieComposition(LottieCompositionSpec.RawRes (R.raw.paragraphtext))\r\n    val progress by animateLottieCompositionAsState(composition)\r\n    val mapTypeFace = composition?.fonts?.map { (k, v) ->\r\n        k to ( v.typeface ?: DEFAULT)\r\n    }?.toMap()\r\n\r\n    val dynamicProperties = rememberLottieDynamicProperties(\r\n        rememberLottieDynamicProperty(\r\n            property = LottieProperty.TEXT,\r\n            value = \"Lottie is a great library to add animated files into your app. In this article, we are going to see..\",\r\n            keyPath = arrayOf(\"...\") // Key path\r\n        ),\r\n    )\r\n\r\n    Box {\r\n        LottieAnimation(\r\n            composition = composition,\r\n            progress = { progress },\r\n            contentScale = ContentScale.FillBounds,\r\n            modifier = Modifier.fillMaxSize(),\r\n            dynamicProperties = dynamicProperties,\r\n            fontMap = mapTypeFace,\r\n        )\r\n    }\r\n}\r\n\r\n\r\nJSON Structure for Multiline:\r\n`\r\n\"t\": {\r\n\t\t\t\"d\": {\r\n\t\t\t\t\"k\": [{\r\n\t\t\t\t\t\"s\": {\r\n\t\t\t\t\t\t\"sz\": [380, 84],\r\n\t\t\t\t\t\t\"ps\": [0, -18.8397216796875],\r\n\t\t\t\t\t\t\"s\": 24,\r\n\t\t\t\t\t\t\"f\": \"Arial-Bold\",\r\n\t\t\t\t\t\t\"t\": \"dynamic_text_1\",\r\n\t\t\t\t\t\t\"ca\": 0,\r\n\t\t\t\t\t\t\"j\": 0,\r\n\t\t\t\t\t\t\"tr\": 20,\r\n\t\t\t\t\t\t\"lh\": 49,\r\n\t\t\t\t\t\t\"ls\": 0,\r\n\t\t\t\t\t\t\"fc\": [0.133, 0.133, 0.133]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"t\": 0\r\n\t\t\t\t}]\r\n\t\t\t}\r\n`\r\n\r\nTextLayer supports multiline text as indicated by the **\"sz\": [380, 84]** property. However, there seems to be an issue with restricting the height of the text. Unfortunately, the codebase does not consider the height parameter, which is why the height restriction is not working properly.\r\n\r\n\r\n**Screenshots**\r\n![Screenshot 2023-09-05 at 6 41 41 PM](https://github.com/airbnb/lottie-android/assets/122421424/bb5dc8ec-16f6-4048-a6ef-a9d2ce307322)\r\n\r\n\r\n","closed_by":{"login":"gpeal","id":1307745,"node_id":"MDQ6VXNlcjEzMDc3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1307745?v=4","gravatar_id":"","url":"https://api.github.com/users/gpeal","html_url":"https://github.com/gpeal","followers_url":"https://api.github.com/users/gpeal/followers","following_url":"https://api.github.com/users/gpeal/following{/other_user}","gists_url":"https://api.github.com/users/gpeal/gists{/gist_id}","starred_url":"https://api.github.com/users/gpeal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpeal/subscriptions","organizations_url":"https://api.github.com/users/gpeal/orgs","repos_url":"https://api.github.com/users/gpeal/repos","events_url":"https://api.github.com/users/gpeal/events{/privacy}","received_events_url":"https://api.github.com/users/gpeal/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/airbnb/lottie-android/issues/2384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/airbnb/lottie-android/issues/2384/timeline","performed_via_github_app":null,"state_reason":"completed"}