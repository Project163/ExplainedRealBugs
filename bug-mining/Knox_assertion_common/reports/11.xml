<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:14:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KNOX-1152] Guard Against Missing Subject in Identity Assertion</title>
                <link>https://issues.apache.org/jira/browse/KNOX-1152</link>
                <project id="12314427" key="KNOX">Apache Knox</project>
                    <description>&lt;p&gt;Within the CommonIdentityAssertionFilter class, it is possible the evaluation of the Subject can return null.  A check should be added for this, error logged and IllegalStateException exception thrown.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13126371">KNOX-1152</key>
            <summary>Guard Against Missing Subject in Identity Assertion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rkellogg">Richard Kellog Jr.</assignee>
                                    <reporter username="rkellogg">Richard Kellog Jr.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Dec 2017 19:56:27 +0000</created>
                <updated>Thu, 28 Mar 2019 13:56:54 +0000</updated>
                            <resolved>Sat, 20 Oct 2018 02:37:11 +0000</resolved>
                                    <version>0.11.0</version>
                    <version>0.12.0</version>
                    <version>0.13.0</version>
                    <version>0.14.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16299033" author="rkellogg" created="Wed, 20 Dec 2017 20:26:30 +0000"  >&lt;p&gt;Patch attached.&lt;/p&gt;</comment>
                            <comment id="16300479" author="lmccay" created="Thu, 21 Dec 2017 19:42:38 +0000"  >&lt;p&gt;This looks good - one nit...&lt;/p&gt;

&lt;p&gt;I think the message can probably indicate a bit more for diagnostics.&lt;br/&gt;
Perhaps, tell them to ensure that the authentication/federation provider is configured correctly?&lt;/p&gt;

&lt;p&gt;It is a general requirement that each authn/federation provider normalize their authentication results into a standard Java Subject with the expected principals. Not doing so may result in a null Subject or a Subject that does not contain the expected principals.&lt;/p&gt;</comment>
                            <comment id="16300519" author="rkellogg" created="Thu, 21 Dec 2017 20:13:13 +0000"  >&lt;p&gt;Revised text:  &quot;Required subject/identity not available.  Check authentication/federation provider for proper configuration.&quot;&lt;/p&gt;</comment>
                            <comment id="16467873" author="pzampino" created="Tue, 8 May 2018 19:42:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rkellogg&quot; class=&quot;user-hover&quot; rel=&quot;rkellogg&quot;&gt;rkellogg&lt;/a&gt; Would you mind rebasing the patch such that the packages are consistent with 1.0.0+ ?&lt;/p&gt;</comment>
                            <comment id="16477822" author="pzampino" created="Wed, 16 May 2018 18:01:42 +0000"  >&lt;p&gt;I&apos;ve tried manually applying&#160;with corrected package names, but it&apos;s not applying cleanly.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rkellogg&quot; class=&quot;user-hover&quot; rel=&quot;rkellogg&quot;&gt;rkellogg&lt;/a&gt; If you&apos;re not able to rebase this patch, we&apos;re going to have to push it out.&lt;/p&gt;</comment>
                            <comment id="16477845" author="lmccay" created="Wed, 16 May 2018 18:15:46 +0000"  >&lt;p&gt;I actually think this may not be needed anymore - the DefaultIdentityAssertion provider should actually be default now and a null Subject not possible. Let me test and see whether we can:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;close as Won&apos;t Fix or Duplicate&lt;/li&gt;
	&lt;li&gt;refactor the patch and get it in&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16486572" author="lmccay" created="Wed, 23 May 2018 01:35:53 +0000"  >&lt;p&gt;I&apos;ve moved this out since I can&apos;t really reproduce it either. Since we have made the Default identity assertion provider be default when there isn&apos;t one configured this may not be an issue anymore.&lt;/p&gt;

&lt;p&gt;However, I am not closing it since the description says that the NPE is occurring in the CommonIdentityAssertionFilter. This implies pretty strongly that there was an identity assertion provider in place.&lt;/p&gt;</comment>
                            <comment id="16639848" author="risdenk" created="Fri, 5 Oct 2018 13:41:12 +0000"  >&lt;p&gt;Not sure how to reproduce but updated the patch to apply cleanly.&lt;/p&gt;</comment>
                            <comment id="16657655" author="risdenk" created="Sat, 20 Oct 2018 02:00:16 +0000"  >&lt;p&gt;Since subject should not be null at this case it would be good to make sure that is the case. Running tests against the rebased patch now.&lt;/p&gt;</comment>
                            <comment id="16657685" author="jira-bot" created="Sat, 20 Oct 2018 02:37:02 +0000"  >&lt;p&gt;Commit 76770fbea66c12f31674c13755374d65fe058b76 in knox&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=risdenk&quot; class=&quot;user-hover&quot; rel=&quot;risdenk&quot;&gt;risdenk&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=knox.git;h=76770fb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=knox.git;h=76770fb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KNOX-1152&quot; title=&quot;Guard Against Missing Subject in Identity Assertion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KNOX-1152&quot;&gt;&lt;del&gt;KNOX-1152&lt;/del&gt;&lt;/a&gt; - Guard Against Missing Subject in Identity Assertion (Rick Kellogg via Kevin Risden)&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16657686" author="risdenk" created="Sat, 20 Oct 2018 02:37:11 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rkellogg&quot; class=&quot;user-hover&quot; rel=&quot;rkellogg&quot;&gt;rkellogg&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13202293">KNOX-1651</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12942566" name="KNOX-1152.patch" size="6347" author="krisden" created="Fri, 5 Oct 2018 13:40:39 +0000"/>
                            <attachment id="12903307" name="KNOX-1152B.patch" size="8507" author="rkellogg" created="Thu, 21 Dec 2017 20:12:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o59r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>