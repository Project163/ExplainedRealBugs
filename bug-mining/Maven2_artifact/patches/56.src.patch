diff --git a/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java b/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java
index 0e72e2f4e..48085356a 100644
--- a/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java
+++ b/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java
@@ -315,6 +315,55 @@ public class DefaultArtifactCollectorTest
         assertEquals( "Check version", "2.5", getArtifact( "c", res.getArtifacts() ).getVersion() );
     }
 
+    public void testCompatibleRecommendedVersion()
+        throws ArtifactResolutionException, InvalidVersionSpecificationException
+    {
+        
+        //this test puts two dependencies on C with 3.2 and [1.0,3.0] as the version.
+        //it puts 2.5 in the pretend repo...we should get back 2.5
+        ArtifactSpec a = createArtifactSpec( "a", "1.0" );
+        ArtifactSpec b = a.addDependency( "b", "1.0" );
+        ArtifactSpec b1 = a.addDependency( "b1", "1.0" );
+        b.addDependency( "c", "3.2" );
+        b1.addDependency( "c", "[1.0,3.0]" );
+      
+        //put it in the repo
+        ArtifactSpec c = createArtifactSpec( "c", "2.5" );
+        source.addArtifact( createArtifactSpec( "c", "2.5" ));
+
+        ArtifactResolutionResult res = collect( a );
+
+        assertEquals( "Check artifact list", createSet( new Object[] { a.artifact, b.artifact,b1.artifact,c.artifact } ),
+                      res.getArtifacts() );
+        assertEquals( "Check version", "2.5", getArtifact( "c", res.getArtifacts() ).getVersion() );
+    }
+    
+    public void testInCompatibleRecommendedVersion()
+    throws ArtifactResolutionException, InvalidVersionSpecificationException
+{
+    
+    //this test puts two dependencies on C with 3.2 and [1.0,3.0] as the version.
+    //it puts 2.5 and 3.0 in the pretend repo...we should get back 3.0
+    ArtifactSpec a = createArtifactSpec( "a", "1.0" );
+    ArtifactSpec b = a.addDependency( "b", "1.0" );
+    ArtifactSpec b1 = a.addDependency( "b1", "1.0" );
+    b.addDependency( "c", "3.2" );
+    b1.addDependency( "c", "[1.0,3.0]" );
+  
+    //put it in the repo
+    ArtifactSpec c = createArtifactSpec( "c", "3.0" );
+    source.addArtifact( createArtifactSpec( "c", "2.5" ));
+    source.addArtifact( createArtifactSpec( "c", "3.0" ));
+    source.addArtifact( createArtifactSpec( "c", "3.2" ));
+
+    
+    ArtifactResolutionResult res = collect( a );
+
+    assertEquals( "Check artifact list", createSet( new Object[] { a.artifact, b.artifact,b1.artifact,c.artifact } ),
+                  res.getArtifacts() );
+    assertEquals( "Check version", "3.0", getArtifact( "c", res.getArtifacts() ).getVersion() );
+}
+    
     public void testIncompatibleRanges()
         throws ArtifactResolutionException, InvalidVersionSpecificationException
     {
