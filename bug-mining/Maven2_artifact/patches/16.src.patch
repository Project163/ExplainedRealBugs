diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/AbstractArtifactMetadata.java b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/AbstractArtifactMetadata.java
index 98153ea8d..28ffb35dd 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/AbstractArtifactMetadata.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/AbstractArtifactMetadata.java
@@ -17,6 +17,7 @@ package org.apache.maven.artifact.metadata;
  */
 
 import org.apache.maven.artifact.Artifact;
+import org.apache.maven.artifact.repository.ArtifactRepository;
 
 /**
  * Common elements of artifact metadata.
@@ -27,19 +28,13 @@ import org.apache.maven.artifact.Artifact;
 public abstract class AbstractArtifactMetadata
     implements ArtifactMetadata
 {
-    protected final String filename;
-
     protected Artifact artifact;
 
-    protected AbstractArtifactMetadata( Artifact artifact, String filename )
-    {
-        this.artifact = artifact;
-        this.filename = filename;
-    }
+    protected ArtifactRepository repository;
 
-    public String getFilename()
+    protected AbstractArtifactMetadata( Artifact artifact )
     {
-        return filename;
+        this.artifact = artifact;
     }
 
     public boolean storedInGroupDirectory()
@@ -66,4 +61,9 @@ public abstract class AbstractArtifactMetadata
     {
         return artifact.getGroupId() + ":" + artifact.getArtifactId();
     }
+
+    public void setRepository( ArtifactRepository repository )
+    {
+        this.repository = repository;
+    }
 }
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadata.java b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadata.java
index 643d86e5d..c27347560 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadata.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadata.java
@@ -33,17 +33,11 @@ public interface ArtifactMetadata
      * Store the metadata in the local repository.
      *
      * @param localRepository the local repository
+     * @param remoteRepository the remote repository it came from
      */
-    void storeInLocalRepository( ArtifactRepository localRepository )
+    void storeInLocalRepository( ArtifactRepository localRepository, ArtifactRepository remoteRepository )
         throws ArtifactMetadataRetrievalException;
 
-    /**
-     * Get the filename of this metadata.
-     *
-     * @return the filename
-     */
-    String getFilename();
-
     /**
      * Whether this metadata should be stored alongside the artifact.
      */
@@ -63,7 +57,22 @@ public interface ArtifactMetadata
     Object getKey();
 
     /**
-     * @Todo delete?
+     * @todo delete?
      */
     boolean isSnapshot();
+
+    /**
+     * Get the filename of this metadata on the local repository.
+     *
+     * @param repository the remote repository it came from
+     * @return the filename
+     */
+    String getLocalFilename( ArtifactRepository repository );
+
+    /**
+     * Get the filename of this metadata on the remote repository.
+     *
+     * @return the filename
+     */
+    String getRemoteFilename();
 }
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/ArtifactRepository.java b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/ArtifactRepository.java
index 63549bb10..c2f7d92b4 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/ArtifactRepository.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/ArtifactRepository.java
@@ -30,7 +30,9 @@ public interface ArtifactRepository
 {
     String pathOf( Artifact artifact );
 
-    String pathOfArtifactMetadata( ArtifactMetadata artifactMetadata );
+    String pathOfRemoteRepositoryMetadata( ArtifactMetadata artifactMetadata );
+
+    String pathOfLocalRepositoryMetadata( ArtifactMetadata metadata, ArtifactRepository repository );
 
     String getUrl();
 
@@ -45,4 +47,6 @@ public interface ArtifactRepository
     ArtifactRepositoryPolicy getReleases();
 
     ArtifactRepositoryLayout getLayout();
+
+    String getKey();
 }
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/ArtifactRepositoryLayout.java b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/ArtifactRepositoryLayout.java
index 5740aaa9d..6bf1a462c 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/ArtifactRepositoryLayout.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/ArtifactRepositoryLayout.java
@@ -18,17 +18,18 @@ package org.apache.maven.artifact.repository.layout;
 
 import org.apache.maven.artifact.Artifact;
 import org.apache.maven.artifact.metadata.ArtifactMetadata;
+import org.apache.maven.artifact.repository.ArtifactRepository;
 
 /**
  * @author jdcasey
  */
 public interface ArtifactRepositoryLayout
 {
-
     String ROLE = ArtifactRepositoryLayout.class.getName();
 
     String pathOf( Artifact artifact );
 
-    String pathOfArtifactMetadata( ArtifactMetadata metadata );
+    String pathOfLocalRepositoryMetadata( ArtifactMetadata metadata, ArtifactRepository repository );
 
+    String pathOfRemoteRepositoryMetadata( ArtifactMetadata metadata );
 }
\ No newline at end of file
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/DefaultRepositoryLayout.java b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/DefaultRepositoryLayout.java
index 279b048d1..d01337d0b 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/DefaultRepositoryLayout.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/DefaultRepositoryLayout.java
@@ -19,6 +19,7 @@ package org.apache.maven.artifact.repository.layout;
 import org.apache.maven.artifact.Artifact;
 import org.apache.maven.artifact.handler.ArtifactHandler;
 import org.apache.maven.artifact.metadata.ArtifactMetadata;
+import org.apache.maven.artifact.repository.ArtifactRepository;
 
 /**
  * @author jdcasey
@@ -56,7 +57,12 @@ public class DefaultRepositoryLayout
         return path.toString();
     }
 
-    public String pathOfArtifactMetadata( ArtifactMetadata metadata )
+    public String pathOfLocalRepositoryMetadata( ArtifactMetadata metadata, ArtifactRepository repository )
+    {
+        return pathOfRepositoryMetadata( metadata, metadata.getLocalFilename( repository ) );
+    }
+
+    private String pathOfRepositoryMetadata( ArtifactMetadata metadata, String filename )
     {
         StringBuffer path = new StringBuffer();
 
@@ -71,11 +77,16 @@ public class DefaultRepositoryLayout
             }
         }
 
-        path.append( metadata.getFilename() );
+        path.append( filename );
 
         return path.toString();
     }
 
+    public String pathOfRemoteRepositoryMetadata( ArtifactMetadata metadata )
+    {
+        return pathOfRepositoryMetadata( metadata, metadata.getRemoteFilename() );
+    }
+
     private String formatAsDirectory( String directory )
     {
         return directory.replace( GROUP_SEPARATOR, PATH_SEPARATOR );
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/LegacyRepositoryLayout.java b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/LegacyRepositoryLayout.java
index a75072e2a..3c4e2a6da 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/LegacyRepositoryLayout.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/repository/layout/LegacyRepositoryLayout.java
@@ -19,6 +19,7 @@ package org.apache.maven.artifact.repository.layout;
 import org.apache.maven.artifact.Artifact;
 import org.apache.maven.artifact.handler.ArtifactHandler;
 import org.apache.maven.artifact.metadata.ArtifactMetadata;
+import org.apache.maven.artifact.repository.ArtifactRepository;
 
 /**
  * @author jdcasey
@@ -26,6 +27,8 @@ import org.apache.maven.artifact.metadata.ArtifactMetadata;
 public class LegacyRepositoryLayout
     implements ArtifactRepositoryLayout
 {
+    private static final String PATH_SEPARATOR = "/";
+
     public String pathOf( Artifact artifact )
     {
         ArtifactHandler artifactHandler = artifact.getArtifactHandler();
@@ -49,14 +52,25 @@ public class LegacyRepositoryLayout
         return path.toString();
     }
 
-    public String pathOfArtifactMetadata( ArtifactMetadata metadata )
+    public String pathOfLocalRepositoryMetadata( ArtifactMetadata metadata, ArtifactRepository repository )
+    {
+        return pathOfRepositoryMetadata( metadata, metadata.getLocalFilename( repository ) );
+    }
+
+    private String pathOfRepositoryMetadata( ArtifactMetadata metadata, String filename )
     {
         StringBuffer path = new StringBuffer();
 
-        path.append( metadata.getGroupId() ).append( "/poms/" );
-        path.append( metadata.getFilename() );
+        path.append( metadata.getGroupId() ).append( PATH_SEPARATOR ).append( "poms" ).append( PATH_SEPARATOR );
+
+        path.append( filename );
 
         return path.toString();
     }
 
+    public String pathOfRemoteRepositoryMetadata( ArtifactMetadata metadata )
+    {
+        return pathOfRepositoryMetadata( metadata, metadata.getRemoteFilename() );
+    }
+
 }
\ No newline at end of file
