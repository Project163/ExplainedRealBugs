diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadataSource.java b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadataSource.java
index 500f20d9a..716428e30 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadataSource.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ArtifactMetadataSource.java
@@ -20,7 +20,6 @@ import org.apache.maven.artifact.Artifact;
 import org.apache.maven.artifact.repository.ArtifactRepository;
 
 import java.util.List;
-import java.util.Set;
 
 /**
  * @author <a href="mailto:jason@maven.org">Jason van Zyl </a>
@@ -28,6 +27,6 @@ import java.util.Set;
  */
 public interface ArtifactMetadataSource
 {
-    Set retrieve( Artifact artifact, ArtifactRepository localRepository, List remoteRepositories )
+    ResolutionGroup retrieve( Artifact artifact, ArtifactRepository localRepository, List remoteRepositories )
         throws ArtifactMetadataRetrievalException;
 }
\ No newline at end of file
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ResolutionGroup.java b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ResolutionGroup.java
new file mode 100644
index 000000000..f02da1245
--- /dev/null
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/metadata/ResolutionGroup.java
@@ -0,0 +1,28 @@
+package org.apache.maven.artifact.metadata;
+
+import java.util.List;
+import java.util.Set;
+
+public class ResolutionGroup
+{
+    
+    private final Set artifacts;
+    private final List resolutionRepositories;
+
+    public ResolutionGroup( Set artifacts, List resolutionRepositories )
+    {
+        this.artifacts = artifacts;
+        this.resolutionRepositories = resolutionRepositories;
+    }
+    
+    public Set getArtifacts()
+    {
+        return artifacts;
+    }
+    
+    public List getResolutionRepositories()
+    {
+        return resolutionRepositories;
+    }
+
+}
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/ArtifactResolutionResult.java b/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/ArtifactResolutionResult.java
index c227e7f3c..f0f4fa512 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/ArtifactResolutionResult.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/ArtifactResolutionResult.java
@@ -16,10 +16,9 @@ package org.apache.maven.artifact.resolver;
  * limitations under the License.
  */
 
-import java.util.HashMap;
-import java.util.Map;
+import java.util.HashSet;
+import java.util.Iterator;
 import java.util.Set;
-import java.util.Collections;
 
 /**
  * @author <a href="mailto:jason@maven.org">Jason van Zyl</a>
@@ -27,27 +26,41 @@ import java.util.Collections;
  */
 public class ArtifactResolutionResult
 {
-    private Set artifacts = Collections.EMPTY_SET;
-
-    private Map conflicts;
+    private Set resolutionNodes;
 
+    // calculated.
+    private Set artifacts;
+    
     public ArtifactResolutionResult()
     {
-        conflicts = new HashMap();
     }
 
     public Set getArtifacts()
     {
+        if ( artifacts == null )
+        {
+            artifacts = new HashSet();
+            
+            for ( Iterator it = resolutionNodes.iterator(); it.hasNext(); )
+            {
+                ResolutionNode node = (ResolutionNode) it.next();
+                artifacts.add( node.getArtifact() );
+            }
+        }
+        
         return artifacts;
     }
-
-    public Map getConflicts()
+    
+    public Set getArtifactResolutionNodes()
     {
-        return conflicts;
+        return resolutionNodes;
     }
 
-    public void setArtifacts( Set artifacts )
+    public void setArtifactResolutionNodes( Set resolutionNodes )
     {
-        this.artifacts = artifacts;
+        this.resolutionNodes = resolutionNodes;
+        
+        // clear the cache
+        this.artifacts = null;
     }
 }
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/DefaultArtifactCollector.java b/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/DefaultArtifactCollector.java
index 746dfb426..969501d37 100644
--- a/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/DefaultArtifactCollector.java
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/DefaultArtifactCollector.java
@@ -20,15 +20,14 @@ import org.apache.maven.artifact.Artifact;
 import org.apache.maven.artifact.factory.ArtifactFactory;
 import org.apache.maven.artifact.metadata.ArtifactMetadataRetrievalException;
 import org.apache.maven.artifact.metadata.ArtifactMetadataSource;
+import org.apache.maven.artifact.metadata.ResolutionGroup;
 import org.apache.maven.artifact.repository.ArtifactRepository;
 import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
 
-import java.util.ArrayList;
 import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.Iterator;
-import java.util.LinkedList;
 import java.util.List;
 import java.util.Map;
 import java.util.Set;
@@ -60,8 +59,8 @@ public class DefaultArtifactCollector
     {
         Map resolvedArtifacts = new HashMap();
 
-        ResolutionNode root = new ResolutionNode( originatingArtifact );
-        root.addDependencies( artifacts, filter );
+        ResolutionNode root = new ResolutionNode( originatingArtifact, remoteRepositories );
+        root.addDependencies( artifacts, remoteRepositories, filter );
 
         recurse( root, resolvedArtifacts, managedVersions, localRepository, remoteRepositories, source, filter,
                  artifactFactory, listeners );
@@ -77,13 +76,13 @@ public class DefaultArtifactCollector
 
                 artifact.setDependencyTrail( node.getDependencyTrail() );
 
-                set.add( artifact );
+                set.add( node );
             }
         }
 
         ArtifactResolutionResult result = new ArtifactResolutionResult();
 
-        result.setArtifacts( set );
+        result.setArtifactResolutionNodes( set );
 
         return result;
     }
@@ -148,15 +147,17 @@ public class DefaultArtifactCollector
             {
                 try
                 {
-                    Set artifacts = source.retrieve( child.getArtifact(), localRepository, remoteRepositories );
-                    child.addDependencies( artifacts, filter );
+                    ResolutionGroup rGroup = source.retrieve( child.getArtifact(), localRepository, remoteRepositories );
+                    child.addDependencies( rGroup.getArtifacts(), rGroup.getResolutionRepositories(), filter );
                 }
                 catch ( CyclicDependencyException e )
                 {
                     // would like to throw this, but we have crappy stuff in the repo
                     // no logger to use here either just now
+                    
+                    // TODO: should the remoteRepositories list be null here?!
                     fireEvent( ResolutionListener.OMIT_FOR_CYCLE, listeners,
-                               new ResolutionNode( e.getArtifact(), child ) );
+                               new ResolutionNode( e.getArtifact(), null, child ) );
                 }
                 catch ( ArtifactMetadataRetrievalException e )
                 {
@@ -249,99 +250,4 @@ public class DefaultArtifactCollector
         }
     }
 
-    private static class ResolutionNode
-    {
-        private Artifact artifact;
-
-        private List children = null;
-
-        private final List parents;
-
-        private final int depth;
-
-        private final ResolutionNode parent;
-
-        public ResolutionNode( Artifact artifact )
-        {
-            this.artifact = artifact;
-            this.depth = 0;
-            this.parents = Collections.EMPTY_LIST;
-            this.parent = null;
-        }
-
-        public ResolutionNode( Artifact artifact, ResolutionNode parent )
-        {
-            this.artifact = artifact;
-            this.depth = parent.depth + 1;
-            this.parents = new ArrayList();
-            this.parents.addAll( parent.parents );
-            this.parents.add( parent.getKey() );
-            this.parent = parent;
-        }
-
-        public Artifact getArtifact()
-        {
-            return artifact;
-        }
-
-        public Object getKey()
-        {
-            return artifact.getDependencyConflictId();
-        }
-
-        public void addDependencies( Set artifacts, ArtifactFilter filter )
-            throws CyclicDependencyException
-        {
-            children = new ArrayList( artifacts.size() );
-
-            for ( Iterator i = artifacts.iterator(); i.hasNext(); )
-            {
-                Artifact a = (Artifact) i.next();
-
-                if ( filter == null || filter.include( a ) )
-                {
-                    if ( parents.contains( a.getDependencyConflictId() ) )
-                    {
-                        a.setDependencyTrail( getDependencyTrail() );
-
-                        throw new CyclicDependencyException( "A dependency has introduced a cycle", a );
-                    }
-
-                    children.add( new ResolutionNode( a, this ) );
-                }
-            }
-        }
-
-        public List getDependencyTrail()
-        {
-            List path = new LinkedList();
-            ResolutionNode node = this;
-            while ( node != null )
-            {
-                path.add( 0, node.getArtifact().getId() );
-                node = node.parent;
-            }
-            return path;
-        }
-
-        public boolean isResolved()
-        {
-            return children != null;
-        }
-
-        public Iterator getChildrenIterator()
-        {
-            return children.iterator();
-        }
-
-        public int getDepth()
-        {
-            return depth;
-        }
-
-        public void setArtifact( Artifact artifact )
-        {
-            this.artifact = artifact;
-        }
-    }
 }
diff --git a/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/ResolutionNode.java b/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/ResolutionNode.java
new file mode 100644
index 000000000..e9b044dcf
--- /dev/null
+++ b/maven-artifact/src/main/java/org/apache/maven/artifact/resolver/ResolutionNode.java
@@ -0,0 +1,117 @@
+package org.apache.maven.artifact.resolver;
+
+import org.apache.maven.artifact.Artifact;
+import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
+
+import java.util.ArrayList;
+import java.util.Collections;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Set;
+
+public class ResolutionNode
+{
+    private Artifact artifact;
+
+    private List children = null;
+
+    private final List parents;
+
+    private final int depth;
+
+    private final ResolutionNode parent;
+
+    private final List remoteRepositories;
+
+    public ResolutionNode( Artifact artifact, List remoteRepositories )
+    {
+        this.artifact = artifact;
+        this.remoteRepositories = remoteRepositories;
+        this.depth = 0;
+        this.parents = Collections.EMPTY_LIST;
+        this.parent = null;
+    }
+
+    public ResolutionNode( Artifact artifact, List remoteRepositories, ResolutionNode parent )
+    {
+        this.artifact = artifact;
+        this.remoteRepositories = remoteRepositories;
+        this.depth = parent.depth + 1;
+        this.parents = new ArrayList();
+        this.parents.addAll( parent.parents );
+        this.parents.add( parent.getKey() );
+        this.parent = parent;
+    }
+
+    public Artifact getArtifact()
+    {
+        return artifact;
+    }
+
+    public Object getKey()
+    {
+        return artifact.getDependencyConflictId();
+    }
+
+    public void addDependencies( Set artifacts, List remoteRepositories, ArtifactFilter filter )
+        throws CyclicDependencyException
+    {
+        children = new ArrayList( artifacts.size() );
+
+        for ( Iterator i = artifacts.iterator(); i.hasNext(); )
+        {
+            Artifact a = (Artifact) i.next();
+
+            if ( filter == null || filter.include( a ) )
+            {
+                if ( parents.contains( a.getDependencyConflictId() ) )
+                {
+                    a.setDependencyTrail( getDependencyTrail() );
+
+                    throw new CyclicDependencyException( "A dependency has introduced a cycle", a );
+                }
+
+                children.add( new ResolutionNode( a, remoteRepositories, this ) );
+            }
+        }
+    }
+
+    public List getDependencyTrail()
+    {
+        List path = new LinkedList();
+        ResolutionNode node = this;
+        while ( node != null )
+        {
+            path.add( 0, node.getArtifact().getId() );
+            node = node.parent;
+        }
+        return path;
+    }
+
+    public boolean isResolved()
+    {
+        return children != null;
+    }
+
+    public Iterator getChildrenIterator()
+    {
+        return children.iterator();
+    }
+
+    public int getDepth()
+    {
+        return depth;
+    }
+
+    public void setArtifact( Artifact artifact )
+    {
+        this.artifact = artifact;
+    }
+    
+    public List getRemoteRepositories()
+    {
+        return remoteRepositories;
+    }
+
+}
diff --git a/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java b/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java
index 1dbc55546..b3491b4e0 100644
--- a/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java
+++ b/maven-artifact/src/test/java/org/apache/maven/artifact/resolver/DefaultArtifactCollectorTest.java
@@ -20,6 +20,7 @@ import org.apache.maven.artifact.Artifact;
 import org.apache.maven.artifact.factory.ArtifactFactory;
 import org.apache.maven.artifact.metadata.ArtifactMetadataRetrievalException;
 import org.apache.maven.artifact.metadata.ArtifactMetadataSource;
+import org.apache.maven.artifact.metadata.ResolutionGroup;
 import org.apache.maven.artifact.repository.ArtifactRepository;
 import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
 import org.apache.maven.artifact.resolver.filter.ExclusionSetFilter;
@@ -339,12 +340,12 @@ public class DefaultArtifactCollectorTest
     {
         Map artifacts = new HashMap();
 
-        public Set retrieve( Artifact artifact, ArtifactRepository localRepository, List remoteRepositories )
+        public ResolutionGroup retrieve( Artifact artifact, ArtifactRepository localRepository, List remoteRepositories )
             throws ArtifactMetadataRetrievalException
         {
             ArtifactSpec a = (ArtifactSpec) artifacts.get( artifact.getId() );
-            return createArtifacts( artifactFactory, a.dependencies, artifact.getScope(),
-                                    artifact.getDependencyFilter() );
+            return new ResolutionGroup( createArtifacts( artifactFactory, a.dependencies, artifact.getScope(),
+                                    artifact.getDependencyFilter() ), Collections.EMPTY_LIST );
         }
 
         private Set createArtifacts( ArtifactFactory artifactFactory, Set dependencies, String inheritedScope,
