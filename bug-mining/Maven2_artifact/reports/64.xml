<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:29:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-2861] NullPointerException in DefaultArtifactCollector for relocated resolvedArtifacts with different version ranges and available versions.</title>
                <link>https://issues.apache.org/jira/browse/MNG-2861</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;In a remoteRepository that I am populating I have a project.  Previously I was deploying artifacts with an old groupId and then decided to switch to having a new more descriptive groupId.  For the old groupId I have deployed versions 1.0 and 1.1.  For the new groupId I have deployed 1.2 and 2.0.  I deployed a relocation POM to the old groupId for the 1.2 version.  I also updated the metadata.xml files to include 1.2 as an available version.  This way projects using version ranges [1,2) will be able to pick up the newest version.  So in the repository I now have:&lt;/p&gt;

&lt;p&gt;oldgroupId:project:1.0&lt;br/&gt;
oldgroupId:project:1.1&lt;br/&gt;
oldgroupId:project:1.2 - redirecting to newgroupId:project:1.2&lt;br/&gt;
newgroupId:project:1.2&lt;br/&gt;
newgroupId:project:2.0&lt;/p&gt;

&lt;p&gt;The oldgroupId&apos;s metadata lists the available versions as &lt;span class=&quot;error&quot;&gt;&amp;#91;1.0,1.1,1.2&amp;#93;&lt;/span&gt;.  The newgroupId&apos;s metadata lists the available versions has &lt;span class=&quot;error&quot;&gt;&amp;#91;1,2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;I have 3 additional projects A, B, C.  A depends on B and C.  B depends on oldgroupId:project:[1,2).  Project B has also finished development and been released so we are avoiding rereleasing it for the groupId change.   C depends on newgroupId:project:[2,3).  When I try to build project A, Maven dies and gives me the following stack trace.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; FATAL ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; null&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Trace&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:168)&lt;br/&gt;
	at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:305)&lt;br/&gt;
	at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:305)&lt;br/&gt;
	at org.apache.maven.artifact.resolver.DefaultArtifactCollector.collect(DefaultArtifactCollector.java:70)&lt;br/&gt;
	at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:284)&lt;br/&gt;
	at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:272)&lt;br/&gt;
	at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:243)&lt;br/&gt;
	at org.apache.maven.plugin.DefaultPluginManager.resolveTransitiveDependencies(DefaultPluginManager.java:1142)&lt;br/&gt;
	at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:374)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:539)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:480)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:459)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:311)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:278)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:143)&lt;br/&gt;
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:330)&lt;br/&gt;
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:123)&lt;br/&gt;
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:272)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.main(Launcher.java:375)&lt;/p&gt;

&lt;p&gt;Since the key for common dependency is the same it tries to resolve the dependency by restricting the version ranges of the current and previous resolved artifacts.  It restricts the previous version to the range of to be [2,3).  However since the only available versions are &lt;span class=&quot;error&quot;&gt;&amp;#91;1.0,1.1,1.2&amp;#93;&lt;/span&gt; it cannot find and match and on line 168 it calls toString() on the returned match which is null.&lt;/p&gt;

&lt;p&gt;I realize that the repository setup might not be completely correct, however this is still an issue since Maven crashes without giving any appropriate message or warning to the cause.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12794244">MNG-2861</key>
            <summary>NullPointerException in DefaultArtifactCollector for relocated resolvedArtifacts with different version ranges and available versions.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brianf">Brian E Fox</assignee>
                                    <reporter username="mkwhitacre">Micah Whitacre</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Mar 2007 11:16:55 +0000</created>
                <updated>Sat, 5 Jul 2025 13:03:45 +0000</updated>
                            <resolved>Mon, 10 Mar 2008 20:52:46 +0000</resolved>
                                    <version>2.0.5</version>
                                    <fixVersion>2.0.9</fixVersion>
                                    <component>Artifacts and Repositories</component>
                        <due></due>
                            <votes>11</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14411998" author="mbeerman" created="Wed, 25 Jul 2007 10:46:54 +0000"  >&lt;p&gt;I think that the relocations are simply exposing a latent OverConstrainedVersionException that isn&apos;t being handled properly. This patch makes Maven throw the &quot;real&quot; error, for me at least.&lt;/p&gt;</comment>
                            <comment id="14412090" author="mbeerman" created="Thu, 9 Aug 2007 15:35:02 +0000"  >&lt;p&gt;Er, looks like I misnamed the patch. It should be &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2861&quot; title=&quot;NullPointerException in DefaultArtifactCollector for relocated resolvedArtifacts with different version ranges and available versions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2861&quot;&gt;&lt;del&gt;MNG-2861&lt;/del&gt;&lt;/a&gt;-maven-artifact.patch, of course.&lt;/p&gt;</comment>
                            <comment id="14412141" author="brettporter" created="Tue, 21 Aug 2007 01:40:07 +0000"  >&lt;p&gt;This would be much easier if you provide a test case... I attempted to reproduce quickly it following the example and wasn&apos;t able to (it succeeds on maven 2.0.5, 2.0.6, 2.0.7 and 2.1-SNAPSHOT). See attached test case.&lt;/p&gt;</comment>
                            <comment id="14412093" author="mbeerman" created="Tue, 21 Aug 2007 10:13:14 +0000"  >&lt;p&gt;I&apos;m having trouble creating a &lt;em&gt;minimized&lt;/em&gt; testcase too... but I do know that someone in our organization seems to encounter this problem almost daily. If it comes to it, I can always email you our entire repository and a project that exhibits the issue. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Other details: The stack trace has morphed slightly in recent versions of Maven, since this bug was first filed. In 2.0.7, it looks like:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; FATAL ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; null&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Trace&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:197)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:367)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:367)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.collect(DefaultArtifactCollector.java:74)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:284)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:272)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.resolveTransitiveDependencies(DefaultPluginManager.java:1238)&lt;/p&gt;

&lt;p&gt;Also, with the patch applied, the build still fails, but with a more informative error message:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Failed to resolve artifact.&lt;/p&gt;

&lt;p&gt;Couldn&apos;t find a version in &lt;span class=&quot;error&quot;&gt;&amp;#91;1.6.0, 1.7, 1.7.1, 2.0&amp;#93;&lt;/span&gt; to match range [2.0-SNAPSHOT,2)&lt;/p&gt;</comment>
                            <comment id="14412005" author="mkwhitacre" created="Tue, 21 Aug 2007 12:06:37 +0000"  >&lt;p&gt;Your testcase worked for me as well.  I found that there was a difference between how your relocation POMs look compared the ones that were deployed in our repo.  The difference was that in your relocation POM you have the following information:&lt;/p&gt;

&lt;p&gt;  &amp;lt;distributionManagement&amp;gt;&lt;br/&gt;
    &amp;lt;relocation&amp;gt;&lt;br/&gt;
      &amp;lt;groupId&amp;gt;newgroupId&amp;lt;/groupId&amp;gt;&lt;br/&gt;
      &amp;lt;artifactId&amp;gt;project&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
      &amp;lt;version&amp;gt;1.2&amp;lt;/version&amp;gt;&lt;br/&gt;
    &amp;lt;/relocation&amp;gt;&lt;br/&gt;
  &amp;lt;/distributionManagement&amp;gt;&lt;/p&gt;

&lt;p&gt;vs. in our relocation POMs we just have this:&lt;/p&gt;

&lt;p&gt;&amp;lt;distributionManagement&amp;gt;&lt;br/&gt;
&amp;lt;relocation&amp;gt;&lt;br/&gt;
&amp;lt;groupId&amp;gt;newgroupId&amp;lt;/groupId&amp;gt;&lt;br/&gt;
&amp;lt;/relocation&amp;gt;&lt;br/&gt;
&amp;lt;/distributionManagement&amp;gt;&lt;/p&gt;

&lt;p&gt;What we have follows the minimal required POM as documented on the Maven site.&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The attachment includes a modified version of your repository (I didn&apos;t regenerate the checksums) so that it follows what we have.  In that case I get the NPE for which this issue is logged.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - &lt;a href=&quot;http://maven.apache.org/guides/mini/guide-relocation.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/guides/mini/guide-relocation.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14412725" author="brianf@infinity.nu" created="Wed, 5 Mar 2008 12:39:16 +0000"  >&lt;p&gt;This may be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2123&quot; title=&quot;NullPointerException when a dependency uses version range and another uses an actual version incompatible with that range&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2123&quot;&gt;&lt;del&gt;MNG-2123&lt;/del&gt;&lt;/a&gt;, i found the same mistake in a few places of the code. Will recheck once 2123 is fixed.&lt;/p&gt;</comment>
                            <comment id="14412753" author="brianf@infinity.nu" created="Fri, 7 Mar 2008 19:32:29 +0000"  >&lt;p&gt;putting this to 2.0.9 so I remember to look again.&lt;/p&gt;</comment>
                            <comment id="14420829" author="brianf@infinity.nu" created="Mon, 10 Mar 2008 12:44:22 +0000"  >&lt;p&gt;I was not able to reproduce using the file based repo, but when I added them to an http repo, i can reproduce in 2.0.9-SNAPSHOT....&lt;/p&gt;</comment>
                            <comment id="14420864" author="brianf@infinity.nu" created="Mon, 10 Mar 2008 20:52:46 +0000"  >&lt;p&gt;fixed + IT&lt;/p&gt;</comment>
                            <comment id="17998166" author="JIRAUSER302100" created="Sat, 5 Jul 2025 13:03:45 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/4874&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#4874&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12796544">MNG-2923</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12796490">MNG-2123</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12797588">MNG-3454</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12712199" name="MNG-2861-maven-project.patch" size="1746" author="mbeerman" created="Wed, 25 Jul 2007 10:46:54 +0000"/>
                            <attachment id="12712496" name="MNG-2861.tar.gz" size="11418" author="brett" created="Tue, 21 Aug 2007 01:40:07 +0000"/>
                            <attachment id="12712495" name="MNG-2861_broken.zip" size="34288" author="mkwhitacre" created="Tue, 21 Aug 2007 12:06:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i297bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>