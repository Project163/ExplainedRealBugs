<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:28:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-2923] Having any active profiles causes the build to fail</title>
                <link>https://issues.apache.org/jira/browse/MNG-2923</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;(This seems to be a regression in 2.0.6, and does not occur in 2.0.5.) If I have any active profiles when building certain projects in Maven 2.0.6, the build will fail. For example, adding something as simple as:&lt;/p&gt;

&lt;p&gt;&amp;lt;profiles&amp;gt;&lt;br/&gt;
    &amp;lt;profile&amp;gt;&lt;br/&gt;
        &amp;lt;id&amp;gt;foo&amp;lt;/id&amp;gt;&lt;br/&gt;
        &amp;lt;activation&amp;gt;&lt;br/&gt;
            &amp;lt;activeByDefault&amp;gt;true&amp;lt;/activeByDefault&amp;gt;&lt;br/&gt;
        &amp;lt;/activation&amp;gt;&lt;br/&gt;
    &amp;lt;/profile&amp;gt;&lt;br/&gt;
&amp;lt;/profiles&amp;gt;&lt;/p&gt;

&lt;p&gt;...to my ~/.m2/settings.xml file will cause the stack trace below, but the build will succeed once I remove it. I&apos;m attaching  my POM for reference.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; FATAL ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; null&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Trace&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:164)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:334)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:334)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.collect(DefaultArtifactCollector.java:75)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:284)&lt;br/&gt;
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:272)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.resolveTransitiveDependencies(DefaultPluginManager.java:1238)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:397)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:539)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:480)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:459)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:311)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:278)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:143)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:334)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:125)&lt;br/&gt;
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:272)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12796544">MNG-2923</key>
            <summary>Having any active profiles causes the build to fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mbeerman">Matthew Beermann</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Apr 2007 09:00:50 +0000</created>
                <updated>Sat, 5 Jul 2025 13:02:58 +0000</updated>
                            <resolved>Mon, 4 Jun 2007 15:06:26 +0000</resolved>
                                    <version>2.0.6</version>
                                    <fixVersion>2.0.7</fixVersion>
                                    <component>Dependencies</component>
                        <due></due>
                            <votes>8</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14411395" author="carlos" created="Wed, 4 Apr 2007 13:08:04 +0000"  >&lt;p&gt;There&apos;s a test case in &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2923&quot; title=&quot;Having any active profiles causes the build to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2923&quot;&gt;&lt;del&gt;MNG-2923&lt;/del&gt;&lt;/a&gt; that causes the same NPE&lt;/p&gt;</comment>
                            <comment id="14411443" author="9gaqfk802@sneakemail.com" created="Wed, 4 Apr 2007 13:42:27 +0000"  >&lt;p&gt;Carlos, I assume you meant &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2929&quot; title=&quot;NPE in DefaultArtifactCollector.recurse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2929&quot;&gt;&lt;del&gt;MNG-2929&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14411470" author="mkwhitacre" created="Wed, 4 Apr 2007 17:53:08 +0000"  >&lt;p&gt;I am encountering this issue both when I have an active profile set and when I do not.  I haven&apos;t debugged fully to see how active profiles play into some of my projects passing but I have debugged through a few times for projects that always throw NPE.&lt;/p&gt;

&lt;p&gt;It seems what is happening is that when building the project it is resolving all of the dependencies.  A dependency is resolved multiple times because it is transitively resolved from different projects.  As it is resolving the dependencies it is encountering different version ranges [1,2) and [1,3).  As it determines the version it wants, enables and disables artifacts, it then restricts the version of the artifact it wants so that the version is set to 1.2 (the one available) but it restricts the versionRange of the artifact to be [].  So the next time transitively finds the dependency on line 164 (the NPE) line it tries to find a version that matches the version range of [].  It therefore can&apos;t find a match and then dies on the toString() call.&lt;/p&gt;

&lt;p&gt;I haven&apos;t broken this down to a simple reproduceable workflow but that is the flow that is causing it to die even without the &amp;lt;activeProfiles/&amp;gt; in the settings.xml file.&lt;/p&gt;</comment>
                            <comment id="14411396" author="mkwhitacre" created="Thu, 5 Apr 2007 10:26:35 +0000"  >&lt;p&gt;Ok so I tracked this down again and am now going to try and see if I can explain it.&lt;/p&gt;

&lt;p&gt;I have a project that transitively inherits a project from multiple locations.  Here is an example of the setup:&lt;/p&gt;

&lt;p&gt;1. projectA:[1,3):test  depth of 4&lt;br/&gt;
2. projectA:[1,3):compile depth of 3&lt;br/&gt;
3. projectA:[1,2):test depth of 2&lt;br/&gt;
4. projectA:[1,2):compile depth of 3.&lt;/p&gt;

&lt;p&gt;The version that should be resolved is 1.2 which is valid for all of those ranges.&lt;/p&gt;

&lt;p&gt;When resolving the dependencies it  resolves them in that order.  By the time it is resolving the 3 instances the first instance has already been disabled.  So when it is resolving the 3 instance it determines that based on the scopes it should enable 2 and disable 3.  On line 193 of DefaultArtifactCollector it sets the version of the farthest (instance 2).  Calling DefaultArtifact.setVersion(String) sets the versionRange of the artifact to null.  When trying to find a match for the versionRange when trying to resolve instance 4, on line 164 of DefaultArtifactCollector it can&apos;t find a match for instance 2 now because its range is null.  So then it throws the NPE on the toString() call.&lt;/p&gt;

&lt;p&gt;Why is calling setVersion clearing out the versionRange?  Shouldn&apos;t it be acceptable to have both specified?&lt;/p&gt;</comment>
                            <comment id="14411409" author="9gaqfk802@sneakemail.com" created="Fri, 6 Apr 2007 10:01:52 +0000"  >&lt;p&gt;In the scenario represented in &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2929&quot; title=&quot;NPE in DefaultArtifactCollector.recurse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2929&quot;&gt;&lt;del&gt;MNG-2929&lt;/del&gt;&lt;/a&gt;, the problem appears to be a result of the VersionRange supplied to VersionRange.restrict having no restrictions and a recommended ArtifactVersion. The recommended version of the supplied VersionRange is ignored in this situation. &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2923&quot; title=&quot;Having any active profiles causes the build to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2923&quot;&gt;&lt;del&gt;MNG-2923&lt;/del&gt;&lt;/a&gt;-maven-artifact.patch&quot; will cause the specified VersionRange&apos;s recommended version to be used if the original VersionRange doesn&apos;t have a recommended version. Doing so resolves the scenario in question.&lt;/p&gt;

&lt;p&gt;I&apos;m not quite sure why the recommended version range of the original VersionRange takes precedence, however. Can someone elaborate on this?&lt;/p&gt;</comment>
                            <comment id="14411450" author="mkwhitacre" created="Thu, 19 Apr 2007 17:12:38 +0000"  >&lt;p&gt;Allan&apos;s patch actually fixes my issues both with an activeProfile set and without.  So +1 for me.&lt;/p&gt;</comment>
                            <comment id="14411709" author="jvanzyl" created="Sat, 2 Jun 2007 11:32:25 +0000"  >&lt;p&gt;I&apos;m testing out this patch now on the trunk and branch. It looks like some &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-1577&quot; title=&quot;dependencyManagement does not work for transitive dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-1577&quot;&gt;MNG-1577&lt;/a&gt; work at play.&lt;/p&gt;</comment>
                            <comment id="14411677" author="jvanzyl" created="Sat, 2 Jun 2007 12:32:18 +0000"  >&lt;p&gt;Patch applied.&lt;/p&gt;</comment>
                            <comment id="14413610" author="dgreenbean" created="Tue, 19 Aug 2008 13:06:33 +0000"  >&lt;p&gt;I am a beginner with Maven, and am getting this issue with Maven 2.0.9.  What&apos;s weird is that I didn&apos;t have this issue for the few months that I have been using this configuration, and suddenly it broke today.  Is there an easy way to tell which dependency it is breaking on?  I have a lot of dependencies in my pom.&lt;/p&gt;</comment>
                            <comment id="17997935" author="JIRAUSER302100" created="Sat, 5 Jul 2025 13:02:58 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/4569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#4569&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12796522">MNG-2929</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12794244">MNG-2861</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12796524">MNG-2928</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12712171" name="MNG-2923-maven-artifact.patch" size="2932" author="9gaqfk802@sneakemail.com" created="Fri, 6 Apr 2007 10:01:52 +0000"/>
                            <attachment id="12712104" name="pom.xml" size="9074" author="mbeerman" created="Tue, 3 Apr 2007 09:00:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i28wjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>