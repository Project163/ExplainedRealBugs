<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:38:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-5660] Validation is using outdated sling/validation/model</title>
                <link>https://issues.apache.org/jira/browse/SLING-5660</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The new &lt;tt&gt;sling/validation/model&lt;/tt&gt; (one property removed) was used only after restarting Validation bundles: &lt;tt&gt;sling.validator.missing-required-property-with-name&lt;/tt&gt;, &lt;tt&gt;location&lt;/tt&gt; was empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12958789">SLING-5660</key>
            <summary>Validation is using outdated sling/validation/model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2016 09:34:47 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:50 +0000</updated>
                            <resolved>Fri, 3 Mar 2017 13:14:39 +0000</resolved>
                                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15241490" author="kwin" created="Thu, 14 Apr 2016 16:53:43 +0000"  >&lt;p&gt;Sorry, I don&apos;t get this, can you provide more info? So after you modified a model in the repository it was not detected until you restarted the validation bundle? So cache invalidation did not work correctly? &lt;br/&gt;
The part&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;sling.validator.missing-required-property-with-name, location was empty.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;is unclear, though. Can you elaborate?&lt;/p&gt;</comment>
                            <comment id="15241501" author="kwin" created="Thu, 14 Apr 2016 16:57:35 +0000"  >&lt;p&gt;To debug the issue with cache invalidation please increase logging to DEBUG level for category &lt;tt&gt;org.apache.sling.validation.impl.resourcemodel.ResourceValidationModelProviderImpl&lt;/tt&gt;. The according event handler which should be triggered is in &lt;a href=&quot;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L147&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15241636" author="olli" created="Thu, 14 Apr 2016 17:58:18 +0000"  >&lt;p&gt;Right, looks like cache invalidation didn&apos;t happen. I&apos;ve removed one property from an validation model and &lt;tt&gt;sling.validator.missing-required-property-with-name&lt;/tt&gt; showed up in the logs with an empty &lt;tt&gt;location&lt;/tt&gt; value.&lt;/p&gt;</comment>
                            <comment id="15889699" author="kwin" created="Wed, 1 Mar 2017 07:45:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Do you still have that problem? If yet, please provide detailed steps for me to reproduce.&lt;/p&gt;</comment>
                            <comment id="15889715" author="kwin" created="Wed, 1 Mar 2017 08:02:44 +0000"  >&lt;p&gt;It might be related to the fact that the EventHandler only looks for changes below a folder called &lt;tt&gt;validation&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L120&lt;/a&gt;) while the XPath query finds validation resource models everywhere below the search paths (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4157&quot; title=&quot;Allow Sling validation to pick up models in any location in the repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4157&quot;&gt;&lt;del&gt;SLING-4157&lt;/del&gt;&lt;/a&gt;). I think we cannot easily get rid of the path requirement, because otherwise the cache would be invalidated way too often (for every change within the resource resolver&apos;s search paths). Relying on the resource type is not possible, as that is not available for removed resource events.&lt;/p&gt;</comment>
                            <comment id="15889921" author="olli" created="Wed, 1 Mar 2017 10:29:54 +0000"  >&lt;p&gt;This issue still happens and we should switch to observation anyway: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6580&quot; title=&quot;Use ResourceChangeListener for validation models&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6580&quot;&gt;SLING-6580&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15889963" author="kwin" created="Wed, 1 Mar 2017 10:51:59 +0000"  >&lt;p&gt;As commented in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6580?focusedCommentId=15889933&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15889933&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-6580?focusedCommentId=15889933&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15889933&lt;/a&gt; I don&apos;t see how switching to observation would change anything. I think that we should rather reestablish a certain naming/path pattern.&lt;/p&gt;</comment>
                            <comment id="15889999" author="olli" created="Wed, 1 Mar 2017 11:24:46 +0000"  >&lt;p&gt;I discourage any limitation to path patterns. Models should be allowed anywhere in &lt;tt&gt;/apps&lt;/tt&gt; and &lt;tt&gt;/libs&lt;/tt&gt; (add we should add a dedicated service user for validation).&lt;/p&gt;</comment>
                            <comment id="15890051" author="kwin" created="Wed, 1 Mar 2017 12:15:53 +0000"  >&lt;p&gt;If we don&apos;t add a path limitation we would need to &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;invalidate the whole cache for every resource removal within &lt;tt&gt;/apps&lt;/tt&gt; or &lt;tt&gt;/libs&lt;/tt&gt;, because you don&apos;t know which &lt;tt&gt;resourceType&lt;/tt&gt; has just been removed&lt;/li&gt;
	&lt;li&gt;invalidate the whole cache for every resource change within &lt;tt&gt;/apps&lt;/tt&gt; or &lt;tt&gt;/libs&lt;/tt&gt;, because just retrieving the &lt;tt&gt;resourceType&lt;/tt&gt; property for every changed event would be too much effort.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;That would be the same with the new observation API.&lt;br/&gt;
Don&apos;t you think that this would invalidate the cache too often?&lt;/p&gt;</comment>
                            <comment id="15890360" author="kwin" created="Wed, 1 Mar 2017 15:19:41 +0000"  >&lt;p&gt;2. cannot be improved although the resource type of the added/modified resource is always sent with each event, because the validation models are built from a complex hierarchy of resources where some of them might have arbitrary &lt;tt&gt;resourceTypes&lt;/tt&gt;. Just think about a validation model where only a new &lt;tt&gt;children/additionalresource&lt;/tt&gt; is added with a resourceType=jcr:primaryType=nt:unstructured. &lt;/p&gt;

&lt;p&gt;I will prepare a fix though which for now always invalidates the cache. I am still not 100% convinced that this is a wise choice, but having a limitation in terms of paths for valdiation models I don&apos;t like either.&lt;/p&gt;</comment>
                            <comment id="15890438" author="kwin" created="Wed, 1 Mar 2017 16:00:03 +0000"  >&lt;p&gt;Applied a fix in &lt;a href=&quot;http://svn.apache.org/r1784980&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1784980&lt;/a&gt;.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Would you mind testing it again?&lt;/p&gt;</comment>
                            <comment id="15891852" author="kwin" created="Thu, 2 Mar 2017 09:03:49 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; for an improved cache invalidation.&lt;/p&gt;</comment>
                            <comment id="15891888" author="olli" created="Thu, 2 Mar 2017 09:15:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, does it still make sense to test or defer until &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; is done?&lt;/p&gt;</comment>
                            <comment id="15891891" author="kwin" created="Thu, 2 Mar 2017 09:18:29 +0000"  >&lt;p&gt;I have not yet a full solution for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; so please test with the current version.&lt;/p&gt;</comment>
                            <comment id="15894318" author="kwin" created="Fri, 3 Mar 2017 13:14:31 +0000"  >&lt;p&gt;With the new caching solution from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; I assume this should be fixed now. If not, please reopen.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13047273">SLING-6580</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12754732">SLING-4157</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w43z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>