{"url":"https://api.github.com/repos/square/okhttp/issues/3895","repository_url":"https://api.github.com/repos/square/okhttp","labels_url":"https://api.github.com/repos/square/okhttp/issues/3895/labels{/name}","comments_url":"https://api.github.com/repos/square/okhttp/issues/3895/comments","events_url":"https://api.github.com/repos/square/okhttp/issues/3895/events","html_url":"https://github.com/square/okhttp/issues/3895","id":300693983,"node_id":"MDU6SXNzdWUzMDA2OTM5ODM=","number":3895,"title":"ConscryptPlatform platform should not globally configure Conscrypt.setUseEngineSocketByDefault","user":{"login":"carterkozak","id":3854321,"node_id":"MDQ6VXNlcjM4NTQzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3854321?v=4","gravatar_id":"","url":"https://api.github.com/users/carterkozak","html_url":"https://github.com/carterkozak","followers_url":"https://api.github.com/users/carterkozak/followers","following_url":"https://api.github.com/users/carterkozak/following{/other_user}","gists_url":"https://api.github.com/users/carterkozak/gists{/gist_id}","starred_url":"https://api.github.com/users/carterkozak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carterkozak/subscriptions","organizations_url":"https://api.github.com/users/carterkozak/orgs","repos_url":"https://api.github.com/users/carterkozak/repos","events_url":"https://api.github.com/users/carterkozak/events{/privacy}","received_events_url":"https://api.github.com/users/carterkozak/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-02-27T16:11:48Z","updated_at":"2018-02-28T15:53:48Z","closed_at":"2018-02-28T10:33:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"What kind of issue is this?\r\n\r\n - [x] Bug report.\r\n\r\n`ConscryptPlatform.buildIfSupported()` globally sets `Conscrypt.setUseEngineSocketByDefault(true)`, which causes HttpUrlConnections used across the jvm to behave differently (connections external to okhttp, okhttp itself works fine). In my case I'm seeing socket timeouts causing tests to fail where there aren't problems with `setUseEngineSocketByDefault` disabled.\r\n\r\nProposed Fix:\r\nWe can invoke `Conscrypt.setUseEngineSocket(SSLSocketFactory, true)` on the `SSLSocketFactory` instance rather than setting global configuration.","closed_by":{"login":"swankjesse","id":133019,"node_id":"MDQ6VXNlcjEzMzAxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/133019?v=4","gravatar_id":"","url":"https://api.github.com/users/swankjesse","html_url":"https://github.com/swankjesse","followers_url":"https://api.github.com/users/swankjesse/followers","following_url":"https://api.github.com/users/swankjesse/following{/other_user}","gists_url":"https://api.github.com/users/swankjesse/gists{/gist_id}","starred_url":"https://api.github.com/users/swankjesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swankjesse/subscriptions","organizations_url":"https://api.github.com/users/swankjesse/orgs","repos_url":"https://api.github.com/users/swankjesse/repos","events_url":"https://api.github.com/users/swankjesse/events{/privacy}","received_events_url":"https://api.github.com/users/swankjesse/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/okhttp/issues/3895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/okhttp/issues/3895/timeline","performed_via_github_app":null,"state_reason":"completed"}