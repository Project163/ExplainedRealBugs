{"url":"https://api.github.com/repos/square/okhttp/issues/4266","repository_url":"https://api.github.com/repos/square/okhttp","labels_url":"https://api.github.com/repos/square/okhttp/issues/4266/labels{/name}","comments_url":"https://api.github.com/repos/square/okhttp/issues/4266/comments","events_url":"https://api.github.com/repos/square/okhttp/issues/4266/events","html_url":"https://github.com/square/okhttp/issues/4266","id":359809895,"node_id":"MDU6SXNzdWUzNTk4MDk4OTU=","number":4266,"title":"3.11.0 breaks on RoboVM","user":{"login":"guillerodriguez","id":2486184,"node_id":"MDQ6VXNlcjI0ODYxODQ=","avatar_url":"https://avatars.githubusercontent.com/u/2486184?v=4","gravatar_id":"","url":"https://api.github.com/users/guillerodriguez","html_url":"https://github.com/guillerodriguez","followers_url":"https://api.github.com/users/guillerodriguez/followers","following_url":"https://api.github.com/users/guillerodriguez/following{/other_user}","gists_url":"https://api.github.com/users/guillerodriguez/gists{/gist_id}","starred_url":"https://api.github.com/users/guillerodriguez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guillerodriguez/subscriptions","organizations_url":"https://api.github.com/users/guillerodriguez/orgs","repos_url":"https://api.github.com/users/guillerodriguez/repos","events_url":"https://api.github.com/users/guillerodriguez/events{/privacy}","received_events_url":"https://api.github.com/users/guillerodriguez/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-09-13T09:15:15Z","updated_at":"2021-05-13T11:38:40Z","closed_at":"2018-09-13T11:38:43Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"OkHttp 3.11.0 breaks on [RoboVM](http://robovm.mobidevelop.com/).\r\n\r\nRoboVM is an AOT compiler for iOS. It uses a runtime class library that is \"derived from Android\" (i.e. based on Apache Harmony), but without any Android specific packages.\r\n\r\nBecause RoboVM's runtime class library is based on Apache Harmony, the checks in AndroidPlatform.buildIfSupported() pass, so OkHttp decides it is running on Android.\r\n\r\nHowever, there are problems later when AndroidPlatform.getSSLContext() uses the Android-specific android.os.Build.VERSION class to decide whether TLS 1.2 is available.\r\n\r\nThis problem is only present in 3.11.0, as it was introduced by [this commit]( https://github.com/square/okhttp/commit/bdbe2dad8806a77bf018b87f4518df250fa67f89).\r\n\r\nHere's the relevant RoboVM issue: https://github.com/MobiVM/robovm/issues/325\r\n","closed_by":{"login":"swankjesse","id":133019,"node_id":"MDQ6VXNlcjEzMzAxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/133019?v=4","gravatar_id":"","url":"https://api.github.com/users/swankjesse","html_url":"https://github.com/swankjesse","followers_url":"https://api.github.com/users/swankjesse/followers","following_url":"https://api.github.com/users/swankjesse/following{/other_user}","gists_url":"https://api.github.com/users/swankjesse/gists{/gist_id}","starred_url":"https://api.github.com/users/swankjesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swankjesse/subscriptions","organizations_url":"https://api.github.com/users/swankjesse/orgs","repos_url":"https://api.github.com/users/swankjesse/repos","events_url":"https://api.github.com/users/swankjesse/events{/privacy}","received_events_url":"https://api.github.com/users/swankjesse/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/okhttp/issues/4266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/okhttp/issues/4266/timeline","performed_via_github_app":null,"state_reason":"completed"}