<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:51:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DELTASPIKE-63] Integration test profiles for OWB and Weld don&apos;t honor category annotations</title>
                <link>https://issues.apache.org/jira/browse/DELTASPIKE-63</link>
                <project id="12312820" key="DELTASPIKE">DeltaSpike</project>
                    <description>&lt;p&gt;It seems like the integration test profiles for OWB and Weld ignore the @Category annotations used to restrict tests to a certain runtime environment like &quot;WebProfile&quot; or &quot;FullProfile&quot;. This problem occurs when running the tests in both &quot;core-impl&quot; and &quot;integration-test&quot;.&lt;/p&gt;

&lt;p&gt;To reproduce this just add this failing method to some test class and execute the tests in the default profile OWB:&lt;/p&gt;

&lt;p&gt;    @Test &lt;br/&gt;
    @Category(WebProfileCategory.class)&lt;br/&gt;
    public void testCategory() &lt;/p&gt;
{
        fail(&quot;Should not get executed!&quot;);
    }
</description>
                <environment>Apache Maven 3.0.3 (r1075438; 2011-02-28 18:31:09+0100)</environment>
        <key id="12539947">DELTASPIKE-63</key>
            <summary>Integration test profiles for OWB and Weld don&apos;t honor category annotations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chkal">Christian Kaltepoth</assignee>
                                    <reporter username="chkal">Christian Kaltepoth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jan 2012 18:33:08 +0000</created>
                <updated>Sat, 11 Feb 2012 02:25:59 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 17:49:37 +0000</resolved>
                                                    <fixVersion>0.1-incubating</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13194532" author="chkal" created="Fri, 27 Jan 2012 08:04:45 +0000"  >&lt;p&gt;I just want to let you know that I&apos;m working on fixing this issue.&lt;/p&gt;

&lt;p&gt;It took me quite some time to find out what&apos;s going wrong but now it seems to work fine. The nice thing is that it will even work without the need to add @Category(SeCategory.class) to all existing tests.&lt;/p&gt;

&lt;p&gt;I&apos;ll prepare a patch and submit it later today.&lt;/p&gt;</comment>
                            <comment id="13195807" author="chkal" created="Sun, 29 Jan 2012 18:00:11 +0000"  >&lt;p&gt;Hey all,&lt;/p&gt;

&lt;p&gt;I spent quite some time on this one but now I think I got it right. I&apos;ll give a short summary of what was wrong and what I did to fix it.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Surefire was ignoring the JUnit categories for some reason. I updated the Surefire plugin to version 2.11 and manually added the JUnit provider in the correct version as a dependency to the plugin. Now both &amp;lt;groups&amp;gt; and &amp;lt;excludedGroups&amp;gt; work fine.&lt;/li&gt;
	&lt;li&gt;The OWB and Weld profiles didn&apos;t configure any JUnit categories for their test execution. Therefore both ran all the tests regardless of their category. Now both exclude WebProfileCategory and FullProfileCategory which works fine. I also updated the profiles for AS7 and Glassfish to execute all the tests as both containers support all the test categories.&lt;/li&gt;
	&lt;li&gt;Another thing that went wrong was that the &quot;integration-test&quot; module didn&apos;t execute the core tests at all. But somehow this was fixed together with the update to Surefire 2.11. The only thing I had to change was to include &quot;arquillian.xml&quot; on the classpath for the core test execution as this file is required for the AS7 and Glassfish profiles.&lt;/li&gt;
	&lt;li&gt;The test ExcludeTest didn&apos;t work correctly on AS7 which was caused by an invalid packaging of the test archive.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The nice thing about my changes is that now all tests without any @Category annotation are executed in all the profiles. Therefore we don&apos;t need to add SeCategory to all the tests. Actually we could even remove SeCategory as it isn&apos;t required anymore.&lt;/p&gt;

&lt;p&gt;The only drawback of my changes is that every module that has &quot;parent-code&quot; or &quot;parent-it&quot; as it&apos;s parent needs to have the category marker interfaces in the test classpath, even &quot;core-api&quot;. For now I copied the 3 interfaces to the &quot;core-api&quot; module. But we could thing about moving them to a separate dependency later.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching the patch to this ticket. I would apply it but I didn&apos;t receive my Apache account up to now. If somebody runs into these problems, feel free to apply it! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13195808" author="chkal" created="Sun, 29 Jan 2012 18:00:45 +0000"  >&lt;p&gt;Patch for the integration test issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512364" name="DELTASPIKE-63.patch" size="19159" author="chkal" created="Sun, 29 Jan 2012 18:00:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uvuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178302</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>