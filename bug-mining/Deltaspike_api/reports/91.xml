<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:52:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DELTASPIKE-1208] deltaspike configuration: Variable Replacement in Configured Values is NOT fully stage aware</title>
                <link>https://issues.apache.org/jira/browse/DELTASPIKE-1208</link>
                <project id="12312820" key="DELTASPIKE">DeltaSpike</project>
                    <description>&lt;p&gt;using the following apache-deltaspike.properties &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;some-service-url=${edge-server-url}/some-service
edge-server-url=undefined
edge-server-url.Development=http:&lt;span class=&quot;code-comment&quot;&gt;//development:8081
&lt;/span&gt;edge-server-url.Staging=http:&lt;span class=&quot;code-comment&quot;&gt;//staging:8081
&lt;/span&gt;edge-server-url.Production=http:&lt;span class=&quot;code-comment&quot;&gt;//prod:8081&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and executing the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;some-service-url=&quot;&lt;/span&gt;+ConfigResolver.getProjectStageAwarePropertyValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;some-service-url&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;having the following java VM arg set:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-Dorg.apache.deltaspike.ProjectStage=Staging
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should result in the output: &lt;br/&gt;
some-service-url=&lt;a href=&quot;http://staging:8081/some-service&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://staging:8081/some-service&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have already contributed a bug fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-1167&quot; title=&quot;deltaspike configuration: Variable Replacement in Configured Values is NOT (!) stage aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DELTASPIKE-1167&quot;&gt;&lt;del&gt;DELTASPIKE-1167&lt;/del&gt;&lt;/a&gt; - unfortunately that didn&apos;t fully solve the issue.&lt;br/&gt;
&lt;del&gt;I plan to provide a fix for this soon.&lt;/del&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE&amp;#93;&lt;/span&gt; patch added&lt;/p&gt;</description>
                <environment></environment>
        <key id="13013642">DELTASPIKE-1208</key>
            <summary>deltaspike configuration: Variable Replacement in Configured Values is NOT fully stage aware</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johndament">John D. Ament</assignee>
                                    <reporter username="vmach">Valentin Maechler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2016 20:17:00 +0000</created>
                <updated>Sat, 5 Nov 2016 12:12:13 +0000</updated>
                            <resolved>Fri, 28 Oct 2016 00:49:11 +0000</resolved>
                                    <version>1.7.1</version>
                                    <fixVersion>1.7.2</fixVersion>
                                    <component>Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15589788" author="vmach" created="Wed, 19 Oct 2016 20:37:00 +0000"  >&lt;p&gt;patch for fix&lt;br/&gt;
Including &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;change in ConfigResolver&lt;/li&gt;
	&lt;li&gt;new test case with new test config. data&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15589991" author="johndament" created="Wed, 19 Oct 2016 21:56:33 +0000"  >&lt;p&gt;Would you be able to raise a PR with this change? You have multiple checkstyle violations which won&apos;t pass our basic checks.  See also &lt;a href=&quot;http://deltaspike.apache.org/source.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://deltaspike.apache.org/source.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15590830" author="vmach" created="Thu, 20 Oct 2016 05:16:40 +0000"  >&lt;p&gt;Oh, please not again ... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;br/&gt;
Same happend last time even though I was convinced to have followed the guidelines.&lt;br/&gt;
I installed IntelliJ and used the &quot;formatting rules&quot; referenced on &lt;a href=&quot;http://deltaspike.apache.org/source.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://deltaspike.apache.org/source.html&lt;/a&gt; ...&lt;/p&gt;

&lt;p&gt;Anyway: What does PR mean?&lt;br/&gt;
&lt;del&gt;Is this a &quot;patch request&quot;?&lt;/del&gt; OK, got it: &quot;pull request&quot;&lt;br/&gt;
&lt;del&gt;What do I have to do?&lt;/del&gt;&lt;br/&gt;
I might also try once more to create a new patch file.&lt;/p&gt;</comment>
                            <comment id="15590918" author="githubbot" created="Thu, 20 Oct 2016 06:03:44 +0000"  >&lt;p&gt;GitHub user maecval opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/deltaspike/pull/67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/deltaspike/pull/67&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-1208&quot; title=&quot;deltaspike configuration: Variable Replacement in Configured Values is NOT fully stage aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DELTASPIKE-1208&quot;&gt;&lt;del&gt;DELTASPIKE-1208&lt;/del&gt;&lt;/a&gt;: Fixed variable replacement in configured values for &#8230;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;deltaspike configuration issue &lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-1208&quot; title=&quot;deltaspike configuration: Variable Replacement in Configured Values is NOT fully stage aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DELTASPIKE-1208&quot;&gt;&lt;del&gt;DELTASPIKE-1208&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    (&lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-1208&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DELTASPIKE-1208&lt;/a&gt;)&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This solves the issue that the &quot;foo.bar&quot; was not resolved correctly in the following case when using getProjectStageAwarePropertyValue.&lt;/p&gt;

&lt;p&gt;    configuration values:&lt;br/&gt;
    ```&lt;br/&gt;
    foo.url=${bar.url}/services&lt;br/&gt;
    bar.url=undefined&lt;br/&gt;
    bar.url.UnitTest=&lt;a href=&quot;http://bar-dev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bar-dev&lt;/a&gt;&lt;br/&gt;
    bar.url.Production=&lt;a href=&quot;http://bar-prod&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bar-prod&lt;/a&gt;&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    Expected for project stage &quot;Production&quot;&lt;br/&gt;
    ```&lt;br/&gt;
    &lt;a href=&quot;http://bar-prod/services&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bar-prod/services&lt;/a&gt;&lt;br/&gt;
    ```&lt;br/&gt;
    when executing&lt;br/&gt;
    ```&lt;br/&gt;
    ConfigResolver.getProjectStageAwarePropertyValue(&quot;foo.url&quot;)&lt;br/&gt;
    ```&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/maecval/deltaspike&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/maecval/deltaspike&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-1208&quot; title=&quot;deltaspike configuration: Variable Replacement in Configured Values is NOT fully stage aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DELTASPIKE-1208&quot;&gt;&lt;del&gt;DELTASPIKE-1208&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/deltaspike/pull/67.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/deltaspike/pull/67.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #67&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0c90a6188f63b731bab119074d9f903ffc530ea5&lt;br/&gt;
Author: tzhmava4 &amp;lt;valentin.maechler@swisscom.com&amp;gt;&lt;br/&gt;
Date:   2016-10-20T05:52:42Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-1208&quot; title=&quot;deltaspike configuration: Variable Replacement in Configured Values is NOT fully stage aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DELTASPIKE-1208&quot;&gt;&lt;del&gt;DELTASPIKE-1208&lt;/del&gt;&lt;/a&gt;: Fixed variable replacement in configured values for getProjectStageAwarePropertyValue&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15610678" author="vmach" created="Thu, 27 Oct 2016 05:02:02 +0000"  >&lt;p&gt;Unclear what happens to the pull request...&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Do I have to merge the change to the master?&lt;br/&gt;
Do I have such privileges?&lt;/p&gt;</comment>
                            <comment id="15611640" author="johndament" created="Thu, 27 Oct 2016 11:51:43 +0000"  >&lt;p&gt;I&apos;ll take a look at the PRs tonight and merge them/comment on them.&lt;/p&gt;</comment>
                            <comment id="15613833" author="johndament" created="Fri, 28 Oct 2016 00:49:12 +0000"  >&lt;p&gt;PR merged, thanks!&lt;/p&gt;</comment>
                            <comment id="15613949" author="githubbot" created="Fri, 28 Oct 2016 01:41:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/deltaspike/pull/67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/deltaspike/pull/67&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12975803">DELTASPIKE-1167</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12834240" name="DELTASPIKE-1208.patch" size="5371" author="vmach" created="Wed, 19 Oct 2016 20:37:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35453:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>