<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:52:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DELTASPIKE-1167] deltaspike configuration: Variable Replacement in Configured Values is NOT (!) stage aware</title>
                <link>https://issues.apache.org/jira/browse/DELTASPIKE-1167</link>
                <project id="12312820" key="DELTASPIKE">DeltaSpike</project>
                    <description>&lt;p&gt;using the following apache-deltaspike.properties &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;edge-server-url=http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8081
&lt;/span&gt;edge-server-url.Development=http:&lt;span class=&quot;code-comment&quot;&gt;//development:8081
&lt;/span&gt;edge-server-url.Staging=http:&lt;span class=&quot;code-comment&quot;&gt;//staging:8081
&lt;/span&gt;edge-server-url.Production=http:&lt;span class=&quot;code-comment&quot;&gt;//prod:8081
&lt;/span&gt;some-service-url=${edge-server-url}/some-service
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and executing the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;some-service-url=&quot;&lt;/span&gt;+ConfigResolver.getProjectStageAwarePropertyValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;some-service-url&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;having the following java VM arg set:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-Dorg.apache.deltaspike.ProjectStage=Staging
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in the output: &lt;br/&gt;
some-service-url=&lt;a href=&quot;http://localhost:8081/some-service&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8081/some-service&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;expected is:&lt;br/&gt;
some-service-url=&lt;a href=&quot;http://staging:8081/some-service&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://staging:8081/some-service&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See in class &lt;tt&gt;org.apache.deltaspike.core.api.config.ConfigResolver.java&lt;/tt&gt; line 233:&lt;br/&gt;
the call to  &lt;tt&gt;getPropertyValue(varName, true)&lt;/tt&gt; does not indicate that it should be stage aware.&lt;br/&gt;
Which it probably can not know (yet) at that location.&lt;/p&gt;

&lt;p&gt;Please see also attachments for detail son how to reproduce the issue.&lt;/p&gt;

&lt;p&gt;BTW: This is an absolute must for our project!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975803">DELTASPIKE-1167</key>
            <summary>deltaspike configuration: Variable Replacement in Configured Values is NOT (!) stage aware</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johndament">John D. Ament</assignee>
                                    <reporter username="vmach">Valentin Maechler</reporter>
                        <labels>
                    </labels>
                <created>Sun, 5 Jun 2016 13:30:55 +0000</created>
                <updated>Wed, 19 Oct 2016 20:17:01 +0000</updated>
                            <resolved>Wed, 13 Jul 2016 10:40:02 +0000</resolved>
                                    <version>1.6.1</version>
                                    <fixVersion>1.7.1</fixVersion>
                                    <component>Configuration</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15315883" author="vmach" created="Sun, 5 Jun 2016 13:45:19 +0000"  >&lt;p&gt;simple java main and config file &quot;apache-deltaspike.properties&quot; to demostrate the issue&lt;/p&gt;</comment>
                            <comment id="15371469" author="vmach" created="Mon, 11 Jul 2016 19:32:21 +0000"  >&lt;p&gt;Patch file containing the fix:&lt;br/&gt;
Fix deltaspike configuration: make variable replacement in Configured Values stage aware.&lt;/p&gt;</comment>
                            <comment id="15371480" author="johndament" created="Mon, 11 Jul 2016 19:42:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vmach&quot; class=&quot;user-hover&quot; rel=&quot;vmach&quot;&gt;vmach&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Technically patch looks very good.  However, could you please follow our formatting guides?  You can find the IntelliJ and Eclipse formats here: &lt;a href=&quot;https://deltaspike.apache.org/source.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://deltaspike.apache.org/source.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15371534" author="vmach" created="Mon, 11 Jul 2016 20:20:36 +0000"  >&lt;p&gt;Fixed code format: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Imported settings.jar into Intellij&lt;/li&gt;
	&lt;li&gt;executed Reformat Code and Optimize Imports&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Even though the changes looked a bit strange compared to the original file.&lt;br/&gt;
But that&apos;s the settings.jar file downloaded from &lt;a href=&quot;https://deltaspike.apache.org/source.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://deltaspike.apache.org/source.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15374801" author="vmach" created="Wed, 13 Jul 2016 10:29:41 +0000"  >&lt;p&gt;Hi John,&lt;/p&gt;

&lt;p&gt;Sorry for not follwing the formatting guidelines.&lt;br/&gt;
I&apos;ve change the patch after I&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;installed IntelliJ&lt;/li&gt;
	&lt;li&gt;imported the settings.jar&lt;/li&gt;
	&lt;li&gt;formatted the changed code&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We would be very pleased if this patch makes it into the next&lt;br/&gt;
bugfix-release (and release).&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;br/&gt;
Valentin&lt;/p&gt;






&lt;p&gt;&amp;#8211; &lt;br/&gt;
=====================&lt;br/&gt;
Valentin Maechler&lt;br/&gt;
Rosengartenstrasse 5&lt;br/&gt;
8853 Lachen&lt;/p&gt;</comment>
                            <comment id="15374818" author="johndament" created="Wed, 13 Jul 2016 10:39:54 +0000"  >&lt;p&gt;Apologies Valentin, there were a couple of issues with the patch, I did some clean and we&apos;re good now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13013642">DELTASPIKE-1208</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12808208" name="ConfigurationTest.java" size="994" author="vmach" created="Sun, 5 Jun 2016 13:45:19 +0000"/>
                            <attachment id="12817235" name="DELTASPIKE-1167.patch" size="77182" author="vmach" created="Mon, 11 Jul 2016 20:20:36 +0000"/>
                            <attachment id="12808209" name="apache-deltaspike.properties" size="227" author="vmach" created="Sun, 5 Jun 2016 13:45:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yzz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>