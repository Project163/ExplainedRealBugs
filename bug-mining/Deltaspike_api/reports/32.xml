<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:51:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DELTASPIKE-275] org.apache.deltaspike.core.impl.exception.control.extension.ExceptionControlExtension#verifyInjectionPoints calls BeanProvider while cdi is not completely started</title>
                <link>https://issues.apache.org/jira/browse/DELTASPIKE-275</link>
                <project id="12312820" key="DELTASPIKE">DeltaSpike</project>
                    <description>&lt;p&gt;call due to org.apache.deltaspike.core.impl.exception.control.HandlerMethodImpl#initBean call&lt;/p&gt;</description>
                <environment></environment>
        <key id="12609585">DELTASPIKE-275</key>
            <summary>org.apache.deltaspike.core.impl.exception.control.extension.ExceptionControlExtension#verifyInjectionPoints calls BeanProvider while cdi is not completely started</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lightguard">Jason Porter</assignee>
                                    <reporter username="romain.manni-bucau">Romain Manni-Bucau</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Sep 2012 20:19:10 +0000</created>
                <updated>Sun, 2 Jun 2013 10:27:03 +0000</updated>
                            <resolved>Tue, 2 Oct 2012 17:26:27 +0000</resolved>
                                                    <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13465908" author="lightguard" created="Fri, 28 Sep 2012 21:14:34 +0000"  >&lt;p&gt;I really have no idea why we&apos;re building everything up lazily, it doesn&apos;t look like it was this way in Seam 3. Seems to me we could do all of this stuff in the constructor, remove the synchronization on the getInjectionPoints method and have this object be immutable. Anyone have problems with that?&lt;/p&gt;</comment>
                            <comment id="13466167" author="romain.manni-bucau" created="Sat, 29 Sep 2012 09:50:15 +0000"  >&lt;p&gt;+1 for lazy stuff&lt;/p&gt;</comment>
                            <comment id="13466175" author="struberg" created="Sat, 29 Sep 2012 11:02:16 +0000"  >&lt;p&gt;Would need to look but one argument for lazy init is if information is not yet available during the container boot. &lt;br/&gt;
In any other case I would also prefer to do as much as possible during boot to speed up runtime. Of course only if it doesn&apos;t mean we get crazy boot times.&lt;/p&gt;</comment>
                            <comment id="13466185" author="romain.manni-bucau" created="Sat, 29 Sep 2012 11:30:00 +0000"  >&lt;p&gt;The point here is the lazy code is called pretty quickly and the lazy side doesnt help for anything&lt;/p&gt;</comment>
                            <comment id="13466188" author="struberg" created="Sat, 29 Sep 2012 11:35:25 +0000"  >&lt;p&gt;but you said &quot;+1 for lazy stuff&quot; ? Was this a typo?&lt;/p&gt;</comment>
                            <comment id="13466189" author="karlkilden" created="Sat, 29 Sep 2012 11:39:56 +0000"  >&lt;p&gt;I think he shortened the sentence:&lt;/p&gt;

&lt;p&gt;&quot; I agree with your comment on lazy initialization&quot;&lt;/p&gt;

&lt;p&gt;Easily misinterpreted &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13466219" author="romain.manni-bucau" created="Sat, 29 Sep 2012 13:01:22 +0000"  >&lt;p&gt;Right, im against lazy init excepted if you have a good reason to do so&lt;/p&gt;</comment>
                            <comment id="13467747" author="struberg" created="Tue, 2 Oct 2012 14:25:50 +0000"  >&lt;p&gt;Oki, Jason tried this out yesterday and did hit the reason for this being lazy so far &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The lazily initialized code in question currently calls BeanManager#getBeans(). If we would invoke this eagerly during the boot time at registration (in @Observes ProcessBean) then we would end up with a random generator as the result of getBeans() would be depending on the order in which ProcessBean gets invoked. &lt;/p&gt;

&lt;p&gt;Another issue is that the spec says nothing about the absolute order of the Events. It only says that ProcessBean must get fired after ProcessAnnotatedType. But the spec doesnt define that ALL Classes must first processed via ProcessAnnotatedType and THEN all those AnnotatedTypes must get transferred to a bean and invoke ProcessBean for all classes.&lt;/p&gt;

&lt;p&gt;It is perfectly valid to to all the stuff class per class, which is the way it&apos;s done in OWB atm. (take a class, build an AnnotatedType, fire ProcessAnnotatedType, create the bean, fire ProcessBean, ... then do the stuff with the next class).&lt;/p&gt;

&lt;p&gt;Calling getBeans() before AfterDeploymentValidation would give you nonsense values and must not be done.&lt;/p&gt;

&lt;p&gt;The point is that the exception control HandlerMethodImpl must only get activated in AfterDeploymentValidation and must NOT be triggered before that time.&lt;/p&gt;</comment>
                            <comment id="13467798" author="lightguard" created="Tue, 2 Oct 2012 15:42:47 +0000"  >&lt;p&gt;Given that we have to do the injectionpoint verification lazily, we&apos;re back to the BeanProvider being called. We simply need to do this with with a BM from the AfterDeploymentValidation event injection, correct?&lt;/p&gt;</comment>
                            <comment id="13467886" author="lightguard" created="Tue, 2 Oct 2012 17:26:27 +0000"  >&lt;p&gt;Cleaned up things a bit, made sure everything was happening in the correct phase.&lt;/p&gt;</comment>
                            <comment id="13468368" author="romain.manni-bucau" created="Wed, 3 Oct 2012 06:39:42 +0000"  >&lt;p&gt;fine, thanks for the clarification&lt;/p&gt;</comment>
                            <comment id="13672429" author="struberg" created="Sun, 2 Jun 2013 10:27:03 +0000"  >&lt;p&gt;shipped with deltaspike-0.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244899</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05v7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32155</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>