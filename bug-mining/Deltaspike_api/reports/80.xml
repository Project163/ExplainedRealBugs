<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:52:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DELTASPIKE-863] NPE when invoking proxy for custom jsf converter</title>
                <link>https://issues.apache.org/jira/browse/DELTASPIKE-863</link>
                <project id="12312820" key="DELTASPIKE">DeltaSpike</project>
                    <description>&lt;p&gt;I am not sure whether it&apos;s during invoking or creating proxy class but it manifests with following exception. The problem is that org.apache.deltaspike.core.util.proxy.invocation.DelegateManualInvocationHandler#proceedOriginal is called before any delegateInvocationHandler is actually set (see org.apache.deltaspike.core.util.proxy.DeltaSpikeProxyContextualLifecycle#create):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;13:40:53,059 SEVERE [org.jboss.examples.deltaspike.expensetracker.app.exception.ExceptionHandlers] (http-/127.0.0.1:8080-2) Handled exception: java.lang.NullPointerException
	at org.apache.deltaspike.core.util.proxy.invocation.DelegateManualInvocationHandler.proceedOriginal(DelegateManualInvocationHandler.java:41) [deltaspike-core-api-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at org.apache.deltaspike.core.util.invocation.AbstractManualInvocationHandler.invoke(AbstractManualInvocationHandler.java:62) [deltaspike-core-api-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at org.apache.deltaspike.core.util.proxy.invocation.DelegateManualInvocationHandler.staticInvoke(DelegateManualInvocationHandler.java:34) [deltaspike-core-api-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at org.jboss.examples.deltaspike.expensetracker.app.converter.TestCurrencyConverter$$DSJsfProxy.clearInitialState(Unknown Source)
	at javax.faces.convert.NumberConverter.setLocale(NumberConverter.java:474) [jboss-jsf-api_2.1_spec-2.1.28.Final-redhat-1.jar:2.1.28.Final-redhat-1]
	at org.jboss.examples.deltaspike.expensetracker.app.converter.TestCurrencyConverter.&amp;lt;init&amp;gt;(TestCurrencyConverter.java:12) [classes:]
	at org.jboss.examples.deltaspike.expensetracker.app.converter.TestCurrencyConverter$$DSJsfProxy.&amp;lt;init&amp;gt;(Unknown Source)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.8.0_31]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) [rt.jar:1.8.0_31]
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [rt.jar:1.8.0_31]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:408) [rt.jar:1.8.0_31]
	at java.lang.Class.newInstance(Class.java:438) [rt.jar:1.8.0_31]
	at org.apache.deltaspike.core.util.proxy.DeltaSpikeProxyContextualLifecycle.create(DeltaSpikeProxyContextualLifecycle.java:63) [deltaspike-core-api-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at org.apache.deltaspike.core.util.bean.ImmutableBean.create(ImmutableBean.java:72) [deltaspike-core-api-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at org.jboss.weld.context.AbstractContext.get(AbstractContext.java:103) [weld-core-1.1.28.Final-redhat-1.jar:1.1.28.Final-redhat-1]
	at org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:90) [weld-core-1.1.28.Final-redhat-1.jar:1.1.28.Final-redhat-1]
	at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) [weld-core-1.1.28.Final-redhat-1.jar:1.1.28.Final-redhat-1]
	at org.jboss.examples.deltaspike.expensetracker.app.converter.TestCurrencyConverter$Proxy$_$$_WeldClientProxy.markInitialState(TestCurrencyConverter$Proxy$_$$_WeldClientProxy.java) [classes:]
	at javax.faces.component.UIOutput.markInitialState(UIOutput.java:197) [jboss-jsf-api_2.1_spec-2.1.28.Final-redhat-1.jar:2.1.28.Final-redhat-1]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1295) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1299) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.markInitialState(FaceletViewHandlingStrategy.java:1285) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:940) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:99) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.28.redhat-7.jar:2.1.28.redhat-7]
	at org.apache.deltaspike.jsf.impl.listener.request.DeltaSpikeLifecycleWrapper.render(DeltaSpikeLifecycleWrapper.java:111) [deltaspike-jsf-module-impl-ee6-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.1.28.Final-redhat-1.jar:2.1.28.Final-redhat-1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.deltaspike.servlet.impl.event.EventBridgeFilter.doFilter(EventBridgeFilter.java:59) [deltaspike-servlet-module-impl-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.deltaspike.servlet.impl.produce.RequestResponseHolderFilter.doFilter(RequestResponseHolderFilter.java:63) [deltaspike-servlet-module-impl-1.3.1-SNAPSHOT.jar:1.3.1-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:231) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:149) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.5.0.Final-redhat-17.jar:7.5.0.Final-redhat-17]
	at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.5.0.Final-redhat-17.jar:7.5.0.Final-redhat-17]
	at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:169) [jboss-as-web-7.5.0.Final-redhat-17.jar:7.5.0.Final-redhat-17]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:150) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:854) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:926) [jbossweb-7.5.4.Final-redhat-1.jar:7.5.4.Final-redhat-1]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_31]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>EAP 6.4.0.Beta, Weld 1.1.28.Final</environment>
        <key id="12784810">DELTASPIKE-863</key>
            <summary>NPE when invoking proxy for custom jsf converter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tandraschko">Thomas Andraschko</assignee>
                                    <reporter username="tremes">Tomas Remes</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Mar 2015 12:48:56 +0000</created>
                <updated>Thu, 21 May 2015 18:51:24 +0000</updated>
                            <resolved>Wed, 25 Mar 2015 08:57:19 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Core</component>
                    <component>JSF-Module</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14375866" author="tremes" created="Mon, 23 Mar 2015 12:52:48 +0000"  >&lt;p&gt;I am not able to attach reproducer war because it&apos;s too big. You can reproduce the issue executing ftest (mvn clean verify -Pftest -Dversion.org.apache.deltaspike=1.3.1-SNAPSHOT) from &lt;a href=&quot;https://github.com/rsmeral/deltaspike-examples/tree/master/expense-tracker/functional-tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rsmeral/deltaspike-examples/tree/master/expense-tracker/functional-tests&lt;/a&gt;. The example uses following problematic class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Named(&lt;span class=&quot;code-quote&quot;&gt;&quot;currencyConverter&quot;&lt;/span&gt;)
@ApplicationScoped
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestCurrencyConverter &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; NumberConverter {

    {
        setLocale(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        setMaxFractionDigits(0);
        setCurrencySymbol(&quot;&quot;);
        setGroupingUsed(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        setType(&lt;span class=&quot;code-quote&quot;&gt;&quot;number&quot;&lt;/span&gt;);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14375874" author="tandraschko" created="Mon, 23 Mar 2015 13:02:42 +0000"  >&lt;p&gt;I think it should work fine if you move the logic from the constructor to a postConstruct method.&lt;br/&gt;
What we actually do is the following:&lt;br/&gt;
1) get/create proxy class&lt;br/&gt;
2) instantiate the proxy&lt;br/&gt;
3) set the invocation handler&lt;/p&gt;

&lt;p&gt;I will fix this for the next release.&lt;/p&gt;</comment>
                            <comment id="14375880" author="tremes" created="Mon, 23 Mar 2015 13:13:15 +0000"  >&lt;p&gt;Yes It works fine with @PostConstruct initialization. &lt;/p&gt;</comment>
                            <comment id="14376322" author="tandraschko" created="Mon, 23 Mar 2015 18:17:11 +0000"  >&lt;p&gt;fixed in trunk&lt;br/&gt;
Could you give it a try?&lt;/p&gt;</comment>
                            <comment id="14377456" author="tremes" created="Tue, 24 Mar 2015 07:56:52 +0000"  >&lt;p&gt;Hey Thomas&lt;br/&gt;
It&apos;s still broken. I am not very experienced with generating proxy files but isn&apos;t the proxy missing any methods? Because if you take a look at the stacktrace then you will see &quot;TestCurrencyConverter$$DSJsfProxy.clearInitialState&quot; which doesn&apos;t make much sense to me. AFAIK I don&apos;t want to call this method from PartialStateHolder with given class/initialization structure above. The latest stacktrace appears to me the same. &lt;/p&gt;</comment>
                            <comment id="14377720" author="tandraschko" created="Tue, 24 Mar 2015 11:27:54 +0000"  >&lt;p&gt;I see, my fix can&apos;t work of course as the super constructor must be called first:&lt;br/&gt;
public TestCurrencyConverter$$DSJsfProxy(InvocationHandler invocationHandler) {&lt;br/&gt;
         super();&lt;br/&gt;
         this.invocationHandler = invocationHandler;&lt;br/&gt;
}&lt;br/&gt;
Don&apos;t know how we could fix this...&lt;/p&gt;

&lt;p&gt;#clearInitialState is called by the JSF impl if you call e.g. setLocale(null);&lt;/p&gt;</comment>
                            <comment id="14378702" author="tandraschko" created="Tue, 24 Mar 2015 21:43:13 +0000"  >&lt;p&gt;Sorry but i&apos;m unable to run the tests provided via the link out of the box. I always get some exceptions like &quot;jbossHome null must exist&quot; and else.&lt;br/&gt;
I proably fixed it now, would you please give it a try a gain?&lt;/p&gt;</comment>
                            <comment id="14379517" author="tremes" created="Wed, 25 Mar 2015 08:55:47 +0000"  >&lt;p&gt;You likely need to set the $JBOSS_HOME variable. Anyway it seems to work now. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27833:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>