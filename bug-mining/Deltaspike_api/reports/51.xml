<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:51:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DELTASPIKE-384] ViewConfigUtils.toNodeList() fails in EAR</title>
                <link>https://issues.apache.org/jira/browse/DELTASPIKE-384</link>
                <project id="12312820" key="DELTASPIKE">DeltaSpike</project>
                    <description>&lt;p&gt;ViewConfigUtils.toNodeList() does not work in my EAR. ClassUtils.tryToLoadClassForName() returns null for every class that toNodeList() uses it to try to load. This eventually results in a NullPointerException.&lt;/p&gt;

&lt;p&gt;To work around the problem, I have substituted my own version of the ViewConfigUtils class, containing the below rewrite of toNodeList() which is equivalent but doesn&apos;t require use of any classloaders:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;gt; toNodeList(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; nodeClass) {
	List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;gt; treePath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;gt;();
	&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; {
		treePath.add(0, nodeClass);
		nodeClass = nodeClass.getEnclosingClass();
	} &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (nodeClass != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; treePath;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>JBoss AS 7.2.0.Final (EAP 6.1.0.Alpha1)</environment>
        <key id="12654016">DELTASPIKE-384</key>
            <summary>ViewConfigUtils.toNodeList() fails in EAR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gpetracek">Gerhard Petracek</assignee>
                                    <reporter username="rcd">Richard DiCroce</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jun 2013 21:17:26 +0000</created>
                <updated>Thu, 20 Mar 2014 07:44:17 +0000</updated>
                            <resolved>Mon, 1 Jul 2013 21:02:14 +0000</resolved>
                                    <version>0.4</version>
                                    <fixVersion>0.5</fixVersion>
                                    <component>JSF-Module</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13694127" author="rcd" created="Wed, 26 Jun 2013 18:03:20 +0000"  >&lt;p&gt;Attach patch for the described solution&lt;/p&gt;</comment>
                            <comment id="13696361" author="gpetracek" created="Sun, 30 Jun 2013 16:18:00 +0000"  >&lt;p&gt;a view-config is not shared across web-apps -&amp;gt; therefore this issue is blocked by DS-335.&lt;/p&gt;</comment>
                            <comment id="13696416" author="rcd" created="Sun, 30 Jun 2013 22:04:51 +0000"  >&lt;p&gt;I agree view configs should not be shared across WARs, and I am not trying to do that. I understand why support for EARs is tricky, but I don&apos;t see why a decision about how to support EARs should block the application of this patch. The code I&apos;ve provided will work fine in a WAR and is much simpler than the current code, which does a bunch of unnecessary string parsing and class loading by name in order to produce the same output.&lt;/p&gt;</comment>
                            <comment id="13696421" author="johndament" created="Sun, 30 Jun 2013 22:17:39 +0000"  >&lt;p&gt;The patch looks reasonable.  Did you run it in both a WAR and EAR, seems working ok?&lt;/p&gt;</comment>
                            <comment id="13696422" author="rcd" created="Sun, 30 Jun 2013 22:26:27 +0000"  >&lt;p&gt;Yes, I have tried it in an EAR and a WAR and it seems to work fine in both.&lt;/p&gt;</comment>
                            <comment id="13696423" author="johndament" created="Sun, 30 Jun 2013 22:29:48 +0000"  >&lt;p&gt;thanks for the patch.  I&apos;ll test it out locally this evening and merge it in.&lt;br/&gt;
This shouldn&apos;t be held up by ear support since there&apos;s really nothing CDI centric about this feature.&lt;/p&gt;</comment>
                            <comment id="13696716" author="gpetracek" created="Mon, 1 Jul 2013 10:50:58 +0000"  >&lt;p&gt;even if you load the class, you have an issue with providing the correct result to the correct web-application -&amp;gt; the issue is just moved to a later point (which is even harder to find).&lt;br/&gt;
since there are that many different issues with EARs, i wouldn&apos;t use an EAR with multiple web-apps right now (you will see many strange issues and side-effects) and the benefit is usually minimal.&lt;br/&gt;
if you just have one web-application per EAR, you don&apos;t need to keep the ds-jsf module as shared lib -&amp;gt; you don&apos;t have the issue.&lt;br/&gt;
instead of having 20 small patches which don&apos;t solve the overall issue, we should really fix the real issue and check the details based on the agreed approach.&lt;br/&gt;
(or just use a server which is compatible with what we have right now.)&lt;/p&gt;</comment>
                            <comment id="13696726" author="gpetracek" created="Mon, 1 Jul 2013 11:03:06 +0000"  >&lt;p&gt;@john for sure the overall issue is cdi specific, since the configs are collected in an extension-instance (like all the other extensions do currently) -&amp;gt; depending on the server you are using, you will get even more issues and side-effects at a later point.&lt;br/&gt;
-&amp;gt; we really need DS-335. everything else is a waste of time, since we have to review all parts based on the final approach for DS-335 anyway.&lt;br/&gt;
currently use-cases which really need ds as a shared lib in an EAR are broken anyway (in most servers).&lt;br/&gt;
(if you don&apos;t have use-cases which really need it, you can do it differently and you won&apos;t/shouldn&apos;t have an issue with it.)&lt;/p&gt;</comment>
                            <comment id="13696836" author="rcd" created="Mon, 1 Jul 2013 14:12:25 +0000"  >&lt;p&gt;@Gerhard: the EAR has two WARs, one for a JSF application and another for a JAX-RS web service. The JSF module is not being shared in the EAR lib. It is part of the appropriate WAR&apos;s lib. The problem is that the current code uses ClassUtils to try to load the class and doesn&apos;t specify a classloader, so ClassUtils uses its own classloader. But ClassUtils is part of DS core, and the core module is in the EAR lib, which means it uses the EAR&apos;s classloader, which can&apos;t see the classes in the WAR. I don&apos;t see how any solution to &lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-335&quot; title=&quot;re-visit support of EARs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DELTASPIKE-335&quot;&gt;&lt;del&gt;DELTASPIKE-335&lt;/del&gt;&lt;/a&gt; is going to fix that. But if you still don&apos;t want to commit the patch because it fixes this issue (for me, at least) then consider committing it because it makes the code cleaner by removing a bunch of unnecessary gymnastics.&lt;/p&gt;</comment>
                            <comment id="13697171" author="gpetracek" created="Mon, 1 Jul 2013 21:01:34 +0000"  >&lt;p&gt;agreed &amp;amp; committed ( see &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=deltaspike.git;a=commit;h=7297d95bb3b73401aff2c44e66b7ced163d8d886&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=deltaspike.git;a=commit;h=7297d95bb3b73401aff2c44e66b7ced163d8d886&lt;/a&gt; )&lt;br/&gt;
thx!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589778" name="deltaspike-384.patch" size="2188" author="rcd" created="Wed, 26 Jun 2013 18:03:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334293</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lo07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>