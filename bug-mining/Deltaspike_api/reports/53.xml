<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:51:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DELTASPIKE-385] Spurious BeanManagerProvider warnings when used in EAR</title>
                <link>https://issues.apache.org/jira/browse/DELTASPIKE-385</link>
                <project id="12312820" key="DELTASPIKE">DeltaSpike</project>
                    <description>&lt;p&gt;BeanManagerProvider spams the log with this warning, long after the container has been started:&lt;br/&gt;
&quot;When using the BeanManager to retrieve Beans before the Container is started, non-portable behaviour results!&quot;&lt;/p&gt;

&lt;p&gt;The problem appears to be caused by having deltaspike-core-api in the EAR /lib directory and using BeanManagerProvider from inside a WAR module. The warning gets printed when the booted flag for the appropriate BeanManagerInfo is false, and BeanManagerInfo instances initialize it to false when they are created. The only place the booted flag gets changed to true is in cleanupFinalBeanManagers(), which iterates over all the BeanManagerInfo instances that exist at the time it is called.&lt;/p&gt;

&lt;p&gt;In my case, the only BeanManagerInfo that exists when cleanupFinalBeanManagers() is called is the one that was created when the setBeanManager() observer method was called by the container. But the classloader in use when setBeanManager() was called was the classloader for the entire EAR. Because I don&apos;t attempt to use BeanManagerProvider until after cleanupFinalBeanManagers() is called, this means that the BeanManagerInfo for the WAR classloader is created with the booted flag set to false (which is incorrect) and the flag is never changed to true.&lt;/p&gt;</description>
                <environment>JBoss AS 7.2.0.Final (EAP 6.1.0.Alpha1)</environment>
        <key id="12654166">DELTASPIKE-385</key>
            <summary>Spurious BeanManagerProvider warnings when used in EAR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="struberg">Mark Struberg</assignee>
                                    <reporter username="rcd">Richard DiCroce</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Jun 2013 14:40:07 +0000</created>
                <updated>Wed, 15 Apr 2015 09:11:19 +0000</updated>
                            <resolved>Sat, 10 Aug 2013 12:16:23 +0000</resolved>
                                    <version>0.4</version>
                                    <fixVersion>0.5</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13696355" author="shadowdz" created="Sun, 30 Jun 2013 15:10:36 +0000"  >&lt;p&gt;I was in trouble with this one, too. So i have written a small utility-class bring a workaround in place. You can find it on as gist &lt;a href=&quot;https://gist.github.com/dzwicker/5895476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/dzwicker/5895476&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13735852" author="struberg" created="Sat, 10 Aug 2013 11:21:04 +0000"  >&lt;p&gt;What we might try to do is that we also &apos;flag&apos; parent ClassLoaders. Means checking the parentClassloader and reset the flag for them as well. &lt;/p&gt;

&lt;p&gt;My assumption is that once we get this event to some child classloader CDI Extension, then the CDI handling for the parent classpath must be finished already. &lt;/p&gt;</comment>
                            <comment id="13735883" author="struberg" created="Sat, 10 Aug 2013 12:14:40 +0000"  >&lt;p&gt;After thinking through it I think what happened is:&lt;/p&gt;

&lt;p&gt;JBossAS boots a BeanManager for the shared EAR parts. If the extension resides in the EAR lib, which classes will get scanned? Also the ones from the WAR files? &lt;br/&gt;
In any case, the AfterBeanValidation for the shared EAR jars seems to get triggered before the BeanManagerInfo gets created. &lt;br/&gt;
As a fix for this situation I now check whether any parent ClassLoader has a BeanManagerInfo with a booted flag set. &lt;/p&gt;

&lt;p&gt;PS: EAR is in general a very ugly part due to the missing ClassLoader definition in the EE umbrella spec. We tried to fix this in CDI-1.1 but had to give up due to missing definitions in EE itself. See CDI-129&lt;/p&gt;</comment>
                            <comment id="13735884" author="struberg" created="Sat, 10 Aug 2013 12:16:55 +0000"  >&lt;p&gt;Daniel, Richard, could you please try this fix and report if it works now? txs!&lt;/p&gt;</comment>
                            <comment id="13736884" author="rcd" created="Mon, 12 Aug 2013 14:07:45 +0000"  >&lt;p&gt;I&apos;m busy with other projects at the moment, but I&apos;ll try to carve out some time to test it later this week.&lt;/p&gt;</comment>
                            <comment id="14495747" author="ngdem" created="Wed, 15 Apr 2015 06:38:32 +0000"  >&lt;p&gt;Hi There,&lt;/p&gt;

&lt;p&gt;The issue is flagged as resolved.&lt;br/&gt;
However, with the latest release of detlta spike I notice the same warning messages in the application server log.&lt;br/&gt;
In this case weblogic 12.1.2 and some bugfix patches .&lt;/p&gt;

&lt;p&gt;The application is, in this case, a war, not an EAR.&lt;br/&gt;
I this problem a class loader related issue?&lt;/p&gt;

&lt;p&gt;The application is again since long deployed and running, but the warning stay for the duration of the deployment lifetime.&lt;/p&gt;

&lt;p&gt;Kind regards.&lt;/p&gt;</comment>
                            <comment id="14495784" author="gpetracek" created="Wed, 15 Apr 2015 07:14:20 +0000"  >&lt;p&gt;please have a look at the current snapshot (also see &lt;a href=&quot;https://issues.apache.org/jira/browse/DELTASPIKE-833&quot; title=&quot;BeanManagerProvider Log Flood&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DELTASPIKE-833&quot;&gt;&lt;del&gt;DELTASPIKE-833&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="14495902" author="ngdem" created="Wed, 15 Apr 2015 09:11:19 +0000"  >&lt;p&gt;Hi Gerhard,&lt;/p&gt;

&lt;p&gt;Many thanks for referring to the deltaspike-833.&lt;br/&gt;
I will try to find a change to test the deployment against the snapshot verison.&lt;/p&gt;

&lt;p&gt;Many thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1loxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334769</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>