diff --git a/deltaspike/core/api/src/main/java/org/apache/deltaspike/core/api/config/ConfigResolver.java b/deltaspike/core/api/src/main/java/org/apache/deltaspike/core/api/config/ConfigResolver.java
index c70557b38..b798d461f 100644
--- a/deltaspike/core/api/src/main/java/org/apache/deltaspike/core/api/config/ConfigResolver.java
+++ b/deltaspike/core/api/src/main/java/org/apache/deltaspike/core/api/config/ConfigResolver.java
@@ -35,6 +35,7 @@ import org.apache.deltaspike.core.api.projectstage.ProjectStage;
 import org.apache.deltaspike.core.spi.config.ConfigFilter;
 import org.apache.deltaspike.core.spi.config.ConfigSource;
 import org.apache.deltaspike.core.spi.config.ConfigSourceProvider;
+import org.apache.deltaspike.core.util.ClassUtils;
 import org.apache.deltaspike.core.util.ProjectStageProducer;
 import org.apache.deltaspike.core.util.ServiceUtils;
 
@@ -93,7 +94,7 @@ public final class ConfigResolver
         getConfigSources();
 
         // and now we can easily add our own
-        ClassLoader currentClassLoader = ConfigResolver.class.getClassLoader();
+        ClassLoader currentClassLoader = ClassUtils.getClassLoader(null);
         ConfigSource[] configuredConfigSources = configSources.get(currentClassLoader);
 
         List<ConfigSource> allConfigSources = new ArrayList<ConfigSource>();
@@ -109,7 +110,7 @@ public final class ConfigResolver
      */
     public static synchronized void freeConfigSources()
     {
-        configSources.remove(ConfigResolver.class.getClassLoader());
+        configSources.remove(ClassUtils.getClassLoader(null));
     }
 
     /**
@@ -129,7 +130,7 @@ public final class ConfigResolver
      */
     public static List<ConfigFilter> getConfigFilters()
     {
-        ClassLoader cl = ConfigResolver.class.getClassLoader();
+        ClassLoader cl = ClassUtils.getClassLoader(null);
         List<ConfigFilter> currentConfigFilters = configFilters.get(cl);
         if (currentConfigFilters == null)
         {
@@ -376,7 +377,7 @@ public final class ConfigResolver
 
     private static synchronized ConfigSource[] getConfigSources()
     {
-        ClassLoader currentClassLoader = ConfigResolver.class.getClassLoader();
+        ClassLoader currentClassLoader = ClassUtils.getClassLoader(null);
 
         ConfigSource[] appConfigSources = configSources.get(currentClassLoader);
 
