diff --git a/assertj-core/src/main/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionDriver.java b/assertj-core/src/main/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionDriver.java
index 56c5a7a83..c0b833e86 100644
--- a/assertj-core/src/main/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionDriver.java
+++ b/assertj-core/src/main/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionDriver.java
@@ -237,8 +237,10 @@ public class RecursiveAssertionDriver {
   }
 
   private boolean nodeIsJavaTypeToIgnore(Object node) {
-    String canonicalName = node.getClass().getCanonicalName();
-    boolean isJCLType = canonicalName.startsWith("java.") || canonicalName.startsWith("javax.");
+    String name = node.getClass().getCanonicalName();
+    // best effort if canonical name is null
+    if (name == null) name = node.getClass().getName();
+    boolean isJCLType = name.startsWith("java.") || name.startsWith("javax.");
     return isJCLType && configuration.shouldSkipJavaLibraryTypeObjects();
   }
 
diff --git a/assertj-core/src/test/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionAssert_hasNoNullFields_Test.java b/assertj-core/src/test/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionAssert_hasNoNullFields_Test.java
index ea11d95d3..225aad446 100644
--- a/assertj-core/src/test/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionAssert_hasNoNullFields_Test.java
+++ b/assertj-core/src/test/java/org/assertj/core/api/recursive/assertion/RecursiveAssertionAssert_hasNoNullFields_Test.java
@@ -187,4 +187,36 @@ class RecursiveAssertionAssert_hasNoNullFields_Test {
     then(error).hasMessageContainingAll("optionalOuter", "inner.optional");
   }
 
+  interface I {
+  }
+
+  class O {
+    public I i;
+  }
+
+  @Test
+  public void should_support_anonymous_classes() {
+    // GIVEN
+    O o = new O();
+    o.i = new I() {}; // anonymous class
+    // WHEN/THEN
+    then(o).usingRecursiveAssertion()
+           .hasNoNullFields();
+  }
+
+  @Test
+  public void should_support_local_classes() {
+    // GIVEN
+    class PhoneNumber {
+    }
+    class WithPhoneNumber {
+      PhoneNumber phoneNumber = new PhoneNumber();
+    }
+    WithPhoneNumber withPhoneNumber = new WithPhoneNumber();
+    withPhoneNumber.phoneNumber = new PhoneNumber();
+    // WHEN/THEN
+    then(withPhoneNumber).usingRecursiveAssertion()
+                         .hasNoNullFields();
+  }
+
 }
