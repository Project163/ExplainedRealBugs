{"url":"https://api.github.com/repos/assertj/assertj/issues/2147","repository_url":"https://api.github.com/repos/assertj/assertj","labels_url":"https://api.github.com/repos/assertj/assertj/issues/2147/labels{/name}","comments_url":"https://api.github.com/repos/assertj/assertj/issues/2147/comments","events_url":"https://api.github.com/repos/assertj/assertj/issues/2147/events","html_url":"https://github.com/assertj/assertj/issues/2147","id":832757125,"node_id":"MDU6SXNzdWU4MzI3NTcxMjU=","number":2147,"title":"containsExactly does not work with the recursive comparison when comparing different types","user":{"login":"jakubbrodzinski","id":23194191,"node_id":"MDQ6VXNlcjIzMTk0MTkx","avatar_url":"https://avatars.githubusercontent.com/u/23194191?v=4","gravatar_id":"","url":"https://api.github.com/users/jakubbrodzinski","html_url":"https://github.com/jakubbrodzinski","followers_url":"https://api.github.com/users/jakubbrodzinski/followers","following_url":"https://api.github.com/users/jakubbrodzinski/following{/other_user}","gists_url":"https://api.github.com/users/jakubbrodzinski/gists{/gist_id}","starred_url":"https://api.github.com/users/jakubbrodzinski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakubbrodzinski/subscriptions","organizations_url":"https://api.github.com/users/jakubbrodzinski/orgs","repos_url":"https://api.github.com/users/jakubbrodzinski/repos","events_url":"https://api.github.com/users/jakubbrodzinski/events{/privacy}","received_events_url":"https://api.github.com/users/jakubbrodzinski/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/assertj/assertj/milestones/58","html_url":"https://github.com/assertj/assertj/milestone/58","labels_url":"https://api.github.com/repos/assertj/assertj/milestones/58/labels","id":6252141,"node_id":"MDk6TWlsZXN0b25lNjI1MjE0MQ==","number":58,"title":"3.20.0","description":"","creator":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":36,"state":"closed","created_at":"2020-12-29T10:12:59Z","updated_at":"2021-06-15T22:30:47Z","due_on":null,"closed_at":"2021-06-15T22:30:32Z"},"comments":4,"created_at":"2021-03-16T12:40:33Z","updated_at":"2024-10-02T23:54:12Z","closed_at":"2021-03-21T05:34:35Z","author_association":"NONE","type":{"id":2594683,"node_id":"IT_kwDOASBds84AJ5d7","name":"üêõ Bug","description":" A general bug ","color":"red","created_at":"2024-01-25T19:41:59Z","updated_at":"2025-05-30T17:34:50Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Summary\r\nI faced an unexpected behavior (for me) with `usingRecursiveFieldByFieldElementComparator` when using it with `containsExactly`.\r\n\r\nWhen i use `.usingRecursiveFieldByFieldElementComparator()` with `.containsExactlyInAnyOrder()`, it works just fine, so the elements are correct.\r\nWhen I `extract` every field from class and use `containsExtacly` with tuples, it works just fine, so the order is correct.\r\nBut when I combine `usingRecursiveFieldByFieldElementComparator()` with `containsExactly` the outcome is different than I expected.\r\n\r\nIn addition without calling `asList()` my example won't compile, because it expects `ListEntryDto..`.  in `containsExatcyl` method. I am not sure what I am doing wrong, since it's almost identicial situation to the one from example(https://assertj.github.io/doc/#assertj-core-recursive-comparison-for-iterable).\r\n\r\n#### Example\r\n\r\n```java\r\npublic class Test {\r\n\r\n    @org.junit.jupiter.api.Test\r\n    void testTest() {\r\n        final var le1 = createListEntry(12, \"xyz\", \"abc\", \"432432\", \"asdsa\");\r\n        final var le2 = createListEntry(13, \"xyzx\", \"abcds\", \"32432432\", \"asdsdfsa\");\r\n        final var le3 = createListEntry(14, \"xyzsa\", \"axbc\", \"4sd32432\", \"asdsfsda\");\r\n        final var le4 = createListEntry(15, \"xyzdsa\", \"abcb\", \"43sdf2432\", \"asdsdsa\");\r\n\r\n        List<ListEntryDto> actualResultList = List.of(ListEntryDto.from(le1), ListEntryDto.from(le2), ListEntryDto.from(le3), ListEntryDto.from(le4));\r\n//passes\r\n        Assertions.assertThat(actualResultList)\r\n                .asList()\r\n                .hasSize(4)\r\n                .usingRecursiveFieldByFieldElementComparator()\r\n                .containsExactlyInAnyOrder(le1, le2, le3, le4);\r\n//passes\r\n        Assertions.assertThat(actualResultList)\r\n                .usingRecursiveComparison()\r\n                .isEqualTo(list(le1, le2, le3, le4));\r\n//fails (passes when \"randomProperty\" field is commented out)\r\n        Assertions.assertThat(actualResultList)\r\n                .asList()\r\n                .hasSize(4)\r\n                .usingRecursiveFieldByFieldElementComparator()\r\n                .containsExactly(le1, le2, le3, le4);\r\n    }\r\n\r\n    private ListEntry createListEntry(int id, String name, String secondName, String street, String postCode) {\r\n        final var le = new ListEntry();\r\n        le.setId(id);\r\n        le.setName(name);\r\n        le.setSecondName(secondName);\r\n        le.setStreet(street);\r\n        le.setPostCode(postCode);\r\n        le.setRandomProperty(\"xyz xyz\"); // <- comment\r\n\r\n        return le;\r\n    }\r\n}\r\n\r\n@Getter\r\n@Setter\r\nabstract class SuperListEntry {\r\n    private int id;\r\n}\r\n\r\n@Getter\r\n@Setter\r\nclass ListEntry extends SuperListEntry {\r\n    private String randomProperty; // <- comment\r\n\r\n    private String name;\r\n\r\n    private String secondName;\r\n\r\n    private String street;\r\n\r\n    private String postCode;\r\n}\r\n\r\n@Getter\r\n@Setter\r\nclass ListEntryDto {\r\n    private final int id;\r\n    private final String name;\r\n    private final String secondName;\r\n    private final String street;\r\n    private final String postCode;\r\n\r\n    public ListEntryDto(int id, String name, String secondName, String street, String postCode) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.secondName = secondName;\r\n        this.street = street;\r\n        this.postCode = postCode;\r\n    }\r\n\r\n    static ListEntryDto from(ListEntry le) {\r\n        return new ListEntryDto(le.getId(), le.getName(), le.getSecondName(), le.getStreet(), le.getPostCode());\r\n    }\r\n}\r\n```\r\n","closed_by":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/assertj/assertj/issues/2147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/assertj/assertj/issues/2147/timeline","performed_via_github_app":null,"state_reason":"completed"}