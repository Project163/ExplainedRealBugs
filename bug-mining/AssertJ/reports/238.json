{"url":"https://api.github.com/repos/assertj/assertj/issues/1052","repository_url":"https://api.github.com/repos/assertj/assertj","labels_url":"https://api.github.com/repos/assertj/assertj/issues/1052/labels{/name}","comments_url":"https://api.github.com/repos/assertj/assertj/issues/1052/comments","events_url":"https://api.github.com/repos/assertj/assertj/issues/1052/events","html_url":"https://github.com/assertj/assertj/issues/1052","id":248537220,"node_id":"MDU6SXNzdWUyNDg1MzcyMjA=","number":1052,"title":"Iterables#assertEndsWith should not fail if sequence is empty","user":{"login":"fbiville","id":445792,"node_id":"MDQ6VXNlcjQ0NTc5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/445792?v=4","gravatar_id":"","url":"https://api.github.com/users/fbiville","html_url":"https://github.com/fbiville","followers_url":"https://api.github.com/users/fbiville/followers","following_url":"https://api.github.com/users/fbiville/following{/other_user}","gists_url":"https://api.github.com/users/fbiville/gists{/gist_id}","starred_url":"https://api.github.com/users/fbiville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbiville/subscriptions","organizations_url":"https://api.github.com/users/fbiville/orgs","repos_url":"https://api.github.com/users/fbiville/repos","events_url":"https://api.github.com/users/fbiville/events{/privacy}","received_events_url":"https://api.github.com/users/fbiville/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/assertj/assertj/milestones/35","html_url":"https://github.com/assertj/assertj/milestone/35","labels_url":"https://api.github.com/repos/assertj/assertj/milestones/35/labels","id":2532640,"node_id":"MDk6TWlsZXN0b25lMjUzMjY0MA==","number":35,"title":"2.9.0","description":"","creator":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":51,"state":"closed","created_at":"2017-05-20T02:25:11Z","updated_at":"2019-06-09T06:35:10Z","due_on":null,"closed_at":"2018-01-14T03:17:27Z"},"comments":6,"created_at":"2017-08-07T21:30:46Z","updated_at":"2017-10-02T09:41:08Z","closed_at":"2017-10-02T09:41:08Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Summary\r\nAny sequence always ends with an empty sequence. That is always true.\r\n\r\nWhile this may seem silly, the current behaviour limits the usefulness of property-based tests (I was playing around with `junit-quickcheck` when I noticed the error).\r\n\r\n#### Example\r\n\r\n```xml\r\n...\r\n        <dependency>\r\n            <groupId>org.assertj</groupId>\r\n            <artifactId>assertj-core</artifactId>\r\n            <version>2.8.0</version>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.pholser</groupId>\r\n            <artifactId>junit-quickcheck-generators</artifactId>\r\n            <version>0.7</version>\r\n            <scope>test</scope>\r\n        </dependency>\r\n...\r\n```\r\n\r\n```java\r\npublic final class Lists {\r\n\r\n    public static final List<String> prepend(String head, String... tail) {\r\n        List<String> result = new ArrayList<>(1 + tail.length);\r\n        result.add(head);\r\n        result.addAll(asList(tail));\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@RunWith(JUnitQuickcheck.class)\r\npublic class ListsTest {\r\n\r\n    @Property\r\n    public void prepends_head_to_list(String head, ArrayList<String> strings) {\r\n        String[] tail = strings.toArray(new String[strings.size()]);\r\n\r\n        List<String> result = Lists.prepend(head, tail);\r\n\r\n        assertThat(result)\r\n                .hasSize(1 + tail.length)\r\n                .startsWith(head)\r\n                .endsWith(tail);\r\n    }\r\n}\r\n```\r\n\r\nThat will yield:\r\n\r\n```\r\njava.lang.AssertionError: Property prepends_head_to_list falsified via shrinking: actual is not empty\r\nShrunken args: [, []]\r\nOriginal failure message: [actual is not empty]\r\nOriginal args: [, []]\r\nSeeds: [-6556694662598446822, -5206529275569188621]\r\n\r\n\r\n\tat org.assertj.core.internal.CommonValidations.failIfEmptySinceActualIsNotEmpty(CommonValidations.java:92)\r\n\tat org.assertj.core.internal.Iterables.commonCheckThatIterableAssertionSucceeds(Iterables.java:598)\r\n\tat org.assertj.core.internal.Iterables.assertEndsWith(Iterables.java:579)\r\n\tat org.assertj.core.api.AbstractIterableAssert.endsWith(AbstractIterableAssert.java:354)\r\n\tat org.assertj.core.api.ListAssert.endsWith(ListAssert.java:112)\r\n\tat io.xxx.internal.collection.ListsTest.prepends_head_to_list(ListsTest.java:39)\r\n\tat sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyVerifier$2.evaluate(PropertyVerifier.java:104)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyVerifier$1.evaluate(PropertyVerifier.java:76)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyVerifier.verify(PropertyVerifier.java:68)\r\n\tat com.pholser.junit.quickcheck.runner.ShrinkNode.verifyProperty(ShrinkNode.java:98)\r\n\tat com.pholser.junit.quickcheck.runner.Shrinker.shrink(Shrinker.java:82)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyStatement.shrink(PropertyStatement.java:158)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyStatement.lambda$property$38(PropertyStatement.java:132)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyVerifier$1.evaluate(PropertyVerifier.java:86)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyVerifier.verify(PropertyVerifier.java:68)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyStatement.verifyProperty(PropertyStatement.java:108)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyStatement.evaluate(PropertyStatement.java:92)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\nCaused by: java.lang.AssertionError: actual is not empty\r\n\tat org.assertj.core.internal.CommonValidations.failIfEmptySinceActualIsNotEmpty(CommonValidations.java:92)\r\n\tat org.assertj.core.internal.Iterables.commonCheckThatIterableAssertionSucceeds(Iterables.java:598)\r\n\tat org.assertj.core.internal.Iterables.assertEndsWith(Iterables.java:579)\r\n\tat org.assertj.core.api.AbstractIterableAssert.endsWith(AbstractIterableAssert.java:354)\r\n\tat org.assertj.core.api.ListAssert.endsWith(ListAssert.java:112)\r\n\tat io.xxx.internal.collection.ListsTest.prepends_head_to_list(ListsTest.java:39)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyVerifier$2.evaluate(PropertyVerifier.java:104)\r\n\tat com.pholser.junit.quickcheck.runner.PropertyVerifier$1.evaluate(PropertyVerifier.java:76)\r\n\t... 17 more\r\n```\r\n\r\n#### Java 8 specific ?\r\n\r\nNope.\r\n\r\n\r\n","closed_by":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/assertj/assertj/issues/1052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/assertj/assertj/issues/1052/timeline","performed_via_github_app":null,"state_reason":"completed"}