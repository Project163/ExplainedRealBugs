{"url":"https://api.github.com/repos/assertj/assertj/issues/3207","repository_url":"https://api.github.com/repos/assertj/assertj","labels_url":"https://api.github.com/repos/assertj/assertj/issues/3207/labels{/name}","comments_url":"https://api.github.com/repos/assertj/assertj/issues/3207/comments","events_url":"https://api.github.com/repos/assertj/assertj/issues/3207/events","html_url":"https://github.com/assertj/assertj/issues/3207","id":1925648836,"node_id":"I_kwDOAIX3Vs5yxxHE","number":3207,"title":"ComparingOnlyFieldsOfType only provided types for comparison","user":{"login":"timmisset","id":13839198,"node_id":"MDQ6VXNlcjEzODM5MTk4","avatar_url":"https://avatars.githubusercontent.com/u/13839198?v=4","gravatar_id":"","url":"https://api.github.com/users/timmisset","html_url":"https://github.com/timmisset","followers_url":"https://api.github.com/users/timmisset/followers","following_url":"https://api.github.com/users/timmisset/following{/other_user}","gists_url":"https://api.github.com/users/timmisset/gists{/gist_id}","starred_url":"https://api.github.com/users/timmisset/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timmisset/subscriptions","organizations_url":"https://api.github.com/users/timmisset/orgs","repos_url":"https://api.github.com/users/timmisset/repos","events_url":"https://api.github.com/users/timmisset/events{/privacy}","received_events_url":"https://api.github.com/users/timmisset/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":734184708,"node_id":"MDU6TGFiZWw3MzQxODQ3MDg=","url":"https://api.github.com/repos/assertj/assertj/labels/theme:%20recursive%20comparison","name":"theme: recursive comparison","color":"FEF2C0","default":false,"description":"An issue related to the recursive comparison"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/assertj/assertj/milestones/67","html_url":"https://github.com/assertj/assertj/milestone/67","labels_url":"https://api.github.com/repos/assertj/assertj/milestones/67/labels","id":8654259,"node_id":"MI_kwDOAIX3Vs4AhA2z","number":67,"title":"3.25.0","description":"","creator":{"login":"scordio","id":26772046,"node_id":"MDQ6VXNlcjI2NzcyMDQ2","avatar_url":"https://avatars.githubusercontent.com/u/26772046?v=4","gravatar_id":"","url":"https://api.github.com/users/scordio","html_url":"https://github.com/scordio","followers_url":"https://api.github.com/users/scordio/followers","following_url":"https://api.github.com/users/scordio/following{/other_user}","gists_url":"https://api.github.com/users/scordio/gists{/gist_id}","starred_url":"https://api.github.com/users/scordio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scordio/subscriptions","organizations_url":"https://api.github.com/users/scordio/orgs","repos_url":"https://api.github.com/users/scordio/repos","events_url":"https://api.github.com/users/scordio/events{/privacy}","received_events_url":"https://api.github.com/users/scordio/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":77,"state":"closed","created_at":"2022-11-14T21:55:21Z","updated_at":"2024-01-02T23:13:09Z","due_on":null,"closed_at":"2023-12-31T16:16:47Z"},"comments":3,"created_at":"2023-10-04T08:12:46Z","updated_at":"2024-10-02T23:53:31Z","closed_at":"2023-10-23T21:13:41Z","author_association":"NONE","type":{"id":2594683,"node_id":"IT_kwDOASBds84AJ5d7","name":"üêõ Bug","description":" A general bug ","color":"red","created_at":"2024-01-25T19:41:59Z","updated_at":"2025-05-30T17:34:50Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nAssuming that this is not intentionally designed I chose bug, but it might very well be a feature request to further tweak the recursiveComparison behavior:\r\n\r\nWhen comparing a nested structure the types provided in the comparingOnlyFieldsOfTypes not only affect the comparison but also the collection of values to compare. \r\n\r\n* assertj core version: 3.24.2\r\n* java version: 17\r\n* test framework version: junit 5.9.2\r\n\r\n**Test case reproducing the bug**\r\n\r\nThe following test case will pass. However, when I use (NestedClass.class, String.class) as arguments for the comparingOnlyFieldsOfTypes the assertion will fail.\r\nAs said, this is probably by design but would be really great is if there is an option that the collection of values to compare does not filter out the NestedClass so that \"A\" and \"B\" are still collected to be compared.\r\n\r\nI have a nested tree where a specific class occurs at different locations and I only want to compare the identifier field. This would require me to put all branches in the comparison to make sure they are reached.\r\n\r\n```java\r\n@Test\r\n    void test() {\r\n        TestClass a = new TestClass(new NestedClass(\"A\"));\r\n        TestClass b = new TestClass(new NestedClass(\"B\"));\r\n\r\n        assertThat(a).usingRecursiveComparison()\r\n                .comparingOnlyFieldsOfTypes(String.class)\r\n                .isEqualTo(b);\r\n    }\r\n\r\n    @RequiredArgsConstructor\r\n    private class TestClass {\r\n        private final NestedClass nestedClass;\r\n    }\r\n\r\n    @RequiredArgsConstructor\r\n    private class NestedClass {\r\n        private final String nestedClassField;\r\n    }\r\n```\r\n","closed_by":{"login":"joel-costigliola","id":382613,"node_id":"MDQ6VXNlcjM4MjYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/382613?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-costigliola","html_url":"https://github.com/joel-costigliola","followers_url":"https://api.github.com/users/joel-costigliola/followers","following_url":"https://api.github.com/users/joel-costigliola/following{/other_user}","gists_url":"https://api.github.com/users/joel-costigliola/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-costigliola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-costigliola/subscriptions","organizations_url":"https://api.github.com/users/joel-costigliola/orgs","repos_url":"https://api.github.com/users/joel-costigliola/repos","events_url":"https://api.github.com/users/joel-costigliola/events{/privacy}","received_events_url":"https://api.github.com/users/joel-costigliola/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/assertj/assertj/issues/3207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/assertj/assertj/issues/3207/timeline","performed_via_github_app":null,"state_reason":"completed"}