{"url":"https://api.github.com/repos/fastlane/fastlane/issues/18670","repository_url":"https://api.github.com/repos/fastlane/fastlane","labels_url":"https://api.github.com/repos/fastlane/fastlane/issues/18670/labels{/name}","comments_url":"https://api.github.com/repos/fastlane/fastlane/issues/18670/comments","events_url":"https://api.github.com/repos/fastlane/fastlane/issues/18670/events","html_url":"https://github.com/fastlane/fastlane/issues/18670","id":884745566,"node_id":"MDU6SXNzdWU4ODQ3NDU1NjY=","number":18670,"title":"Fastlane supply aab to internal track fail with google api error bad request","user":{"login":"oscargoldman","id":4214974,"node_id":"MDQ6VXNlcjQyMTQ5NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4214974?v=4","gravatar_id":"","url":"https://api.github.com/users/oscargoldman","html_url":"https://github.com/oscargoldman","followers_url":"https://api.github.com/users/oscargoldman/followers","following_url":"https://api.github.com/users/oscargoldman/following{/other_user}","gists_url":"https://api.github.com/users/oscargoldman/gists{/gist_id}","starred_url":"https://api.github.com/users/oscargoldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscargoldman/subscriptions","organizations_url":"https://api.github.com/users/oscargoldman/orgs","repos_url":"https://api.github.com/users/oscargoldman/repos","events_url":"https://api.github.com/users/oscargoldman/events{/privacy}","received_events_url":"https://api.github.com/users/oscargoldman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":315718186,"node_id":"MDU6TGFiZWwzMTU3MTgxODY=","url":"https://api.github.com/repos/fastlane/fastlane/labels/tool:%20supply","name":"tool: supply","color":"d4c5f9","default":false,"description":"upload_to_playstore"},{"id":389827016,"node_id":"MDU6TGFiZWwzODk4MjcwMTY=","url":"https://api.github.com/repos/fastlane/fastlane/labels/status:%20waiting-for-reply","name":"status: waiting-for-reply","color":"ff518b","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":31,"created_at":"2021-05-10T17:51:50Z","updated_at":"2021-10-20T00:01:43Z","closed_at":"2021-07-27T19:59:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"\r\n\r\n- [x] Updated fastlane to the latest version\r\n- [x] I read the [Contribution Guidelines](https://github.com/fastlane/fastlane/blob/master/CONTRIBUTING.md)\r\n- [x] I read [docs.fastlane.tools](https://docs.fastlane.tools)\r\n- [x] I searched for [existing GitHub issues](https://github.com/fastlane/fastlane/issues)\r\n\r\n### Issue Description\r\nfastlane supply aab to our publishing portal internal track was working fine, now we get the following error:\r\n\r\n[!] Google Api Error: badRequest: Changes cannot be sent for review automatically. Please set the query parameter changesNotSentForReview to true. Once committed, the changes in this edit can be sent for review from the Google Play Console UI. - Changes cannot be sent for review automatically. Please set the query parameter changesNotSentForReview to true. Once committed, the changes in this edit can be sent for review from the Google Play Console UI.\r\n\r\n##### Command executed\r\nbundle exec fastlane supply --aab appname.aab --track internal\r\n\r\n##### Complete output when running fastlane, including the stack trace and command used\r\n$ bundle exec fastlane supply --aab lyriko.aab --track internal\r\n+---------------------------------+-------------------------------------------------------------+\r\n|                                  Summary for supply 2.182.0                                   |\r\n+---------------------------------+-------------------------------------------------------------+\r\n| aab                             | lyriko.aab                                                  |\r\n| track                           | internal                                                    |\r\n| package_name                    | air.com.skylightgames.lyriko                                |\r\n| release_status                  | completed                                                   |\r\n| json_key                        | ./fastlane/api-4979299170780649289-597766-cab2b2122efe.json |\r\n| skip_upload_apk                 | false                                                       |\r\n| skip_upload_aab                 | false                                                       |\r\n| skip_upload_metadata            | false                                                       |\r\n| skip_upload_changelogs          | false                                                       |\r\n| skip_upload_images              | false                                                       |\r\n| skip_upload_screenshots         | false                                                       |\r\n| validate_only                   | false                                                       |\r\n| check_superseded_tracks         | false                                                       |\r\n| timeout                         | 300                                                         |\r\n| deactivate_on_promote           | true                                                        |\r\n| ack_bundle_installation_warning | false                                                       |\r\n+---------------------------------+-------------------------------------------------------------+\r\n[12:06:55]: Preparing aab at path 'lyriko.aab' for upload...\r\n[12:09:40]: Updating track 'internal'...\r\n[12:09:40]: Uploading all changes to Google Play...\r\n[!] Google Api Error: badRequest: Changes cannot be sent for review automatically. Please set the query parameter changesNotSentForReview to true. Once committed, the changes in this edit can be sent for review from the Google Play Console UI. - Changes cannot be sent for review automatically. Please set the query parameter changesNotSentForReview to true. Once committed, the changes in this edit can be sent for review from the Google Play Console UI.\r\nCleaning up file based variables\r\n00:00\r\nERROR: Job failed: exit status 1\r\n\r\n\r\n\r\n### Environment\r\n\r\n<!-- \r\nPlease run `fastlane env` and copy the output below. This will help us help you.\r\nIf you used the `--capture_output` option, please remove this block as it is already included there. \r\n-->\r\n\r\n<details>\r\n  <pre><details><summary>✅ fastlane environment ✅</summary>\r\n\r\n### Stack\r\n\r\n| Key                         | Value                                                          |\r\n| --------------------------- | -------------------------------------------------------------- |\r\n| OS                          | 11.2.3                                                         |\r\n| Ruby                        | 2.6.3                                                          |\r\n| Bundler?                    | false                                                          |\r\n| Git                         | git version 2.21.0                                             |\r\n| Installation Source         | /usr/local/bin/fastlane                                        |\r\n| Host                        | macOS 11.2.3 (20D91)                                           |\r\n| Ruby Lib Dir                | /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib |\r\n| OpenSSL Version             | LibreSSL 2.8.3                                                 |\r\n| Is contained                | false                                                          |\r\n| Is homebrew                 | false                                                          |\r\n| Is installed via Fabric.app | false                                                          |\r\n| Xcode Path                  | /Applications/Xcode.app/Contents/Developer/                    |\r\n| Xcode Version               | 12.5                                                           |\r\n\r\n\r\n### System Locale\r\n\r\n| Variable | Value       |   |\r\n| -------- | ----------- | - |\r\n| LANG     | en_US.UTF-8 | ✅ |\r\n| LC_ALL   | en_US.UTF-8 | ✅ |\r\n| LANGUAGE |             |   |\r\n\r\n\r\n### fastlane files:\r\n\r\n<details><summary>`./Fastfile`</summary>\r\n\r\n```ruby\r\n# This file contains the fastlane.tools configuration\r\n# You can find the documentation at https://docs.fastlane.tools\r\n#\r\n# For a list of all available actions, check out\r\n#\r\n#     https://docs.fastlane.tools/actions\r\n#\r\n# For a list of all available plugins, check out\r\n#\r\n#     https://docs.fastlane.tools/plugins/available-plugins\r\n#\r\n\r\n# Uncomment the line if you want fastlane to automatically update itself\r\n# update_fastlane\r\n\r\ndefault_platform(:ios)\r\n\r\nplatform :ios do\r\n  desc \"Description of what the lane does\"\r\n  lane :custom_lane do\r\n    # add actions here: https://docs.fastlane.tools/actions\r\n  end\r\nend\r\n\r\n```\r\n</details>\r\n\r\n<details><summary>`./Appfile`</summary>\r\n\r\n```ruby\r\njson_key_file(\"./fastlane/api-4979299170780649289-597766-cab2b2122efe.json\")\r\npackage_name(\"air.com.skylightgames.lyriko\")\r\n\r\n\r\n# For more information about the Appfile, see:\r\n#     https://docs.fastlane.tools/advanced/#appfile\r\n\r\n```\r\n</details>\r\n\r\n### fastlane gems\r\n\r\n| Gem      | Version | Update-Status |\r\n| -------- | ------- | ------------- |\r\n| fastlane | 2.182.0 | ✅ Up-To-Date  |\r\n\r\n\r\n### Loaded fastlane plugins:\r\n\r\n**No plugins Loaded**\r\n\r\n\r\n<details><summary><b>Loaded gems</b></summary>\r\n\r\n| Gem                           | Version      |\r\n| ----------------------------- | ------------ |\r\n| did_you_mean                  | 1.3.0        |\r\n| atomos                        | 0.1.3        |\r\n| claide                        | 1.0.3        |\r\n| colored2                      | 3.1.2        |\r\n| nanaimo                       | 0.3.0        |\r\n| xcodeproj                     | 1.19.0       |\r\n| rouge                         | 2.0.7        |\r\n| xcpretty                      | 0.3.0        |\r\n| terminal-notifier             | 2.0.0        |\r\n| unicode-display_width         | 1.7.0        |\r\n| terminal-table                | 1.8.0        |\r\n| plist                         | 3.6.0        |\r\n| public_suffix                 | 4.0.6        |\r\n| addressable                   | 2.7.0        |\r\n| multipart-post                | 2.0.0        |\r\n| word_wrap                     | 1.0.0        |\r\n| tty-screen                    | 0.8.1        |\r\n| tty-cursor                    | 0.7.1        |\r\n| tty-spinner                   | 0.9.3        |\r\n| artifactory                   | 3.0.15       |\r\n| babosa                        | 1.0.4        |\r\n| colored                       | 1.2          |\r\n| highline                      | 2.0.3        |\r\n| commander                     | 4.6.0        |\r\n| faraday-excon                 | 1.1.0        |\r\n| faraday-net_http              | 1.0.1        |\r\n| faraday-net_http_persistent   | 1.1.0        |\r\n| ruby2_keywords                | 0.0.4        |\r\n| faraday                       | 1.4.1        |\r\n| unf_ext                       | 0.0.7.7      |\r\n| unf                           | 0.1.4        |\r\n| domain_name                   | 0.5.20190701 |\r\n| http-cookie                   | 1.0.3        |\r\n| faraday-cookie_jar            | 0.0.7        |\r\n| faraday_middleware            | 1.0.0        |\r\n| fastimage                     | 2.2.3        |\r\n| gh_inspector                  | 1.1.3        |\r\n| mini_magick                   | 4.11.0       |\r\n| naturally                     | 2.2.1        |\r\n| rubyzip                       | 2.3.0        |\r\n| security                      | 0.1.3        |\r\n| xcpretty-travis-formatter     | 1.0.1        |\r\n| dotenv                        | 2.7.6        |\r\n| bundler                       | 2.2.16       |\r\n| simctl                        | 1.6.8        |\r\n| jwt                           | 2.2.3        |\r\n| uber                          | 0.1.0        |\r\n| declarative                   | 0.0.20       |\r\n| trailblazer-option            | 0.1.1        |\r\n| representable                 | 3.1.1        |\r\n| retriable                     | 3.1.2        |\r\n| mini_mime                     | 1.1.0        |\r\n| multi_json                    | 1.15.0       |\r\n| signet                        | 0.15.0       |\r\n| httpclient                    | 2.8.3        |\r\n| google-api-client             | 0.38.0       |\r\n| google-cloud-env              | 1.5.0        |\r\n| google-cloud-errors           | 1.1.0        |\r\n| google-cloud-core             | 1.6.0        |\r\n| google-apis-core              | 0.3.0        |\r\n| google-apis-iamcredentials_v1 | 0.3.0        |\r\n| google-apis-storage_v1        | 0.3.0        |\r\n| digest-crc                    | 0.6.3        |\r\n| google-cloud-storage          | 1.31.0       |\r\n| emoji_regex                   | 3.2.2        |\r\n| CFPropertyList                | 3.0.3        |\r\n| excon                         | 0.81.0       |\r\n| json                          | 2.5.1        |\r\n| os                            | 1.1.1        |\r\n| memoist                       | 0.16.2       |\r\n| googleauth                    | 0.16.2       |\r\n| rexml                         | 3.2.5        |\r\n| webrick                       | 1.7.0        |\r\n| rake                          | 13.0.3       |\r\n| aws-eventstream               | 1.1.1        |\r\n| aws-sigv4                     | 1.2.3        |\r\n| aws-partitions                | 1.452.0      |\r\n| jmespath                      | 1.4.0        |\r\n| aws-sdk-core                  | 3.114.0      |\r\n| aws-sdk-kms                   | 1.43.0       |\r\n| aws-sdk-s3                    | 1.94.1       |\r\n| forwardable                   | 1.2.0        |\r\n| logger                        | 1.3.0        |\r\n| date                          | 2.0.0        |\r\n| stringio                      | 0.0.2        |\r\n| zlib                          | 1.0.0        |\r\n| ipaddr                        | 1.2.2        |\r\n| openssl                       | 2.1.2        |\r\n| ostruct                       | 0.1.0        |\r\n| strscan                       | 1.0.0        |\r\n| io-console                    | 0.4.7        |\r\n| fileutils                     | 1.1.0        |\r\n| etc                           | 1.0.1        |\r\n| libxml-ruby                   | 3.1.0        |\r\n| psych                         | 3.1.0        |\r\n| mutex_m                       | 0.1.0        |\r\n</details>\r\n\r\n\r\n*generated on:* **2021-05-10**\r\n</details></pre>\r\n</details>\r\n","closed_by":{"login":"joshdholtz","id":401294,"node_id":"MDQ6VXNlcjQwMTI5NA==","avatar_url":"https://avatars.githubusercontent.com/u/401294?v=4","gravatar_id":"","url":"https://api.github.com/users/joshdholtz","html_url":"https://github.com/joshdholtz","followers_url":"https://api.github.com/users/joshdholtz/followers","following_url":"https://api.github.com/users/joshdholtz/following{/other_user}","gists_url":"https://api.github.com/users/joshdholtz/gists{/gist_id}","starred_url":"https://api.github.com/users/joshdholtz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshdholtz/subscriptions","organizations_url":"https://api.github.com/users/joshdholtz/orgs","repos_url":"https://api.github.com/users/joshdholtz/repos","events_url":"https://api.github.com/users/joshdholtz/events{/privacy}","received_events_url":"https://api.github.com/users/joshdholtz/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/fastlane/fastlane/issues/18670/reactions","total_count":28,"+1":28,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fastlane/fastlane/issues/18670/timeline","performed_via_github_app":null,"state_reason":"completed"}