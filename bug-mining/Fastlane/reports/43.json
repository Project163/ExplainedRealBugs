{"url":"https://api.github.com/repos/fastlane/fastlane/issues/20104","repository_url":"https://api.github.com/repos/fastlane/fastlane","labels_url":"https://api.github.com/repos/fastlane/fastlane/issues/20104/labels{/name}","comments_url":"https://api.github.com/repos/fastlane/fastlane/issues/20104/comments","events_url":"https://api.github.com/repos/fastlane/fastlane/issues/20104/events","html_url":"https://github.com/fastlane/fastlane/issues/20104","id":1177420651,"node_id":"I_kwDOAaK_F85GLgNr","number":20104,"title":"Any lane failing with code 65 (error: Unexpected duplicate tasks)","user":{"login":"danipralea","id":768893,"node_id":"MDQ6VXNlcjc2ODg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/768893?v=4","gravatar_id":"","url":"https://api.github.com/users/danipralea","html_url":"https://github.com/danipralea","followers_url":"https://api.github.com/users/danipralea/followers","following_url":"https://api.github.com/users/danipralea/following{/other_user}","gists_url":"https://api.github.com/users/danipralea/gists{/gist_id}","starred_url":"https://api.github.com/users/danipralea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danipralea/subscriptions","organizations_url":"https://api.github.com/users/danipralea/orgs","repos_url":"https://api.github.com/users/danipralea/repos","events_url":"https://api.github.com/users/danipralea/events{/privacy}","received_events_url":"https://api.github.com/users/danipralea/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":389827016,"node_id":"MDU6TGFiZWwzODk4MjcwMTY=","url":"https://api.github.com/repos/fastlane/fastlane/labels/status:%20waiting-for-reply","name":"status: waiting-for-reply","color":"ff518b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2022-03-22T23:44:09Z","updated_at":"2023-12-14T19:26:33Z","closed_at":"2023-12-14T19:26:32Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Thanks for helping fastlane! Before you submit your issue, please make sure you followed our checklist and check the appropriate boxes by putting an x in the [ ]: [x] -->\r\n\r\n### New Issue Checklist\r\n\r\n- [x] Updated fastlane to the latest version\r\n- [x] I read the [Contribution Guidelines](https://github.com/fastlane/fastlane/blob/master/CONTRIBUTING.md)\r\n- [x] I read [docs.fastlane.tools](https://docs.fastlane.tools)\r\n- [x] I searched for [existing GitHub issues](https://github.com/fastlane/fastlane/issues)\r\n\r\n### Issue Description\r\n`Using Fastlane Swift!`\r\nFail running any lane, no matter even if it's empty, with a very generic error: \r\n```\r\n‚ùå  error: Unexpected duplicate tasks:\r\n\r\n\r\n\r\n‚ùå  error: Unexpected duplicate tasks:\r\n```\r\n\r\n##### Command executed\r\n`bundle exec fastlane custom --verbose`\r\n\r\n##### Complete output when running fastlane, including the stack trace and command used\r\n### Captured Output\r\n\r\nCommand Used: `aLane --verbose --capture_output`\r\n<details><summary>Output/Log</summary>\r\n\r\n```\r\n\r\nDEBUG [2022-03-23 01:42:25.84]: Checking if there are any plugins that should be loaded...\r\nDEBUG [2022-03-23 01:42:25.84]: Loading 'fastlane-plugin-firebase_app_distribution' plugin\r\nINFO [2022-03-23 01:42:25.84]: gem 'fastlane-plugin-firebase_app_distribution' is already installed\r\n\r\n\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>üö´ fastlane environment üö´</summary>\r\n\r\n### Stack\r\n\r\n| Key                         | Value                                                              |\r\n| --------------------------- | ------------------------------------------------------------------ |\r\n| OS                          | 12.0.1                                                             |\r\n| Ruby                        | 2.6.8                                                              |\r\n| Bundler?                    | true                                                               |\r\n| Git                         | git version 2.32.0 (Apple Git-132)                                 |\r\n| Installation Source         | ~/Downloads/testing_fastlane/vendor/bundle/ruby/2.6.0/bin/fastlane |\r\n| Host                        | macOS 12.0.1 (21A559)                                              |\r\n| Ruby Lib Dir                | /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib     |\r\n| OpenSSL Version             | LibreSSL 2.8.3                                                     |\r\n| Is contained                | false                                                              |\r\n| Is homebrew                 | false                                                              |\r\n| Is installed via Fabric.app | false                                                              |\r\n| Xcode Path                  | /Applications/Xcode.app/Contents/Developer/                        |\r\n| Xcode Version               | 13.2.1                                                             |\r\n| Swift Version               | 5.5.2                                                              |\r\n\r\n\r\n### System Locale\r\n\r\n| Error                       |\r\n| --------------------------- |\r\n| No Locale with UTF8 found üö´ |\r\n\r\n\r\n### fastlane files:\r\n\r\n<details><summary>`./fastlane/Fastfile.swift`</summary>\r\n\r\n```ruby\r\n// This file contains the fastlane.tools configuration\r\n// You can find the documentation at https://docs.fastlane.tools\r\n//\r\n// For a list of all available actions, check out\r\n//\r\n//     https://docs.fastlane.tools/actions\r\n//\r\n\r\nimport Foundation\r\n\r\nclass Fastfile: LaneFile {\r\n\tfunc releaseLane() {\r\n\tdesc(\"Push a new release build to the App Store\")\r\n\t\tincrementBuildNumber(xcodeproj: \"testing_fastlane.xcodeproj\")\r\n\t\tbuildApp(scheme: \"testing_fastlane\")\r\n\t\tuploadToAppStore(username: \"redacted\", appIdentifier: \"redacted\", skipScreenshots: true, skipMetadata: true)\r\n\t}\r\n    func aLane() {\r\n    desc(\"increments builds number\")\r\n        incrementBuildNumber(xcodeproj: \"testing_fastlane.xcodeproj\")\r\n    }\r\n    func bLane() {\r\n    desc(\"increments builds number\")\r\n        firebaseAppDistribution(app: \"redacted\", releaseNotes: \"dev build\", debug: true)\r\n    }\r\n}\r\n\r\n```\r\n</details>\r\n\r\n**No Appfile found**\r\n\r\n\r\n### fastlane gems\r\n\r\n| Gem      | Version | Update-Status |\r\n| -------- | ------- | ------------- |\r\n| fastlane | 2.205.0 | ‚úÖ Up-To-Date  |\r\n\r\n\r\n### Loaded fastlane plugins:\r\n\r\n| Plugin                                    | Version | Update-Status |\r\n| ----------------------------------------- | ------- | ------------- |\r\n| fastlane-plugin-firebase_app_distribution | 0.3.3   | ‚úÖ Up-To-Date  |\r\n\r\n\r\n<details><summary><b>Loaded gems</b></summary>\r\n\r\n| Gem                                       | Version      |\r\n| ----------------------------------------- | ------------ |\r\n| did_you_mean                              | 1.3.0        |\r\n| bundler                                   | 2.3.9        |\r\n| rake                                      | 13.0.6       |\r\n| rexml                                     | 3.2.5        |\r\n| CFPropertyList                            | 3.0.5        |\r\n| public_suffix                             | 4.0.6        |\r\n| addressable                               | 2.8.0        |\r\n| artifactory                               | 3.0.15       |\r\n| atomos                                    | 0.1.3        |\r\n| aws-eventstream                           | 1.2.0        |\r\n| aws-partitions                            | 1.568.0      |\r\n| aws-sigv4                                 | 1.4.0        |\r\n| jmespath                                  | 1.6.1        |\r\n| aws-sdk-core                              | 3.130.0      |\r\n| aws-sdk-kms                               | 1.55.0       |\r\n| aws-sdk-s3                                | 1.113.0      |\r\n| babosa                                    | 1.0.4        |\r\n| claide                                    | 1.1.0        |\r\n| colored                                   | 1.2          |\r\n| colored2                                  | 3.1.2        |\r\n| highline                                  | 2.0.3        |\r\n| commander                                 | 4.6.0        |\r\n| declarative                               | 0.0.20       |\r\n| digest-crc                                | 0.6.4        |\r\n| unf_ext                                   | 0.0.8.1      |\r\n| unf                                       | 0.1.4        |\r\n| domain_name                               | 0.5.20190701 |\r\n| dotenv                                    | 2.7.6        |\r\n| emoji_regex                               | 3.2.3        |\r\n| excon                                     | 0.92.1       |\r\n| faraday-em_http                           | 1.0.0        |\r\n| faraday-em_synchrony                      | 1.0.0        |\r\n| faraday-excon                             | 1.1.0        |\r\n| faraday-httpclient                        | 1.0.1        |\r\n| multipart-post                            | 2.0.0        |\r\n| faraday-multipart                         | 1.0.3        |\r\n| faraday-net_http                          | 1.0.1        |\r\n| faraday-net_http_persistent               | 1.2.0        |\r\n| faraday-patron                            | 1.0.0        |\r\n| faraday-rack                              | 1.0.0        |\r\n| faraday-retry                             | 1.0.3        |\r\n| ruby2_keywords                            | 0.0.5        |\r\n| faraday                                   | 1.10.0       |\r\n| http-cookie                               | 1.0.4        |\r\n| faraday-cookie_jar                        | 0.0.7        |\r\n| faraday_middleware                        | 1.2.0        |\r\n| fastimage                                 | 2.2.6        |\r\n| gh_inspector                              | 1.1.3        |\r\n| jwt                                       | 2.3.0        |\r\n| memoist                                   | 0.16.2       |\r\n| multi_json                                | 1.15.0       |\r\n| os                                        | 1.1.4        |\r\n| signet                                    | 0.16.1       |\r\n| googleauth                                | 1.1.2        |\r\n| httpclient                                | 2.8.3        |\r\n| mini_mime                                 | 1.1.2        |\r\n| trailblazer-option                        | 0.1.2        |\r\n| uber                                      | 0.1.0        |\r\n| representable                             | 3.1.1        |\r\n| retriable                                 | 3.1.2        |\r\n| webrick                                   | 1.7.0        |\r\n| google-apis-core                          | 0.4.2        |\r\n| google-apis-androidpublisher_v3           | 0.16.0       |\r\n| google-apis-playcustomapp_v1              | 0.7.0        |\r\n| google-apis-iamcredentials_v1             | 0.10.0       |\r\n| google-apis-storage_v1                    | 0.11.0       |\r\n| google-cloud-env                          | 1.5.0        |\r\n| google-cloud-errors                       | 1.2.0        |\r\n| google-cloud-core                         | 1.6.0        |\r\n| google-cloud-storage                      | 1.36.1       |\r\n| json                                      | 2.6.1        |\r\n| mini_magick                               | 4.11.0       |\r\n| naturally                                 | 2.2.1        |\r\n| optparse                                  | 0.1.1        |\r\n| plist                                     | 3.6.0        |\r\n| rubyzip                                   | 2.3.2        |\r\n| security                                  | 0.1.3        |\r\n| simctl                                    | 1.6.8        |\r\n| terminal-notifier                         | 2.0.0        |\r\n| unicode-display_width                     | 1.8.0        |\r\n| terminal-table                            | 1.8.0        |\r\n| tty-screen                                | 0.8.1        |\r\n| tty-cursor                                | 0.7.1        |\r\n| tty-spinner                               | 0.9.3        |\r\n| word_wrap                                 | 1.0.0        |\r\n| nanaimo                                   | 0.3.0        |\r\n| xcodeproj                                 | 1.21.0       |\r\n| rouge                                     | 2.0.7        |\r\n| xcpretty                                  | 0.3.0        |\r\n| xcpretty-travis-formatter                 | 1.0.1        |\r\n| fastlane-plugin-firebase_app_distribution | 0.3.3        |\r\n</details>\r\n\r\n\r\n*generated on:* **2022-03-23**\r\n</details>\r\n\r\nEDIT:\r\nI have struggled an entire day with this. I think I might know at least the root cause of it. Not sure how to fix it yet though.\r\n[App-FastlaneRunner.log](https://github.com/fastlane/fastlane/files/8328528/App-FastlaneRunner.log)\r\n\r\nLater EDIT:\r\nI have removed `FastlaneRunner` from Build Phases -> Copy Files section and it finally made the error go away, but I am unsure of the implications\r\n![image](https://user-images.githubusercontent.com/768893/159595718-2c4b9e14-3250-41ab-8ffe-1384b171cb87.png)\r\n\r\nI have this behaviour on an M1 mac. I have an intel based macbook as well and I got paranoid and did a fresh install of the OS and was able to reproduce it there as well. Not sure how other people are not getting it either, or if I am doing something wrong. But I am just doing the most basic steps and able to repro every time ü§∑‚Äç‚ôÇÔ∏è \r\n\r\nLast EDIT (I promise):\r\nIt's most probably an Xcode issue. more specifically - the latest one (13.3)\r\nI built it with Xcode 13.0 and it doesn't have the Copy resources option, like 13.3 has\r\n","closed_by":{"login":"lacostej","id":24282,"node_id":"MDQ6VXNlcjI0Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/24282?v=4","gravatar_id":"","url":"https://api.github.com/users/lacostej","html_url":"https://github.com/lacostej","followers_url":"https://api.github.com/users/lacostej/followers","following_url":"https://api.github.com/users/lacostej/following{/other_user}","gists_url":"https://api.github.com/users/lacostej/gists{/gist_id}","starred_url":"https://api.github.com/users/lacostej/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lacostej/subscriptions","organizations_url":"https://api.github.com/users/lacostej/orgs","repos_url":"https://api.github.com/users/lacostej/repos","events_url":"https://api.github.com/users/lacostej/events{/privacy}","received_events_url":"https://api.github.com/users/lacostej/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/fastlane/fastlane/issues/20104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fastlane/fastlane/issues/20104/timeline","performed_via_github_app":null,"state_reason":"completed"}