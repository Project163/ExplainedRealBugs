{"url":"https://api.github.com/repos/fastlane/fastlane/issues/17359","repository_url":"https://api.github.com/repos/fastlane/fastlane","labels_url":"https://api.github.com/repos/fastlane/fastlane/issues/17359/labels{/name}","comments_url":"https://api.github.com/repos/fastlane/fastlane/issues/17359/comments","events_url":"https://api.github.com/repos/fastlane/fastlane/issues/17359/events","html_url":"https://github.com/fastlane/fastlane/issues/17359","id":713392284,"node_id":"MDU6SXNzdWU3MTMzOTIyODQ=","number":17359,"title":"SnapshotHelper.swift fails on tvOS","user":{"login":"felginep","id":1964177,"node_id":"MDQ6VXNlcjE5NjQxNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1964177?v=4","gravatar_id":"","url":"https://api.github.com/users/felginep","html_url":"https://github.com/felginep","followers_url":"https://api.github.com/users/felginep/followers","following_url":"https://api.github.com/users/felginep/following{/other_user}","gists_url":"https://api.github.com/users/felginep/gists{/gist_id}","starred_url":"https://api.github.com/users/felginep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felginep/subscriptions","organizations_url":"https://api.github.com/users/felginep/orgs","repos_url":"https://api.github.com/users/felginep/repos","events_url":"https://api.github.com/users/felginep/events{/privacy}","received_events_url":"https://api.github.com/users/felginep/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":315718072,"node_id":"MDU6TGFiZWwzMTU3MTgwNzI=","url":"https://api.github.com/repos/fastlane/fastlane/labels/tool:%20snapshot","name":"tool: snapshot","color":"0052cc","default":false,"description":null},{"id":782401317,"node_id":"MDU6TGFiZWw3ODI0MDEzMTc=","url":"https://api.github.com/repos/fastlane/fastlane/labels/topic:%20swift","name":"topic: swift","color":"ed523f","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-02T06:46:14Z","updated_at":"2020-12-12T17:32:21Z","closed_at":"2020-10-12T17:21:23Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Thanks for helping fastlane! Before you submit your issue, please make sure you followed our checklist and check the appropriate boxes by putting an x in the [ ]: [x] -->\r\n\r\n### New Issue Checklist\r\n\r\n- [x] Updated fastlane to the latest version\r\n- [x] I read the [Contribution Guidelines](https://github.com/fastlane/fastlane/blob/master/CONTRIBUTING.md)\r\n- [x] I read [docs.fastlane.tools](https://docs.fastlane.tools)\r\n- [x] I searched for [existing GitHub issues](https://github.com/fastlane/fastlane/issues)\r\n\r\n### Issue Description\r\n<!-- Please include what's happening, expected behavior, and any relevant code samples -->\r\n\r\nWhen I run my UITests on Apple TV, I get the following error with [SnapshotHelper 1.24](https://github.com/fastlane/fastlane/commit/8ec8fcd1e963a456fe5e0a916a63d733ca2acf94#diff-1a1173200436690d61ef63b6702ae6d6)\r\n\r\n```\r\nSnapshotHelper.swift: value of type 'XCUIDevice' has no member 'orientation'\r\n```\r\n\r\nThe reason is that [UIDeviceOrientation](https://developer.apple.com/documentation/uikit/uideviceorientation) is not supported on tvOS.\r\n\r\nThe fix is simple, wrap the failing line in `#if os(iOS)` like this:\r\n\r\n```\r\n#if os(iOS)\r\n    let image = XCUIDevice.shared.orientation.isLandscape ?  fixLandscapeOrientation(image: screenshot.image) : screenshot.image\r\n#else\r\n    let image = screenshot.image\r\n#endif\r\n```","closed_by":{"login":"joshdholtz","id":401294,"node_id":"MDQ6VXNlcjQwMTI5NA==","avatar_url":"https://avatars.githubusercontent.com/u/401294?v=4","gravatar_id":"","url":"https://api.github.com/users/joshdholtz","html_url":"https://github.com/joshdholtz","followers_url":"https://api.github.com/users/joshdholtz/followers","following_url":"https://api.github.com/users/joshdholtz/following{/other_user}","gists_url":"https://api.github.com/users/joshdholtz/gists{/gist_id}","starred_url":"https://api.github.com/users/joshdholtz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshdholtz/subscriptions","organizations_url":"https://api.github.com/users/joshdholtz/orgs","repos_url":"https://api.github.com/users/joshdholtz/repos","events_url":"https://api.github.com/users/joshdholtz/events{/privacy}","received_events_url":"https://api.github.com/users/joshdholtz/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/fastlane/fastlane/issues/17359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fastlane/fastlane/issues/17359/timeline","performed_via_github_app":null,"state_reason":"completed"}