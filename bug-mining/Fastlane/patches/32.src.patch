diff --git a/fastlane/lib/fastlane/fast_file.rb b/fastlane/lib/fastlane/fast_file.rb
index 8bcd4cdbe..03849c6cb 100644
--- a/fastlane/lib/fastlane/fast_file.rb
+++ b/fastlane/lib/fastlane/fast_file.rb
@@ -26,10 +26,15 @@ module Fastlane
                 'you should turn off smart quotes in your editor of choice.')
       end
 
-      content.scan(/^\s*require (.*)/).each do |current|
+      content.scan(/^\s*require ["'](.*?)["']/).each do |current|
         gem_name = current.last
         next if gem_name.include?(".") # these are local gems
-        UI.important("You have required a gem, if this is a third party gem, please use `fastlane_require #{gem_name}` to ensure the gem is installed locally.")
+
+        begin
+          require(gem_name)
+        rescue LoadError
+          UI.important("You have required a gem, if this is a third party gem, please use `fastlane_require '#{gem_name}'` to ensure the gem is installed locally.")
+        end
       end
 
       parse(content, @path)
diff --git a/fastlane/spec/fast_file_spec.rb b/fastlane/spec/fast_file_spec.rb
index bddb67b4f..dd485127b 100644
--- a/fastlane/spec/fast_file_spec.rb
+++ b/fastlane/spec/fast_file_spec.rb
@@ -12,6 +12,18 @@ describe Fastlane do
           Fastlane::FastFile.new('./fastlane/spec/fixtures/fastfiles/FastfileInvalid')
         end.to raise_exception("Could not find action, lane or variable 'laneasdf'. Check out the documentation for more details: https://docs.fastlane.tools/actions")
       end
+
+      it "prints a warning if an uninstalled library is required" do
+        expect_any_instance_of(Fastlane::FastFile).to receive(:parse)
+        expect(UI).to receive(:important).with("You have required a gem, if this is a third party gem, please use `fastlane_require 'some_remote_gem'` to ensure the gem is installed locally.")
+        Fastlane::FastFile.new('./fastlane/spec/fixtures/fastfiles/FastfileRequireUninstalledGem')
+      end
+
+      it "does not print a warning if required library is installed" do
+        expect_any_instance_of(Fastlane::FastFile).to receive(:parse)
+        expect(UI).not_to(receive(:important))
+        Fastlane::FastFile.new('./fastlane/spec/fixtures/fastfiles/FastfileRequireInstalledGem')
+      end
     end
 
     describe "#sh" do
diff --git a/fastlane/spec/fixtures/fastfiles/FastfileRequireInstalledGem b/fastlane/spec/fixtures/fastfiles/FastfileRequireInstalledGem
new file mode 100644
index 000000000..763f36b89
--- /dev/null
+++ b/fastlane/spec/fixtures/fastfiles/FastfileRequireInstalledGem
@@ -0,0 +1 @@
+require "base64" # reliably present on all Ruby installs
diff --git a/fastlane/spec/fixtures/fastfiles/FastfileRequireUninstalledGem b/fastlane/spec/fixtures/fastfiles/FastfileRequireUninstalledGem
new file mode 100644
index 000000000..3eb9aad3b
--- /dev/null
+++ b/fastlane/spec/fixtures/fastfiles/FastfileRequireUninstalledGem
@@ -0,0 +1 @@
+require "some_remote_gem"
