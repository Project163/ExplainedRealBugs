{"url":"https://api.github.com/repos/eslint/eslint/issues/13705","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/13705/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/13705/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/13705/events","html_url":"https://github.com/eslint/eslint/issues/13705","id":705133702,"node_id":"MDU6SXNzdWU3MDUxMzM3MDI=","number":13705,"title":"Improve no-func-assign docs and add tests","user":{"login":"bendtherules","id":3101150,"node_id":"MDQ6VXNlcjMxMDExNTA=","avatar_url":"https://avatars.githubusercontent.com/u/3101150?v=4","gravatar_id":"","url":"https://api.github.com/users/bendtherules","html_url":"https://github.com/bendtherules","followers_url":"https://api.github.com/users/bendtherules/followers","following_url":"https://api.github.com/users/bendtherules/following{/other_user}","gists_url":"https://api.github.com/users/bendtherules/gists{/gist_id}","starred_url":"https://api.github.com/users/bendtherules/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bendtherules/subscriptions","organizations_url":"https://api.github.com/users/bendtherules/orgs","repos_url":"https://api.github.com/users/bendtherules/repos","events_url":"https://api.github.com/users/bendtherules/events{/privacy}","received_events_url":"https://api.github.com/users/bendtherules/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45798639,"node_id":"MDU6TGFiZWw0NTc5ODYzOQ==","url":"https://api.github.com/repos/eslint/eslint/labels/rule","name":"rule","color":"fbca04","default":false,"description":"Relates to ESLint's core rules"},{"id":64004798,"node_id":"MDU6TGFiZWw2NDAwNDc5OA==","url":"https://api.github.com/repos/eslint/eslint/labels/documentation","name":"documentation","color":"5319e7","default":true,"description":"Relates to ESLint's documentation"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2020-09-20T15:51:40Z","updated_at":"2021-04-21T00:44:35Z","closed_at":"2020-10-22T12:34:55Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Tell us about your environment**\r\n\r\nEslint demo page with Eslint v7.9.0 - [Demo URL](https://eslint.org/demo#eyJ0ZXh0IjoidmFyIGEgPSBmdW5jdGlvbiBoZWxsbygpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBoZWxsbyA9IDEyMztcbn07XG5hKCkiLCJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsiZWNtYVZlcnNpb24iOjEyLCJzb3VyY2VUeXBlIjoic2NyaXB0IiwiZWNtYUZlYXR1cmVzIjp7fX0sInJ1bGVzIjp7ImNvbnN0cnVjdG9yLXN1cGVyIjoyLCJmb3ItZGlyZWN0aW9uIjoyLCJnZXR0ZXItcmV0dXJuIjoyLCJuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yIjoyLCJuby1jYXNlLWRlY2xhcmF0aW9ucyI6Miwibm8tY2xhc3MtYXNzaWduIjoyLCJuby1jb21wYXJlLW5lZy16ZXJvIjoyLCJuby1jb25kLWFzc2lnbiI6Miwibm8tY29uc3QtYXNzaWduIjoyLCJuby1jb25zdGFudC1jb25kaXRpb24iOjIsIm5vLWNvbnRyb2wtcmVnZXgiOjIsIm5vLWRlYnVnZ2VyIjoyLCJuby1kZWxldGUtdmFyIjoyLCJuby1kdXBlLWFyZ3MiOjIsIm5vLWR1cGUtY2xhc3MtbWVtYmVycyI6Miwibm8tZHVwZS1lbHNlLWlmIjoyLCJuby1kdXBlLWtleXMiOjIsIm5vLWR1cGxpY2F0ZS1jYXNlIjoyLCJuby1lbXB0eSI6Miwibm8tZW1wdHktY2hhcmFjdGVyLWNsYXNzIjoyLCJuby1lbXB0eS1wYXR0ZXJuIjoyLCJuby1leC1hc3NpZ24iOjIsIm5vLWV4dHJhLWJvb2xlYW4tY2FzdCI6Miwibm8tZXh0cmEtc2VtaSI6Miwibm8tZmFsbHRocm91Z2giOjIsIm5vLWdsb2JhbC1hc3NpZ24iOjIsIm5vLWltcG9ydC1hc3NpZ24iOjIsIm5vLWlubmVyLWRlY2xhcmF0aW9ucyI6Miwibm8taW52YWxpZC1yZWdleHAiOjIsIm5vLWlycmVndWxhci13aGl0ZXNwYWNlIjoyLCJuby1taXNsZWFkaW5nLWNoYXJhY3Rlci1jbGFzcyI6Miwibm8tbWl4ZWQtc3BhY2VzLWFuZC10YWJzIjoyLCJuby1uZXctc3ltYm9sIjoyLCJuby1vYmotY2FsbHMiOjIsIm5vLW9jdGFsIjoyLCJuby1wcm90b3R5cGUtYnVpbHRpbnMiOjIsIm5vLXJlZGVjbGFyZSI6Miwibm8tcmVnZXgtc3BhY2VzIjoyLCJuby1zZWxmLWFzc2lnbiI6Miwibm8tc2V0dGVyLXJldHVybiI6Miwibm8tc2hhZG93LXJlc3RyaWN0ZWQtbmFtZXMiOjIsIm5vLXNwYXJzZS1hcnJheXMiOjIsIm5vLXRoaXMtYmVmb3JlLXN1cGVyIjoyLCJuby11bmRlZiI6Miwibm8tdW5leHBlY3RlZC1tdWx0aWxpbmUiOjIsIm5vLXVucmVhY2hhYmxlIjoyLCJuby11bnNhZmUtZmluYWxseSI6Miwibm8tdW5zYWZlLW5lZ2F0aW9uIjoyLCJuby11bnVzZWQtbGFiZWxzIjoyLCJuby11bnVzZWQtdmFycyI6Miwibm8tdXNlbGVzcy1jYXRjaCI6Miwibm8tdXNlbGVzcy1lc2NhcGUiOjIsIm5vLXdpdGgiOjIsInJlcXVpcmUteWllbGQiOjIsInVzZS1pc25hbiI6MiwidmFsaWQtdHlwZW9mIjoyfSwiZW52Ijp7fX19)\r\n\r\n* **ESLint Version:** v7.9.0\r\n* **Node Version:** Doesn't matter (web hosted)\r\n* **npm Version:** Doesn't matter (web hosted)\r\n\r\n**What parser (default, `@babel/eslint-parser`, `@typescript-eslint/parser`, etc.) are you using?** - default\r\n\r\n**Please show your full configuration:**\r\n\r\n<details>\r\n<summary>Configuration</summary>\r\n\r\n<!-- Paste your configuration below: -->\r\n```js\r\n{\r\n    \"parserOptions\": {\r\n        \"ecmaVersion\": 12,\r\n        \"sourceType\": \"script\",\r\n        \"ecmaFeatures\": {}\r\n    },\r\n    \"rules\": {\r\n        \"constructor-super\": 2,\r\n        \"for-direction\": 2,\r\n        \"getter-return\": 2,\r\n        \"no-async-promise-executor\": 2,\r\n        \"no-case-declarations\": 2,\r\n        \"no-class-assign\": 2,\r\n        \"no-compare-neg-zero\": 2,\r\n        \"no-cond-assign\": 2,\r\n        \"no-const-assign\": 2,\r\n        \"no-constant-condition\": 2,\r\n        \"no-control-regex\": 2,\r\n        \"no-debugger\": 2,\r\n        \"no-delete-var\": 2,\r\n        \"no-dupe-args\": 2,\r\n        \"no-dupe-class-members\": 2,\r\n        \"no-dupe-else-if\": 2,\r\n        \"no-dupe-keys\": 2,\r\n        \"no-duplicate-case\": 2,\r\n        \"no-empty\": 2,\r\n        \"no-empty-character-class\": 2,\r\n        \"no-empty-pattern\": 2,\r\n        \"no-ex-assign\": 2,\r\n        \"no-extra-boolean-cast\": 2,\r\n        \"no-extra-semi\": 2,\r\n        \"no-fallthrough\": 2,\r\n        \"no-global-assign\": 2,\r\n        \"no-import-assign\": 2,\r\n        \"no-inner-declarations\": 2,\r\n        \"no-invalid-regexp\": 2,\r\n        \"no-irregular-whitespace\": 2,\r\n        \"no-misleading-character-class\": 2,\r\n        \"no-mixed-spaces-and-tabs\": 2,\r\n        \"no-new-symbol\": 2,\r\n        \"no-obj-calls\": 2,\r\n        \"no-octal\": 2,\r\n        \"no-prototype-builtins\": 2,\r\n        \"no-redeclare\": 2,\r\n        \"no-regex-spaces\": 2,\r\n        \"no-self-assign\": 2,\r\n        \"no-setter-return\": 2,\r\n        \"no-shadow-restricted-names\": 2,\r\n        \"no-sparse-arrays\": 2,\r\n        \"no-this-before-super\": 2,\r\n        \"no-undef\": 2,\r\n        \"no-unexpected-multiline\": 2,\r\n        \"no-unreachable\": 2,\r\n        \"no-unsafe-finally\": 2,\r\n        \"no-unsafe-negation\": 2,\r\n        \"no-unused-labels\": 2,\r\n        \"no-unused-vars\": 2,\r\n        \"no-useless-catch\": 2,\r\n        \"no-useless-escape\": 2,\r\n        \"no-with\": 2,\r\n        \"require-yield\": 2,\r\n        \"use-isnan\": 2,\r\n        \"valid-typeof\": 2\r\n    },\r\n    \"env\": {}\r\n}\r\n```\r\n\r\nOnly actual change from default config is - disabled \"no-func-assign\"\r\n\r\n</details>\r\n\r\n**What did you do? Please include the actual source code causing the issue, as well as the command that you used to run ESLint.**\r\n\r\n<!-- Paste the source code below: -->\r\n```js\r\nvar a = function hello() {\r\n  'use strict';\r\n  hello = 123; // should throw error here\r\n};\r\na()\r\n```\r\n\r\n<!-- Paste the command you used to run ESLint: -->\r\nRan demo web version - [Demo URL](https://eslint.org/demo#eyJ0ZXh0IjoidmFyIGEgPSBmdW5jdGlvbiBoZWxsbygpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBoZWxsbyA9IDEyMztcbn07XG5hKCkiLCJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsiZWNtYVZlcnNpb24iOjEyLCJzb3VyY2VUeXBlIjoic2NyaXB0IiwiZWNtYUZlYXR1cmVzIjp7fX0sInJ1bGVzIjp7ImNvbnN0cnVjdG9yLXN1cGVyIjoyLCJmb3ItZGlyZWN0aW9uIjoyLCJnZXR0ZXItcmV0dXJuIjoyLCJuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yIjoyLCJuby1jYXNlLWRlY2xhcmF0aW9ucyI6Miwibm8tY2xhc3MtYXNzaWduIjoyLCJuby1jb21wYXJlLW5lZy16ZXJvIjoyLCJuby1jb25kLWFzc2lnbiI6Miwibm8tY29uc3QtYXNzaWduIjoyLCJuby1jb25zdGFudC1jb25kaXRpb24iOjIsIm5vLWNvbnRyb2wtcmVnZXgiOjIsIm5vLWRlYnVnZ2VyIjoyLCJuby1kZWxldGUtdmFyIjoyLCJuby1kdXBlLWFyZ3MiOjIsIm5vLWR1cGUtY2xhc3MtbWVtYmVycyI6Miwibm8tZHVwZS1lbHNlLWlmIjoyLCJuby1kdXBlLWtleXMiOjIsIm5vLWR1cGxpY2F0ZS1jYXNlIjoyLCJuby1lbXB0eSI6Miwibm8tZW1wdHktY2hhcmFjdGVyLWNsYXNzIjoyLCJuby1lbXB0eS1wYXR0ZXJuIjoyLCJuby1leC1hc3NpZ24iOjIsIm5vLWV4dHJhLWJvb2xlYW4tY2FzdCI6Miwibm8tZXh0cmEtc2VtaSI6Miwibm8tZmFsbHRocm91Z2giOjIsIm5vLWdsb2JhbC1hc3NpZ24iOjIsIm5vLWltcG9ydC1hc3NpZ24iOjIsIm5vLWlubmVyLWRlY2xhcmF0aW9ucyI6Miwibm8taW52YWxpZC1yZWdleHAiOjIsIm5vLWlycmVndWxhci13aGl0ZXNwYWNlIjoyLCJuby1taXNsZWFkaW5nLWNoYXJhY3Rlci1jbGFzcyI6Miwibm8tbWl4ZWQtc3BhY2VzLWFuZC10YWJzIjoyLCJuby1uZXctc3ltYm9sIjoyLCJuby1vYmotY2FsbHMiOjIsIm5vLW9jdGFsIjoyLCJuby1wcm90b3R5cGUtYnVpbHRpbnMiOjIsIm5vLXJlZGVjbGFyZSI6Miwibm8tcmVnZXgtc3BhY2VzIjoyLCJuby1zZWxmLWFzc2lnbiI6Miwibm8tc2V0dGVyLXJldHVybiI6Miwibm8tc2hhZG93LXJlc3RyaWN0ZWQtbmFtZXMiOjIsIm5vLXNwYXJzZS1hcnJheXMiOjIsIm5vLXRoaXMtYmVmb3JlLXN1cGVyIjoyLCJuby11bmRlZiI6Miwibm8tdW5leHBlY3RlZC1tdWx0aWxpbmUiOjIsIm5vLXVucmVhY2hhYmxlIjoyLCJuby11bnNhZmUtZmluYWxseSI6Miwibm8tdW5zYWZlLW5lZ2F0aW9uIjoyLCJuby11bnVzZWQtbGFiZWxzIjoyLCJuby11bnVzZWQtdmFycyI6Miwibm8tdXNlbGVzcy1jYXRjaCI6Miwibm8tdXNlbGVzcy1lc2NhcGUiOjIsIm5vLXdpdGgiOjIsInJlcXVpcmUteWllbGQiOjIsInVzZS1pc25hbiI6MiwidmFsaWQtdHlwZW9mIjoyfSwiZW52Ijp7fX19)\r\n\r\n\r\n**What did you expect to happen?**\r\n\r\nI have disabled \"no-func-assign\" rule.  \r\nOn the line \"hello = 123\" within named function expression, this will always throw a runtime JS error saying `TypeError: Assignment to constant variable`. That means, this is a assignment to a (implicitly created) immutable binding for the function name \"hello\". \"no-const-assign\" rule should also catch this error, irrespective of \"no-func-assign\" - because this is a const reassignment.\r\n\r\nThe [spec says](https://tc39.es/ecma262/#sec-function-definitions-runtime-semantics-evaluation) that for named function expressions, there is a implicitly created extra scope above the function local scope which has immutable binding for funcName = funcObject. So, this means -\r\n\r\nA. This code should not be allowed\r\n\r\n```\r\nvar a = function hello() {\r\n  'use strict';\r\n  hello = 123; // reassign const\r\n};\r\n```\r\n\r\nB. but this should be allowed -\r\n\r\n```\r\nvar a = function hello() {\r\n  'use strict';\r\n  const hello = 123; // creates new const\r\n};\r\n```\r\n\r\n\r\n**What actually happened? Please include the actual, raw output from ESLint.**\r\n\r\nNo lint error or warning (lint-free)\r\n\r\n**Are you willing to submit a pull request to fix this bug?**\r\n\r\nYes","closed_by":{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/13705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/13705/timeline","performed_via_github_app":null,"state_reason":"completed"}