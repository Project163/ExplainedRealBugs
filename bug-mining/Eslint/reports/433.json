{"url":"https://api.github.com/repos/eslint/eslint/issues/13551","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/13551/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/13551/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/13551/events","html_url":"https://github.com/eslint/eslint/issues/13551","id":675086053,"node_id":"MDU6SXNzdWU2NzUwODYwNTM=","number":13551,"title":"Symbolic links are ignored","user":{"login":"vjekoart","id":7541149,"node_id":"MDQ6VXNlcjc1NDExNDk=","avatar_url":"https://avatars.githubusercontent.com/u/7541149?v=4","gravatar_id":"","url":"https://api.github.com/users/vjekoart","html_url":"https://github.com/vjekoart","followers_url":"https://api.github.com/users/vjekoart/followers","following_url":"https://api.github.com/users/vjekoart/following{/other_user}","gists_url":"https://api.github.com/users/vjekoart/gists{/gist_id}","starred_url":"https://api.github.com/users/vjekoart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vjekoart/subscriptions","organizations_url":"https://api.github.com/users/vjekoart/orgs","repos_url":"https://api.github.com/users/vjekoart/repos","events_url":"https://api.github.com/users/vjekoart/events{/privacy}","received_events_url":"https://api.github.com/users/vjekoart/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711350,"node_id":"MDU6TGFiZWw0NTcxMTM1MA==","url":"https://api.github.com/repos/eslint/eslint/labels/bug","name":"bug","color":"fc2929","default":true,"description":"ESLint is working incorrectly"},{"id":82922548,"node_id":"MDU6TGFiZWw4MjkyMjU0OA==","url":"https://api.github.com/repos/eslint/eslint/labels/core","name":"core","color":"c7def8","default":false,"description":"Relates to ESLint's core APIs and features"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":13,"created_at":"2020-08-07T15:20:49Z","updated_at":"2021-08-26T00:18:21Z","closed_at":"2021-02-26T00:25:35Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"* **ESLint Version: 7.6.0**\r\n* **Node Version: 12.18.0**\r\n* **npm Version: 6.14.4**\r\n\r\n**What parser (default, Babel-ESLint, etc.) are you using?**\r\n`@typescript-eslint/parser`\r\n\r\n**Please show your full configuration:**\r\n\r\n<details>\r\n<summary>Configuration</summary>\r\n\r\n<!-- Paste your configuration below: -->\r\n```js\r\n{\r\n    \"env\": {\r\n        \"browser\": true\r\n    },\r\n    \"extends\": [\r\n        \"eslint:recommended\",\r\n        \"plugin:@typescript-eslint/recommended\",\r\n        \"plugin:@typescript-eslint/recommended-requiring-type-checking\"\r\n    ],\r\n    \"parser\": \"@typescript-eslint/parser\",\r\n    \"parserOptions\": {\r\n        \"ecmaVersion\": 6,\r\n        \"sourceType\": \"module\",\r\n        \"project\": [\"./tsconfig.json\"]\r\n    },\r\n    \"plugins\": [ \"@typescript-eslint\" ],\r\n    \"rules\": {\r\n        \"brace-style\": [\"error\", \"allman\", { \"allowSingleLine\": true }],\r\n        \"eol-last\": [\"error\", \"always\"],\r\n        \"eqeqeq\": [\"error\", \"always\"],\r\n        \"indent\": [\"error\", 4, { \"SwitchCase\": 1 }],\r\n        \"linebreak-style\": [\"error\", \"unix\"],\r\n        \"lines-between-class-members\": [\"error\", \"always\"],\r\n        \"max-len\": [\"error\", { \"code\": 120 }],\r\n        \"new-cap\": \"error\",\r\n        \"no-irregular-whitespace\": [\"off\"],\r\n        \"no-multiple-empty-lines\": \"error\",\r\n        \"no-nested-ternary\": \"error\",\r\n        \"no-trailing-spaces\": \"error\",\r\n        \"no-unexpected-multiline\": [\"off\"],\r\n        \"object-curly-spacing\": [\"error\", \"always\"],\r\n        \"object-property-newline\": \"error\",\r\n        \"one-var\": [\"error\", \"never\"],\r\n        \"quotes\": [\"error\", \"double\"],\r\n        \"semi\": [\"error\", \"always\"],\r\n        \"space-before-blocks\": [\"error\", \"always\"],\r\n        \"space-in-parens\": [\"error\", \"always\"],\r\n        \"spaced-comment\": [\"error\", \"always\", {\r\n            \"block\": { \"balanced\": true },\r\n            \"exceptions\": []\r\n        }],\r\n        \"@typescript-eslint/no-empty-interface\": [\"error\", { \"allowSingleExtends\": true }],\r\n        \"@typescript-eslint/no-explicit-any\": [\"error\"],\r\n        \"@typescript-eslint/no-floating-promises\": [\"error\"],\r\n        \"@typescript-eslint/no-non-null-assertion\": [\"error\"],\r\n        \"@typescript-eslint/no-unsafe-assignment\": [\"error\"],\r\n        \"@typescript-eslint/no-unsafe-call\": [\"error\"],\r\n        \"@typescript-eslint/no-unsafe-member-access\": [\"error\"],\r\n        \"@typescript-eslint/no-unsafe-return\": [\"error\"],\r\n        \"@typescript-eslint/no-unused-vars\": [\"error\"],\r\n        \"@typescript-eslint/restrict-template-expressions\": [\"error\"]\r\n    }\r\n}\r\n```\r\n\r\n</details>\r\n\r\n**What did you do? Please include the actual source code causing the issue, as well as the command that you used to run ESLint.**\r\n\r\n<!-- Paste the source code below: -->\r\n```js\r\n// Not relevant, since files are analysed correctly, but not all files are checked.\r\n```\r\n\r\n<!-- Paste the command you used to run ESLint: -->\r\n```bash\r\n# This command is executed from `package.json`, i.e. this code is under the `scripts.lint` property.\r\neslint --ext ts -c .eslintrc.json src\r\n```\r\n\r\n**What did you expect to happen?**\r\nI'm working on a project which has the following structure of `src` directory:\r\n\r\n```\r\nsrc/\r\n    code.ts\r\n    utils/  # Folder with files and subfolders.\r\n    shared/ # Symbolic link to another folder which is not within the `src/` folder.\r\n```\r\n\r\nI've some errors in TS files inside `src/shared/` directory. I expected errors and warnings from ESLint when running a lint action.\r\n\r\n**What actually happened? Please include the actual, raw output from ESLint.**\r\nAll files, except those in `src/shared/` directory have been checked for errors.\r\n\r\nAfter some research, I've identified method `_iterateFilesRecursive` as problematic in `lib/cli-engine/file-enumerator.js` file.\r\n\r\nInside that function all entries inside a specific directory are checked if they are a file or a folder. But if entry is a symbolic link, it's completely ignored.\r\n\r\nCurrently, I've made a workaround to patch aforementioned file with modified version of `_iterateFilesRecursive` method. Of course, that solution is not good since I'm locked to a specific version of ESLint package.\r\n\r\n<details>\r\n<summary>Modified version of `_iterateFilesRecursive`</summary>\r\n\r\n```js\r\n    *_iterateFilesRecursive(directoryPath, options) {\r\n        debug(`Enter the directory: ${directoryPath}`);\r\n        const { configArrayFactory } = internalSlotsMap.get(this);\r\n\r\n        /** @type {ConfigArray|null} */\r\n        let config = null;\r\n\r\n        // Enumerate the files of this directory.\r\n        for (const entry of readdirSafeSync(directoryPath)) {\r\n            const filePath = path.join(directoryPath, entry.name);\r\n\r\n            // --- CUSTOM CODE STARTS HERE --- //\r\n\r\n            // A decision will be made differently if the path represents a symbolic link.\r\n            let isFile = false;\r\n            let isDirectory = false;\r\n\r\n            if (entry.isSymbolicLink()) {\r\n                const fileStat = statSafeSync(filePath);\r\n\r\n                if (!fileStat) {\r\n                    continue;\r\n                }\r\n\r\n                isFile = fileStat.isFile();\r\n                isDirectory = fileStat.isDirectory();\r\n\r\n                if (isFile) {\r\n                    console.log('\\nCarefully use symbolic links for files since imports may not be resolved correctly!\\n');\r\n                }\r\n            } else {\r\n                isFile = entry.isFile();\r\n                isDirectory = entry.isDirectory();\r\n            }\r\n\r\n            // --- CUSTOM CODE ENDS HERE --- //\r\n\r\n            // Check if the file is matched.\r\n            if (isFile) { // -- CHANGED FROM `entry.isFile()`\r\n                if (!config) {\r\n                    config = configArrayFactory.getConfigArrayForFile(\r\n                        filePath,\r\n\r\n                        /*\r\n                         * We must ignore `ConfigurationNotFoundError` at this\r\n                         * point because we don't know if target files exist in\r\n                         * this directory.\r\n                         */\r\n                        { ignoreNotFoundError: true }\r\n                    );\r\n                }\r\n                const matched = options.selector\r\n\r\n                    // Started with a glob pattern; choose by the pattern.\r\n                    ? options.selector.match(filePath)\r\n\r\n                    // Started with a directory path; choose by file extensions.\r\n                    : this.isTargetPath(filePath, config);\r\n\r\n                if (matched) {\r\n                    const ignored = this._isIgnoredFile(filePath, { ...options, config });\r\n                    const flag = ignored ? IGNORED_SILENTLY : NONE;\r\n\r\n                    debug(`Yield: ${entry.name}${ignored ? \" but ignored\" : \"\"}`);\r\n                    yield {\r\n                        config: configArrayFactory.getConfigArrayForFile(filePath),\r\n                        filePath,\r\n                        flag\r\n                    };\r\n                } else {\r\n                    debug(`Didn't match: ${entry.name}`);\r\n                }\r\n\r\n            // Dive into the sub directory.\r\n            } else if (options.recursive && isDirectory) {  // -- CHANGED FROM `entry.isDirectory()`\r\n                if (!config) {\r\n                    config = configArrayFactory.getConfigArrayForFile(\r\n                        filePath,\r\n                        { ignoreNotFoundError: true }\r\n                    );\r\n                }\r\n                const ignored = this._isIgnoredFile(\r\n                    filePath + path.sep,\r\n                    { ...options, config }\r\n                );\r\n\r\n                if (!ignored) {\r\n                    yield* this._iterateFilesRecursive(filePath, options);\r\n                }\r\n            }\r\n        }\r\n\r\n        debug(`Leave the directory: ${directoryPath}`);\r\n    }\r\n```\r\n\r\n</details>\r\n\r\n**Are you willing to submit a pull request to fix this bug?**\r\nYes.","closed_by":{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/13551/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/13551/timeline","performed_via_github_app":null,"state_reason":"completed"}