{"url":"https://api.github.com/repos/eslint/eslint/issues/14163","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/14163/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/14163/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/14163/events","html_url":"https://github.com/eslint/eslint/issues/14163","id":820184218,"node_id":"MDU6SXNzdWU4MjAxODQyMTg=","number":14163,"title":"no-unused-vars with ignoreRestSiblings:true reports false-positives","user":{"login":"bdurrer","id":508289,"node_id":"MDQ6VXNlcjUwODI4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/508289?v=4","gravatar_id":"","url":"https://api.github.com/users/bdurrer","html_url":"https://github.com/bdurrer","followers_url":"https://api.github.com/users/bdurrer/followers","following_url":"https://api.github.com/users/bdurrer/following{/other_user}","gists_url":"https://api.github.com/users/bdurrer/gists{/gist_id}","starred_url":"https://api.github.com/users/bdurrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdurrer/subscriptions","organizations_url":"https://api.github.com/users/bdurrer/orgs","repos_url":"https://api.github.com/users/bdurrer/repos","events_url":"https://api.github.com/users/bdurrer/events{/privacy}","received_events_url":"https://api.github.com/users/bdurrer/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711350,"node_id":"MDU6TGFiZWw0NTcxMTM1MA==","url":"https://api.github.com/repos/eslint/eslint/labels/bug","name":"bug","color":"fc2929","default":true,"description":"ESLint is working incorrectly"},{"id":45798639,"node_id":"MDU6TGFiZWw0NTc5ODYzOQ==","url":"https://api.github.com/repos/eslint/eslint/labels/rule","name":"rule","color":"fbca04","default":false,"description":"Relates to ESLint's core rules"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"},{"id":2786823532,"node_id":"MDU6TGFiZWwyNzg2ODIzNTMy","url":"https://api.github.com/repos/eslint/eslint/labels/repro:yes","name":"repro:yes","color":"7A14E9","default":false,"description":"Issues with a reproducible example"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-03-02T16:34:23Z","updated_at":"2021-10-01T17:41:32Z","closed_at":"2021-04-03T23:32:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n    ESLint adheres to the Open JS Foundation Code of Conduct:\r\n    https://eslint.org/conduct\r\n\r\n    This template is for bug reports. If you are here for another reason, please see below:\r\n\r\n    1. To propose a new rule: https://eslint.org/docs/developer-guide/contributing/new-rules\r\n    2. To request a rule change: https://eslint.org/docs/developer-guide/contributing/rule-changes\r\n    3. To request a change that is not a bug fix, rule change, or new rule: https://eslint.org/docs/developer-guide/contributing/changes\r\n    4. If you have any questions, please stop by our chatroom: https://eslint.org/chat/help\r\n\r\n    Note that leaving sections blank will make it difficult for us to troubleshoot and we may have to close the issue.\r\n-->\r\n\r\n\r\n**Tell us about your environment**\r\n\r\n<!--\r\n    If you are using ESLint v6.5.0 or later, you can run ESLint with the `--env-info` flag and paste the output here.\r\n-->\r\n\r\n* **ESLint Version:** 7.21.0\r\n* **Node Version:** 12.16.2\r\n* **npm Version:** 6.14.4\r\n* **Operating System:** Windows\r\n\r\n**What parser (default, `@babel/eslint-parser`, `@typescript-eslint/parser`, etc.) are you using?**\r\nbabel-eslint\r\n\r\n**Please show your full configuration:**\r\n\r\n<details>\r\n<summary>Configuration</summary>\r\n\r\n<!-- Paste your configuration below: -->\r\n```js\r\nmodule.exports = {\r\n    extends: 'airbnb',\r\n    parser: 'babel-eslint',\r\n    plugins: [\r\n        'jasmine',\r\n        'webdriverio',\r\n        'react-redux',\r\n    ],\r\n    env: {\r\n        'browser': true,\r\n        'node': true,\r\n        'jasmine': true,\r\n        'webdriverio/wdio': true,\r\n    },\r\n    rules: {\r\n        'import/no-cycle': 'off',\r\n        'react/jsx-props-no-spreading': 'off',\r\n        'react/no-access-state-in-setstate': 'off',\r\n        'arrow-parens': ['error', \"as-needed\", { \"requireForBlockBody\": true }],\r\n        'function-paren-newline': 'off',\r\n        'indent': ['error', 4, { 'SwitchCase': 1 }],\r\n        'no-undef': 'error',\r\n        'no-underscore-dangle': 'off',\r\n        'no-multiple-empty-lines': ['warn', { \"max\": 2 } ],\r\n        'no-else-return': ['error', { allowElseIf: true }],\r\n        'no-restricted-globals': [\r\n            \"error\",\r\n            { name: 'Set', message: 'Use window.Set or add an eslint-ignore if native Set is what you want' },\r\n            { name: 'Map', message: 'Use window.Map or add an eslint-ignore if native Map is what you want' }\r\n        ],\r\n        'max-len': ['error', 120],\r\n        'implicit-arrow-linebreak': 'off',\r\n        'jsx-a11y/click-events-have-key-events': 'off',\r\n        'jsx-a11y/interactive-supports-focus': 'off',\r\n        'jsx-a11y/label-has-for': 'off',\r\n        'jsx-a11y/label-has-associated-control': 'off',\r\n        'jsx-a11y/no-noninteractive-element-interactions': 'off',\r\n        'jsx-a11y/no-static-element-interactions': 'off',\r\n        'jsx-a11y/anchor-is-valid': 'off',\r\n        'jsx-a11y/control-has-associated-label': 'off',\r\n        'class-methods-use-this': 'off',\r\n        'no-plusplus': ['error', { 'allowForLoopAfterthoughts': true }],\r\n        'no-mixed-operators': ['error', { 'allowSamePrecedence': true }],\r\n        'no-multi-spaces': ['error', { ignoreEOLComments: true }],\r\n        'no-console': 'warn',\r\n        'no-continue': 'off',\r\n        'no-unused-vars': ['error', { 'ignoreRestSiblings': true }],\r\n        'object-curly-newline': 'off',\r\n        'operator-linebreak': [\"warn\", \"after\"],\r\n        'prefer-destructuring': 'off',\r\n        'prefer-promise-reject-errors': 'warn',\r\n        'react/sort-comp': ['warn', { order: ['static-methods',  'lifecycle', 'everything-else', 'render'] }],\r\n        'react/forbid-prop-types': 'off',\r\n        'react/jsx-fragments': 'off',\r\n        'react/jsx-filename-extension': 'off',\r\n        'react/jsx-indent': ['error', 4],\r\n        'react/jsx-indent-props': ['error', 4],\r\n        'react/no-danger': 'off',\r\n        'react/require-default-props': 'off',\r\n        'react/jsx-boolean-value': 'off',\r\n        'react/no-did-update-set-state': 'off', // recommended way since 16.3.\r\n        'react/destructuring-assignment': 'off',\r\n        'react/static-property-placement': 'off',\r\n        'react-redux/prefer-separate-component-file': 'off',\r\n        'react-redux/connect-prefer-named-arguments': 'off',\r\n        'react/no-unused-prop-types': 'off', // superseded by react-redux/no-unused-prop-types\r\n        'react/jsx-props-no-multi-spaces': 'off',\r\n        // disallow certain syntax forms\r\n        // http://eslint.org/docs/rules/no-restricted-syntax\r\n        'no-restricted-syntax': [\r\n            'error',\r\n            {\r\n                selector: 'ForInStatement',\r\n                message: 'for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.',\r\n            },\r\n            {\r\n                selector: 'LabeledStatement',\r\n                message: 'Labels are a form of GOTO; using them makes code confusing and hard to maintain and understand.',\r\n            },\r\n            {\r\n                selector: 'WithStatement',\r\n                message: '`with` is disallowed in strict mode because it makes code impossible to predict and optimize.',\r\n            },\r\n        ],\r\n        camelcase: 'off'\r\n    },\r\n    globals: {\r\n        '__BUILD_NR__': true,\r\n        'requestIdleCallback': true,\r\n        'any': true\r\n    },\r\n    settings: {\r\n        'import/core-modules': [\r\n            'native-api',\r\n        ],\r\n        'react': {\r\n            'pragma': 'React',\r\n            'version': '16.3'\r\n        },\r\n    }\r\n};\r\n\r\n```\r\n\r\n</details>\r\n\r\n**What did you do? Please include the actual source code causing the issue, as well as the command that you used to run ESLint.**\r\n\r\n<!-- Paste the source code below: -->\r\n```\r\nfunction buildLibraryStructure(folders, entries) {\r\n    const structureMap = {\r\n        root: {\r\n            id: 'root',\r\n            title: 'Library',\r\n            type: navItemTypes.folder,\r\n            parent: null,\r\n            children: [],\r\n            weight: 1,\r\n        },\r\n    };\r\n\r\n    // reused dummy variables used to spread data out of entries/folders\r\n    /* eslint-disable no-unused-vars */\r\n    let folder;\r\n    let validFrom;\r\n    let validUntil;\r\n    let parent;\r\n    /* eslint-enable no-unused-vars */\r\n    let rest;\r\n\r\n    // Add folders to map of items\r\n    folders.forEach((folderItem) => {\r\n        ({ folder, validFrom, validUntil, ...rest } = folderItem);\r\n\r\n        structureMap[folderItem.id] = {\r\n            ...rest,\r\n            oid: folderItem.id,\r\n            isFolder: true,\r\n        };\r\n    });\r\n    return structureMap;\r\n}\r\n```\r\n\r\n**What did you expect to happen?**\r\nI believe the rule `no-unused-vars` should not be triggered.\r\n\r\nThe rule is configured as `'no-unused-vars': ['error', { 'ignoreRestSiblings': true }],`.\r\nThe above code splits definition and spreading of the two variables `folder` and `rest`. The definition of the variables are even enclosed in a `disable no-unused-vars`\r\n\r\n**What actually happened? Please copy-paste the actual, raw output from ESLint.**\r\n\r\n>   38:16  error  'folder' is assigned a value but never used      no-unused-vars\r\n>   38:20  error  'validFrom' is assigned a value but never used   no-unused-vars\r\n>   38:31  error  'validUntil' is assigned a value but never used  no-unused-vars\r\n\r\n**Steps to reproduce this issue:**\r\n\r\n<!-- Please tell us exactly how to see the issue you're describing -->\r\n\r\n1. split definition and usage of variables\r\n1. use the rest operator with a throw-away variables on an other line\r\n1. no-unsed-vars is triggered\r\n\r\n**Are you willing to submit a pull request to fix this bug?**\r\nNo, I don't think I could\r\n","closed_by":{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/14163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/14163/timeline","performed_via_github_app":null,"state_reason":"completed"}