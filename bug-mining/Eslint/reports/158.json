{"url":"https://api.github.com/repos/eslint/eslint/issues/11169","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/11169/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/11169/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/11169/events","html_url":"https://github.com/eslint/eslint/issues/11169","id":388755245,"node_id":"MDU6SXNzdWUzODg3NTUyNDU=","number":11169,"title":"Update doc on `no-unused-expressions`","user":{"login":"snooopcatt","id":1575279,"node_id":"MDQ6VXNlcjE1NzUyNzk=","avatar_url":"https://avatars.githubusercontent.com/u/1575279?v=4","gravatar_id":"","url":"https://api.github.com/users/snooopcatt","html_url":"https://github.com/snooopcatt","followers_url":"https://api.github.com/users/snooopcatt/followers","following_url":"https://api.github.com/users/snooopcatt/following{/other_user}","gists_url":"https://api.github.com/users/snooopcatt/gists{/gist_id}","starred_url":"https://api.github.com/users/snooopcatt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snooopcatt/subscriptions","organizations_url":"https://api.github.com/users/snooopcatt/orgs","repos_url":"https://api.github.com/users/snooopcatt/repos","events_url":"https://api.github.com/users/snooopcatt/events{/privacy}","received_events_url":"https://api.github.com/users/snooopcatt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45798639,"node_id":"MDU6TGFiZWw0NTc5ODYzOQ==","url":"https://api.github.com/repos/eslint/eslint/labels/rule","name":"rule","color":"fbca04","default":false,"description":"Relates to ESLint's core rules"},{"id":64004798,"node_id":"MDU6TGFiZWw2NDAwNDc5OA==","url":"https://api.github.com/repos/eslint/eslint/labels/documentation","name":"documentation","color":"5319e7","default":true,"description":"Relates to ESLint's documentation"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-12-07T17:56:48Z","updated_at":"2019-06-21T08:07:42Z","closed_at":"2018-12-22T22:57:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello.\r\nI think `no-unused-expressions` doc article could have a note, explaining why is that rule actually matters. Let me tell you a pretty dramatic story with a happy end (short version, for those not believing in fairy tales, is below).\r\n\r\n## Long version\r\n\r\nOnce upon a time there was a team of developers who adopted eslint to watch after their young Code. Everything went well, until one day developers decided to utilize fancy ecma getters/setters. And those getters were actually smart and state-changing: if property didn't exist, getter would create one. And they used to trigger getter just by refencing it:\r\n```\r\nget bar() {\r\n  if (!this._bar) {\r\n    this._bar = 'bar';\r\n  }\r\n  return this._bar;\r\n}\r\n\r\nfoo() {\r\n  this.bar;\r\n}\r\n```\r\nESLint saw this and told them: I won't let you commit this `unused-expression` noncense! Developers were wondering, what is wrong with this Code? They were new to getters, they did have problem with such form of expression, but they just assumed ecma allows it. So they just calmed down ESLint with an incantation:\r\n```\r\nfoo() {\r\n  // eslint-disable-next-line no-unused-expressions\r\n  this.bar;\r\n}\r\n```\r\nAs they were saying this, ESLint shouted **I CURSE YOU! A DAY SHALL COME AND YOU WILL REMEMBER MY WORDS!**. Frightened, developers covered their Code with a blanket, woven of the decent test and soon forgot about very scary incident.\r\n\r\nTime flew by, and many moons later developers decided they want to try out Angular framework, to see if their Code can play with it. They built a playground, let Angular and Code in, and watched. It was going very well, until one time, they decided to finish this playground by another incantation:\r\n```\r\nng build --prod\r\n```\r\nand as soon as they finished incantation and looked at playground, they saw (_OH NO_) Code couldn't run! Couldn't even walk! \r\n\r\nDevelopers cared very much about their growing Code, and were eager to help it. So they used ancient magic to see why Code didn't work. They spent hours trying to find cure, they used maps of the production application, but maps didn't show anything useful. Hopes were fading. But then one very old and wise developer, who saw Code being born, noticed that some parts of code were behaving as they were missing key logic. He found few pieces missing, and understood smth: those pieces reeked of magic! There it was, the incantation to silense ESLint, but also it was a curse. It turned out ESLint was right all the way, developers casted a reverse spell, waking up ESLint, they wrapped getter into the dummy function and (_OH THE MIRACLE_) playground was finished now, built in producton mode and Code was playing joyfully! Developers apologized to ESLint and vowed to be more respectful to it in future. They redid the blanket and used even more decent tests to wove it.\r\nAnd they lived happily ever after.\r\n\r\n## Short version:\r\nWhen we build angular demo in production mode, default setting remove dead code, so snipet below\r\n```\r\nget bar() {\r\n  if (!this._bar) {\r\n    this._bar = 'bar';\r\n  }\r\n  return this._bar;\r\n}\r\n\r\nfoo() {\r\n  this.bar; // <- no-unused-expression rule complains\r\n}\r\n```\r\nwill be compiled to smth like:\r\n```foo() {}```\r\n\r\nAlthough rule has severity level of *error*, it was not clear why. Code was working perfectly, so we silenced the rule. Then we got very difficult problems to debug in production code. \r\n\r\n## Conclusion\r\nIf you would add a noticeable note to the doc page, saying smth like ```such code might be deleted during build by some tools (e.g. ng build --prod)``` it would save hundreds of hours debugging. \r\nThank you.","closed_by":{"login":"platinumazure","id":284282,"node_id":"MDQ6VXNlcjI4NDI4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/284282?v=4","gravatar_id":"","url":"https://api.github.com/users/platinumazure","html_url":"https://github.com/platinumazure","followers_url":"https://api.github.com/users/platinumazure/followers","following_url":"https://api.github.com/users/platinumazure/following{/other_user}","gists_url":"https://api.github.com/users/platinumazure/gists{/gist_id}","starred_url":"https://api.github.com/users/platinumazure/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/platinumazure/subscriptions","organizations_url":"https://api.github.com/users/platinumazure/orgs","repos_url":"https://api.github.com/users/platinumazure/repos","events_url":"https://api.github.com/users/platinumazure/events{/privacy}","received_events_url":"https://api.github.com/users/platinumazure/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/11169/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/11169/timeline","performed_via_github_app":null,"state_reason":"completed"}