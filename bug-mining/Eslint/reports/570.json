{"url":"https://api.github.com/repos/eslint/eslint/issues/16537","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/16537/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/16537/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/16537/events","html_url":"https://github.com/eslint/eslint/issues/16537","id":1446025073,"node_id":"I_kwDOAKjKDc5WMJdx","number":16537,"title":"Change Request: Specifying files and ignores for eslint:recommended/eslint:all","user":{"login":"nzakas","id":38546,"node_id":"MDQ6VXNlcjM4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/38546?v=4","gravatar_id":"","url":"https://api.github.com/users/nzakas","html_url":"https://github.com/nzakas","followers_url":"https://api.github.com/users/nzakas/followers","following_url":"https://api.github.com/users/nzakas/following{/other_user}","gists_url":"https://api.github.com/users/nzakas/gists{/gist_id}","starred_url":"https://api.github.com/users/nzakas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzakas/subscriptions","organizations_url":"https://api.github.com/users/nzakas/orgs","repos_url":"https://api.github.com/users/nzakas/repos","events_url":"https://api.github.com/users/nzakas/events{/privacy}","received_events_url":"https://api.github.com/users/nzakas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711352,"node_id":"MDU6TGFiZWw0NTcxMTM1Mg==","url":"https://api.github.com/repos/eslint/eslint/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"This change enhances an existing feature of ESLint"},{"id":82922548,"node_id":"MDU6TGFiZWw4MjkyMjU0OA==","url":"https://api.github.com/repos/eslint/eslint/labels/core","name":"core","color":"c7def8","default":false,"description":"Relates to ESLint's core APIs and features"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":{"login":"nzakas","id":38546,"node_id":"MDQ6VXNlcjM4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/38546?v=4","gravatar_id":"","url":"https://api.github.com/users/nzakas","html_url":"https://github.com/nzakas","followers_url":"https://api.github.com/users/nzakas/followers","following_url":"https://api.github.com/users/nzakas/following{/other_user}","gists_url":"https://api.github.com/users/nzakas/gists{/gist_id}","starred_url":"https://api.github.com/users/nzakas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzakas/subscriptions","organizations_url":"https://api.github.com/users/nzakas/orgs","repos_url":"https://api.github.com/users/nzakas/repos","events_url":"https://api.github.com/users/nzakas/events{/privacy}","received_events_url":"https://api.github.com/users/nzakas/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"nzakas","id":38546,"node_id":"MDQ6VXNlcjM4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/38546?v=4","gravatar_id":"","url":"https://api.github.com/users/nzakas","html_url":"https://github.com/nzakas","followers_url":"https://api.github.com/users/nzakas/followers","following_url":"https://api.github.com/users/nzakas/following{/other_user}","gists_url":"https://api.github.com/users/nzakas/gists{/gist_id}","starred_url":"https://api.github.com/users/nzakas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzakas/subscriptions","organizations_url":"https://api.github.com/users/nzakas/orgs","repos_url":"https://api.github.com/users/nzakas/repos","events_url":"https://api.github.com/users/nzakas/events{/privacy}","received_events_url":"https://api.github.com/users/nzakas/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":8,"created_at":"2022-11-11T21:34:43Z","updated_at":"2023-08-23T15:27:05Z","closed_at":"2023-02-23T20:17:17Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### ESLint version\n\nHEAD\n\n### What problem do you want to solve?\n\nWith flat config, we currently cannot apply `eslint:recommended` or `eslint:all` to a subsection of files. In eslintrc, we can do this:\r\n\r\n```js\r\nmodule.exports = {\r\n    overrides: [\r\n        {\r\n            files: [\"src/foo/*.js\"],\r\n            extends: [\"eslint:recommended\"]\r\n        }\r\n    ]\r\n};\r\n```\n\n### What do you think is the correct solution?\n\n### Option 1: Core plugin\r\n\r\nOne option is that we could expose a \"core plugin\" at `eslint/plugin` that contains the rules, parsers, and special configs that ship with ESLint. That would end up looking like this:\r\n\r\n```js\r\nimport corePlugin from \"eslint/plugin\";\r\n\r\nexport default [\r\n    {\r\n        files: [\"src/foo/*.js\"],\r\n        ...corePlugin.configs.recommended\r\n    }\r\n];\r\n```\r\n\r\nSo both `eslint:recommended` and `eslint:all` would be exposed through `configs`, just like this was a standalone plugin.\r\n\r\n**Pros:**\r\n\r\n* Represents `eslint:recommended` and `eslint:all` as objects instead of strings.\r\n* Brings these special configs into alignment with configs exposed in plugins, so there's just one way to include configs from outside of your project.\r\n* We can eliminate the special `\"eslint:recommended\"` and `\"eslint:all\"` treatment (if we want).\r\n\r\n**Cons:**\r\n\r\n* Creates a dependency relationship between shareable configs/plugins and ESLint, where they will need to have at least a `peerDependencies` reference to ESLint, if not `dependencies` to ensure everything works correctly.\r\n\r\n### Option 2: Function configs\r\n\r\nAnother option is we could allow function configs that receive a `context` object with a reference to the special configs, such as:\r\n\r\n```js\r\nexport default function (context) {\r\n    [\r\n        {\r\n            files: [\"src/foo/*.js\"],\r\n            ...context.getConfig(\"eslint:recommended\")\r\n        }\r\n    ];\r\n}\r\n```\r\n\r\nSo both `eslint:recommended` and `eslint:all` would be exposed through `context.getConfig()` (or some other function).\r\n\r\n**Pros:**\r\n\r\n* Represents `eslint:recommended` and `eslint:all` as objects instead of strings.\r\n* Solves the problem of option 1 by ensuring that shared configs don't need a direct dependency relationship to ESLint.\r\n* `ConfigArray` already supports function configs, it's just disabled right now.\r\n\r\n**Cons:**\r\n\r\n* Introducing function configs complicates sharing configs. Whereas right now we can assume that a shared config is either an object (you can use with the spread operator) or an array of objects (you can use `map()` to apply to different `files` and `ignores`), function configs hide their internals, and because they expect that `context` object, will be hard to manipulate and customize.\r\n\r\n### Option 3: External package\r\n\r\nYet another option is we could publish a separate package with just the special configs. If we end up externalizing all JavaScript-related functionality (as suggested in #16482), then a step in that direction would be to publish a `@eslint/js` package, which would make it a natural location for these special configs. This is what it would look like:\r\n\r\n```js\r\nimport js from \"@eslint/js\";\r\n\r\nexport default [\r\n    {\r\n        files: [\"src/foo/*.js\"],\r\n        ...js.configs.recommended\r\n    }\r\n];\r\n```\r\n\r\n**Pros:**\r\n\r\n* Represents `eslint:recommended` and `eslint:all` as objects instead of strings.\r\n* Solves the problem of option 1 by ensuring that shared configs don't need a direct dependency relationship to ESLint.\r\n* By publishing an out-of-band `@eslint/js` package, we would be free to update these configs as necessary and also start down the path of removing JS-specific functionality from the core.\r\n\r\n**Cons:**\r\n\r\n* Introduces another package to manage and release.\r\n* Possible synchronicity issues between the `eslint` package and the `@eslint/js` package, although this could likely be mitigated by also moving rules into `@eslint/js` at some point.\n\n### Participation\n\n- [X] I am willing to submit a pull request for this change.\n\n### Additional comments\n\nThere may be other options I haven't listed out, so feel free to suggest them.\r\n\r\nThis appears to be the one case that eslintrc supports and flat config doesn't, so figuring this out is important to get us past the beta stage.\r\n\r\nI don't want to consider adding `extends` to flat config to solve this as it would introduce additional complexity into the config system that we were hoping to avoid with flat config.","closed_by":{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/16537/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/16537/timeline","performed_via_github_app":null,"state_reason":"completed"}