{"url":"https://api.github.com/repos/eslint/eslint/issues/16930","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/16930/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/16930/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/16930/events","html_url":"https://github.com/eslint/eslint/issues/16930","id":1599194165,"node_id":"I_kwDOAKjKDc5fUcQ1","number":16930,"title":"Change Request: Remove parser plugins from flat config","user":{"login":"nzakas","id":38546,"node_id":"MDQ6VXNlcjM4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/38546?v=4","gravatar_id":"","url":"https://api.github.com/users/nzakas","html_url":"https://github.com/nzakas","followers_url":"https://api.github.com/users/nzakas/followers","following_url":"https://api.github.com/users/nzakas/following{/other_user}","gists_url":"https://api.github.com/users/nzakas/gists{/gist_id}","starred_url":"https://api.github.com/users/nzakas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzakas/subscriptions","organizations_url":"https://api.github.com/users/nzakas/orgs","repos_url":"https://api.github.com/users/nzakas/repos","events_url":"https://api.github.com/users/nzakas/events{/privacy}","received_events_url":"https://api.github.com/users/nzakas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711352,"node_id":"MDU6TGFiZWw0NTcxMTM1Mg==","url":"https://api.github.com/repos/eslint/eslint/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"This change enhances an existing feature of ESLint"},{"id":82922548,"node_id":"MDU6TGFiZWw4MjkyMjU0OA==","url":"https://api.github.com/repos/eslint/eslint/labels/core","name":"core","color":"c7def8","default":false,"description":"Relates to ESLint's core APIs and features"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":{"login":"nzakas","id":38546,"node_id":"MDQ6VXNlcjM4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/38546?v=4","gravatar_id":"","url":"https://api.github.com/users/nzakas","html_url":"https://github.com/nzakas","followers_url":"https://api.github.com/users/nzakas/followers","following_url":"https://api.github.com/users/nzakas/following{/other_user}","gists_url":"https://api.github.com/users/nzakas/gists{/gist_id}","starred_url":"https://api.github.com/users/nzakas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzakas/subscriptions","organizations_url":"https://api.github.com/users/nzakas/orgs","repos_url":"https://api.github.com/users/nzakas/repos","events_url":"https://api.github.com/users/nzakas/events{/privacy}","received_events_url":"https://api.github.com/users/nzakas/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"nzakas","id":38546,"node_id":"MDQ6VXNlcjM4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/38546?v=4","gravatar_id":"","url":"https://api.github.com/users/nzakas","html_url":"https://github.com/nzakas","followers_url":"https://api.github.com/users/nzakas/followers","following_url":"https://api.github.com/users/nzakas/following{/other_user}","gists_url":"https://api.github.com/users/nzakas/gists{/gist_id}","starred_url":"https://api.github.com/users/nzakas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzakas/subscriptions","organizations_url":"https://api.github.com/users/nzakas/orgs","repos_url":"https://api.github.com/users/nzakas/repos","events_url":"https://api.github.com/users/nzakas/events{/privacy}","received_events_url":"https://api.github.com/users/nzakas/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2023-02-24T19:46:41Z","updated_at":"2023-09-13T15:03:13Z","closed_at":"2023-03-16T01:06:39Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### ESLint version\n\nHEAD\n\n### What problem do you want to solve?\n\nWhile working on the [Language Plugins RFC](https://github.com/eslint/rfcs/pull/99) I discovered a bit of complexity related to `languageOptions`. Right now, `languageOptions` is managed and resolved inside of the ESLint core, allowing us to do stuff like this:\r\n\r\n```js\r\nexport default [\r\n    {\r\n        plugins: {\r\n            \"@\": { \r\n                parsers: require(\"espree\")\r\n            }\r\n        },\r\n        languageOptions: {\r\n            parser: \"@/espree\"\r\n        }\r\n    }\r\n];\r\n```\r\n\r\nIn order to make this work, the core resolves `@/espree` to the `plugin.parsers.espree` key. This works well now, but once we move `languageOptions` resolution out of the core, we'd need to mimick this behavior or else remove it.\n\n### What do you think is the correct solution?\n\nI believe the correct solution is to remove the resolution of the `languageOptions.parser` key and enforce that `languageOptions.parser` always be an object. So we would end up with a default config looking more like this:\r\n\r\n```js\r\nexport default [\r\n    {\r\n        plugins: {\r\n            \"@\": { /* core plugin */  }\r\n        },\r\n        languageOptions: {\r\n            parser: require(\"espree\")\r\n        }\r\n    }\r\n];\r\n```\r\n\r\nI think that this change won't affect many users, if at all, considering the majority of ESLint users aren't using the default parser and the most popular parsers (typescript-eslint and Babel) are still distributed as individual objects rather than plugins. For people using Espree, this change will be completely transparent.\r\n\r\n## Complexities of supporting resolution\r\n\r\nThe other option, which I don't think is a good idea, is to allow languages to specify keys to be resolved from plugins. So for the `@eslint/js` package, we'd need a way to say \"the `parser` key should be resolved to the plugin `parsers` key with the given name. While we could do that, that would also open the door for any language plugin to specify its own key inside of an ESLint plugin, and then we'd be at risk of naming collisions, essentially creating a global scope into which any plugin can reach.\r\n\r\nBecause `parser` is the only key inside of `languageOptions` that does this plugin resolution, it makes more sense to me to eliminate this as a special case.\n\n### Participation\n\n- [X] I am willing to submit a pull request for this change.\n\n### Additional comments\n\n_No response_","closed_by":{"login":"snitin315","id":46647141,"node_id":"MDQ6VXNlcjQ2NjQ3MTQx","avatar_url":"https://avatars.githubusercontent.com/u/46647141?v=4","gravatar_id":"","url":"https://api.github.com/users/snitin315","html_url":"https://github.com/snitin315","followers_url":"https://api.github.com/users/snitin315/followers","following_url":"https://api.github.com/users/snitin315/following{/other_user}","gists_url":"https://api.github.com/users/snitin315/gists{/gist_id}","starred_url":"https://api.github.com/users/snitin315/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snitin315/subscriptions","organizations_url":"https://api.github.com/users/snitin315/orgs","repos_url":"https://api.github.com/users/snitin315/repos","events_url":"https://api.github.com/users/snitin315/events{/privacy}","received_events_url":"https://api.github.com/users/snitin315/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/16930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/16930/timeline","performed_via_github_app":null,"state_reason":"completed"}