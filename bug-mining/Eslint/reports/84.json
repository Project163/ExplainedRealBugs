{"url":"https://api.github.com/repos/eslint/eslint/issues/10273","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/10273/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/10273/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/10273/events","html_url":"https://github.com/eslint/eslint/issues/10273","id":318094928,"node_id":"MDU6SXNzdWUzMTgwOTQ5Mjg=","number":10273,"title":"comma-style fix breaks sparse arrays with nested parens","user":{"login":"rincedd","id":321265,"node_id":"MDQ6VXNlcjMyMTI2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/321265?v=4","gravatar_id":"","url":"https://api.github.com/users/rincedd","html_url":"https://github.com/rincedd","followers_url":"https://api.github.com/users/rincedd/followers","following_url":"https://api.github.com/users/rincedd/following{/other_user}","gists_url":"https://api.github.com/users/rincedd/gists{/gist_id}","starred_url":"https://api.github.com/users/rincedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rincedd/subscriptions","organizations_url":"https://api.github.com/users/rincedd/orgs","repos_url":"https://api.github.com/users/rincedd/repos","events_url":"https://api.github.com/users/rincedd/events{/privacy}","received_events_url":"https://api.github.com/users/rincedd/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711350,"node_id":"MDU6TGFiZWw0NTcxMTM1MA==","url":"https://api.github.com/repos/eslint/eslint/labels/bug","name":"bug","color":"fc2929","default":true,"description":"ESLint is working incorrectly"},{"id":45798639,"node_id":"MDU6TGFiZWw0NTc5ODYzOQ==","url":"https://api.github.com/repos/eslint/eslint/labels/rule","name":"rule","color":"fbca04","default":false,"description":"Relates to ESLint's core rules"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-26T15:58:06Z","updated_at":"2018-11-08T17:41:33Z","closed_at":"2018-05-11T23:16:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Tell us about your environment**\r\n\r\n* **ESLint Version:** 4.19.1\r\n* **Node Version:** 9.11.1\r\n* **npm Version:** 5.8.0\r\n\r\n**What parser (default, Babel-ESLint, etc.) are you using?** default\r\n\r\n**Please show your full configuration:**\r\n\r\n<details>\r\n<summary>Configuration</summary>\r\n\r\n<!-- Paste your configuration below: -->\r\n```yaml\r\nenv:\r\n  es6: true\r\nrules:\r\n  comma-style:\r\n    - error\r\n    - last\r\n\r\n```\r\n</details>\r\n\r\n**What did you do? Please include the actual source code causing the issue, as well as the command that you used to run ESLint.**\r\n\r\n<!-- Paste the source code below: -->\r\n```js\r\nclass Thing {}\r\nfunction f() {}\r\n\r\nconst testArray = [\r\n  [1],\r\n  ,\r\n  [new Thing(2)],\r\n  [new Thing(3)],\r\n  ,\r\n  [new Thing(4)],\r\n  [new Thing(5)],\r\n  [f(6)],\r\n  ,\r\n  [{an: 'object'}],\r\n  ,\r\n  [[7, 8]],\r\n  ,\r\n  [9]\r\n];\r\n\r\n```\r\n\r\n<!-- Paste the command you used to run ESLint: -->\r\n```bash\r\neslint --fix .\r\n```\r\n\r\n**What did you expect to happen?**\r\nComma-style rule should fix the wrong linebreaks before and after the single commas by putting them at the end of the preceding line.\r\n\r\n**What actually happened? Please include the actual, raw output from ESLint.**\r\nThe comma-style fix places the comma inside of the preceding array literal if this array contains something that ends with a parenthesis \")\". This means that the sparse array is no longer sparse at this index, because there are no longer two consecutive commas at that point.\r\n\r\nPlease note that this does not happen if the preceding array does not end with something that ends in a closing parenthesis. In these cases, the comma is placed at the end of the line correctly, so that there are two consecutive commas at the end of the line after the fix.\r\n\r\n```js\r\nclass Thing {}\r\nfunction f() {}\r\n\r\nconst testArray = [\r\n  [1],,  \r\n  [new Thing(2)],\r\n  [new Thing(3),],  \r\n  [new Thing(4)],\r\n  [new Thing(5)],\r\n  [f(6),],  \r\n  [{an: 'object'}],,  \r\n  [[7, 8]],,  \r\n  [9]\r\n];\r\n\r\n```","closed_by":{"login":"not-an-aardvark","id":11638619,"node_id":"MDQ6VXNlcjExNjM4NjE5","avatar_url":"https://avatars.githubusercontent.com/u/11638619?v=4","gravatar_id":"","url":"https://api.github.com/users/not-an-aardvark","html_url":"https://github.com/not-an-aardvark","followers_url":"https://api.github.com/users/not-an-aardvark/followers","following_url":"https://api.github.com/users/not-an-aardvark/following{/other_user}","gists_url":"https://api.github.com/users/not-an-aardvark/gists{/gist_id}","starred_url":"https://api.github.com/users/not-an-aardvark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/not-an-aardvark/subscriptions","organizations_url":"https://api.github.com/users/not-an-aardvark/orgs","repos_url":"https://api.github.com/users/not-an-aardvark/repos","events_url":"https://api.github.com/users/not-an-aardvark/events{/privacy}","received_events_url":"https://api.github.com/users/not-an-aardvark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/10273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/10273/timeline","performed_via_github_app":null,"state_reason":"completed"}