{"url":"https://api.github.com/repos/eslint/eslint/issues/18885","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/18885/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/18885/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/18885/events","html_url":"https://github.com/eslint/eslint/issues/18885","id":2519871218,"node_id":"I_kwDOAKjKDc6WMi7y","number":18885,"title":"Rule Change: support computing modified cyclomatic complexity","user":{"login":"dpashk-figma","id":152926491,"node_id":"U_kgDOCR15Gw","avatar_url":"https://avatars.githubusercontent.com/u/152926491?v=4","gravatar_id":"","url":"https://api.github.com/users/dpashk-figma","html_url":"https://github.com/dpashk-figma","followers_url":"https://api.github.com/users/dpashk-figma/followers","following_url":"https://api.github.com/users/dpashk-figma/following{/other_user}","gists_url":"https://api.github.com/users/dpashk-figma/gists{/gist_id}","starred_url":"https://api.github.com/users/dpashk-figma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dpashk-figma/subscriptions","organizations_url":"https://api.github.com/users/dpashk-figma/orgs","repos_url":"https://api.github.com/users/dpashk-figma/repos","events_url":"https://api.github.com/users/dpashk-figma/events{/privacy}","received_events_url":"https://api.github.com/users/dpashk-figma/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711352,"node_id":"MDU6TGFiZWw0NTcxMTM1Mg==","url":"https://api.github.com/repos/eslint/eslint/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"This change enhances an existing feature of ESLint"},{"id":45798639,"node_id":"MDU6TGFiZWw0NTc5ODYzOQ==","url":"https://api.github.com/repos/eslint/eslint/labels/rule","name":"rule","color":"fbca04","default":false,"description":"Relates to ESLint's core rules"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2024-09-11T14:11:56Z","updated_at":"2024-09-25T14:18:17Z","closed_at":"2024-09-25T14:18:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### What rule do you want to change?\n\ncomplexity\n\n### What change do you want to make?\n\nGenerate fewer warnings\n\n### How do you think the change should be implemented?\n\nA new option\n\n### Example code\n\n```js\nfunction a(x) {\n    switch (x) {\n        case 1:\n            1;\n            break;\n        case 2:\n            2;\n            break;\n        case 3:\n            3;\n            break;\n        default:\n            4;\n    }\n}\n```\n\n### What does the rule currently do for this code?\n\nThe cyclomatic complexity of the above block is **3**.\n\n### What will the rule do after it's changed?\n\nThe **modified** cyclomatic** complexity of the above block is **1**.\n\n### Participation\n\n- [x] I am willing to submit a pull request to implement this change.\n\n### Additional comments\n\nModified cyclomatic complexity is almost exactly the same as the classic [cyclomatic complexity](https://en.wikipedia.org/wiki/Cyclomatic_complexity), except that a switch statement only increases the value by 1 regardless of how many case statements it contains. The classic cyclomatic complexity, on the other hand, increases the complexity number for each case statement it finds (treating them effectively like separate if statements).\n\nA number of other code analysis tools implement this metric:\n* https://github.com/terryyin/lizard?tab=readme-ov-file#options\n* [Understand](https://support.scitools.com/support/solutions/articles/70000582297-understanding-mccabe-cyclomatic-complexity)\n* [Matlab's checkcode](https://www.mathworks.com/help/matlab/matlab_prog/measure-code-complexity-using-cyclomatic-complexity.html)\n* [CodeSonar](https://codesecure.com/learn/code-complexity/)\n\nThe change is very straightforward to implement, just a few lines:\n\n```diff\n       WhileStatement: increaseComplexity,\n       DoWhileStatement: increaseComplexity,\n       AssignmentPattern: increaseComplexity,\n-\n-      // Avoid `default`\n-      'SwitchCase[test]': increaseComplexity,\n+      SwitchStatement: increaseComplexity,\n\n       // Logical assignment operators have short-circuiting behavior\n```\n\nPlus some extra option handling code (as we would of course want to put this behind a new option). I'm happy to make a PR if you'll accept it.","closed_by":{"login":"nzakas","id":38546,"node_id":"MDQ6VXNlcjM4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/38546?v=4","gravatar_id":"","url":"https://api.github.com/users/nzakas","html_url":"https://github.com/nzakas","followers_url":"https://api.github.com/users/nzakas/followers","following_url":"https://api.github.com/users/nzakas/following{/other_user}","gists_url":"https://api.github.com/users/nzakas/gists{/gist_id}","starred_url":"https://api.github.com/users/nzakas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzakas/subscriptions","organizations_url":"https://api.github.com/users/nzakas/orgs","repos_url":"https://api.github.com/users/nzakas/repos","events_url":"https://api.github.com/users/nzakas/events{/privacy}","received_events_url":"https://api.github.com/users/nzakas/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/18885/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/18885/timeline","performed_via_github_app":null,"state_reason":"completed"}