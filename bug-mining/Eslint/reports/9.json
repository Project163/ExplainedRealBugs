{"url":"https://api.github.com/repos/eslint/eslint/issues/9231","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/9231/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/9231/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/9231/events","html_url":"https://github.com/eslint/eslint/issues/9231","id":255153290,"node_id":"MDU6SXNzdWUyNTUxNTMyOTA=","number":9231,"title":"no-undef-init incorrectly autofixes some `var` declarations","user":{"login":"ljqx","id":5836327,"node_id":"MDQ6VXNlcjU4MzYzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/5836327?v=4","gravatar_id":"","url":"https://api.github.com/users/ljqx","html_url":"https://github.com/ljqx","followers_url":"https://api.github.com/users/ljqx/followers","following_url":"https://api.github.com/users/ljqx/following{/other_user}","gists_url":"https://api.github.com/users/ljqx/gists{/gist_id}","starred_url":"https://api.github.com/users/ljqx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ljqx/subscriptions","organizations_url":"https://api.github.com/users/ljqx/orgs","repos_url":"https://api.github.com/users/ljqx/repos","events_url":"https://api.github.com/users/ljqx/events{/privacy}","received_events_url":"https://api.github.com/users/ljqx/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711350,"node_id":"MDU6TGFiZWw0NTcxMTM1MA==","url":"https://api.github.com/repos/eslint/eslint/labels/bug","name":"bug","color":"fc2929","default":true,"description":"ESLint is working incorrectly"},{"id":45798639,"node_id":"MDU6TGFiZWw0NTc5ODYzOQ==","url":"https://api.github.com/repos/eslint/eslint/labels/rule","name":"rule","color":"fbca04","default":false,"description":"Relates to ESLint's core rules"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-09-05T03:50:50Z","updated_at":"2018-03-15T06:10:42Z","closed_at":"2017-09-15T00:55:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n    ESLint adheres to the [JS Foundation Code of Conduct](https://js.foundation/community/code-of-conduct).\r\n\r\n    This template is for bug reports. If you are reporting a bug, please continue on. If you are here for another reason, please see below:\r\n\r\n    1. To propose a new rule: http://eslint.org/docs/developer-guide/contributing/new-rules\r\n    2. To request a change: http://eslint.org/docs/developer-guide/contributing/changes\r\n    3. If you have any questions, please stop by our chatroom: https://gitter.im/eslint/eslint\r\n\r\n    Note that leaving sections blank will make it difficult for us to troubleshoot and we may have to close the issue.\r\n-->\r\n\r\n**Tell us about your environment**\r\n\r\n* **ESLint Version:** 4.6.1\r\n* **Node Version:** 6.9.1\r\n* **npm Version:** 3.9.3\r\n\r\n**What parser (default, Babel-ESLint, etc.) are you using?**\r\ndefault\r\n\r\n**Please show your full configuration:**\r\n\r\n<details>\r\n<summary>Configuration</summary>\r\n\r\n<!-- Paste your configuration below: -->\r\n```js\r\n{\r\n  \"env\": {\r\n    \"browser\": true,\r\n    \"node\": true,\r\n    \"amd\": true,\r\n    \"mocha\": true\r\n  },\r\n\r\n  \"rules\": {\r\n    //Possible Errors\r\n    //The following rules point out areas where you might have made mistakes.\r\n\r\n    \"comma-dangle\": [2, \"always-multiline\"], //disallow or enforce trailing commas (recommended)\r\n    \"no-cond-assign\": [2], //disallow assignment in conditional expressions (recommended)\r\n    \"no-console\": [2], //disallow use of console in the node environment (recommended)\r\n    \"no-constant-condition\": [2], //disallow use of constant expressions in conditions (recommended)\r\n    \"no-control-regex\": [2], //disallow control characters in regular expressions (recommended)\r\n    \"no-debugger\": [2], //disallow use of debugger (recommended)\r\n    \"no-dupe-args\": [2], //disallow duplicate arguments in functions (recommended)\r\n    \"no-dupe-keys\": [2], //disallow duplicate keys when creating object literals (recommended)\r\n    \"no-duplicate-case\": [2], //disallow a duplicate case label. (recommended)\r\n    \"no-empty-character-class\": [2], //disallow the use of empty character classes in regular expressions (recommended)\r\n    \"no-empty\": [2], //disallow empty statements (recommended)\r\n    \"no-ex-assign\": [2], //disallow assigning to the exception in a catch block (recommended)\r\n    \"no-extra-boolean-cast\": [2], //disallow double-negation boolean casts in a boolean context (recommended)\r\n    \"no-extra-parens\": [2, \"all\", { \"nestedBinaryExpressions\": false }], //disallow unnecessary parentheses\r\n    \"no-extra-semi\": [2], //disallow unnecessary semicolons (recommended)\r\n    \"no-func-assign\": [2], //disallow overwriting functions written as function declarations (recommended)\r\n    \"no-inner-declarations\": [2, \"functions\"], //disallow function or variable declarations in nested blocks (recommended)\r\n    \"no-invalid-regexp\": [2], //disallow invalid regular expression strings in the RegExp constructor (recommended)\r\n    \"no-irregular-whitespace\": [2], //disallow irregular whitespace outside of strings and comments (recommended)\r\n    \"no-negated-in-lhs\": [2], //disallow negation of the left operand of an in expression (recommended)\r\n    \"no-obj-calls\": [2], //disallow the use of object properties of the global object (Math and JSON) as functions (recommended)\r\n    \"no-prototype-builtins\": [0], //Disallow use of Object.prototypes builtins directly\r\n    \"no-regex-spaces\": [2], //disallow multiple spaces in a regular expression literal (recommended)\r\n    \"no-sparse-arrays\": [2], //disallow sparse arrays (recommended)\r\n    \"no-unexpected-multiline\": [2], //Avoid code that looks like two expressions but is actually one\r\n    \"no-unreachable\": [2], //disallow unreachable statements after a return, throw, continue, or break statement (recommended)\r\n    \"no-unsafe-finally\": [2], //disallow control flow statements in finally blocks\r\n    \"use-isnan\": [2], //disallow comparisons with the value NaN (recommended)\r\n    \"valid-jsdoc\": [2], //Ensure JSDoc comments are valid\r\n    \"valid-typeof\": [2], //Ensure that the results of typeof are compared against a valid string (recommended)\r\n\r\n    //Best Practices\r\n    //These are rules designed to prevent you from making mistakes. They either prescribe a better way of doing something or help you avoid footguns.\r\n\r\n    \"accessor-pairs\": [0], //Enforces getter/setter pairs in objects\r\n    \"array-callback-return\": [0], //Enforces return statements in callbacks of array's methods\r\n    \"block-scoped-var\": [2], //treat var statements as if they were block scoped\r\n    \"complexity\": [0], //specify the maximum cyclomatic complexity allowed in a program\r\n    \"consistent-return\": [2], //require return statements to either always or never specify values\r\n    \"curly\": [2], //specify curly brace conventions for all control statements\r\n    \"default-case\": [2], //require default case in switch statements\r\n    \"dot-notation\": [2], //encourages use of dot notation whenever possible\r\n    \"dot-location\": [2, \"property\"], //enforces consistent newlines before or after dots\r\n    \"eqeqeq\": [2, \"smart\"], //require the use of === and !== (fixable)\r\n    \"guard-for-in\": [0], //make sure for-in loops have an if statement\r\n    \"no-alert\": [2], //disallow the use of alert, confirm, and prompt\r\n    \"no-caller\": [2], //disallow use of arguments.caller or arguments.callee\r\n    \"no-case-declarations\": [2], //disallow lexical declarations in case clauses\r\n    \"no-div-regex\": [2], //disallow division operators explicitly at beginning of regular expression\r\n    \"no-else-return\": [0], //disallow else after a return in an if\r\n    \"no-empty-function\": [2], //disallow use of empty functions\r\n    \"no-empty-pattern\": [2], //disallow use of empty destructuring patterns\r\n    \"no-eq-null\": [0], //disallow comparisons to null without a type-checking operator\r\n    \"no-eval\": [2], //disallow use of eval()\r\n    \"no-extend-native\": [2], //disallow adding to native types\r\n    \"no-extra-bind\": [2], //disallow unnecessary function binding\r\n    \"no-extra-label\": [2], //disallow unnecessary labels\r\n    \"no-fallthrough\": [2], //disallow fallthrough of case statements (recommended)\r\n    \"no-floating-decimal\": [2], //disallow the use of leading or trailing decimal points in numeric literals\r\n    \"no-implicit-coercion\": [0], //disallow the type conversions with shorter notations\r\n    \"no-implicit-globals\": [2], //disallow var and named functions in global scope\r\n    \"no-implied-eval\": [2], //disallow use of eval()-like methods\r\n    \"no-invalid-this\": [2], //disallow this keywords outside of classes or class-like objects\r\n    \"no-iterator\": [2], //disallow usage of __iterator__ property\r\n    \"no-labels\": [2], //disallow use of labeled statements\r\n    \"no-lone-blocks\": [2], //disallow unnecessary nested blocks\r\n    \"no-loop-func\": [2], //disallow creation of functions within loops\r\n    \"no-magic-numbers\": [0], //disallow the use of magic numbers\r\n    \"no-multi-spaces\": [0], //disallow use of multiple spaces\r\n    \"no-multi-str\": [2], //disallow use of multiline strings\r\n    \"no-native-reassign\": [0], //disallow reassignments of native objects\r\n    \"no-new\": [0], //disallow use of the new operator when not part of an assignment or comparison\r\n    \"no-new-func\": [2], //disallow use of new operator for Function object\r\n    \"no-new-wrappers\": [2], //disallows creating new instances of String,Number, and Boolean\r\n    \"no-octal\": [2], //disallow use of octal literals (recommended)\r\n    \"no-octal-escape\": [2], //disallow use of octal escape sequences in string literals, such as var foo = \"Copyright \\251\";\r\n    \"no-param-reassign\": [2], //disallow reassignment of function parameters\r\n    \"no-proto\": [2], //disallow usage of __proto__ property\r\n    \"no-redeclare\": [2], //disallow declaring the same variable more than once (recommended)\r\n    \"no-return-assign\": [2], //disallow use of assignment in return statement\r\n    \"no-script-url\": [2], //disallow use of javascript urls.\r\n    \"no-self-assign\": [2], //disallow assignments where both sides are exactly the same\r\n    \"no-self-compare\": [1], //disallow comparisons where both sides are exactly the same\r\n    \"no-sequences\": [2], //disallow use of the comma operator\r\n    \"no-throw-literal\": [2], //restrict what can be thrown as an exception\r\n    \"no-unmodified-loop-condition\": [2], //disallow unmodified conditions of loops\r\n    \"no-unused-expressions\": [2], //disallow usage of expressions in statement position\r\n    \"no-unused-labels\": [2], //disallow unused labels\r\n    \"no-useless-call\": [2], //disallow unnecessary .call() and .apply()\r\n    \"no-useless-concat\": [2], //disallow unnecessary concatenation of literals or template literals\r\n    \"no-useless-escape\": [2], //disallow unnecessary escape characters\r\n    \"no-void\": [0], //disallow use of the void operator\r\n    \"no-warning-comments\": [0], //disallow usage of configurable warning terms in comments //e.g. TODO or FIXME\r\n    \"no-with\": [0], //disallow use of the with statement\r\n    \"radix\": [0], //require use of the second argument for parseInt()\r\n    \"vars-on-top\": [0], //require declaration of all vars at the top of their containing scope\r\n    \"wrap-iife\": [2, \"inside\"], //require immediate function invocation to be wrapped in parentheses\r\n    \"yoda\": [2], //require or disallow Yoda conditions\r\n\r\n    //Strict Mode\r\n    //These rules relate to using strict mode.\r\n\r\n    \"strict\": [0], //controls location of Use Strict Directives\r\n\r\n    //Variables\r\n    //These rules have to do with variable declarations.\r\n\r\n    \"init-declarations\": [0], //enforce or disallow variable initializations at definition\r\n    \"no-catch-shadow\": [2], //disallow the catch clause parameter name being the same as a variable in the outer scope\r\n    \"no-delete-var\": [2], //disallow deletion of variables (recommended)\r\n    \"no-label-var\": [2], //disallow labels that share a name with a variable\r\n    \"no-restricted-globals\": [0], //disallow specified global variables\r\n    \"no-shadow\": [2], //disallow declaration of variables already declared in the outer scope\r\n    \"no-shadow-restricted-names\": [2], //disallow shadowing of names such as arguments\r\n    \"no-undef\": [2], //disallow use of undeclared variables unless mentioned in a /*global */ block (recommended)\r\n    \"no-undef-init\": [2], //disallow use of undefined when initializing variables\r\n    \"no-undefined\": [0], //disallow use of undefined variable\r\n    \"no-unused-vars\": [2], //disallow declaration of variables that are not used in the code (recommended)\r\n    \"no-use-before-define\": [2], //disallow use of variables before they are defined\r\n\r\n    //Node.js and CommonJS\r\n    //These rules are specific to JavaScript running on Node.js or using CommonJS in the browser.\r\n\r\n    \"callback-return\": [1], //enforce return after a callback\r\n    \"global-require\": [1], //disallow require() outside of the top-level module scope\r\n    \"handle-callback-err\": [1], //enforce error handling in callbacks\r\n    \"no-mixed-requires\": [1], //disallow mixing regular variable and require declarations\r\n    \"no-new-require\": [1], //disallow use of new operator with the require function\r\n    \"no-path-concat\": [1], //disallow string concatenation with __dirname and __filename\r\n    \"no-process-env\": [2], //disallow use of process.env\r\n    \"no-process-exit\": [1], //disallow process.exit()\r\n    \"no-restricted-modules\": [1], //restrict usage of specified node modules\r\n    \"no-sync\": [1], //disallow use of synchronous methods\r\n\r\n    //Stylistic Issues\r\n    //These rules are purely matters of style and are quite subjective.\r\n\r\n    \"array-bracket-spacing\": [2, \"never\"], //enforce spacing inside array brackets\r\n    \"block-spacing\": [2, \"always\"], //disallow or enforce spaces inside of single line blocks\r\n    \"brace-style\": [2], //enforce one true brace style\r\n    \"camelcase\": [2], //require camel case names\r\n    \"comma-spacing\": [2], //enforce spacing before and after comma\r\n    \"comma-style\": [2], //enforce one true comma style\r\n    \"computed-property-spacing\": [2], //require or disallow padding inside computed properties\r\n    \"consistent-this\": [2, \"self\"], //enforce consistent naming when capturing the current execution context\r\n    \"eol-last\": [2], //enforce newline at the end of file, with no multiple empty lines\r\n    \"func-names\": [0], //require function expressions to have a name\r\n    \"func-style\": [0], //enforce use of function declarations or expressions\r\n    \"id-blacklist\": [2], //blacklist certain identifiers to prevent them being used\r\n    \"id-length\": [0], //this option enforces minimum and maximum identifier lengths (variable names, property names etc.)\r\n    \"id-match\": [0], //require identifiers to match the provided regular expression\r\n    \"indent\": [2, 2], //specify tab or space width for your code\r\n    \"jsx-quotes\": [2, \"prefer-double\"], //specify whether double or single quotes should be used in JSX attributes\r\n    \"key-spacing\": [2], //enforce spacing between keys and values in object literal properties\r\n    \"keyword-spacing\": [2], //enforce spacing before and after keywords\r\n    \"linebreak-style\": [0], //disallow mixed 'LF' and 'CRLF' as linebreaks\r\n    \"lines-around-comment\": [0], //enforce empty lines around comments\r\n    \"max-depth\": [0], //enforce a maximum depth that blocks can be nested\r\n    \"max-len\": [0], //enforce a maximum line length\r\n    \"max-lines\": [0], //enforce a maximum depth that callbacks can be nested\r\n    \"max-nested-callbacks\": [0], //enforce a maximum depth that callbacks can be nested\r\n    \"max-params\": [0], //enforce a maximum number of parameters in function definitions\r\n    \"max-statements\": [0], //enforce a maximum number of statements allowed in function blocks\r\n    \"max-statements-per-line\": [0, {\r\n      \"max\": 2\r\n    }], //enforce a maximum number of statements allowed per line\r\n    \"new-cap\": [2], //require a capital letter for constructors\r\n    \"new-parens\": [2], //disallow the omission of parentheses when invoking a constructor with no arguments\r\n    \"newline-after-var\": [2], //require or disallow an empty newline after variable declarations\r\n    \"newline-before-return\": [0], //require an empty line before return statements\r\n    \"newline-per-chained-call\": [0], //enforce newline after each call when chaining the calls\r\n    \"no-array-constructor\": [2], //disallow use of the Array constructor\r\n    \"no-bitwise\": [2], //disallow bitwise operators\r\n    \"no-continue\": [2], //disallow use of the continue statement\r\n    \"no-inline-comments\": [0], //disallow comments inline after code\r\n    \"no-lonely-if\": [2], //disallow if as the only statement in an else block\r\n    \"no-mixed-operators\": [2], //disallow mixes of different operators\r\n    \"no-mixed-spaces-and-tabs\": [2], //disallow mixed spaces and tabs for indentation (recommended)\r\n    \"no-multiple-empty-lines\": [2], //disallow multiple empty lines\r\n    \"no-nested-ternary\": [2], //disallow nested ternary expressions\r\n    \"no-negated-condition\": [2], //disallow negated conditions\r\n    \"no-new-object\": [2], //disallow the use of the Object constructor\r\n    \"no-plusplus\": [0], //disallow the unary operators ++ and --\r\n    \"no-restricted-syntax\": [2], //disallow use of certain syntax in code\r\n    \"no-spaced-func\": [2], //disallow space between function identifier and application\r\n    \"no-ternary\": [0], //disallow the use of ternary operators\r\n    \"no-trailing-spaces\": [2], //disallow trailing whitespace at the end of lines\r\n    \"no-underscore-dangle\": [0], //disallow dangling underscores in identifiers\r\n    \"no-unneeded-ternary\": [2], //disallow the use of ternary operators when a simpler alternative exists\r\n    \"no-whitespace-before-property\": [2], //disallow whitespace before properties\r\n    \"object-curly-newline\": [0], //require or disallow line breaks inside braces\r\n    \"object-curly-spacing\": [0], //require or disallow padding inside curly braces\r\n    \"object-property-newline\": [2, {\r\n      \"allowMultiplePropertiesPerLine\": true\r\n    }], //enforce placing object properties on separate lines\r\n    \"one-var\": [0], //require or disallow one variable declaration per function\r\n    \"one-var-declaration-per-line\": [2, \"always\"], //require or disallow an newline around variable declarations\r\n    \"operator-assignment\": [0], //require assignment operator shorthand where possible or prohibit it entirely\r\n    \"operator-linebreak\": [2, \"after\"], //enforce operators to be placed before or after line breaks\r\n    \"padded-blocks\": [0], //enforce padding within blocks\r\n    \"quote-props\": [0], //require quotes around object literal property names\r\n    \"quotes\": [2, \"single\"], //specify whether backticks, double or single quotes should be used (fixable)\r\n    \"require-jsdoc\": [0], //Require JSDoc comment\r\n    \"semi-spacing\": [2], //enforce spacing before and after semicolons\r\n    \"sort-imports\": [0], //sort import declarations within module\r\n    \"semi\": [2, \"always\"], //require or disallow use of semicolons instead of ASI (fixable)\r\n    \"sort-vars\": [0], //sort variables within the same declaration block\r\n    \"space-before-blocks\": [2], //require or disallow a space before blocks\r\n    \"space-before-function-paren\": [0], //require or disallow a space before function opening parenthesis\r\n    \"space-in-parens\": [0], //require or disallow spaces inside parentheses\r\n    \"space-infix-ops\": [2], //require spaces around operators\r\n    \"space-unary-ops\": [2], //require or disallow spaces before/after unary operators\r\n    \"spaced-comment\": [0], //require or disallow a space immediately following the // or /* in a comment\r\n    \"wrap-regex\": [2], //require regex literals to be wrapped in parentheses\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n```\r\n\r\n</details>\r\n\r\n**What did you do? Please include the actual source code causing the issue.**\r\nAuto fix `no-undef-init` which changes behavior of code\r\n\r\n<!-- Paste the source code below: -->\r\n```js\r\nfunction fun() {\r\n  for (var p in [0, 1, 2]) {\r\n    var selected = undefined; // auto fix will remove `= undefined`\r\n\r\n    for (var i in [0, 1, 2]) {\r\n      if (!selected) {\r\n        console.log('selected');\r\n      }\r\n      selected = i;\r\n    }\r\n  }\r\n}\r\n\r\nfun();\r\n\r\n```\r\n\r\n**What did you expect to happen?**\r\nAuto fix should not fix this part as it changes behavior of code.\r\n\r\n**What actually happened? Please include the actual, raw output from ESLint.**\r\nBefore fix, the code logs 3 times `'selected'`; after fix, the code only logs 1 time.\r\n","closed_by":{"login":"not-an-aardvark","id":11638619,"node_id":"MDQ6VXNlcjExNjM4NjE5","avatar_url":"https://avatars.githubusercontent.com/u/11638619?v=4","gravatar_id":"","url":"https://api.github.com/users/not-an-aardvark","html_url":"https://github.com/not-an-aardvark","followers_url":"https://api.github.com/users/not-an-aardvark/followers","following_url":"https://api.github.com/users/not-an-aardvark/following{/other_user}","gists_url":"https://api.github.com/users/not-an-aardvark/gists{/gist_id}","starred_url":"https://api.github.com/users/not-an-aardvark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/not-an-aardvark/subscriptions","organizations_url":"https://api.github.com/users/not-an-aardvark/orgs","repos_url":"https://api.github.com/users/not-an-aardvark/repos","events_url":"https://api.github.com/users/not-an-aardvark/events{/privacy}","received_events_url":"https://api.github.com/users/not-an-aardvark/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/9231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/9231/timeline","performed_via_github_app":null,"state_reason":"completed"}