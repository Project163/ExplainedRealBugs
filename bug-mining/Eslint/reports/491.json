{"url":"https://api.github.com/repos/eslint/eslint/issues/13917","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/13917/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/13917/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/13917/events","html_url":"https://github.com/eslint/eslint/issues/13917","id":761229607,"node_id":"MDU6SXNzdWU3NjEyMjk2MDc=","number":13917,"title":"[RuleTester] Test case validation","user":{"login":"DMartens","id":966276,"node_id":"MDQ6VXNlcjk2NjI3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/966276?v=4","gravatar_id":"","url":"https://api.github.com/users/DMartens","html_url":"https://github.com/DMartens","followers_url":"https://api.github.com/users/DMartens/followers","following_url":"https://api.github.com/users/DMartens/following{/other_user}","gists_url":"https://api.github.com/users/DMartens/gists{/gist_id}","starred_url":"https://api.github.com/users/DMartens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DMartens/subscriptions","organizations_url":"https://api.github.com/users/DMartens/orgs","repos_url":"https://api.github.com/users/DMartens/repos","events_url":"https://api.github.com/users/DMartens/events{/privacy}","received_events_url":"https://api.github.com/users/DMartens/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":45711350,"node_id":"MDU6TGFiZWw0NTcxMTM1MA==","url":"https://api.github.com/repos/eslint/eslint/labels/bug","name":"bug","color":"fc2929","default":true,"description":"ESLint is working incorrectly"},{"id":82922548,"node_id":"MDU6TGFiZWw4MjkyMjU0OA==","url":"https://api.github.com/repos/eslint/eslint/labels/core","name":"core","color":"c7def8","default":false,"description":"Relates to ESLint's core APIs and features"},{"id":131106229,"node_id":"MDU6TGFiZWwxMzExMDYyMjk=","url":"https://api.github.com/repos/eslint/eslint/labels/accepted","name":"accepted","color":"0052cc","default":false,"description":"There is consensus among the team that this change meets the criteria for inclusion"},{"id":829215248,"node_id":"MDU6TGFiZWw4MjkyMTUyNDg=","url":"https://api.github.com/repos/eslint/eslint/labels/archived%20due%20to%20age","name":"archived due to age","color":"eeeeee","default":false,"description":"This issue has been archived; please open a new issue for any further discussion"}],"state":"closed","locked":true,"assignee":{"login":"bmish","id":698306,"node_id":"MDQ6VXNlcjY5ODMwNg==","avatar_url":"https://avatars.githubusercontent.com/u/698306?v=4","gravatar_id":"","url":"https://api.github.com/users/bmish","html_url":"https://github.com/bmish","followers_url":"https://api.github.com/users/bmish/followers","following_url":"https://api.github.com/users/bmish/following{/other_user}","gists_url":"https://api.github.com/users/bmish/gists{/gist_id}","starred_url":"https://api.github.com/users/bmish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmish/subscriptions","organizations_url":"https://api.github.com/users/bmish/orgs","repos_url":"https://api.github.com/users/bmish/repos","events_url":"https://api.github.com/users/bmish/events{/privacy}","received_events_url":"https://api.github.com/users/bmish/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"bmish","id":698306,"node_id":"MDQ6VXNlcjY5ODMwNg==","avatar_url":"https://avatars.githubusercontent.com/u/698306?v=4","gravatar_id":"","url":"https://api.github.com/users/bmish","html_url":"https://github.com/bmish","followers_url":"https://api.github.com/users/bmish/followers","following_url":"https://api.github.com/users/bmish/following{/other_user}","gists_url":"https://api.github.com/users/bmish/gists{/gist_id}","starred_url":"https://api.github.com/users/bmish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmish/subscriptions","organizations_url":"https://api.github.com/users/bmish/orgs","repos_url":"https://api.github.com/users/bmish/repos","events_url":"https://api.github.com/users/bmish/events{/privacy}","received_events_url":"https://api.github.com/users/bmish/received_events","type":"User","user_view_type":"public","site_admin":false},{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":6,"created_at":"2020-12-10T13:12:14Z","updated_at":"2022-06-13T00:57:54Z","closed_at":"2021-12-14T15:49:13Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**The version of ESLint you are using.**\r\nNode version: v15.3.0\r\nnpm version: v6.14.2\r\nLocal ESLint version: v7.15.0 (Currently used)\r\nGlobal ESLint version: Not found\r\n\r\n**The problem you want to solve.**\r\nThe rule tester throws a type error and does not run any test case if the test case property is not a string:\r\n```js\r\nimport { RuleTester } from 'eslint';\r\nconst ruleTester = new RuleTester();\r\nruleTester.run(\"rule-id\", rule, {\r\n\tvalid: [{\r\n\t\tcode: [\r\n\t\t\t'...',\r\n\t\t] // <-- missing .join('\\n')\r\n\t}],\r\n\tinvalid: [],\r\n});\r\n```\r\nwhich results in an ugly error:\r\n```\r\ntext.replace is not a function \r\n  at ​​​sanitize​​​ ​./node_modules/eslint/lib/rule-tester/rule-tester.js:207\r\n```\r\nRelevant code is [here](https://github.com/eslint/eslint/blob/06b58096975935ec016d96dd5f333f059c270f26/lib/rule-tester/rule-tester.js#L884).\r\nI categorized this as a change as there is only little test case validation but this issue may also be seen as a bug report.\r\n\r\n**Your take on the correct solution to problem.**\r\nThe rule tester only fails the impacted test case with an instruction on how to correct the error.\r\nThis may be expanded to other properties than the code property.\r\nCurrently the rule tester only checks the structure of the scenarios (eg. valid and invalid are present) and for test cases that options are an array and that parser is an absolute path.\r\n\r\n**Are you willing to submit a pull request to implement this change?**\r\nYes","closed_by":{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/13917/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/13917/timeline","performed_via_github_app":null,"state_reason":"completed"}