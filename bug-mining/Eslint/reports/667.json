{"url":"https://api.github.com/repos/eslint/eslint/issues/19169","repository_url":"https://api.github.com/repos/eslint/eslint","labels_url":"https://api.github.com/repos/eslint/eslint/issues/19169/labels{/name}","comments_url":"https://api.github.com/repos/eslint/eslint/issues/19169/comments","events_url":"https://api.github.com/repos/eslint/eslint/issues/19169/events","html_url":"https://github.com/eslint/eslint/issues/19169","id":2691336158,"node_id":"I_kwDOAKjKDc6gaofe","number":19169,"title":"Docs: Formalize recommendation against plugins calling to rules via use-at-your-own-risk","user":{"login":"JoshuaKGoldberg","id":3335181,"node_id":"MDQ6VXNlcjMzMzUxODE=","avatar_url":"https://avatars.githubusercontent.com/u/3335181?v=4","gravatar_id":"","url":"https://api.github.com/users/JoshuaKGoldberg","html_url":"https://github.com/JoshuaKGoldberg","followers_url":"https://api.github.com/users/JoshuaKGoldberg/followers","following_url":"https://api.github.com/users/JoshuaKGoldberg/following{/other_user}","gists_url":"https://api.github.com/users/JoshuaKGoldberg/gists{/gist_id}","starred_url":"https://api.github.com/users/JoshuaKGoldberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoshuaKGoldberg/subscriptions","organizations_url":"https://api.github.com/users/JoshuaKGoldberg/orgs","repos_url":"https://api.github.com/users/JoshuaKGoldberg/repos","events_url":"https://api.github.com/users/JoshuaKGoldberg/events{/privacy}","received_events_url":"https://api.github.com/users/JoshuaKGoldberg/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":64004798,"node_id":"MDU6TGFiZWw2NDAwNDc5OA==","url":"https://api.github.com/repos/eslint/eslint/labels/documentation","name":"documentation","color":"5319e7","default":true,"description":"Relates to ESLint's documentation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-11-25T16:21:28Z","updated_at":"2025-01-01T09:55:17Z","closed_at":"2025-01-01T09:55:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Docs page(s)\n\nI don't know where this should go. Maybe some kind of _\"recommendations for plugin integrators\"_ and/or _\"troubleshooting\"_ page within https://eslint.org/docs/latest/extend/plugins?\n\n### What documentation issue do you want to solve?\n\nAs seen in #19134 & https://github.com/typescript-eslint/typescript-eslint/issues/10338, some community plugins such as `@typescript-eslint/eslint-plugin` and `eslint-plugin-unicorn` rely on implementation details of ESLint core rules. [Paraphrased `builtinRules` usage from typescript-eslint](https://github.com/typescript-eslint/typescript-eslint/blob/3f02687d964c1e7888e5db62256d56cd72c4f281/packages/eslint-plugin/src/util/getESLintCoreRule.ts#L2):\n\n```ts\nimport { builtinRules } from 'eslint/use-at-your-own-risk';\n\nconst baseRule = builtinRules.get('no-unused-expressions')!;\n\nexport default createRule({\n  // ...\n  create(context, [options]) {\n    const rules = baseRule.create(context);\n\n    return {\n      ExpressionStatement(node) {\n        // ...\n        rules.ExpressionStatement(node);\n      },\n    };\n  },\n});\n```\n\nI'm told the ESLint team explicitly recommends not doing this practice. There's a reason why it's called _\"use-at-your-own-risk\"_: these rules are implementation details and should not be relied on.\n\n\n\n\n### What do you think is the correct solution?\n\nIt'd be lovely to have this noted in docs. Both for visibility and so the plugins can align on a set of preferred strategies. https://github.com/typescript-eslint/typescript-eslint/issues/6456 tracks finding a better way to do things in typescript-eslint.\n\n### Participation\n\n- [x] I am willing to submit a pull request for this change.\n\n### Additional comments\n\nWe should note that the recommendation isn't as simple as _\"just don't do it!\"_. Many [\"extension\" rules](https://typescript-eslint.io/rules/#extension-rules) such as [`@typescript-eslint/class-methods-use-this`](https://typescript-eslint.io/rules/class-methods-use-this) rely on working the same as ESLint core rules _except_ for specific cases. Plugins at the moment are stuck between a rock, a hard place, and a pit:\n\n* ESLint core won't take in all of the extension behaviors (many wouldn't make sense to propose upstream at all; some were proposed but not accepted)\n* Wrapping the base rule is an internal API per this recommendation and not supported\n* Copying the rule makes for a much more difficult implementation on the plugin's side\n\nThis issue is not to track resolving those difficulties and tradeoffs. I'm just noting it here because the docs page needs to capture the nuance. We in the plugins haven't had a formal recommendation on the _right_ strategy prior to https://github.com/typescript-eslint/typescript-eslint/issues/6456#issuecomment-2495526641 - just indications of what not to do.","closed_by":{"login":"mdjermanovic","id":44349756,"node_id":"MDQ6VXNlcjQ0MzQ5NzU2","avatar_url":"https://avatars.githubusercontent.com/u/44349756?v=4","gravatar_id":"","url":"https://api.github.com/users/mdjermanovic","html_url":"https://github.com/mdjermanovic","followers_url":"https://api.github.com/users/mdjermanovic/followers","following_url":"https://api.github.com/users/mdjermanovic/following{/other_user}","gists_url":"https://api.github.com/users/mdjermanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mdjermanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdjermanovic/subscriptions","organizations_url":"https://api.github.com/users/mdjermanovic/orgs","repos_url":"https://api.github.com/users/mdjermanovic/repos","events_url":"https://api.github.com/users/mdjermanovic/events{/privacy}","received_events_url":"https://api.github.com/users/mdjermanovic/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/eslint/eslint/issues/19169/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/eslint/eslint/issues/19169/timeline","performed_via_github_app":null,"state_reason":"completed"}