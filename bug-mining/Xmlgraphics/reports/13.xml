<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:30:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[XGC-98] UndeclaredThrowableException while loading images</title>
                <link>https://issues.apache.org/jira/browse/XGC-98</link>
                <project id="12314221" key="XGC">XMLGraphicsCommons</project>
                    <description>&lt;p&gt;UndeclaredThrowableException is thrown if an image cannot be loaded for some reason.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.reflect.UndeclaredThrowableException
        at com.sun.proxy.$Proxy313.readUnsignedInt(Unknown Source)
        at org.apache.xmlgraphics.image.loader.impl.PreloaderEPS.preloadImage(PreloaderEPS.java:65) [xmlgraphics-commons-1.5.jar:1.5]
        at org.apache.xmlgraphics.image.loader.ImageManager.preloadImage(ImageManager.java:175) [xmlgraphics-commons-1.5.jar:1.5]
        at org.apache.xmlgraphics.image.loader.cache.ImageCache.needImageInfo(ImageCache.java:128) [xmlgraphics-commons-1.5.jar:1.5]
        at org.apache.xmlgraphics.image.loader.ImageManager.getImageInfo(ImageManager.java:122) [xmlgraphics-commons-1.5.jar:1.5]
        at org.apache.fop.fo.flow.ExternalGraphic.bind(ExternalGraphic.java:81) [fop-1.1.jar:]
        at org.apache.fop.fo.FObj.processNode(FObj.java:124) [fop-1.1.jar:]
        at org.apache.fop.fo.FOTreeBuilder$MainFOHandler.startElement(FOTreeBuilder.java:280) [fop-1.1.jar:]
        at org.apache.fop.fo.FOTreeBuilder.startElement(FOTreeBuilder.java:175) [fop-1.1.jar:]
...
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.GeneratedMethodAccessor2609.invoke(Unknown Source) [:1.8.0_25]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_25]
        at java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_25]
        at org.apache.xmlgraphics.image.loader.impl.AbstractImageSessionContext$ObservingImageInputStreamInvocationHandler.invoke(AbstractImageSessionContext.java:219) [
xmlgraphics-commons-1.5.jar:1.5]
        ... 254 more
Caused by: java.io.EOFException
        at javax.imageio.stream.ImageInputStreamImpl.readInt(ImageInputStreamImpl.java:251) [rt.jar:1.8.0_25]
        at javax.imageio.stream.ImageInputStreamImpl.readUnsignedInt(ImageInputStreamImpl.java:266) [rt.jar:1.8.0_25]
        ... 258 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem being that InvocationHandlers in the classes AbstractImageSessionContext and ObservableStream do not handle InvocationTargetException properly, and the exception is propagated up to the proxied interface where InvocationTargetException is not specified.&lt;/p&gt;

&lt;p&gt;I am not sure if you accept pull requests on Github, anyway here it is &lt;a href=&quot;https://github.com/apache/xml-graphics-commons/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/xml-graphics-commons/pull/1&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842210">XGC-98</key>
            <summary>UndeclaredThrowableException while loading images</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ssteiner">Simon Steiner</assignee>
                                    <reporter username="pref">Vlad Arkhipov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jul 2015 05:50:10 +0000</created>
                <updated>Wed, 16 May 2018 10:01:40 +0000</updated>
                            <resolved>Wed, 16 May 2018 10:01:32 +0000</resolved>
                                    <version>1.5</version>
                    <version>2.0.1</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14611531" author="githubbot" created="Thu, 2 Jul 2015 06:04:12 +0000"  >&lt;p&gt;GitHub user arkhipov opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/xml-graphics-commons/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/xml-graphics-commons/pull/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/XGC-98&quot; title=&quot;UndeclaredThrowableException while loading images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;XGC-98&quot;&gt;&lt;del&gt;XGC-98&lt;/del&gt;&lt;/a&gt;: Add InvocationTargetException handling in InvocationHandlers&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/XGC-98&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/XGC-98&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/arkhipov/xml-graphics-commons&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/arkhipov/xml-graphics-commons&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/xml-graphics-commons/pull/1.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/xml-graphics-commons/pull/1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 748aecbfc5e71482e29d0ffb34a507bf7abe8128&lt;br/&gt;
Author: Vlad Arkhipov &amp;lt;vlad@arkhipov.ru&amp;gt;&lt;br/&gt;
Date:   2015-07-02T05:56:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/XGC-98&quot; title=&quot;UndeclaredThrowableException while loading images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;XGC-98&quot;&gt;&lt;del&gt;XGC-98&lt;/del&gt;&lt;/a&gt;: Add InvocationTargetException handling in InvocationHandlers&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14613876" author="adelmelle" created="Sat, 4 Jul 2015 14:55:04 +0000"  >&lt;p&gt;This will solve two related issues logged against FOP that I had on my TODO list. Already tried my initial idea, but that did not suffice, so still had to look further, but seems like you just saved me that trouble. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks for investigating and offering the patch!&lt;/p&gt;</comment>
                            <comment id="15082749" author="ssteiner1" created="Tue, 5 Jan 2016 10:01:36 +0000"  >&lt;p&gt;Added&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1723030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1723030&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15255300" author="githubbot" created="Sat, 23 Apr 2016 16:57:17 +0000"  >&lt;p&gt;Github user arkhipov closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/xml-graphics-commons/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/xml-graphics-commons/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16021485" author="mus.svz@gmail.com" created="Tue, 23 May 2017 17:05:10 +0000"  >&lt;p&gt;Maybe I&apos;m missing something here, but I just get this exact exception in version 2.2 where this is supposedly fixed, so I checked the source code.&lt;/p&gt;

&lt;p&gt;The fix was made here: &lt;a href=&quot;https://github.com/apache/xml-graphics-commons/commit/6142bc79cfb6bb7faa5b244f2ba1a11ed070e5fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/xml-graphics-commons/commit/6142bc79cfb6bb7faa5b244f2ba1a11ed070e5fe&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But this fixed was made on the the file in src/java/, while the whole directory was moved from src/java/ to src/main/java in this commit:&lt;/p&gt;</comment>
                            <comment id="16021490" author="mus.svz@gmail.com" created="Tue, 23 May 2017 17:08:21 +0000"  >&lt;p&gt;(hit enter too soon, sorry)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/xml-graphics-commons/commit/35311e33d160513eb7f70ce4e9d505d0c0b836d5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/xml-graphics-commons/commit/35311e33d160513eb7f70ce4e9d505d0c0b836d5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So according to the history, the fix was made on the file AFTER it was already moved somewhere else, and looking at the current version in the trunk, the fix is indeed not included:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/xml-graphics-commons/blob/trunk/src/main/java/org/apache/xmlgraphics/image/loader/impl/AbstractImageSessionContext.java#L121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/xml-graphics-commons/blob/trunk/src/main/java/org/apache/xmlgraphics/image/loader/impl/AbstractImageSessionContext.java#L121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Am I missing something here or did something go seriously wrong there and the fix is indeed not in the trunk?&lt;/p&gt;</comment>
                            <comment id="16022498" author="ssteiner1" created="Wed, 24 May 2017 08:16:29 +0000"  >&lt;p&gt;Added &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1796008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1796008&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12695420">FOP-2343</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12695420">FOP-2343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12780510" name="InvocationTargetException.patch" size="1591" author="ssteiner" created="Tue, 5 Jan 2016 09:52:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2grw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>