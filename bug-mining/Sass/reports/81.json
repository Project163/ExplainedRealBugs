{"url":"https://api.github.com/repos/sass/sass/issues/4080","repository_url":"https://api.github.com/repos/sass/sass","labels_url":"https://api.github.com/repos/sass/sass/issues/4080/labels{/name}","comments_url":"https://api.github.com/repos/sass/sass/issues/4080/comments","events_url":"https://api.github.com/repos/sass/sass/issues/4080/events","html_url":"https://github.com/sass/sass/issues/4080","id":3067463073,"node_id":"I_kwDOAA4wNc621cWh","number":4080,"title":"Node.js package importer with duplicate potential resolutions","user":{"login":"colinrotherham","id":415517,"node_id":"MDQ6VXNlcjQxNTUxNw==","avatar_url":"https://avatars.githubusercontent.com/u/415517?v=4","gravatar_id":"","url":"https://api.github.com/users/colinrotherham","html_url":"https://github.com/colinrotherham","followers_url":"https://api.github.com/users/colinrotherham/followers","following_url":"https://api.github.com/users/colinrotherham/following{/other_user}","gists_url":"https://api.github.com/users/colinrotherham/gists{/gist_id}","starred_url":"https://api.github.com/users/colinrotherham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colinrotherham/subscriptions","organizations_url":"https://api.github.com/users/colinrotherham/orgs","repos_url":"https://api.github.com/users/colinrotherham/repos","events_url":"https://api.github.com/users/colinrotherham/events{/privacy}","received_events_url":"https://api.github.com/users/colinrotherham/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":134810,"node_id":"MDU6TGFiZWwxMzQ4MTA=","url":"https://api.github.com/repos/sass/sass/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":915370270,"node_id":"MDU6TGFiZWw5MTUzNzAyNzA=","url":"https://api.github.com/repos/sass/sass/labels/JS%20API","name":"JS API","color":"04a03d","default":false,"description":"About the shared JS API"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-05-14T16:44:54Z","updated_at":"2025-05-16T08:23:47Z","closed_at":"2025-05-16T00:35:18Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm having a problem with the Node.js package importer\n\nFor context, [NHS.UK frontend](https://github.com/nhsuk/nhsuk-frontend) exposes multiple entry points for:\n\n1. Imports with file extensions\n2. Imports without file extension\n3. Imports via soon-to-move paths, e.g. `./packages/*`\n\nWe do this to allow webpack loaders, ESLint plugins and TypeScript to all work together seamlessly.\n\nIt works great in Node.js, but Sass throws an error when multiple potential resolutions exist—even when identical.\n\nShould these identical potential resolutions be de-duplicated first?\n\n```console\nError: Unable to determine which of multiple potential resolutions found for packages/core/settings/colours in nhsuk-frontend should be used.\n\nFound:\n/path/to/app/node_modules/nhsuk-frontend/packages/core/settings/_colours.scss\n/path/to/app/node_modules/nhsuk-frontend/packages/core/settings/_colours.scss\n  ╷\n1 │ @use 'pkg:nhsuk-frontend/packages/core/settings/colours' as *;\n  │ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  ╵\n  app/styles/design-example-overrides.scss 1:1  root stylesheet\n```\n\n### package.json\n\nFor reference see [**package.json** `exports`](https://github.com/nhsuk/nhsuk-frontend/blob/2cde482a52addd922829de763d659447e853963b/package.json#L11-L24) below:\n\n```json\n  \"exports\": {\n    \".\": {\n      \"sass\": \"./packages/index.scss\",\n      \"default\": \"./packages/index.js\"\n    },\n    \"./*\": \"./*\",\n    \"./packages/*\": {\n      \"sass\": \"./packages/*.scss\",\n      \"default\": \"./packages/*.js\"\n    },\n    \"./packages/*.js\": \"./packages/*.js\",\n    \"./packages/*.scss\": \"./packages/*.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n```","closed_by":{"login":"nex3","id":188,"node_id":"MDQ6VXNlcjE4OA==","avatar_url":"https://avatars.githubusercontent.com/u/188?v=4","gravatar_id":"","url":"https://api.github.com/users/nex3","html_url":"https://github.com/nex3","followers_url":"https://api.github.com/users/nex3/followers","following_url":"https://api.github.com/users/nex3/following{/other_user}","gists_url":"https://api.github.com/users/nex3/gists{/gist_id}","starred_url":"https://api.github.com/users/nex3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nex3/subscriptions","organizations_url":"https://api.github.com/users/nex3/orgs","repos_url":"https://api.github.com/users/nex3/repos","events_url":"https://api.github.com/users/nex3/events{/privacy}","received_events_url":"https://api.github.com/users/nex3/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sass/sass/issues/4080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sass/sass/issues/4080/timeline","performed_via_github_app":null,"state_reason":"completed"}