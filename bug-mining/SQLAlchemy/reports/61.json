{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/1402","repository_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/1402/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/1402/comments","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/1402/events","html_url":"https://github.com/sqlalchemy/sqlalchemy/issues/1402","id":384617189,"node_id":"MDU6SXNzdWUzODQ2MTcxODk=","number":1402,"title":"result_processor for SLBoolean should check if value equals to 1","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141269142,"node_id":"MDU6TGFiZWwxMTQxMjY5MTQy","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1141273987,"node_id":"MDU6TGFiZWwxMTQxMjczOTg3","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/sqlite","name":"sqlite","color":"E0D0A0","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/20","html_url":"https://github.com/sqlalchemy/sqlalchemy/milestone/20","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/20/labels","id":3850574,"node_id":"MDk6TWlsZXN0b25lMzg1MDU3NA==","number":20,"title":"0.5.4","description":null,"creator":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":25,"state":"closed","created_at":"2018-11-27T03:51:15Z","updated_at":"2018-11-28T16:49:45Z","due_on":null,"closed_at":"2018-11-28T16:49:45Z"},"comments":5,"created_at":"2009-05-04T06:02:53Z","updated_at":"2014-02-23T18:14:14Z","closed_at":"2009-05-04T20:37:13Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Migrated issue, originally created by Anonymous**\n\nFirstly, some queries with sqlite\n\n    sqlite> create table test (boo boolean not null);\n    sqlite> insert into test values ('false');\n    sqlite> insert into test values ('true');\n    sqlite> insert into test values ('0');\n    sqlite> insert into test values ('1');\n    sqlite> insert into test values (0);\n    sqlite> insert into test values (1);\n    sqlite> select * from test where boo;\n    1\n    1\n    sqlite> select * from test where not boo;\n    false\n    true\n    0\n    0\n\n\nOnly 1 evaluates to true.\n\nHowever, when it get to SA, 1, false, and true all evaluate to true, due to this line in the result_processor method of the sqlite driver:\n\n                return value and True or False\n\n\nsince\n * 1 and True or False => True\n * 'false' and True or False => True\n * 'true' and True or False => True\n\nAlthough the bind_processor does ensure that only 1 and 0 get stored, we may still have data inserted into the db through something other than SA. Then, these data will come up wrongly in SA.\n\nA simple fix is to only return True if the value equals to 1, i.e.\n\n                return value == 1 and True or False\n\n","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/1402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/1402/timeline","performed_via_github_app":null,"state_reason":"completed"}