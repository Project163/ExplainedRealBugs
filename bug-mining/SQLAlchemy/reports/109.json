{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3000","repository_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3000/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3000/comments","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3000/events","html_url":"https://github.com/sqlalchemy/sqlalchemy/issues/3000","id":384630003,"node_id":"MDU6SXNzdWUzODQ2MzAwMDM=","number":3000,"title":"cannot cast type int2vector to character varying, post sqlalchemy v0.8.3, for PostgreSQL 8.2.4","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141269142,"node_id":"MDU6TGFiZWwxMTQxMjY5MTQy","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1141273914,"node_id":"MDU6TGFiZWwxMTQxMjczOTE0","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/postgresql","name":"postgresql","color":"60A070","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/74","html_url":"https://github.com/sqlalchemy/sqlalchemy/milestone/74","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/74/labels","id":3850658,"node_id":"MDk6TWlsZXN0b25lMzg1MDY1OA==","number":74,"title":"0.9.4","description":null,"creator":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":32,"state":"closed","created_at":"2018-11-27T04:30:13Z","updated_at":"2018-11-28T16:50:02Z","due_on":null,"closed_at":"2018-11-28T16:50:02Z"},"comments":7,"created_at":"2014-03-25T10:15:24Z","updated_at":"2014-03-25T16:32:43Z","closed_at":"2014-03-25T16:28:03Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Migrated issue, originally created by Cristian Codorean**\n\nI have the following piece of code:\n\n\n```\nfrom sqlalchemy import Table, MetaData, create_engine\nengine = create_engine('postgresql://...@.../...')\nmetadata = MetaData(bind=engine)\nmytable = Table('...', metadata, autoload=True)\n```\n\nRunning on:\n\n```\n$ psql\n# select version();\n                                          version                                           \n--------------------------------------------------------------------------------------------\n PostgreSQL 8.2.4 on x86_64-unknown-linux-gnu, compiled by GCC gcc (GCC) 3.3.3 (SuSE Linux)\n(1 row)\n\n```\n\nAny version of sqlalchemy > 0.8.3 seems to fail when running this code with:\n\n```\nsqlalchemy.exc.ProgrammingError: (ProgrammingError) cannot cast type int2vector to character varying\n```\n\nHave tried the following versions: 0.8.4, 0.8.5, 0.9.3 and got the failure.\n\nSee below the whole traceback with sqlalchemy 0.9.3:\n\n\n```\nTraceback (most recent call last):\n  File \"x.py\", line 4, in <module>\n    mytable = Table('...', metadata, autoload=True)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 350, in __new__\n    table._init(name, metadata, *args, **kw)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 423, in _init\n    self._autoload(metadata, autoload_with, include_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 446, in _autoload\n    self, include_columns, exclude_columns\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1632, in run_callable\n    return conn.run_callable(callable_, *args, **kwargs)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1160, in run_callable\n    return callable_(self, *args, **kwargs)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 345, in reflecttable\n    return insp.reflecttable(table, include_columns, exclude_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/reflection.py\", line 558, in reflecttable\n    **reflection_options\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 350, in __new__\n    table._init(name, metadata, *args, **kw)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 423, in _init\n    self._autoload(metadata, autoload_with, include_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 435, in _autoload\n    self, include_columns, exclude_columns\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1160, in run_callable\n    return callable_(self, *args, **kwargs)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 345, in reflecttable\n    return insp.reflecttable(table, include_columns, exclude_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/reflection.py\", line 558, in reflecttable\n    **reflection_options\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 350, in __new__\n    table._init(name, metadata, *args, **kw)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 423, in _init\n    self._autoload(metadata, autoload_with, include_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 435, in _autoload\n    self, include_columns, exclude_columns\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1160, in run_callable\n    return callable_(self, *args, **kwargs)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 345, in reflecttable\n    return insp.reflecttable(table, include_columns, exclude_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/reflection.py\", line 558, in reflecttable\n    **reflection_options\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 350, in __new__\n    table._init(name, metadata, *args, **kw)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 423, in _init\n    self._autoload(metadata, autoload_with, include_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 435, in _autoload\n    self, include_columns, exclude_columns\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1160, in run_callable\n    return callable_(self, *args, **kwargs)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 345, in reflecttable\n    return insp.reflecttable(table, include_columns, exclude_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/reflection.py\", line 558, in reflecttable\n    **reflection_options\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 350, in __new__\n    table._init(name, metadata, *args, **kw)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 423, in _init\n    self._autoload(metadata, autoload_with, include_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 435, in _autoload\n    self, include_columns, exclude_columns\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1160, in run_callable\n    return callable_(self, *args, **kwargs)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 345, in reflecttable\n    return insp.reflecttable(table, include_columns, exclude_columns)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/reflection.py\", line 571, in reflecttable\n    indexes = self.get_indexes(table_name, schema)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/reflection.py\", line 383, in get_indexes\n    info_cache=self.info_cache, **kw)\n  File \"<string>\", line 2, in get_indexes\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/reflection.py\", line 53, in cache\n    ret = fn(self, con, *args, **kw)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/dialects/postgresql/base.py\", line 2212, in get_indexes\n    c = connection.execute(t, table_oid=table_oid)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 717, in execute\n    return meth(self, multiparams, params)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/sql/elements.py\", line 317, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 814, in _execute_clauseelement\n    compiled_sql, distilled_params\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 927, in _execute_context\n    context)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1076, in _handle_dbapi_exception\n    exc_info\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/util/compat.py\", line 185, in raise_from_cause\n    reraise(type(exception), exception, tb=exc_tb)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 920, in _execute_context\n    context)\n  File \"/xxx/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 425, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (ProgrammingError) cannot cast type int2vector to character varying\n \"\\n          SELECT\\n              i.relname as relname,\\n              ix.indisunique, ix.indexprs, ix.indpred,\\n              a.attname, a.attnum, ix.indkey::varchar\\n          FROM\\n              pg_class t\\n                    join pg_index ix on t.oid = ix.indrelid\\n                    join pg_class i on i.oid=ix.indexrelid\\n                    left outer join\\n                        pg_attribute a\\n                        on t.oid=a.attrelid and a.attnum = ANY(ix.indkey)\\n          WHERE\\n              t.relkind = 'r'\\n              and t.oid = %(table_oid)s\\n              and ix.indisprimary = 'f'\\n          ORDER BY\\n              t.relname,\\n              i.relname\\n        \" {'table_oid': 410127}\n\n```\n\n","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3000/timeline","performed_via_github_app":null,"state_reason":"completed"}