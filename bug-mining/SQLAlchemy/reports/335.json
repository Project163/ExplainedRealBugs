{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3391","repository_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3391/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3391/comments","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3391/events","html_url":"https://github.com/sqlalchemy/sqlalchemy/issues/3391","id":384633682,"node_id":"MDU6SXNzdWUzODQ2MzM2ODI=","number":3391,"title":"\"tables\" collection passed to before/after create events for metadata no longer a list of tables","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141269142,"node_id":"MDU6TGFiZWwxMTQxMjY5MTQy","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1141273948,"node_id":"MDU6TGFiZWwxMTQxMjczOTQ4","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/schema","name":"schema","color":"602060","default":false,"description":"things related to the DDL related objects like Table, Column, CreateIndex, etc."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/77","html_url":"https://github.com/sqlalchemy/sqlalchemy/milestone/77","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/77/labels","id":3850664,"node_id":"MDk6TWlsZXN0b25lMzg1MDY2NA==","number":77,"title":"1.0.3","description":null,"creator":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2018-11-27T04:35:12Z","updated_at":"2018-11-28T16:50:04Z","due_on":null,"closed_at":"2018-11-28T16:50:04Z"},"comments":2,"created_at":"2015-04-27T18:43:37Z","updated_at":"2015-04-27T19:23:37Z","closed_at":"2015-04-27T19:23:37Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Migrated issue, originally created by Michael Bayer ([@zzzeek](https://github.com/zzzeek))**\n\nagain due to #3282, the format of the \"tables\" collection has changed and we aren't converting it back to the previous format nor did we put anything in migration about it.   While the documentation doesn't claim a format here, the collection is still key enough that we should probably keep it as it was:\n\n\n```\ndiff --git a/test/engine/test_ddlevents.py b/test/engine/test_ddlevents.py\nindex 1830017..3416b0e 100644\n--- a/test/engine/test_ddlevents.py\n+++ b/test/engine/test_ddlevents.py\n@@ -19,29 +19,41 @@ class DDLEventTest(fixtures.TestBase):\n             self.state = None\n             self.schema_item = schema_item\n             self.bind = bind\n+            if isinstance(schema_item, MetaData):\n+                self.tables = set(schema_item.tables.values())\n+            else:\n+                self.tables = None\n \n         def before_create(self, schema_item, bind, **kw):\n             assert self.state is None\n             assert schema_item is self.schema_item\n             assert bind is self.bind\n+            if self.tables:\n+                eq_(self.tables, set(kw['tables']))\n             self.state = 'before-create'\n \n         def after_create(self, schema_item, bind, **kw):\n             assert self.state in ('before-create', 'skipped')\n             assert schema_item is self.schema_item\n             assert bind is self.bind\n+            if self.tables:\n+                eq_(self.tables, set(kw['tables']))\n             self.state = 'after-create'\n \n         def before_drop(self, schema_item, bind, **kw):\n             assert self.state is None\n             assert schema_item is self.schema_item\n             assert bind is self.bind\n+            if self.tables:\n+                eq_(self.tables, set(kw['tables']))\n             self.state = 'before-drop'\n \n         def after_drop(self, schema_item, bind, **kw):\n             assert self.state in ('before-drop', 'skipped')\n             assert schema_item is self.schema_item\n             assert bind is self.bind\n+            if self.tables:\n+                eq_(self.tables, set(kw['tables']))\n             self.state = 'after-drop'\n \n     def setup(self):\n\n```\n\n","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3391/timeline","performed_via_github_app":null,"state_reason":"completed"}