{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3228","repository_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3228/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3228/comments","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3228/events","html_url":"https://github.com/sqlalchemy/sqlalchemy/issues/3228","id":384632225,"node_id":"MDU6SXNzdWUzODQ2MzIyMjU=","number":3228,"title":"query.update() does not resolve string names into expressions against the mapped class","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141269142,"node_id":"MDU6TGFiZWwxMTQxMjY5MTQy","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1141273966,"node_id":"MDU6TGFiZWwxMTQxMjczOTY2","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/orm","name":"orm","color":"20C0B0","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/42","html_url":"https://github.com/sqlalchemy/sqlalchemy/milestone/42","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/42/labels","id":3850611,"node_id":"MDk6TWlsZXN0b25lMzg1MDYxMQ==","number":42,"title":"1.0","description":null,"creator":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":101,"state":"closed","created_at":"2018-11-27T04:04:03Z","updated_at":"2018-11-28T16:49:52Z","due_on":null,"closed_at":"2018-11-28T16:49:52Z"},"comments":9,"created_at":"2014-10-16T16:06:26Z","updated_at":"2014-10-16T20:21:00Z","closed_at":"2014-10-16T18:37:32Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Migrated issue, originally created by Jean-SÃ©bastien Suzanne ([@jssuzanne](https://github.com/jssuzanne))**\n\nHi,\n\nOne example is better than my english.\n\n    from sqlalchemy import Column, Integer, String, create_engine\n    from sqlalchemy.ext.declarative import declarative_base\n    from sqlalchemy.orm import sessionmaker\n    from sqlalchemy.ext.hybrid import hybrid_property\n\n    engine = create_engine('sqlite:///memory')\n    Base = declarative_base()\n\n\n    class Test(Base):\n        __tablename__ = 'plop'\n        id = Column(Integer, primary_key=True)\n        code = Column(String(64))\n\n        @hybrid_property\n        def code2(self):\n            return self.code\n\n        @code2.setter\n        def code2(self, value):\n            self.code = value\n\n\n    Base.metadata.create_all(engine)\n    Session = sessionmaker(bind=engine)\n\n    session = Session()\n    t = Test(code2='test')\n    session.add(t)\n    assert t.code == t.code2\n    t.code2 = 'other value'\n    assert t.code == t.code2\n    session.query(Test).update({'code': 'New value'})\n    session.query(Test).update({'code2': 'New value'})\n\nIf i can get an instance with 'code2' parameter, it would be normal to update the hybrid_property too in the query.\n\nFile \"./bin/python\", line 64, in <module>\n    exec(compile(__file__f.read(), __file__, \"exec\"))\n  File \"selection.py\", line 36, in <module>\n    session.query(Test).update({'code2': 'New value'})\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/orm/query.py\", line 2757, in update\n    update_op.exec_()\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/orm/persistence.py\", line 897, in exec_\n    self._do_exec()\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/orm/persistence.py\", line 995, in _do_exec\n    update_stmt, params=self.query._params)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/orm/session.py\", line 991, in execute\n    bind, close_with_result=True).execute(clause, params or {})\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/engine/base.py\", line 729, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/elements.py\", line 321, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/engine/base.py\", line 819, in _execute_clauseelement\n    inline=len(distilled_params) > 1)\n  File \"<string>\", line 1, in <lambda>\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/elements.py\", line 492, in compile\n    return self._compiler(dialect, bind=bind, **kw)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/elements.py\", line 498, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/compiler.py\", line 395, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/compiler.py\", line 199, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/compiler.py\", line 222, in process\n    return obj._compiler_dispatch(self, **kwargs)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/visitors.py\", line 80, in _compiler_dispatch\n    return meth(self, **kw)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/compiler.py\", line 1806, in visit_update\n    colparams = self._get_colparams(update_stmt, **kw)\n  File \"/Users/jssuzanne/.buildout/eggs/SQLAlchemy-0.9.7-py3.3-macosx-10.9-x86_64.egg/sqlalchemy/sql/compiler.py\", line 2217, in _get_colparams\n    (\", \".join(\"%s\" % c for c in check))\nsqlalchemy.exc.CompileError: Unconsumed column names: code2\n\n","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/3228/timeline","performed_via_github_app":null,"state_reason":"completed"}