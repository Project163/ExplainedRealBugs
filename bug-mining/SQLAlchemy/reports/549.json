{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/9644","repository_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/9644/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/9644/comments","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/9644/events","html_url":"https://github.com/sqlalchemy/sqlalchemy/issues/9644","id":1664768116,"node_id":"I_kwDOCX5JB85jOlh0","number":9644,"title":"`RowMapping.get()` is typed as only supporting string keys, not `Column`s","user":{"login":"rouge8","id":237005,"node_id":"MDQ6VXNlcjIzNzAwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/237005?v=4","gravatar_id":"","url":"https://api.github.com/users/rouge8","html_url":"https://github.com/rouge8","followers_url":"https://api.github.com/users/rouge8/followers","following_url":"https://api.github.com/users/rouge8/following{/other_user}","gists_url":"https://api.github.com/users/rouge8/gists{/gist_id}","starred_url":"https://api.github.com/users/rouge8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rouge8/subscriptions","organizations_url":"https://api.github.com/users/rouge8/orgs","repos_url":"https://api.github.com/users/rouge8/repos","events_url":"https://api.github.com/users/rouge8/events{/privacy}","received_events_url":"https://api.github.com/users/rouge8/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1780101286,"node_id":"MDU6TGFiZWwxNzgwMTAxMjg2","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/result%20fetching%20API%20improvements","name":"result fetching API improvements","color":"d8ed93","default":false,"description":""},{"id":3682635935,"node_id":"LA_kwDOCX5JB87bgJCf","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/typing","name":"typing","color":"A24AD5","default":false,"description":"pep -484 typing issues.  independent of \"mypy\""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-12T15:17:10Z","updated_at":"2023-04-25T17:23:53Z","closed_at":"2023-04-25T17:23:53Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Ensure stubs packages are not installed\n\n- [X] No sqlalchemy stub packages is installed (both `sqlalchemy-stubs` and `sqlalchemy2-stubs` are not compatible with v2)\n\n### Verify if the api is typed\n\n- [X] The api is not in a module listed in [#6810](https://github.com/sqlalchemy/sqlalchemy/issues/6810) so it should pass type checking\n\n### Confirm this is not Mypy dataclasses issue 13856\n\n- [X] This is not related to Mypy issue 13856\n\n### Describe the typing issue\n\n`RowMapping.__getitem__` supports `str` and `Column` keys, but `RowMapping.get()` is typed as only supporting `str` keys.\n\n### To Reproduce\n\n```python\nfrom __future__ import annotations\r\n\r\nfrom sqlalchemy import Column, Integer, MetaData, Table, select\r\nfrom sqlalchemy.engine import create_engine\r\n\r\nmetadata = MetaData()\r\n\r\n\r\nt_user = Table(\"user\", metadata, Column(\"user_id\", Integer, primary_key=True))\r\n\r\n\r\nengine = create_engine(\"sqlite://\")\r\n\r\nwith engine.connect() as conn:\r\n    result = conn.execute(select(Table)).first()\r\n    assert result is not None\r\n    result._mapping.get(t_user.c.user_id)\n```\n\n\n### Error\n\n```\r\nt.py:17: error: No overload variant of \"get\" of \"Mapping\" matches argument type \"Column[Any]\"  [call-overload]\r\nt.py:17: note: Possible overload variants:\r\nt.py:17: note:     def get(self, str, /) -> Optional[Any]\r\nt.py:17: note:     def [_T] get(self, str, /, default: Union[Any, _T]) -> Union[Any, _T]\r\nFound 1 error in 1 file (checked 1 source file)\r\n``` \n\n### Versions\n\n- OS: macOS 13.3.1\r\n- Python: 3.11.1\r\n- SQLAlchemy: 2.0.9\r\n- Type checker (eg: mypy 0.991, pyright 1.1.290, etc): mypy 1.0.1 (compiled: yes)\r\n\n\n### Additional context\n\n_No response_","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/9644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/9644/timeline","performed_via_github_app":null,"state_reason":"completed"}