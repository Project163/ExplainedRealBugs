{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/2051","repository_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/2051/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/2051/comments","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/2051/events","html_url":"https://github.com/sqlalchemy/sqlalchemy/issues/2051","id":384622485,"node_id":"MDU6SXNzdWUzODQ2MjI0ODU=","number":2051,"title":"support postgresql table options","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141273914,"node_id":"MDU6TGFiZWwxMTQxMjczOTE0","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/postgresql","name":"postgresql","color":"60A070","default":false,"description":""},{"id":1141273925,"node_id":"MDU6TGFiZWwxMTQxMjczOTI1","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/feature","name":"feature","color":"306080","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/57","html_url":"https://github.com/sqlalchemy/sqlalchemy/milestone/57","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/57/labels","id":3850634,"node_id":"MDk6TWlsZXN0b25lMzg1MDYzNA==","number":57,"title":"1.0.xx","description":null,"creator":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":127,"state":"closed","created_at":"2018-11-27T04:15:49Z","updated_at":"2018-11-28T16:49:57Z","due_on":null,"closed_at":"2018-11-28T16:49:57Z"},"comments":15,"created_at":"2011-02-12T20:43:30Z","updated_at":"2014-08-23T19:22:50Z","closed_at":"2014-08-23T19:22:50Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Migrated issue, originally created by Michael Bayer ([@zzzeek](https://github.com/zzzeek))**\n\nhere's a userland monkeypatch that should be easy to adapt straight into the dialect:\n\n\n    # See: http://www.mail-archive.com/sqlalchemy@googlegroups.com/msg20421.html\n    def patch_postgresql_table_ddl():\n      import sqlalchemy.dialects.postgresql.base\n      class MyPGDDLCompiler(sqlalchemy.dialects.postgresql.base.PGDDLCompiler):\n        def post_create_table(self, table):\n          \"\"\"Build table-level CREATE options like TABLESPACE.\"\"\"\n    \n          table_opts = []\n    \n          inherits = table.kwargs.get('postgresql_inherits')\n          if inherits is not None:\n              if not isinstance(inherits, (list, tuple)):\n                  inherits = (inherits,)\n                  table_opts.append(\n                      '\\nINHERITS ( ' +\n                      ', '.join(isinstance(i, basestring) and i\n                                or self.process(i)\n                                for i\n                                in inherits) +\n                      ' )')\n    \n          on_commit = table.kwargs.get('postgresql_on_commit')\n          if on_commit:\n              table_opts.append(\n                  '\\nON COMMIT ' +\n                  on_commit.upper().replace('_', ' '))\n    \n          with_oids = table.kwargs.get('postgresql_with_oids')\n          if with_oids is not None:\n              if with_oids:\n                  w = 'WITH'\n              else:\n                  w = 'WITHOUT'\n              table_opts.append('\\n%s OIDS' % w)\n    \n          tablespace = table.kwargs.get('postgresql_tablespace')\n          if tablespace:\n              table_opts.append('\\nTABLESPACE ' + tablespace)\n    \n          return ''.join(table_opts)\n    \n      sqlalchemy.dialects.postgresql.base.PGDDLCompiler = MyPGDDLCompiler\n      sqlalchemy.dialects.postgresql.base.PGDialect.ddl_compiler = MyPGDDLCompiler\n\n","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/2051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/2051/timeline","performed_via_github_app":null,"state_reason":"completed"}