[{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265751733","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-265751733","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":265751733,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTc1MTczMw==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-08T14:25:24Z","updated_at":"2016-12-08T14:25:24Z","body":"@umputun interesting, I tested this a bunch of times and it was fine. I'll add a test case for this -- however, something to note is that in Go 1.8, this will be standard functionality and won't even be necessary, so I'll probably check for just Go 1.7 and do nothing above that.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265751733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":886921986,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg2OTIxOTg2","url":"https://api.github.com/repos/go-chi/chi/issues/events/886921986","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-08T14:25:24Z","performed_via_github_app":null},{"id":886921987,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4NjkyMTk4Nw==","url":"https://api.github.com/repos/go-chi/chi/issues/events/886921987","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-08T14:25:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265866004","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-265866004","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":265866004,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg2NjAwNA==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-08T21:50:09Z","updated_at":"2016-12-08T21:50:09Z","body":"btw, if other users are having this same issue, please report","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265866004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265867631","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-265867631","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":265867631,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg2NzYzMQ==","user":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-08T21:56:50Z","updated_at":"2016-12-08T21:56:50Z","body":"I think it is really easy to reproduce.\r\n\r\n1. Make dummy rest, with a handler sending back anything with custom response code i.e. smth like `render.Status(r, http.StatusBadRequest); render.JSON(....)`\r\n2. Make sure `router.Use(middleware.CloseNotify)` in place \r\n3. Hit it a few times and you will see the error (warning) ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265867631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265880076","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-265880076","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":265880076,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg4MDA3Ng==","user":{"login":"novln","id":707992,"node_id":"MDQ6VXNlcjcwNzk5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/707992?v=4","gravatar_id":"","url":"https://api.github.com/users/novln","html_url":"https://github.com/novln","followers_url":"https://api.github.com/users/novln/followers","following_url":"https://api.github.com/users/novln/following{/other_user}","gists_url":"https://api.github.com/users/novln/gists{/gist_id}","starred_url":"https://api.github.com/users/novln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novln/subscriptions","organizations_url":"https://api.github.com/users/novln/orgs","repos_url":"https://api.github.com/users/novln/repos","events_url":"https://api.github.com/users/novln/events{/privacy}","received_events_url":"https://api.github.com/users/novln/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-08T22:52:42Z","updated_at":"2016-12-08T22:52:42Z","body":"@pkieltyka I had the same issue while using [hey](https://github.com/rakyll/hey) load generator with `go 1.7.3`.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265880076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"novln","id":707992,"node_id":"MDQ6VXNlcjcwNzk5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/707992?v=4","gravatar_id":"","url":"https://api.github.com/users/novln","html_url":"https://github.com/novln","followers_url":"https://api.github.com/users/novln/followers","following_url":"https://api.github.com/users/novln/following{/other_user}","gists_url":"https://api.github.com/users/novln/gists{/gist_id}","starred_url":"https://api.github.com/users/novln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novln/subscriptions","organizations_url":"https://api.github.com/users/novln/orgs","repos_url":"https://api.github.com/users/novln/repos","events_url":"https://api.github.com/users/novln/events{/privacy}","received_events_url":"https://api.github.com/users/novln/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":887622333,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg3NjIyMzMz","url":"https://api.github.com/repos/go-chi/chi/issues/events/887622333","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-08T22:52:42Z","performed_via_github_app":null},{"id":887622334,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4NzYyMjMzNA==","url":"https://api.github.com/repos/go-chi/chi/issues/events/887622334","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-08T22:52:42Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265884261","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-265884261","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":265884261,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg4NDI2MQ==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-08T23:13:17Z","updated_at":"2016-12-08T23:13:17Z","body":"Cool. I'll fix it soon, but once 1.8 hits this middleware won't be necessary and every request will have this behavior.\n\n> On Dec 8, 2016, at 5:52 PM, LE ROUX Thomas <notifications@github.com> wrote:\n> \n> @pkieltyka I had the same issue while using hey load generator with go 1.7.3.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/265884261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":887643513,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg3NjQzNTEz","url":"https://api.github.com/repos/go-chi/chi/issues/events/887643513","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-08T23:13:17Z","performed_via_github_app":null},{"id":887643515,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4NzY0MzUxNQ==","url":"https://api.github.com/repos/go-chi/chi/issues/events/887643515","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-08T23:13:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266060711","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266060711","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266060711,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA2MDcxMQ==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T16:43:17Z","updated_at":"2016-12-09T16:43:17Z","body":"@umputun @november-eleven Im unable to reproduce the bug on 1.7.3 or 1.8b1\r\n\r\nI wrote this program https://gist.github.com/pkieltyka/8be94802255ea023cb1cc59327d44670 to try to simulate the bug, but no luck. If you guys can send back a gist with the bug (or even better a test case), I'll be happy to fix it. Here is the start of a test case as well for CloseNotify: https://gist.github.com/pkieltyka/a4bbf38318b321c3dd21504d26c73821 .. which is also passing, however, it may need a custom ResponseWriter and check the writeHeader doesn't happen twice, but still Im unable to trigger the warning.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266060711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":888596754,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg4NTk2NzU0","url":"https://api.github.com/repos/go-chi/chi/issues/events/888596754","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-09T16:43:17Z","performed_via_github_app":null},{"id":888596755,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4ODU5Njc1NQ==","url":"https://api.github.com/repos/go-chi/chi/issues/events/888596755","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-09T16:43:17Z","performed_via_github_app":null},{"id":888596756,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg4NTk2NzU2","url":"https://api.github.com/repos/go-chi/chi/issues/events/888596756","actor":{"login":"novln","id":707992,"node_id":"MDQ6VXNlcjcwNzk5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/707992?v=4","gravatar_id":"","url":"https://api.github.com/users/novln","html_url":"https://github.com/novln","followers_url":"https://api.github.com/users/novln/followers","following_url":"https://api.github.com/users/novln/following{/other_user}","gists_url":"https://api.github.com/users/novln/gists{/gist_id}","starred_url":"https://api.github.com/users/novln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novln/subscriptions","organizations_url":"https://api.github.com/users/novln/orgs","repos_url":"https://api.github.com/users/novln/repos","events_url":"https://api.github.com/users/novln/events{/privacy}","received_events_url":"https://api.github.com/users/novln/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-09T16:43:17Z","performed_via_github_app":null},{"id":888596757,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4ODU5Njc1Nw==","url":"https://api.github.com/repos/go-chi/chi/issues/events/888596757","actor":{"login":"novln","id":707992,"node_id":"MDQ6VXNlcjcwNzk5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/707992?v=4","gravatar_id":"","url":"https://api.github.com/users/novln","html_url":"https://github.com/novln","followers_url":"https://api.github.com/users/novln/followers","following_url":"https://api.github.com/users/novln/following{/other_user}","gists_url":"https://api.github.com/users/novln/gists{/gist_id}","starred_url":"https://api.github.com/users/novln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novln/subscriptions","organizations_url":"https://api.github.com/users/novln/orgs","repos_url":"https://api.github.com/users/novln/repos","events_url":"https://api.github.com/users/novln/events{/privacy}","received_events_url":"https://api.github.com/users/novln/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-09T16:43:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266074561","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266074561","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266074561,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA3NDU2MQ==","user":{"login":"c2h5oh","id":446070,"node_id":"MDQ6VXNlcjQ0NjA3MA==","avatar_url":"https://avatars.githubusercontent.com/u/446070?v=4","gravatar_id":"","url":"https://api.github.com/users/c2h5oh","html_url":"https://github.com/c2h5oh","followers_url":"https://api.github.com/users/c2h5oh/followers","following_url":"https://api.github.com/users/c2h5oh/following{/other_user}","gists_url":"https://api.github.com/users/c2h5oh/gists{/gist_id}","starred_url":"https://api.github.com/users/c2h5oh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/c2h5oh/subscriptions","organizations_url":"https://api.github.com/users/c2h5oh/orgs","repos_url":"https://api.github.com/users/c2h5oh/repos","events_url":"https://api.github.com/users/c2h5oh/events{/privacy}","received_events_url":"https://api.github.com/users/c2h5oh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T17:40:50Z","updated_at":"2016-12-09T17:40:50Z","body":"Tested the program above with `ab -c 1000 -n 10000 http://localhost:3333/` on Linux x86_64 with go 1.7rc2 and 1.7.4 - could not replicate the issue.\r\n\r\nWhat OS are you running?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266074561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"c2h5oh","id":446070,"node_id":"MDQ6VXNlcjQ0NjA3MA==","avatar_url":"https://avatars.githubusercontent.com/u/446070?v=4","gravatar_id":"","url":"https://api.github.com/users/c2h5oh","html_url":"https://github.com/c2h5oh","followers_url":"https://api.github.com/users/c2h5oh/followers","following_url":"https://api.github.com/users/c2h5oh/following{/other_user}","gists_url":"https://api.github.com/users/c2h5oh/gists{/gist_id}","starred_url":"https://api.github.com/users/c2h5oh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/c2h5oh/subscriptions","organizations_url":"https://api.github.com/users/c2h5oh/orgs","repos_url":"https://api.github.com/users/c2h5oh/repos","events_url":"https://api.github.com/users/c2h5oh/events{/privacy}","received_events_url":"https://api.github.com/users/c2h5oh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266078274","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266078274","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266078274,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA3ODI3NA==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T17:56:10Z","updated_at":"2016-12-09T17:56:10Z","body":"btw, I don't think we're simulating the problem correctly, the client needs to close early to trigger the problem. Some browsers will do this on refresh to a request. \r\n\r\nhowever, even in Chrome which closes a running connection with a refresh, the server's output looks like..\r\n\r\n```\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59724 - 200 11B in 2.002588196s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59724 - [disconnected] 11B in 2.003083784s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59725 - 200 11B in 2.003003779s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59725 - 200 11B in 2.0049129s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59726 - 200 11B in 2.000145561s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59726 - [disconnected] 11B in 2.004778573s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59727 - 200 11B in 2.000354583s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59727 - 200 11B in 2.002733109s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59727 - [disconnected] 11B in 2.003348645s\r\n\"GET http://localhost:3333/ HTTP/1.1\" from [::1]:59732 - 200 11B in 2.000938948s\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266078274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266078446","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266078446","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266078446,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA3ODQ0Ng==","user":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T17:56:52Z","updated_at":"2016-12-09T17:56:52Z","body":"if you remove middleware.Logger and keep everything else as is you will see these \"multiple response.WriteHeader calls\". If you add some sleep before - you will get even more of these.\r\n\r\n```\r\nfunc main() {\r\n\tr := chi.NewRouter()\r\n\tr.Use(middleware.CloseNotify)\r\n\r\n\tr.Get(\"/\", func(w http.ResponseWriter, r *http.Request) {\r\n\t\ttime.Sleep(100*time.Millisecond)\r\n\t\tv := map[string]interface{}{\"x\": 1}\r\n\r\n\t\trender.Status(r, http.StatusBadRequest)\r\n\t\trender.JSON(w, r, v)\r\n\t})\r\n\thttp.ListenAndServe(\":3333\", r)\r\n}\r\n```\r\n\r\nwith `ab -n 100 -c 10 127.0.0.1:3333`  i got bunch of of these","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266078446/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266079192","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266079192","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266079192,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA3OTE5Mg==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T17:59:57Z","updated_at":"2016-12-09T17:59:57Z","body":"@umputun no errors on go 1.8b1 with that code and ab command. I'll have someone try it on 1.7 in a minute. What exact go version and OS are you running?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266079192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":888695304,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg4Njk1MzA0","url":"https://api.github.com/repos/go-chi/chi/issues/events/888695304","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-09T17:59:57Z","performed_via_github_app":null},{"id":888695305,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4ODY5NTMwNQ==","url":"https://api.github.com/repos/go-chi/chi/issues/events/888695305","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-09T17:59:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266079836","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266079836","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266079836,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA3OTgzNg==","user":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T18:02:35Z","updated_at":"2016-12-09T18:02:35Z","body":"@pkieltyka `go version go1.7.4 darwin/amd64` (mac os 10.12.1) and the same version of go in alpine 3.4 (docker container). Both have the same errors","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266079836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":888698634,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg4Njk4NjM0","url":"https://api.github.com/repos/go-chi/chi/issues/events/888698634","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-09T18:02:35Z","performed_via_github_app":null},{"id":888698635,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4ODY5ODYzNQ==","url":"https://api.github.com/repos/go-chi/chi/issues/events/888698635","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-09T18:02:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266079907","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266079907","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266079907,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA3OTkwNw==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T18:02:54Z","updated_at":"2016-12-09T18:02:54Z","body":"interesting. thanks","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266079907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266081890","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266081890","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266081890,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA4MTg5MA==","user":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T18:11:33Z","updated_at":"2016-12-09T18:11:33Z","body":"@umputun confirmed on 1.7 on osx it does have this error, but there is no error on 1.8b1","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266081890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkieltyka","id":18831,"node_id":"MDQ6VXNlcjE4ODMx","avatar_url":"https://avatars.githubusercontent.com/u/18831?v=4","gravatar_id":"","url":"https://api.github.com/users/pkieltyka","html_url":"https://github.com/pkieltyka","followers_url":"https://api.github.com/users/pkieltyka/followers","following_url":"https://api.github.com/users/pkieltyka/following{/other_user}","gists_url":"https://api.github.com/users/pkieltyka/gists{/gist_id}","starred_url":"https://api.github.com/users/pkieltyka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkieltyka/subscriptions","organizations_url":"https://api.github.com/users/pkieltyka/orgs","repos_url":"https://api.github.com/users/pkieltyka/repos","events_url":"https://api.github.com/users/pkieltyka/events{/privacy}","received_events_url":"https://api.github.com/users/pkieltyka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":888709658,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODg4NzA5NjU4","url":"https://api.github.com/repos/go-chi/chi/issues/events/888709658","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-09T18:11:33Z","performed_via_github_app":null},{"id":888709659,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg4ODcwOTY1OQ==","url":"https://api.github.com/repos/go-chi/chi/issues/events/888709659","actor":{"login":"umputun","id":535880,"node_id":"MDQ6VXNlcjUzNTg4MA==","avatar_url":"https://avatars.githubusercontent.com/u/535880?v=4","gravatar_id":"","url":"https://api.github.com/users/umputun","html_url":"https://github.com/umputun","followers_url":"https://api.github.com/users/umputun/followers","following_url":"https://api.github.com/users/umputun/following{/other_user}","gists_url":"https://api.github.com/users/umputun/gists{/gist_id}","starred_url":"https://api.github.com/users/umputun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umputun/subscriptions","organizations_url":"https://api.github.com/users/umputun/orgs","repos_url":"https://api.github.com/users/umputun/repos","events_url":"https://api.github.com/users/umputun/events{/privacy}","received_events_url":"https://api.github.com/users/umputun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-09T18:11:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266085885","html_url":"https://github.com/go-chi/chi/issues/117#issuecomment-266085885","issue_url":"https://api.github.com/repos/go-chi/chi/issues/117","id":266085885,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjA4NTg4NQ==","user":{"login":"VojtechVitek","id":139342,"node_id":"MDQ6VXNlcjEzOTM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/139342?v=4","gravatar_id":"","url":"https://api.github.com/users/VojtechVitek","html_url":"https://github.com/VojtechVitek","followers_url":"https://api.github.com/users/VojtechVitek/followers","following_url":"https://api.github.com/users/VojtechVitek/following{/other_user}","gists_url":"https://api.github.com/users/VojtechVitek/gists{/gist_id}","starred_url":"https://api.github.com/users/VojtechVitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VojtechVitek/subscriptions","organizations_url":"https://api.github.com/users/VojtechVitek/orgs","repos_url":"https://api.github.com/users/VojtechVitek/repos","events_url":"https://api.github.com/users/VojtechVitek/events{/privacy}","received_events_url":"https://api.github.com/users/VojtechVitek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-09T18:28:46Z","updated_at":"2016-12-09T18:28:46Z","body":"I see, I didn't test this properly without the Logger middleware applied when I was writing this middleware a year ago.\r\n\r\nWhat happens:\r\nWhen the handler writes some headers and body to the response writer and then the client closes the connection, this middleware tries to write the header again, which is wrong. The Logger middleware used to catch the extra header write (I'm not sure if it still does that after the recent Logger middleware changes) and also prints [disconnected] at https://github.com/pressly/chi/blob/badf07aee0a9a24f6cffe7acb5c76b2a3bcbdf35/middleware/logger.go#L103 based on the status code. \r\n\r\nLet's just remove this line \r\nhttps://github.com/pressly/chi/blob/master/middleware/closenotify.go#L32 and also make it `// +build go1.7`, since it won't work properly in go 1.8 anyway since the stdlib started to close the context when client disconnects.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/go-chi/chi/issues/comments/266085885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"VojtechVitek","id":139342,"node_id":"MDQ6VXNlcjEzOTM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/139342?v=4","gravatar_id":"","url":"https://api.github.com/users/VojtechVitek","html_url":"https://github.com/VojtechVitek","followers_url":"https://api.github.com/users/VojtechVitek/followers","following_url":"https://api.github.com/users/VojtechVitek/following{/other_user}","gists_url":"https://api.github.com/users/VojtechVitek/gists{/gist_id}","starred_url":"https://api.github.com/users/VojtechVitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VojtechVitek/subscriptions","organizations_url":"https://api.github.com/users/VojtechVitek/orgs","repos_url":"https://api.github.com/users/VojtechVitek/repos","events_url":"https://api.github.com/users/VojtechVitek/events{/privacy}","received_events_url":"https://api.github.com/users/VojtechVitek/received_events","type":"User","user_view_type":"public","site_admin":false}}]