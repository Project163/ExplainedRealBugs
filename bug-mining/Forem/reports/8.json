{"url":"https://api.github.com/repos/forem/forem/issues/14334","repository_url":"https://api.github.com/repos/forem/forem","labels_url":"https://api.github.com/repos/forem/forem/issues/14334/labels{/name}","comments_url":"https://api.github.com/repos/forem/forem/issues/14334/comments","events_url":"https://api.github.com/repos/forem/forem/issues/14334/events","html_url":"https://github.com/forem/forem/issues/14334","id":952884099,"node_id":"MDU6SXNzdWU5NTI4ODQwOTk=","number":14334,"title":"Bad regex for detecting SVG on Navigation Links","user":{"login":"omenking","id":7776,"node_id":"MDQ6VXNlcjc3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/7776?v=4","gravatar_id":"","url":"https://api.github.com/users/omenking","html_url":"https://github.com/omenking","followers_url":"https://api.github.com/users/omenking/followers","following_url":"https://api.github.com/users/omenking/following{/other_user}","gists_url":"https://api.github.com/users/omenking/gists{/gist_id}","starred_url":"https://api.github.com/users/omenking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/omenking/subscriptions","organizations_url":"https://api.github.com/users/omenking/orgs","repos_url":"https://api.github.com/users/omenking/repos","events_url":"https://api.github.com/users/omenking/events{/privacy}","received_events_url":"https://api.github.com/users/omenking/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":480869965,"node_id":"MDU6TGFiZWw0ODA4Njk5NjU=","url":"https://api.github.com/repos/forem/forem/labels/bug","name":"bug","color":"E99695","default":true,"description":"always open for contribution"},{"id":1290877325,"node_id":"MDU6TGFiZWwxMjkwODc3MzI1","url":"https://api.github.com/repos/forem/forem/labels/area:%20admin","name":"area: admin","color":"2a75b2","default":false,"description":"admin panel"}],"state":"closed","locked":false,"assignee":{"login":"SiddharthShyniben","id":76640268,"node_id":"MDQ6VXNlcjc2NjQwMjY4","avatar_url":"https://avatars.githubusercontent.com/u/76640268?v=4","gravatar_id":"","url":"https://api.github.com/users/SiddharthShyniben","html_url":"https://github.com/SiddharthShyniben","followers_url":"https://api.github.com/users/SiddharthShyniben/followers","following_url":"https://api.github.com/users/SiddharthShyniben/following{/other_user}","gists_url":"https://api.github.com/users/SiddharthShyniben/gists{/gist_id}","starred_url":"https://api.github.com/users/SiddharthShyniben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SiddharthShyniben/subscriptions","organizations_url":"https://api.github.com/users/SiddharthShyniben/orgs","repos_url":"https://api.github.com/users/SiddharthShyniben/repos","events_url":"https://api.github.com/users/SiddharthShyniben/events{/privacy}","received_events_url":"https://api.github.com/users/SiddharthShyniben/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"SiddharthShyniben","id":76640268,"node_id":"MDQ6VXNlcjc2NjQwMjY4","avatar_url":"https://avatars.githubusercontent.com/u/76640268?v=4","gravatar_id":"","url":"https://api.github.com/users/SiddharthShyniben","html_url":"https://github.com/SiddharthShyniben","followers_url":"https://api.github.com/users/SiddharthShyniben/followers","following_url":"https://api.github.com/users/SiddharthShyniben/following{/other_user}","gists_url":"https://api.github.com/users/SiddharthShyniben/gists{/gist_id}","starred_url":"https://api.github.com/users/SiddharthShyniben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SiddharthShyniben/subscriptions","organizations_url":"https://api.github.com/users/SiddharthShyniben/orgs","repos_url":"https://api.github.com/users/SiddharthShyniben/repos","events_url":"https://api.github.com/users/SiddharthShyniben/events{/privacy}","received_events_url":"https://api.github.com/users/SiddharthShyniben/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":6,"created_at":"2021-07-26T13:06:51Z","updated_at":"2021-08-13T14:51:58Z","closed_at":"2021-08-13T06:46:05Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The dreaded error:\r\n\r\n<img width=\"1018\" alt=\"Screen Shot 2021-07-26 at 8 57 12 AM\" src=\"https://user-images.githubusercontent.com/7776/126993336-98586854-0676-42de-98da-dafc584bdf8f.png\">\r\n\r\nCode in question:\r\n\r\n```rb\r\nclass NavigationLink < ApplicationRecord\r\n  SVG_REGEXP = /<svg .*>/i.freeze\r\n```\r\n\r\nTesting with rubular\r\n<img width=\"955\" alt=\"Screen Shot 2021-07-26 at 9 03 10 AM\" src=\"https://user-images.githubusercontent.com/7776/126993412-d9c51c0a-650b-4843-8d64-9eb9ca3a3595.png\">\r\n\r\nSo the problem is that the Regex expects svg text to be all on a single line:\r\n\r\n<img width=\"1026\" alt=\"Screen Shot 2021-07-26 at 9 06 04 AM\" src=\"https://user-images.githubusercontent.com/7776/126993535-996ea229-fb5e-42d5-9ea6-13ae1ee26d47.png\">\r\n\r\nWhen exporting svg from illustrator it will sometimes insert a XML schema tag first.\r\n\r\nYep Single line formatting fixed it:\r\n\r\n<img width=\"597\" alt=\"Screen Shot 2021-07-26 at 9 11 39 AM\" src=\"https://user-images.githubusercontent.com/7776/126994357-a23f4f06-62e7-4988-9532-748d166e89a8.png\">\r\n","closed_by":{"login":"citizen428","id":47985,"node_id":"MDQ6VXNlcjQ3OTg1","avatar_url":"https://avatars.githubusercontent.com/u/47985?v=4","gravatar_id":"","url":"https://api.github.com/users/citizen428","html_url":"https://github.com/citizen428","followers_url":"https://api.github.com/users/citizen428/followers","following_url":"https://api.github.com/users/citizen428/following{/other_user}","gists_url":"https://api.github.com/users/citizen428/gists{/gist_id}","starred_url":"https://api.github.com/users/citizen428/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/citizen428/subscriptions","organizations_url":"https://api.github.com/users/citizen428/orgs","repos_url":"https://api.github.com/users/citizen428/repos","events_url":"https://api.github.com/users/citizen428/events{/privacy}","received_events_url":"https://api.github.com/users/citizen428/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/forem/forem/issues/14334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/forem/forem/issues/14334/timeline","performed_via_github_app":null,"state_reason":"completed"}