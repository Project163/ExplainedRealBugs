[{"url":"https://api.github.com/repos/forem/forem/issues/comments/956434181","html_url":"https://github.com/forem/forem/issues/15245#issuecomment-956434181","issue_url":"https://api.github.com/repos/forem/forem/issues/15245","id":956434181,"node_id":"IC_kwDOBGPKJs45AgcF","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T17:29:57Z","updated_at":"2021-11-01T17:29:57Z","body":"Thanks for the issue, we will take it into consideration! Our team of engineers is busy working on many types of features, please give us time to get back to you.\n\nFeature requests that require more discussion may be closed. Read more about our [feature request process](https://forem.dev/foremteam/internal-rfc-process-and-forem-dev-discussions-3gl4) on forem.dev.\n\nTo our amazing contributors: issues labeled `type: bug` are always up for grabs, but for feature requests, please wait until we add a `ready for dev` before starting to work on it.\n\nTo claim an issue to work on, please leave a comment. If you've claimed the issue and need help, please ping @forem/oss. The OSS Community Manager or the engineers on OSS rotation will follow up.\n\nFor full info on how to contribute, please check out our [contributors guide](https://github.com/forem/forem/blob/main/CONTRIBUTING.md).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/comments/956434181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T17:30:27Z","updated_at":"2021-11-01T17:30:27Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/forem/forem/issues/15243","repository_url":"https://api.github.com/repos/forem/forem","labels_url":"https://api.github.com/repos/forem/forem/issues/15243/labels{/name}","comments_url":"https://api.github.com/repos/forem/forem/issues/15243/comments","events_url":"https://api.github.com/repos/forem/forem/issues/15243/events","html_url":"https://github.com/forem/forem/pull/15243","id":1041261820,"node_id":"PR_kwDOBGPKJs4t7m9c","number":15243,"title":"Show reactions to the user, rather than user created reactions to other users","user":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1123882148,"node_id":"MDU6TGFiZWwxMTIzODgyMTQ4","url":"https://api.github.com/repos/forem/forem/labels/PR:%20merged","name":"PR: merged","color":"6a737d","default":false,"description":"bot applied label for PR's that are merged"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-01T14:53:02Z","updated_at":"2022-07-06T22:21:47Z","closed_at":"2021-11-01T17:55:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":73648678,"node_id":"MDEwOlJlcG9zaXRvcnk3MzY0ODY3OA==","name":"forem","full_name":"forem/forem","private":false,"owner":{"login":"forem","id":65030610,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1MDMwNjEw","avatar_url":"https://avatars.githubusercontent.com/u/65030610?v=4","gravatar_id":"","url":"https://api.github.com/users/forem","html_url":"https://github.com/forem","followers_url":"https://api.github.com/users/forem/followers","following_url":"https://api.github.com/users/forem/following{/other_user}","gists_url":"https://api.github.com/users/forem/gists{/gist_id}","starred_url":"https://api.github.com/users/forem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forem/subscriptions","organizations_url":"https://api.github.com/users/forem/orgs","repos_url":"https://api.github.com/users/forem/repos","events_url":"https://api.github.com/users/forem/events{/privacy}","received_events_url":"https://api.github.com/users/forem/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/forem/forem","description":"For empowering community ðŸŒ±","fork":false,"url":"https://api.github.com/repos/forem/forem","forks_url":"https://api.github.com/repos/forem/forem/forks","keys_url":"https://api.github.com/repos/forem/forem/keys{/key_id}","collaborators_url":"https://api.github.com/repos/forem/forem/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/forem/forem/teams","hooks_url":"https://api.github.com/repos/forem/forem/hooks","issue_events_url":"https://api.github.com/repos/forem/forem/issues/events{/number}","events_url":"https://api.github.com/repos/forem/forem/events","assignees_url":"https://api.github.com/repos/forem/forem/assignees{/user}","branches_url":"https://api.github.com/repos/forem/forem/branches{/branch}","tags_url":"https://api.github.com/repos/forem/forem/tags","blobs_url":"https://api.github.com/repos/forem/forem/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/forem/forem/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/forem/forem/git/refs{/sha}","trees_url":"https://api.github.com/repos/forem/forem/git/trees{/sha}","statuses_url":"https://api.github.com/repos/forem/forem/statuses/{sha}","languages_url":"https://api.github.com/repos/forem/forem/languages","stargazers_url":"https://api.github.com/repos/forem/forem/stargazers","contributors_url":"https://api.github.com/repos/forem/forem/contributors","subscribers_url":"https://api.github.com/repos/forem/forem/subscribers","subscription_url":"https://api.github.com/repos/forem/forem/subscription","commits_url":"https://api.github.com/repos/forem/forem/commits{/sha}","git_commits_url":"https://api.github.com/repos/forem/forem/git/commits{/sha}","comments_url":"https://api.github.com/repos/forem/forem/comments{/number}","issue_comment_url":"https://api.github.com/repos/forem/forem/issues/comments{/number}","contents_url":"https://api.github.com/repos/forem/forem/contents/{+path}","compare_url":"https://api.github.com/repos/forem/forem/compare/{base}...{head}","merges_url":"https://api.github.com/repos/forem/forem/merges","archive_url":"https://api.github.com/repos/forem/forem/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/forem/forem/downloads","issues_url":"https://api.github.com/repos/forem/forem/issues{/number}","pulls_url":"https://api.github.com/repos/forem/forem/pulls{/number}","milestones_url":"https://api.github.com/repos/forem/forem/milestones{/number}","notifications_url":"https://api.github.com/repos/forem/forem/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/forem/forem/labels{/name}","releases_url":"https://api.github.com/repos/forem/forem/releases{/id}","deployments_url":"https://api.github.com/repos/forem/forem/deployments","created_at":"2016-11-13T23:02:13Z","updated_at":"2025-11-10T03:30:54Z","pushed_at":"2025-11-08T23:08:51Z","git_url":"git://github.com/forem/forem.git","ssh_url":"git@github.com:forem/forem.git","clone_url":"https://github.com/forem/forem.git","svn_url":"https://github.com/forem/forem","homepage":"https://forem.com","size":1724987,"stargazers_count":22508,"watchers_count":22508,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":4150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":606,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["community","discussion","feedback","hacktoberfest","open-source","rails","ruby"],"visibility":"public","forks":4150,"open_issues":606,"watchers":22508,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/forem/forem/pulls/15243","html_url":"https://github.com/forem/forem/pull/15243","diff_url":"https://github.com/forem/forem/pull/15243.diff","patch_url":"https://github.com/forem/forem/pull/15243.patch","merged_at":"2021-11-01T17:55:39Z"},"body":"## What type of PR is this? (check all applicable)\r\n\r\n- [ ] Refactor\r\n- [ ] Feature\r\n- [x] Bug Fix\r\n- [ ] Optimization\r\n- [ ] Documentation Update\r\n\r\n## Description\r\n\r\nWhen we show the reports on the user edit page in admin, we want to know about reactions to the user, rather than user created reactions (similar to the way we only show reactions to the user's articles or their comments, and not reactions they made for other user's articles or comments).\r\n\r\nI think neither the callbacks (`has_many :reactions, dependent: :destroy`) nor the `Users::DeleteActivity` class handle removing reactions _to_ the user object when we remove it - if the user's showing this error are moderators (able to add vomit reactions to users that are subsequently deleted) this makes sense around the surrounding context.\r\n\r\n\r\n## Related Tickets & Documents\r\n\r\nFixes #15242 \r\nhttps://github.com/forem/forem/issues/15245 seems to be the underlying issue with the data (which is not corrected here).\r\n\r\nhttps://app.honeybadger.io/projects/66984/faults/78734892/\r\n\r\n## QA Instructions, Screenshots, Recordings\r\n\r\nCreate a `User` vomit reaction by a user\r\n\r\n```ruby\r\nReaction.create(\r\n  category: 'vomit', \r\n  reactable: User.find(@reacted_user_id), \r\n  user: User.find(@reacting_user_id\r\n)\r\n```\r\n\r\nDelete the reactions reacted user (the targeted user)\r\n\r\n```ruby\r\nUser.find(@reacted_user_id).destroy\r\n\r\n# or Users::Delete.new(User.find(@reacted_user_id)).call\r\n```\r\n\r\nEdit the creating/reacting user in admin and observe the changed behavior\r\n\r\non main - replicating the error reported:\r\n![Screenshot from 2021-11-01 12-01-45](https://user-images.githubusercontent.com/1237369/139710562-7918669f-0183-437a-9fce-d6ebf51724ae.png)\r\n\r\nthis branch - filtering out the reaction on a deleted user:\r\n\r\n![Screenshot from 2021-11-01 12-02-25](https://user-images.githubusercontent.com/1237369/139710638-8ef8fc69-7caf-40b0-bf79-3f5d199792fb.png)\r\n\r\n\r\n### UI accessibility concerns?\r\n\r\nNone\r\n\r\n## Added/updated tests?\r\n\r\n- [ ] Yes\r\n- [x] No, and this is why: bugfix\r\n- [ ] I need help with writing tests\r\n\r\n## [Forem core team only] How will this change be communicated?\r\n\r\n_Will this PR introduce a change that impacts Forem members or creators, the\r\ndevelopment process, or any of our internal teams? If so, please note how you\r\nwill share this change with the people who need to know about it._\r\n\r\n\r\n- [x] This change does not need to be communicated, and this is why not: bugfix\r\n\r\n## [optional] Are there any post deployment tasks we need to perform?\r\n\r\n## [optional] What gif best describes this PR or how it makes you feel?\r\n\r\n![alt_text](gif_link)\r\n","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/15243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/forem/forem/issues/15243/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":5551132754,"node_id":"LE_lADOBGPKJs4-EryjzwAAAAFK35BS","url":"https://api.github.com/repos/forem/forem/issues/events/5551132754","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-11-01T19:57:18Z","label":{"name":"area: moderation","color":"2a75b2"},"performed_via_github_app":null},{"actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T13:58:26Z","updated_at":"2021-11-02T13:58:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/forem/forem/issues/15249","repository_url":"https://api.github.com/repos/forem/forem","labels_url":"https://api.github.com/repos/forem/forem/issues/15249/labels{/name}","comments_url":"https://api.github.com/repos/forem/forem/issues/15249/comments","events_url":"https://api.github.com/repos/forem/forem/issues/15249/events","html_url":"https://github.com/forem/forem/pull/15249","id":1041449283,"node_id":"PR_kwDOBGPKJs4t8OK9","number":15249,"title":"Don't show reactions to missing reactables","user":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1123882148,"node_id":"MDU6TGFiZWwxMTIzODgyMTQ4","url":"https://api.github.com/repos/forem/forem/labels/PR:%20merged","name":"PR: merged","color":"6a737d","default":false,"description":"bot applied label for PR's that are merged"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-01T18:09:24Z","updated_at":"2022-07-06T22:24:49Z","closed_at":"2021-12-09T20:40:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":73648678,"node_id":"MDEwOlJlcG9zaXRvcnk3MzY0ODY3OA==","name":"forem","full_name":"forem/forem","private":false,"owner":{"login":"forem","id":65030610,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1MDMwNjEw","avatar_url":"https://avatars.githubusercontent.com/u/65030610?v=4","gravatar_id":"","url":"https://api.github.com/users/forem","html_url":"https://github.com/forem","followers_url":"https://api.github.com/users/forem/followers","following_url":"https://api.github.com/users/forem/following{/other_user}","gists_url":"https://api.github.com/users/forem/gists{/gist_id}","starred_url":"https://api.github.com/users/forem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forem/subscriptions","organizations_url":"https://api.github.com/users/forem/orgs","repos_url":"https://api.github.com/users/forem/repos","events_url":"https://api.github.com/users/forem/events{/privacy}","received_events_url":"https://api.github.com/users/forem/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/forem/forem","description":"For empowering community ðŸŒ±","fork":false,"url":"https://api.github.com/repos/forem/forem","forks_url":"https://api.github.com/repos/forem/forem/forks","keys_url":"https://api.github.com/repos/forem/forem/keys{/key_id}","collaborators_url":"https://api.github.com/repos/forem/forem/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/forem/forem/teams","hooks_url":"https://api.github.com/repos/forem/forem/hooks","issue_events_url":"https://api.github.com/repos/forem/forem/issues/events{/number}","events_url":"https://api.github.com/repos/forem/forem/events","assignees_url":"https://api.github.com/repos/forem/forem/assignees{/user}","branches_url":"https://api.github.com/repos/forem/forem/branches{/branch}","tags_url":"https://api.github.com/repos/forem/forem/tags","blobs_url":"https://api.github.com/repos/forem/forem/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/forem/forem/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/forem/forem/git/refs{/sha}","trees_url":"https://api.github.com/repos/forem/forem/git/trees{/sha}","statuses_url":"https://api.github.com/repos/forem/forem/statuses/{sha}","languages_url":"https://api.github.com/repos/forem/forem/languages","stargazers_url":"https://api.github.com/repos/forem/forem/stargazers","contributors_url":"https://api.github.com/repos/forem/forem/contributors","subscribers_url":"https://api.github.com/repos/forem/forem/subscribers","subscription_url":"https://api.github.com/repos/forem/forem/subscription","commits_url":"https://api.github.com/repos/forem/forem/commits{/sha}","git_commits_url":"https://api.github.com/repos/forem/forem/git/commits{/sha}","comments_url":"https://api.github.com/repos/forem/forem/comments{/number}","issue_comment_url":"https://api.github.com/repos/forem/forem/issues/comments{/number}","contents_url":"https://api.github.com/repos/forem/forem/contents/{+path}","compare_url":"https://api.github.com/repos/forem/forem/compare/{base}...{head}","merges_url":"https://api.github.com/repos/forem/forem/merges","archive_url":"https://api.github.com/repos/forem/forem/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/forem/forem/downloads","issues_url":"https://api.github.com/repos/forem/forem/issues{/number}","pulls_url":"https://api.github.com/repos/forem/forem/pulls{/number}","milestones_url":"https://api.github.com/repos/forem/forem/milestones{/number}","notifications_url":"https://api.github.com/repos/forem/forem/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/forem/forem/labels{/name}","releases_url":"https://api.github.com/repos/forem/forem/releases{/id}","deployments_url":"https://api.github.com/repos/forem/forem/deployments","created_at":"2016-11-13T23:02:13Z","updated_at":"2025-11-10T03:30:54Z","pushed_at":"2025-11-08T23:08:51Z","git_url":"git://github.com/forem/forem.git","ssh_url":"git@github.com:forem/forem.git","clone_url":"https://github.com/forem/forem.git","svn_url":"https://github.com/forem/forem","homepage":"https://forem.com","size":1724987,"stargazers_count":22508,"watchers_count":22508,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":4150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":606,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["community","discussion","feedback","hacktoberfest","open-source","rails","ruby"],"visibility":"public","forks":4150,"open_issues":606,"watchers":22508,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/forem/forem/pulls/15249","html_url":"https://github.com/forem/forem/pull/15249","diff_url":"https://github.com/forem/forem/pull/15249.diff","patch_url":"https://github.com/forem/forem/pull/15249.patch","merged_at":"2021-12-09T20:40:17Z"},"body":"## What type of PR is this? (check all applicable)\r\n\r\n- [ ] Refactor\r\n- [ ] Feature\r\n- [x] Bug Fix\r\n- [ ] Optimization\r\n- [ ] Documentation Update\r\n\r\n## Description\r\n\r\nSolves an issue where a moderator 'vomit' action on a subsequently\r\ndeleted user causes the privileged reactions page to raise a\r\nNoMethodError accessing the reactable's details.\r\n\r\nI tried to accomplish this in the controller but it seems the\r\n`paginate` helper requires a relation rather than an array.\r\n\r\n## Related Tickets & Documents\r\n\r\n## QA Instructions, Screenshots, Recordings\r\n\r\nSimilar to #15243 - create a user vomit reaction, and destroy the user.\r\n\r\nView the privileged reactions page.\r\n\r\non main:\r\n\r\nNoMethodError at /admin/moderation/privileged_reactions\r\n\r\n![Screenshot from 2021-11-01 14-02-01](https://user-images.githubusercontent.com/1237369/139726495-c919128e-238a-48ed-a431-6688e7fd6a68.png)\r\n\r\nThis branch:\r\n\r\n![Screenshot from 2021-11-01 14-02-33](https://user-images.githubusercontent.com/1237369/139726573-26f854d3-de87-4fd0-aa03-8e8eb54e53e3.png)\r\n\r\n\r\n### UI accessibility concerns?\r\n\r\nNone\r\n\r\n## Added/updated tests?\r\n\r\n- [ ] Yes\r\n- [x] No, and this is why: bugfix\r\n- [ ] I need help with writing tests\r\n\r\n## [Forem core team only] How will this change be communicated?\r\n\r\n_Will this PR introduce a change that impacts Forem members or creators, the\r\ndevelopment process, or any of our internal teams? If so, please note how you\r\nwill share this change with the people who need to know about it._\r\n\r\n- [ ] I've updated the [Developer Docs](https://developers.forem.com) or\r\n      [Storybook](https://storybook.forem.com/) (for Crayons components)\r\n- [ ] This PR changes the Forem platform and our documentation needs to be\r\n      updated. I have filled out the\r\n      [Changes Requested](https://github.com/forem/admin-docs/issues/new?assignees=&labels=&template=changes_requested.md)\r\n      issue template so Community Success can help update the Admin Docs\r\n      appropriately.\r\n- [ ] I've updated the README or added inline documentation\r\n- [ ] I've added an entry to\r\n      [`CHANGELOG.md`](https://github.com/forem/forem/tree/main/CHANGELOG.md)\r\n- [ ] I will share this change in a [Changelog](https://forem.dev/t/changelog)\r\n      or in a [forem.dev](http://forem.dev) post\r\n- [ ] I will share this change internally with the appropriate teams\r\n- [ ] I'm not sure how best to communicate this change and need help\r\n- [ ] This change does not need to be communicated, and this is why not: _please\r\n      replace this line with details on why this change doesn't need to be\r\n      shared_\r\n\r\n## [optional] Are there any post deployment tasks we need to perform?\r\n\r\n## [optional] What gif best describes this PR or how it makes you feel?\r\n\r\n![alt_text](gif_link)\r\n","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/15249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/forem/forem/issues/15249/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":5743445671,"node_id":"AE_lADOBGPKJs4-EryjzwAAAAFWVgan","url":"https://api.github.com/repos/forem/forem/issues/events/5743445671","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-12-09T20:40:52Z","assignee":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":5743648985,"node_id":"REFE_lADOBGPKJs4-EryjzwAAAAFWWSDZ","url":"https://api.github.com/repos/forem/forem/issues/events/5743648985","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0c0544ab4610710f0973e336084869ae9ec2ad0d","commit_url":"https://api.github.com/repos/forem/forem/commits/0c0544ab4610710f0973e336084869ae9ec2ad0d","created_at":"2021-12-09T21:19:54Z","performed_via_github_app":null},{"actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T21:43:34Z","updated_at":"2021-12-09T21:43:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/forem/forem/issues/15724","repository_url":"https://api.github.com/repos/forem/forem","labels_url":"https://api.github.com/repos/forem/forem/issues/15724/labels{/name}","comments_url":"https://api.github.com/repos/forem/forem/issues/15724/comments","events_url":"https://api.github.com/repos/forem/forem/issues/15724/events","html_url":"https://github.com/forem/forem/pull/15724","id":1076069941,"node_id":"PR_kwDOBGPKJs4vo7iX","number":15724,"title":"Remove reactions to a user when deleting the user","user":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1110193938,"node_id":"MDU6TGFiZWwxMTEwMTkzOTM4","url":"https://api.github.com/repos/forem/forem/labels/PR:%20reviewed-approved","name":"PR: reviewed-approved","color":"6a737d","default":false,"description":"bot applied label for PR's where reviewer approves changes"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-09T21:43:34Z","updated_at":"2022-07-06T22:24:49Z","closed_at":"2021-12-10T17:24:23Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":73648678,"node_id":"MDEwOlJlcG9zaXRvcnk3MzY0ODY3OA==","name":"forem","full_name":"forem/forem","private":false,"owner":{"login":"forem","id":65030610,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1MDMwNjEw","avatar_url":"https://avatars.githubusercontent.com/u/65030610?v=4","gravatar_id":"","url":"https://api.github.com/users/forem","html_url":"https://github.com/forem","followers_url":"https://api.github.com/users/forem/followers","following_url":"https://api.github.com/users/forem/following{/other_user}","gists_url":"https://api.github.com/users/forem/gists{/gist_id}","starred_url":"https://api.github.com/users/forem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forem/subscriptions","organizations_url":"https://api.github.com/users/forem/orgs","repos_url":"https://api.github.com/users/forem/repos","events_url":"https://api.github.com/users/forem/events{/privacy}","received_events_url":"https://api.github.com/users/forem/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/forem/forem","description":"For empowering community ðŸŒ±","fork":false,"url":"https://api.github.com/repos/forem/forem","forks_url":"https://api.github.com/repos/forem/forem/forks","keys_url":"https://api.github.com/repos/forem/forem/keys{/key_id}","collaborators_url":"https://api.github.com/repos/forem/forem/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/forem/forem/teams","hooks_url":"https://api.github.com/repos/forem/forem/hooks","issue_events_url":"https://api.github.com/repos/forem/forem/issues/events{/number}","events_url":"https://api.github.com/repos/forem/forem/events","assignees_url":"https://api.github.com/repos/forem/forem/assignees{/user}","branches_url":"https://api.github.com/repos/forem/forem/branches{/branch}","tags_url":"https://api.github.com/repos/forem/forem/tags","blobs_url":"https://api.github.com/repos/forem/forem/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/forem/forem/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/forem/forem/git/refs{/sha}","trees_url":"https://api.github.com/repos/forem/forem/git/trees{/sha}","statuses_url":"https://api.github.com/repos/forem/forem/statuses/{sha}","languages_url":"https://api.github.com/repos/forem/forem/languages","stargazers_url":"https://api.github.com/repos/forem/forem/stargazers","contributors_url":"https://api.github.com/repos/forem/forem/contributors","subscribers_url":"https://api.github.com/repos/forem/forem/subscribers","subscription_url":"https://api.github.com/repos/forem/forem/subscription","commits_url":"https://api.github.com/repos/forem/forem/commits{/sha}","git_commits_url":"https://api.github.com/repos/forem/forem/git/commits{/sha}","comments_url":"https://api.github.com/repos/forem/forem/comments{/number}","issue_comment_url":"https://api.github.com/repos/forem/forem/issues/comments{/number}","contents_url":"https://api.github.com/repos/forem/forem/contents/{+path}","compare_url":"https://api.github.com/repos/forem/forem/compare/{base}...{head}","merges_url":"https://api.github.com/repos/forem/forem/merges","archive_url":"https://api.github.com/repos/forem/forem/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/forem/forem/downloads","issues_url":"https://api.github.com/repos/forem/forem/issues{/number}","pulls_url":"https://api.github.com/repos/forem/forem/pulls{/number}","milestones_url":"https://api.github.com/repos/forem/forem/milestones{/number}","notifications_url":"https://api.github.com/repos/forem/forem/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/forem/forem/labels{/name}","releases_url":"https://api.github.com/repos/forem/forem/releases{/id}","deployments_url":"https://api.github.com/repos/forem/forem/deployments","created_at":"2016-11-13T23:02:13Z","updated_at":"2025-11-10T03:30:54Z","pushed_at":"2025-11-08T23:08:51Z","git_url":"git://github.com/forem/forem.git","ssh_url":"git@github.com:forem/forem.git","clone_url":"https://github.com/forem/forem.git","svn_url":"https://github.com/forem/forem","homepage":"https://forem.com","size":1724987,"stargazers_count":22508,"watchers_count":22508,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":4150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":606,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["community","discussion","feedback","hacktoberfest","open-source","rails","ruby"],"visibility":"public","forks":4150,"open_issues":606,"watchers":22508,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/forem/forem/pulls/15724","html_url":"https://github.com/forem/forem/pull/15724","diff_url":"https://github.com/forem/forem/pull/15724.diff","patch_url":"https://github.com/forem/forem/pull/15724.patch","merged_at":"2021-12-10T17:24:23Z"},"body":"## What type of PR is this? (check all applicable)\r\n\r\n- [ ] Refactor\r\n- [ ] Feature\r\n- [x] Bug Fix\r\n- [ ] Optimization\r\n- [ ] Documentation Update\r\n\r\n## Description\r\n\r\nWhen a moderator has reacted _to_ a user, and the user is deleted, remove the (now unneeded) reaction.\r\n\r\nWe had been removing the user's reactions (created by the user, not applying to the user) already.\r\n\r\n## Related Tickets & Documents\r\n\r\nFixes #15245, when combined with a data update script.\r\n\r\n## QA Instructions, Screenshots, Recordings\r\n\r\nFlag a user. Delete the flagged user. Visit http://localhost:3000/admin/moderation/privileged_reactions\r\n\r\n(this had been \"hidden\" already by [another PR](https://github.com/forem/forem/pull/15249) so no error is expected in main either)\r\n\r\nIdeally the added test case is sufficient demonstration.\r\n\r\n### UI accessibility concerns?\r\n\r\nNone\r\n\r\n## Added/updated tests?\r\n\r\n- [x] Yes\r\n\r\n## [Forem core team only] How will this change be communicated?\r\n\r\n_Will this PR introduce a change that impacts Forem members or creators, the\r\ndevelopment process, or any of our internal teams? If so, please note how you\r\nwill share this change with the people who need to know about it._\r\n\r\n- [x] I will share this change internally with the appropriate teams\r\n\r\n","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/15724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/forem/forem/issues/15724/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":5749144561,"node_id":"CE_lADOBGPKJs4-EryjzwAAAAFWrPvx","url":"https://api.github.com/repos/forem/forem/issues/events/5749144561","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-12-10T17:24:23Z","state_reason":null,"performed_via_github_app":null},{"id":5749145221,"node_id":"REFE_lADOBGPKJs4-EryjzwAAAAFWrP6F","url":"https://api.github.com/repos/forem/forem/issues/events/5749145221","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"421dad29009073e94b9b82f79d41250e8eef4628","commit_url":"https://api.github.com/repos/forem/forem/commits/421dad29009073e94b9b82f79d41250e8eef4628","created_at":"2021-12-10T17:24:29Z","performed_via_github_app":null}]