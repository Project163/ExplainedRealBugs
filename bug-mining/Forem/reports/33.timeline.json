[{"url":"https://api.github.com/repos/forem/forem/issues/comments/1073076164","html_url":"https://github.com/forem/forem/issues/16927#issuecomment-1073076164","issue_url":"https://api.github.com/repos/forem/forem/issues/16927","id":1073076164,"node_id":"IC_kwDOBGPKJs4_9dfE","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-03-19T20:28:05Z","updated_at":"2022-03-19T20:28:05Z","body":"Thanks for the issue, we will take it into consideration! Our team of engineers is busy working on many types of features, please give us time to get back to you.\n\nFeature requests that require more discussion may be closed. Read more about our [feature request process](https://forem.dev/foremteam/internal-rfc-process-and-forem-dev-discussions-3gl4) on forem.dev.\n\nTo our amazing contributors: issues labeled `type: bug` are always up for grabs, but for feature requests, please wait until we add a `ready for dev` before starting to work on it.\n\nTo claim an issue to work on, please leave a comment. If you've claimed the issue and need help, please ping @forem/oss. The OSS Community Manager or the engineers on OSS rotation will follow up.\n\nFor full info on how to contribute, please check out our [contributors guide](https://github.com/forem/forem/blob/main/CONTRIBUTING.md).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/comments/1073076164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/forem/forem/issues/comments/1080774660","html_url":"https://github.com/forem/forem/issues/16927#issuecomment-1080774660","issue_url":"https://api.github.com/repos/forem/forem/issues/16927","id":1080774660,"node_id":"IC_kwDOBGPKJs5Aa1AE","user":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-28T15:09:04Z","updated_at":"2022-03-28T15:09:04Z","body":"I'm able to reproduce this locally (outside of docker, running the rails app on port 3000)\r\n\r\n```\r\n~/src/forem$ curl -X POST -H \"Content-Type: application/json\" -H \"api-key: $API_KEY\"  -d '{\"listing\":{\"title\":\"Title\",\"body_markdown\":\"Body\",\"category\":\"cfp\"}}'   http://localhost:3000/api/listingsNoMethodError at /api/listings\r\n==============================\r\n\r\nundefined method `delete' for nil:NilClass\r\n\r\n> To access an interactive console with this error, point your browser to: /__better_errors\r\n\r\n\r\napp/controllers/concerns/listings_toolkit.rb, line 40\r\n-----------------------------------------------------\r\n\r\n   35       expires_at location organization_id action\r\n   36     ].freeze\r\n   37   \r\n   38     # Filter for a set of known safe params\r\n   39     def listing_params\r\n>  40       tags = params[\"listing\"].delete(\"tags\")\r\n   41       if tags.present?\r\n   42         params[\"listing\"][\"tag_list\"] = tags.join(\", \")\r\n   43       end\r\n   44       params.require(:listing).permit(ALLOWED_PARAMS)\r\n   45     end\r\n```\r\n\r\nI used nearly the exact curl example from the api docs (I added $API_KEY in place of API_KEY so the shell would expand the header value, and changed the target from https://dev.to/api to http://localhost:3000/api). This looks like it rules out the docker setup (and points to either a bug in forem's api for this use case, or a drift in the api requirements and the documentation). \r\n\r\nPutting a breakpoint in that location (in the listings toolkit helper, just before the tags assignment where the error occurs) shows params has a key \"listings\", and that \"listings\" is nil.\r\n\r\n```ruby\r\n[10] pry(#<Api::V0::ListingsController>)> params\r\n=> #<ActionController::Parameters {\"listing\"=>nil, \"locale\"=>nil, \"format\"=>\"json\", \"controller\"=>\"api/v0/listings\", \"action\"=>\"create\"} permitted: false>\r\n```\r\n\r\n Checking caller indicates the listings controller's listing_params calls the toolkits listing_params:\r\n\r\n```\r\n \"/home/djuber/src/forem/app/controllers/concerns/listings_toolkit.rb:40:in `listing_params'\",\r\n \"/home/djuber/src/forem/app/controllers/api/v0/listings_controller.rb:100:in `listing_params'\",\r\n \"/home/djuber/src/forem/app/controllers/concerns/listings_toolkit.rb:8:in `create'\",\r\n```\r\n\r\nChecking the [api controller's method](https://github.com/forem/forem/blob/main/app/controllers/api/v0/listings_controller.rb#L92-L101) - it looks like this is related to a renaming (a while back) of the Listings model from the ClassifiedListings model, the code has a comment about an existing public api using \"classified_listings\" as the top level key for the json body, and assigns from there to listings (which is what the rest of the app uses). I understand the reasoning there - you don't want your internal refactoring/simplification to break a published api endpoint (someone might have written automation on top of it).\r\n\r\nI think a reasonable fix for this would be to use a conditional assignment to accept either?\r\n\r\n```ruby\r\n        params[\"listing\"] ||= params[\"classified_listing\"]\r\n```\r\n\r\nThat would set \"listing\" only if it were blank.\r\n\r\nThe alternate fix would be to change the api docs to reflect the legacy name, but that feels like it entrenches a requirement based on names that existed several years ago.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/comments/1080774660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6319402964,"node_id":"AE_lADOBGPKJs5F_yS5zwAAAAF4qm_U","url":"https://api.github.com/repos/forem/forem/issues/events/6319402964","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2022-03-28T15:09:14Z","assignee":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":6319403603,"node_id":"LE_lADOBGPKJs5F_yS5zwAAAAF4qnJT","url":"https://api.github.com/repos/forem/forem/issues/events/6319403603","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-28T15:09:18Z","label":{"name":"area: API","color":"2a75b2"},"performed_via_github_app":null},{"id":6319404408,"node_id":"LE_lADOBGPKJs5F_yS5zwAAAAF4qnV4","url":"https://api.github.com/repos/forem/forem/issues/events/6319404408","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-28T15:09:25Z","label":{"name":"bug","color":"E99695"},"performed_via_github_app":null},{"id":6319511108,"node_id":"REFE_lADOBGPKJs5F_yS5zwAAAAF4rBZE","url":"https://api.github.com/repos/forem/forem/issues/events/6319511108","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e511acb57ab024eb1ee28f93a93cc3bd3e415553","commit_url":"https://api.github.com/repos/forem/forem/commits/e511acb57ab024eb1ee28f93a93cc3bd3e415553","created_at":"2022-03-28T15:22:01Z","performed_via_github_app":null},{"actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-28T15:28:49Z","updated_at":"2022-03-28T15:28:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/forem/forem/issues/17021","repository_url":"https://api.github.com/repos/forem/forem","labels_url":"https://api.github.com/repos/forem/forem/issues/17021/labels{/name}","comments_url":"https://api.github.com/repos/forem/forem/issues/17021/comments","events_url":"https://api.github.com/repos/forem/forem/issues/17021/events","html_url":"https://github.com/forem/forem/pull/17021","id":1183612062,"node_id":"PR_kwDOBGPKJs41KjMi","number":17021,"title":"Prefer \"listing\" to \"classified_listing\" in the api","user":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1123882148,"node_id":"MDU6TGFiZWwxMTIzODgyMTQ4","url":"https://api.github.com/repos/forem/forem/labels/PR:%20merged","name":"PR: merged","color":"6a737d","default":false,"description":"bot applied label for PR's that are merged"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-28T15:28:49Z","updated_at":"2022-07-06T22:25:40Z","closed_at":"2022-03-28T18:40:01Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":73648678,"node_id":"MDEwOlJlcG9zaXRvcnk3MzY0ODY3OA==","name":"forem","full_name":"forem/forem","private":false,"owner":{"login":"forem","id":65030610,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1MDMwNjEw","avatar_url":"https://avatars.githubusercontent.com/u/65030610?v=4","gravatar_id":"","url":"https://api.github.com/users/forem","html_url":"https://github.com/forem","followers_url":"https://api.github.com/users/forem/followers","following_url":"https://api.github.com/users/forem/following{/other_user}","gists_url":"https://api.github.com/users/forem/gists{/gist_id}","starred_url":"https://api.github.com/users/forem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forem/subscriptions","organizations_url":"https://api.github.com/users/forem/orgs","repos_url":"https://api.github.com/users/forem/repos","events_url":"https://api.github.com/users/forem/events{/privacy}","received_events_url":"https://api.github.com/users/forem/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/forem/forem","description":"For empowering community ðŸŒ±","fork":false,"url":"https://api.github.com/repos/forem/forem","forks_url":"https://api.github.com/repos/forem/forem/forks","keys_url":"https://api.github.com/repos/forem/forem/keys{/key_id}","collaborators_url":"https://api.github.com/repos/forem/forem/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/forem/forem/teams","hooks_url":"https://api.github.com/repos/forem/forem/hooks","issue_events_url":"https://api.github.com/repos/forem/forem/issues/events{/number}","events_url":"https://api.github.com/repos/forem/forem/events","assignees_url":"https://api.github.com/repos/forem/forem/assignees{/user}","branches_url":"https://api.github.com/repos/forem/forem/branches{/branch}","tags_url":"https://api.github.com/repos/forem/forem/tags","blobs_url":"https://api.github.com/repos/forem/forem/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/forem/forem/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/forem/forem/git/refs{/sha}","trees_url":"https://api.github.com/repos/forem/forem/git/trees{/sha}","statuses_url":"https://api.github.com/repos/forem/forem/statuses/{sha}","languages_url":"https://api.github.com/repos/forem/forem/languages","stargazers_url":"https://api.github.com/repos/forem/forem/stargazers","contributors_url":"https://api.github.com/repos/forem/forem/contributors","subscribers_url":"https://api.github.com/repos/forem/forem/subscribers","subscription_url":"https://api.github.com/repos/forem/forem/subscription","commits_url":"https://api.github.com/repos/forem/forem/commits{/sha}","git_commits_url":"https://api.github.com/repos/forem/forem/git/commits{/sha}","comments_url":"https://api.github.com/repos/forem/forem/comments{/number}","issue_comment_url":"https://api.github.com/repos/forem/forem/issues/comments{/number}","contents_url":"https://api.github.com/repos/forem/forem/contents/{+path}","compare_url":"https://api.github.com/repos/forem/forem/compare/{base}...{head}","merges_url":"https://api.github.com/repos/forem/forem/merges","archive_url":"https://api.github.com/repos/forem/forem/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/forem/forem/downloads","issues_url":"https://api.github.com/repos/forem/forem/issues{/number}","pulls_url":"https://api.github.com/repos/forem/forem/pulls{/number}","milestones_url":"https://api.github.com/repos/forem/forem/milestones{/number}","notifications_url":"https://api.github.com/repos/forem/forem/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/forem/forem/labels{/name}","releases_url":"https://api.github.com/repos/forem/forem/releases{/id}","deployments_url":"https://api.github.com/repos/forem/forem/deployments","created_at":"2016-11-13T23:02:13Z","updated_at":"2025-11-10T03:30:54Z","pushed_at":"2025-11-08T23:08:51Z","git_url":"git://github.com/forem/forem.git","ssh_url":"git@github.com:forem/forem.git","clone_url":"https://github.com/forem/forem.git","svn_url":"https://github.com/forem/forem","homepage":"https://forem.com","size":1724987,"stargazers_count":22508,"watchers_count":22508,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":4150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":606,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["community","discussion","feedback","hacktoberfest","open-source","rails","ruby"],"visibility":"public","forks":4150,"open_issues":606,"watchers":22508,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/forem/forem/pulls/17021","html_url":"https://github.com/forem/forem/pull/17021","diff_url":"https://github.com/forem/forem/pull/17021.diff","patch_url":"https://github.com/forem/forem/pull/17021.patch","merged_at":"2022-03-28T18:40:00Z"},"body":"## What type of PR is this? (check all applicable)\r\n\r\n- [ ] Refactor\r\n- [ ] Feature\r\n- [x] Bug Fix\r\n- [ ] Optimization\r\n- [x] Documentation Update\r\n\r\n## Description\r\n\r\nThis aligns our behavior with some of [the documentation examples](https://developers.forem.com/api#operation/createListing), while permitting the original name (we don't break the api for existing users).\r\n\r\nThe renaming [changed the api docs](https://github.com/forem/forem/pull/7910/files#diff-b4ac45b1fc06ab3cfbce2fe69b38d654567302a259e4b867ad82bf84a241e0f0), but the api internals were changed to continue to [use the old name](https://github.com/forem/forem/commit/6f579c6c6f68d77e91eed573b309ae1d55d70ca6)\r\n\r\n## Related Tickets & Documents\r\n\r\n- Related Issue #7910\r\n- Closes #16927 \r\n\r\n## QA Instructions, Screenshots, Recordings\r\n\r\nI updated the request spec to use the new name by default and added a single example falling back on the old name when the new one is not provided, so there should be adequate coverage.\r\n\r\nThe failing example in the original issue works correctly on this branch, rather than raising a no method error (as it does on main):\r\n\r\n```\r\n$ curl -X POST -H \"Content-Type: application/json\" -H \"api-key: $API_KEY\"  -d '{\"listing\":{\"title\":\"Title\",\"body_markdown\":\"Body\",\"category\":\"cfp\"}}'   http://localhost:3000/api/listings\r\n\r\n{\"type_of\":\"listing\",\"id\":13,\"title\":\"Title\",\"slug\":\"title-18gj\",\"body_markdown\":\"Body\",\"category\":\"cfp\",\"processed_html\":\"\\u003cp\\u003eBody\\u003c/p\\u003e\\n\",\"published\":true,\"listing_category_id\":1,\"tag_list\":\"\",\"tags\":[],\"created_at\":\"2022-03-28T15:26:23Z\",\"user\":{\"name\":\"Admin \\\"The \\\\:/ Administrator\\\" McAdmin\",\"username\":\"admin_mcadmin\",\"twitter_username\":null,\"github_username\":null,\"website_url\":\"http://erdman-cremin.co/alexis\",\"profile_image\":\"/uploads/user/profile_image/11/be334568-b75e-4e5e-aada-760dca514f37.png\",\"profile_image_90\":\"/uploads/user/profile_image/11/be334568-b75e-4e5e-aada-760dca514f37.png\"}}\r\n```\r\n\r\n### UI accessibility concerns?\r\n\r\nNone\r\n\r\n## Added/updated tests?\r\n\r\n- [x] Yes\r\n- [ ] No, and this is why: _please replace this line with details on why tests\r\n      have not been included_\r\n- [ ] I need help with writing tests\r\n\r\n## [Forem core team only] How will this change be communicated?\r\n\r\n_Will this PR introduce a change that impacts Forem members or creators, the\r\ndevelopment process, or any of our internal teams? If so, please note how you\r\nwill share this change with the people who need to know about it._\r\n- [x] This change does not need to be communicated, and this is why not: this brings the api behavior inline with the existing documentation\r\n\r\n## [optional] What gif best describes this PR or how it makes you feel?\r\n\r\n![whoops](https://user-images.githubusercontent.com/1237369/160433131-5e7c37da-7efa-42ef-ae4f-9d028335d1d7.gif)\r\n","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/17021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/forem/forem/issues/17021/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/forem/forem/issues/comments/1080804672","html_url":"https://github.com/forem/forem/issues/16927#issuecomment-1080804672","issue_url":"https://api.github.com/repos/forem/forem/issues/16927","id":1080804672,"node_id":"IC_kwDOBGPKJs5Aa8VA","user":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-28T15:34:28Z","updated_at":"2022-03-28T15:34:28Z","body":"@karvounis, thank you for this bug report, it really made triaging this issue fast and pleasant, since you included all the relevant information (what api request you sent, which instructions you were following, how you were running the software, what error you saw, what you expected to see).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/comments/1080804672/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6319609582,"node_id":"MEE_lADOBGPKJs5F_yS5zwAAAAF4rZbu","url":"https://api.github.com/repos/forem/forem/issues/events/6319609582","actor":{"login":"karvounis","id":9452845,"node_id":"MDQ6VXNlcjk0NTI4NDU=","avatar_url":"https://avatars.githubusercontent.com/u/9452845?v=4","gravatar_id":"","url":"https://api.github.com/users/karvounis","html_url":"https://github.com/karvounis","followers_url":"https://api.github.com/users/karvounis/followers","following_url":"https://api.github.com/users/karvounis/following{/other_user}","gists_url":"https://api.github.com/users/karvounis/gists{/gist_id}","starred_url":"https://api.github.com/users/karvounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karvounis/subscriptions","organizations_url":"https://api.github.com/users/karvounis/orgs","repos_url":"https://api.github.com/users/karvounis/repos","events_url":"https://api.github.com/users/karvounis/events{/privacy}","received_events_url":"https://api.github.com/users/karvounis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-03-28T15:34:29Z","performed_via_github_app":null},{"id":6319609589,"node_id":"SE_lADOBGPKJs5F_yS5zwAAAAF4rZb1","url":"https://api.github.com/repos/forem/forem/issues/events/6319609589","actor":{"login":"karvounis","id":9452845,"node_id":"MDQ6VXNlcjk0NTI4NDU=","avatar_url":"https://avatars.githubusercontent.com/u/9452845?v=4","gravatar_id":"","url":"https://api.github.com/users/karvounis","html_url":"https://github.com/karvounis","followers_url":"https://api.github.com/users/karvounis/followers","following_url":"https://api.github.com/users/karvounis/following{/other_user}","gists_url":"https://api.github.com/users/karvounis/gists{/gist_id}","starred_url":"https://api.github.com/users/karvounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karvounis/subscriptions","organizations_url":"https://api.github.com/users/karvounis/orgs","repos_url":"https://api.github.com/users/karvounis/repos","events_url":"https://api.github.com/users/karvounis/events{/privacy}","received_events_url":"https://api.github.com/users/karvounis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-03-28T15:34:29Z","performed_via_github_app":null},{"id":6320862239,"node_id":"CE_lADOBGPKJs5F_yS5zwAAAAF4wLQf","url":"https://api.github.com/repos/forem/forem/issues/events/6320862239","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-03-28T18:40:01Z","state_reason":null,"performed_via_github_app":null},{"id":6320862401,"node_id":"REFE_lADOBGPKJs5F_yS5zwAAAAF4wLTB","url":"https://api.github.com/repos/forem/forem/issues/events/6320862401","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6c319b8eb79da534b093b33cc6c31d61c846c055","commit_url":"https://api.github.com/repos/forem/forem/commits/6c319b8eb79da534b093b33cc6c31d61c846c055","created_at":"2022-03-28T18:40:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/forem/forem/issues/comments/1081458771","html_url":"https://github.com/forem/forem/issues/16927#issuecomment-1081458771","issue_url":"https://api.github.com/repos/forem/forem/issues/16927","id":1081458771,"node_id":"IC_kwDOBGPKJs5AdcBT","user":{"login":"karvounis","id":9452845,"node_id":"MDQ6VXNlcjk0NTI4NDU=","avatar_url":"https://avatars.githubusercontent.com/u/9452845?v=4","gravatar_id":"","url":"https://api.github.com/users/karvounis","html_url":"https://github.com/karvounis","followers_url":"https://api.github.com/users/karvounis/followers","following_url":"https://api.github.com/users/karvounis/following{/other_user}","gists_url":"https://api.github.com/users/karvounis/gists{/gist_id}","starred_url":"https://api.github.com/users/karvounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karvounis/subscriptions","organizations_url":"https://api.github.com/users/karvounis/orgs","repos_url":"https://api.github.com/users/karvounis/repos","events_url":"https://api.github.com/users/karvounis/events{/privacy}","received_events_url":"https://api.github.com/users/karvounis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-29T06:35:27Z","updated_at":"2022-03-29T06:35:27Z","body":"Hey @djuber thank you for your swift reply and fix! That was impressive!\r\n\r\nI am also glad that you found the bug report comprehensive and helpful.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/comments/1081458771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"karvounis","id":9452845,"node_id":"MDQ6VXNlcjk0NTI4NDU=","avatar_url":"https://avatars.githubusercontent.com/u/9452845?v=4","gravatar_id":"","url":"https://api.github.com/users/karvounis","html_url":"https://github.com/karvounis","followers_url":"https://api.github.com/users/karvounis/followers","following_url":"https://api.github.com/users/karvounis/following{/other_user}","gists_url":"https://api.github.com/users/karvounis/gists{/gist_id}","starred_url":"https://api.github.com/users/karvounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karvounis/subscriptions","organizations_url":"https://api.github.com/users/karvounis/orgs","repos_url":"https://api.github.com/users/karvounis/repos","events_url":"https://api.github.com/users/karvounis/events{/privacy}","received_events_url":"https://api.github.com/users/karvounis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6323790660,"node_id":"MEE_lADOBGPKJs5F_yS5zwAAAAF47WNE","url":"https://api.github.com/repos/forem/forem/issues/events/6323790660","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-03-29T06:35:27Z","performed_via_github_app":null},{"id":6323790666,"node_id":"SE_lADOBGPKJs5F_yS5zwAAAAF47WNK","url":"https://api.github.com/repos/forem/forem/issues/events/6323790666","actor":{"login":"djuber","id":1237369,"node_id":"MDQ6VXNlcjEyMzczNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1237369?v=4","gravatar_id":"","url":"https://api.github.com/users/djuber","html_url":"https://github.com/djuber","followers_url":"https://api.github.com/users/djuber/followers","following_url":"https://api.github.com/users/djuber/following{/other_user}","gists_url":"https://api.github.com/users/djuber/gists{/gist_id}","starred_url":"https://api.github.com/users/djuber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djuber/subscriptions","organizations_url":"https://api.github.com/users/djuber/orgs","repos_url":"https://api.github.com/users/djuber/repos","events_url":"https://api.github.com/users/djuber/events{/privacy}","received_events_url":"https://api.github.com/users/djuber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-03-29T06:35:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/forem/forem/issues/comments/1081480327","html_url":"https://github.com/forem/forem/issues/16927#issuecomment-1081480327","issue_url":"https://api.github.com/repos/forem/forem/issues/16927","id":1081480327,"node_id":"IC_kwDOBGPKJs5AdhSH","user":{"login":"karvounis","id":9452845,"node_id":"MDQ6VXNlcjk0NTI4NDU=","avatar_url":"https://avatars.githubusercontent.com/u/9452845?v=4","gravatar_id":"","url":"https://api.github.com/users/karvounis","html_url":"https://github.com/karvounis","followers_url":"https://api.github.com/users/karvounis/followers","following_url":"https://api.github.com/users/karvounis/following{/other_user}","gists_url":"https://api.github.com/users/karvounis/gists{/gist_id}","starred_url":"https://api.github.com/users/karvounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karvounis/subscriptions","organizations_url":"https://api.github.com/users/karvounis/orgs","repos_url":"https://api.github.com/users/karvounis/repos","events_url":"https://api.github.com/users/karvounis/events{/privacy}","received_events_url":"https://api.github.com/users/karvounis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-29T06:51:12Z","updated_at":"2022-03-29T06:51:12Z","body":"I can confirm that I am able to create a listing now through the API. Cheers!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/forem/forem/issues/comments/1081480327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"karvounis","id":9452845,"node_id":"MDQ6VXNlcjk0NTI4NDU=","avatar_url":"https://avatars.githubusercontent.com/u/9452845?v=4","gravatar_id":"","url":"https://api.github.com/users/karvounis","html_url":"https://github.com/karvounis","followers_url":"https://api.github.com/users/karvounis/followers","following_url":"https://api.github.com/users/karvounis/following{/other_user}","gists_url":"https://api.github.com/users/karvounis/gists{/gist_id}","starred_url":"https://api.github.com/users/karvounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karvounis/subscriptions","organizations_url":"https://api.github.com/users/karvounis/orgs","repos_url":"https://api.github.com/users/karvounis/repos","events_url":"https://api.github.com/users/karvounis/events{/privacy}","received_events_url":"https://api.github.com/users/karvounis/received_events","type":"User","user_view_type":"public","site_admin":false}}]