diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportDescriptionFactory.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportDescriptionFactory.java
index 280457143..2fb11fd0c 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportDescriptionFactory.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportDescriptionFactory.java
@@ -31,17 +31,29 @@ import org.apache.axis2.description.ParameterInclude;
 import org.apache.axis2.description.TransportInDescription;
 import org.apache.axis2.description.TransportOutDescription;
 import org.apache.synapse.transport.testkit.TransportDescriptionFactory;
+import org.apache.synapse.transport.testkit.name.Key;
 import org.mockejb.jndi.MockContextFactory;
 
 public class JMSTransportDescriptionFactory implements TransportDescriptionFactory {
     private static final OMFactory factory = OMAbstractFactory.getOMFactory();
     
+    private final boolean cfOnSender;
+    
+    public JMSTransportDescriptionFactory(boolean cfOnSender) {
+        this.cfOnSender = cfOnSender;
+    }
+
     @SuppressWarnings("unused")
     // We implicitly depend on the environment; make this explicit
     private void setUp(JMSTestEnvironment env) {
         
     }
     
+    @Key("cfOnSender")
+    public boolean isCfOnSender() {
+        return cfOnSender;
+    }
+
     private OMElement createParameterElement(String name, String value) {
         OMElement element = factory.createOMElement(new QName("parameter"));
         element.addAttribute("name", name, null);
@@ -75,7 +87,9 @@ public class JMSTransportDescriptionFactory implements TransportDescriptionFacto
     
     public TransportOutDescription createTransportOutDescription() throws Exception {
         TransportOutDescription trpOutDesc = new TransportOutDescription(JMSSender.TRANSPORT_NAME);
-//        setupTransport(trpOutDesc);
+        if (cfOnSender) {
+            setupTransport(trpOutDesc);
+        }
         trpOutDesc.setSender(new JMSSender());
         return trpOutDesc;
     }
diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportTest.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportTest.java
index 5574231b3..f3af166a0 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportTest.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSTransportTest.java
@@ -49,7 +49,7 @@ public class JMSTransportTest extends TestCase {
         
         TransportTestSuiteBuilder builder = new TransportTestSuiteBuilder(suite);
 
-        TransportDescriptionFactory tdf = new JMSTransportDescriptionFactory();
+        TransportDescriptionFactory tdf = new JMSTransportDescriptionFactory(false);
         JMSTestEnvironment[] environments = new JMSTestEnvironment[] { new QpidTestEnvironment(), new ActiveMQTestEnvironment() };
         
         for (JMSTestEnvironment env : environments) {
