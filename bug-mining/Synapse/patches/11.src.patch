diff --git a/java/modules/nhttp/src/org/apache/axis2/transport/nhttp/ClientWorker.java b/java/modules/nhttp/src/org/apache/axis2/transport/nhttp/ClientWorker.java
index 793da433b..79d2ff08c 100644
--- a/java/modules/nhttp/src/org/apache/axis2/transport/nhttp/ClientWorker.java
+++ b/java/modules/nhttp/src/org/apache/axis2/transport/nhttp/ClientWorker.java
@@ -30,6 +30,7 @@ import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 import org.apache.http.HttpResponse;
 import org.apache.http.Header;
+import org.apache.http.protocol.HTTP;
 
 import javax.xml.stream.XMLStreamException;
 import java.io.InputStream;
@@ -119,7 +120,7 @@ public class ClientWorker implements Runnable {
             envelope = TransportUtils.createSOAPMessage(
                 responseMsgCtx,
                 in,
-                outMsgCtx.getEnvelope().getNamespace().getNamespaceURI());
+                response.getFirstHeader(HTTP.CONTENT_TYPE).getValue());
             responseMsgCtx.setEnvelope(envelope);
 
         } catch (AxisFault af) {
diff --git a/java/modules/samples/src/main/scripts/axis2server.sh b/java/modules/samples/src/main/scripts/axis2server.sh
index 62b4bf7d3..251643342 100644
--- a/java/modules/samples/src/main/scripts/axis2server.sh
+++ b/java/modules/samples/src/main/scripts/axis2server.sh
@@ -107,5 +107,18 @@ if [ "$1" = "-port" ]; then
   PORT="-Dport=$2"
 fi
 
-java $PORT -Djava.endorsed.dirs=$AXIS2_ENDORSED -classpath $AXIS2_CLASSPATH samples.util.SampleAxis2Server \
--repo $AXIS2_HOME/repository -conf $AXIS2_HOME/repository/conf/axis2.xml
+if [ "$3" = "-port" ]; then
+  PORT="-Dport=$4"
+fi
+
+if [ "$1" = "-xdebug" ]; then
+  XDEBUG="-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,server=y,address=8000"
+fi
+
+if [ "$3" = "-xdebug" ]; then
+  XDEBUG="-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,server=y,address=8000"
+fi
+
+
+java $PORT $XDEBUG -Djava.endorsed.dirs=$AXIS2_ENDORSED -classpath $AXIS2_CLASSPATH samples.util.SampleAxis2Server \
+-repo $AXIS2_HOME/repository -conf $AXIS2_HOME/repository/conf/axis2.xml
\ No newline at end of file
