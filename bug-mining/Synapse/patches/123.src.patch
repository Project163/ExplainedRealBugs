diff --git a/java/modules/core/src/test/java/org/apache/synapse/util/MessageHelperTest.java b/java/modules/core/src/test/java/org/apache/synapse/util/MessageHelperTest.java
index bfc59a4e3..e0298e4a8 100755
--- a/java/modules/core/src/test/java/org/apache/synapse/util/MessageHelperTest.java
+++ b/java/modules/core/src/test/java/org/apache/synapse/util/MessageHelperTest.java
@@ -19,6 +19,8 @@
 
 package org.apache.synapse.util;
 
+import javax.activation.DataHandler;
+
 import junit.framework.TestCase;
 import org.apache.axis2.context.MessageContext;
 
@@ -35,4 +37,14 @@ public class MessageHelperTest extends TestCase {
         Object result = newMc.getProperty(key);
         assertEquals(result, "propValue");
     }
+    
+    // Regression test for SYNAPSE-309
+    public void testClonePartiallyWithAttachments() throws Exception {
+        MessageContext origMc = new MessageContext();
+        String contentId = origMc.addAttachment(new DataHandler("test", "text/html"));
+        MessageContext newMc = MessageHelper.clonePartially(origMc);
+        DataHandler dh = newMc.getAttachment(contentId);
+        assertNotNull(dh);
+        assertEquals("test", dh.getContent());
+    }
 }
diff --git a/java/pom.xml b/java/pom.xml
index 69a440a6f..61cbe746c 100644
--- a/java/pom.xml
+++ b/java/pom.xml
@@ -1127,7 +1127,7 @@
 
         <!-- Axis2 1.4 and its dependencies -->
         <axis2.version>1.4</axis2.version>
-        <axiom.version>1.2.7</axiom.version>
+        <axiom.version>SNAPSHOT</axiom.version>
         <xml_schema.version>1.4.2</xml_schema.version>
         <xml_apis.version>1.3.04</xml_apis.version>
         <wsdl4j.version>1.6.2</wsdl4j.version>
