diff --git a/java/modules/core/src/main/java/org/apache/synapse/config/xml/EnqueueMediatorFactory.java b/java/modules/core/src/main/java/org/apache/synapse/config/xml/EnqueueMediatorFactory.java
index 9ac8d4468..8eeee1bc7 100644
--- a/java/modules/core/src/main/java/org/apache/synapse/config/xml/EnqueueMediatorFactory.java
+++ b/java/modules/core/src/main/java/org/apache/synapse/config/xml/EnqueueMediatorFactory.java
@@ -43,7 +43,7 @@ public class EnqueueMediatorFactory extends AbstractMediatorFactory{
         if (seqAtt != null && !"".equals(seqAtt.getAttributeValue())) {
             mediator.setSequenceName(seqAtt.getAttributeValue());
         } else {
-            handleException("sequence is a required attribue");
+            handleException("sequence is a required attribute");
         }
 
         OMAttribute priorityAtt = elem.getAttribute(PRIORITY_ATT);
@@ -55,7 +55,7 @@ public class EnqueueMediatorFactory extends AbstractMediatorFactory{
         if (queueAtt != null && !"".equals(queueAtt.getAttributeValue())) {
             mediator.setExecutorName(queueAtt.getAttributeValue());
         } else {
-            handleException("Queue is a required attribue");
+            handleException("Queue is a required attribute");
         }
 
         return mediator;
diff --git a/java/modules/extensions/src/main/java/org/apache/synapse/mediators/throttle/ThrottleMediator.java b/java/modules/extensions/src/main/java/org/apache/synapse/mediators/throttle/ThrottleMediator.java
index 9ff93a8ca..c7362aa62 100644
--- a/java/modules/extensions/src/main/java/org/apache/synapse/mediators/throttle/ThrottleMediator.java
+++ b/java/modules/extensions/src/main/java/org/apache/synapse/mediators/throttle/ThrottleMediator.java
@@ -132,7 +132,7 @@ public class ThrottleMediator extends AbstractMediator implements ManagedLifecyc
 
             // Throttle only will be created ,if the massage flow is IN
             if (!isResponse) {
-                //check the availability of the ConcurrentAccessControler
+                //check the availability of the ConcurrentAccessController
                 //if this is a clustered environment
                 if (isClusteringEnable) {
                     concurrentAccessController =
@@ -149,8 +149,7 @@ public class ThrottleMediator extends AbstractMediator implements ManagedLifecyc
                         }
                         try {
                             // process the policy
-                            throttle = ThrottleFactory.createMediatorThrottle(
-                                    PolicyEngine.getPolicy(inLinePolicy));
+                            throttle = ThrottleFactory.createMediatorThrottle(inLinePolicy);
 
                             //At this point concurrent access controller definitely 'null'
                             // f the clustering is disable.
@@ -214,7 +213,7 @@ public class ThrottleMediator extends AbstractMediator implements ManagedLifecyc
                                     try {
                                         // Creates the throttle from the policy
                                         throttle = ThrottleFactory.createMediatorThrottle(
-                                                PolicyEngine.getPolicy((OMElement) entryValue));
+                                                (OMElement) entryValue);
 
                                         //For non-clustered  environment , must re-initiates
                                         //For  clustered  environment,
diff --git a/java/modules/integration/src/test/java/org/apache/synapse/samples/framework/DerbyServerController.java b/java/modules/integration/src/test/java/org/apache/synapse/samples/framework/DerbyServerController.java
index 04696857f..46997d751 100644
--- a/java/modules/integration/src/test/java/org/apache/synapse/samples/framework/DerbyServerController.java
+++ b/java/modules/integration/src/test/java/org/apache/synapse/samples/framework/DerbyServerController.java
@@ -42,6 +42,15 @@ public class DerbyServerController implements BackEndServerController {
             server = new NetworkServerControl
                     (InetAddress.getByName("localhost"), 1527);
             server.start(null);
+            while (true) {
+                try {
+                    server.ping();
+                    break;
+                } catch (Exception ignored) {
+                    log.info("Waiting for Derby server to start...");
+                    Thread.sleep(2000);
+                }
+            }
             log.info("Derby is successfully started.");
 
         } catch (Exception e) {
diff --git a/java/pom.xml b/java/pom.xml
index dce5e559a..ea5abf56d 100644
--- a/java/pom.xml
+++ b/java/pom.xml
@@ -872,7 +872,7 @@
         <!-- dependencies of Synapse extensions module -->
         <wso2commons.version>1.2</wso2commons.version>
         <wso2caching.version>3.5.0</wso2caching.version>
-        <wso2throttle.version>SNAPSHOT</wso2throttle.version>
+        <wso2throttle.version>3.2.1</wso2throttle.version>
         <wso2eventing-api.version>SNAPSHOT</wso2eventing-api.version>
         <xbean.version>2.2.0</xbean.version>
         <bsf.version>3.0</bsf.version>
diff --git a/java/src/site/xdoc/Synapse_Samples.xml b/java/src/site/xdoc/Synapse_Samples.xml
index 6b92a70f3..c7641fb65 100644
--- a/java/src/site/xdoc/Synapse_Samples.xml
+++ b/java/src/site/xdoc/Synapse_Samples.xml
@@ -2837,7 +2837,7 @@ out sequence as the receiving sequence is specified in the send mediator.</p>
         <p>
         Condition II : Matching HTTP Header AND Url<br/>
         </p>
-        <pre xml:space="preserve">curl -d @stockQuoteReq.xml -H "Content-Type: application/soap+xml;charset=UTF-8" -H "my_custom_header1:foo1" "http://localhost:8280/services/StockQuoteProxy"</pre>
+            <pre xml:space="preserve">curl -d @stockQuoteReq.xml -H "Content-Type: application/soap+xml;charset=UTF-8" -H "my_custom_header1:foo1" "http://localhost:8280/services/StockQuoteProxy"</pre>
 
         <p>
         Condition III : Complex conditions with AND, OR and NOT<br/>
