diff --git a/java/modules/core/src/main/resources/log4j.properties b/java/modules/core/src/main/resources/log4j.properties
index b3ad10b58..96289f9a8 100644
--- a/java/modules/core/src/main/resources/log4j.properties
+++ b/java/modules/core/src/main/resources/log4j.properties
@@ -34,6 +34,7 @@ log4j.rootCategory=ERROR, LOG_APPENDER, CONSOLE_APPENDER
 log4j.category.org.apache.synapse=INFO
 log4j.category.org.apache.synapse.transport=INFO
 log4j.category.org.apache.axis2.transport=INFO
+log4j.category.samples.util=INFO
 
 # The console appender is used to display general information at console
 log4j.appender.CONSOLE_APPENDER=org.apache.log4j.ConsoleAppender
diff --git a/java/modules/core/src/test/java/org/apache/synapse/config/xml/AbstractTestCase.java b/java/modules/core/src/test/java/org/apache/synapse/config/xml/AbstractTestCase.java
index 015e17812..9bb786402 100644
--- a/java/modules/core/src/test/java/org/apache/synapse/config/xml/AbstractTestCase.java
+++ b/java/modules/core/src/test/java/org/apache/synapse/config/xml/AbstractTestCase.java
@@ -30,7 +30,6 @@ import org.xml.sax.SAXException;
 import javax.xml.stream.XMLInputFactory;
 import javax.xml.stream.XMLStreamException;
 import javax.xml.stream.XMLStreamReader;
-import javax.xml.parsers.ParserConfigurationException;
 import java.io.StringReader;
 import java.io.IOException;
 
@@ -59,8 +58,7 @@ public abstract class AbstractTestCase extends XMLTestCase {
 
             XMLStreamReader reader = XMLInputFactory.newInstance().createXMLStreamReader(new StringReader(xml));
             StAXOMBuilder builder = new StAXOMBuilder(reader);
-            OMElement omElement = builder.getDocumentElement();
-            return omElement;
+            return builder.getDocumentElement();
 
         }
         catch (XMLStreamException e) {
diff --git a/java/modules/samples/src/main/java/samples/userguide/StockQuoteClient.java b/java/modules/samples/src/main/java/samples/userguide/StockQuoteClient.java
index 29634692d..58d871d22 100644
--- a/java/modules/samples/src/main/java/samples/userguide/StockQuoteClient.java
+++ b/java/modules/samples/src/main/java/samples/userguide/StockQuoteClient.java
@@ -194,20 +194,23 @@ public class StockQuoteClient {
             if (Boolean.parseBoolean(wsrm)) {
                 // give some time for RM to terminate normally
                 Thread.sleep(5000);
-
-                configContext.getListenerManager().stop();
+                if (configContext != null) {
+                    configContext.getListenerManager().stop();
+                }
                 serviceClient.cleanup();
                 System.exit(0);
             }
         }
 
         try {
-            //configContext.terminate();
+            if (configContext != null) {
+                configContext.terminate();
+            }
             // the above statement was used on reccomendation by Chamikara as I remember, but
             // since using Axis2 1.3 - this causes some unexpected classloading issue on the
             // Axis2 server side - which cannot be described. This using the below as suggested
             // by Deepal
-            serviceClient.cleanup();
+//            serviceClient.cleanup();
         } catch (Exception ignore) {
         }
     }
diff --git a/java/modules/samples/src/main/java/samples/util/SampleAxis2Server.java b/java/modules/samples/src/main/java/samples/util/SampleAxis2Server.java
index 55b2fcc11..efc663b04 100644
--- a/java/modules/samples/src/main/java/samples/util/SampleAxis2Server.java
+++ b/java/modules/samples/src/main/java/samples/util/SampleAxis2Server.java
@@ -21,144 +21,46 @@ package samples.util;
 
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
-import org.apache.axis2.transport.http.SimpleHTTPServer;
-import org.apache.axis2.util.CommandLineOptionParser;
-import org.apache.axis2.util.OptionsValidator;
-import org.apache.axis2.util.CommandLineOption;
-import org.apache.axis2.context.ConfigurationContext;
-import org.apache.axis2.context.ConfigurationContextFactory;
-import org.apache.axis2.engine.ListenerManager;
-import org.apache.axis2.description.TransportInDescription;
-
-import javax.xml.namespace.QName;
-import java.util.List;
-import java.util.Map;
-import java.io.File;
-import java.net.ServerSocket;
 
 public class SampleAxis2Server {
 
-    private static final Log log = LogFactory.getLog(SimpleHTTPServer.class);
-
-    int port = -1;
-
-    public static int DEFAULT_PORT = 9000;
-
+    private static final Log log = LogFactory.getLog(SampleAxis2Server.class);
 
     /**
      * Expected system properties
-     *      http_port: Port to bind HTTP transport (default is 9000)
-     *      https_port: Port to bind HTTPS transport (default is 9002)
-     *      server_name: Name of this instance of the server (optional)
-     *
-     * @param args  1: Axis2 repository
-     *              2: Axis2 configuration file (axis2.xml)
+     * http_port: Port to bind HTTP transport (default is 9000)
+     * https_port: Port to bind HTTPS transport (default is 9002)
+     * server_name: Name of this instance of the server (optional)
      *
+     * @param args 1: Axis2 repository
+     *             2: Axis2 configuration file (axis2.xml)
      * @throws Exception
      */
     public static void main(String[] args) throws Exception {
         startServer(args);
+        addShutdownHook();
     }
 
-    public static ListenerManager startServer(String[] args) {
-        String repoLocation = null;
-		String confLocation = null;
-
-		CommandLineOptionParser optionsParser = new CommandLineOptionParser(args);
-		List invalidOptionsList = optionsParser.getInvalidOptions(new OptionsValidator() {
-			public boolean isInvalid(CommandLineOption option) {
-				String optionType = option.getOptionType();
-				return !("repo".equalsIgnoreCase(optionType) || "conf"
-						.equalsIgnoreCase(optionType));
-			}
-		});
-
-		if ((invalidOptionsList.size()>0)||(args.length>4))
-		{
-			printUsage();
-			return null;
-		}
-
-		Map optionsMap = optionsParser.getAllOptions();
-
-		CommandLineOption repoOption = (CommandLineOption) optionsMap
-				.get("repo");
-		CommandLineOption confOption = (CommandLineOption) optionsMap
-				.get("conf");
-
-		log.info("[SimpleAxisServer] Starting");
-		if (repoOption != null) {
-			repoLocation = repoOption.getOptionValue();
-			System.out.println("[SimpleAxisServer] Using the Axis2 Repository : "
-					+ new File(repoLocation).getAbsolutePath());
-		}
-		if (confOption != null) {
-			confLocation = confOption.getOptionValue();
-			System.out
-					.println("[SimpleAxisServer] Using the Axis2 Configuration File : "
-							+ new File(confLocation).getAbsolutePath());
-		}
-
-		try {
-			ConfigurationContext configctx = ConfigurationContextFactory
-					.createConfigurationContextFromFileSystem(repoLocation,
-							confLocation);
-
-            configurePort(configctx);
-
-            ListenerManager listenerManager =  new ListenerManager();
-				listenerManager.init(configctx);
-			listenerManager.start();
-            log.info("[SimpleAxisServer] Started");
-            return listenerManager;
-        } catch (Throwable t) {
-            log.fatal("[SimpleAxisServer] Shutting down. Error starting SimpleAxisServer", t);
-        }
-        return null;
-    }
-
-    private static void configurePort(ConfigurationContext configCtx) {
-
-        TransportInDescription trsIn = (TransportInDescription)
-            configCtx.getAxisConfiguration().getTransportsIn().get("http");
-
-        if(trsIn != null) {
-            String port = System.getProperty("http_port");
-            if(port != null) {
+    private static void addShutdownHook() {
+        Thread shutdownHook = new Thread() {
+            public void run() {
+                log.info("Shutting down SimpleAxisServer ...");
                 try {
-                    new Integer(port);
-                    trsIn.getParameter("port").setValue(port);
-                } catch (NumberFormatException e) {
-                    log.error("Given port is not a valid integer. Using 9000 for port.");
-                    trsIn.getParameter("port").setValue("9000");
+                    stopServer();
+                    log.info("Shutdown complete");
+                    log.info("Halting JVM");
+                } catch (Exception e) {
+                    log.warn("Error occurred while shutting down SimpleAxisServer : " + e);
                 }
-            } else {
-                trsIn.getParameter("port").setValue("9000");
             }
-        }
-
-        TransportInDescription httpsTrsIn = (TransportInDescription)
-            configCtx.getAxisConfiguration().getTransportsIn().get("https");
-
-        if(httpsTrsIn != null) {
-            String port = System.getProperty("https_port");
-            if(port != null) {
-                try {
-                    new Integer(port);
-                    httpsTrsIn.getParameter("port").setValue(port);
-                } catch (NumberFormatException e) {
-                    log.error("Given port is not a valid integer. Using 9000 for port.");
-                    httpsTrsIn.getParameter("port").setValue("9002");
-                }
-            } else {
-                httpsTrsIn.getParameter("port").setValue("9002");
-            }
-        }
+        };
+        Runtime.getRuntime().addShutdownHook(shutdownHook);
     }
 
-    public static void printUsage() {
-        System.out.println("Usage: SampleAxisServer -repo <repository>  -conf <axis2 configuration file>");
-        System.out.println();
-        System.exit(1);
+    public static void startServer(String[] args) throws Exception {
+        SampleAxis2ServerManager.getInstance().start(args);
+    }
+    public static void stopServer() throws Exception {
+        SampleAxis2ServerManager.getInstance().stop();
     }
 }
diff --git a/java/modules/samples/src/main/java/samples/util/SampleAxis2ServerManager.java b/java/modules/samples/src/main/java/samples/util/SampleAxis2ServerManager.java
new file mode 100644
index 000000000..a1c2160b7
--- /dev/null
+++ b/java/modules/samples/src/main/java/samples/util/SampleAxis2ServerManager.java
@@ -0,0 +1,166 @@
+/*
+ *  Licensed to the Apache Software Foundation (ASF) under one
+ *  or more contributor license agreements.  See the NOTICE file
+ *  distributed with this work for additional information
+ *  regarding copyright ownership.  The ASF licenses this file
+ *  to you under the Apache License, Version 2.0 (the
+ *  "License"); you may not use this file except in compliance
+ *  with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ *  Unless required by applicable law or agreed to in writing,
+ *  software distributed under the License is distributed on an
+ *   * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ *  KIND, either express or implied.  See the License for the
+ *  specific language governing permissions and limitations
+ *  under the License.
+ */
+package samples.util;
+
+import org.apache.axis2.context.ConfigurationContext;
+import org.apache.axis2.context.ConfigurationContextFactory;
+import org.apache.axis2.description.TransportInDescription;
+import org.apache.axis2.engine.ListenerManager;
+import org.apache.axis2.util.CommandLineOption;
+import org.apache.axis2.util.CommandLineOptionParser;
+import org.apache.axis2.util.OptionsValidator;
+import org.apache.commons.logging.Log;
+import org.apache.commons.logging.LogFactory;
+
+import java.io.File;
+import java.util.List;
+import java.util.Map;
+
+public class SampleAxis2ServerManager {
+
+    private static final Log log = LogFactory.getLog(SampleAxis2ServerManager.class);
+
+    private static SampleAxis2ServerManager ourInstance = new SampleAxis2ServerManager();
+
+    public static int DEFAULT_PORT = 9000;
+
+    private ConfigurationContext configctx;
+    
+    private ListenerManager listenerManager;
+
+    public static SampleAxis2ServerManager getInstance() {
+        return ourInstance;
+    }
+
+    private SampleAxis2ServerManager() {
+    }
+
+    public void start(String[] args) throws Exception {
+        String repoLocation = null;
+        String confLocation = null;
+
+        CommandLineOptionParser optionsParser = new CommandLineOptionParser(args);
+        List invalidOptionsList = optionsParser.getInvalidOptions(new OptionsValidator() {
+            public boolean isInvalid(CommandLineOption option) {
+                String optionType = option.getOptionType();
+                return !("repo".equalsIgnoreCase(optionType) || "conf"
+                    .equalsIgnoreCase(optionType));
+            }
+        });
+
+        if ((invalidOptionsList.size() > 0) || (args.length > 4)) {
+            printUsage();
+        }
+
+        Map optionsMap = optionsParser.getAllOptions();
+
+        CommandLineOption repoOption = (CommandLineOption) optionsMap
+            .get("repo");
+        CommandLineOption confOption = (CommandLineOption) optionsMap
+            .get("conf");
+
+        log.info("[SimpleAxisServer] Starting");
+        if (repoOption != null) {
+            repoLocation = repoOption.getOptionValue();
+            System.out.println("[SimpleAxisServer] Using the Axis2 Repository : "
+                + new File(repoLocation).getAbsolutePath());
+        }
+        if (confOption != null) {
+            confLocation = confOption.getOptionValue();
+            System.out
+                .println("[SimpleAxisServer] Using the Axis2 Configuration File : "
+                    + new File(confLocation).getAbsolutePath());
+        }
+        try {
+            configctx = ConfigurationContextFactory
+                .createConfigurationContextFromFileSystem(repoLocation,
+                    confLocation);
+
+            configurePort(configctx);
+
+            listenerManager = new ListenerManager();
+            listenerManager.init(configctx);
+            listenerManager.start();
+            log.info("[SimpleAxisServer] Started");
+        } catch (Throwable t) {
+            log.fatal("[SimpleAxisServer] Shutting down. Error starting SimpleAxisServer", t);
+            System.exit(1); // must stop application
+        }
+    }
+
+    public void stop() throws Exception {
+        try {
+            if (listenerManager != null) {
+                listenerManager.stop();
+                listenerManager.destroy();
+            }
+            //we need to call this method to clean the team fils we created.
+            if (configctx != null) {
+                configctx.terminate();
+            }
+        } catch (Exception ignored) {
+        }
+    }
+
+
+    private void configurePort(ConfigurationContext configCtx) {
+
+        TransportInDescription trsIn = (TransportInDescription)
+            configCtx.getAxisConfiguration().getTransportsIn().get("http");
+
+        if (trsIn != null) {
+            String port = System.getProperty("http_port");
+            if (port != null) {
+                try {
+                    new Integer(port);
+                    trsIn.getParameter("port").setValue(port);
+                } catch (NumberFormatException e) {
+                    log.error("Given port is not a valid integer. Using 9000 for port.");
+                    trsIn.getParameter("port").setValue("9000");
+                }
+            } else {
+                trsIn.getParameter("port").setValue("9000");
+            }
+        }
+
+        TransportInDescription httpsTrsIn = (TransportInDescription)
+            configCtx.getAxisConfiguration().getTransportsIn().get("https");
+
+        if (httpsTrsIn != null) {
+            String port = System.getProperty("https_port");
+            if (port != null) {
+                try {
+                    new Integer(port);
+                    httpsTrsIn.getParameter("port").setValue(port);
+                } catch (NumberFormatException e) {
+                    log.error("Given port is not a valid integer. Using 9000 for port.");
+                    httpsTrsIn.getParameter("port").setValue("9002");
+                }
+            } else {
+                httpsTrsIn.getParameter("port").setValue("9002");
+            }
+        }
+    }
+
+    public static void printUsage() {
+        System.out.println("Usage: SampleAxisServer -repo <repository>  -conf <axis2 configuration file>");
+        System.out.println();
+        System.exit(1);
+    }
+}
diff --git a/java/modules/samples/src/main/scripts/axis2server.bat b/java/modules/samples/src/main/scripts/axis2server.bat
index b8089cb56..dca184931 100644
--- a/java/modules/samples/src/main/scripts/axis2server.bat
+++ b/java/modules/samples/src/main/scripts/axis2server.bat
@@ -111,7 +111,7 @@ echo Using JAVA_HOME    %JAVA_HOME%
 echo Using AXIS2_HOME   %AXIS2_HOME%
 
 cd %AXIS2_HOME%
-"%_JAVACMD%" %_HTTPPORT% %_HTTPSPORT% %_SERVERNAME% %JAVA_OPTS% -cp "%AXIS2_CLASS_PATH%" -Djava.endorsed.dirs="%AXIS2_ENDORSED%" samples.util.SampleAxis2Server -repo "%AXIS2_HOME%\repository" -conf "%AXIS2_HOME%\repository\conf\axis2.xml"
+"%_JAVACMD%" %_HTTPPORT% %_HTTPSPORT% %_SERVERNAME% %JAVA_OPTS% -cp "%AXIS2_CLASS_PATH%" -Djava.io.tmpdir=$AXIS2_HOME\..\..\work\temp\sampleServer -Djava.endorsed.dirs="%AXIS2_ENDORSED%" samples.util.SampleAxis2Server -repo "%AXIS2_HOME%\repository" -conf "%AXIS2_HOME%\repository\conf\axis2.xml"
 goto end
 
 :end
diff --git a/java/modules/samples/src/main/scripts/axis2server.sh b/java/modules/samples/src/main/scripts/axis2server.sh
index 081afa332..2d029b122 100644
--- a/java/modules/samples/src/main/scripts/axis2server.sh
+++ b/java/modules/samples/src/main/scripts/axis2server.sh
@@ -159,5 +159,5 @@ if [ "$HTTPS_PORT_SET" = "FALSE" ]; then
 	PROGRAM_PARAMS="$PROGRAM_PARAMS""-Dhttps_port=9002 "
 fi
 
-java $PROGRAM_PARAMS -Djava.endorsed.dirs=$AXIS2_ENDORSED -classpath $AXIS2_CLASSPATH samples.util.SampleAxis2Server \
+java $PROGRAM_PARAMS -Djava.io.tmpdir=$AXIS2_HOME/../../work/temp/sampleServer -Djava.endorsed.dirs=$AXIS2_ENDORSED -classpath $AXIS2_CLASSPATH samples.util.SampleAxis2Server \
 -repo $AXIS2_HOME/repository -conf $AXIS2_HOME/repository/conf/axis2.xml
\ No newline at end of file
diff --git a/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/AbstractAutomationTestCase.java b/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/AbstractAutomationTestCase.java
index 9682dd9f3..9c4614ea9 100644
--- a/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/AbstractAutomationTestCase.java
+++ b/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/AbstractAutomationTestCase.java
@@ -27,6 +27,7 @@ import org.custommonkey.xmlunit.SimpleNamespaceContext;
 import org.custommonkey.xmlunit.XMLTestCase;
 import org.custommonkey.xmlunit.XMLUnit;
 import samples.util.SampleAxis2Server;
+import samples.util.SampleAxis2ServerManager;
 
 import java.io.ByteArrayOutputStream;
 import java.io.OutputStream;
@@ -70,12 +71,15 @@ public abstract class AbstractAutomationTestCase extends XMLTestCase {
         return os.toString();
     }
 
-    protected ListenerManager startCustomAxis2Server(String httpPort, String httpsPort) throws Exception {
+    protected void startCustomAxis2Server(String httpPort, String httpsPort) throws Exception {
         System.setProperty("http_port", httpPort);
         System.setProperty("https_port", httpsPort);
-        return SampleAxis2Server.startServer(new String[]{"-repo", "modules/samples/target/test_repos/axis2Server/",
+        SampleAxis2ServerManager.getInstance().start(new String[]{"-repo", "modules/samples/target/test_repos/axis2Server/",
                     "-conf", "modules/samples/target/test_repos/axis2Server/conf/axis2.xml"});
     }
+    protected void stopCustomAxis2Server(String httpPort, String httpsPort) throws Exception {
+        SampleAxis2ServerManager.getInstance().stop();
+    }
 
     protected void tearDown() throws Exception {
         ServerManager.getInstance().stop();
diff --git a/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/SynapseSample_54_Integration.java b/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/SynapseSample_54_Integration.java
index 7f16213a8..5c5e390d2 100644
--- a/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/SynapseSample_54_Integration.java
+++ b/java/modules/samples/src/test/java/org/apache/synapse/samples/n2n/SynapseSample_54_Integration.java
@@ -26,14 +26,11 @@ public class SynapseSample_54_Integration extends AbstractAutomationTestCase {
         setUpSynapseEnv();
         startCustomAxis2Server("9001", "9005");
         startCustomAxis2Server("9002", "9006");
-        listenerManager = startCustomAxis2Server("9003", "9007");
+        startCustomAxis2Server("9003", "9007");
         String resultString = (new LoadbalanceFailoverClient()).sessionlessClient();
         assertTrue(resultString.contains("9001"));
         assertTrue(resultString.contains("9002"));
-        assertTrue(resultString.contains("9003"));
-
-        listenerManager.destroy();
-        listenerManager.isStopped();
+        assertTrue(resultString.contains("9003"));        
         resultString = (new LoadbalanceFailoverClient()).sessionlessClient();
         assertTrue(resultString.contains("9001"));
         assertTrue(resultString.contains("9002"));
diff --git a/java/repository/conf/wrapper.conf b/java/repository/conf/wrapper.conf
index 8159a837c..cdf38ceac 100644
--- a/java/repository/conf/wrapper.conf
+++ b/java/repository/conf/wrapper.conf
@@ -33,6 +33,7 @@ wrapper.java.additional.4=-Djava.endorsed.dirs=lib/endorsed
 wrapper.java.additional.5=-Dsynapse.home=.
 wrapper.java.additional.6=-Dorg.apache.xerces.xni.parser.XMLParserConfiguration=org.apache.xerces.parsers.XMLGrammarCachingConfiguration
 wrapper.java.additional.7=-Dlog4j.configuration=file:lib/log4j.properties
+wrapper.java.additional.8=-Djava.io.tmpdir=work/temp/synapse
 
 # Initial Java Heap Size (in MB)
 #wrapper.java.initmemory=3
diff --git a/java/src/main/bin/synapse.bat b/java/src/main/bin/synapse.bat
index 513e9ecff..32d3897c8 100644
--- a/java/src/main/bin/synapse.bat
+++ b/java/src/main/bin/synapse.bat
@@ -126,7 +126,7 @@ echo Using SYNAPSE_HOME:    %SYNAPSE_HOME%
 echo Using JAVA_HOME:       %JAVA_HOME%
 echo Using SYNAPSE_XML:     %_SYNAPSE_XML%
 
-%_JAVACMD% %_PORT% %_SYNAPSE_XML% -Dorg.apache.xerces.xni.parser.XMLParserConfiguration=org.apache.xerces.parsers.XMLGrammarCachingConfiguration -Dsynapse.home="%SYNAPSE_HOME%" -Daxis2.xml="%SYNAPSE_HOME%\repository\conf\axis2.xml" -Djava.endorsed.dirs=%SYNAPSE_ENDORSED% %_XDEBUG% -cp %SYNAPSE_CLASS_PATH% org.apache.synapse.SynapseServer "%SYNAPSE_HOME%\repository"
+%_JAVACMD% %_PORT% %_SYNAPSE_XML% -Dorg.apache.xerces.xni.parser.XMLParserConfiguration=org.apache.xerces.parsers.XMLGrammarCachingConfiguration -Dsynapse.home="%SYNAPSE_HOME%" -Daxis2.xml="%SYNAPSE_HOME%\repository\conf\axis2.xml" -Djava.endorsed.dirs=%SYNAPSE_ENDORSED%  -Djava.io.tmpdir=$SYNAPSE_HOME\work\temp\synapse  %_XDEBUG% -cp %SYNAPSE_CLASS_PATH% org.apache.synapse.SynapseServer "%SYNAPSE_HOME%\repository"
 goto end
 
 :end
diff --git a/java/src/main/bin/synapse.sh b/java/src/main/bin/synapse.sh
index e8ff1f116..ffbbaf6e5 100644
--- a/java/src/main/bin/synapse.sh
+++ b/java/src/main/bin/synapse.sh
@@ -171,4 +171,4 @@ echo "Using SYNAPSE_HOME:    $SYNAPSE_HOME"
 echo "Using JAVA_HOME:       $JAVA_HOME"
 echo "Using SYNAPSE_XML:     $SYNAPSE_XML"
 
-$JAVA_HOME/bin/java $XDEBUG $PORT $SYNAPSE_XML -Dorg.apache.xerces.xni.parser.XMLParserConfiguration=org.apache.xerces.parsers.XMLGrammarCachingConfiguration -Dsynapse.home=$SYNAPSE_HOME -Daxis2.xml=$SYNAPSE_HOME/repository/conf/axis2.xml -Djava.endorsed.dirs=$SYNAPSE_ENDORSED -classpath $SYNAPSE_CLASSPATH org.apache.synapse.SynapseServer $SYNAPSE_HOME/repository
+$JAVA_HOME/bin/java $XDEBUG $PORT $SYNAPSE_XML -Dorg.apache.xerces.xni.parser.XMLParserConfiguration=org.apache.xerces.parsers.XMLGrammarCachingConfiguration -Dsynapse.home=$SYNAPSE_HOME -Daxis2.xml=$SYNAPSE_HOME/repository/conf/axis2.xml -Djava.endorsed.dirs=$SYNAPSE_ENDORSED -Djava.io.tmpdir=$SYNAPSE_HOME/work/temp/synapse -classpath $SYNAPSE_CLASSPATH org.apache.synapse.SynapseServer $SYNAPSE_HOME/repository
