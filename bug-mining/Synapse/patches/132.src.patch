diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/TransportListenerTestTemplate.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/TransportListenerTestTemplate.java
index b8e78d0b6..05ac74d17 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/TransportListenerTestTemplate.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/TransportListenerTestTemplate.java
@@ -36,11 +36,13 @@ import org.apache.axiom.attachments.Attachments;
 import org.apache.axiom.attachments.ByteArrayDataSource;
 import org.apache.axiom.om.OMAbstractFactory;
 import org.apache.axiom.om.OMElement;
+import org.apache.axiom.om.OMFactory;
 import org.apache.axiom.om.OMNode;
 import org.apache.axiom.om.OMOutputFormat;
 import org.apache.axiom.om.OMText;
 import org.apache.axiom.om.impl.MIMEOutputUtils;
 import org.apache.axiom.om.util.UUIDGenerator;
+import org.apache.axiom.soap.SOAP11Constants;
 import org.apache.axiom.soap.SOAP12Constants;
 import org.apache.axiom.soap.SOAPBody;
 import org.apache.axiom.soap.SOAPEnvelope;
@@ -205,26 +207,32 @@ public abstract class TransportListenerTestTemplate extends TestCase {
         protected abstract void checkMessageData(MessageData messageData) throws Exception;
     }
     
-    public static class SOAP11TestCaseImpl extends TransportListenerTestCase {
+    public static abstract class XMLMessageTestCase extends TransportListenerTestCase {
         private final String text;
         private final String charset;
-        private final boolean pox;
-        private SOAPFactory factory;
         private OMElement orgElement;
+        protected OMFactory factory;
         
-        public SOAP11TestCaseImpl(TestStrategy strategy, String baseName, String text, String charset, boolean pox) {
-            super(strategy, baseName, (pox ? "application/xml" : "text/xml") + "; charset=\"" + charset + "\"");
+        public XMLMessageTestCase(TestStrategy strategy, String baseName, String baseContentType, String text, String charset) {
+            super(strategy, baseName, baseContentType + "; charset=\"" + charset + "\"");
             this.text = text;
             this.charset = charset;
-            this.pox = pox;
         }
-
+        
         @Override
         protected void setUp() throws Exception {
-            factory = OMAbstractFactory.getSOAP11Factory();
+            factory = getOMFactory();
             orgElement = factory.createOMElement(new QName("root"));
             orgElement.setText(text);
         }
+        
+        @Override
+        protected void checkMessageData(MessageData messageData) throws Exception {
+            SOAPEnvelope envelope = messageData.getEnvelope();
+            OMElement element = envelope.getBody().getFirstElement();
+            assertEquals(orgElement.getQName(), element.getQName());
+            assertEquals(text, element.getText());
+        }
 
         @Override
         protected void sendMessage(String endpointReference) throws Exception {
@@ -232,24 +240,67 @@ public abstract class TransportListenerTestTemplate extends TestCase {
             OMOutputFormat outputFormat = new OMOutputFormat();
             outputFormat.setCharSetEncoding(charset);
             outputFormat.setIgnoreXMLDeclaration(true);
-            if (pox) {
-                orgElement.serializeAndConsume(baos, outputFormat);
-            } else {
-                SOAPEnvelope orgEnvelope = factory.createSOAPEnvelope();
-                SOAPBody orgBody = factory.createSOAPBody();
-                orgBody.addChild(orgElement);
-                orgEnvelope.addChild(orgBody);
-                orgEnvelope.serializeAndConsume(baos, outputFormat);
-            }
+            getMessage(orgElement).serializeAndConsume(baos, outputFormat);
             strategy.sendMessage(endpointReference, contentType, baos.toByteArray());
         }
         
+        protected abstract OMFactory getOMFactory();
+        protected abstract OMElement getMessage(OMElement payload);
+    }
+    
+    public static abstract class SOAPTestCase extends XMLMessageTestCase {
+        public SOAPTestCase(TestStrategy strategy, String baseName, String baseContentType, String text, String charset) {
+            super(strategy, baseName, baseContentType, text, charset);
+        }
+
         @Override
-        protected void checkMessageData(MessageData messageData) throws Exception {
-            SOAPEnvelope envelope = messageData.getEnvelope();
-            OMElement element = envelope.getBody().getFirstElement();
-            assertEquals(orgElement.getQName(), element.getQName());
-            assertEquals(text, element.getText());
+        protected abstract SOAPFactory getOMFactory();
+
+        @Override
+        protected OMElement getMessage(OMElement payload) {
+            SOAPEnvelope envelope = ((SOAPFactory)factory).createSOAPEnvelope();
+            SOAPBody body = ((SOAPFactory)factory).createSOAPBody();
+            body.addChild(payload);
+            envelope.addChild(body);
+            return envelope;
+        }
+    }
+    
+    public static class SOAP11TestCaseImpl extends SOAPTestCase {
+        public SOAP11TestCaseImpl(TestStrategy strategy, String baseName, String text, String charset) {
+            super(strategy, baseName, SOAP11Constants.SOAP_11_CONTENT_TYPE, text, charset);
+        }
+
+        @Override
+        protected SOAPFactory getOMFactory() {
+            return OMAbstractFactory.getSOAP11Factory();
+        }
+    }
+    
+    public static class SOAP12TestCaseImpl extends SOAPTestCase {
+        public SOAP12TestCaseImpl(TestStrategy strategy, String baseName, String text, String charset) {
+            super(strategy, baseName, SOAP12Constants.SOAP_12_CONTENT_TYPE, text, charset);
+        }
+
+        @Override
+        protected SOAPFactory getOMFactory() {
+            return OMAbstractFactory.getSOAP12Factory();
+        }
+    }
+    
+    public static class POXTestCaseImpl extends XMLMessageTestCase {
+        public POXTestCaseImpl(TestStrategy strategy, String baseName, String text, String charset) {
+            super(strategy, baseName, "application/xml", text, charset);
+        }
+
+        @Override
+        protected OMFactory getOMFactory() {
+            return OMAbstractFactory.getOMFactory();
+        }
+
+        @Override
+        protected OMElement getMessage(OMElement payload) {
+            return payload;
         }
     }
     
@@ -277,20 +328,23 @@ public abstract class TransportListenerTestTemplate extends TestCase {
         }
     }
     
-    private static final String testString = "\u00e0 peine arriv\u00e9s nous entr\u00e2mes dans sa chambre";
+    public static final String testString = "\u00e0 peine arriv\u00e9s nous entr\u00e2mes dans sa chambre";
     
     private static final Random random = new Random();
 
-    public static void addSOAP11Tests(final TestStrategy strategy, TestSuite suite) {
-        suite.addTest(new SOAP11TestCaseImpl(strategy, "SOAP11ASCII", "test string", "us-ascii", false));
-        suite.addTest(new SOAP11TestCaseImpl(strategy, "SOAP11UTF8", testString, "UTF-8", false));
-        suite.addTest(new SOAP11TestCaseImpl(strategy, "SOAP11Latin1", testString, "ISO-8859-1", false));
+    public static void addSOAPTests(final TestStrategy strategy, TestSuite suite) {
+        suite.addTest(new SOAP11TestCaseImpl(strategy, "SOAP11ASCII", "test string", "us-ascii"));
+        suite.addTest(new SOAP11TestCaseImpl(strategy, "SOAP11UTF8", testString, "UTF-8"));
+        suite.addTest(new SOAP11TestCaseImpl(strategy, "SOAP11Latin1", testString, "ISO-8859-1"));
+        suite.addTest(new SOAP12TestCaseImpl(strategy, "SOAP12ASCII", "test string", "us-ascii"));
+        suite.addTest(new SOAP12TestCaseImpl(strategy, "SOAP12UTF8", testString, "UTF-8"));
+        suite.addTest(new SOAP12TestCaseImpl(strategy, "SOAP12Latin1", testString, "ISO-8859-1"));
     }
     
     public static void addPOXTests(final TestStrategy strategy, TestSuite suite) {
-        suite.addTest(new SOAP11TestCaseImpl(strategy, "POXASCII", "test string", "us-ascii", true));
-        suite.addTest(new SOAP11TestCaseImpl(strategy, "POXUTF8", testString, "UTF-8", true));
-        suite.addTest(new SOAP11TestCaseImpl(strategy, "POXLatin1", testString, "ISO-8859-1", true));
+        suite.addTest(new POXTestCaseImpl(strategy, "POXASCII", "test string", "us-ascii"));
+        suite.addTest(new POXTestCaseImpl(strategy, "POXUTF8", testString, "UTF-8"));
+        suite.addTest(new POXTestCaseImpl(strategy, "POXLatin1", testString, "ISO-8859-1"));
     }
     
     // TODO: this test actually only makes sense if the transport supports a Content-Type header
diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java
index f26721443..badccfe05 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java
@@ -43,6 +43,7 @@ import junit.framework.TestSuite;
 import org.apache.axiom.om.OMAbstractFactory;
 import org.apache.axiom.om.OMElement;
 import org.apache.axiom.om.OMFactory;
+import org.apache.axis2.context.MessageContext;
 import org.apache.axis2.description.Parameter;
 import org.apache.axis2.description.TransportInDescription;
 import org.apache.synapse.transport.TransportListenerTestTemplate;
@@ -59,10 +60,13 @@ public class JMSListenerTest extends TransportListenerTestTemplate {
         private final OMFactory factory = OMAbstractFactory.getOMFactory();
         
         private final boolean useTopic;
+        private final boolean useContentTypeHeader;
         
-        public TestStrategyImpl(boolean useTopic) {
-            super(useTopic ? "Topic" : "Queue");
+        public TestStrategyImpl(boolean useTopic, boolean useContentTypeHeader) {
+            super((useTopic ? "Topic" : "Queue") +
+                    (useContentTypeHeader ? "WithContentTypeHeader" : "WithoutContentTypeHeader"));
             this.useTopic = useTopic;
+            this.useContentTypeHeader = useContentTypeHeader;
         }
 
         private OMElement createParameterElement(String name, String value) {
@@ -126,7 +130,9 @@ public class JMSListenerTest extends TransportListenerTestTemplate {
                     = connection.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
                 TopicPublisher publisher = session.createPublisher(topic);
                 BytesMessage message = session.createBytesMessage();
-                message.setStringProperty(BaseConstants.CONTENT_TYPE, contentType);
+                if (useContentTypeHeader) {
+                    message.setStringProperty(BaseConstants.CONTENT_TYPE, contentType);
+                }
                 message.writeBytes(content);
                 publisher.send(message);
             } else {
@@ -138,7 +144,9 @@ public class JMSListenerTest extends TransportListenerTestTemplate {
                     = connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
                 QueueSender sender = session.createSender(queue);
                 BytesMessage message = session.createBytesMessage();
-                message.setStringProperty(BaseConstants.CONTENT_TYPE, contentType);
+                if (useContentTypeHeader) {
+                    message.setStringProperty(BaseConstants.CONTENT_TYPE, contentType);
+                }
                 message.writeBytes(content);
                 sender.send(message);
             }
@@ -148,14 +156,25 @@ public class JMSListenerTest extends TransportListenerTestTemplate {
     public static TestSuite suite() {
         TestSuite suite = new TestSuite();
         for (boolean useTopic : new boolean[] { false, true }) {
-            TestStrategy strategy = new TestStrategyImpl(useTopic);
-            addSOAP11Tests(strategy, suite);
-            // TODO: POX tests don't work yet for JMS
-            // addPOXTests(strategy, suite);
-            addSwATests(strategy, suite);
-            // TODO: these tests are temporarily disabled because of SYNAPSE-304
-            // addTextPlainTests(strategy, suite);
-            addBinaryTest(strategy, suite);
+            for (boolean useContentTypeHeader : new boolean[] { false, true }) {
+                TestStrategy strategy = new TestStrategyImpl(useTopic, useContentTypeHeader);
+                if (useContentTypeHeader) {
+                    addSOAPTests(strategy, suite);
+                    // TODO: POX tests don't work yet for JMS
+                    // addPOXTests(strategy, suite);
+                    addSwATests(strategy, suite);
+                } else {
+                    // If no content type header is used, SwA can't be used and the JMS transport
+                    // always uses the default charset encoding
+                    suite.addTest(new SOAP11TestCaseImpl(strategy, "SOAP11", testString,
+                            MessageContext.DEFAULT_CHAR_SET_ENCODING));
+                    suite.addTest(new SOAP12TestCaseImpl(strategy, "SOAP12", testString,
+                            MessageContext.DEFAULT_CHAR_SET_ENCODING));
+                }
+                // TODO: these tests are temporarily disabled because of SYNAPSE-304
+                // addTextPlainTests(strategy, suite);
+                addBinaryTest(strategy, suite);
+            }
         }
         return suite;
     }
diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/mail/MailTransportListenerTest.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/mail/MailTransportListenerTest.java
index 5b67f68e9..234098f59 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/mail/MailTransportListenerTest.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/mail/MailTransportListenerTest.java
@@ -81,7 +81,7 @@ public class MailTransportListenerTest extends TransportListenerTestTemplate {
     public static TestSuite suite() {
         TestSuite suite = new TestSuite();
         TestStrategy strategy = new TestStrategyImpl();
-        addSOAP11Tests(strategy, suite);
+        addSOAPTests(strategy, suite);
         // TODO: POX tests don't work yet for mail transport
         // addPOXTests(strategy, suite);
         // Temporarily skip this test until we know why it fails.
diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/nhttp/HttpCoreNIOListenerTest.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/nhttp/HttpCoreNIOListenerTest.java
index b5411409b..252dd6867 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/nhttp/HttpCoreNIOListenerTest.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/nhttp/HttpCoreNIOListenerTest.java
@@ -59,7 +59,7 @@ public class HttpCoreNIOListenerTest extends TransportListenerTestTemplate {
     public static TestSuite suite() {
         TestSuite suite = new TestSuite();
         TestStrategy strategy = new TestStrategyImpl();
-        addSOAP11Tests(strategy, suite);
+        addSOAPTests(strategy, suite);
         addPOXTests(strategy, suite);
         addSwATests(strategy, suite);
         addTextPlainTests(strategy, suite);
diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/vfs/VFSTransportListenerTest.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/vfs/VFSTransportListenerTest.java
index a877b875f..0fe65d7d6 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/vfs/VFSTransportListenerTest.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/vfs/VFSTransportListenerTest.java
@@ -73,7 +73,7 @@ public class VFSTransportListenerTest extends TransportListenerTestTemplate {
     public static TestSuite suite() {
         TestSuite suite = new TestSuite();
         TestStrategy strategy = new TestStrategyImpl();
-        addSOAP11Tests(strategy, suite);
+        addSOAPTests(strategy, suite);
         addPOXTests(strategy, suite);
         // Since VFS has no Content-Type header, SwA is not supported.
         addTextPlainTests(strategy, suite);
