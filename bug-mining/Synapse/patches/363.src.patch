diff --git a/java/modules/transports/core/vfs/src/main/java/org/apache/synapse/transport/vfs/VFSOutTransportInfo.java b/java/modules/transports/core/vfs/src/main/java/org/apache/synapse/transport/vfs/VFSOutTransportInfo.java
index fc37dc0ed..ef56c6e6d 100644
--- a/java/modules/transports/core/vfs/src/main/java/org/apache/synapse/transport/vfs/VFSOutTransportInfo.java
+++ b/java/modules/transports/core/vfs/src/main/java/org/apache/synapse/transport/vfs/VFSOutTransportInfo.java
@@ -53,7 +53,12 @@ public class VFSOutTransportInfo implements OutTransportInfo {
     VFSOutTransportInfo(String outFileURI, boolean fileLocking) {
         
         if (outFileURI.startsWith(VFSConstants.VFS_PREFIX)) {
-            this.outFileURI = outFileURI.substring(VFSConstants.VFS_PREFIX.length());
+            int qIndex = outFileURI.indexOf("?");
+            if (qIndex < 0) {
+                this.outFileURI = outFileURI.substring(VFSConstants.VFS_PREFIX.length());
+            } else {
+                this.outFileURI = outFileURI.substring(VFSConstants.VFS_PREFIX.length(), qIndex);
+            }
         } else {
             this.outFileURI = outFileURI;
         }
