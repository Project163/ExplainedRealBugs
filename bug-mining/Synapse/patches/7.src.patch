diff --git a/java/modules/extensions/src/main/java/org/apache/synapse/mediators/transform/XSLTMediator.java b/java/modules/extensions/src/main/java/org/apache/synapse/mediators/transform/XSLTMediator.java
index 6597c1c17..772bbeba5 100644
--- a/java/modules/extensions/src/main/java/org/apache/synapse/mediators/transform/XSLTMediator.java
+++ b/java/modules/extensions/src/main/java/org/apache/synapse/mediators/transform/XSLTMediator.java
@@ -190,14 +190,9 @@ public class XSLTMediator extends AbstractMediator {
                 log.debug("Transformation result : " + result);
             }
 
-            OMContainer parent = sourceNode.getParent();
-            if (parent instanceof SOAPEnvelope) {
-                ((SOAPEnvelope) parent).getBody().getFirstOMChild().detach();
-                ((SOAPEnvelope) parent).getBody().setFirstChild(result);
-            } else {
-                parent.getFirstOMChild().detach();
-                parent.addChild(result);
-            }
+            // replace the sourceNode with the result.
+            sourceNode.insertSiblingAfter( result );
+            sourceNode.detach();
 
         } catch (TransformerException e) {
             handleException("Error performing XSLT transformation " + xsltKey, e);
diff --git a/java/modules/extensions/src/test/java/org/apache/synapse/XSLTMediatorTest.java b/java/modules/extensions/src/test/java/org/apache/synapse/XSLTMediatorTest.java
index d46b45f95..2ba959d42 100644
--- a/java/modules/extensions/src/test/java/org/apache/synapse/XSLTMediatorTest.java
+++ b/java/modules/extensions/src/test/java/org/apache/synapse/XSLTMediatorTest.java
@@ -68,14 +68,14 @@ public class XSLTMediatorTest extends TestCase {
         props.put("xslt-key", prop);
 
         // invoke transformation, with static enveope
-        MessageContext synCtx = TestUtils.getTestContext(SOURCE, props);
+        MessageContext synCtx = TestUtils.getTestContextForXSLTMediator(SOURCE, props);
         transformMediator.mediate(synCtx);
 
         // validate result
         OMContainer body = synCtx.getEnvelope().getBody();
-        if (body.getFirstOMChild() instanceof OMElement) {
+        if (body.getFirstOMChild().getNextOMSibling() instanceof OMElement) {
 
-            OMElement getQuoteElem = (OMElement) body.getFirstOMChild();
+            OMElement getQuoteElem = (OMElement) body.getFirstOMChild().getNextOMSibling();
             assertTrue("GetQuote".equals(getQuoteElem.getLocalName()));
             assertTrue("http://www.webserviceX.NET/".equals(getQuoteElem.getNamespace().getName()));
 
@@ -108,14 +108,14 @@ public class XSLTMediatorTest extends TestCase {
         props.put("xslt-key", prop);
 
         // invoke transformation, with static enveope
-        MessageContext synCtx = TestUtils.getTestContext(SOURCE, props);
+        MessageContext synCtx = TestUtils.getTestContextForXSLTMediator(SOURCE, props);
         transformMediator.mediate(synCtx);
 
         // validate result
         OMContainer body = synCtx.getEnvelope().getBody();
-        if (body.getFirstOMChild() instanceof OMElement) {
+        if (body.getFirstOMChild().getNextOMSibling() instanceof OMElement) {
 
-            OMElement getQuoteElem = (OMElement) body.getFirstOMChild();
+            OMElement getQuoteElem = (OMElement) body.getFirstOMChild().getNextOMSibling();
             assertTrue("GetQuote".equals(getQuoteElem.getLocalName()));
             assertTrue("http://www.webserviceX.NET/".equals(getQuoteElem.getNamespace().getName()));
 
@@ -149,14 +149,14 @@ public class XSLTMediatorTest extends TestCase {
         props.put("xslt-key", prop);
         
         // invoke transformation, with static enveope
-        MessageContext synCtx = TestUtils.getTestContext(ENCLOSING_SOURCE, props);
+        MessageContext synCtx = TestUtils.getTestContextForXSLTMediator(ENCLOSING_SOURCE, props);
         transformMediator.mediate(synCtx);
 
         // validate result
         OMContainer body = synCtx.getEnvelope().getBody();
-        if (body.getFirstOMChild() instanceof OMElement) {
+        if (body.getFirstOMChild().getNextOMSibling() instanceof OMElement) {
 
-            OMElement someOtherElem = (OMElement) body.getFirstOMChild();
+            OMElement someOtherElem = (OMElement) body.getFirstOMChild().getNextOMSibling();
             assertTrue("someOtherElement".equals(someOtherElem.getLocalName()));
             assertTrue("http://someother".equals(someOtherElem.getNamespace().getName()));
 
diff --git a/java/modules/extensions/src/test/java/org/apache/synapse/mediators/TestUtils.java b/java/modules/extensions/src/test/java/org/apache/synapse/mediators/TestUtils.java
index 3d10369d7..3033863fd 100644
--- a/java/modules/extensions/src/test/java/org/apache/synapse/mediators/TestUtils.java
+++ b/java/modules/extensions/src/test/java/org/apache/synapse/mediators/TestUtils.java
@@ -31,6 +31,7 @@ import javax.xml.stream.XMLStreamReader;
 import org.apache.axiom.om.OMAbstractFactory;
 import org.apache.axiom.om.OMDocument;
 import org.apache.axiom.om.OMElement;
+import org.apache.axiom.om.OMFactory;
 import org.apache.axiom.om.impl.builder.StAXOMBuilder;
 import org.apache.axiom.soap.SOAPEnvelope;
 import org.apache.synapse.MessageContext;
@@ -75,6 +76,39 @@ public class TestUtils {
         return synCtx;
     }
 
+    public static TestMessageContext getTestContextForXSLTMediator(String bodyText, Map props) throws Exception {
+
+        // create a test synapse context
+        TestMessageContext synCtx = new TestMessageContext();
+        SynapseConfiguration testConfig = new SynapseConfiguration();
+        testConfig.addRegistry(null, new SimpleURLRegistry());
+
+        if (props != null) {
+            Iterator iter = props.keySet().iterator();
+            while (iter.hasNext()) {
+                String key = (String) iter.next();
+                testConfig.addProperty(key, (Property) props.get(key));
+            }
+        }
+        synCtx.setConfiguration(testConfig);
+
+        SOAPEnvelope envelope = OMAbstractFactory.getSOAP11Factory().getDefaultEnvelope();
+        OMDocument omDoc = OMAbstractFactory.getSOAP11Factory().createOMDocument();
+        omDoc.addChild(envelope);
+
+        XMLStreamReader parser = XMLInputFactory.newInstance().
+                createXMLStreamReader(new StringReader(bodyText));
+        StAXOMBuilder builder = new StAXOMBuilder(parser);
+
+        // set a dummy static message
+        OMFactory fac = OMAbstractFactory.getOMFactory();
+        envelope.getBody().addChild(fac.createOMText("first text child "));
+        envelope.getBody().addChild(builder.getDocumentElement());
+        envelope.getBody().addChild(fac.createOMText("second text child "));
+
+        synCtx.setEnvelope(envelope);
+        return synCtx;
+    }
     public static TestMessageContext getTestContext(String bodyText) throws Exception {
         return getTestContext(bodyText, null);
     }
