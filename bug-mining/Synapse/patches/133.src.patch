diff --git a/java/modules/transports/src/main/java/org/apache/synapse/transport/base/BaseUtils.java b/java/modules/transports/src/main/java/org/apache/synapse/transport/base/BaseUtils.java
index 38c0435f4..c7a57d0a9 100644
--- a/java/modules/transports/src/main/java/org/apache/synapse/transport/base/BaseUtils.java
+++ b/java/modules/transports/src/main/java/org/apache/synapse/transport/base/BaseUtils.java
@@ -33,6 +33,7 @@ import javax.xml.stream.XMLStreamReader;
 import org.apache.axiom.attachments.ByteArrayDataSource;
 import org.apache.axiom.om.OMAbstractFactory;
 import org.apache.axiom.om.OMElement;
+import org.apache.axiom.om.OMNamespace;
 import org.apache.axiom.om.OMOutputFormat;
 import org.apache.axiom.om.OMText;
 import org.apache.axiom.om.impl.builder.StAXBuilder;
@@ -228,15 +229,19 @@ public abstract class BaseUtils {
             try {
                 builder = new StAXOMBuilder(StAXUtils.createXMLStreamReader(in, charSetEnc));
                 builder.setOMBuilderFactory(OMAbstractFactory.getOMFactory());
-                String ns = builder.getDocumentElement().getNamespace().getNamespaceURI();
+                OMNamespace ns = builder.getDocumentElement().getNamespace();
+                if (ns != null) {
+                    String nsUri = ns.getNamespaceURI();
 
-                if (SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI.equals(ns)) {
-                    envelope = BaseUtils.getEnvelope(in, SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI);
-
-                } else if (SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI.equals(ns)) {
-                    envelope = BaseUtils.getEnvelope(in, SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI);
-
-                } else {
+                    if (SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI.equals(nsUri)) {
+                        envelope = BaseUtils.getEnvelope(in, SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+    
+                    } else if (SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI.equals(nsUri)) {
+                        envelope = BaseUtils.getEnvelope(in, SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+    
+                    }
+                }
+                if (envelope == null) {
                     // this is POX ... mark message as REST
                     msgContext.setDoingREST(true);
                     envelope = soapFactory.getDefaultEnvelope();
diff --git a/java/modules/transports/src/main/java/org/apache/synapse/transport/jms/JMSUtils.java b/java/modules/transports/src/main/java/org/apache/synapse/transport/jms/JMSUtils.java
index 78a05637c..35430ea52 100644
--- a/java/modules/transports/src/main/java/org/apache/synapse/transport/jms/JMSUtils.java
+++ b/java/modules/transports/src/main/java/org/apache/synapse/transport/jms/JMSUtils.java
@@ -309,6 +309,7 @@ public class JMSUtils extends BaseUtils {
                 ByteArrayOutputStream out = new ByteArrayOutputStream();
 
                 BytesMessage byteMsg = (BytesMessage) message;
+                byteMsg.reset();
                 for (int bytesRead = byteMsg.readBytes(buffer); bytesRead != -1;
                      bytesRead = byteMsg.readBytes(buffer)) {
                     out.write(buffer, 0, bytesRead);
diff --git a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java
index badccfe05..1dda4f483 100644
--- a/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java
+++ b/java/modules/transports/src/test/java/org/apache/synapse/transport/jms/JMSListenerTest.java
@@ -160,8 +160,7 @@ public class JMSListenerTest extends TransportListenerTestTemplate {
                 TestStrategy strategy = new TestStrategyImpl(useTopic, useContentTypeHeader);
                 if (useContentTypeHeader) {
                     addSOAPTests(strategy, suite);
-                    // TODO: POX tests don't work yet for JMS
-                    // addPOXTests(strategy, suite);
+                    addPOXTests(strategy, suite);
                     addSwATests(strategy, suite);
                 } else {
                     // If no content type header is used, SwA can't be used and the JMS transport
@@ -170,6 +169,8 @@ public class JMSListenerTest extends TransportListenerTestTemplate {
                             MessageContext.DEFAULT_CHAR_SET_ENCODING));
                     suite.addTest(new SOAP12TestCaseImpl(strategy, "SOAP12", testString,
                             MessageContext.DEFAULT_CHAR_SET_ENCODING));
+                    suite.addTest(new POXTestCaseImpl(strategy, "POX", testString,
+                            MessageContext.DEFAULT_CHAR_SET_ENCODING));
                 }
                 // TODO: these tests are temporarily disabled because of SYNAPSE-304
                 // addTextPlainTests(strategy, suite);
