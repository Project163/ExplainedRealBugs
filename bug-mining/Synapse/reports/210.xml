<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:08:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-452] low load: ERROR ClientHandler Unexpected HTTP protocol error: Request already submitted</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-452</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;I&apos;m seen http connection related exceptions when under &lt;em&gt;very&lt;/em&gt; low load.&lt;/p&gt;

&lt;p&gt;what do I do:&lt;br/&gt;
I proxy a soap interface of a backend, using wso2.&lt;br/&gt;
I issue a soap command using www.soapui.org.&lt;br/&gt;
After 1,2,3 commands (issue manually) the bus gives internal excpetions.&lt;/p&gt;

&lt;p&gt;what do I get:&lt;br/&gt;
from ESB logging.&lt;br/&gt;
2008-09-16 15:33:29,157 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1-vloeki_v01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-9&amp;#93;&lt;/span&gt; ERROR&lt;br/&gt;
ClientHandler Unexpected HTTP protocol error: Request already submitted&lt;br/&gt;
org.apache.http.HttpException: Request already submitted&lt;br/&gt;
      at&lt;br/&gt;
org.apache.http.impl.nio.DefaultNHttpClientConnection.submitRequest(DefaultNHttpClientConnection.java:203)&lt;/p&gt;



&lt;p&gt;reference:&lt;br/&gt;
more details &amp;amp; logs at:&lt;br/&gt;
&lt;a href=&quot;http://wso2.org/mailarchive/esb-java-user/2008-September/000812.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wso2.org/mailarchive/esb-java-user/2008-September/000812.html&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;workaround:&lt;br/&gt;
When not running the ESB and the backend on the same machine, (or better said, when routing the traffic between ESB and backend trough an other machine). The problem went away..&lt;br/&gt;
see &lt;a href=&quot;http://wso2.org/mailarchive/esb-java-user/2008-September/000840.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wso2.org/mailarchive/esb-java-user/2008-September/000840.html&lt;/a&gt;.&lt;br/&gt;
This obviously isn&apos;t a real fix.&lt;/p&gt;

&lt;p&gt;This issue might be related to:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-344&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SYNAPSE-344&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-341&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SYNAPSE-341&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-170&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HTTPCORE-170&lt;/a&gt;&lt;br/&gt;
however, I&apos;m seeing this under very low loads, very reproducable. (I &lt;em&gt;never&lt;/em&gt; can more that 3 commands in 4 seconds without getting this error)&lt;/p&gt;
</description>
                <environment>found on wso2-esb 1.7.1 (having synapse 1.2) running on debian.  XEN vm&amp;#39;s running on Intel HW.&lt;br/&gt;
&lt;br/&gt;
The back-end is a spring webapp (using cxf, using commons-httpclient)&lt;br/&gt;
We run the backend on the same VM as the ESB.</environment>
        <key id="12404748">SYNAPSE-452</key>
            <summary>low load: ERROR ClientHandler Unexpected HTTP protocol error: Request already submitted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asankha">Asankha Chamath Perera</assignee>
                                    <reporter username="harm">harm verhagen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Sep 2008 15:32:02 +0000</created>
                <updated>Tue, 24 Mar 2009 07:03:38 +0000</updated>
                            <resolved>Tue, 24 Mar 2009 07:03:38 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>2.0</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12676628" author="asankha" created="Wed, 25 Feb 2009 12:34:34 +0000"  >&lt;p&gt;I have fixed this already.. and will checkin the code shortly after a bit of more testing&lt;/p&gt;</comment>
                            <comment id="12688591" author="asankha" created="Tue, 24 Mar 2009 07:03:38 +0000"  >&lt;p&gt;Harm, can you help test this? The case where I could reproduce this was for pipelined requests, and for requests where the client issued another new request on the same keepalive channel, without fully reading the response the ESB wrote. If SOAP UI does that - it would be a fault of it&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11dgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>