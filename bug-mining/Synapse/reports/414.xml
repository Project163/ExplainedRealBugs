<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:09:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-1005] Validate mediator throws StackOverflowError, when the schema has Cyclic import or include</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-1005</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;sample proxy service &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;proxy xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://ws.apache.org/ns/synapse&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;validateRequest&quot;&lt;/span&gt; transports=&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt; startOnLoad=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;target&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;inSequence&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;validate&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;schema key=&lt;span class=&quot;code-quote&quot;&gt;&quot;A.xsd&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;resource location=&lt;span class=&quot;code-quote&quot;&gt;&quot;B.xsd&quot;&lt;/span&gt; key=&lt;span class=&quot;code-quote&quot;&gt;&quot;B.xsd&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;resource location=&lt;span class=&quot;code-quote&quot;&gt;&quot;C.xsd&quot;&lt;/span&gt; key=&lt;span class=&quot;code-quote&quot;&gt;&quot;C.xsd&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;resource location=&lt;span class=&quot;code-quote&quot;&gt;&quot;D.xsd&quot;&lt;/span&gt; key=&lt;span class=&quot;code-quote&quot;&gt;&quot;D.xsd&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;on-fail&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;makefault version=&lt;span class=&quot;code-quote&quot;&gt;&quot;soap11&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;code &lt;span class=&quot;code-keyword&quot;&gt;xmlns:tns&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2003/05/soap-envelope&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;tns:Receiver&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;reason value=&lt;span class=&quot;code-quote&quot;&gt;&quot;Invalid Request!!!&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;role/&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/makefault&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log level=&lt;span class=&quot;code-quote&quot;&gt;&quot;full&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;RESPONSE&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;header name=&lt;span class=&quot;code-quote&quot;&gt;&quot;To&quot;&lt;/span&gt; action=&lt;span class=&quot;code-quote&quot;&gt;&quot;remove&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;send/&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;drop/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/on-fail&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/validate&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;RESPONSE&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;header name=&lt;span class=&quot;code-quote&quot;&gt;&quot;To&quot;&lt;/span&gt; action=&lt;span class=&quot;code-quote&quot;&gt;&quot;remove&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;send/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/inSequence&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;description/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/proxy&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here A includes B, B includes C and  C includes D.&lt;br/&gt;
But say for example if C includes Both D and B there is a cyclic reference. &lt;/p&gt;

&lt;p&gt;So the following exception will be thrown&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.StackOverflowError
	at com.ctc.wstx.sw.BaseStreamWriter.&amp;lt;init&amp;gt;(BaseStreamWriter.java:259)
	at com.ctc.wstx.sw.BaseNsStreamWriter.&amp;lt;init&amp;gt;(BaseNsStreamWriter.java:122)
	at com.ctc.wstx.sw.SimpleNsStreamWriter.&amp;lt;init&amp;gt;(SimpleNsStreamWriter.java:59)
	at com.ctc.wstx.stax.WstxOutputFactory.createSW(WstxOutputFactory.java:275)
	at com.ctc.wstx.stax.WstxOutputFactory.createXMLStreamWriter(WstxOutputFactory.java:124)
	at org.apache.axiom.util.stax.wrapper.XMLOutputFactoryWrapper.createXMLStreamWriter(XMLOutputFactoryWrapper.java:66)
	at org.apache.axiom.util.stax.wrapper.WrappingXMLOutputFactory.createXMLStreamWriter(WrappingXMLOutputFactory.java:90)
	at org.apache.axiom.util.stax.dialect.WoodstoxOutputFactoryWrapper.createXMLStreamWriter(WoodstoxOutputFactoryWrapper.java:48)
	at org.apache.axiom.util.stax.wrapper.XMLOutputFactoryWrapper.createXMLStreamWriter(XMLOutputFactoryWrapper.java:66)
	at org.apache.axiom.om.util.StAXUtils$4.run(StAXUtils.java:364)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.axiom.om.util.StAXUtils.createXMLStreamWriter(StAXUtils.java:360)
	at org.apache.axiom.om.util.StAXUtils.createXMLStreamWriter(StAXUtils.java:353)
	at org.apache.axiom.om.impl.llom.OMSerializableImpl.serialize(OMSerializableImpl.java:130)
	at org.apache.synapse.util.resolver.ResourceMap.resolve(ResourceMap.java:93)
	at org.apache.synapse.util.jaxp.SchemaResourceResolver.resolveResource(SchemaResourceResolver.java:47)
	at org.apache.xerces.util.DOMEntityResolverWrapper.resolveEntity(Unknown Source)
	at org.apache.xerces.impl.XMLEntityManager.resolveEntity(Unknown Source)
	at org.apache.xerces.impl.xs.XMLSchemaLoader.resolveDocument(Unknown Source)
	at org.apache.xerces.impl.xs.traversers.XSDHandler.resolveSchema(Unknown Source)
	at org.apache.xerces.impl.xs.traversers.XSDHandler.constructTrees(Unknown Source)
	at org.apache.xerces.impl.xs.traversers.XSDHandler.constructTrees(Unknown Source)
	at org.apache.xerces.impl.xs.traversers.XSDHandler.constructTrees(Unknown Source)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12971738">SYNAPSE-1005</key>
            <summary>Validate mediator throws StackOverflowError, when the schema has Cyclic import or include</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hiranya">Hiranya Kasub Jayathilaka</assignee>
                                    <reporter username="bsendruan">Senduran</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Sat, 21 May 2016 05:09:50 +0000</created>
                <updated>Sat, 4 Jun 2016 18:00:06 +0000</updated>
                            <resolved>Fri, 27 May 2016 00:44:45 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15294733" author="bsendruan" created="Sat, 21 May 2016 05:20:08 +0000"  >&lt;p&gt;This is because, to resolve the cyclic includes SchemaResourceLSInput should contain the systemId (resource name).&lt;/p&gt;

&lt;p&gt;attaching diff&lt;/p&gt;</comment>
                            <comment id="15303268" author="hiranya" created="Fri, 27 May 2016 00:44:45 +0000"  >&lt;p&gt;I&apos;ve applied the patch after some preliminary testing. Please provide a test case too.&lt;/p&gt;</comment>
                            <comment id="15303312" author="hudson" created="Fri, 27 May 2016 01:33:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in Synapse - Trunk #5240 (See &lt;a href=&quot;https://builds.apache.org/job/Synapse%20-%20Trunk/5240/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Synapse%20-%20Trunk/5240/&lt;/a&gt;)&lt;br/&gt;
Adding systemId, publicId and baseURL to the SchemaResourceLSInput. Applied patch from Senduran at &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-1005&quot; title=&quot;Validate mediator throws StackOverflowError, when the schema has Cyclic import or include&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-1005&quot;&gt;&lt;del&gt;SYNAPSE-1005&lt;/del&gt;&lt;/a&gt; (hiranya: rev 1745702)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;java/modules/core/src/main/java/org/apache/synapse/util/jaxp/SchemaResourceLSInput.java&lt;/li&gt;
	&lt;li&gt;java/modules/core/src/main/java/org/apache/synapse/util/jaxp/SchemaResourceResolver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15315593" author="bsendruan" created="Sat, 4 Jun 2016 18:00:06 +0000"  >&lt;p&gt;Please find the test case for this issue. One thing I would like to point here is, I have added four new files as the resources to the test case. and I have committed them to the `repository/conf/sample/resources/validate/` so when the synapse distribution is created these 4 xsd files are also getting shipped. &lt;br/&gt;
So please comment on this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12808184" name="test-case-for-SYNAPSE-1005.diff" size="8927" author="bsendruan" created="Sat, 4 Jun 2016 18:00:06 +0000"/>
                            <attachment id="12805384" name="validate_mediator_cyclic_schema_fix.diff" size="2013" author="bsendruan" created="Sat, 21 May 2016 05:20:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ybaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>