<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:08:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-705] Fixing an issue in the script mediator</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-705</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;When using makefault mediator to generate custom error messages, we can populate the &amp;lt;details/&amp;gt; element with an xpath expression. When we set a property String in the script and retrieve later in the  configuration, this works perfectly. But if you set an XML object to the property and later retrieve it and populate the &amp;lt;details/&amp;gt; element, the XML within the &amp;lt;details/&amp;gt; element would not display properly. &lt;/p&gt;

&lt;p&gt;I would add a sample configuration to prove my point. I am currently working on a fix for this. Once I am done with the fix will attach it to the jira.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Heshan. &lt;/p&gt;</description>
                <environment>Ubuntu 10.10,&lt;br/&gt;
JDK 1.6</environment>
        <key id="12478859">SYNAPSE-705</key>
            <summary>Fixing an issue in the script mediator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="heshan">Heshan Theekshana Suriyaarachchi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Nov 2010 06:36:58 +0000</created>
                <updated>Tue, 27 Dec 2016 16:46:34 +0000</updated>
                                            <version>NIGHTLY</version>
                                    <fixVersion>FUTURE</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12927328" author="heshan" created="Tue, 2 Nov 2010 08:26:21 +0000"  >&lt;p&gt;Recreating the issue:&lt;br/&gt;
=================&lt;br/&gt;
You can use the Synapse configuration given in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; to recreate the issue. After starting Synapse, with the above mentioned configuration send a stockquote request. &lt;br/&gt;
ant stockquote -Daddurl=&lt;a href=&quot;http://localhost:9000/services/SimpleStockQuoteService&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9000/services/SimpleStockQuoteService&lt;/a&gt; -Dtrpurl=&lt;a href=&quot;http://localhost:8280/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/&lt;/a&gt; -Dsymbol=MSFT&lt;/p&gt;

&lt;p&gt;Capture the response message with TcpMon.&lt;/p&gt;

&lt;p&gt;Expected response message:&lt;br/&gt;
=======================&lt;br/&gt;
HTTP/1.1 500 Internal Server Error&lt;br/&gt;
Content-Type: text/xml; charset=UTF-8&lt;br/&gt;
Host: 127.0.0.1:8281&lt;br/&gt;
SOAPAction: &quot;urn:getQuote&quot;&lt;br/&gt;
Date: Tue, 02 Nov 2010 06:11:55 GMT&lt;br/&gt;
Transfer-Encoding: chunked&lt;/p&gt;

&lt;p&gt;34d&lt;br/&gt;
&amp;lt;?xml version=&apos;1.0&apos; encoding=&apos;UTF-8&apos;?&amp;gt;&lt;br/&gt;
   &amp;lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;soapenv:Header xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;wsa:MessageID&amp;gt;urn:uuid:96617199D43AF7762811061528457722739393852&amp;lt;/wsa:MessageID&amp;gt;&lt;br/&gt;
         &amp;lt;wsa:Action&amp;gt;urn:getQuote&amp;lt;/wsa:Action&amp;gt;&lt;br/&gt;
         &amp;lt;wsa:RelatesTo&amp;gt;urn:uuid:683D23ADE4892AD61A1288678308322&amp;lt;/wsa:RelatesTo&amp;gt;&lt;br/&gt;
      &amp;lt;/soapenv:Header&amp;gt;&lt;br/&gt;
      &amp;lt;soapenv:Body&amp;gt;&lt;br/&gt;
         &amp;lt;soapenv:Fault&amp;gt;&lt;br/&gt;
            &amp;lt;faultcode xmlns:tns=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&amp;gt;tns:Receiver&amp;lt;/faultcode&amp;gt;&lt;br/&gt;
            &amp;lt;faultstring&amp;gt;Currently , Address endpoint : [ Name : endpoint_urn_uuid_F3FC39CF93F681A11649593938524451942754528 ] [ State : SUSPENDED ]&amp;lt;/faultstring&amp;gt;&lt;br/&gt;
            &amp;lt;detail&amp;gt;&lt;br/&gt;
               &amp;lt;AppErrorCode&amp;gt;&lt;br/&gt;
                  &amp;lt;TimeStamp&amp;gt;11/2/10 11:41 AM&amp;lt;/TimeStamp&amp;gt;&lt;br/&gt;
                  &amp;lt;ErrorCode&amp;gt;8719&amp;lt;/ErrorCode&amp;gt;&lt;br/&gt;
                  &amp;lt;ErrorText&amp;gt;Issue has&amp;lt;/ErrorText&amp;gt;&lt;br/&gt;
               &amp;lt;/AppErrorCode&amp;gt;&lt;br/&gt;
            &amp;lt;/detail&amp;gt;&lt;br/&gt;
         &amp;lt;/soapenv:Fault&amp;gt;&lt;br/&gt;
      &amp;lt;/soapenv:Body&amp;gt;&lt;br/&gt;
   &amp;lt;/soapenv:Envelope&amp;gt;0&lt;/p&gt;

&lt;p&gt;Actual response message:&lt;br/&gt;
====================&lt;br/&gt;
HTTP/1.1 500 Internal Server Error&lt;br/&gt;
Content-Type: text/xml; charset=UTF-8&lt;br/&gt;
Host: 127.0.0.1:8281&lt;br/&gt;
SOAPAction: &quot;urn:getQuote&quot;&lt;br/&gt;
Date: Tue, 02 Nov 2010 06:11:55 GMT&lt;br/&gt;
Transfer-Encoding: chunked&lt;/p&gt;

&lt;p&gt;34d&lt;br/&gt;
&amp;lt;?xml version=&apos;1.0&apos; encoding=&apos;UTF-8&apos;?&amp;gt;&lt;br/&gt;
   &amp;lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;soapenv:Header xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;wsa:MessageID&amp;gt;urn:uuid:96617199D43AF7762811061528457722739393852&amp;lt;/wsa:MessageID&amp;gt;&lt;br/&gt;
         &amp;lt;wsa:Action&amp;gt;urn:getQuote&amp;lt;/wsa:Action&amp;gt;&lt;br/&gt;
         &amp;lt;wsa:RelatesTo&amp;gt;urn:uuid:683D23ADE4892AD61A1288678308322&amp;lt;/wsa:RelatesTo&amp;gt;&lt;br/&gt;
      &amp;lt;/soapenv:Header&amp;gt;&lt;br/&gt;
      &amp;lt;soapenv:Body&amp;gt;&lt;br/&gt;
         &amp;lt;soapenv:Fault&amp;gt;&lt;br/&gt;
            &amp;lt;faultcode xmlns:tns=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&amp;gt;tns:Receiver&amp;lt;/faultcode&amp;gt;&lt;br/&gt;
            &amp;lt;faultstring&amp;gt;Currently , Address endpoint : [ Name : endpoint_urn_uuid_F3FC39CF93F681A11649593938524451942754528 ] [ State : SUSPENDED ]&amp;lt;/faultstring&amp;gt;&lt;br/&gt;
            &amp;lt;detail&amp;gt;&amp;lt;AppErrorCode&amp;gt;&amp;lt;TimeStamp&amp;gt;10/26/10 12:49 PM&amp;lt;/TimeStamp&amp;gt;&amp;lt;ErrorCode&amp;gt;8719&amp;lt;/ErrorCode&amp;gt;&amp;lt;ErrorText&amp;gt;Issue has &amp;lt;/ErrorText&amp;gt;&amp;lt;/AppErrorCode&amp;gt;&amp;lt;/detail&amp;gt; &lt;br/&gt;
         &amp;lt;/soapenv:Fault&amp;gt;&lt;br/&gt;
      &amp;lt;/soapenv:Body&amp;gt;&lt;br/&gt;
   &amp;lt;/soapenv:Envelope&amp;gt;0&lt;/p&gt;

&lt;p&gt;Therefore, if you look at the &amp;lt;detail/&amp;gt; element, you can understand the issue.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - &lt;a href=&quot;http://heshans.blogspot.com/2010/10/generate-custom-error-messages-with.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://heshans.blogspot.com/2010/10/generate-custom-error-messages-with.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12927340" author="heshan" created="Tue, 2 Nov 2010 09:31:00 +0000"  >&lt;p&gt;Attached the patch to fix the issue.&lt;/p&gt;</comment>
                            <comment id="12935657" author="supun" created="Thu, 25 Nov 2010 06:36:47 +0000"  >&lt;p&gt;Applied the patch. Thanks Heshan for the contribution.&lt;/p&gt;</comment>
                            <comment id="12935821" author="hiranya" created="Thu, 25 Nov 2010 18:05:23 +0000"  >&lt;p&gt;The patch doesn&apos;t solve the problem entirely. Look at the import introduced to the ScriptMessageContext:&lt;/p&gt;

&lt;p&gt;import org.mozilla.javascript.xml.XMLObject;&lt;/p&gt;

&lt;p&gt;Clearly this is JavaScript specific. We cannot introduce language specific code into ScriptMessageContext or ScriptMediator. We need to fix this the proper way.&lt;/p&gt;</comment>
                            <comment id="12967097" author="heshan" created="Mon, 6 Dec 2010 06:20:59 +0000"  >&lt;p&gt;Hi Hiranya, &lt;/p&gt;

&lt;p&gt;I will fix it and attach a patch. Thanks for pointing out the issue. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12458619" name="SYNAPSE-705.patch" size="3772" author="heshan" created="Tue, 2 Nov 2010 09:30:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183925</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17tbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>