<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-295] The clonePartially() method of org.apache.synapse.util.MessageHelper does not copy properties.</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-295</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;The clonePartially() method of org.apache.synapse.util.MessageHelper does not copy properties to the new MessageContext.  The for-loop that walks through &apos;ori.getProperties().keySet()&apos; should be replaced with a while loop over the Iterator returned by &apos;ori.getPropertyNames()&apos;.&lt;/p&gt;

&lt;p&gt;You might expect these two iterations to be identical, especially when you see that &apos;getPropertyNames()&apos; returns &apos;properties.keySet().iterator()&apos;.  But it&apos;s not that simple.  The Axis2 MessageContext class extends AbstractContext and overrides &apos;getProperties()&apos; with an implementation that doesn&apos;t actually use the properties map.  So, &apos;getProperties()&apos; and &apos;getPropertyNames()&apos; work from two different underlying maps.&lt;/p&gt;

&lt;p&gt;The assertion in this code fragment will fail:&lt;/p&gt;

&lt;p&gt;String key = &quot;propKey&quot;;&lt;br/&gt;
MessageContext origMc = new MessageContext();&lt;br/&gt;
origMc.setProperty( key, &quot;propValue&quot; );&lt;br/&gt;
MessageContext newMc = MessageHelper.clonePartially( origMc );&lt;br/&gt;
Object result = newMc.getProperty( key );&lt;br/&gt;
assert( result != null );&lt;/p&gt;</description>
                <environment>Windows XP</environment>
        <key id="12395539">SYNAPSE-295</key>
            <summary>The clonePartially() method of org.apache.synapse.util.MessageHelper does not copy properties.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ruwan">Ruwan Linton</assignee>
                                    <reporter username="rod.burgett@computer.org">Rod Burgett</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 May 2008 17:19:01 +0000</created>
                <updated>Thu, 8 May 2008 05:01:53 +0000</updated>
                            <resolved>Thu, 8 May 2008 05:01:53 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12595115" author="ruwan" created="Thu, 8 May 2008 04:03:51 +0000"  >&lt;p&gt;Need to fix this for the 1.2 release&lt;/p&gt;</comment>
                            <comment id="12595117" author="ruwan" created="Thu, 8 May 2008 04:45:13 +0000"  >&lt;p&gt;Good catch Rod, Your explanation is correct and I think this is a issue in axis2 because the getProperties should return the whole hierarchy (must include the message context properties as well). Any way getProperties is now deprecated.&lt;/p&gt;

&lt;p&gt;Also what my intention was just to copy the message context properties in here. So getPropertyNames seems to be right function to use.&lt;/p&gt;

&lt;p&gt;Thanks, for pointing this. Will add your reproduction code as a test case in to synapse as well.&lt;/p&gt;</comment>
                            <comment id="12595121" author="ruwan" created="Thu, 8 May 2008 05:01:53 +0000"  >&lt;p&gt;Fixed in the SVN trunk, Thanks Rod for finding this out&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11hbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216772</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>