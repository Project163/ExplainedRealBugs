<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-424] JMS transport uses JMS properties in a way that violates the JMS specifications</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-424</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;According to section 3.5.1 of the JMS specification (version 1.1), &quot;Property names must obey the rules for a message selector identifier.&quot; According to section 3.8.1.1 on selectors, &quot;An identifier is an unlimited-length character sequence that must begin with a Java identifier start character; all following characters must be Java identifier part characters.&quot; The JMS transport&apos;s use of a property named &quot;Content-Type&quot; is in violation of this specification.&lt;/p&gt;

&lt;p&gt;Note that some JMS providers (such as qpid) accept illegal identifiers while others (such as WebSphere&apos;s SIBus client) don&apos;t.&lt;/p&gt;</description>
                <environment>N/A</environment>
        <key id="12402154">SYNAPSE-424</key>
            <summary>JMS transport uses JMS properties in a way that violates the JMS specifications</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="veithen">Andreas Veithen-Knowles</assignee>
                                    <reporter username="veithen">Andreas Veithen-Knowles</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Aug 2008 20:03:28 +0000</created>
                <updated>Sun, 30 Aug 2009 15:38:46 +0000</updated>
                            <resolved>Sun, 9 Nov 2008 17:17:41 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>2.0</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12645192" author="irantha" created="Wed, 5 Nov 2008 11:14:31 +0000"  >&lt;p&gt;Patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-424&quot; title=&quot;JMS transport uses JMS properties in a way that violates the JMS specifications&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-424&quot;&gt;&lt;del&gt;SYNAPSE-424&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-478&quot; title=&quot;Synapse exceptions with JBossMQ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-478&quot;&gt;&lt;del&gt;SYNAPSE-478&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Piggybacked &quot;Content-Type&quot; on a property  named &quot;ContentType&quot; when former is &lt;br/&gt;
not available (&lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-424&quot; title=&quot;JMS transport uses JMS properties in a way that violates the JMS specifications&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-424&quot;&gt;&lt;del&gt;SYNAPSE-424&lt;/del&gt;&lt;/a&gt;). Seems ther property errors (&lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-478&quot; title=&quot;Synapse exceptions with JBossMQ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-478&quot;&gt;&lt;del&gt;SYNAPSE-478&lt;/del&gt;&lt;/a&gt;) can be ignored.&lt;/p&gt;</comment>
                            <comment id="12645202" author="asankha" created="Wed, 5 Nov 2008 12:08:33 +0000"  >&lt;p&gt;Its better to link &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-478&quot; title=&quot;Synapse exceptions with JBossMQ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-478&quot;&gt;&lt;del&gt;SYNAPSE-478&lt;/del&gt;&lt;/a&gt; to this issue, thus uploading a patch to one issue will be sufficient, to minimize duplication&lt;/p&gt;</comment>
                            <comment id="12645321" author="veithen" created="Wed, 5 Nov 2008 21:03:05 +0000"  >&lt;p&gt;I think we should take advantage of this issue to make the JMS transport more flexible so that it can interoperate with a wider range of existing JMS based applications. In particular, for incoming messages, we should allow the user&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;to freely configure the JMS property used to determine the content type,&lt;/li&gt;
	&lt;li&gt;to force a given content type (this is already supported),&lt;/li&gt;
	&lt;li&gt;to define the default content type (if none is given in the message), maybe even per message type (TextMessage and BytesMessage).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It should be noted that in order to allow a single Axis2 instance to interact with different applications, these options must be configurable at the service level (maybe with default values configurable at the transport level). If we want to satisfy these requirement, we should implement a simple rule based configuration model, more precisely, something like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;parameter name=&quot;transport.jms.ContentType&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;jmsProperty&amp;gt;Content-Type&amp;lt;/jmsProperty&amp;gt;&lt;br/&gt;
  &amp;lt;jmsProperty&amp;gt;ContentType&amp;lt;/jmsProperty&amp;gt;&lt;br/&gt;
  &amp;lt;default&amp;gt;application/xml&amp;lt;/default&amp;gt;&lt;br/&gt;
&amp;lt;/parameter&amp;gt;&lt;/p&gt;

&lt;p&gt;Or with different default content types per message type:&lt;/p&gt;

&lt;p&gt;&amp;lt;parameter name=&quot;transport.jms.ContentType&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;textMessage&amp;gt;text/plain&amp;lt;/textMessage&amp;gt;&lt;br/&gt;
  &amp;lt;bytesMessage&amp;gt;application/octet-stream&amp;lt;/bytesMessage&amp;gt;&lt;br/&gt;
&amp;lt;/parameter&amp;gt;&lt;/p&gt;

&lt;p&gt;I think that this is reasonably simple, but yet very powerful and it should cover a wide variety of use cases.&lt;/p&gt;

&lt;p&gt;We should also allow to specify the JMS property to use for the content type of outgoing messages. In my opinion this should be done by defining an additional parameter in the EPRs. This is a bit ugly because it makes the jms:/ URIs even longer, but I think it&apos;s the only consistent way to do this. The JMSListener#getEPRsForService method would then calculate this parameter based on the first &quot;jmsProperty&quot; rule for the service.&lt;/p&gt;</comment>
                            <comment id="12645387" author="asankha" created="Thu, 6 Nov 2008 02:49:32 +0000"  >&lt;p&gt;Andreas&lt;/p&gt;

&lt;p&gt;The suggestion is very good.. However, for the last paragraph of your comment, I think we should rely on MC properties.. I also wanted to update the Endpoint and Send mediator to be able to specify these at that level. e.g:&lt;/p&gt;

&lt;p&gt;&amp;lt;send&amp;gt;&lt;br/&gt;
    &amp;lt;property name=&quot;transport-specific-property&quot; value=&quot;yy&quot;/&amp;gt;&lt;br/&gt;
    ....&lt;br/&gt;
    (endpointref | endpoint)+&lt;br/&gt;
&amp;lt;/send&amp;gt;&lt;/p&gt;

&lt;p&gt;and &lt;/p&gt;

&lt;p&gt;&amp;lt;endpoint &lt;span class=&quot;error&quot;&gt;&amp;#91;name=&amp;quot;string&amp;quot;&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;key=&amp;quot;string&amp;quot;&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
  &amp;lt;property name=&quot;transport-specific-property&quot; value=&quot;yy&quot;/&amp;gt;&lt;br/&gt;
  ..&lt;br/&gt;
  address-endpoint | default-endpoint | wsdl-endpoint | load-balanced-endpoint | fail-over-endpoint&lt;br/&gt;
&amp;lt;/endpoint&amp;gt; &lt;/p&gt;

&lt;p&gt;i think this will allow one to set endpoint specific transport properties in one place and reuse-it, and prevent the clutter of EPR&apos;s as well, and reduce the code needed to write a mediation, without using many instances of the property mediator..&lt;/p&gt;

&lt;p&gt;asankha&lt;/p&gt;</comment>
                            <comment id="12645403" author="irantha" created="Thu, 6 Nov 2008 05:50:54 +0000"  >&lt;p&gt;Is this configuration support  encapsulating a general Swa/MTOM payload into a JMS message? what if number of attachments for a message is not fixed. Issue is mapping HTTP headers into other transport headers. &lt;/p&gt;

&lt;p&gt;Simply making Axis2 engine assumes a default message conetent-type (text/xml; charset=utf-8) when content-type is unknown independent of the transport will resolve majority of issues. &lt;/p&gt;</comment>
                            <comment id="12645562" author="veithen" created="Thu, 6 Nov 2008 20:01:08 +0000"  >&lt;p&gt;@Asankha: If you use a MC property instead of an EPR parameter, this means that the information from the WSDL alone is no longer sufficient to send a message to the endpoint. Personally I think that this is a more important aspect than the additional clutter. Note that we could easily support both approaches. In that case, the EPR generated by JMSListener#getEPRsForService would have the additional parameter, so that the WSDL produced by Axis2 is complete. On the other hand, in a Synapse mediation, users could use the MC property if they prefer.&lt;/p&gt;

&lt;p&gt;@Irantha: I don&apos;t understand your point about the fixed number of attachments. Also I don&apos;t see where HTTP headers would have to be mapped. Since the JMS transport now relies on message builders, it should support any content type, including SwA and MTOM. The particularity with SwA (not sure about MTOM) is that the content type contains information about the MIME boundary and SOAP part ID. For the JMS transport this means that messages of this type can only be processed if the sender adds a JMS property with the content type.&lt;/p&gt;

</comment>
                            <comment id="12645660" author="asankha" created="Fri, 7 Nov 2008 01:43:38 +0000"  >&lt;p&gt;Andreas&lt;/p&gt;

&lt;p&gt;With JMS, sometimes you cannot expose all properties over the EPR.. for example credentials.. Also check this &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, which is the proposed spec for SOAP / JMS&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/Submission/SOAPJMS/#binding-properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/Submission/SOAPJMS/#binding-properties&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think supporting both approaches would be fine..&lt;/p&gt;

&lt;p&gt;asankha&lt;/p&gt;</comment>
                            <comment id="12645665" author="veithen" created="Fri, 7 Nov 2008 02:05:48 +0000"  >&lt;p&gt;There is always an exception to the rule &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;BTW, that reminds me of something: I think that the JMS transport actually may expose credentials in the EPR! If I remember well, some time ago there was a modification to expose all JNDI properties in the EPR and I think the credentials are not filtered out. To be confirmed.&lt;/p&gt;</comment>
                            <comment id="12646096" author="veithen" created="Sun, 9 Nov 2008 17:17:41 +0000"  >&lt;p&gt;Fixed. See transport documentation for more details on how to configure the message property to be used for the content type of incoming and outgoing messages.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12434260">WSCOMMONS-499</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12407832">SYNAPSE-478</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12393365" name="commons_jms.patch" size="7689" author="irantha" created="Wed, 5 Nov 2008 11:14:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11cvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>