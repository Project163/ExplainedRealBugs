<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-218] TextFileDataSource violates OMDataSource contract</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-218</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;TextFileDataSource is an implementation of OMDataSource representing text wrapped inside a &amp;lt;text&amp;gt; element. However, it doesn&apos;t respect the contract of OMDataSource:&lt;/p&gt;

&lt;p&gt;1) serialize(OutputStream, OMOutputFormat) doesn&apos;t output the &amp;lt;text&amp;gt; wrapper element (actually the code is commented out) and doesn&apos;t take into account the character encoding specified by the OMOutputFormat.&lt;br/&gt;
2) serialize(Writer, OMOutputFormat) only outputs an empty &amp;lt;text&amp;gt; element.&lt;br/&gt;
3) TextFileDataSource will give unexpected results with multiple invocations (of the same or different methods) on the same instance, because the invocation of any of the methods consumes the InputStream.&lt;/p&gt;

&lt;p&gt;It should be noted that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;VFSTransportSender relies on the behavior described in point 1;&lt;/li&gt;
	&lt;li&gt;the intention of the behavior described in point 2 is probably to avoid dumping the entire text data when the message is logged.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, the described behavior might lead to unexpected results in other situations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12385296">SYNAPSE-218</key>
            <summary>TextFileDataSource violates OMDataSource contract</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="veithen">Andreas Veithen-Knowles</assignee>
                                    <reporter username="veithen">Andreas Veithen-Knowles</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Dec 2007 22:10:16 +0000</created>
                <updated>Tue, 29 Apr 2008 21:30:33 +0000</updated>
                            <resolved>Tue, 29 Apr 2008 21:30:33 +0000</resolved>
                                    <version>NIGHTLY</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12555019" author="veithen" created="Sun, 30 Dec 2007 19:21:04 +0000"  >&lt;p&gt;The effect of point 1 (and the fact that VFSTransportSender relies on the behavior described there) can be seen on the following sequence:&lt;/p&gt;

&lt;p&gt;  &amp;lt;sequence name=&quot;in&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;xslt key=&quot;encoding_test.xslt&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;log level=&quot;full&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;send&amp;gt;&lt;br/&gt;
      &amp;lt;endpoint&amp;gt;&lt;br/&gt;
        &amp;lt;address uri=&quot;vfs:&lt;a href=&quot;file:///Users/veithen/workspace/synapse-vfs-test/data/out&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///Users/veithen/workspace/synapse-vfs-test/data/out&lt;/a&gt;&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
    &amp;lt;/send&amp;gt;&lt;br/&gt;
  &amp;lt;/sequence&amp;gt;&lt;/p&gt;

&lt;p&gt;The log mediator will cause the OMSourcedElementImpl to be expanded. In this case, OMSourcedElementImpl#serializeAndConsume will no longer delegate to OMDataSource#serialize but to OMElementImpl#serializeAndConsume, which includes the wrapper element in its output, leading to an unexpected result.&lt;/p&gt;

&lt;p&gt;The effect of point 3 can be seen on the following sequence:&lt;/p&gt;

&lt;p&gt;  &amp;lt;sequence name=&quot;in&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;xslt key=&quot;encoding_test.xslt&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;send&amp;gt;&lt;br/&gt;
      &amp;lt;endpoint&amp;gt;&lt;br/&gt;
        &amp;lt;address uri=&quot;vfs:&lt;a href=&quot;file:///Users/veithen/workspace/synapse-vfs-test/data/out&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///Users/veithen/workspace/synapse-vfs-test/data/out&lt;/a&gt;&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
    &amp;lt;/send&amp;gt;&lt;br/&gt;
    &amp;lt;send&amp;gt;&lt;br/&gt;
      &amp;lt;endpoint&amp;gt;&lt;br/&gt;
        &amp;lt;address uri=&quot;vfs:&lt;a href=&quot;file:///Users/veithen/workspace/synapse-vfs-test/data/out2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///Users/veithen/workspace/synapse-vfs-test/data/out2&lt;/a&gt;&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
    &amp;lt;/send&amp;gt;&lt;br/&gt;
  &amp;lt;/sequence&amp;gt;&lt;/p&gt;

&lt;p&gt;Sending to the first endpoint will consume the input stream, causing an empty file to be sent to the second endpoint.&lt;/p&gt;</comment>
                            <comment id="12556496" author="asankha" created="Mon, 7 Jan 2008 06:13:58 +0000"  >&lt;p&gt;fix post 1.1.1 release&lt;/p&gt;</comment>
                            <comment id="12584622" author="asankha" created="Wed, 2 Apr 2008 15:03:08 +0000"  >&lt;p&gt;Andreas, would it be possible for you to help with this? &lt;/p&gt;</comment>
                            <comment id="12592883" author="veithen" created="Mon, 28 Apr 2008 19:39:48 +0000"  >&lt;ul&gt;
	&lt;li&gt;The two serialize methods have been modified to solve points 1 and 2. These changes will be committed once write access to svn.apache.org is enabled again.&lt;/li&gt;
	&lt;li&gt;Point 3 has been solved in revision #640431 by implementing OMDataSourceExt and making it non destructive.&lt;/li&gt;
	&lt;li&gt;The changes in revision #639062 make sure that VFSTransportSender (and also MailTransportSender) no longer rely on the behavior described in point 1.&lt;/li&gt;
	&lt;li&gt;For the logging issue: currently the entire text data is always dumped, but this is not (only) related to the behavior of the serialize(Writer, OMOutputFormat) method. Since dumping the entire content will cause problems for very large messages, a new issue will be opened for this.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12593131" author="veithen" created="Tue, 29 Apr 2008 21:30:33 +0000"  >&lt;p&gt;Committed changes to SVN and opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-279&quot; title=&quot;Avoid dumping of large payloads in LogMediator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-279&quot;&gt;SYNAPSE-279&lt;/a&gt; for the log issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11ljb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>217455</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>