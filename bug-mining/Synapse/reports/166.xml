<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-439] JMS transport mixes JNDI names and destination names</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-439</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;JMSSender contains the following two instructions:&lt;/p&gt;

&lt;p&gt;session = jmsConnectionFactory.getSessionForDestination(JMSUtils.getDestination(targetAddress));&lt;/p&gt;

&lt;p&gt;session = jmsConnectionFactory.getSessionForDestination(jmsOut.getDestination().toString());&lt;/p&gt;

&lt;p&gt;While in the first case the lookup of the session is done using the JNDI name of the destination, in the second case the physical destination name is used. The documentation and code in JMSConnectionFactory#getSessionForDestination indicates that this method expects a JNDI name as argument.&lt;/p&gt;

&lt;p&gt;The whole principle of caching a session for each destination should be reviewed. Indeed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A JMS session doesn&apos;t depend on the destination.&lt;/li&gt;
	&lt;li&gt;A client can specify destinations in the JMS Reply-To header. This means that the code adds a new session to the cache each time a client uses a reply-to destination the transport has not seen before. These sessions will only be freed when the transport is shut down. This is particularly bad if the client uses temporary queues.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It would be better to have a pool of JMS sessions for each connection (factory).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12403848">SYNAPSE-439</key>
            <summary>JMS transport mixes JNDI names and destination names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="veithen">Andreas Veithen-Knowles</assignee>
                                    <reporter username="veithen">Andreas Veithen-Knowles</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Sep 2008 10:06:51 +0000</created>
                <updated>Fri, 27 Feb 2009 13:42:24 +0000</updated>
                            <resolved>Fri, 27 Feb 2009 13:42:24 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>2.0</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12628970" author="veithen" created="Sun, 7 Sep 2008 13:33:44 +0000"  >&lt;p&gt;Actually the situation is a bit more complicated than I thought initially because some JMS providers (such as qpid) don&apos;t make a distinction between queue and topic connections. With these providers it is possible to create a QueueConnection using QueueConnectionFactory#createQueueConnection and later cast it to a TopicConnection to create a TopicSession. The JMS transport implicitly supports this, even if it is not obvious to see this by looking at the code.&lt;/p&gt;

&lt;p&gt;On the other hand it is not possible to mix queue and topic sessions. E.g. even if qpid internally uses a single class for queue and topic sessions, it uses AMQQueueSessionAdaptor and AMQTopicSessionAdapter wrappers to explicitly forbid using a queue session to work with topics and vice-versa.&lt;/p&gt;

&lt;p&gt;Therefore a single session pool is not sufficient and we would need to pool sessions by destination type.&lt;/p&gt;</comment>
                            <comment id="12677226" author="asankha" created="Fri, 27 Feb 2009 02:26:52 +0000"  >&lt;p&gt;Andreas, is this still an issue with the updated JMS transport?&lt;/p&gt;</comment>
                            <comment id="12677365" author="veithen" created="Fri, 27 Feb 2009 13:42:24 +0000"  >&lt;p&gt;No, I think this issue should have been solved by the changes in the JMS transport.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11ddz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>