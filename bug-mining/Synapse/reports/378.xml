<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:09:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-883] ClassCastException: org.apache.axiom.om.impl.llom.OMElementImpl cannot be cast to org.apache.axiom.soap.SOAPFault error occurs when handling SOAPFault in out path of REST API</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-883</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;1. Send a POST request through the REST API to an endpoint in AS &lt;br/&gt;
2. If the backend service is inactive, we will get a soap FAult and the following exception will be thrown by ESB &lt;/p&gt;


&lt;p&gt;ERROR - NativeWorkerPool Uncaught exception &lt;br/&gt;
java.lang.ClassCastException: org.apache.axiom.om.impl.llom.OMElementImpl cannot be cast to org.apache.axiom.soap.SOAPFault &lt;br/&gt;
at org.apache.axiom.soap.impl.llom.SOAPBodyImpl.getFault(SOAPBodyImpl.java:120) &lt;br/&gt;
at org.apache.synapse.util.POXUtils.convertSOAPFaultToPOX(POXUtils.java:42) &lt;br/&gt;
at org.apache.synapse.core.axis2.Axis2Sender.sendBack(Axis2Sender.java:91) &lt;br/&gt;
at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.send(Axis2SynapseEnvironment.java:265) &lt;br/&gt;
at org.apache.synapse.mediators.builtin.SendMediator.mediate(SendMediator.java:84) &lt;br/&gt;
at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:60) &lt;br/&gt;
at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:114) &lt;br/&gt;
at org.apache.synapse.rest.Resource.process(Resource.java:306) &lt;br/&gt;
at org.apache.synapse.rest.API.process(API.java:208) &lt;br/&gt;
at org.apache.synapse.rest.RESTRequestHandler.dispatchToAPI(RESTRequestHandler.java:76) &lt;br/&gt;
at org.apache.synapse.rest.RESTRequestHandler.process(RESTRequestHandler.java:50) &lt;br/&gt;
at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.injectMessage(Axis2SynapseEnvironment.java:180) &lt;br/&gt;
at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:370) &lt;br/&gt;
at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:160) &lt;br/&gt;
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181) &lt;br/&gt;
at org.apache.synapse.transport.nhttp.ClientWorker.run(ClientWorker.java:275) &lt;br/&gt;
at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:173) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) &lt;br/&gt;
at java.lang.Thread.run(Thread.java:662) &lt;/p&gt;</description>
                <environment>ubuntu  12.04</environment>
        <key id="12595938">SYNAPSE-883</key>
            <summary>ClassCastException: org.apache.axiom.om.impl.llom.OMElementImpl cannot be cast to org.apache.axiom.soap.SOAPFault error occurs when handling SOAPFault in out path of REST API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hiranya">Hiranya Kasub Jayathilaka</assignee>
                                    <reporter username="dushan@wso2.com">Dushan Sachinda Abeyruwan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jun 2012 16:57:35 +0000</created>
                <updated>Sun, 18 Aug 2013 00:22:20 +0000</updated>
                            <resolved>Sat, 20 Jul 2013 23:13:55 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>FUTURE</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13401513" author="dushan@wso2.com" created="Tue, 26 Jun 2012 16:58:06 +0000"  >&lt;p&gt;The patch is attached herewith&lt;/p&gt;</comment>
                            <comment id="13424347" author="veithen" created="Sat, 28 Jul 2012 13:50:14 +0000"  >&lt;p&gt;The ClassCastException occurs because of an inconsistency in the implementation of the hasFault and getFault methods in SOAPBody. According to the documentation, hasFault should return true and getFault should return a non-null value if and only if the SOAPBody contains a SOAPFault. However, the code actually checks the name of the element. This causes problems if the SOAPBody contains an OMElement that is not a SOAPFault, but that has the namespace URI and local name of a SOAP fault, as may be the case for REST/POX. That has now been fixed in Axiom. Therefore the ClassCastException should no longer occur. Can you retest this with a current Synapse snapshot and determine if other changes are still necessary?&lt;/p&gt;</comment>
                            <comment id="13714568" author="hiranya" created="Sat, 20 Jul 2013 23:13:55 +0000"  >&lt;p&gt;You&apos;re right Andreas. This scenario works fine in the latest trunk (tested with sample 800). Synapse converts the SOAP fault into a POX fault and sends back as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533499" name="Resource.java.patch" size="1279" author="dushan@wso2.com" created="Tue, 26 Jun 2012 16:58:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17sxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253657</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>