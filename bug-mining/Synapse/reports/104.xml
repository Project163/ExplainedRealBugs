<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-261] VFS transport doesn&apos;t handle text file encoding</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-261</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;ul&gt;
	&lt;li&gt;VFSUtils#getMessageTextPayload reads the file into a byte[] and constructs a String object from it without specifying the encoding.&lt;/li&gt;
	&lt;li&gt;VFSTransportSender#populateResponseFile uses String#getBytes without specifying the encoding.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12392211">SYNAPSE-261</key>
            <summary>VFS transport doesn&apos;t handle text file encoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="veithen">Andreas Veithen-Knowles</assignee>
                                    <reporter username="veithen">Andreas Veithen-Knowles</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Mar 2008 22:25:39 +0000</created>
                <updated>Sun, 11 May 2008 22:20:53 +0000</updated>
                            <resolved>Sun, 11 May 2008 22:20:53 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12584606" author="asankha" created="Wed, 2 Apr 2008 14:50:58 +0000"  >&lt;p&gt;Andreas, can you help out with this one?&lt;/p&gt;</comment>
                            <comment id="12591607" author="ruwan" created="Wed, 23 Apr 2008 10:51:45 +0000"  >&lt;p&gt;Andreas, will you be able to look in to this, or have you started work on this issue? If not I will take this over.&lt;/p&gt;

&lt;p&gt;Ruwan&lt;/p&gt;</comment>
                            <comment id="12592190" author="veithen" created="Thu, 24 Apr 2008 22:44:28 +0000"  >&lt;p&gt;First of all, an additional comment: I think the problem is not limited to the VFS transport and that we have a similar problem in MailTransportSender#sendMail and in the PlainTextFormatter class added by Asankha some time ago.&lt;/p&gt;

&lt;p&gt;I was asking myself whether it would not be better to remove the code that handles plain text (and also binary data) from the VFS and mail transports and use MessageFormatters to handle these cases (with correct character encoding handling once and for all). I didn&apos;t have the time yet to analyze this further. What is your opinion?&lt;/p&gt;</comment>
                            <comment id="12592290" author="ruwan" created="Fri, 25 Apr 2008 06:53:16 +0000"  >&lt;p&gt;Well, I don&apos;t have a much awareness about the issue and how to resolve it. I will have a look around and try to fix this issue.&lt;/p&gt;</comment>
                            <comment id="12593957" author="veithen" created="Sat, 3 May 2008 01:17:56 +0000"  >&lt;p&gt;Solved the issue for outgoing messages sent through the VFS and mail transport:&lt;br/&gt;
1) VFSTransportSender and MailTransportSender now always use the encoding as determined by BaseUtils.getOMOutputFormat. Since this method uses HTTPTransportUtils.getCharSetEncoding, it either takes the CHARACTER_SET_ENCODING property from the message context or uses a default encoding.&lt;br/&gt;
2) The &amp;lt;address&amp;gt; element in endpoint definitions can now have an &quot;encoding&quot; attribute. This value is stored in a new property of EndpointDefinition, which is used by Axis2FlexibleMEPClient to set the CHARACTER_SET_ENCODING property in the message context of the outgoing message.&lt;/p&gt;

&lt;p&gt;These changes allow the user to specify the encoding by endpoint:&lt;/p&gt;

&lt;p&gt;&amp;lt;send&amp;gt;&lt;br/&gt;
  &amp;lt;endpoint&amp;gt;&lt;br/&gt;
    &amp;lt;address uri=&quot;vfs:&lt;a href=&quot;file:///Users/veithen/workspace/synapse-vfs-test/data/out&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///Users/veithen/workspace/synapse-vfs-test/data/out&lt;/a&gt;&quot; encoding=&quot;UTF-16&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
&amp;lt;/send&amp;gt;&lt;/p&gt;

&lt;p&gt;Still to be done:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Solve encoding issue for files picked up by VFSTransportListener.&lt;/li&gt;
	&lt;li&gt;Correct PlainTextFormatter.&lt;/li&gt;
	&lt;li&gt;Update documentation/samples.&lt;/li&gt;
	&lt;li&gt;Try to isolate the binary/text payload handling code (into a MessageFormatter?) and reuse it in the different transports.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12595313" author="ruwan" created="Thu, 8 May 2008 16:23:47 +0000"  >&lt;p&gt;Andreas, will it be possible for you to finish up this for the 1.2 release? For the moment it is marked for the 1.2 release. &lt;/p&gt;

&lt;p&gt;If this takes time and if you think fixing this may have any affect on the stability, we can move this as post 1.2, What do you think?&lt;/p&gt;</comment>
                            <comment id="12595505" author="veithen" created="Fri, 9 May 2008 08:45:38 +0000"  >&lt;p&gt;The problem is fixed for outgoing messages, but not yet for incoming text files picked up by the VFS transport. I will try to have a look at this during the weekend, but probably we will have to move this to the next release.&lt;/p&gt;</comment>
                            <comment id="12595907" author="veithen" created="Sun, 11 May 2008 12:55:39 +0000"  >&lt;ul&gt;
	&lt;li&gt;The VFS and mail transports now rely on message formatters (selected by BaseUtils.getMessageFormatter) for all outgoing messages. PlainTextFormatter has been corrected to respect charset encodings. See commit comments for more details.&lt;/li&gt;
	&lt;li&gt;The encoding issue for files picked up by VFSTransportListener has been solved using the strategy outlined in &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-304&quot; title=&quot;BaseUtils uses incorrect strategy to distinguish between XML, text and binary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-304&quot;&gt;&lt;del&gt;SYNAPSE-304&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The issue is now solved completely, but still need to check documentation and samples.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12395788">SYNAPSE-304</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12395800">SYNAPSE-306</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11bwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>