<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:09:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-998] Memory leak in VFS</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-998</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;Hi, &lt;br/&gt;
I have tested the VFS functionality with 500 proxies and each proxy pointed to different 500 folders. Then send around 300 concurrent HTTP request to each proxy. With the time i was able to notice memory growth and Synapse get Memory leak.&lt;/p&gt;

&lt;p&gt;Therefore, i run the 300 concurrent HTTP request again the Synapse and killed client in the middle. I was able to clearly observe in Jconsole, memory was not released even when i try to perform GC manually.&lt;/p&gt;

&lt;p&gt;To reproduce this, I have attached the python scripts that i have used to create Directories, Proxies and Requests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12848344">SYNAPSE-998</key>
            <summary>Memory leak in VFS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="isudana">Isuru Udana</assignee>
                                    <reporter username="vanjikumaran@gmail.com">Vanjikumaran Sivajothy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jul 2015 18:49:02 +0000</created>
                <updated>Sun, 25 Dec 2016 07:41:20 +0000</updated>
                            <resolved>Sun, 25 Dec 2016 07:23:35 +0000</resolved>
                                                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                                                            <comments>
                            <comment id="14637428" author="vanji@wso2.com" created="Wed, 22 Jul 2015 18:51:10 +0000"  >&lt;p&gt;To reproduce this, I have attached the python scripts that i have used to create Directories, Proxies and Requests.&lt;/p&gt;</comment>
                            <comment id="15440318" author="vanji@wso2.com" created="Sat, 27 Aug 2016 00:33:06 +0000"  >&lt;p&gt;let me try to re-create this again with latest build.&lt;/p&gt;</comment>
                            <comment id="15558691" author="vanji@wso2.com" created="Sat, 8 Oct 2016 20:48:01 +0000"  >&lt;p&gt;I was able to reproduce this issue and Memory usage + MAT report.&lt;/p&gt;</comment>
                            <comment id="15558699" author="vanji@wso2.com" created="Sat, 8 Oct 2016 20:52:32 +0000"  >&lt;p&gt;Fix for the vfs sender.&lt;/p&gt;</comment>
                            <comment id="15776086" author="isudana" created="Sun, 25 Dec 2016 07:23:36 +0000"  >&lt;p&gt;Slightly modified fix committed with revision 1775996.&lt;/p&gt;</comment>
                            <comment id="15776108" author="hudson" created="Sun, 25 Dec 2016 07:41:20 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Synapse - Trunk #5287 (See &lt;a href=&quot;https://builds.apache.org/job/Synapse%20-%20Trunk/5287/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Synapse%20-%20Trunk/5287/&lt;/a&gt;)&lt;br/&gt;
Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-998&quot; title=&quot;Memory leak in VFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-998&quot;&gt;&lt;del&gt;SYNAPSE-998&lt;/del&gt;&lt;/a&gt; by Vanji - Patch slightly modified (isudana: rev 1775996)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) java/modules/transports/core/vfs/src/main/java/org/apache/synapse/transport/vfs/VFSTransportSender.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12832305" name="AfterPatchMemoryPattern.png" size="345594" author="vanjikumaran@gmail.com" created="Sat, 8 Oct 2016 20:53:17 +0000"/>
                            <attachment id="12831671" name="CreateDir.py" size="199" author="vanjikumaran@gmail.com" created="Wed, 5 Oct 2016 00:52:39 +0000"/>
                            <attachment id="12831670" name="CreateProxy.py" size="1130" author="vanjikumaran@gmail.com" created="Wed, 5 Oct 2016 00:52:38 +0000"/>
                            <attachment id="12831669" name="HitHard.py" size="3051" author="vanjikumaran@gmail.com" created="Wed, 5 Oct 2016 00:52:38 +0000"/>
                            <attachment id="12832301" name="MemoryUsagePatternWithoutpatch1.png" size="306915" author="vanjikumaran@gmail.com" created="Sat, 8 Oct 2016 20:48:01 +0000"/>
                            <attachment id="12832300" name="MemoryUsagePatternWithoutpatch2.png" size="295411" author="vanjikumaran@gmail.com" created="Sat, 8 Oct 2016 20:48:01 +0000"/>
                            <attachment id="12832299" name="MemoryUsagePatternWithoutpatch3.png" size="292574" author="vanjikumaran@gmail.com" created="Sat, 8 Oct 2016 20:48:01 +0000"/>
                            <attachment id="12832304" name="SYNAPSE-998.diff" size="1013" author="vanjikumaran@gmail.com" created="Sat, 8 Oct 2016 20:52:32 +0000"/>
                            <attachment id="12832303" name="synapse_Leak_Suspects.zip" size="78062" author="vanjikumaran@gmail.com" created="Sat, 8 Oct 2016 20:48:01 +0000"/>
                            <attachment id="12832302" name="synapse_Top_Consumers.zip" size="33017" author="vanjikumaran@gmail.com" created="Sat, 8 Oct 2016 20:48:01 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="13009742">SYNAPSE-1056</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hsxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>