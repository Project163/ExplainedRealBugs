<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-200] Publishing WSDL files with imported WSDL/XSD not working</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-200</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;I&apos;m writing a Web service proxy and I have a some trouble to publish WSDL files that import other WSDL or XSD files. In my case I have a WSDL file bis.wsdl (placed in the conf directory in the repository directory) importing an XSD located in the same directory. The WSDL file uses a relative URL for the schemaLocation attribute:&lt;/p&gt;

&lt;p&gt;&amp;lt;xsd:import namespace=&quot;...&quot; schemaLocation=&quot;bis.xsd&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;When I try to use publishWSDL with uri=&quot;file:repository/conf/bis.wsdl&quot;, I get the following error:&lt;/p&gt;

&lt;p&gt;java.io.FileNotFoundException: This file was not found: &lt;a href=&quot;file:/Users/veithen/workspace/pim-ebxml/synapse/bis.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/Users/veithen/workspace/pim-ebxml/synapse/bis.xsd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Obviously Synapse (or Axis in this case) doesn&apos;t resolve bis.xsd relative to the location of the WSDL, but relative to the working directory. I get the same result when using uri=&quot;file:///Users/veithen/workspace/pim-ebxml/synapse/repository/conf/bis.wsdl&quot; or key=&quot;conf/bis.wsdl&quot;. When I try with uri=&quot;repository/conf/bis.wsdl&quot; I get the following error:&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: URI is not absolute&lt;/p&gt;

&lt;p&gt;There seems to be no way to make this work.&lt;/p&gt;

&lt;p&gt;One part of the problem is that the code in ProxyService only calls WSDLToAxisServiceBuilder#setBaseUri for WSDL 2.0 documents (in my case it&apos;s a WSDL 1.1 document). This is obviously a bug. After correcting this (see attached patch), I can use uri=&quot;file:///Users/veithen/workspace/pim-ebxml/synapse/repository/conf/bis.wsdl&quot; to get the expected result. However, using absolute filenames in synapse.xml is not appropriate. When using uri=&quot;file:repository/conf/bis.wsdl&quot; I now get the following error:&lt;/p&gt;

&lt;p&gt;org.apache.ws.commons.schema.XmlSchemaException: /Users/veithen/workspace/pim-ebxml/synapse/bis.xsd (No such file or directory)&lt;/p&gt;

&lt;p&gt;This is not so surprising since &quot;file:repository/conf/bis.wsdl&quot; is actually an invalid URL (even if Synapse seems to accept it in some contexts): only &quot;repository/conf/bis.wsdl&quot; and &quot;file:///Users/veithen/workspace/pim-ebxml/synapse/repository/conf/bis.wsdl&quot; are strictly valid, one as relative URL, the other as absolute URL.&lt;/p&gt;

&lt;p&gt;For the two other alternatives (uri=&quot;repository/conf/bis.wsdl&quot; and key=&quot;conf/bis.wsdl&quot;) I get, not surprisingly, the same error as before.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384879">SYNAPSE-200</key>
            <summary>Publishing WSDL files with imported WSDL/XSD not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="veithen">Andreas Veithen-Knowles</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Dec 2007 15:21:54 +0000</created>
                <updated>Sun, 21 Dec 2008 12:38:10 +0000</updated>
                            <resolved>Wed, 19 Dec 2007 07:17:36 +0000</resolved>
                                    <version>1.1</version>
                    <version>NIGHTLY</version>
                                    <fixVersion>NIGHTLY</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12552828" author="indika" created="Tue, 18 Dec 2007 17:34:06 +0000"  >&lt;p&gt;hi Andreas &lt;/p&gt;

&lt;p&gt;  I have applied your initial patch . Thanks lots for contributing .. Issue will be opening until getting the proper solution using a Custom URI Resolver.&lt;/p&gt;

&lt;p&gt;Thanks &lt;/p&gt;

&lt;p&gt;Indika&lt;/p&gt;</comment>
                            <comment id="12552914" author="veithen" created="Tue, 18 Dec 2007 22:25:51 +0000"  >&lt;p&gt;I attached a patch that allows to have declarations like this in the synapse.xml file:&lt;/p&gt;

&lt;p&gt;&amp;lt;publishWSDL key=&quot;conf/bis.wsdl&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;resource location=&quot;bis.xsd&quot; key=&quot;conf/bis.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/publishWSDL&amp;gt;&lt;/p&gt;

&lt;p&gt;I tested this with a WSDL 1.1 document, but not yet with a WSDL 2.0.&lt;/p&gt;

&lt;p&gt;The patch adds&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a class ResourceMap that stores the location-&amp;gt;key mappings and contains the logic to resolve a location to an InputSource object via the registry&lt;/li&gt;
	&lt;li&gt;an adapter class ResourceMapURIResolver that implements the URIResolver interface&lt;/li&gt;
	&lt;li&gt;an adapter class ResourceMapWSDLLocator that implements the WSDLLocator interface: Axis 2 needs this for WSDL 1.1 documents; I&apos;m not sure why this is so (there is obviously an overlap with the URIResolver object)&lt;/li&gt;
	&lt;li&gt;ResourceMapFactory/ResourceMapSerializer classes (probably they could also be useful for the &amp;lt;validate&amp;gt; mediation)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It modifies&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ProxyService with a new property resourceMap and the logic to set up the URIResolver and WSDLLocator&lt;/li&gt;
	&lt;li&gt;ProxyServiceFactory/ProxyServiceSerializer&lt;/li&gt;
	&lt;li&gt;ProxyServiceSerializationTest&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12553245" author="indika" created="Wed, 19 Dec 2007 06:32:57 +0000"  >&lt;p&gt;Hi Andreas Veithen&lt;/p&gt;

&lt;p&gt; I have applied your patch . Thanks Lots for your valuable contributing.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Indika &lt;/p&gt;</comment>
                            <comment id="12553250" author="indika" created="Wed, 19 Dec 2007 07:17:35 +0000"  >&lt;p&gt;Fixed  using the  patch from Andreas Veithen.. Thanks Andreas &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12411033">SYNAPSE-489</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12371901" name="resource-map-patch.txt" size="22766" author="veithen" created="Tue, 18 Dec 2007 22:25:51 +0000"/>
                            <attachment id="12371868" name="wsdl-patch.txt" size="1381" author="veithen" created="Tue, 18 Dec 2007 15:22:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11gzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>