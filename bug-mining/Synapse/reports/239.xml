<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:08:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-577] WSDL Endpoints Stored in the Registry Cannot be Used</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-577</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;1. Define a valid registry provider in the Synapse configuration&lt;br/&gt;
2. Store a WSDL endpoint definition in the registry&lt;br/&gt;
3. Create a proxy service which refers to the WSDL endpoint in the registry&lt;br/&gt;
4. Start Synapse and send a message to the proxy service&lt;/p&gt;

&lt;p&gt;Message will be dispatched to the back end service, but Synapse will fail to route the response back. The following NPE occurs.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2009-08-31 08:47:51,883&amp;#93;&lt;/span&gt; ERROR - NativeWorkerPool Uncaught exception&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.synapse.endpoints.WSDLEndpoint.onSuccess(WSDLEndpoint.java:59)&lt;br/&gt;
	at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:208)&lt;br/&gt;
	at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:135)&lt;br/&gt;
	at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:178)&lt;br/&gt;
	at org.apache.synapse.transport.nhttp.ClientWorker.run(ClientWorker.java:230)&lt;br/&gt;
	at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:58)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:651)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:676)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:595)&lt;/p&gt;

&lt;p&gt;This is because the endpoint returned by the AbstractRegistry is not initialized and hence does not have an associated EndpointContext.&lt;/p&gt;
</description>
                <environment>Any</environment>
        <key id="12434396">SYNAPSE-577</key>
            <summary>WSDL Endpoints Stored in the Registry Cannot be Used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hiranya">Hiranya Kasub Jayathilaka</assignee>
                                    <reporter username="hiranya">Hiranya Kasub Jayathilaka</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Aug 2009 04:15:48 +0000</created>
                <updated>Tue, 27 Dec 2016 16:47:29 +0000</updated>
                            <resolved>Wed, 9 Sep 2009 10:06:49 +0000</resolved>
                                    <version>NIGHTLY</version>
                                    <fixVersion>NIGHTLY</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12749987" author="supun" created="Tue, 1 Sep 2009 16:54:51 +0000"  >&lt;p&gt;I&apos;ve attached a patch that solves the problem. I&apos;m not sure about the location where I did the ManagedLifeCycle.init method.  For the moment I&apos;ve put it to SynapseConfiguration. It seems there is no other place for doing this as well. &lt;/p&gt;</comment>
                            <comment id="12750319" author="supun" created="Wed, 2 Sep 2009 08:05:14 +0000"  >&lt;p&gt;Seems the patch I&apos;ve provided is invalid. Removing that patch. Need to go through this in more detail.&lt;/p&gt;</comment>
                            <comment id="12751714" author="petabyte" created="Sat, 5 Sep 2009 06:37:29 +0000"  >&lt;p&gt;The null pointer exception will happen if the Endpoint is not initialized.&lt;br/&gt;
Added a check if the WSDLEndpoint is initiliazed before calling the onSuccess method in the EndpointContext.&lt;br/&gt;
Let me know your comments.&lt;/p&gt;</comment>
                            <comment id="12751744" author="hiranya" created="Sat, 5 Sep 2009 10:14:55 +0000"  >&lt;p&gt;Hi George,&lt;/p&gt;

&lt;p&gt;Thanks for the contribution. Your patch solves the problem for WSDL endpoints. But I believe the same issue occurs with some of the other types of endpoints such as load balance endpoints. So we need to fix this in a more general way so that the fix would cover all forms of endpoints. Also having a null check does not really solve the problem. It simply covers the problem up. We need a real fix which does not allow dynamic endpoints to be used without being initialized.&lt;/p&gt;

&lt;p&gt;May be one possible solution is to initialize dynamic endpoints in the SynapseConfiguration class itself (Supun&apos;s patch took this approach). What Supun&apos;s solution lacked was probably that it did not check whether an endpoint is initialized or not before calling the init method on it.&lt;/p&gt;

&lt;p&gt;So IMO we need a solution going along this path.&lt;/p&gt;</comment>
                            <comment id="12751768" author="indika" created="Sat, 5 Sep 2009 16:15:44 +0000"  >
&lt;p&gt;My feeling is simply need a proper lifecycle management implementation.  Any software system if it provides a set of abstractions to users, those abstractions should be properly managed including dependency between each abstraction by software system itself.  User only needs to manage resources they create and software system needs to provide hooks to do that... Usually means of Lifecycle callbacks. These are old problems that solved by many experts. There are principles and patterns to do these.  A one good resource about that &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Indika &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.kircher-schwanninger.de/michael/publications/ResourceLifecycleManager.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.kircher-schwanninger.de/michael/publications/ResourceLifecycleManager.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12751778" author="supun" created="Sat, 5 Sep 2009 18:29:34 +0000"  >&lt;p&gt;We&apos;ve tested this with the WSO2 ESB and it seems to be working fine. That is why I deleted my patch. Is there something missing in synapse?&lt;/p&gt;

&lt;p&gt;Supun..&lt;/p&gt;</comment>
                            <comment id="12751779" author="supun" created="Sat, 5 Sep 2009 18:35:38 +0000"  >&lt;p&gt;I also think just checking the weather the endpoint is initialized is not the right way to solve this. Right way to solve this is to call the init methods when we fetch the endpoint from the registry.&lt;/p&gt;

&lt;p&gt;Supun..&lt;/p&gt;</comment>
                            <comment id="12751780" author="supun" created="Sat, 5 Sep 2009 18:45:17 +0000"  >&lt;p&gt;Seems this is solved in the IndirectEndpoint.&lt;/p&gt;
</comment>
                            <comment id="12752974" author="hiranya" created="Wed, 9 Sep 2009 08:12:45 +0000"  >&lt;p&gt;I&apos;ve realized that this problem occurs only with dynamic endpoints used in a proxy service. Endpoints specified in-line with a send mediator would get initialized at SendMediator#init.&lt;/p&gt;</comment>
                            <comment id="12753011" author="hiranya" created="Wed, 9 Sep 2009 10:06:49 +0000"  >&lt;p&gt;Fixed on the release branch and the trunk. Now when the Synapse message context implementations fetch and return endpoints or sequences they check whether the objects are initialized and if not the respective init methods are called.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12418701" name="WSDLEndpoint.patch" size="721" author="petabyte" created="Sat, 5 Sep 2009 06:37:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11ffj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>