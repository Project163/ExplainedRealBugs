<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:09:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-881] When SynapseRecevieCallback handler receives SOAP fault from backend then synapse Message helper always try to cast SOAP Fault  detail entries to  OMElement without type checking </title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-881</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;er Error For : 127.0.0.1:8088 For Request : Axis2Request &lt;span class=&quot;error&quot;&gt;&amp;#91;Message ID : urn:uuid:5af24cbf-73c7-4c68-8cc3-6ceedd17dbbb&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Status Completed : true&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Status SendingCompleted : true&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-06-23 17:09:57,463&amp;#93;&lt;/span&gt; ERROR - NativeWorkerPool Uncaught exception&lt;br/&gt;
java.lang.ClassCastException: org.apache.axiom.om.impl.llom.OMTextImpl cannot be cast to org.apache.axiom.om.OMElement&lt;br/&gt;
	at org.apache.synapse.util.MessageHelper.cloneSOAPFault(MessageHelper.java:441)&lt;br/&gt;
	at org.apache.synapse.util.MessageHelper.cloneSOAPEnvelope(MessageHelper.java:254)&lt;br/&gt;
	at org.apache.synapse.core.axis2.SOAPUtils.convertSOAP11toSOAP12(SOAPUtils.java:95)&lt;br/&gt;
	at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:323)&lt;br/&gt;
	at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:160)&lt;br/&gt;
	at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)&lt;br/&gt;
	at org.apache.synapse.transport.nhttp.ClientWorker.run(ClientWorker.java:275)&lt;br/&gt;
	at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:173)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-06-23 17:10:57,481&amp;#93;&lt;/span&gt;  INFO - HTTPSender Unable to sendViaPost to url&lt;a href=&quot;http://localhost:8280/services/TestProxy.TestProxyHttpSoap12Endpoint&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/services/TestProxy.TestProxyHttpSoap12Endpoint&lt;/a&gt;&lt;br/&gt;
java.net.SocketTimeoutException: Read timed out&lt;br/&gt;
	at java.net.SocketInputStream.socketRead0(Native Method)&lt;br/&gt;
	at java.net.SocketInputStream.read(SocketInputStream.java:129)&lt;br/&gt;
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)&lt;br/&gt;
	at java.io.BufferedInputStream.read(BufferedInputStream.java:237)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)&lt;br/&gt;
	at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)&lt;br/&gt;
	at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)&lt;br/&gt;
	at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)&lt;br/&gt;
	at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)&lt;br/&gt;
	at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)&lt;br/&gt;
	at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)&lt;br/&gt;
	at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)&lt;br/&gt;
	at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)&lt;/p&gt;
</description>
                <environment>Ubuntu 64x 12.04</environment>
        <key id="12595683">SYNAPSE-881</key>
            <summary>When SynapseRecevieCallback handler receives SOAP fault from backend then synapse Message helper always try to cast SOAP Fault  detail entries to  OMElement without type checking </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="veithen">Andreas Veithen-Knowles</assignee>
                                    <reporter username="dushan@wso2.com">Dushan Sachinda Abeyruwan</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Jun 2012 12:49:34 +0000</created>
                <updated>Mon, 16 Sep 2013 20:19:31 +0000</updated>
                            <resolved>Mon, 22 Jul 2013 23:02:56 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13399942" author="dushan@wso2.com" created="Sat, 23 Jun 2012 12:51:10 +0000"  >&lt;p&gt;Hi&lt;br/&gt;
 Please find the patch attached herewith&lt;/p&gt;

&lt;p&gt;cheers&lt;br/&gt;
Dushan&lt;/p&gt;</comment>
                            <comment id="13424305" author="veithen" created="Sat, 28 Jul 2012 09:12:52 +0000"  >&lt;p&gt;Axiom actually has an API that allows cloning SOAPEnvelopes. I think that instead of attempting to fix the cloneSOAPEnvelope/cloneSOAPFault methods in MessageHelper, we should just use that feature in Axiom. However, we need to make sure that the code in Axiom is not affected by the same issue.&lt;/p&gt;

&lt;p&gt;Can you please submit a test case for the issue you have discovered?&lt;/p&gt;</comment>
                            <comment id="13657270" author="veithen" created="Tue, 14 May 2013 17:46:37 +0000"  >&lt;p&gt;@Dushan: can we get a test case for this?&lt;/p&gt;</comment>
                            <comment id="13715818" author="hiranya" created="Mon, 22 Jul 2013 23:02:56 +0000"  >&lt;p&gt;I believe this is fixed now. I tested this scenario when testing &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-883&quot; title=&quot;ClassCastException: org.apache.axiom.om.impl.llom.OMElementImpl cannot be cast to org.apache.axiom.soap.SOAPFault error occurs when handling SOAPFault in out path of REST API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-883&quot;&gt;&lt;del&gt;SYNAPSE-883&lt;/del&gt;&lt;/a&gt; and this error was no longer observed. We now also have an integration test that runs a similar scenario at build time for verification.&lt;/p&gt;

&lt;p&gt;Dushan, feel free to reopen with more details, if the issue still persists. We&apos;re going to need a sample configuration and instructions to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="13768703" author="hudson" created="Mon, 16 Sep 2013 20:19:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in Synapse - Trunk #4751 (See &lt;a href=&quot;https://builds.apache.org/job/Synapse%20-%20Trunk/4751/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Synapse%20-%20Trunk/4751/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-881&quot; title=&quot;When SynapseRecevieCallback handler receives SOAP fault from backend then synapse Message helper always try to cast SOAP Fault  detail entries to  OMElement without type checking &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-881&quot;&gt;&lt;del&gt;SYNAPSE-881&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Instead of using our own code, use the appropriate Axiom feature to clone SOAPEnvelope objects.&lt;/li&gt;
	&lt;li&gt;Also fixed an obvious bug in the code responsible for converting between SOAP 1.1 and 1.2. This bug was discovered because Axiom properly clones SOAPHeaderBlocks as SOAPHeaderBlocks (and not plain OMElement instances). (veithen: rev 1523751)&lt;/li&gt;
	&lt;li&gt;/synapse/trunk/java/modules/core/src/main/java/org/apache/synapse/core/axis2/SOAPUtils.java&lt;/li&gt;
	&lt;li&gt;/synapse/trunk/java/modules/core/src/main/java/org/apache/synapse/util/MessageHelper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533181" name="Sysnapse_message_helper_patch.patch" size="1179" author="dushan@wso2.com" created="Sat, 23 Jun 2012 12:50:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304692</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17sy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253659</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>