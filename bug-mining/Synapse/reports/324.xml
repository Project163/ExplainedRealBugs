<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:09:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-501] validate mediator strips off namespace: result valid messages are rejected.</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-501</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;I found that using the validation mediator to validate incoming messages sometimes marks valid messages as invalid.&lt;/p&gt;

&lt;p&gt;A namespace that is in the envelope part, will be cut off by the ESB before passing to the validator. The validator then barfs on a missing namespace.&lt;/p&gt;


&lt;p&gt;steps to reproduce&lt;br/&gt;
===============&lt;br/&gt;
see tha attached file: synapse_sample_7.xml&lt;/p&gt;

&lt;p&gt;send the soap message as found in the attached file soap-problem.xml&lt;/p&gt;

&lt;p&gt;result&lt;br/&gt;
The ESB rejects the message, the validation fails&lt;/p&gt;

&lt;p&gt;expected result&lt;br/&gt;
The ESB validates the message as OK.&lt;/p&gt;

&lt;p&gt;version&lt;br/&gt;
======&lt;br/&gt;
Found in wso2esb v1.7.1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412912">SYNAPSE-501</key>
            <summary>validate mediator strips off namespace: result valid messages are rejected.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="veithen">Andreas Veithen-Knowles</assignee>
                                    <reporter username="harm">harm verhagen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jan 2009 14:36:32 +0000</created>
                <updated>Mon, 5 Dec 2011 21:42:24 +0000</updated>
                            <resolved>Mon, 5 Dec 2011 21:42:24 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12665838" author="harm" created="Wed, 21 Jan 2009 14:37:37 +0000"  >&lt;p&gt;example synapse file which demonstrates bug&lt;/p&gt;</comment>
                            <comment id="12665839" author="harm" created="Wed, 21 Jan 2009 14:39:39 +0000"  >&lt;p&gt;soap input that shows the problem&lt;/p&gt;</comment>
                            <comment id="12665841" author="harm" created="Wed, 21 Jan 2009 14:42:59 +0000"  >&lt;p&gt;This example input message DOES get accepted.&lt;/p&gt;

&lt;p&gt;Note the extra xsd   namespace declaration.&lt;/p&gt;

&lt;p&gt;Note:  the Esb should accept both  soap-problem.xml AND soap-working.xml&lt;/p&gt;</comment>
                            <comment id="12665852" author="asankha" created="Wed, 21 Jan 2009 15:13:08 +0000"  >&lt;p&gt;Hi Andreas,&lt;/p&gt;

&lt;p&gt;I was just following this up with Harm on the WSO2 esb list &lt;a href=&quot;http://markmail.org/message/2we2tg3xu6fhtxok&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/2we2tg3xu6fhtxok&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Its fine if you&apos;ve started on this.. else I can fix it as I&apos;ve already checked this in the code..&lt;/p&gt;

&lt;p&gt;cheers&lt;br/&gt;
asankha&lt;/p&gt;</comment>
                            <comment id="12666097" author="veithen" created="Thu, 22 Jan 2009 09:27:26 +0000"  >&lt;p&gt;I assigned that issue to me since I have some idea where this comes from. What is your analysis?&lt;/p&gt;</comment>
                            <comment id="12666207" author="asankha" created="Thu, 22 Jan 2009 16:51:59 +0000"  >&lt;p&gt;Are you planning on fixing this in Axiom? the namespace loss happens when an XPath evaluation returns a subelement. If your plan is to fix it in Axiom that would be best.. &lt;/p&gt;</comment>
                            <comment id="12666213" author="veithen" created="Thu, 22 Jan 2009 17:09:20 +0000"  >&lt;p&gt;I don&apos;t think it&apos;s a problem with the XPath evaluation. I think the issue arises in OMXMLReader (which is used to construct the Source object in trunk). I didn&apos;t test this but it&apos;s clear that in the particular case we have here (subelement + namespace mapping declared on a parent element and that is not used in an attribute or element name but only in an attribute value), the current OMXMLReader implementation can&apos;t give the expected result.&lt;/p&gt;</comment>
                            <comment id="12666224" author="asankha" created="Thu, 22 Jan 2009 17:33:00 +0000"  >&lt;p&gt;Could be.. I am not very familiar with the Axiom internals.. I think a work around would be to add the parent (i.e. envelope and body namespace) declarations into the result..&lt;/p&gt;</comment>
                            <comment id="12666302" author="veithen" created="Thu, 22 Jan 2009 21:26:30 +0000"  >&lt;p&gt;I fixed this issue in Axiom. I believe that this fix should resolve the problem in Synapse trunk, but I didn&apos;t test this yet. That&apos;s why I&apos;m not marking this issue as resolved. Anyway before doing this we should add a unit test to Synapse.&lt;/p&gt;

&lt;p&gt;Some more comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The fix in Axiom will not solve the problem for Synapse releases &amp;lt; 1.3 (even when replacing the Axiom JARs with snapshot versions). The reason is that instead of OMSource (which is quite recent and only exists in Axiom 1.2.8), previous versions of ValidateMediator used StaxSource from Spring WS, and even older ones used StreamSource (if I remember well).&lt;/li&gt;
	&lt;li&gt;We need to pay attention to avoid regression on this issue if we release Synapse 1.3 with Axiom 1.2.8, maybe using the patch mechanism. Adding a unit test will help us remembering this.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13163070" author="veithen" created="Mon, 5 Dec 2011 21:42:24 +0000"  >&lt;p&gt;Added a unit test to confirm that the issue is solved by the change in Axiom.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398402" name="soap-problem.xml" size="1017" author="harm" created="Wed, 21 Jan 2009 14:39:39 +0000"/>
                            <attachment id="12398403" name="soap-working.xml" size="1048" author="harm" created="Wed, 21 Jan 2009 14:42:59 +0000"/>
                            <attachment id="12398401" name="synapse_sample_7.xml" size="2366" author="harm" created="Wed, 21 Jan 2009 14:37:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11cqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216031</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>