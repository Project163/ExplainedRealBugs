<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-365] REST support not working in synapse 1.2</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-365</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;When submitting a GET request to a synapse proxy service that points to a REST webservice&lt;br/&gt;
AND Content-Type is not text/xml or application/xml the error: &quot;Cannot create DocumentElement without destination EPR&quot; comes out. (e.g try to approach the service proxy with a webbrowers and it will do this)&lt;/p&gt;

&lt;p&gt;configuration is as follows:&lt;/p&gt;

&lt;p&gt;&amp;lt;definitions xmlns=&quot;http://ws.apache.org/ns/synapse&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;proxy name=&quot;Forwarder&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;target&amp;gt;&lt;br/&gt;
          &amp;lt;endpoint&amp;gt;&lt;br/&gt;
              &amp;lt;address uri=&quot;http://localhost:11111/MyService/echo&quot; format=&quot;get&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
          &amp;lt;outSequence&amp;gt;&lt;br/&gt;
              &amp;lt;send/&amp;gt;&lt;br/&gt;
          &amp;lt;/outSequence&amp;gt;&lt;br/&gt;
      &amp;lt;/target&amp;gt;&lt;br/&gt;
  &amp;lt;/proxy&amp;gt;&lt;br/&gt;
&amp;lt;/definitions&amp;gt;&lt;/p&gt;

&lt;p&gt;If the message is send with the &apos;correct&apos; content-type like for example so: &lt;br/&gt;
curl -G -H &quot;Content-Type: text/xml&quot; &lt;a href=&quot;http://localhost:8280/Forwarder/mediate&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/Forwarder/mediate&lt;/a&gt;&lt;br/&gt;
Synapse gives me the following output:&lt;/p&gt;

&lt;p&gt;2008-06-18 15:10:59,714 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/0:0:0:0:0:0:0:1%0:56697&amp;#93;&lt;/span&gt;: Connected&lt;br/&gt;
2008-06-18 15:10:59,732 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/0:0:0:0:0:0:0:1%0:56697&amp;#93;&lt;/span&gt;: GET /soap/Forwarder/mediate HTTP/1.1&lt;br/&gt;
2008-06-18 15:10:59,780 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; GET /soap/Forwarder/mediate HTTP/1.1&lt;br/&gt;
2008-06-18 15:10:59,780 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; User-Agent: curl/7.16.3 (powerpc-apple-darwin9.0) libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3&lt;br/&gt;
2008-06-18 15:10:59,780 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Host: localhost:8280&lt;br/&gt;
2008-06-18 15:10:59,780 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Accept: &lt;b&gt;/&lt;/b&gt;&lt;br/&gt;
2008-06-18 15:10:59,780 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Content-Type:application/xml&lt;br/&gt;
2008-06-18 15:10:59,797 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG TransportUtils createSOAPEnvelope using Builder (class org.apache.axis2.builder.ApplicationXMLBuilder) selected from type (application/xml)&lt;br/&gt;
2008-06-18 15:10:59,841 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SynapseMessageReceiver Synapse received a new message for message mediation...&lt;br/&gt;
2008-06-18 15:10:59,841 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SynapseMessageReceiver Received To: null&lt;br/&gt;
2008-06-18 15:10:59,841 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SynapseMessageReceiver SOAPAction: null&lt;br/&gt;
2008-06-18 15:10:59,843 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SynapseMessageReceiver WSA-Action: null&lt;br/&gt;
2008-06-18 15:10:59,845 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG Axis2SynapseEnvironment Injecting MessageContext&lt;br/&gt;
2008-06-18 15:10:59,845 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG Axis2SynapseEnvironment Using Main Sequence for injected message&lt;br/&gt;
2008-06-18 15:10:59,845 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SequenceMediator Start : Sequence &amp;lt;main&amp;gt;&lt;br/&gt;
2008-06-18 15:10:59,845 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SequenceMediator Sequence &amp;lt;SequenceMediator&amp;gt; :: mediate()&lt;br/&gt;
2008-06-18 15:10:59,846 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG LogMediator Start : Log mediator&lt;br/&gt;
2008-06-18 15:10:59,846 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt;  INFO LogMediator To: , MessageID: urn:uuid:27AA6F4DF24676A7641213794659778, Direction: request&lt;br/&gt;
2008-06-18 15:10:59,846 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG LogMediator End : Log mediator&lt;br/&gt;
2008-06-18 15:10:59,846 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG DropMediator Start : Drop mediator&lt;br/&gt;
2008-06-18 15:10:59,852 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG DropMediator End : Drop mediator&lt;br/&gt;
2008-06-18 15:10:59,852 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SequenceMediator End : Sequence &amp;lt;main&amp;gt;&lt;br/&gt;
2008-06-18 15:10:59,853 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG ServerWorker Sending 202 Accepted response for MessageID : urn:uuid:27AA6F4DF24676A7641213794659778 response written : null response will follow : true acked : false forced ack : false&lt;br/&gt;
2008-06-18 15:10:59,862 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;localhost/0:0:0:0:0:0:0:1%0:56697&amp;#93;&lt;/span&gt;: Output ready&lt;br/&gt;
2008-06-18 15:10:59,863 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;localhost/0:0:0:0:0:0:0:1%0:56697&amp;#93;&lt;/span&gt;: Content encoder &lt;span class=&quot;error&quot;&gt;&amp;#91;chunk-coded; completed: true&amp;#93;&lt;/span&gt;&lt;br/&gt;
2008-06-18 15:10:59,864 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;localhost/0:0:0:0:0:0:0:1%0:56697&amp;#93;&lt;/span&gt;: Response ready&lt;br/&gt;
2008-06-18 15:10:59,865 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;closed&amp;#93;&lt;/span&gt;: Closed&lt;/p&gt;</description>
                <environment></environment>
        <key id="12398519">SYNAPSE-365</key>
            <summary>REST support not working in synapse 1.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ruwan">Ruwan Linton</assignee>
                                    <reporter username="blackorchid">Jasper Spoel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jun 2008 16:12:16 +0000</created>
                <updated>Tue, 27 Dec 2016 16:47:32 +0000</updated>
                            <resolved>Mon, 9 Mar 2009 03:47:14 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                    <component>Core</component>
                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12606009" author="ruwan" created="Wed, 18 Jun 2008 17:01:00 +0000"  >&lt;p&gt;I think this is a regression which has been introduced with the RESTUtils class of axis2. We can get this fixed by hacking transport code as well. But I think the proper way is to fix this at the RESTUtils level because, I think axis2 also should suffer from the same issue right now. We are anyway moving to the axis2 SNAPSHOT with the patch to the Loadbalancing &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-360&quot; title=&quot;Dynamic load balancing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-360&quot;&gt;&lt;del&gt;SYNAPSE-360&lt;/del&gt;&lt;/a&gt;, so there wont be an issue in getting this fix to Synapse.&lt;/p&gt;</comment>
                            <comment id="12607311" author="ruwan" created="Mon, 23 Jun 2008 17:46:17 +0000"  >&lt;p&gt;This was due to the fact that the GET request processing method is deprecated in the axis2 1.4 version and the alternate method introduced by Axis2 does not fit to our use case because Synapse should get any request without looking for the operation to be present or not. &lt;/p&gt;

&lt;p&gt;There fore I have added this code into the RESTUtil and now the REST support is fixed and the above configuration should work on the synapse SNAPSHOT&lt;/p&gt;</comment>
                            <comment id="12607312" author="ruwan" created="Mon, 23 Jun 2008 17:46:39 +0000"  >&lt;p&gt;Fixed on the SVN trunk&lt;/p&gt;</comment>
                            <comment id="12607403" author="blackorchid" created="Mon, 23 Jun 2008 22:45:35 +0000"  >&lt;p&gt;Hi, i saw the change coming by and built the snapshot.&lt;br/&gt;
However, with exactly the same configuration as in the original problem, i now encounter a way more severe issue.&lt;br/&gt;
Synapse simply is locked up in an endless loop of null pointer exceptions.&lt;br/&gt;
Following is a piece of Debug output in the logs:&lt;/p&gt;

&lt;p&gt;2008-06-24 00:36:50,215 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/0:0:0:0:0:0:0:1%0:52423&amp;#93;&lt;/span&gt;: Connected&lt;br/&gt;
2008-06-24 00:36:50,234 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG ServerHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/0:0:0:0:0:0:0:1%0:52423&amp;#93;&lt;/span&gt;: GET /soap/Forwarder/mediate HTTP/1.1&lt;br/&gt;
2008-06-24 00:36:50,271 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; GET /soap/Forwarder/mediate HTTP/1.1&lt;br/&gt;
2008-06-24 00:36:50,271 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; User-Agent: curl/7.16.3 (powerpc-apple-darwin9.0) libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3&lt;br/&gt;
2008-06-24 00:36:50,272 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Host: localhost:8280&lt;br/&gt;
2008-06-24 00:36:50,272 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Accept: &lt;b&gt;/&lt;/b&gt;&lt;br/&gt;
2008-06-24 00:36:50,272 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 5&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Content-Type:text/xml&lt;br/&gt;
2008-06-24 00:36:50,317 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG ProxyServiceMessageReceiver Proxy Service Forwarder received a new message from : 0:0:0:0:0:0:0:1%0&lt;br/&gt;
2008-06-24 00:36:50,318 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG ProxyServiceMessageReceiver Message To: /soap/Forwarder/mediate&lt;br/&gt;
2008-06-24 00:36:50,318 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG ProxyServiceMessageReceiver SOAPAction: null&lt;br/&gt;
2008-06-24 00:36:50,318 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG ProxyServiceMessageReceiver WSA-Action: null&lt;br/&gt;
2008-06-24 00:36:50,326 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG ProxyServiceMessageReceiver Forwarding the message to the anonymous endpoint of the proxy service&lt;br/&gt;
2008-06-24 00:36:50,326 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG AddressEndpoint Start : Address Endpoint&lt;br/&gt;
2008-06-24 00:36:50,327 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG AddressEndpoint Sending message to endpoint : AnonymousEndpoint resolves to address = &lt;a href=&quot;http://10.0.0.12:11111/MyService/echo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://10.0.0.12:11111/MyService/echo&lt;/a&gt;&lt;br/&gt;
2008-06-24 00:36:50,327 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG AddressEndpoint SOAPAction: null&lt;br/&gt;
2008-06-24 00:36:50,328 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG AddressEndpoint WSA-Action: null&lt;br/&gt;
2008-06-24 00:36:50,334 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG Axis2FlexibleMEPClient Sending &lt;span class=&quot;error&quot;&gt;&amp;#91;add = false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;sec = false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;rm = false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;mtom = false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;swa = false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;format = get&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;force soap11=false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;force soap12=false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;pox=false&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;get=true&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;encoding=null&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;to Address: /soap/Forwarder/mediate&amp;#93;&lt;/span&gt;&lt;br/&gt;
2008-06-24 00:36:50,362 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt;  INFO TimeoutHandler This engine will expire all callbacks after : 86400 seconds, irrespective of the timeout action, after the specified or optional timeout&lt;br/&gt;
2008-06-24 00:36:50,372 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG SynapseCallbackReceiver Callback added. Total callbacks waiting for : 1&lt;br/&gt;
2008-06-24 00:36:50,393 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG ConnectionPool No connections available for reuse&lt;br/&gt;
2008-06-24 00:36:50,395 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG HttpCoreNIOSender A new connection established to : 10.0.0.12:8081&lt;br/&gt;
2008-06-24 00:36:50,396 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt; DEBUG Axis2HttpRequest start streaming outgoing http request&lt;br/&gt;
2008-06-24 00:36:50,407 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG ClientHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/10.0.0.12:11111&amp;#93;&lt;/span&gt;: Connected (org.apache.synapse.transport.nhttp.Axis2HttpRequest@b278f1)&lt;br/&gt;
2008-06-24 00:36:50,407 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG ClientHandler ClientHandler connected : &lt;span class=&quot;error&quot;&gt;&amp;#91;/10.0.0.12:11111&amp;#93;&lt;/span&gt;&lt;br/&gt;
2008-06-24 00:36:50,417 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; GET /MyService/echo/mediate HTTP/1.1&lt;br/&gt;
2008-06-24 00:36:50,417 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Host: localhost:8280&lt;br/&gt;
2008-06-24 00:36:50,418 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Accept: &lt;b&gt;/&lt;/b&gt;&lt;br/&gt;
2008-06-24 00:36:50,418 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Content-Type: application/x-www-form-urlencoded; charset=UTF-8&lt;br/&gt;
2008-06-24 00:36:50,419 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; Connection: Keep-Alive&lt;br/&gt;
2008-06-24 00:36:50,419 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;gt;&amp;gt; User-Agent: Synapse-HttpComponents-NIO&lt;br/&gt;
2008-06-24 00:36:50,422 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG ClientHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/10.0.0.12:11111&amp;#93;&lt;/span&gt;: Request ready&lt;br/&gt;
2008-06-24 00:36:50,429 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG ClientHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/10.0.0.12:11111&amp;#93;&lt;/span&gt;: HTTP/1.1 400 Bad Request&lt;br/&gt;
2008-06-24 00:36:50,429 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; ERROR ClientHandler Received bad request: Bad Request&lt;br/&gt;
2008-06-24 00:36:50,430 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;lt;&amp;lt; HTTP/1.1 400 Bad Request&lt;br/&gt;
2008-06-24 00:36:50,430 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;lt;&amp;lt; Content-Type: text/html; charset=us-ascii&lt;br/&gt;
2008-06-24 00:36:50,430 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;lt;&amp;lt; Server: Mono-HTTPAPI/1.0&lt;br/&gt;
2008-06-24 00:36:50,431 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;lt;&amp;lt; Date: Mon, 23 Jun 2008 22:36:50 GMT&lt;br/&gt;
2008-06-24 00:36:50,431 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;lt;&amp;lt; Content-Length: 35&lt;br/&gt;
2008-06-24 00:36:50,431 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG headers &amp;lt;&amp;lt; Connection: close&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;The part following after this is the part that keeps repeating&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;2008-06-24 00:36:50,432 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; DEBUG ClientHandler HTTP connection &lt;span class=&quot;error&quot;&gt;&amp;#91;/10.0.0.12:11111&amp;#93;&lt;/span&gt;: Input ready&lt;br/&gt;
2008-06-24 00:36:50,434 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt;  WARN HttpCoreNIOSender System may be unstable: IOReactor encountered a runtime exception : null&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.synapse.transport.nhttp.ClientHandler.inputReady(ClientHandler.java:321)&lt;br/&gt;
	at org.apache.synapse.transport.nhttp.LoggingNHttpClientHandler.inputReady(LoggingNHttpClientHandler.java:124)&lt;br/&gt;
	at org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:135)&lt;br/&gt;
	at org.apache.synapse.transport.nhttp.LoggingNHttpClientIOTarget.consumeInput(LoggingNHttpClientIOTarget.java:155)&lt;br/&gt;
	at org.apache.http.impl.nio.DefaultClientIOEventDispatch.inputReady(DefaultClientIOEventDispatch.java:99)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:98)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:195)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:180)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:142)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:70)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:318)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:613)&lt;/p&gt;</comment>
                            <comment id="12607430" author="ruwan" created="Tue, 24 Jun 2008 00:57:42 +0000"  >&lt;p&gt;I am sorry, I was unable to reproduce this issue. Please note that you need to change the invocation URL as follows;&lt;/p&gt;

&lt;p&gt;curl -G -H &quot;Content-Type: text/xml&quot; &lt;a href=&quot;http://localhost:8280/Forwarder/echo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/Forwarder/echo&lt;/a&gt; to invoke the echo operation of the MyService service and the configuration should be as;&lt;/p&gt;

&lt;p&gt;&amp;lt;definitions xmlns=&quot;http://ws.apache.org/ns/synapse&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;proxy name=&quot;Forwarder&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;target&amp;gt;&lt;br/&gt;
          &amp;lt;endpoint&amp;gt;&lt;br/&gt;
              &amp;lt;address uri=&quot;http://localhost:11111/MyService&quot; format=&quot;get&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
          &amp;lt;outSequence&amp;gt;&lt;br/&gt;
              &amp;lt;send/&amp;gt;&lt;br/&gt;
          &amp;lt;/outSequence&amp;gt;&lt;br/&gt;
      &amp;lt;/target&amp;gt;&lt;br/&gt;
  &amp;lt;/proxy&amp;gt;&lt;br/&gt;
&amp;lt;/definitions&amp;gt;&lt;/p&gt;

&lt;p&gt;Please note that you need to drop the operation part from the address uri, which will be dynamically added as per the request.&lt;/p&gt;

&lt;p&gt;If all these are not working can you please send the TCPMon trace of the in and out messages from both client and synapse.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Ruwan  &lt;/p&gt;</comment>
                            <comment id="12609513" author="blackorchid" created="Tue, 1 Jul 2008 10:04:32 +0000"  >&lt;p&gt;Hi Ruwan,&lt;/p&gt;

&lt;p&gt;I&apos;ve tested this issue again with the latest snapshot and still get the same results, even with the pointers you gave in the last comment.&lt;br/&gt;
Here&apos;s an overview of what happens:&lt;/p&gt;

&lt;p&gt;synapse config:&lt;br/&gt;
&amp;lt;definitions xmlns=&quot;http://ws.apache.org/ns/synapse&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;proxy name=&quot;Forwarder&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;target&amp;gt;&lt;br/&gt;
          &amp;lt;endpoint&amp;gt;&lt;br/&gt;
              &amp;lt;address uri=&quot;http://10.0.0.12:8081/workflow&quot; format=&quot;get&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
          &amp;lt;outSequence&amp;gt;&lt;br/&gt;
              &amp;lt;send/&amp;gt;&lt;br/&gt;
          &amp;lt;/outSequence&amp;gt;&lt;br/&gt;
      &amp;lt;/target&amp;gt;&lt;br/&gt;
  &amp;lt;/proxy&amp;gt;&lt;br/&gt;
&amp;lt;/definitions&amp;gt;&lt;/p&gt;

&lt;p&gt;the call to service: &lt;a href=&quot;http://10.0.0.12:8081/workflow/servers&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://10.0.0.12:8081/workflow/servers&lt;/a&gt;&lt;br/&gt;
should return: &lt;br/&gt;
&amp;lt;servers&amp;gt;&amp;lt;server&amp;gt;name&amp;lt;/server&amp;gt;&amp;lt;/servers&amp;gt;&lt;/p&gt;

&lt;p&gt;TCPMon set up to work as a proxy on port 5555  (for the input trace)&lt;/p&gt;

&lt;p&gt;curl call: &lt;br/&gt;
curl -G -H &quot;Content-Type: text/xml&quot; -x 127.0.0.1:5555 &lt;a href=&quot;http://localhost:8280/soap/Forwarder/servers&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/soap/Forwarder/servers&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;synapse does not answer this call, so there&apos;s no trace for that data. Synapse crashes while repeating the nullpointer exception like so:&lt;/p&gt;

&lt;p&gt;2008-07-01 11:53:22,794 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-1&amp;#93;&lt;/span&gt;  INFO TimeoutHandler This engine will expire all callbacks after : 86400 seconds, irrespective of the timeout action, after the specified or optional timeout&lt;br/&gt;
2008-07-01 11:53:22,855 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt; ERROR ClientHandler Received bad request: Bad Request&lt;/p&gt;

&lt;p&gt;================================== &lt;br/&gt;
the follow part is then repeated until a ctrl-c is done on synapse&lt;br/&gt;
==================================&lt;/p&gt;

&lt;p&gt;2008-07-01 11:53:22,858 &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.0.12-equilibrium.local&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;I/O dispatcher 3&amp;#93;&lt;/span&gt;  WARN HttpCoreNIOSender System may be unstable: IOReactor encountered a runtime exception : null&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.synapse.transport.nhttp.ClientHandler.inputReady(ClientHandler.java:321)&lt;br/&gt;
	at org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:135)&lt;br/&gt;
	at org.apache.http.impl.nio.DefaultClientIOEventDispatch.inputReady(DefaultClientIOEventDispatch.java:99)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:98)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:195)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:180)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:142)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:70)&lt;br/&gt;
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:318)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:613)&lt;/p&gt;


&lt;p&gt;TCPMon shows this input:&lt;br/&gt;
GET &lt;a href=&quot;http://localhost:8280/soap/Forwarder/servers&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/soap/Forwarder/servers&lt;/a&gt; HTTP/1.1&lt;br/&gt;
User-Agent: curl/7.16.3 (powerpc-apple-darwin9.0) libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3&lt;br/&gt;
Host: localhost:8280&lt;br/&gt;
Pragma: no-cache&lt;br/&gt;
Accept: &lt;b&gt;/&lt;/b&gt;&lt;br/&gt;
Proxy-Connection: Keep-Alive&lt;br/&gt;
Content-Type: text/xml&lt;/p&gt;


&lt;p&gt;To me this all seems pretty straightforward and correct (data / input wise).&lt;br/&gt;
Hope you see something wrong here....&lt;/p&gt;

&lt;p&gt;Greetz,&lt;br/&gt;
Jasper&lt;/p&gt;</comment>
                            <comment id="12609524" author="asankha" created="Tue, 1 Jul 2008 11:02:17 +0000"  >&lt;p&gt;Jasper&lt;/p&gt;

&lt;p&gt;Thanks for bringing this to our notice. This seems like a bug in the NIO listener, where there is no body for a GET request.. I will try this out and get to the bottom of this.&lt;/p&gt;

&lt;p&gt;asankha&lt;/p&gt;</comment>
                            <comment id="12610927" author="blackorchid" created="Mon, 7 Jul 2008 09:24:04 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;i was wondering if there was any progress on this issue, since synapse still crashes hard when trying to handle this type of request. And imho this&lt;br/&gt;
kind of request is the most basic request you can get. I&apos;m kinda trying to persuade my boss to understand that synapse is the way to go for an ESB. &lt;br/&gt;
If this is an issue that cannot be &apos;easily&apos; solved, i am very wiling to look at the specific code causing this problem. &lt;br/&gt;
Do you by any chance have some pointers for me on what source tree to check out (i got the idea the solution does not lie in the synapse trunk) and&lt;br/&gt;
what classes should be of special interest for this issue. &lt;/p&gt;

&lt;p&gt;Thanx in advance,&lt;br/&gt;
Jasper&lt;/p&gt;</comment>
                            <comment id="12611110" author="asankha" created="Mon, 7 Jul 2008 11:26:46 +0000"  >&lt;p&gt;Hi Jasper&lt;/p&gt;

&lt;p&gt;I got the latest Synapse build today (r 674403) and did the following:&lt;/p&gt;

&lt;p&gt;1) Edit synapse-1.3-SNAPSHOT/samples/axis2Server/src/SimpleStockQuoteService/build.xml&lt;br/&gt;
2) Comment the following line as shown below&lt;br/&gt;
&amp;lt;!-&lt;del&gt;copy file=&quot;wsdl/SimpleStockQuoteService.wsdl&quot; tofile=&quot;${SSQ.dir}/META-INF/service.wsdl&quot;/&lt;/del&gt;-&amp;gt;&lt;br/&gt;
3) Build the sample service, and deploy&lt;br/&gt;
4) Try to access this service from Firefox as follows:&lt;br/&gt;
&lt;a href=&quot;http://localhost:9000/services/SimpleStockQuoteService/getSimpleQuote?symbol=IBM&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9000/services/SimpleStockQuoteService/getSimpleQuote?symbol=IBM&lt;/a&gt;&lt;br/&gt;
5) Access from curl as follows:&lt;/p&gt;

&lt;p&gt;You should get successful responses for both FF and curl&lt;/p&gt;

&lt;p&gt;6) Now deploy the following synapse.xml and start Synapse&lt;br/&gt;
&amp;lt;definitions xmlns=&quot;http://ws.apache.org/ns/synapse&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;proxy name=&quot;Forwarder&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;target&amp;gt;&lt;br/&gt;
          &amp;lt;endpoint&amp;gt;&lt;br/&gt;
              &amp;lt;address uri=&quot;http://localhost:9000/services/SimpleStockQuoteService&quot; format=&quot;get&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
          &amp;lt;outSequence&amp;gt;&lt;br/&gt;
              &amp;lt;send/&amp;gt;&lt;br/&gt;
          &amp;lt;/outSequence&amp;gt;&lt;br/&gt;
      &amp;lt;/target&amp;gt;&lt;br/&gt;
  &amp;lt;/proxy&amp;gt;&lt;br/&gt;
&amp;lt;/definitions&amp;gt;&lt;/p&gt;

&lt;p&gt;7) Access from browser&lt;br/&gt;
&lt;a href=&quot;http://localhost:8280/services/Forwarder/SimpleStockQuoteService/getSimpleQuote?symbol=IBM&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/services/Forwarder/SimpleStockQuoteService/getSimpleQuote?symbol=IBM&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;8) Access from curl&lt;br/&gt;
asankha@asankha:~/java/synapse-1.3-SNAPSHOT/bin$ curl -G -H &quot;Content-Type: text/xml&quot; &lt;a href=&quot;http://localhost:8280/services/Forwarder/SimpleStockQuoteService/getSimpleQuote?symbol=IBM&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/services/Forwarder/SimpleStockQuoteService/getSimpleQuote?symbol=IBM&lt;/a&gt;&lt;br/&gt;
&amp;lt;ns:getSimpleQuoteResponse xmlns:ns=&quot;http://services.samples&quot;&amp;gt;&amp;lt;ns:return xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ax21=&quot;http://services.samples/xsd&quot; xsi:type=&quot;ax21:GetQuoteResponse&quot;&amp;gt;&amp;lt;ax21:change&amp;gt;-2.635855611254778&amp;lt;/ax21:change&amp;gt;&amp;lt;ax21:earnings&amp;gt;-9.211125187115655&amp;lt;/ax21:earnings&amp;gt;&amp;lt;ax21:high&amp;gt;70.98113922972296&amp;lt;/ax21:high&amp;gt;&amp;lt;ax21:last&amp;gt;67.67509318952094&amp;lt;/ax21:last&amp;gt;&amp;lt;ax21:lastTradeTimestamp&amp;gt;Mon Jul 07 16:55:56 IST 2008&amp;lt;/ax21:lastTradeTimestamp&amp;gt;&amp;lt;ax21:low&amp;gt;70.58750010990072&amp;lt;/ax21:low&amp;gt;&amp;lt;ax21:marketCap&amp;gt;5.301255985996598E7&amp;lt;/ax21:marketCap&amp;gt;&amp;lt;ax21:name&amp;gt;IBM Company&amp;lt;/ax21:name&amp;gt;&amp;lt;ax21:open&amp;gt;-66.1434053235991&amp;lt;/ax21:open&amp;gt;&amp;lt;ax21:peRatio&amp;gt;-19.06391318879267&amp;lt;/ax21:peRatio&amp;gt;&amp;lt;ax21:percentageChange&amp;gt;3.9306430170962074&amp;lt;/ax21:percentageChange&amp;gt;&amp;lt;ax21:prevClose&amp;gt;-67.05914527954351&amp;lt;/ax21:prevClose&amp;gt;&amp;lt;ax21:symbol&amp;gt;IBM&amp;lt;/ax21:symbol&amp;gt;&amp;lt;ax21:volume&amp;gt;18504&amp;lt;/ax21:volume&amp;gt;&amp;lt;/ns:return&amp;gt;&amp;lt;/ns:getSimpleQuoteResponse&amp;gt;&lt;/p&gt;

&lt;p&gt;Can you let me know if you encounter any problems running this now?&lt;/p&gt;

&lt;p&gt;asankha&lt;/p&gt;</comment>
                            <comment id="12611124" author="blackorchid" created="Mon, 7 Jul 2008 11:40:21 +0000"  >&lt;p&gt;Hi Asankha,&lt;/p&gt;

&lt;p&gt;The samples all seem to work nicely. And that&apos;s probably my problem. Everything runs fine with the axis2 server on port 9000, but i don&apos;t use that.&lt;br/&gt;
I have a normal RESTful service running on the server machine, this service outputs in plain xml. This service is easily accessible through a webbrowser&lt;br/&gt;
or curl like applications. &lt;br/&gt;
As soon as i try to use synapse as a proxy in the fashion of the above comments, synapse crashes.&lt;/p&gt;

&lt;p&gt;Any ideas?&lt;/p&gt;

&lt;p&gt;Thanks in advance,&lt;br/&gt;
Jasper&lt;/p&gt;</comment>
                            <comment id="12611128" author="asankha" created="Mon, 7 Jul 2008 11:54:32 +0000"  >&lt;p&gt;Jasper&lt;/p&gt;

&lt;p&gt;Whats the backend system you are using? It maybe the case that its &lt;br/&gt;
sending an empty body or a &quot;\r\n&quot; etc with the message.. if its a &lt;br/&gt;
different machine altogether, can you try to get a network level TCP &lt;br/&gt;
dump of the communication and post it?&lt;/p&gt;

&lt;p&gt;asankha&lt;/p&gt;


&lt;p&gt;&amp;#8211; &lt;br/&gt;
Asankha C. Perera&lt;/p&gt;

&lt;p&gt;WSO2 - &lt;a href=&quot;http://wso2.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wso2.org&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://esbmagic.blogspot.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://esbmagic.blogspot.com&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12614594" author="keitha" created="Fri, 18 Jul 2008 00:55:31 +0000"  >&lt;p&gt;If I may add a comment on this issue has I have a very simple test case that does not work and is easy to reproduce.&lt;/p&gt;

&lt;p&gt;The background to this is I wish to proxy and transform some xml that is accessed in normal RESTful manner (GET). However the actual server is not available to me all the time for development, so I thought to use some static xml pages in place of the actual server.&lt;/p&gt;

&lt;p&gt;The environment I am working in is XP Pro - everything is on the local machine.&lt;/p&gt;

&lt;p&gt;In place of the actual server application I deployed an xml file to IIS 5.1. This can easily be viewed in a web browser at the address &lt;a href=&quot;http://localhost/fdc-xml/test.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/fdc-xml/test.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is the response headers for my GET request from firebug:&lt;/p&gt;

&lt;p&gt;Response Headers&lt;br/&gt;
Server	Microsoft-IIS/5.1&lt;br/&gt;
X-Powered-By	ASP.NET&lt;br/&gt;
Date	Fri, 18 Jul 2008 00:35:40 GMT&lt;br/&gt;
Content-Type	text/xml&lt;br/&gt;
Accept-Ranges	bytes&lt;br/&gt;
Last-Modified	Thu, 17 Jul 2008 11:25:17 GMT&lt;br/&gt;
Etag	&quot;25f6dcaffe7c81:f6b&quot;&lt;br/&gt;
Content-Length	173&lt;/p&gt;


&lt;p&gt;And here is the actual response (again from firebug. I use a very simple example here):&lt;/p&gt;

&lt;p&gt;&amp;lt;docroot&amp;gt;&lt;br/&gt;
  &amp;lt;parent&amp;gt;parent 1&lt;br/&gt;
    &amp;lt;child&amp;gt;child 1&amp;lt;/child&amp;gt;&lt;br/&gt;
    &amp;lt;child&amp;gt;child 2&amp;lt;/child&amp;gt;&lt;br/&gt;
  &amp;lt;/parent&amp;gt;&lt;br/&gt;
  &amp;lt;parent&amp;gt;parent 2&lt;br/&gt;
    &amp;lt;child&amp;gt;child 3&amp;lt;/child&amp;gt;&lt;br/&gt;
  &amp;lt;/parent&amp;gt;&lt;br/&gt;
&amp;lt;/docroot&amp;gt;&lt;/p&gt;

&lt;p&gt;So, if I am correct although it is a trivial example of a static xml file, this is also a perfectly valid RESTful web service.&lt;/p&gt;

&lt;p&gt;Now I set up a proxy in Synapse:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;syn:definitions xmlns:syn=&quot;http://ws.apache.org/ns/synapse&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;syn:registry provider=&quot;org.wso2.esb.registry.WSO2Registry&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;syn:proxy name=&quot;xmltest&quot; startOnLoad=&quot;true&quot; statistics=&quot;enable&quot; trace=&quot;enable&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;syn:target&amp;gt;&lt;br/&gt;
            &amp;lt;syn:endpoint&amp;gt;&lt;br/&gt;
                &amp;lt;syn:address uri=&quot;http://localhost/fdc-xml/test.xml&quot; format=&quot;get&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;/syn:endpoint&amp;gt;&lt;br/&gt;
            &amp;lt;syn:outSequence&amp;gt;&lt;br/&gt;
                &amp;lt;syn:send/&amp;gt;&lt;br/&gt;
            &amp;lt;/syn:outSequence&amp;gt;&lt;br/&gt;
        &amp;lt;/syn:target&amp;gt;&lt;br/&gt;
    &amp;lt;/syn:proxy&amp;gt;&lt;br/&gt;
    &amp;lt;syn:sequence name=&quot;fault&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;syn:sequence name=&quot;main&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/syn:definitions&amp;gt;&lt;/p&gt;

&lt;p&gt;I then try and access the proxied service from the following address:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8280/soap/xmltest/mediate&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/soap/xmltest/mediate&lt;/a&gt; (I hope this bit is correct, could not find good documentation).&lt;/p&gt;

&lt;p&gt;I have run this test for both 1.7 and ESB-NIGHTLY-82 and neither works, although the results are different:&lt;/p&gt;

&lt;p&gt;In the 1.7 release the error is an http 500 in the browser. In the log:&lt;/p&gt;

&lt;p&gt;    ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;18 Jul 2008 00:38:56&amp;#93;&lt;/span&gt; ServerWorker - Error processing GET request for: /soap/xmltest/mediate&lt;/p&gt;

&lt;p&gt;In ESB-NIGHTLY-82 there is an http 404 in the browser. In the log:&lt;/p&gt;

&lt;p&gt;    WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;18 Jul 2008 00:46:20&amp;#93;&lt;/span&gt; ClientHandler - Unexpected HTTP status code received : 404 :: Object Not Found  &lt;/p&gt;

&lt;p&gt;    WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;18 Jul 2008 00:46:20&amp;#93;&lt;/span&gt; ClientHandler - Received an unexpected response - of content type : text/html and status code : 404 with reason : Object Not Found  &lt;/p&gt;

&lt;p&gt;    WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;18 Jul 2008 00:46:20&amp;#93;&lt;/span&gt; ClientWorker - Unexpected response received : com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character &apos;&quot;&apos; (code 34) in DOCTYPE declaration; expected a space between public and system identifiers at [row,col &lt;/p&gt;
{unknown-source}]: &lt;span class=&quot;error&quot;&gt;&amp;#91;1,55&amp;#93;&lt;/span&gt;  &lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
For the nightly build here is the response header from firebug:&lt;br/&gt;
Content-Type	application/xml; charset=UTF-8&lt;br/&gt;
Date	Fri, 18 Jul 2008 00:53:27 GMT&lt;br/&gt;
Server	Synapse-HttpComponents-NIO&lt;br/&gt;
Transfer-Encoding	chunked&lt;br/&gt;
Connection	keep-alive&lt;br/&gt;
&lt;br/&gt;
And here is the response:&lt;br/&gt;
&amp;lt;Exception&amp;gt;Unexpected response received : com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character &apos;&quot;&apos; (code 34) in DOCTYPE declaration; expected a space between public and system identifiers&amp;#xd; at [row,col {unknown-source}
&lt;p&gt;]: &lt;span class=&quot;error&quot;&gt;&amp;#91;1,55&amp;#93;&lt;/span&gt;&amp;lt;/Exception&amp;gt;&lt;/p&gt;


&lt;p&gt;I hope this is clear enough that you can reproduce (or, if my mistake in configuration or access please let me know).&lt;/p&gt;

&lt;p&gt;Thanks, Keith&lt;/p&gt;</comment>
                            <comment id="12614644" author="asankha" created="Fri, 18 Jul 2008 04:41:44 +0000"  >&lt;p&gt;Keith,  Can you attach your XML response file?&lt;/p&gt;</comment>
                            <comment id="12615083" author="keitha" created="Sun, 20 Jul 2008 11:27:27 +0000"  >&lt;p&gt;I included two response files inline in my original comment:&lt;br/&gt;
1. The response when accessing the xml through a browser get request (not proxied by esb):&lt;br/&gt;
&amp;lt;docroot&amp;gt;&lt;br/&gt;
  &amp;lt;parent&amp;gt;parent 1&lt;br/&gt;
    &amp;lt;child&amp;gt;child 1&amp;lt;/child&amp;gt;&lt;br/&gt;
    &amp;lt;child&amp;gt;child 2&amp;lt;/child&amp;gt;&lt;br/&gt;
  &amp;lt;/parent&amp;gt;&lt;br/&gt;
  &amp;lt;parent&amp;gt;parent 2&lt;br/&gt;
    &amp;lt;child&amp;gt;child 3&amp;lt;/child&amp;gt;&lt;br/&gt;
  &amp;lt;/parent&amp;gt;&lt;br/&gt;
&amp;lt;/docroot&amp;gt; &lt;/p&gt;

&lt;p&gt;2. The response when trying to access through a browser get request when proxied by esb:&lt;br/&gt;
&amp;lt;Exception&amp;gt;Unexpected response received : com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character &apos;&quot;&apos; (code 34) in DOCTYPE declaration; expected a space between public and system identifiers&amp;#xd; at [row,col &lt;/p&gt;
{unknown-source}
&lt;p&gt;]: &lt;span class=&quot;error&quot;&gt;&amp;#91;1,55&amp;#93;&lt;/span&gt;&amp;lt;/Exception&amp;gt; &lt;/p&gt;

&lt;p&gt;Hope this helps&lt;br/&gt;
Keith&lt;/p&gt;</comment>
                            <comment id="12618961" author="saliya" created="Fri, 1 Aug 2008 08:35:32 +0000"  >&lt;p&gt;Hi Keith,&lt;/p&gt;

&lt;p&gt;This issue is now fixed and the fix should be available in the trunk soon. See &lt;a href=&quot;http://issues.apache.org/jira/browse/SYNAPSE-412&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/SYNAPSE-412&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Saliya&lt;/p&gt;</comment>
                            <comment id="12680048" author="ruwan" created="Mon, 9 Mar 2009 03:47:13 +0000"  >&lt;p&gt;This is fixed on the trunk and will be available for the 1.3 release..&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11hcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216777</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>