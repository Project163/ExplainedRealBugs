<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:08:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-775] Segmentation Fault when Template Endpoint used in loadbalance failover scenario</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-775</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;1. create Endpoint Template&lt;br/&gt;
2. create loadbalance failover config&lt;br/&gt;
3. use tempalte endpoints to point to the template&lt;br/&gt;
4. run load balance scenario with all backends down&lt;/p&gt;

&lt;p&gt;ie:- sample config&lt;/p&gt;

&lt;p&gt;&amp;lt;definitions xmlns=&quot;http://ws.apache.org/ns/synapse&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;proxy name=&quot;LBProxy&quot; transports=&quot;https http&quot; startOnLoad=&quot;true&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;target faultSequence=&quot;errorHandler&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;inSequence&amp;gt;&lt;br/&gt;
                &amp;lt;send&amp;gt;&lt;br/&gt;
                    &amp;lt;endpoint&amp;gt;&lt;br/&gt;
                        &amp;lt;session type=&quot;simpleClientSession&quot;/&amp;gt;&lt;br/&gt;
                        &amp;lt;loadbalance algorithm=&quot;org.apache.synapse.endpoints.algorithms.RoundRobin&quot;&amp;gt;&lt;br/&gt;
                            &amp;lt;endpoint name=&quot;templ_ep1&quot; template=&quot;endpoint_template&quot; uri=&quot;http://localhost:9001/services/LBService1&quot;&amp;gt;&lt;br/&gt;
				&amp;lt;parameter name=&quot;suspend_duration&quot; value=&quot;50&quot;/&amp;gt;&lt;br/&gt;
                            &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
			    &amp;lt;endpoint name=&quot;templ_ep2&quot; template=&quot;endpoint_template&quot; uri=&quot;http://localhost:9002/services/LBService1&quot;&amp;gt;&lt;br/&gt;
				&amp;lt;parameter name=&quot;suspend_duration&quot; value=&quot;20&quot;/&amp;gt;&lt;br/&gt;
                            &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
			    &amp;lt;endpoint name=&quot;templ_ep3&quot; template=&quot;endpoint_template&quot; uri=&quot;http://localhost:9003/services/LBService1&quot;&amp;gt;&lt;br/&gt;
				&amp;lt;parameter name=&quot;suspend_duration&quot; value=&quot;200&quot;/&amp;gt;&lt;br/&gt;
                            &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
                        &amp;lt;/loadbalance&amp;gt;&lt;br/&gt;
                    &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
                &amp;lt;/send&amp;gt;&lt;br/&gt;
                &amp;lt;drop/&amp;gt;&lt;br/&gt;
            &amp;lt;/inSequence&amp;gt;&lt;br/&gt;
            &amp;lt;outSequence&amp;gt;&lt;br/&gt;
                &amp;lt;send/&amp;gt;&lt;br/&gt;
            &amp;lt;/outSequence&amp;gt;&lt;br/&gt;
        &amp;lt;/target&amp;gt;&lt;br/&gt;
        &amp;lt;publishWSDL uri=&quot;file:repository/samples/resources/proxy/sample_proxy_2.wsdl&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/proxy&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;sequence name=&quot;errorHandler&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;makefault&amp;gt;&lt;br/&gt;
            &amp;lt;code value=&quot;tns:Receiver&quot; xmlns:tns=&quot;http://www.w3.org/2003/05/soap-envelope&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;reason value=&quot;COULDN&apos;T SEND THE MESSAGE TO THE SERVER.&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/makefault&amp;gt;&lt;br/&gt;
        &amp;lt;send/&amp;gt;&lt;br/&gt;
    &amp;lt;/sequence&amp;gt;&lt;/p&gt;



&lt;p&gt;    &amp;lt;template name=&quot;endpoint_template&quot;&amp;gt;&lt;br/&gt;
	    &amp;lt;parameter name=&quot;suspend_duration&quot;/&amp;gt;&lt;br/&gt;
	    &amp;lt;endpoint name=&quot;$name&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;address uri=&quot;$uri&quot;&amp;gt;&lt;br/&gt;
		    &amp;lt;enableAddressing/&amp;gt;&lt;br/&gt;
                    &amp;lt;suspendDurationOnFailure&amp;gt;$suspend_duration&amp;lt;/suspendDurationOnFailure&amp;gt;&lt;br/&gt;
		&amp;lt;/address&amp;gt;&lt;br/&gt;
	    &amp;lt;/endpoint&amp;gt;&lt;br/&gt;
    &amp;lt;/template&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/definitions&amp;gt;&lt;/p&gt;</description>
                <environment>jdk1.6</environment>
        <key id="12508794">SYNAPSE-775</key>
            <summary>Segmentation Fault when Template Endpoint used in loadbalance failover scenario</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="heshan">Heshan Theekshana Suriyaarachchi</assignee>
                                    <reporter username="udayangaw@wso2.com">Udayanga Wickramasinghe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 May 2011 05:47:07 +0000</created>
                <updated>Fri, 17 Jun 2011 04:53:14 +0000</updated>
                            <resolved>Fri, 17 Jun 2011 04:53:14 +0000</resolved>
                                                    <fixVersion>2.1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13041441" author="udayangaw@wso2.com" created="Tue, 31 May 2011 05:49:39 +0000"  >&lt;p&gt;trace--&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-05-30 12:36:10,805&amp;#93;&lt;/span&gt; DEBUG - AddressEndpoint Encountered an error sending to endpoint : annonymous, with error code : 101503, but not a retry disabled error&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-05-30 12:36:10,805&amp;#93;&lt;/span&gt; DEBUG - SALSessions Removing the session with the session Id c1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-05-30 12:36:10,805&amp;#93;&lt;/span&gt; DEBUG - SALoadbalanceEndpoint Start : Session Affinity Load-balance Endpoint endpoint_af491d1c9579294d7ba0e0899e30f8f9eb5ff2054091bd56&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-05-30 12:36:10,805&amp;#93;&lt;/span&gt; DEBUG - SALSessions Retrieving the endpoint from the session id c1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-05-30 12:36:10,805&amp;#93;&lt;/span&gt; DEBUG - SALSessions Session information cannot be found for session id c1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-05-30 12:36:10,806&amp;#93;&lt;/span&gt; DEBUG - AlgorithmContext Setting the current EPR as : 1&lt;br/&gt;
Segmentation fault &lt;/p&gt;</comment>
                            <comment id="13041447" author="udayangaw@wso2.com" created="Tue, 31 May 2011 06:00:06 +0000"  >&lt;p&gt;fixed template Endpoint with #readyToSend() method. (Template Endpoints were always returning true for #readyToSend() for LB Algorithm Ctxt )&lt;/p&gt;</comment>
                            <comment id="13050897" author="heshan" created="Fri, 17 Jun 2011 04:53:14 +0000"  >&lt;p&gt;Committed to the trunk (revision 1136761). &lt;br/&gt;
Thanks Udayanga for the contribution. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12480903" name="synapse_SYNAPSE-775.patch" size="844" author="udayangaw@wso2.com" created="Tue, 31 May 2011 06:00:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>71075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11hx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>