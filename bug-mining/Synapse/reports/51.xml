<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:07:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-156] Unexpected Closed Chanel Exception in ClientHandler</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-156</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;This is the last comment for the &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-155&quot; title=&quot;NIO HTTP is not supporting HTTP GET correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-155&quot;&gt;&lt;del&gt;SYNAPSE-155&lt;/del&gt;&lt;/a&gt; from Oleg,&lt;/p&gt;

&lt;p&gt;I think found the cause of the problem. ClientHandler closes output sink channel prematurely at the same time with the connection to the target server, while the ServerHandler is still busy sending the response content back the client. This is a separate issue from the original one. I think you should close this issue and open a new one specifically for the said problem.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;

&lt;p&gt;=======================&lt;br/&gt;
    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Process ready input (i.e. response from remote server)&lt;/li&gt;
	&lt;li&gt;@param conn connection being processed&lt;/li&gt;
	&lt;li&gt;@param decoder the content decoder in use&lt;br/&gt;
     */&lt;br/&gt;
    public void inputReady(final NHttpClientConnection conn, final ContentDecoder decoder) {&lt;br/&gt;
        HttpContext context = conn.getContext();&lt;br/&gt;
        HttpResponse response = conn.getHttpResponse();&lt;br/&gt;
        WritableByteChannel sink = (WritableByteChannel) context.getAttribute(RESPONSE_SINK_CHANNEL);&lt;br/&gt;
...&lt;br/&gt;
            if (decoder.isCompleted()) 
{
                if (sink != null) sink.close(); // oopsie
...
            }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;...&lt;br/&gt;
=======================&lt;/p&gt;


&lt;p&gt;Please see &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-155&quot; title=&quot;NIO HTTP is not supporting HTTP GET correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-155&quot;&gt;&lt;del&gt;SYNAPSE-155&lt;/del&gt;&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SYNAPSE-155&lt;/a&gt;) for more details&lt;/p&gt;</description>
                <environment></environment>
        <key id="12380790">SYNAPSE-156</key>
            <summary>Unexpected Closed Chanel Exception in ClientHandler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asankha">Asankha Chamath Perera</assignee>
                                    <reporter username="ruwan">Ruwan Linton</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2007 16:51:18 +0000</created>
                <updated>Fri, 26 Oct 2007 12:45:44 +0000</updated>
                            <resolved>Fri, 26 Oct 2007 12:24:45 +0000</resolved>
                                    <version>1.1-QA-B2</version>
                                    <fixVersion>1.1-RC1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12536731" author="olegk" created="Mon, 22 Oct 2007 16:25:02 +0000"  >&lt;p&gt;Folks,&lt;/p&gt;

&lt;p&gt;I looked into the problem and currently lean toward doing some refactoring on the Synapse NIO HTTP transport to simplify connection state management code. This would help fix the problem properly. I do not know how much that interferes with your release plans, though.  &lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="12537580" author="olegk" created="Thu, 25 Oct 2007 12:19:02 +0000"  >&lt;p&gt;Folks,&lt;/p&gt;

&lt;p&gt;I believe that in order to solve the issue &lt;br/&gt;
(1) there has to be a way to share session information between the client end point and the target end point.  &lt;br/&gt;
(2) conversation state (request/response pipes, etc) needs to be decoupled from the connection state. That would enable NHttp transport to drop connections to the target without losing the conversation state &lt;/p&gt;

&lt;p&gt;I have a patch more or less ready but am unable to complete it because I am stuck trying to find my way around Axis2 kernel. &lt;/p&gt;

&lt;p&gt;Asankha, I am afraid you&apos;ll have to take over from here. I&apos;ll happily pass the unfinished patch onto you, if that is of any interest.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="12537939" author="asankha" created="Fri, 26 Oct 2007 12:24:45 +0000"  >&lt;p&gt;Oleg,&lt;/p&gt;

&lt;p&gt;Can I see your patch? I found the culprit to be a bug in our code again .. but would like to think on the lines you suggest for future.. &lt;/p&gt;

&lt;p&gt;Many thanks for your contributions in fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/SYNAPSE-155&quot; title=&quot;NIO HTTP is not supporting HTTP GET correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SYNAPSE-155&quot;&gt;&lt;del&gt;SYNAPSE-155&lt;/del&gt;&lt;/a&gt; and this one&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
asankha&lt;/p&gt;</comment>
                            <comment id="12537942" author="olegk" created="Fri, 26 Oct 2007 12:45:44 +0000"  >&lt;p&gt;Asankha,&lt;/p&gt;

&lt;p&gt;Basic idea is to keep all related objects in one place instead of having them scattered around various connection contexts and to make sure the target bound connection has a means of making its state known to the client bound one as visa versa.&lt;/p&gt;

&lt;p&gt;My ideas can easily be completely off-base, so take this patch for what it is worth to you. The code is completely untested as I never succeeded in making Axis2 kernel work for me.&lt;/p&gt;

&lt;p&gt;Cheers&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12368484" name="synapse-proxy-session-proposal.patch" size="43388" author="olegk" created="Fri, 26 Oct 2007 12:45:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183388</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11h67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>