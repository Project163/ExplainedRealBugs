<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:08:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SYNAPSE-456] dbloopup gives com.mysql.jdbc.CommunicationsException  after idling a night</title>
                <link>https://issues.apache.org/jira/browse/SYNAPSE-456</link>
                <project id="12310201" key="SYNAPSE">Synapse</project>
                    <description>&lt;p&gt;I have a wso2 sequence  with dblookup/dbreport mediators.&lt;br/&gt;
Basically every soap call is stored in the database.&lt;/p&gt;

&lt;p&gt;Every morning, the wso2esb bus is in a state it doesn&apos;t process any messages anymore due to database access problems.&lt;br/&gt;
2008-09-28 20:14:33,480 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1-vloeki_v01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HttpServerWorker-3&amp;#93;&lt;/span&gt; ERROR DBLookupMediator Error executing statement : select&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;from customer c where token = &apos;00000000-00&apos;; against DataSource :jdbc:mysql://localhost:3306/esb&lt;br/&gt;
com.mysql.jdbc.CommunicationsException: Communications link failure due to&lt;br/&gt;
underlying exception:
	&lt;ul&gt;
		&lt;li&gt;BEGIN NESTED EXCEPTION **&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;java.net.SocketException&lt;br/&gt;
MESSAGE: Broken pipe&lt;/p&gt;


&lt;p&gt;During the night the bus is typically idle (zero messages).&lt;br/&gt;
The database is &lt;em&gt;not&lt;/em&gt; down. mysql query browser is working just fine.&lt;/p&gt;


&lt;p&gt;full report &amp;amp; error on&lt;br/&gt;
&lt;a href=&quot;http://wso2.org/mailarchive/esb-java-user/2008-September/000897.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wso2.org/mailarchive/esb-java-user/2008-September/000897.html&lt;/a&gt;&lt;/p&gt;
</description>
                <environment>debian on xen VM, mysql running on same host as wso2esb.&lt;br/&gt;
&lt;br/&gt;
versions:&lt;br/&gt;
wso2esb v1.7.1&lt;br/&gt;
mysql 5.0&lt;br/&gt;
libmysql-java 5.0.4+dfsg-2 </environment>
        <key id="12405451">SYNAPSE-456</key>
            <summary>dbloopup gives com.mysql.jdbc.CommunicationsException  after idling a night</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asankha">Asankha Chamath Perera</assignee>
                                    <reporter username="harm">harm verhagen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Sep 2008 11:34:36 +0000</created>
                <updated>Wed, 25 Mar 2009 07:49:56 +0000</updated>
                            <resolved>Tue, 24 Mar 2009 18:42:55 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12635724" author="harm" created="Tue, 30 Sep 2008 11:35:58 +0000"  >&lt;p&gt;synapse configuration file, with the sequence that shows the problem.&lt;/p&gt;</comment>
                            <comment id="12688785" author="asankha" created="Tue, 24 Mar 2009 18:42:55 +0000"  >&lt;p&gt;Specify a valid and suitable query for validation, and this feature works as expected.&lt;/p&gt;

&lt;p&gt;e.g. &lt;br/&gt;
                        &amp;lt;property name=&quot;testonborrow&quot; value=&quot;true&quot;/&amp;gt;&lt;br/&gt;
                        &amp;lt;property name=&quot;validationquery&quot; value=&quot;SELECT count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from company&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;Also see &lt;a href=&quot;http://wiki.apache.org/commons/DBCP&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/commons/DBCP&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12689021" author="harm" created="Wed, 25 Mar 2009 07:49:56 +0000"  >&lt;p&gt;This works reliably for  me with the following configuration.&lt;/p&gt;

&lt;p&gt; &amp;lt;syn:property name=&quot;validationquery&quot; value=&quot;select 1&quot;/&amp;gt;&lt;br/&gt;
 &amp;lt;syn:property name=&quot;testwhileidle&quot; value=&quot;true&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;syn:property name=&quot;testonborrow&quot; value=&quot;true&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;(esb v1.7.1)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12391210" name="synapse.xml" size="12983" author="harm" created="Tue, 30 Sep 2008 11:35:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>183679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i11om7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>217954</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>