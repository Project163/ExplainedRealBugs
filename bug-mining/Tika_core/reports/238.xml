<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:07:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2064] Document type detected incorrectly for Stata datasets (.dta extension)</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2064</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The content type of Stata datasets (created using &lt;a href=&quot;http://www.stata.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.stata.com&lt;/a&gt; software) is incorrectly detected as `text/html` by Tika. I have tested this using the latest release of Tika, v1.13:&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
$ curl -O &lt;a href=&quot;http://www.stata-press.com/data/r14/auto.dta&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.stata-press.com/data/r14/auto.dta&lt;/a&gt;&lt;br/&gt;
$ java -jar tika-app-1.13.jar --detect auto.dta&lt;br/&gt;
text/html&lt;br/&gt;
```&lt;/p&gt;

&lt;p&gt;I believe that the type should instead be `application/octet-stream` (or the equivalent).&lt;/p&gt;

&lt;p&gt;I originally reported this bug downstream (at &lt;a href=&quot;https://github.com/laurilehmijoki/s3_website/issues/232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/laurilehmijoki/s3_website/issues/232&lt;/a&gt;), and was advised to report upstream to Tika. In addition to the one I downloaded using `curl` in my example, a variety of reference Stata datasets are posted here: &lt;a href=&quot;http://www.stata-press.com/data/r14/dmain.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.stata-press.com/data/r14/dmain.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13000842">TIKA-2064</key>
            <summary>Document type detected incorrectly for Stata datasets (.dta extension)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michaelstepner">Michael Stepner</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Aug 2016 03:39:31 +0000</created>
                <updated>Tue, 13 Sep 2016 20:55:37 +0000</updated>
                                            <version>1.13</version>
                                                    <component>detector</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15446089" author="gagravarr" created="Mon, 29 Aug 2016 14:49:47 +0000"  >&lt;p&gt;From a quick google, `application/x-stata-dta` seems to be what other people are using for these files&lt;/p&gt;

&lt;p&gt;They look to be somewhat xml-based, so proper detection ought not to be too hard to sort out for them&lt;/p&gt;

&lt;p&gt;Do you know the license of the test file you&apos;ve referenced? And/or have the ability to create a small test DTA file that you can share with us to use in unit tests?&lt;/p&gt;</comment>
                            <comment id="15446521" author="michaelstepner" created="Mon, 29 Aug 2016 17:36:13 +0000"  >&lt;p&gt;Thanks Nick, glad you figured out that there&apos;s a non-generic mime type used for these files.&lt;/p&gt;

&lt;p&gt;I&apos;ve asked the Stata community about the license of the auto.dta test file, which is the most commonly used test file for Stata datasets.  My question is posted here: &lt;a href=&quot;http://www.statalist.org/forums/forum/general-stata-discussion/general/1354690-license-for-auto-dta&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.statalist.org/forums/forum/general-stata-discussion/general/1354690-license-for-auto-dta&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I could also create a small test DTA for use in unit tests.  Do you have a preferred way for me to transfer this file to you?&lt;/p&gt;

&lt;p&gt;In case it is useful in configuring proper detection, the reference spec for Stata DTA files is open and published here: &lt;a href=&quot;http://www.stata.com/help.cgi?dta&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.stata.com/help.cgi?dta&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15447225" author="michaelstepner" created="Mon, 29 Aug 2016 22:17:10 +0000"  >&lt;p&gt;Nick, I&apos;ve confirmed that the `auto.dta` test file that I referenced is not released under an open license (thanks to Sergiy&apos;s response to my question, linked above).  I&apos;m happy to create a small .dta file for unit testing.&lt;/p&gt;</comment>
                            <comment id="15484812" author="gagravarr" created="Mon, 12 Sep 2016 18:03:15 +0000"  >&lt;p&gt;If you could, that would be most helpful!&lt;/p&gt;</comment>
                            <comment id="15487585" author="gagravarr" created="Tue, 13 Sep 2016 15:56:28 +0000"  >&lt;p&gt;Magic added in 3c0abc8eb. No unit tests yet though, we can add them once you get a chance to create some simple test files &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15487731" author="hudson" created="Tue, 13 Sep 2016 16:52:13 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1098 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1098/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1098/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; Mime types, with magic, for mostly-xml Stata DTA files. (nick: rev 3c0abc8ebebbaa54a716fbcd15eaf8057343842f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15488014" author="michaelstepner" created="Tue, 13 Sep 2016 18:32:55 +0000"  >&lt;p&gt;Hi Nick,&lt;/p&gt;

&lt;p&gt;I&apos;ve created a test dataset and attached it here.&lt;/p&gt;

&lt;p&gt;This file was created in Stata 13.1 running on Mac OS X. There are small differences in the format of the files depending on the Stata version and the operating system it&apos;s run on.  But I don&apos;t imagine it&apos;s worthwhile to build more tests unless we see a bug with a Stata file created using a different version or OS.&lt;/p&gt;

&lt;p&gt;The code that created the test dataset is:&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
clear all&lt;br/&gt;
set obs 3&lt;/p&gt;

&lt;p&gt;gen byte integers=_n&lt;br/&gt;
gen double reals = sqrt(_n)&lt;/p&gt;

&lt;p&gt;gen fruits = &quot;&quot;&lt;br/&gt;
replace fruits = &quot;apple&quot; in 1&lt;br/&gt;
replace fruits = &quot;banana&quot; in 2&lt;br/&gt;
replace fruits = &quot;cantaloupe&quot; in 3&lt;/p&gt;

&lt;p&gt;save stata_test_data.dta&lt;br/&gt;
```&lt;/p&gt;

&lt;p&gt;I&apos;d like to release this code and related dataset to the public domain using &lt;span class=&quot;error&quot;&gt;&amp;#91;CC0&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://creativecommons.org/publicdomain/zero/1.0/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://creativecommons.org/publicdomain/zero/1.0/&lt;/a&gt;).  I can also apply any more restrictive license you prefer that makes it easy for you to use the file.&lt;/p&gt;</comment>
                            <comment id="15488175" author="gagravarr" created="Tue, 13 Sep 2016 19:34:51 +0000"  >&lt;p&gt;Are you happy to dual-license it as Apache License, Version 2.0? We can certainly use a CC0 file (see &lt;a href=&quot;http://www.apache.org/legal/resolved.html#can-works-placed-in-the-public-domain-be-included-in-apache-products&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/legal/resolved.html#can-works-placed-in-the-public-domain-be-included-in-apache-products&lt;/a&gt;), but it&apos;s typically a little bit more record keeping!&lt;/p&gt;</comment>
                            <comment id="15488181" author="michaelstepner" created="Tue, 13 Sep 2016 19:37:19 +0000"  >&lt;p&gt;Hi Nick, I&apos;m happy to dual-license it as Apache License Version 2.0!&lt;/p&gt;</comment>
                            <comment id="15488293" author="hudson" created="Tue, 13 Sep 2016 20:16:40 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build tika-2.x-windows #45 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/45/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/45/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; Mime types, with magic, for mostly-xml Stata DTA files. (nick: rev 443a21e3fb564df9bb1c52f6533bd5da6f5cfcc8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; Test Stata DTA files from Michael Stepner, plus detection (nick: rev e58ade381a3e4285eb81d55fb250611e82adbef7)&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testStataDTA.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testStataDTA.dta&lt;/li&gt;
	&lt;li&gt;(edit) tika-app/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;br/&gt;
Merge changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; to 2.x (nick: rev 9f6241161af93c9cefd4ba90342b6834a49dc4b1)&lt;/li&gt;
	&lt;li&gt;(add) tika-test-resources/src/test/resources/test-documents/testStataDTA.dta&lt;/li&gt;
	&lt;li&gt;(delete) tika-parsers/src/test/resources/test-documents/testStataDTA.txt&lt;/li&gt;
	&lt;li&gt;(delete) tika-parsers/src/test/resources/test-documents/testStataDTA.dta&lt;/li&gt;
	&lt;li&gt;(add) tika-test-resources/src/test/resources/test-documents/testStataDTA.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15488390" author="hudson" created="Tue, 13 Sep 2016 20:52:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1099 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1099/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1099/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; Test Stata DTA files from Michael Stepner, plus detection unit (nick: rev 2222fe0ce2e1db633bdcf49bd7b24941374f2033)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testStataDTA.dta&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testStataDTA.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15488398" author="hudson" created="Tue, 13 Sep 2016 20:55:37 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-2.x #141 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/141/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/141/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; Mime types, with magic, for mostly-xml Stata DTA files. (nick: rev 443a21e3fb564df9bb1c52f6533bd5da6f5cfcc8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; Test Stata DTA files from Michael Stepner, plus detection unit (nick: rev e58ade381a3e4285eb81d55fb250611e82adbef7)&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testStataDTA.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-parsers/src/test/resources/test-documents/testStataDTA.dta&lt;/li&gt;
	&lt;li&gt;(edit) tika-app/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;br/&gt;
Merge changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2064&quot; title=&quot;Document type detected incorrectly for Stata datasets (.dta extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2064&quot;&gt;TIKA-2064&lt;/a&gt; to 2.x (nick: rev 9f6241161af93c9cefd4ba90342b6834a49dc4b1)&lt;/li&gt;
	&lt;li&gt;(add) tika-test-resources/src/test/resources/test-documents/testStataDTA.dta&lt;/li&gt;
	&lt;li&gt;(delete) tika-parsers/src/test/resources/test-documents/testStataDTA.txt&lt;/li&gt;
	&lt;li&gt;(add) tika-test-resources/src/test/resources/test-documents/testStataDTA.txt&lt;/li&gt;
	&lt;li&gt;(delete) tika-parsers/src/test/resources/test-documents/testStataDTA.dta&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12828307" name="stata_test_data.dta" size="1207" author="michaelstepner" created="Tue, 13 Sep 2016 18:32:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32xdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>