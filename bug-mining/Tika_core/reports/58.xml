<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:06:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-394] Missing spaces on html parsing</title>
                <link>https://issues.apache.org/jira/browse/TIKA-394</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;On parsing such html code:&lt;/p&gt;

&lt;p&gt;text&amp;lt;p&amp;gt;more&amp;lt;br&amp;gt;yet&amp;lt;select&amp;gt;&amp;lt;option&amp;gt;city1&amp;lt;option&amp;gt;city2&amp;lt;/select&amp;gt;&lt;/p&gt;

&lt;p&gt;resulting text is:&lt;/p&gt;

&lt;p&gt;textmore&lt;br/&gt;
yetcity1city2&lt;/p&gt;

&lt;p&gt;But must be:&lt;/p&gt;

&lt;p&gt;text&lt;br/&gt;
more&lt;br/&gt;
yet city1 city2&lt;/p&gt;

&lt;p&gt;Code sample:&lt;/p&gt;

&lt;p&gt;import java.io.*;&lt;br/&gt;
import org.apache.tika.metadata.*;&lt;br/&gt;
import org.apache.tika.parser.*;&lt;/p&gt;

&lt;p&gt;public class test {&lt;/p&gt;

&lt;p&gt;   public static void main(String[] args) throws Exception {&lt;br/&gt;
      Metadata metadata = new Metadata();&lt;br/&gt;
      metadata.set(Metadata.CONTENT_TYPE, &quot;text/html&quot;);&lt;br/&gt;
      String content = &quot;text&amp;lt;p&amp;gt;more&amp;lt;br&amp;gt;yet&amp;lt;select&amp;gt;&amp;lt;option&amp;gt;city1&amp;lt;option&amp;gt;city2&amp;lt;/select&amp;gt;&quot;;&lt;/p&gt;

&lt;p&gt;      InputStream in = new ByteArrayInputStream(content.getBytes(&quot;UTF-8&quot;));&lt;br/&gt;
      AutoDetectParser parser = new AutoDetectParser();&lt;br/&gt;
      Reader reader = new ParsingReader(parser, in, metadata, new ParseContext());&lt;br/&gt;
      char[] buf = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;10000&amp;#93;&lt;/span&gt;;&lt;br/&gt;
      int len;&lt;br/&gt;
      StringBuffer text = new StringBuffer();&lt;br/&gt;
      while((len = reader.read(buf)) &amp;gt; 0) &lt;/p&gt;
{
         text.append(buf, 0, len);
      }
&lt;p&gt;      System.out.print(text);&lt;br/&gt;
   }&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tomcat 6, Windows XP (russian locale)&lt;/p&gt;</environment>
        <key id="12460251">TIKA-394</key>
            <summary>Missing spaces on html parsing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkrugler">Kenneth William Krugler</assignee>
                                    <reporter username="edhel">Andrey Barhatov</reporter>
                        <labels>
                            <label>html</label>
                            <label>spaces</label>
                            <label>tag</label>
                    </labels>
                <created>Thu, 25 Mar 2010 15:56:11 +0000</created>
                <updated>Thu, 25 Aug 2011 16:28:47 +0000</updated>
                            <resolved>Tue, 26 Oct 2010 17:02:07 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12887235" author="kkrugler" created="Sun, 11 Jul 2010 21:38:03 +0000"  >&lt;p&gt;The issue here is that various content handlers (e.g. BodyContentHandler, WriteoutContentHandler) need to add spaces at the end (and sometimes beginning) of elements that typically get rendered on different lines by a browser.&lt;/p&gt;

&lt;p&gt;Examples include &amp;lt;p&amp;gt;, &amp;lt;option&amp;gt;, &amp;lt;menu&amp;gt;, and others.&lt;/p&gt;

&lt;p&gt;I think we need a TextContentHandler &quot;helper&quot; that everybody can use to convert a stream of XHTML events into a reasonable text approximation of the marked up content.&lt;/p&gt;</comment>
                            <comment id="12925036" author="kkrugler" created="Tue, 26 Oct 2010 16:58:26 +0000"  >&lt;p&gt;Actually XHTMLContentHandler is set up to deal with this, but it was missing entries for &quot;select&quot; and &quot;option&quot;.&lt;/p&gt;</comment>
                            <comment id="12925038" author="kkrugler" created="Tue, 26 Oct 2010 17:02:07 +0000"  >&lt;p&gt;Committed: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1027652&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1027652&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13091107" author="edhel" created="Thu, 25 Aug 2011 16:28:47 +0000"  >&lt;p&gt;I test my above code on Tika 0.9. Result:&lt;/p&gt;

&lt;p&gt;textmore&lt;br/&gt;
yetcity1&lt;br/&gt;
city2&lt;/p&gt;

&lt;p&gt;I suppose it&apos;s not correct behavior.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12477542">TIKA-532</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12458084" name="TIKA-394.patch" size="3330" author="kkrugler" created="Tue, 26 Oct 2010 16:59:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i039iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>