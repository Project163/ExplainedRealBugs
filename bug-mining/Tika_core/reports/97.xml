<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:06:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-741] &quot;Zip bomb&quot; (XML nesting) detection is too strict</title>
                <link>https://issues.apache.org/jira/browse/TIKA-741</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I get &quot;zip bomb&quot; errors from many HTML documents, e.g. &lt;a href=&quot;http://www.akhbaar.org/wesima_articles/index-20100101-82736.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.akhbaar.org/wesima_articles/index-20100101-82736.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is there a way that the element nesting level could be made configurable? 30 elements just doesn&apos;t seem to be enough.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525613">TIKA-741</key>
            <summary>&quot;Zip bomb&quot; (XML nesting) detection is too strict</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="egh">Erik Hetzner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2011 01:16:14 +0000</created>
                <updated>Wed, 10 Feb 2016 05:51:48 +0000</updated>
                            <resolved>Wed, 5 Oct 2011 15:14:05 +0000</resolved>
                                    <version>0.10</version>
                                    <fixVersion>1.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13121022" author="jukkaz" created="Wed, 5 Oct 2011 15:00:03 +0000"  >&lt;p&gt;Updated summary since the described behaviour is arguably an error in the default setting.&lt;/p&gt;</comment>
                            <comment id="13121030" author="jukkaz" created="Wed, 5 Oct 2011 15:14:05 +0000"  >&lt;p&gt;In revision 1179254 I increased the default permitted XML nesting level to 100 and introduced a separate limit of at most 10 nested &amp;lt;div class=&quot;package-entry&quot;&amp;gt; elements to catch excessive nesting of package formats.&lt;/p&gt;

&lt;p&gt;The maximum nesting limits can be set directly on on the SecureContentHandler level, but are not currently configurable if you&apos;re using the Tika facade or the AutoDetectParser class. I&apos;d like to come up with default settings that work for all practical cases before we consider adding such low level configuration options to the higher level APIs.&lt;/p&gt;</comment>
                            <comment id="13121064" author="egh" created="Wed, 5 Oct 2011 15:45:12 +0000"  >&lt;p&gt;100 levels should probably do the trick. Thanks!&lt;/p&gt;</comment>
                            <comment id="15136128" author="pascal.essiembre" created="Sun, 7 Feb 2016 03:59:11 +0000"  >&lt;p&gt;It looks like maxDepth 100 is not enough.  I am using Tika 1.11 and I am able to reproduce a false &quot;zip bomb&quot; exception with the following PDF: &lt;a href=&quot;https://www.db.com/ir/en/download/DB_Interim_Report_1Q2015.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.db.com/ir/en/download/DB_Interim_Report_1Q2015.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Without a maximum, the currentDepth for this file goes up to 120 in SecureContentHandler.  Not being configurable at a higher level makes it impossible to parse this file with the current code.  &lt;/p&gt;

&lt;p&gt;Shall I create a new ticket instead? Or may be re-open the following one to make it configurable: #&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-860&quot; title=&quot;Make ZIP bomb detection configureable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-860&quot;&gt;&lt;del&gt;TIKA-860&lt;/del&gt;&lt;/a&gt; ?  If we can&apos;t make it configurable, maybe a much higher maxDepth is a good idea (e.g. 1000)?&lt;/p&gt;

&lt;p&gt;FYI, this specific PDF issue was originally reported here: &lt;a href=&quot;https://github.com/Norconex/collector-http/issues/221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Norconex/collector-http/issues/221&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15137097" author="tallison@mitre.org" created="Mon, 8 Feb 2016 15:45:48 +0000"  >&lt;p&gt;How are you replicating this with 1.11?  I&apos;m not able to replicate this with the tika-app gui or commandline.  I&apos;m also not able to replicate this as a unit test in trunk.&lt;/p&gt;

&lt;p&gt;In the stack trace, it looks like there are modified Tika classes: EnhancedPDFParser and EnhancedPDF2XHTML.  If these modified classes are forgetting to close an entity, you&apos;ll get this exception...as I found when working with Acroforms :/&lt;/p&gt;

&lt;p&gt;In short, if you can help me replicate this with pure Tika, I&apos;ll be happy to take a look.&lt;/p&gt;</comment>
                            <comment id="15137110" author="tallison@mitre.org" created="Mon, 8 Feb 2016 15:55:22 +0000"  >&lt;p&gt;I&apos;d recommend adding the following to your EnhancedPDF2XHTML:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    @Override
    protected void writeParagraphStart() throws IOException {
+        super.writeParagraphStart();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    @Override
    protected void writeParagraphEnd() throws IOException {
+        super.writeParagraphEnd();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Finally, if your modifications of our PDFParsers are enhancements that have general applicability, please, oh, please share them with us.&lt;/p&gt;</comment>
                            <comment id="15137497" author="pascal.essiembre" created="Mon, 8 Feb 2016 19:17:38 +0000"  >&lt;p&gt;What? That easy? Those two simple lines did it in my local testing! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;   Many thanks!  I&apos;ll upload the fix on our end when I get a chance.&lt;/p&gt;

&lt;p&gt;As far as sharing, I am all for it, but our changes to the Tika parser classes for PDF are mainly to support PDFBox 2.0.0 which resolved several PDF issues reported by some of our users (like better detecting of spaces between terms in some PDF).  Given PDFBox 2.0.0 is not out yet, are you open to upgrade Tika code base to support that version of PDFBox (replacing support for PDFBox 1.x)?&lt;/p&gt;

&lt;p&gt;I think I added a few more things that may not be (or was not at the time) in Tika parser, like extracting XFA text.  I can submit a patch for that as well if you are open. &lt;/p&gt;

&lt;p&gt;Thanks again.&lt;/p&gt;</comment>
                            <comment id="15137519" author="tallison@mitre.org" created="Mon, 8 Feb 2016 19:27:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Many thanks! I&apos;ll upload the fix on our end when I get a chance.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Happy to help.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Given PDFBox 2.0.0 is not out yet, are you open to upgrade Tika code base to support that version of PDFBox (replacing support for PDFBox 1.x)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Once 2.0 is out, y, I think we&apos;ll upgrade pretty quickly.  See: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1285&quot; title=&quot;Upgrade to PDFBox 2.0.0 when available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1285&quot;&gt;&lt;del&gt;TIKA-1285&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3058&quot; title=&quot;Support TIKA Migration to PDFBox 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3058&quot;&gt;&lt;del&gt;PDFBOX-3058&lt;/del&gt;&lt;/a&gt; for our collaboration in support of 2.0 regression testing.  My dev branch for the integration with Tika is on &lt;a href=&quot;https://github.com/tballison/tika/tree/pdfbox2_0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;github&lt;/a&gt; &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;like extracting XFA text. I can submit a patch for that as well if you are open. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, please!  &lt;/p&gt;

&lt;p&gt;I also noticed that you have some wrappers around Tika more generally.  Again, if there&apos;s anything that would generally help Tika, please send along.  You may want to check out our RecursiveParserWrapper...looks like that has some overlapping functionality with what you&apos;re doing.&lt;/p&gt;

&lt;p&gt;Happy extraction!  Cheers!&lt;/p&gt;</comment>
                            <comment id="15140092" author="pascal.essiembre" created="Wed, 10 Feb 2016 00:24:57 +0000"  >&lt;p&gt;Is your own dev branch found as snapshots in a public maven repo somewhere?  If so I can make it the maven dependency we use for our project as opposed to the latest stable Tika release.  It will make it easier to test an apply fixes on an ongoing basis.&lt;/p&gt;</comment>
                            <comment id="15140211" author="tallison@mitre.org" created="Wed, 10 Feb 2016 02:12:13 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.apache.tika&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;tika-core&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.13-SNAPSHOT&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
.... other tika artifactIds...
    &amp;lt;/dependencies&amp;gt;
    &amp;lt;repositories&amp;gt;
        &amp;lt;repository&amp;gt;
            &amp;lt;id&amp;gt;apache.snapshots&amp;lt;/id&amp;gt;
            &amp;lt;url&amp;gt;http://repository.apache.org/snapshots/&amp;lt;/url&amp;gt;
        &amp;lt;/repository&amp;gt;
    &amp;lt;/repositories&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15140212" author="pascal.essiembre" created="Wed, 10 Feb 2016 02:13:29 +0000"  >&lt;p&gt;Awesome, thanks!&lt;/p&gt;</comment>
                            <comment id="15140217" author="pascal.essiembre" created="Wed, 10 Feb 2016 02:19:12 +0000"  >&lt;p&gt;So the best way to submit PDFBox 2.0.0 related patches/updates is to your own dev branch and you&apos;ll be merging it with 1.13-SNAPSHOT ultimately, or should I go directly against 1.13-SNAPSHOT?&lt;/p&gt;</comment>
                            <comment id="15140227" author="tallison@mitre.org" created="Wed, 10 Feb 2016 02:27:12 +0000"  >&lt;p&gt;If the modification is really PDFBox 2.0.0 specific (how to load a file with the new memory config, etc), my personal branch.  For more general additions (e.g. XFA extraction), please aim at trunk on Apache&apos;s &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf/tika.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;git repo&lt;/a&gt; and I&apos;ll merge those with my PDFBox 2.0.0 branch after I commit to our trunk.&lt;/p&gt;
</comment>
                            <comment id="15140376" author="pascal.essiembre" created="Wed, 10 Feb 2016 05:51:48 +0000"  >&lt;p&gt;Got it, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43990</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i037e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>