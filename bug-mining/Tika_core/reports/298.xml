<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:08:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2550] ToTextHandler includes &lt;style/&gt; element content</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2550</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When using the ToTextHandler to process .java files, the &amp;lt;style/&amp;gt; element content is included, e.g.:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;testFile
code {
color: rgb(0,0,0); font-family: monospace; font-size: 12px; white-space: nowrap;
}
.java_plain {
color: rgb(0,0,0);
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_javadoc_tag {
color: rgb(147,147,147); background-color: rgb(247,247,247); font-style: italic; font-weight: bold;
}
h1 {
font-family: sans-serif; font-size: 16pt; font-weight: bold; color: rgb(0,0,0); background: rgb(210,210,210); border: solid 1px black; padding: 5px; text-align: center;
}
.java_type {
color: rgb(0,44,221);
}
.java_literal {
color: rgb(188,0,0);
}
.java_javadoc_comment {
color: rgb(147,147,147); background-color: rgb(247,247,247); font-style: italic;
}
.java_operator {
color: rgb(0,124,31);
}
.java_separator {
color: rgb(0,33,255);
}
.java_comment {
color: rgb(147,147,147); background-color: rgb(247,247,247);
}

testFile/*************************************************************************
&#160;*&#160;&#160;Compilation:&#160;&#160;javac&#160;HelloWorld.java
&#160;*&#160;&#160;Execution:&#160;&#160;&#160;&#160;java&#160;HelloWorld
&#160;*
&#160;*&#160;&#160;Prints&#160;&quot;Hello,&#160;World&quot;.&#160;By&#160;tradition,&#160;this&#160;is&#160;everyone&apos;s&#160;first&#160;program.
&#160;*
&#160;*************************************************************************/

public&#160;class&#160;HelloWorld&#160;{
&#160;&#160;&#160;&#160;public&#160;static&#160;void&#160;main(String[]&#160;args)&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Hello,&#160;World&quot;);
&#160;&#160;&#160;&#160;}

}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is this what we want as the default behavior?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13132849">TIKA-2550</key>
            <summary>ToTextHandler includes &lt;style/&gt; element content</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="tallison">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jan 2018 20:14:46 +0000</created>
                <updated>Mon, 3 Dec 2018 16:38:42 +0000</updated>
                            <resolved>Fri, 30 Nov 2018 21:30:35 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.20</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16703529" author="tallison@mitre.org" created="Thu, 29 Nov 2018 17:18:14 +0000"  >&lt;p&gt;Would anyone object if I modified the &lt;tt&gt;ToTextContentHandler&lt;/tt&gt; to ignore content within &lt;tt&gt;&amp;lt;script/&amp;gt;&lt;/tt&gt; and &lt;tt&gt;&amp;lt;style/&amp;gt;&lt;/tt&gt; elements?&lt;/p&gt;</comment>
                            <comment id="16705343" author="hudson" created="Fri, 30 Nov 2018 22:11:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #134 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/134/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/134/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; prevent content from script/style elements to be written in (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/4d6bc01189abf40ab58c18428a01e06b076bb40a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/4d6bc01189abf40ab58c18428a01e06b076bb40a&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/code/SourceCodeParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/sax/ToTextContentHandler.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16705363" author="hudson" created="Fri, 30 Nov 2018 22:36:04 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build tika-2.x-windows #355 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/355/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/355/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix whitespace (tallison: rev 4ae1a10ec3f44f5278a1b741f0ea795c3f664cb3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/code/SourceCodeParserTest.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; prevent content in style/script elements from being written (tallison: rev 6b5dd8bbe09eb099ec75846ec02391cbd32351c4)&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/code/SourceCodeParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/sax/ToTextContentHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16705393" author="hudson" created="Fri, 30 Nov 2018 23:04:35 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1602 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1602/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1602/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix whitespace (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/4ae1a10ec3f44f5278a1b741f0ea795c3f664cb3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/4ae1a10ec3f44f5278a1b741f0ea795c3f664cb3&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/code/SourceCodeParserTest.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; prevent content in style/script elements from being written (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/6b5dd8bbe09eb099ec75846ec02391cbd32351c4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/6b5dd8bbe09eb099ec75846ec02391cbd32351c4&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;(edit) tika-core/src/main/java/org/apache/tika/sax/ToTextContentHandler.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/code/SourceCodeParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16707113" author="lfcnassif" created="Mon, 3 Dec 2018 12:21:43 +0000"  >&lt;p&gt;Sorry for late reply, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;tallison@apache.org&lt;/a&gt;. Will it change behaviour of Html&#160;text extraction with&#160;ToTextContentHandler? It is important to us (in forensic field) to index text contained in script elements to look for malicious html files. I think it may be a not backward compatible change...&lt;/p&gt;

&lt;p&gt;But if I remember html script elements are being&#160;handled as embedded docs? So I am not sure if this change will ignore scripts from html, could you clarify?&lt;/p&gt;</comment>
                            <comment id="16707366" author="tallison@mitre.org" created="Mon, 3 Dec 2018 15:27:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lfcnassif&quot; class=&quot;user-hover&quot; rel=&quot;lfcnassif&quot;&gt;lfcnassif&lt;/a&gt;, y, I was worried about breaking things, and I&apos;m willing to revert this and find a different solution.&lt;/p&gt;

&lt;p&gt;I just added a unit test to confirm that script elements are still being extracted when the HTMLParser is configured to extract them and the ToTextHandler is being used.  I also checked legacy behavior, and scripts are not coming through in the ToTextHandler from htmls with scripts...so there&apos;s no change in behavior there.&lt;/p&gt;

&lt;p&gt;But still, this could break things...Let me know if I should revert this and create a new handler or otherwise fix the extraction so that we&apos;re not getting style info in the &quot;text&quot; for Java source files.&lt;/p&gt;</comment>
                            <comment id="16707435" author="hudson" created="Mon, 3 Dec 2018 16:08:17 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1603 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1603/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1603/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; make sure that ToTextHandler&apos;s new behavior of ignoring (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/a178f61b1ba63f2e81d4c0fb6244a03de95f6399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/a178f61b1ba63f2e81d4c0fb6244a03de95f6399&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/test/java/org/apache/tika/TikaTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/html/HtmlParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16707462" author="hudson" created="Mon, 3 Dec 2018 16:17:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build tika-branch-1x #135 (See &lt;a href=&quot;https://builds.apache.org/job/tika-branch-1x/135/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-branch-1x/135/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; make sure that ToTextHandler&apos;s new behavior of ignoring (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/44165a311db6a3e2cbbc10ac291b9cd13107b2ef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/44165a311db6a3e2cbbc10ac291b9cd13107b2ef&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/test/java/org/apache/tika/TikaTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/html/HtmlParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16707496" author="hudson" created="Mon, 3 Dec 2018 16:38:42 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build tika-2.x-windows #357 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/357/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/357/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2550&quot; title=&quot;ToTextHandler includes &amp;lt;style/&amp;gt; element content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2550&quot;&gt;&lt;del&gt;TIKA-2550&lt;/del&gt;&lt;/a&gt; &amp;#8211; make sure that ToTextHandler&apos;s new behavior of ignoring (tallison: rev a178f61b1ba63f2e81d4c0fb6244a03de95f6399)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/test/java/org/apache/tika/TikaTest.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-parsers/src/test/java/org/apache/tika/parser/html/HtmlParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p7pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>