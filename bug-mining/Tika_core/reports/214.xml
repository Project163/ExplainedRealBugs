<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:07:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-1728] Detection is not working properly for detecting HWP 5.0 file</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1728</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;HWP file has two formats which are HWP 3.0 and HWP 5.0.&lt;br/&gt;
&apos;tika-app-1.10.jar&apos; detects HWP 3.0 format&apos;s file correctly.&lt;br/&gt;
But, not for HWP 5.0.&lt;br/&gt;
Used commands and returned results are addresses below.&lt;/p&gt;

&lt;p&gt;&amp;gt; java -jar tika-app-1.10.jar --detect test_3.0.hwp&lt;br/&gt;
&amp;gt; application/x-hwp&lt;/p&gt;

&lt;p&gt;&amp;gt; java -jar tika-app-1.10.jar --detect test_5.0.hwp&lt;br/&gt;
&amp;gt; application/x-tika-msoffice&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: windows 7 and centos 6&lt;br/&gt;
Java: 1.7&lt;br/&gt;
Tika jar: tika-app-1.10.jar&lt;br/&gt;
File: HWP 5.0&lt;/p&gt;</environment>
        <key id="12861504">TIKA-1728</key>
            <summary>Detection is not working properly for detecting HWP 5.0 file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mungeol">mungeol heo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Sep 2015 08:55:09 +0000</created>
                <updated>Thu, 1 Aug 2019 21:16:37 +0000</updated>
                            <resolved>Thu, 1 Aug 2019 21:16:06 +0000</resolved>
                                                    <fixVersion>1.22</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14728719" author="mungeol" created="Thu, 3 Sep 2015 08:56:53 +0000"  >&lt;p&gt;test_3.0.hwp: HWP 3.0 format&lt;br/&gt;
test_5.0.hwp: HWP 5.0 format&lt;/p&gt;</comment>
                            <comment id="14728863" author="gagravarr" created="Thu, 3 Sep 2015 11:12:03 +0000"  >&lt;p&gt;The issues is that the v3 files (and earlier?) are in their own wrapper, while the v5 (and later?) ones are stored within an OLE2 structure&lt;/p&gt;

&lt;p&gt;As of r1700986, the v3 files continue to be detected as &lt;tt&gt;application/x-hwp&lt;/tt&gt;, while the v5 ones are now detected as &lt;tt&gt;application/x-hwp-v5&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;It&apos;d be helpful if someone could confirm what the very latest file type is, so we can decide if that v5 on the mimetype is a suitable name, or if we should make it more general&lt;/p&gt;</comment>
                            <comment id="14728899" author="hudson" created="Thu, 3 Sep 2015 11:48:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #848 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/848/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/848/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1728&quot; title=&quot;Detection is not working properly for detecting HWP 5.0 file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1728&quot;&gt;&lt;del&gt;TIKA-1728&lt;/del&gt;&lt;/a&gt; HWP v5(+?) detection (nick: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1700986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1700986&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/POIFSContainerDetector.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/detect/TestContainerAwareDetector.java&lt;br/&gt;
Test HWP files from Mungeol Heo from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1728&quot; title=&quot;Detection is not working properly for detecting HWP 5.0 file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1728&quot;&gt;&lt;del&gt;TIKA-1728&lt;/del&gt;&lt;/a&gt; (nick: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1700984&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1700984&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/testHWP_3.0.hwp&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/testHWP_5.0.hwp&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14730149" author="mungeol" created="Fri, 4 Sep 2015 01:37:15 +0000"  >&lt;p&gt;For detecting, it is working.&lt;/p&gt;

&lt;p&gt;&amp;gt; java -jar tika-app-1.10.jar -d test_5.0.hwp&lt;br/&gt;
&amp;gt; application/x-hwp-v5&lt;/p&gt;

&lt;p&gt;However, it gives error while using other options of tika app.&lt;br/&gt;
For instance,&lt;/p&gt;

&lt;p&gt;&amp;gt; java -jar tika-app-1.10.jar -m test_5.0.hwp&lt;br/&gt;
&amp;gt; Exception in thread &quot;main&quot; org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.microsoft.ooxml.OOXMLParser@4c2a511&lt;br/&gt;
&amp;gt; ...and the rest of the error...&lt;/p&gt;

&lt;p&gt;I have captured and attached the full error message which is error-message.png.&lt;/p&gt;</comment>
                            <comment id="14730605" author="gagravarr" created="Fri, 4 Sep 2015 10:14:09 +0000"  >&lt;p&gt;Whoops, I&apos;d set the wrong parent. Can you try with r1701201 or later?&lt;/p&gt;

&lt;p&gt;Also, do the mimetypes look OK to you for the two formats? Should we make the &quot;main&quot; mimetype be for v3 or v5? Is there a v6 or v7 yet? What about v4?&lt;/p&gt;</comment>
                            <comment id="14730639" author="hudson" created="Fri, 4 Sep 2015 10:49:10 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #849 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/849/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/849/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1728&quot; title=&quot;Detection is not working properly for detecting HWP 5.0 file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1728&quot;&gt;&lt;del&gt;TIKA-1728&lt;/del&gt;&lt;/a&gt; Fix the HWP v5 mime type hierarchy (nick: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1701201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1701201&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14732013" author="tallison@mitre.org" created="Sat, 5 Sep 2015 15:34:28 +0000"  >&lt;p&gt;Should we look into seeing if the author of &lt;a href=&quot;https://github.com/ddoleye/java-hwp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java-hwp&lt;/a&gt; would be willing to move to an Apache license and push to maven?&lt;/p&gt;</comment>
                            <comment id="14734081" author="mungeol" created="Tue, 8 Sep 2015 00:14:32 +0000"  >&lt;p&gt;I have tried r1701201, and it works properly.&lt;br/&gt;
As far as I know, there are v3, v5, no v4 or other version.&lt;br/&gt;
Therefore, I believe x-hwp-v3(old one which is x-hwp) and x-hwp-v5(new one) are better.&lt;/p&gt;

&lt;p&gt;FYI, I also tried java-hwp. It is able to detect both versions of HWP file and extract text from it.&lt;br/&gt;
It works great.&lt;/p&gt;</comment>
                            <comment id="14734273" author="mungeol" created="Tue, 8 Sep 2015 05:44:52 +0000"  >&lt;p&gt;I have a question about new mime-type, which is addressed below.&lt;/p&gt;

&lt;p&gt;&amp;lt;mime-type type=&quot;application/x-hwp-v5&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;_comment&amp;gt;Hangul Word Processor File v5&amp;lt;/_comment&amp;gt;&lt;br/&gt;
    &amp;lt;sub-class-of type=&quot;application/x-tika-msoffice&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/mime-type&amp;gt;&lt;/p&gt;

&lt;p&gt;My question is that is it possible the mime type detects non-HWP and OLE2 based file as HWP 5.0 file?&lt;br/&gt;
Isn&apos;t it a better choice adding magic, glob or other tags?&lt;br/&gt;
So it can be more unique?&lt;br/&gt;
For instance,&lt;/p&gt;

&lt;p&gt;&amp;lt;mime-type type=&quot;application/x-hwp-v5&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;sub-class-of type=&quot;application/x-tika-msoffice&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;_comment&amp;gt;Hangul Word Processor File v5&amp;lt;/_comment&amp;gt;&lt;br/&gt;
    &amp;lt;magic priority=&quot;40&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;match value=&quot;HWP Document File&quot; type=&quot;string&quot; offset=&quot;0&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/magic&amp;gt;&lt;br/&gt;
    &amp;lt;glob pattern=&quot;*.hwp&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/mime-type&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14734289" author="mungeol" created="Tue, 8 Sep 2015 06:05:46 +0000"  >&lt;p&gt;I have created and tested two parsers for v3 and v5 HWP files successfully by referencing java-hwp.&lt;br/&gt;
I believe java-hwp is a good choice to use at tika after improvement.&lt;/p&gt;</comment>
                            <comment id="14734531" author="gagravarr" created="Tue, 8 Sep 2015 09:50:38 +0000"  >&lt;p&gt;Detection of the v5 file is handled by the OLE2 container-aware detector. We can&apos;t do it with magic, as there is no predictable place in the file to look for some unique bytes&lt;/p&gt;

&lt;p&gt;I think we still need to keep one of the formats as &lt;tt&gt;application/x-hwp&lt;/tt&gt;, as that&apos;s what most other libraries/programs use. Just need to pick which to make the default&lt;/p&gt;

&lt;p&gt;If you&apos;re able to put some time into building a parser with java-hwp, that&apos;d be great! Probably best as a different jira though to track that&lt;/p&gt;</comment>
                            <comment id="14734808" author="tallison@mitre.org" created="Tue, 8 Sep 2015 13:44:29 +0000"  >&lt;p&gt;Opened separate ticket for potential integration: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1731&quot; title=&quot;Try to integrate java-hwp into Tika&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1731&quot;&gt;&lt;del&gt;TIKA-1731&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14735875" author="mungeol" created="Wed, 9 Sep 2015 00:13:23 +0000"  >&lt;p&gt;This is what I know,&lt;br/&gt;
The v3 file&apos;s first 30 bytes includes &quot;HWP Document File V3.00 \x1a\1\2\3\4\&quot; for recognizing v3 file.&lt;br/&gt;
And the v5 file stores &quot;HWP Document File&quot; in the first 32 bytes of file header.&lt;br/&gt;
I wonder, whether &quot;HWP Document File&quot; can be unique bytes of v5 file or not.&lt;/p&gt;</comment>
                            <comment id="14736533" author="gagravarr" created="Wed, 9 Sep 2015 09:24:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;And the v5 file stores &quot;HWP Document File&quot; in the first 32 bytes of file header.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nope, it doesn&apos;t... It has an OLE2 header at the start!&lt;/p&gt;</comment>
                            <comment id="14737843" author="mungeol" created="Thu, 10 Sep 2015 00:05:23 +0000"  >&lt;p&gt;Maybe I misunderstand some contents of &quot;HWP-document-file-formats-5.0-Korean.pdf&quot;, since I didn&apos;t read it carefully.&lt;br/&gt;
If you have time, please reference the table at P.7 and the first table at P.8 from &quot;HWP-document-file-formats-5.0-Korean.pdf&quot;.&lt;br/&gt;
or&lt;br/&gt;
&lt;a href=&quot;https://github.com/ddoleye/java-hwp/blob/master/src/main/java/com/argo/hwp/v5/HwpTextExtractorV5.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ddoleye/java-hwp/blob/master/src/main/java/com/argo/hwp/v5/HwpTextExtractorV5.java&lt;/a&gt;.&lt;br/&gt;
Especiailly, getHeader function.&lt;/p&gt;

&lt;p&gt;Of course, if it is a sure thing that there is no possibility tika detects OLE2 based none-HWP file as HWP 5.0, then no need to continue this discuss at all.&lt;/p&gt;</comment>
                            <comment id="14738454" author="gagravarr" created="Thu, 10 Sep 2015 09:08:30 +0000"  >&lt;p&gt;That&apos;s the header of one of the OLE2 streams, not of the overall file&lt;/p&gt;</comment>
                            <comment id="14738502" author="mungeol" created="Thu, 10 Sep 2015 09:40:35 +0000"  >&lt;p&gt;Yes, I know. It is the reason why I used &quot;file header&quot; at the first place.&lt;br/&gt;
My point is that is there any way we can make good use of &quot;HWP Document File&quot; kind of thing for making sure correct detecting of HWP 5.0 file.&lt;br/&gt;
Excuse my poor English, if I confused you.&lt;br/&gt;
I just try to make sure tika will not mis-detect other file as HWP.&lt;br/&gt;
Anyway, I will stop to discuss it, and believe tika experts will handle it greatly.&lt;/p&gt;</comment>
                            <comment id="16898364" author="tallison@mitre.org" created="Thu, 1 Aug 2019 21:16:06 +0000"  >&lt;p&gt;I think we&apos;re good now.&#160; Please re-open if we aren&apos;t.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13245621">TIKA-2909</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12753943" name="HWP-document-file-formats-3.0-Korean.pdf" size="905504" author="mungeol" created="Thu, 3 Sep 2015 09:04:05 +0000"/>
                            <attachment id="12753944" name="HWP-document-file-formats-5.0-Korean.pdf" size="708234" author="mungeol" created="Thu, 3 Sep 2015 09:04:05 +0000"/>
                            <attachment id="12754121" name="error-message.png" size="36797" author="mungeol" created="Fri, 4 Sep 2015 01:37:29 +0000"/>
                            <attachment id="12753940" name="test_3.0.hwp" size="9287" author="mungeol" created="Thu, 3 Sep 2015 08:56:53 +0000"/>
                            <attachment id="12753941" name="test_5.0.hwp" size="16384" author="mungeol" created="Thu, 3 Sep 2015 08:56:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jqhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>