<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:07:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2042] MBOX file detected wrongly as text/html</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2042</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;MBOX file doesn&apos;t get recognized via &quot;magic detection&quot; mechanism as &quot;application/mbox&quot;, but wrongly as &quot;text/html&quot;.&lt;/p&gt;

&lt;p&gt;Workaround for this in Tika 1.13 is achieved by placing following in custom-mimetypes.xml, as suggested on mailing list (priority has to be larger than message/rfc822):&lt;br/&gt;
&amp;lt;mime-type type=&quot;application/mbox&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;magic priority=&quot;70&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;match value=&quot;From &quot; type=&quot;string&quot; offset=&quot;0&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/magic&amp;gt;&lt;br/&gt;
        &amp;lt;glob pattern=&quot;*.mbox&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/mime-type&amp;gt;&lt;/p&gt;

&lt;p&gt;Sample MBOX file is attached.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04, Apache Tika 1.13 and 1.14 nightly at the time of this writing&lt;/p&gt;</environment>
        <key id="12992489">TIKA-2042</key>
            <summary>MBOX file detected wrongly as text/html</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vjeran@tis.hr">Vjeran Marcinko</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jul 2016 05:42:25 +0000</created>
                <updated>Tue, 29 Oct 2019 15:51:58 +0000</updated>
                            <resolved>Tue, 26 Jul 2016 10:46:43 +0000</resolved>
                                    <version>1.13</version>
                                    <fixVersion>1.14</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15393617" author="gagravarr" created="Tue, 26 Jul 2016 10:46:34 +0000"  >&lt;p&gt;Fixed in &lt;tt&gt;72d2d88b381ba75942ae791042ef54af33ee1f38&lt;/tt&gt; - your test file is now detected as mbox even without the filename&lt;/p&gt;</comment>
                            <comment id="15393650" author="hudson" created="Tue, 26 Jul 2016 11:22:54 +0000"  >&lt;p&gt;FAILURE: Integrated in tika-2.x #124 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x/124/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x/124/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2042&quot; title=&quot;MBOX file detected wrongly as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2042&quot;&gt;&lt;del&gt;TIKA-2042&lt;/del&gt;&lt;/a&gt; MBOX magic and detection unit test (nick: rev 65cc9bcecdc6b86294a88f3b2b6b26017f356ae5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
	&lt;li&gt;tika-app/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15393664" author="hudson" created="Tue, 26 Jul 2016 11:36:18 +0000"  >&lt;p&gt;FAILURE: Integrated in Tika-trunk #1085 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1085/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1085/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2042&quot; title=&quot;MBOX file detected wrongly as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2042&quot;&gt;&lt;del&gt;TIKA-2042&lt;/del&gt;&lt;/a&gt; MBOX magic and detection unit test (nick: rev 72d2d88b381ba75942ae791042ef54af33ee1f38)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-parsers/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;/li&gt;
	&lt;li&gt;tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15393708" author="hudson" created="Tue, 26 Jul 2016 12:16:28 +0000"  >&lt;p&gt;FAILURE: Integrated in tika-2.x-windows #28 (See &lt;a href=&quot;https://builds.apache.org/job/tika-2.x-windows/28/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/tika-2.x-windows/28/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2042&quot; title=&quot;MBOX file detected wrongly as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2042&quot;&gt;&lt;del&gt;TIKA-2042&lt;/del&gt;&lt;/a&gt; MBOX magic and detection unit test (nick: rev 65cc9bcecdc6b86294a88f3b2b6b26017f356ae5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tika-app/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;/li&gt;
	&lt;li&gt;tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16085709" author="mcaruanagalizia" created="Thu, 13 Jul 2017 13:41:47 +0000"  >&lt;p&gt;I&apos;d like to ask for this issue to be reopened. Around half the MBOX files in our corpus are being detected as text/html. My guess is that there are two reasons for this:&lt;/p&gt;

&lt;p&gt;1) the files have no extension - the filenames are literally &quot;mbox&quot; rather than &quot;*.mbox&quot; (I think this is the way they&apos;re generated or used to be generated on Macs - they&apos;re in an *.mbox container directory, but the meat is within an mbox file contained within that directory);&lt;/p&gt;

&lt;p&gt;2) the headers don&apos;t fall within the 256 byte offset specified by the matcher in the mimetypes XML file.&lt;/p&gt;</comment>
                            <comment id="16085710" author="mcaruanagalizia" created="Thu, 13 Jul 2017 13:42:16 +0000"  >&lt;p&gt;Header attached with identifying information stripped out. This file is detected as text/html instead of application/mbox.&lt;/p&gt;</comment>
                            <comment id="16085747" author="gagravarr" created="Thu, 13 Jul 2017 14:20:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcaruanagalizia&quot; class=&quot;user-hover&quot; rel=&quot;mcaruanagalizia&quot;&gt;mcaruanagalizia&lt;/a&gt; I&apos;ve added some more patterns in &lt;tt&gt;0277fbb92c4714361949d59708db2a8734f1b1f2&lt;/tt&gt; based on the mbox you&apos;ve supplied. Could you try that, and let us have redacted copies of any remaining mbox files you have which that doesn&apos;t fix things for?&lt;/p&gt;</comment>
                            <comment id="16085838" author="hudson" created="Thu, 13 Jul 2017 15:11:21 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika-trunk #1331 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1331/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1331/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2042&quot; title=&quot;MBOX file detected wrongly as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2042&quot;&gt;&lt;del&gt;TIKA-2042&lt;/del&gt;&lt;/a&gt; Add a few more mbox patterns, based on file supplied by (nick: &lt;a href=&quot;https://github.com/apache/tika/commit/0277fbb92c4714361949d59708db2a8734f1b1f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/0277fbb92c4714361949d59708db2a8734f1b1f2&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16085842" author="mcaruanagalizia" created="Thu, 13 Jul 2017 15:12:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nick&quot; class=&quot;user-hover&quot; rel=&quot;nick&quot;&gt;nick&lt;/a&gt; thank you - that fixes the detection of at least one of the MBOX files. Now the problem is that that when the email streams get passed to the delegate parser by the ParsingEmbeddedDocumentExtractor implementation, they&apos;re detected as text/html instead of message/rfc822.&lt;/p&gt;</comment>
                            <comment id="16085847" author="mcaruanagalizia" created="Thu, 13 Jul 2017 15:12:58 +0000"  >&lt;p&gt;I&apos;ve attached a sample of one of the message sections from the MBOX. Detected as text/html instead of message/rfc822.&lt;/p&gt;</comment>
                            <comment id="16085880" author="lfcnassif" created="Thu, 13 Jul 2017 15:29:18 +0000"  >&lt;p&gt;This problem is very very recurrent. I think we should search for some of the eml magics in a larger range.&lt;/p&gt;</comment>
                            <comment id="16085883" author="lfcnassif" created="Thu, 13 Jul 2017 15:36:19 +0000"  >&lt;p&gt;See Tika-879. Looks like widening the magic search helped to detect more emls in the test corpus. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;tallison@apache.org&lt;/a&gt; do you remember if that resulted in lots of false positives?&lt;/p&gt;</comment>
                            <comment id="16089013" author="gagravarr" created="Sun, 16 Jul 2017 16:44:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcaruanagalizia&quot; class=&quot;user-hover&quot; rel=&quot;mcaruanagalizia&quot;&gt;mcaruanagalizia&lt;/a&gt; I&apos;ve added some more rfc822 magic, which I think should solve it for this most recent file. If I trim off everything up the mbox From, then I can detect the outer file as mbox, and the embedded one as rfc822. &lt;/p&gt;

&lt;p&gt;Do please let us know if there&apos;s any more you come across!&lt;/p&gt;</comment>
                            <comment id="16089033" author="hudson" created="Sun, 16 Jul 2017 17:35:26 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika-trunk #1335 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1335/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1335/&lt;/a&gt;)&lt;br/&gt;
Two more EML header magics from Matthew Caruana Galizia from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2042&quot; title=&quot;MBOX file detected wrongly as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2042&quot;&gt;&lt;del&gt;TIKA-2042&lt;/del&gt;&lt;/a&gt; (nick: &lt;a href=&quot;https://github.com/apache/tika/commit/0579efe59c35a4db248d8a5547af05fbee3caad4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/0579efe59c35a4db248d8a5547af05fbee3caad4&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16098538" author="hudson" created="Mon, 24 Jul 2017 15:03:05 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Tika-trunk #1337 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1337/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1337/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2042&quot; title=&quot;MBOX file detected wrongly as text/html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2042&quot;&gt;&lt;del&gt;TIKA-2042&lt;/del&gt;&lt;/a&gt; &amp;#8211; fix typo. (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/00221ad34a18f501d967979288236b98bd4cec58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/00221ad34a18f501d967979288236b98bd4cec58&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12705669">TIKA-1267</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13098605">TIKA-2453</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13134010">TIKA-2557</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12547381">TIKA-879</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12820102" name="clojure.mbox" size="203657" author="vjeran@tis.hr" created="Tue, 26 Jul 2016 05:44:44 +0000"/>
                            <attachment id="12877095" name="mbox_email_section.txt" size="1565" author="mcaruanagalizia" created="Thu, 13 Jul 2017 15:12:26 +0000"/>
                            <attachment id="12877072" name="mbox_header.txt" size="1393" author="mcaruanagalizia" created="Thu, 13 Jul 2017 13:41:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31huv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>