<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:27:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4561] Wicket 1.5.6 duplicates segments in absolute URLs</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4561</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Since we migrate our application to Wicket 1.5.6 some URLs from BookmarkablePageLinks have duplicate segements for indicating a Shop and a Language item from our persistence model. For indicating a Shop and Language item we use our own ShopMapper and LanguageMapper (subclass of AbstractComponentMapper). This was working until we migrate to 1.5.6.&lt;br/&gt;
For instance ...&lt;/p&gt;

&lt;p&gt;correct URL: host/servlet/shop/en/page&lt;br/&gt;
wrong URL: host/servlet/shop/en/shop/en/page&lt;/p&gt;

&lt;p&gt;This happens, for example, when the protocol of the linked URL is different from the current protocol (http/https). So, basically, all links that point to pages that are annotated with @RequireHttps are wrong.&lt;/p&gt;

&lt;p&gt;In our Application class we set the HttpsMapper as RootRequestMapper, e.g.:&lt;/p&gt;

&lt;p&gt;setRootRequestMapper(new HttpsMapper(new ShopMapper(new LanguageMapper(getRootRequestMapper())), new HttpsConfig() ) );&lt;/p&gt;


&lt;p&gt;Using a debugger, I&apos;ve tracked down the spot where wrong URL is rendered:&lt;/p&gt;

&lt;p&gt;org.apache.wicket.request.Url.resolveRelative()&lt;/p&gt;</description>
                <environment></environment>
        <key id="12555298">WICKET-4561</key>
            <summary>Wicket 1.5.6 duplicates segments in absolute URLs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="forchel">Dirk Forchel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 May 2012 08:21:18 +0000</created>
                <updated>Mon, 1 Oct 2012 08:08:40 +0000</updated>
                            <resolved>Fri, 18 May 2012 09:02:38 +0000</resolved>
                                    <version>1.5.6</version>
                                    <fixVersion>1.5.7</fixVersion>
                    <fixVersion>6.0.0-beta3</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13275265" author="forchel" created="Tue, 15 May 2012 08:26:53 +0000"  >&lt;p&gt;Using a quickstart Application and replace our own RequestMapper with the org.apache.wicket.examples.requestmapper.LocaleFirstMapper produces the same duplicated path segments, e.g.&lt;/p&gt;

&lt;p&gt;correct: &lt;a href=&quot;https://localhost:8443/de_DE/secure.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://localhost:8443/de_DE/secure.html&lt;/a&gt;&lt;br/&gt;
wrong:  &lt;a href=&quot;https://localhost:8443/de_DE/de_DE/secure.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://localhost:8443/de_DE/de_DE/secure.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13275266" author="forchel" created="Tue, 15 May 2012 08:29:41 +0000"  >&lt;p&gt;Unfortunately I can&apos;t attach the quickstart because the JIRA server returns an error response trying to attach a file.&lt;/p&gt;

&lt;p&gt;&amp;gt; The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Close this dialog and press refresh in your browser&lt;/p&gt;</comment>
                            <comment id="13276679" author="thomas.goetz" created="Wed, 16 May 2012 11:51:42 +0000"  >&lt;p&gt;I debugged this to the following point:&lt;/p&gt;

&lt;p&gt;Url.resolveRelative(final Url relative):&lt;/p&gt;

&lt;p&gt;this.segments.size=2 (de_DE/secure.html)&lt;/p&gt;

&lt;p&gt;after line 1012: getSegments().addAll(relative.getSegments());&lt;/p&gt;

&lt;p&gt;--&amp;gt; this.segments.size=3 (de_DE/de_DE/secure.html)&lt;/p&gt;

</comment>
                            <comment id="13276680" author="mgrigorov" created="Wed, 16 May 2012 11:55:58 +0000"  >&lt;p&gt;I guess &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4514&quot; title=&quot;UrlRenderer produces wrong full urls when the passed parameter is not absolute (as Url understands &amp;#39;absolute&amp;#39;)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4514&quot;&gt;&lt;del&gt;WICKET-4514&lt;/del&gt;&lt;/a&gt; is involved.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4562&quot; title=&quot;Incorrect bookmarkable link to home page when using HttpsMapper and named parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4562&quot;&gt;&lt;del&gt;WICKET-4562&lt;/del&gt;&lt;/a&gt; looks like a duplicate.&lt;/p&gt;</comment>
                            <comment id="13288525" author="tobiashaupt" created="Mon, 4 Jun 2012 12:32:50 +0000"  >&lt;p&gt;When using the following code to create an absolute url in wicket 1.5.7 from a page class and parameters, there are also duplicate segments in the url - the rendered absolute url is not correct.&lt;/p&gt;

&lt;p&gt;final Url url = RequestCycle.get().mapUrlFor( pageClass, pageParameters );&lt;br/&gt;
final String result = RequestCycle.get().getUrlRenderer().renderFullUrl( url );&lt;/p&gt;

&lt;p&gt;I think the reason for this is, that RequestCycle.get().mapUrlFor(..) does not return an &quot;absolute&quot; url (first segment will not be empty).&lt;/p&gt;</comment>
                            <comment id="13288635" author="mgrigorov" created="Mon, 4 Jun 2012 15:42:16 +0000"  >&lt;p&gt;Please open a new ticket with a quickstart.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13288637" author="mgrigorov" created="Mon, 4 Jun 2012 15:44:54 +0000"  >&lt;p&gt;The fix in 1.5.6 is in org.apache.wicket.request.UrlRenderer#renderUrl(Url) which decides whether to use #renderFullUrl() or #renderRelativeUrl(). That&apos;s why it doesn&apos;t help for your case - because you use directly #renderFullUrl().&lt;br/&gt;
Please create a new ticket and I&apos;ll see what can be done.&lt;/p&gt;</comment>
                            <comment id="13289216" author="forchel" created="Tue, 5 Jun 2012 07:36:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4587&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-4587&lt;/a&gt; created.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12608601">WICKET-4776</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12552542">WICKET-4514</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12527261" name="quickstart.zip" size="41364" author="mgrigorov" created="Tue, 15 May 2012 14:16:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257762</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116206</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>