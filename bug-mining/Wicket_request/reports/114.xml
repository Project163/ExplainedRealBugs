<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:27:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5539] Allow preserving of the parsed PageParameters when re-creating an expired page</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5539</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;There is a bookmarkable page mounted, for example, to:&lt;br/&gt;
/page/${entityId}&lt;/p&gt;

&lt;p&gt;This page contains StatelessForm.&lt;br/&gt;
Submitting of form after session expire lead to following:&lt;/p&gt;

&lt;p&gt;org.apache.wicket.core.request.mapper.MountedMapper invokes AbstractBookmarkableMapper.processListener to obtain IRequestHandler to handle submitting of form. &lt;br/&gt;
But there is cleaning of PageParameters within processListener on line 256 (Wicket 6.14) which cleaning &quot;entityId&quot; parameter as well and created page finally has no &quot;enityId&quot; and (in our case) redirects to 404.&lt;/p&gt;

&lt;p&gt;I see that this cleaning of page parameters was implemented due to Wicket-4594. But I think, just checking for pageId is unsufficient, because pageId might be not null, but actual page may be already expired and new instance should be created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12702749">WICKET-5539</key>
            <summary>Allow preserving of the parsed PageParameters when re-creating an expired page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="phantom">Ilia Naryzhny</reporter>
                        <labels>
                            <label>expiration</label>
                            <label>mountBookmarkablePage</label>
                    </labels>
                <created>Thu, 20 Mar 2014 22:30:31 +0000</created>
                <updated>Tue, 26 Aug 2014 17:08:35 +0000</updated>
                            <resolved>Tue, 12 Aug 2014 08:51:38 +0000</resolved>
                                    <version>6.14.0</version>
                                    <fixVersion>6.17.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13943079" author="mgrigorov" created="Fri, 21 Mar 2014 14:18:28 +0000"  >&lt;p&gt;Please try with 6.15.0-SNAPSHOT.&lt;br/&gt;
There were some regressions - see &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5521&quot; title=&quot;Stateless forms does not work when RecreateMountedPagesAfterExpiry turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5521&quot;&gt;&lt;del&gt;WICKET-5521&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13944721" author="phantom" created="Mon, 24 Mar 2014 03:51:34 +0000"  >&lt;p&gt;Exactly the same behaviour&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; During investigation also found that if &apos;getPageSettings().setRecreateMountedPagesAfterExpiry(false);&apos; SignInPage doesn&apos;t allow to login because unpredictable PageExpiredException.&lt;/p&gt;</comment>
                            <comment id="13944800" author="mgrigorov" created="Mon, 24 Mar 2014 07:50:37 +0000"  >&lt;p&gt;Please provide a quickstart.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13944828" author="mgrigorov" created="Mon, 24 Mar 2014 09:06:38 +0000"  >&lt;p&gt;I&apos;ve re-read the ticket description and I think this is the expected behavior.&lt;br/&gt;
Regardless the fact that you use StatelessForm it is obvious that your page is stateful because of another component/behavior that makes it stateful. &lt;br/&gt;
If the pageId was missing, i.e. the page was truly stateless, then the form submit would create a new page instance and pass the entityId as a parameter.&lt;/p&gt;</comment>
                            <comment id="13956548" author="phantom" created="Tue, 1 Apr 2014 14:21:14 +0000"  >&lt;p&gt;Please find quick start is in attachment.&lt;/p&gt;

&lt;p&gt;TestCase:&lt;br/&gt;
1) Run mvn clean package jetty:run&lt;br/&gt;
2) Goto &quot;home page&quot;&lt;br/&gt;
3) Try to find &quot;some entity&quot;: just enter some not empty query and click submit.&lt;br/&gt;
4) Try several time click to &quot;ajax link&quot;.&lt;br/&gt;
5) Wait for &amp;gt;1 min&lt;br/&gt;
6) Try to click &quot;ajax link&quot; one more time&lt;/p&gt;

&lt;p&gt;Expected results: page rerendered, entityId is the same, but count reseted to 0, because page was recreated due to http timeout.&lt;/p&gt;

&lt;p&gt;Actual results: page lost &quot;entityId&quot; and rendered without corresponding &quot;entity&quot; &lt;/p&gt;</comment>
                            <comment id="13956765" author="phantom" created="Tue, 1 Apr 2014 17:06:01 +0000"  >&lt;p&gt;Martin,&lt;/p&gt;

&lt;p&gt;The problem is in following your statement:&lt;/p&gt;

&lt;p&gt;&quot;If the pageId was missing, i.e. the page was truly stateless, then the form submit would create a new page instance and pass the entityId as a parameter.&quot;&lt;br/&gt;
Actual results: new page instance recreated with empty PageParameters. And imho - that&apos;s a bug.&lt;/p&gt;

&lt;p&gt;P.S. In quick start common Form has been used. So it&apos;s not related to &quot;stateless&quot; nature of StatelessForm.&lt;/p&gt;</comment>
                            <comment id="13980850" author="mgrigorov" created="Fri, 25 Apr 2014 09:51:27 +0000"  >&lt;p&gt;In the quickstart there is a usage of Form component, not StatelessForm.&lt;br/&gt;
But even if it was StatelessForm there are also Ajax components in use. &lt;br/&gt;
Stateful pages cannot be recreated as in their last state after session/page expiration.&lt;/p&gt;

&lt;p&gt;The form submit request or Link click request is a request to a Wicket interface listener (i.e. #onSubmit(), #onClick(), etc.). Their request parameters are not used to update the Page&apos;s #getPageParameters() in normal (not expired) requests. This is the reason why these parameters are not used for the recreation of the page too.&lt;/p&gt;

&lt;p&gt;Imagine your form submit sends sensitive data, like a password. Without the current behavior the sensitive data will appear in the page&apos;s url as a plain text in the query parameters when a page is recreated. This I would call a BUG !&lt;/p&gt;</comment>
                            <comment id="13980851" author="mgrigorov" created="Fri, 25 Apr 2014 09:52:43 +0000"  >&lt;p&gt;Please start discussion in dev@ mailing list if you don&apos;t agree with me.&lt;br/&gt;
I&apos;d be glad to hear more opinions from other developers and users.&lt;/p&gt;</comment>
                            <comment id="13989493" author="mgrigorov" created="Mon, 5 May 2014 13:14:44 +0000"  >&lt;p&gt;Added a link to the mail discussion at dev@ mailing list.&lt;br/&gt;
Unfortunately there were no other opinions ... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13992131" author="bgooren" created="Wed, 7 May 2014 19:14:42 +0000"  >&lt;p&gt;Too bad that this is closed... We are running into the same issue in quite some of our projects.&lt;/p&gt;

&lt;p&gt;We use stateful, bookmarkable urls so that after session expiry the requested page can be recreated.&lt;br/&gt;
Practical example: an app manages any number of sites. We have a screen where you can see the orders for a certain site, mounted at /site/${site}/orders/list. When clicking an order (stateful link) on this screen, after session expiry I&apos;d expect to at least see a fresh instance of the page (with the &quot;site&quot; param still intact!).&lt;/p&gt;

&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4594&quot; title=&quot;Do not use the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4594&quot;&gt;&lt;del&gt;WICKET-4594&lt;/del&gt;&lt;/a&gt; throws away the page parameters, we can no longer render the list of orders. In effect this means there is absolutely no benefit in making this page bookmarkable.&lt;br/&gt;
The url looks bookmarkable, but isn&apos;t.&lt;br/&gt;
Going a step further, I think this behavior contradicts what IPageSettings#getRecreateMountedPagesAfterExpiry() is for:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When enabled (default), urls on mounted pages will contain the full mount path, including PageParameters, allowing wicket to reinstantiate the page if got expired. When disabled, urls only use the page id. If this setting is enabled, you should take care that names form fields on mounted pages do not clash with the page parameters.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve always read that in the sense that &lt;b&gt;I am responsible&lt;/b&gt; for not putting sensitive data in the url when this is enabled, and that wicket will provide me the page parameters so I can recreate the page.&lt;/p&gt;

&lt;p&gt;Now I understand the scenario described by Martin: what if there is sensitive parameters in the url? But I think that (A) such parameters should not be in the URL in the first place (GET vs POST) and (B) that specific scenario should not stop us (me and the ticket creator) from working as we do.&lt;/p&gt;

&lt;p&gt;Can we make this configurable? E.g. a setting like recreateMountedPagesAfterExpiry, maybe getRecreateMountedPagesAfterExpiryWithPageParameters, which determines if page parameters should be passed on to the new page or not. Why should it behave any different from the processing of hybrid urls?&lt;/p&gt;</comment>
                            <comment id="14059875" author="mgrigorov" created="Sat, 12 Jul 2014 18:37:09 +0000"  >&lt;p&gt;Reopening to reconsider.&lt;/p&gt;</comment>
                            <comment id="14071747" author="mgrigorov" created="Wed, 23 Jul 2014 14:01:59 +0000"  >&lt;p&gt;Any patches/tests, etc. are welcome!&lt;/p&gt;</comment>
                            <comment id="14071757" author="mgrigorov" created="Wed, 23 Jul 2014 14:06:17 +0000"  >&lt;p&gt;In the provided quickstart app there is a form.&lt;/p&gt;

&lt;p&gt;Assuming that the null-ification of the PageParameters is removed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Initially I search for &quot;X&quot;.&lt;/li&gt;
	&lt;li&gt;&quot;X&quot; is set as named parameter in the url path.&lt;/li&gt;
	&lt;li&gt;I wait for session expiration and search for &quot;Y&quot;.&lt;/li&gt;
	&lt;li&gt;Here &quot;Y&quot; is ignored and &quot;X&quot; still stays in the url.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is this the desired behavior ?&lt;br/&gt;
Or you expect &quot;Y&quot; to be set in the url ?&lt;br/&gt;
Why ?&lt;/p&gt;</comment>
                            <comment id="14090719" author="gsmet" created="Fri, 8 Aug 2014 12:41:39 +0000"  >&lt;p&gt;Hi Martin,&lt;/p&gt;

&lt;p&gt;My 2 cents: I really think we should stay with only the parameters of the initial request. It&apos;s far more predictive. Combining the parameters might lead to unexpected results.&lt;/p&gt;

&lt;p&gt;If the page is expired, being redirected to the exact same page again is OK AFAICS. Maybe, we should even consider adding a warning message in the session or provide a way to do so as it&apos;s still a bit surprising for the user.&lt;/p&gt;

&lt;p&gt;IIRC there was a project to have 2 sorts of parameters in 7. Is it still in the way? I must admit I was too busy these last months to keep an eye on 7 development.&lt;/p&gt;

&lt;p&gt;&amp;#8211; &lt;br/&gt;
Guillaume&lt;/p&gt;</comment>
                            <comment id="14090727" author="mgrigorov" created="Fri, 8 Aug 2014 12:53:49 +0000"  >&lt;p&gt;But how to differentiate which params are from the page and which are link/form specific ?&lt;br/&gt;
E.g. a page is mounted at &quot;/some/${path}&quot; and the initial page request is: /some/a/b?c=d&lt;br/&gt;
So the page parameters are: path=a, c=d (named) and 0=b (indexed)&lt;br/&gt;
Then the page is expired and a link or a form is clicked/submitted.&lt;br/&gt;
How to differentiate &quot;path&quot; and &quot;c&quot; from any custom parameters the link and form could submit ?&lt;br/&gt;
OK, maybe we can improve PageParameters to be aware of named path parameters, so named parameters will be the set of named path and query string ones.&lt;br/&gt;
Is is OK to use only the named path parameters and the indexed ones and ignore any query string ones ?&lt;/p&gt;</comment>
                            <comment id="14090733" author="gsmet" created="Fri, 8 Aug 2014 12:59:42 +0000"  >&lt;p&gt;Some further thoughts.&lt;/p&gt;

&lt;p&gt;Could we keep the pageParameters as is in the processListener method (we don&apos;t set it to null) and change getPageParameters() to something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        @Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; PageParameters getPageParameters()
	{
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isNewPageInstance() == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
		{
			&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pageInstance.getPageParameters();
		}
                &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                {
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pageParameters;
                }
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This way, the page instance page parameters have precedence.&lt;/p&gt;

&lt;p&gt;Maybe we should rename the pageParameters attribute with something like currentRequestPageParameters or candidatePageParameters? I think the current name is misleading as the getter is more clever than we expect it to be and it doesn&apos;t always return pageParameters.&lt;/p&gt;</comment>
                            <comment id="14090747" author="gsmet" created="Fri, 8 Aug 2014 13:25:30 +0000"  >&lt;p&gt;Martin,&lt;/p&gt;

&lt;p&gt;As for now, I was trying to find a mostly working solution for 6.&lt;/p&gt;

&lt;p&gt;As for future development, I think that what you propose would work. And I think it could also fix elegantly the problem worked around by the PageParameterAwareMountedMapper of Johannes (namely having a page which doesn&apos;t respect the parameter because another page with the pageId already exists for this user): we could check that the &quot;vital&quot; parameters are &lt;b&gt;exactly&lt;/b&gt; the same before considering the page instance is the one you want EVEN if the page id is ok.&lt;/p&gt;

&lt;p&gt;I&apos;m wondering if it shouldn&apos;t be the responsability of the developer to define the &quot;vital&quot; parameters for its pages. The default could be to use the named path parameter but it could be nice to be able to override it.&lt;/p&gt;

&lt;p&gt;As for PageParameters, I concur we should have a better separation between the various types of parameters.&lt;/p&gt;</comment>
                            <comment id="14092641" author="jira-bot" created="Mon, 11 Aug 2014 10:14:03 +0000"  >&lt;p&gt;Commit 5f0e63c8a91ea74c57ed6ba65a9f8a60d30eb130 in wicket&apos;s branch refs/heads/5539-named-parameters-type from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5f0e63c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5f0e63c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Incorrect recreation of page in case of PageExpire&lt;/p&gt;

&lt;p&gt;Support named parameters type.&lt;br/&gt;
The type is a hint from where the parameter has been read from - the url path, the url query string, or manually set&lt;/p&gt;</comment>
                            <comment id="14092642" author="jira-bot" created="Mon, 11 Aug 2014 10:14:16 +0000"  >&lt;p&gt;Commit e8773fb18da2d763d62a2857335b3c73d491d064 in wicket&apos;s branch refs/heads/5539-named-parameters-type from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e8773fb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e8773fb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Incorrect recreation of page in case of PageExpire&lt;/p&gt;

&lt;p&gt;Add javadoc and method to read all named parameters with a given type&lt;/p&gt;</comment>
                            <comment id="14092644" author="mgrigorov" created="Mon, 11 Aug 2014 10:15:58 +0000"  >&lt;p&gt;I&apos;ve added support for named parameters type in branch &quot;5539-named-parameters-type&quot; (branched from Wicket 7.x) - QUERY_STRING, PATH and MANUAL.&lt;br/&gt;
I&apos;ll extend the quickstart app to have as much use cases as I imagine and make it a proper test case.&lt;/p&gt;</comment>
                            <comment id="14092684" author="mgrigorov" created="Mon, 11 Aug 2014 11:25:14 +0000"  >&lt;p&gt;In Wicket 7.x it is possible to re-create the page, pass (all) request parameters as page parameters, and depending on org.apache.wicket.Component#canCallListenerInterfaceAfterExpiry() and org.apache.wicket.settings.PageSettings#getCallListenerInterfaceAfterExpiry() decide whether to execute the action (onClick, onSubmit, etc.).&lt;/p&gt;

&lt;p&gt;The change is:&lt;br/&gt;
&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=a1f862629c223b675a31c4ba9fb7e07c27279090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=a1f862629c223b675a31c4ba9fb7e07c27279090&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14092690" author="jira-bot" created="Mon, 11 Aug 2014 11:35:45 +0000"  >&lt;p&gt;Commit 46b9ed395b562a82880ffcc6e6cfc1f01e8b172d in wicket&apos;s branch refs/heads/5539-hook-for-listener-parameters from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=46b9ed3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=46b9ed3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Incorrect recreation of page in case of PageExpire&lt;/p&gt;

&lt;p&gt;Make it possible for custom MountedMappers to use the parsed PageParameters while processing a listener interface&lt;/p&gt;

&lt;p&gt;This is a temporary workaround for Wicket 6.x. It is done in a better/configurable way in Wicket 7.x with &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=a1f862629c223b675a31c4ba9fb7e07c27279090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=a1f862629c223b675a31c4ba9fb7e07c27279090&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14092692" author="mgrigorov" created="Mon, 11 Aug 2014 11:39:04 +0000"  >&lt;p&gt;For Wicket 6.x I could suggest this workaround: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/wicket/commit/46b9ed39&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/wicket/commit/46b9ed39&lt;/a&gt;&lt;br/&gt;
The applications will have to do:&lt;br/&gt;
MyApplication#init()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  mount(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MountedMapper(&lt;span class=&quot;code-quote&quot;&gt;&quot;/some/path&quot;&lt;/span&gt;, SomePage.class) {
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; PageParameters getPageParametersForListener(PageInfo pageInfo, PageParameters pageParameters) {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pageParameters;
    }
});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  mountPage(&lt;span class=&quot;code-quote&quot;&gt;&quot;/some/path&quot;&lt;/span&gt;, SomePage.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;because we could not add new methods to interfaces (like IPageSettings, INamedParameters).&lt;/p&gt;

&lt;p&gt;Opinions ?&lt;/p&gt;</comment>
                            <comment id="14092720" author="gsmet" created="Mon, 11 Aug 2014 12:16:03 +0000"  >&lt;p&gt;Hi Martin,&lt;/p&gt;

&lt;p&gt;Thanks for pursuing this.&lt;/p&gt;

&lt;p&gt;The workaround for 6 looks OK to me. It&apos;s not pretty but it does the job.&lt;/p&gt;

&lt;p&gt;I like what you did in your branch. Maybe it would be a good idea to provide a way to configure:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;which parameters have to be kept using the names&lt;/li&gt;
	&lt;li&gt;which parameters have to be kept using the types you introduced&lt;br/&gt;
when you define the mapping?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I don&apos;t have a specific need for it myself but I think it might be something cool in case someone really wants to define the behavior specifically.&lt;/p&gt;</comment>
                            <comment id="14092808" author="florianbraunsa@gmail.com" created="Mon, 11 Aug 2014 14:22:39 +0000"  >&lt;p&gt;Hi Martin,&lt;/p&gt;

&lt;p&gt;Thanks for taking a look at this and sorry for joining the conversation late, I was on vacation for a few days.&lt;/p&gt;

&lt;p&gt;With the proposed solution for Wicket 6 developers need to know that mountPage should not be used (if PageParameters need to be preserved on page recovery). &lt;br/&gt;
We are maintaining a BaseWebApplication that is used by many separate Wicket applications and I&#8217;m concerned developers will miss this and continue using mountPage. And we can&#8217;t override mountPage in our BaseApplication since it is final.&lt;br/&gt;
Would it be possible to remove final from mountPage so we can provide the overridden MountedMapper to all consumers? &lt;br/&gt;
Or can you think of a another way this can be handled more globally (instead of having to address it with every page mount)?&lt;/p&gt;</comment>
                            <comment id="14092810" author="mgrigorov" created="Mon, 11 Aug 2014 14:26:24 +0000"  >&lt;p&gt;I think it is OK to remove final for all mount() methods.&lt;/p&gt;</comment>
                            <comment id="14092815" author="florianbraunsa@gmail.com" created="Mon, 11 Aug 2014 14:29:52 +0000"  >&lt;p&gt;Great. I&apos;ll work on that change.&lt;/p&gt;</comment>
                            <comment id="14093862" author="jira-bot" created="Tue, 12 Aug 2014 07:55:17 +0000"  >&lt;p&gt;Commit f6eaa937d4cdda9fd04c3c5312eaca66d5fb52a2 in wicket&apos;s branch refs/heads/5539-hook-for-listener-parameters from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f6eaa93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f6eaa93&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Allow preserving of the parsed PageParameters when re-creating an expired page&lt;/p&gt;

&lt;p&gt;Remove &apos;final&apos; modifier for all mount related methods in WebApplication&lt;/p&gt;</comment>
                            <comment id="14093863" author="jira-bot" created="Tue, 12 Aug 2014 07:55:49 +0000"  >&lt;p&gt;Commit 46b9ed395b562a82880ffcc6e6cfc1f01e8b172d in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=46b9ed3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=46b9ed3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Incorrect recreation of page in case of PageExpire&lt;/p&gt;

&lt;p&gt;Make it possible for custom MountedMappers to use the parsed PageParameters while processing a listener interface&lt;/p&gt;

&lt;p&gt;This is a temporary workaround for Wicket 6.x. It is done in a better/configurable way in Wicket 7.x with &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=a1f862629c223b675a31c4ba9fb7e07c27279090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=a1f862629c223b675a31c4ba9fb7e07c27279090&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14093864" author="jira-bot" created="Tue, 12 Aug 2014 07:56:06 +0000"  >&lt;p&gt;Commit f6eaa937d4cdda9fd04c3c5312eaca66d5fb52a2 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f6eaa93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f6eaa93&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Allow preserving of the parsed PageParameters when re-creating an expired page&lt;/p&gt;

&lt;p&gt;Remove &apos;final&apos; modifier for all mount related methods in WebApplication&lt;/p&gt;</comment>
                            <comment id="14093868" author="jira-bot" created="Tue, 12 Aug 2014 07:58:35 +0000"  >&lt;p&gt;Commit d6897c9b56a26215f9a50e5fb5779bb593a77777 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d6897c9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d6897c9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Allow preserving of the parsed PageParameters when re-creating an expired page&lt;/p&gt;

&lt;p&gt;Remove &apos;final&apos; modifier for all mount related methods in WebApplication&lt;/p&gt;

&lt;p&gt;(cherry picked from commit f6eaa937d4cdda9fd04c3c5312eaca66d5fb52a2)&lt;/p&gt;</comment>
                            <comment id="14093870" author="jira-bot" created="Tue, 12 Aug 2014 08:01:55 +0000"  >&lt;p&gt;Commit a01a674b57fdc274f68fe7e9acfda1914190c878 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a01a674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a01a674&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5539&quot; title=&quot;Allow preserving of the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5539&quot;&gt;&lt;del&gt;WICKET-5539&lt;/del&gt;&lt;/a&gt; Allow preserving of the parsed PageParameters when re-creating an expired page&lt;/p&gt;

&lt;p&gt;Mark the workaround method as deprecated because it is not available in Wicket 7.x&lt;/p&gt;</comment>
                            <comment id="14093905" author="mgrigorov" created="Tue, 12 Aug 2014 08:51:38 +0000"  >&lt;p&gt;&apos;final&apos; modifier is removed from all #mount() methods in WebApplication.&lt;br/&gt;
The application can now use the suggested workaround for Wicket 6.x.&lt;br/&gt;
The new method is marked as deprecated to indicate that it is not available in Wicket 7.x and to give a hint how to do it there.&lt;/p&gt;

&lt;p&gt;If you have time to test the new APIs in Wicket 7.x I&apos;ll be really thankful for your feedback!&lt;/p&gt;</comment>
                            <comment id="14095647" author="florianbraunsa@gmail.com" created="Wed, 13 Aug 2014 16:02:48 +0000"  >&lt;p&gt;I&apos;ve pulled the latest changes in Wicket 7 and tested them with a few of my examples. They seem to be working great and I like the general configuration in PageSettings. Thanks for making the changes!&lt;/p&gt;</comment>
                            <comment id="14095652" author="mgrigorov" created="Wed, 13 Aug 2014 16:06:37 +0000"  >&lt;p&gt;Thanks for testing Wicket 7.x, Florian!&lt;br/&gt;
Please make sure that Wicket 6.x is also prepared for your needs. 6.17.0 is coming soon!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12735824">WICKET-5681</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12559688">WICKET-4594</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12733227">WICKET-5669</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12628818">WICKET-5001</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12634683">WICKET-5068</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12712327">WICKET-5578</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12634700">WICKET-5070</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12638070" name="wicket5539.zip" size="22716" author="phantom" created="Tue, 1 Apr 2014 14:21:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381087</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tnpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>