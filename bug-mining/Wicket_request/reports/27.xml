<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:26:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3576] Cannot set a cookie on bookmarkable page</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3576</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Steps to reproduce:&lt;br/&gt;
//////////////////////&lt;br/&gt;
After starting the Wicket Examples, navigate directly to:&lt;br/&gt;
&lt;a href=&quot;http://localhost:8080/authentication2/wicket/bookmarkable/org.apache.wicket.examples.authentication2.SignIn2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/authentication2/wicket/bookmarkable/org.apache.wicket.examples.authentication2.SignIn2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Sign in with proper user name and password. Notice that the cookie &quot;LoggedIn&quot; is not set.&lt;br/&gt;
//////////////////////&lt;/p&gt;

&lt;p&gt;This does not happen if navigation to the authentication2 example is done through the examples home page. In that case, the URL is &lt;a href=&quot;http://localhost:8080/authentication2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/authentication2/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If I understand correctly, this means that bookmarkable pages cannot set cookies when they also do a redirect. e.g. a bookmarkable sign-in page.&lt;/p&gt;

&lt;p&gt;Note that with the examples from 1.5-rc2, doing the steps described above produces a different result. In that case, signing-in does not set a cookie or actually sign-in at all. The same sign-in page is presented a second time. Sign-in works on this second page.&lt;/p&gt;</description>
                <environment>wicket-examples from rev 1086031 (March 29 2011)</environment>
        <key id="12502757">WICKET-3576</key>
            <summary>Cannot set a cookie on bookmarkable page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdonnerstag">Juegen Donnerstag</assignee>
                                    <reporter username="berniegp">Bertrand Guay-Paquet</reporter>
                        <labels>
                            <label>cookie</label>
                    </labels>
                <created>Tue, 29 Mar 2011 20:41:57 +0000</created>
                <updated>Fri, 22 Apr 2011 05:23:44 +0000</updated>
                            <resolved>Sat, 9 Apr 2011 14:45:58 +0000</resolved>
                                    <version>1.5-RC2</version>
                    <version>1.5-RC3</version>
                                    <fixVersion>1.5-RC4</fixVersion>
                                    <component>wicket</component>
                    <component>wicket-examples</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13012691" author="berniegp" created="Tue, 29 Mar 2011 20:52:14 +0000"  >&lt;p&gt;Some debugging reveals that the BufferedWebResponse is reset which has the effect of discarding previously added AddCookieActions. &lt;br/&gt;
This happens at :&lt;br/&gt;
WebPageRenderer.redirectTo(Url, RequestCycle) line: 176&lt;/p&gt;

&lt;p&gt;(partial) stack trace:&lt;br/&gt;
BufferedWebResponse.sendRedirect(String) line: 460	&lt;br/&gt;
HeaderBufferingWebResponse.sendRedirect(String) line: 111	&lt;br/&gt;
WebPageRenderer.redirectTo(Url, RequestCycle) line: 177	&lt;br/&gt;
WebPageRenderer.respond(RequestCycle) line: 254	&lt;br/&gt;
RenderPageRequestHandler.respond(IRequestCycle) line: 139	&lt;br/&gt;
RequestCycle$HandlerExecutor.respond(IRequestHandler) line: 715	&lt;br/&gt;
RequestCycle$HandlerExecutor(RequestHandlerStack).execute(IRequestHandler) line: 63	&lt;br/&gt;
RequestCycle$HandlerExecutor(RequestHandlerStack).execute(IRequestHandler) line: 96	&lt;br/&gt;
CustomRequestCycle(RequestCycle).processRequest() line: 212	&lt;br/&gt;
CustomRequestCycle(RequestCycle).processRequestAndDetach() line: 253	&lt;br/&gt;
WicketFilter.processRequest(ServletRequest, ServletResponse, FilterChain) line: 138	&lt;/p&gt;


&lt;p&gt;Execution passes by &lt;br/&gt;
WebPageRenderer.respond(RequestCycle) line: 254&lt;br/&gt;
which has the following:&lt;br/&gt;
else if (!targetUrl.equals(currentUrl) //&lt;br/&gt;
	&amp;amp;&amp;amp;&lt;br/&gt;
	(getPageProvider().isNewPageInstance() || (isSessionTemporary() &amp;amp;&amp;amp; getPage().isPageStateless())))&lt;br/&gt;
{&lt;br/&gt;
	// if target URL is different and session is temporary and page is stateless&lt;br/&gt;
	// this is special case when page is stateless but there is no session so we can&apos;t&lt;br/&gt;
	// render it to buffer&lt;/p&gt;

&lt;p&gt;	// alternatively if URLs are different and we have a page class and not an instance we&lt;br/&gt;
	// can redirect to the url which will instantiate the instance of us&lt;/p&gt;

&lt;p&gt;	// note: if we had session here we would render the page to buffer and then redirect to&lt;br/&gt;
	// URL generated &lt;b&gt;after&lt;/b&gt; page has been rendered (the statelessness may change during&lt;br/&gt;
	// render). this would save one redirect because now we have to render to URL generated&lt;br/&gt;
	// &lt;b&gt;before&lt;/b&gt; page is rendered, render the page, get URL after render and if the URL is&lt;br/&gt;
	// different (meaning page is not stateless), save the buffer and redirect again (which&lt;br/&gt;
	// is pretty much what the next step does)&lt;br/&gt;
	redirectTo(targetUrl, requestCycle);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3161&quot; title=&quot;Can not create cookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3161&quot;&gt;&lt;del&gt;WICKET-3161&lt;/del&gt;&lt;/a&gt; had a similar problem.&lt;/p&gt;</comment>
                            <comment id="13014029" author="mgrigorov" created="Thu, 31 Mar 2011 15:46:42 +0000"  >&lt;p&gt;Did you try it with RC-3 ?&lt;br/&gt;
Because this looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3493&quot; title=&quot; Login doesn&amp;#39;t work if placing the SignInPanel on the HomePage.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3493&quot;&gt;&lt;del&gt;WICKET-3493&lt;/del&gt;&lt;/a&gt; which is fixed for RC3&lt;/p&gt;</comment>
                            <comment id="13014160" author="berniegp" created="Thu, 31 Mar 2011 19:41:45 +0000"  >&lt;p&gt;I cannot locate which revision is RC3. I looked in the subversion &quot;Releases&quot; folder and couldn&apos;t find it.&lt;/p&gt;

&lt;p&gt;However, my test environment was Wicket rev #1086031 (latest on March 29 2011) . From what I can see in the log of &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3493&quot; title=&quot; Login doesn&amp;#39;t work if placing the SignInPanel on the HomePage.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3493&quot;&gt;&lt;del&gt;WICKET-3493&lt;/del&gt;&lt;/a&gt;, the last commit was done in rev #1079685. I guess this means I had the relevant changes?&lt;/p&gt;</comment>
                            <comment id="13015178" author="jdonnerstag" created="Sun, 3 Apr 2011 17:00:22 +0000"  >&lt;p&gt;I&apos;ve tested the latest snapshot 1.5rc3 on wicket-library. Seems to be fixed&lt;/p&gt;</comment>
                            <comment id="13015448" author="berniegp" created="Mon, 4 Apr 2011 14:58:30 +0000"  >&lt;p&gt;I have just updated to rev. 1088594 (8:28:17 AM, April-04-11) and I still have the problem.&lt;/p&gt;

&lt;p&gt;The steps must be followed exactly however :&lt;br/&gt;
1-Start &quot;org.apache.wicket.examples.StartExamples.java&quot;&lt;br/&gt;
2-Open the page at &lt;a href=&quot;http://localhost:8080/authentication2/wicket/bookmarkable/org.apache.wicket.examples.authentication2.SignIn2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/authentication2/wicket/bookmarkable/org.apache.wicket.examples.authentication2.SignIn2&lt;/a&gt;&lt;br/&gt;
3-Log-in&lt;br/&gt;
4-Log-in successful but the &quot;remember me&quot; cookie named &quot;LoggedIn&quot; is not set; only JSESSIONID is set.&lt;/p&gt;

&lt;p&gt;After this however,&lt;br/&gt;
5-Click &quot;sign out&quot;&lt;br/&gt;
6-Click &quot;Home&quot;&lt;br/&gt;
7-Log-in&lt;br/&gt;
8-&quot;LoggedIn&quot; cookie is not set.&lt;/p&gt;

&lt;p&gt;Is this what you have tried?&lt;/p&gt;</comment>
                            <comment id="13015470" author="berniegp" created="Mon, 4 Apr 2011 15:52:05 +0000"  >&lt;p&gt;Test case demonstrating the problem&lt;/p&gt;</comment>
                            <comment id="13015471" author="berniegp" created="Mon, 4 Apr 2011 15:52:42 +0000"  >&lt;p&gt;Please see newly attached test case for an even simpler way to reproduce.&lt;/p&gt;</comment>
                            <comment id="13016857" author="blakeday" created="Thu, 7 Apr 2011 14:28:45 +0000"  >&lt;p&gt;I believe this bug affects my application in that users cannot log out because the &quot;LoggedIn&quot; cookie is never unset when I call session.invalidate() and then setResponsePage().&lt;/p&gt;</comment>
                            <comment id="13018577" author="berniegp" created="Mon, 11 Apr 2011 21:26:59 +0000"  >&lt;p&gt;Works wonderfully, thanks!&lt;/p&gt;

&lt;p&gt;Closing issue&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12504904">WICKET-3631</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12475384" name="setCookie_failing_test.patch" size="10631" author="berniegp" created="Mon, 4 Apr 2011 15:52:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kalj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>