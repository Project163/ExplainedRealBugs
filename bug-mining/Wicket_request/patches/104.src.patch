diff --git a/wicket-request/src/main/java/org/apache/wicket/request/Url.java b/wicket-request/src/main/java/org/apache/wicket/request/Url.java
index b9769e85fd..596163e9ac 100755
--- a/wicket-request/src/main/java/org/apache/wicket/request/Url.java
+++ b/wicket-request/src/main/java/org/apache/wicket/request/Url.java
@@ -263,7 +263,8 @@ public class Url implements Serializable
 				hostAndPort = afterProto.substring(0, relativeAt);
 			}
 
-			final int portAt = hostAndPort.lastIndexOf(':');
+			final int credentialsAt = hostAndPort.lastIndexOf('@') + 1;
+			final int portAt = hostAndPort.substring(credentialsAt).lastIndexOf(':');
 
 			if (portAt == -1)
 			{
@@ -272,8 +273,8 @@ public class Url implements Serializable
 			}
 			else
 			{
-				result.host = hostAndPort.substring(0, portAt);
-				result.port = Integer.parseInt(hostAndPort.substring(portAt + 1));
+				result.host = hostAndPort.substring(0, portAt + credentialsAt);
+				result.port = Integer.parseInt(hostAndPort.substring(portAt + credentialsAt + 1));
 			}
 
 			if (relativeAt < 0)
diff --git a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
index 17082d36bb..b047bbf53e 100644
--- a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
+++ b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
@@ -260,6 +260,31 @@ public class UrlTest extends Assert
 		checkSegments(url, ";jsessionid=8kxeo3reannw1qjtxgkju8yiu");
 	}
 
+	/**
+	 * WICKET-5259
+	 */
+	@Test
+	public void parse17()
+	{
+		String s = "http://me:secret@localhost";
+		Url url = Url.parse(s);
+		assertEquals("http", url.getProtocol());
+		assertEquals("me:secret@localhost", url.getHost());
+	}
+
+	/**
+	 * WICKET-5259
+	 */
+	@Test
+	public void parse18()
+	{
+		String s = "http://me:secret@localhost:8080";
+		Url url = Url.parse(s);
+		assertEquals("http", url.getProtocol());
+		assertEquals("me:secret@localhost", url.getHost());
+		assertEquals(Integer.valueOf(8080), url.getPort());
+	}
+
 	/**
 	 * 
 	 */
