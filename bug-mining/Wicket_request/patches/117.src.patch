diff --git a/wicket-request/src/main/java/org/apache/wicket/request/Url.java b/wicket-request/src/main/java/org/apache/wicket/request/Url.java
index e950f6f90a..9d5b401df9 100755
--- a/wicket-request/src/main/java/org/apache/wicket/request/Url.java
+++ b/wicket-request/src/main/java/org/apache/wicket/request/Url.java
@@ -53,6 +53,7 @@ import org.apache.wicket.util.string.Strings;
  * Example URLs:
  * 
  * <ul>
+ *     <li>http://hostname:1234/foo/bar?a=b#baz - protocol: http, host: hostname, port: 1234, segments: [&quot;foo&quot;,&quot;bar&quot;], fragment: baz </li>
  *     <li>http://hostname:1234/foo/bar?a=b - protocol: http, host: hostname, port: 1234, segments: [&quot;foo&quot;,&quot;bar&quot;] </li>
  *     <li>//hostname:1234/foo/bar?a=b - protocol: null, host: hostname, port: 1234, segments: [&quot;foo&quot;,&quot;bar&quot;] </li>
  *     <li>foo/bar/baz?a=1&amp;b=5    - segments: [&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;], query parameters: [&quot;a&quot;=&quot;1&quot;, &quot;b&quot;=&quot;5&quot;]</li>
@@ -84,6 +85,7 @@ public class Url implements Serializable
 	private String protocol;
 	private Integer port;
 	private String host;
+	private String fragment;
 
 	/**
 	 * Modes with which urls can be stringized
@@ -229,6 +231,15 @@ public class Url implements Serializable
 		final String queryString;
 		final String absoluteUrl;
 
+		final int fragmentAt = url.indexOf('#');
+
+		// matches url fragment, but doesn't match optional path parameter (e.g. .../#{optional}/...)
+		if (fragmentAt > -1 && url.length() > fragmentAt + 1 && url.charAt(fragmentAt + 1) != '{')
+		{
+			result.fragment = url.substring(fragmentAt + 1);
+			url = url.substring(0, fragmentAt);
+		}
+
 		final int queryAt = url.indexOf('?');
 
 		if (queryAt == -1)
@@ -446,7 +457,25 @@ public class Url implements Serializable
 	{
 		return parameters;
 	}
-	
+
+	/**
+	 * 
+	 * @return fragment
+	 */
+	public String getFragment()
+	{
+		return fragment;
+	}
+
+	/**
+	 * 
+	 * @param fragment
+	 */
+	public void setFragment(String fragment)
+	{
+		this.fragment = fragment;
+	}
+
 	/**
 	 * Returns whether the Url is context absolute. Absolute Urls start with a '{@literal /}'.
 	 *
@@ -598,7 +627,8 @@ public class Url implements Serializable
 		Url rhs = (Url)obj;
 
 		return getSegments().equals(rhs.getSegments()) &&
-			getQueryParameters().equals(rhs.getQueryParameters());
+			getQueryParameters().equals(rhs.getQueryParameters()) &&
+			Objects.isEqual(getFragment(), rhs.getFragment());
 	}
 
 	/**
@@ -607,7 +637,7 @@ public class Url implements Serializable
 	@Override
 	public int hashCode()
 	{
-		return Objects.hashCode(getSegments(), getQueryParameters());
+		return Objects.hashCode(getSegments(), getQueryParameters(), getFragment());
 	}
 
 	/**
@@ -723,14 +753,21 @@ public class Url implements Serializable
 		{
 			result.append('?').append(queryString);
 		}
+
+		String _fragment = getFragment();
+		if (Strings.isEmpty(_fragment) == false)
+		{
+			result.append('#').append(_fragment);
+		}
+
 		return result.toString();
 	}
 
 	/**
-	 * Stringizes this url using the specifid {@link StringMode} and url's charset
+	 * Stringizes this url using the specific {@link StringMode} and url's charset
 	 * 
 	 * @param mode
-	 *            {@link StringMode} that determins how to stringize the url
+	 *            {@link StringMode} that determines how to stringize the url
 	 * @return stringized url
 	 */
 	public String toString(StringMode mode)
diff --git a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
index 409fbcf12a..3102baf7b1 100644
--- a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
+++ b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
@@ -16,6 +16,9 @@
  */
 package org.apache.wicket.request;
 
+import static org.hamcrest.CoreMatchers.is;
+import static org.hamcrest.CoreMatchers.nullValue;
+
 import java.io.ByteArrayInputStream;
 import java.io.ByteArrayOutputStream;
 import java.io.ObjectInputStream;
@@ -60,10 +63,11 @@ public class UrlTest extends Assert
 	@Test
 	public void parse1()
 	{
-		String s = "foo/bar/baz?a=4&b=5";
+		String s = "foo/bar/baz?a=4&b=5#foo2";
 		Url url = Url.parse(s);
 		checkSegments(url, "foo", "bar", "baz");
 		checkQueryParams(url, "a", "4", "b", "5");
+		assertEquals("foo2", url.getFragment());
 	}
 
 	/**
@@ -298,6 +302,39 @@ public class UrlTest extends Assert
 		assertEquals(Integer.valueOf(8080), url.getPort());
 	}
 
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-5717
+	 */
+	@Test
+	public void parse19()
+	{
+		String s = "http://me:secret@localhost:8080/segment/#fragment";
+		Url url = Url.parse(s);
+		assertEquals("fragment", url.getFragment());
+	}
+
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-5717
+	 */
+	@Test
+	public void parse20()
+	{
+		String s = "http://me:secret@localhost:8080/segment/#";
+		Url url = Url.parse(s);
+		assertThat(url.getFragment(), is(nullValue()));
+	}
+
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-5717
+	 */
+	@Test
+	public void parse21()
+	{
+		String s = "http://me:secret@localhost:8080/segment#";
+		Url url = Url.parse(s);
+		assertThat(url.getFragment(), is(nullValue()));
+	}
+
 	/**
 	 * 
 	 */
@@ -363,6 +400,17 @@ public class UrlTest extends Assert
 		assertEquals(url.toString(StringMode.LOCAL), url.toString());
 	}
 
+	@Test
+	public void render6()
+	{
+		Url url = Url.parse("https://www.domain.com/foo/bar?baz=ban#bat");
+
+		// local string mode
+		assertEquals("/foo/bar?baz=ban#bat", url.toString(StringMode.LOCAL));
+
+		// full string mode
+		assertEquals("https://www.domain.com/foo/bar?baz=ban#bat", url.toString(StringMode.FULL));
+	}
 
 	/**
 	 * 
