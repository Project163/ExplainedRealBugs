diff --git a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
index b047bbf53e..9d03f3f75a 100644
--- a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
+++ b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
@@ -118,6 +118,19 @@ public class UrlTest extends Assert
 		checkQueryParams(url, "a", "b", "x?&4", "y=z");
 	}
 
+	/**
+	 * Same as #parse5() but with full url and not encoded '=' char in the query string
+	 * WICKET-5157
+	 */
+	@Test
+	public void parse5_1()
+	{
+		String s = "http://host:12345/foo/b%3Dr/b%26z/x%3F?a=b&x%3F%264=y=z";
+		Url url = Url.parse(s);
+		checkSegments(url, "", "foo", "b=r", "b&z", "x?");
+		checkQueryParams(url, "a", "b", "x?&4", "y=z");
+	}
+
 	/**
 	 * 
 	 */
