diff --git a/wicket-request/src/main/java/org/apache/wicket/request/UrlRenderer.java b/wicket-request/src/main/java/org/apache/wicket/request/UrlRenderer.java
index b2f7f13854..affc5166cc 100644
--- a/wicket-request/src/main/java/org/apache/wicket/request/UrlRenderer.java
+++ b/wicket-request/src/main/java/org/apache/wicket/request/UrlRenderer.java
@@ -334,7 +334,7 @@ public class UrlRenderer
 			}
 		}
 
-		for (int i = 0; i < commonPrefix.getSegments().size(); i++)
+		for (int i = 0; i < commonPrefix.getSegments().size() && !segments.isEmpty(); i++)
 		{
 			segments.remove(0);
 		}
