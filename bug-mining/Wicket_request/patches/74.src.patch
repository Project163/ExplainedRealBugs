diff --git a/wicket-request/src/main/java/org/apache/wicket/request/Url.java b/wicket-request/src/main/java/org/apache/wicket/request/Url.java
index d387a13c2b..acb42875d2 100755
--- a/wicket-request/src/main/java/org/apache/wicket/request/Url.java
+++ b/wicket-request/src/main/java/org/apache/wicket/request/Url.java
@@ -989,17 +989,28 @@ public final class Url implements Serializable
 			// strip the first non-folder segment
 			getSegments().remove(getSegments().size() - 1);
 		}
-		// remove all './' (current folder) from the relative url
-		if (!relative.getSegments().isEmpty() && ".".equals(relative.getSegments().get(0)))
-		{
-			relative.getSegments().remove(0);
-		}
 
-		// process any ../ segments in the relative url
-		while (!relative.getSegments().isEmpty() && "..".equals(relative.getSegments().get(0)))
+		// remove leading './' (current folder) and empty segments, process any ../ segments from the
+		// relative url
+		while (!relative.getSegments().isEmpty())
 		{
-			relative.getSegments().remove(0);
-			getSegments().remove(getSegments().size() - 1);
+			if (".".equals(relative.getSegments().get(0)))
+			{
+				relative.getSegments().remove(0);
+			}
+			else if ("".equals(relative.getSegments().get(0)))
+			{
+				relative.getSegments().remove(0);
+			}
+			else if ("..".equals(relative.getSegments().get(0)))
+			{
+				relative.getSegments().remove(0);
+				getSegments().remove(getSegments().size() - 1);
+			}
+			else
+			{
+				break;
+			}
 		}
 
 		// append the remaining relative segments
diff --git a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
index a0da8c7057..4388f67d1e 100644
--- a/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
+++ b/wicket-request/src/test/java/org/apache/wicket/request/UrlTest.java
@@ -478,6 +478,19 @@ public class UrlTest extends Assert
 		assertEquals("a/b?p1=v1", baseUrl.toString());
 	}
 
+	/**
+	 * @see <a href="https://issues.apache.org/jira/browse/WICKET-4518">WICKET-4518</a>
+	 */
+	@Test
+	public void testResolveRelative4()
+	{
+		Url relative = Url.parse("../?p1=v1");
+		Url baseUrl = Url.parse("c/d");
+		baseUrl.resolveRelative(relative);
+
+		assertEquals("?p1=v1", baseUrl.toString());
+	}
+
 	/**
 	 * Tries to resolve a relative url against a base that has no segments
 	 */
@@ -504,6 +517,38 @@ public class UrlTest extends Assert
 		assertEquals("bar/baz?a=b", baseUrl.toString());
 	}
 
+	/**
+	 * Tries to resolve a relative url that starts with dot followed by empty segment
+	 * 
+	 * @see <a href="https://issues.apache.org/jira/browse/WICKET-4518">WICKET-4518</a>
+	 */
+	@Test
+	public void testResolveRelative_DotFollowedByEmptySegment1()
+	{
+		Url relative = Url.parse("./?a=b");
+		Url baseUrl = Url.parse("bar");
+		baseUrl.resolveRelative(relative);
+
+		assertEquals("?a=b", baseUrl.toString());
+		assertEquals("no empty segment", 0, baseUrl.getSegments().size());
+	}
+
+	/**
+	 * Tries to resolve a relative url that starts with dot followed by empty segment
+	 * 
+	 * @see <a href="https://issues.apache.org/jira/browse/WICKET-4518">WICKET-4518</a>
+	 */
+	@Test
+	public void testResolveRelative_DotFollowedByEmptySegment2()
+	{
+		Url relative = Url.parse("./?a=b");
+		Url baseUrl = Url.parse("bar/baz");
+		baseUrl.resolveRelative(relative);
+
+		assertEquals("bar?a=b", baseUrl.toString());
+		assertEquals("no empty segment", 1, baseUrl.getSegments().size());
+	}
+
 	/**
 	 * Tests that the default charset is UTF-8
 	 */
