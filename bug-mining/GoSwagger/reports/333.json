{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1898","repository_url":"https://api.github.com/repos/go-swagger/go-swagger","labels_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1898/labels{/name}","comments_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1898/comments","events_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1898/events","html_url":"https://github.com/go-swagger/go-swagger/issues/1898","id":417641741,"node_id":"MDU6SXNzdWU0MTc2NDE3NDE=","number":1898,"title":"swagger generate client command fails with invalid token reference","user":{"login":"bigflood","id":537859,"node_id":"MDQ6VXNlcjUzNzg1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/537859?v=4","gravatar_id":"","url":"https://api.github.com/users/bigflood","html_url":"https://github.com/bigflood","followers_url":"https://api.github.com/users/bigflood/followers","following_url":"https://api.github.com/users/bigflood/following{/other_user}","gists_url":"https://api.github.com/users/bigflood/gists{/gist_id}","starred_url":"https://api.github.com/users/bigflood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bigflood/subscriptions","organizations_url":"https://api.github.com/users/bigflood/orgs","repos_url":"https://api.github.com/users/bigflood/repos","events_url":"https://api.github.com/users/bigflood/events{/privacy}","received_events_url":"https://api.github.com/users/bigflood/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":148436504,"node_id":"MDU6TGFiZWwxNDg0MzY1MDQ=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":770925345,"node_id":"MDU6TGFiZWw3NzA5MjUzNDU=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/Ref%20resolution","name":"Ref resolution","color":"ea9a07","default":false,"description":null},{"id":840891559,"node_id":"MDU6TGFiZWw4NDA4OTE1NTk=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/flatten","name":"flatten","color":"73e296","default":false,"description":"Related to spec flattening"},{"id":975136500,"node_id":"MDU6TGFiZWw5NzUxMzY1MDA=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/pending%20PR","name":"pending PR","color":"7ff47f","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-03-06T06:20:08Z","updated_at":"2023-12-23T11:25:34Z","closed_at":"2023-12-23T11:25:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Problem statement\r\n\r\n`swagger generate client` fails on a valid swagger.json.\r\nerror message is \r\n```\r\nsome references could not be resolved in spec. First found: invalid token reference \"v2EventMsg\"\r\n```\r\nThe reference is `\"$ref\": \"#/x-stream-definitions/v2EventMsg\"`\r\nbut, it succeeds without error if I change `#/x-stream-definitions/v2EventMsg` to `./example.swagger.json#/x-stream-definitions/v2EventMsg`\r\n\r\n## Swagger specification\r\n```\r\n{\r\n  \"swagger\": \"2.0\",\r\n  \"info\": {\r\n    \"title\": \"example.proto\",\r\n    \"version\": \"version not set\"\r\n  },\r\n  \"schemes\": [\r\n    \"http\",\r\n    \"https\"\r\n  ],\r\n  \"consumes\": [\r\n    \"application/json\"\r\n  ],\r\n  \"produces\": [\r\n    \"application/json\"\r\n  ],\r\n  \"paths\": {\r\n    \"/example/v2/GetEvents\": {\r\n      \"get\": {\r\n        \"operationId\": \"GetEvents\",\r\n        \"responses\": {\r\n          \"200\": {\r\n            \"description\": \"A successful response.(streaming responses)\",\r\n            \"schema\": {\r\n              \"$ref\": \"#/x-stream-definitions/v2EventMsg\"\r\n            }\r\n          }\r\n        },\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"afterEventID\",\r\n            \"description\": \".\",\r\n            \"in\": \"query\",\r\n            \"required\": false,\r\n            \"type\": \"string\"\r\n          }\r\n        ],\r\n        \"tags\": [\r\n          \"Matchmaking\"\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \"definitions\": {\r\n    \"protobufAny\": {\r\n      \"type\": \"object\",\r\n      \"properties\": {\r\n        \"type_url\": {\r\n          \"type\": \"string\"\r\n        },\r\n        \"value\": {\r\n          \"type\": \"string\",\r\n          \"format\": \"byte\"\r\n        }\r\n      }\r\n    },\r\n    \"runtimeStreamError\": {\r\n      \"type\": \"object\",\r\n      \"properties\": {\r\n        \"grpc_code\": {\r\n          \"type\": \"integer\",\r\n          \"format\": \"int32\"\r\n        },\r\n        \"http_code\": {\r\n          \"type\": \"integer\",\r\n          \"format\": \"int32\"\r\n        },\r\n        \"message\": {\r\n          \"type\": \"string\"\r\n        },\r\n        \"http_status\": {\r\n          \"type\": \"string\"\r\n        },\r\n        \"details\": {\r\n          \"type\": \"array\",\r\n          \"items\": {\r\n            \"$ref\": \"#/definitions/protobufAny\"\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"v2EventMsg\": {\r\n      \"type\": \"object\",\r\n      \"properties\": {\r\n        \"eventID\": {\r\n          \"type\": \"string\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"x-stream-definitions\": {\r\n    \"v2EventMsg\": {\r\n      \"type\": \"object\",\r\n      \"properties\": {\r\n        \"result\": {\r\n          \"$ref\": \"#/definitions/v2EventMsg\"\r\n        },\r\n        \"error\": {\r\n          \"$ref\": \"#/definitions/runtimeStreamError\"\r\n        }\r\n      },\r\n      \"title\": \"Stream result of v2EventMsg\"\r\n    }\r\n  }\r\n}\r\n```\r\n## Steps to reproduce\r\n```\r\n> swagger generate client -f example.swagger.json\r\n2019/03/06 15:13:33 validating spec example.swagger.json\r\nThe swagger spec at \"example.swagger.json\" is invalid against swagger specification 2.0. see errors :\r\n- some references could not be resolved in spec. First found: invalid token reference \"v2EventMsg\"\r\n```\r\n","closed_by":{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1898/timeline","performed_via_github_app":null,"state_reason":"completed"}