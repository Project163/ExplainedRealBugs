{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/2597","repository_url":"https://api.github.com/repos/go-swagger/go-swagger","labels_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/2597/labels{/name}","comments_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/2597/comments","events_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/2597/events","html_url":"https://github.com/go-swagger/go-swagger/issues/2597","id":934198257,"node_id":"MDU6SXNzdWU5MzQxOTgyNTc=","number":2597,"title":"Using minItems not generating correct validation code","user":{"login":"omrihq","id":6285455,"node_id":"MDQ6VXNlcjYyODU0NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6285455?v=4","gravatar_id":"","url":"https://api.github.com/users/omrihq","html_url":"https://github.com/omrihq","followers_url":"https://api.github.com/users/omrihq/followers","following_url":"https://api.github.com/users/omrihq/following{/other_user}","gists_url":"https://api.github.com/users/omrihq/gists{/gist_id}","starred_url":"https://api.github.com/users/omrihq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/omrihq/subscriptions","organizations_url":"https://api.github.com/users/omrihq/orgs","repos_url":"https://api.github.com/users/omrihq/repos","events_url":"https://api.github.com/users/omrihq/events{/privacy}","received_events_url":"https://api.github.com/users/omrihq/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":493024387,"node_id":"MDU6TGFiZWw0OTMwMjQzODc=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/validator","name":"validator","color":"d4c5f9","default":false,"description":"Related to codegen generation of validations"},{"id":784279907,"node_id":"MDU6TGFiZWw3ODQyNzk5MDc=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/model","name":"model","color":"cce878","default":false,"description":"Related to swagger generate model command"},{"id":975136500,"node_id":"MDU6TGFiZWw5NzUxMzY1MDA=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/pending%20PR","name":"pending PR","color":"7ff47f","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-06-30T23:19:44Z","updated_at":"2023-12-30T20:29:02Z","closed_at":"2023-12-30T20:29:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Problem statement\r\nUsing minItems generates validation for minimum number of items, but doesn't include the name of the path, which is required for verbose errors\r\n\r\n## Swagger specification\r\n```\r\npaths:\r\n  /v1/blah:\r\n    patch:\r\n      produces:\r\n        - application/json\r\n      parameters:\r\n        - name: newArray\r\n          in: body\r\n          schema:\r\n            $ref: '#/definitions/BlahArray'\r\n\r\ndefinitions:\r\n  BlahArray:\r\n    description: The array of blah numbers\r\n    type: array\r\n    items:\r\n      type: integer\r\n    minItems: 1\r\n```\r\n\r\n## Output\r\n\r\n```\r\n// In file blah_array.go\r\ntype BlahArray []int64\r\n\r\n// Validate validates this blah array\r\nfunc (m Blah) Validate(formats strfmt.Registry) error {\r\n\tvar res []error\r\n\r\n\tiBlahArraySize := int64(len(m))\r\n\r\n\tif err := validate.MinItems(\"\", \"body\", iBlahArraySize, 1); err != nil {\r\n\t\treturn err\r\n\t}\r\n\r\n\tif len(res) > 0 {\r\n\t\treturn errors.CompositeValidationError(res...)\r\n\t}\r\n\treturn nil\r\n}\r\n```\r\n\r\nNotice: `validate.MinItems(\"\", \"body\", iBlahArraySize, 1);`, which results in error copy such as `\" in body should have at least 1 items\"` \r\n\r\nExpectation would be: `validate.MinItems(\"BlahArray\", \"body\", iBlahArraySize, 1);`, which would return `\"BlahArray in body should have at least 1 items\"` or something\r\n\r\n## Environment\r\nswagger version: 2.0\r\ngo version: 1.15\r\nOS: macOS\r\n\r\n\r\nThanks for maintaining this library, it is a joy to use","closed_by":{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/2597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/2597/timeline","performed_via_github_app":null,"state_reason":"completed"}