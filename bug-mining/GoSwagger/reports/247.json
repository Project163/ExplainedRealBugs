{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1260","repository_url":"https://api.github.com/repos/go-swagger/go-swagger","labels_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1260/labels{/name}","comments_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1260/comments","events_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1260/events","html_url":"https://github.com/go-swagger/go-swagger/issues/1260","id":273019884,"node_id":"MDU6SXNzdWUyNzMwMTk4ODQ=","number":1260,"title":"Responses defined in schema: restapi/operations/xxx_responses.go:54:18: cannot make type models.YY","user":{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":148436504,"node_id":"MDU6TGFiZWwxNDg0MzY1MDQ=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":493024330,"node_id":"MDU6TGFiZWw0OTMwMjQzMzA=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/generator","name":"generator","color":"bfdadc","default":false,"description":null},{"id":784279907,"node_id":"MDU6TGFiZWw3ODQyNzk5MDc=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/model","name":"model","color":"cce878","default":false,"description":"Related to swagger generate model command"},{"id":975136500,"node_id":"MDU6TGFiZWw5NzUxMzY1MDA=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/pending%20PR","name":"pending PR","color":"7ff47f","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/go-swagger/go-swagger/milestones/9","html_url":"https://github.com/go-swagger/go-swagger/milestone/9","labels_url":"https://api.github.com/repos/go-swagger/go-swagger/milestones/9/labels","id":3562937,"node_id":"MDk6TWlsZXN0b25lMzU2MjkzNw==","number":9,"title":"v0.17","description":"- customizable enums\r\n- realiased types","creator":{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":6,"closed_issues":1,"state":"closed","created_at":"2018-08-12T06:23:20Z","updated_at":"2020-03-24T00:36:45Z","due_on":"2018-09-30T07:00:00Z","closed_at":"2020-03-24T00:36:45Z"},"comments":13,"created_at":"2017-11-10T18:27:12Z","updated_at":"2019-01-04T01:54:45Z","closed_at":"2019-01-04T01:54:45Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Problem statement\r\nServer generation.\r\n\r\nWhen response schema is specified by $ref which defines an array structure, the generated model is not correct and does not compile, with a \"cannot make [type]\" error.\r\nNamely, the initialization of the structure ( {{ Schema.Zero}} initialization method) does not reflect the generated nature of the type.\r\n\r\n- generated type with $ref uses an 'OAI' type alias and a struct:\r\n```\r\ntype xxx struct {\r\n   OAIxxx \r\n}\r\n```\r\n- generated OAI alias:\r\n`type OAIxxx []string`\r\n\r\nWhen no ref is used (e.g. array declared inline in the definitions of the \r\nswagger file), there is no \"OAI\" alias type and compilation proceeds normally.\r\n\r\nWhen the type is an object and not an array, the generator recognize this type as a complex type and does not attempt to use the make built-in to initialize it.\r\n\r\nThe problem really here is to assimilate type X and type Y struct { X }, which the compiler does not accept.\r\n\r\nOne would expect the code generated with $ref to be identical to the one with inline schema.\r\n\r\n## Swagger specification\r\n2.0\r\n\r\n## Steps to reproduce\r\nswagger specification YAML\r\n[test3-ter-swagger.yaml.txt](https://github.com/go-swagger/go-swagger/files/1462315/test3-ter-swagger.yaml.txt)\r\n\r\nJSON schema referred to\r\n[test3-ter-model-schema.json.txt](https://github.com/go-swagger/go-swagger/files/1462317/test3-ter-model-schema.json.txt)\r\n\r\n```\r\nswagger generate server -f ../../models/test3-ter-swagger.yaml\r\n```\r\n\r\nMove to cmd/{server} directory then:\r\n```\r\n>go build\r\n# .../restapi/operations\r\n../../restapi/operations/get_all_responses.go:54:18: cannot make type models.B\r\n```\r\n## Environment\r\nswagger version: build from source origin/master\r\n```\r\n>git describe\r\n0.12.0-49-g783e5bb\r\n```\r\n\r\ngo version: 1.9\r\nOS:   linux ubuntu.14.04\r\n","closed_by":{"login":"casualjim","id":456109,"node_id":"MDQ6VXNlcjQ1NjEwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/456109?v=4","gravatar_id":"","url":"https://api.github.com/users/casualjim","html_url":"https://github.com/casualjim","followers_url":"https://api.github.com/users/casualjim/followers","following_url":"https://api.github.com/users/casualjim/following{/other_user}","gists_url":"https://api.github.com/users/casualjim/gists{/gist_id}","starred_url":"https://api.github.com/users/casualjim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/casualjim/subscriptions","organizations_url":"https://api.github.com/users/casualjim/orgs","repos_url":"https://api.github.com/users/casualjim/repos","events_url":"https://api.github.com/users/casualjim/events{/privacy}","received_events_url":"https://api.github.com/users/casualjim/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1260/timeline","performed_via_github_app":null,"state_reason":"completed"}