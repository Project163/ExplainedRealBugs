{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/774","repository_url":"https://api.github.com/repos/go-swagger/go-swagger","labels_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/774/labels{/name}","comments_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/774/comments","events_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/774/events","html_url":"https://github.com/go-swagger/go-swagger/issues/774","id":193467312,"node_id":"MDU6SXNzdWUxOTM0NjczMTI=","number":774,"title":"x-nullable for array values doesn't have any effect","user":{"login":"christianklotz","id":69443,"node_id":"MDQ6VXNlcjY5NDQz","avatar_url":"https://avatars.githubusercontent.com/u/69443?v=4","gravatar_id":"","url":"https://api.github.com/users/christianklotz","html_url":"https://github.com/christianklotz","followers_url":"https://api.github.com/users/christianklotz/followers","following_url":"https://api.github.com/users/christianklotz/following{/other_user}","gists_url":"https://api.github.com/users/christianklotz/gists{/gist_id}","starred_url":"https://api.github.com/users/christianklotz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianklotz/subscriptions","organizations_url":"https://api.github.com/users/christianklotz/orgs","repos_url":"https://api.github.com/users/christianklotz/repos","events_url":"https://api.github.com/users/christianklotz/events{/privacy}","received_events_url":"https://api.github.com/users/christianklotz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":148436504,"node_id":"MDU6TGFiZWwxNDg0MzY1MDQ=","url":"https://api.github.com/repos/go-swagger/go-swagger/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-12-05T10:59:52Z","updated_at":"2017-10-13T06:49:44Z","closed_at":"2017-10-13T06:49:44Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Problem statement\r\n\r\nIf an array/slice value is `nil` and the aim is to exclude it from the encoded JSON there doesn't seem to be a way to define that. Is this intended behaviour or should `x-nullable` for a property containing an array or `nil` also result in an `omitempty` annotation within the model spec? If it is intentional, is there any other way to exclude null array values from the encoded response?\r\n\r\nIn previous version null arrays were excluded but to allow `nil` and empty arrays to be distinguished, improvements got introduced in #707.\r\n\r\nIn the example given below, the `books` array of a store object is always included in the JSON.\r\n\r\n## Swagger specification\r\n```yaml\r\nswagger: \"2.0\"\r\ninfo:\r\n  title: Playground\r\n  description: Swagger Playground\r\n  version: 1.0.0\r\nbasePath: /v1\r\nschemes:\r\n- http\r\nconsumes:\r\n- application/vdn.playground.v1+json\r\nproduces:\r\n- application/vdn.playground.v1+json\r\n\r\npaths:\r\n  /stores:\r\n    get:\r\n      summary: Get a list of stores\r\n      tags:\r\n        - store\r\n      responses:\r\n        200:\r\n          description: List of stores\r\n          schema:\r\n            type: array\r\n            items:\r\n              $ref: \"#/definitions/Store\"\r\n        default:\r\n          description: generic error response\r\n          schema:\r\n            $ref: \"#/definitions/Error\"\r\n\r\ndefinitions:\r\n  # Store\r\n  Store:\r\n    type: object\r\n    properties:\r\n      id:\r\n        type: integer\r\n        format: int64\r\n        example: 123\r\n      name:\r\n        type: string\r\n        example: Daunt Books\r\n      books:\r\n        type: array\r\n        items:\r\n          $ref: \"#/definitions/Book\"\r\n        x-nullable: true\r\n\r\n  # Book\r\n  Book:\r\n    type: object\r\n    properties:\r\n      id:\r\n        type: integer\r\n        format: int64\r\n        example: 123\r\n      title:\r\n        type: string\r\n        example: Winnie the Pooh\r\n\r\n  # Error\r\n  Error:\r\n    type: object\r\n    readOnly: true\r\n    properties:\r\n      code:\r\n        type: integer\r\n        format: int64\r\n        example: 400\r\n      message:\r\n        type: string\r\n        example: Unexpected error\r\n    required:\r\n      - message\r\n\r\n```\r\n\r\n## Steps to reproduce\r\n\r\n```go\r\napi.StoreGetStoresHandler = store.GetStoresHandlerFunc(func(params store.GetStoresParams) middleware.Responder {\r\n  res := []*models.Store{&models.Store{\r\n    ID:    1,\r\n    Name:  \"My Book Store\",\r\n  }} // note the Books attribute is not set\r\n  return store.NewGetStoresOK().WithPayload(res)\r\n})\r\n```\r\n\r\n## Expected Result\r\n```json\r\n[{\r\n  \"id\":1,\r\n  \"name\":\"My Book Store\"\r\n}]\r\n```\r\n\r\n## Actual Result\r\n```json\r\n[{\r\n  \"id\":1,\r\n  \"name\":\"My Book Store\",\r\n  \"books\":null\r\n}]\r\n```\r\n\r\n> Note: Version used for this 0.7.4","closed_by":{"login":"casualjim","id":456109,"node_id":"MDQ6VXNlcjQ1NjEwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/456109?v=4","gravatar_id":"","url":"https://api.github.com/users/casualjim","html_url":"https://github.com/casualjim","followers_url":"https://api.github.com/users/casualjim/followers","following_url":"https://api.github.com/users/casualjim/following{/other_user}","gists_url":"https://api.github.com/users/casualjim/gists{/gist_id}","starred_url":"https://api.github.com/users/casualjim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/casualjim/subscriptions","organizations_url":"https://api.github.com/users/casualjim/orgs","repos_url":"https://api.github.com/users/casualjim/repos","events_url":"https://api.github.com/users/casualjim/events{/privacy}","received_events_url":"https://api.github.com/users/casualjim/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/774/timeline","performed_via_github_app":null,"state_reason":"completed"}