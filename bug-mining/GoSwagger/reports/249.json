{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1948","repository_url":"https://api.github.com/repos/go-swagger/go-swagger","labels_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1948/labels{/name}","comments_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1948/comments","events_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1948/events","html_url":"https://github.com/go-swagger/go-swagger/issues/1948","id":447741222,"node_id":"MDU6SXNzdWU0NDc3NDEyMjI=","number":1948,"title":"Query parameter can't be named 'append' when enum appearing also","user":{"login":"jimturnquist","id":6660443,"node_id":"MDQ6VXNlcjY2NjA0NDM=","avatar_url":"https://avatars.githubusercontent.com/u/6660443?v=4","gravatar_id":"","url":"https://api.github.com/users/jimturnquist","html_url":"https://github.com/jimturnquist","followers_url":"https://api.github.com/users/jimturnquist/followers","following_url":"https://api.github.com/users/jimturnquist/following{/other_user}","gists_url":"https://api.github.com/users/jimturnquist/gists{/gist_id}","starred_url":"https://api.github.com/users/jimturnquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimturnquist/subscriptions","organizations_url":"https://api.github.com/users/jimturnquist/orgs","repos_url":"https://api.github.com/users/jimturnquist/repos","events_url":"https://api.github.com/users/jimturnquist/events{/privacy}","received_events_url":"https://api.github.com/users/jimturnquist/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-23T15:48:22Z","updated_at":"2019-05-24T18:48:20Z","closed_at":"2019-05-24T18:48:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Problem statement\r\n\r\nWhen a query parameter is named named 'append', AND there is an enumeration in a different query parameter, a portion of the generated code won't build because a variable named 'append' is created.\r\n\r\n## Swagger specification\r\n\r\n```\r\n{\r\n  \"swagger\": \"2.0\",\r\n  \"info\": {\r\n    \"description\": \"Simple API\",\r\n    \"version\": \"2.0.0\",\r\n    \"title\": \"Simple API\"\r\n  },\r\n  \"tags\": [\r\n    {\r\n      \"name\": \"general\",\r\n      \"description\": \"General settings and information\"\r\n    }\r\n  ],\r\n  \"schemes\": [\r\n    \"http\",\r\n    \"https\"\r\n  ],\r\n  \"paths\": {\r\n    \"/api/stuff\": {\r\n      \"get\": {\r\n        \"tags\": [\r\n          \"general\"\r\n        ],\r\n        \"summary\": \"Retrieves stuff\",\r\n        \"operationId\": \"getStuff\",\r\n        \"consumes\": [\r\n          \"application/json\"\r\n        ],\r\n        \"produces\": [\r\n          \"application/json\"\r\n        ],\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"append\",\r\n            \"in\": \"query\",\r\n            \"required\": false,\r\n            \"default\": false,\r\n            \"type\": \"boolean\"\r\n          },\r\n          {\r\n            \"name\": \"results\",\r\n            \"in\": \"query\",\r\n            \"required\": false,\r\n            \"type\": \"array\",\r\n            \"minItems\": 1,\r\n            \"maxItems\": 5,\r\n            \"uniqueItems\": true,\r\n            \"items\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"Counts\",\r\n                \"IDs\",\r\n                \"Amounts\",\r\n                \"Indexes\",\r\n                \"rawIndexes\"\r\n              ]\r\n            }\r\n          }\r\n        ],\r\n        \"responses\": {\r\n          \"200\": {\r\n            \"description\": \"Success, stuff returned\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n## Steps to reproduce\r\n\r\n```\r\nswagger generate server -f sample.json\r\n```\r\n\r\n```\r\ngo build cmd/simple-server/main.go\r\n# myproj/restapi/operations/general\r\nrestapi/operations/general/get_stuff_urlbuilder.go:64:22: cannot call non-function append (type string)\r\n```\r\n\r\n\r\nThe code being produced by the generator produces the following unbuildable code:\r\n\r\nfrom generated file: get_version_urlbuilder.go, the line in bold is line 64.\r\n<pre>\r\n// Build a url path and query string\r\nfunc (o *GetStuffURL) Build() (*url.URL, error) {\r\n        var _result url.URL\r\n\r\n        var _path = \"/api/stuff\"\r\n\r\n        _basePath := o._basePath\r\n        _result.Path = golangswaggerpaths.Join(_basePath, _path)\r\n\r\n        qs := make(url.Values)\r\n\r\n        var append string\r\n        if o.Append != nil {\r\n                append = swag.FormatBool(*o.Append)\r\n        }\r\n        if append != \"\" {\r\n                qs.Set(\"append\", append)\r\n        }\r\n\r\n        var resultsIR []string\r\n        for _, resultsI := range o.Results {\r\n                resultsIS := resultsI\r\n                if resultsIS != \"\" {\r\n                        <b>resultsIR = append(resultsIR, resultsIS)</b>\r\n                }\r\n        }\r\n\r\n        results := swag.JoinByFormat(resultsIR, \"\")\r\n\r\n        if len(results) > 0 {\r\n                qsv := results[0]\r\n                if qsv != \"\" {\r\n                        qs.Set(\"results\", qsv)\r\n                }\r\n        }\r\n\r\n        _result.RawQuery = qs.Encode()\r\n\r\n        return &_result, nil\r\n}\r\n</pre>\r\n\r\n\r\n## Environment\r\nswagger version: v0.19.0 \r\ngo version: go1.12.1 darwin/amd64 \r\nOS:   MacOS\r\n","closed_by":{"login":"fredbi","id":14262513,"node_id":"MDQ6VXNlcjE0MjYyNTEz","avatar_url":"https://avatars.githubusercontent.com/u/14262513?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbi","html_url":"https://github.com/fredbi","followers_url":"https://api.github.com/users/fredbi/followers","following_url":"https://api.github.com/users/fredbi/following{/other_user}","gists_url":"https://api.github.com/users/fredbi/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbi/subscriptions","organizations_url":"https://api.github.com/users/fredbi/orgs","repos_url":"https://api.github.com/users/fredbi/repos","events_url":"https://api.github.com/users/fredbi/events{/privacy}","received_events_url":"https://api.github.com/users/fredbi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-swagger/go-swagger/issues/1948/timeline","performed_via_github_app":null,"state_reason":"completed"}