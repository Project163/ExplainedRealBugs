diff --git a/fixtures/codegen/todolist.discriminators.yml b/fixtures/codegen/todolist.discriminators.yml
index 585ac6ce..6f5d132c 100644
--- a/fixtures/codegen/todolist.discriminators.yml
+++ b/fixtures/codegen/todolist.discriminators.yml
@@ -122,3 +122,25 @@ definitions:
           minimum: 0
       required:
       - packSize
+
+  BFWAccount:
+    type: object
+    description: account
+    xml:
+      name: account
+    required:
+      - id
+    properties:
+      id:
+        type: string
+      billingEntity:
+        type: string
+        enum:
+          - notification
+          - organization
+          - product
+          - user
+        crmid:
+          type: string
+
+
diff --git a/generator/bindata.go b/generator/bindata.go
index e346f34f..fdb91835 100644
--- a/generator/bindata.go
+++ b/generator/bindata.go
@@ -314,7 +314,7 @@ func templatesSchemabodyGotmpl() (*asset, error) {
 	return a, nil
 }
 
-var _templatesSchematypeGotmpl = []byte("\x1f\x8b\x08\x00\x00\x09\x6e\x88\x00\xff\x3c\x8e\x3b\x0e\xc2\x30\x10\x05\x7b\x4e\xf1\x94\xca\xa6\xb0\xb8\x42\x68\x10\x05\xd0\x70\x01\x43\x36\x10\x69\xb3\x1b\x61\xa7\x88\xa2\xdc\x1d\x7f\xa4\x94\x9e\xd1\xf8\xed\xba\xa2\xa3\x7e\x10\x42\x13\xde\x5f\x1a\xfd\x73\x99\xa8\xc1\xb6\x25\x31\xf4\xf0\xd2\xc1\xe8\x0f\xc6\x30\x09\x5c\xcb\xfc\xe8\x2d\x3e\x11\x27\x0b\x77\x0d\xad\xa8\x2c\xa3\xce\xc1\xc2\x40\x34\x66\x76\xf3\x93\xad\x7d\xa4\x71\x62\x1f\xf7\xaf\xcf\xda\x2d\x0d\x5c\x95\xc4\x81\xf6\x99\x94\xdd\x67\x66\xff\xe2\xcc\x8e\x59\xa7\xe1\x62\xdd\x45\xf3\x49\xe5\x91\x60\x6d\x8b\x3c\xfc\x03\x00\x00\xff\xff\x8f\xd0\x8a\x11\xbc\x00\x00\x00")
+var _templatesSchematypeGotmpl = []byte("\x1f\x8b\x08\x00\x00\x09\x6e\x88\x00\xff\xc4\x8f\x31\xae\xc2\x30\x10\x44\xfb\x7f\x8a\x51\x2a\xfb\x17\x16\x57\x08\x0d\xa2\x00\x0a\xb8\x80\xc1\x6b\x88\xb4\xf1\x46\xb1\x53\x44\x51\xee\x8e\x9d\x48\x11\x15\x2d\xa5\xe7\x69\x3c\x6f\xa7\x09\x8e\x7c\x13\x08\x55\x7c\xbc\xa8\xb5\xb7\xb1\xa3\x0a\xf3\x9c\x41\xe3\x61\x83\x83\x92\x1e\x4a\x31\x05\x98\x9a\xf9\xe2\x35\x9e\x09\x3b\x0d\x73\x8c\x75\x90\x30\xb6\x32\x44\x0d\x85\x20\xa9\x64\x27\xdb\xe9\xb5\x9f\xa8\xed\xd8\xa6\xed\xeb\xbd\xb8\xb1\x82\x59\x21\x71\xa4\x6d\x26\xd7\xce\x03\xb3\xbd\x73\xc9\xfe\x0b\xce\xc3\x0b\x35\x07\x29\x4a\xcb\x23\x87\x6b\x77\x81\x7f\x1f\xee\x8e\x7a\xf2\x9e\xdc\xf5\x47\x37\x7c\xb1\x7c\x07\x00\x00\xff\xff\xf3\x61\xc2\xf9\x62\x01\x00\x00")
 
 func templatesSchematypeGotmplBytes() ([]byte, error) {
 	return bindataRead(
@@ -329,12 +329,12 @@ func templatesSchematypeGotmpl() (*asset, error) {
 		return nil, err
 	}
 
-	info := bindataFileInfo{name: "templates/schematype.gotmpl", size: 188, mode: os.FileMode(420), modTime: time.Unix(1445053809, 0)}
+	info := bindataFileInfo{name: "templates/schematype.gotmpl", size: 354, mode: os.FileMode(420), modTime: time.Unix(1451527963, 0)}
 	a := &asset{bytes: bytes, info: info}
 	return a, nil
 }
 
-var _templatesSchemavalidatorGotmpl = []byte("\x1f\x8b\x08\x00\x00\x09\x6e\x88\x00\xff\xec\x5b\x5b\x93\xd3\xc6\x12\x7e\xf7\xaf\xe8\xe3\xe2\x9c\xb2\xc1\x47\xcb\x43\x2a\x0f\x10\x52\xb5\x81\x25\x71\x05\xd8\x2d\x20\x3c\x84\xa2\xb2\xb3\xf2\xd8\x16\xd1\xc5\x68\x24\x58\xc7\xe5\xff\x9e\x1e\xcd\x68\x34\x1a\x5d\x2c\xd9\xb2\x31\xac\xf7\x65\xa5\xb9\xf4\x74\xf7\x7c\x7d\xb5\xbd\x5a\x4d\xe8\xd4\xf1\x29\xf4\x17\xa1\xe3\x39\x91\xf3\x19\x5f\xa9\x3b\xf9\x4c\x5c\x67\x42\xa2\x20\xec\xaf\xd7\xbd\xd5\xca\x99\x82\xf5\x9a\x7e\x8a\x9d\x90\x4e\x70\x00\x5f\x69\x18\xc2\xa3\x27\x20\xd7\x51\x35\x3b\x58\xad\x80\xaf\xbe\x22\xd1\x1c\xd6\x6b\x7c\xcb\x1e\xa9\xcb\xe8\x7a\xdd\xef\xe3\x93\x8f\x64\x46\x80\xb3\x78\xac\x1f\x4d\xa1\xff\xdf\x4f\x7d\xb0\x5e\x04\x36\x89\x9c\xc0\x07\x39\x89\x84\xfc\x20\x02\x6b\xcc\xce\xfd\xc0\x5f\x7a\x41\xcc\x24\xcd\x5f\x83\xb7\xcb\x05\xc5\x97\x81\x24\x26\x8f\x1d\xb3\x57\xb1\xeb\x92\x1b\x97\xcf\xdd\xc7\x41\x9c\x4c\xb6\x58\xef\x88\x1b\xd3\x8b\xdb\x45\x48\x19\xc3\x23\xd2\x1d\x25\xf4\x87\x92\xe4\xf0\x71\x22\xe5\x7f\x9e\x80\xef\xb8\xb0\xea\x01\x84\x34\x8a\x43\x9f\x8f\xf6\xb8\x56\x24\x71\xa9\x9f\x97\x8e\xff\x82\xfa\xb3\x68\x5e\xae\x20\x35\xdd\x9d\x86\x58\x84\x53\xb3\x41\x7b\xd1\x87\x9c\xb0\xce\xf0\x46\x51\x13\x76\x52\x41\xc9\x6d\xad\xa0\xe9\xf4\xf1\x08\x9a\x31\xdc\x4a\x50\xe4\x36\xa2\xa1\x5f\x2e\xa6\x9c\x3c\x0e\x21\xaf\x71\x5c\x71\x7b\xdd\xee\x36\x1d\xdf\xf1\x62\xaf\x12\xb4\x7c\xb2\x3b\x21\xa7\x6e\x40\xa2\x1f\x7f\xd8\x05\xb3\x82\xdb\xe4\xed\xe2\xd6\x76\x63\x86\x3e\x4b\x0d\xb7\x05\x72\x8d\xe8\x62\xf2\x88\x44\x4f\xb9\x35\x44\x4f\x87\xdb\x89\x1e\xbb\x91\xb3\x70\xe9\xe5\xb4\x42\x7a\x35\x7f\x44\x0a\xd0\x78\x6e\x25\xec\x85\x6f\x5c\x32\x12\x7b\x4d\x6d\x8a\xda\x0b\x5f\x11\x0f\x45\xb0\x52\xc1\xb9\x00\x84\xd9\xf8\xf6\x0f\x05\x8b\x4f\x0a\x99\xb5\xc1\x37\xf1\x74\xea\xdc\xe2\x30\x27\xdb\x75\xb8\x6b\xa5\x95\xa6\x3a\x48\xff\xa7\xa1\x9e\xb9\x8e\x4d\x8d\x08\x0f\x7a\x88\x87\x03\xc6\x78\x53\x2e\x68\x1b\x78\x83\x30\x71\x62\xe3\x88\x7a\x2c\xb1\x69\xf1\x24\xa4\xb2\xc6\xfe\x84\xde\xbe\x23\x61\xe1\x1a\xe5\xdd\xbe\xe1\x2f\x28\x24\x72\x88\xd0\x74\x29\x77\xe8\x25\xaa\x1e\x16\xbd\x66\x72\x4c\xa5\xdb\x4c\x66\xbb\x55\x54\x13\x51\x52\x27\x29\x99\x6b\xeb\x0e\xeb\x64\x92\xb3\x5f\x4b\x26\xc5\x5c\x2b\x99\xfe\xf0\x9d\x4f\x31\xad\x11\x4b\x5b\xd0\xa5\x64\x3b\x58\x6b\x17\x1e\xab\x6b\xd7\xb4\xad\x38\xa9\x53\x93\x16\x29\x5e\xb9\xc1\x26\x23\x99\xbf\x91\xef\xbf\x11\xf6\x4e\x88\x85\x67\xb0\x74\x74\xcc\x7e\x21\x8c\xca\x7c\xbf\x37\xc5\xed\xc8\x50\x0a\x9c\xf5\x9a\xab\xe7\xe1\x63\x63\xec\x27\xa8\x34\x65\x63\xe9\x83\x07\xc8\xfd\x6a\xf5\xc5\x41\xd5\x58\x29\x50\x40\xaf\x3e\x74\xaf\x08\x7c\x94\x7d\x21\x33\xe4\xea\x4f\x1a\x06\x83\x0a\x0f\x06\x2b\x38\x3b\x4b\xb6\x87\x72\x37\x6e\x05\xb0\x03\x3f\x72\xfc\x98\xe2\x8b\x38\x44\x5c\x3a\x7f\xc2\x93\x17\x2e\xde\x27\xaf\xc4\x82\x05\x0d\xa3\x65\xe6\xa1\xc1\xd2\xfc\xf8\x5a\xe9\xd6\xf4\xef\x90\x3a\x78\x8f\x2c\xb4\xcd\x99\x7f\x47\xfd\x9e\x4f\x26\x0e\xd7\x2e\x71\xaf\xc4\x31\x0e\xcd\x6e\xc6\x2a\x9b\xfd\x2a\x51\xa1\x55\xe5\xb7\x9f\xda\x0e\x59\x96\x12\x6f\x7b\xdf\x92\x24\x9e\xa0\x47\x2d\xc1\x5b\x85\xae\x5f\x51\x3a\xd1\x6c\x40\x03\x7c\xe9\xf2\xdf\xe9\x52\xd9\x40\x48\xfc\x19\xad\x88\xa8\x89\x84\x38\x25\x50\x5e\x81\x81\xaf\x81\x7a\xa8\x87\xbd\xe2\x4a\x06\xfc\x82\x1a\x13\x4f\x09\x86\xab\x84\x9c\xaf\x84\x43\x3b\xcb\x5d\x52\x1a\xed\xc1\xcc\xda\x82\x9b\x8f\xd4\x8e\xf4\xb4\xad\x12\xe5\xbd\xb2\x64\x12\x07\x2a\xc0\xa1\xb8\xca\x14\x9d\x8b\x3c\x05\xf3\xb2\x24\x42\xe9\x00\xc1\xe9\x91\x88\x6d\x16\xaf\xc0\xce\x5a\x4f\xe3\x94\xb5\xe1\xa3\xc0\xb1\x75\xee\xba\x97\xd3\xfc\x50\x1e\xad\x8d\xc0\x93\x3f\x44\x3d\x75\x40\x50\x79\x1f\x94\x8c\xf8\x3c\x84\xb1\xb7\x31\x56\x27\xba\x79\xa9\x4c\x14\xad\xe2\xed\xe5\xb3\xcb\x47\xa9\xd7\xc4\x42\x1f\x88\x5a\x06\x4e\xb2\x8e\xcd\x83\xd8\x9d\xc0\x2c\x80\x39\x0d\x31\xeb\x41\xc2\xcb\x20\x06\x46\x29\x44\x73\x87\x21\xd3\x0e\x2a\x89\xf8\xe0\x30\x86\xc6\x84\x34\x49\x04\xf3\x28\x5a\xb0\x47\x67\x67\x33\xb4\xec\xf8\xc6\xb2\x03\xef\x6c\x16\xfc\x9f\xdb\xea\x8c\x86\xfa\x63\xb2\x89\xf5\x0a\xc1\x23\xeb\xff\x99\x02\xab\x6c\x64\xcc\xae\xd2\xe6\xa0\x80\xa8\xae\xa6\xf2\xae\x61\x1a\xb1\xf8\xb5\x0a\x12\x4f\x63\x16\x05\xde\xf3\x04\x2f\x11\x0d\x4d\x42\x76\x32\x2d\xe0\x54\x47\xe6\x3c\x0c\xc9\xd2\xdc\x6c\x14\x34\xc5\x5d\x2f\xc9\xc2\xd8\x92\x0f\x91\xf2\x6a\xd3\x1d\x49\x86\xc2\x9e\x06\xb8\x98\xde\x5e\x26\x76\xa7\xdd\xef\xb8\x26\x88\x66\x07\x98\xe6\x9a\x9c\x51\x53\x93\xd9\x73\xea\x91\x5c\xd4\x36\x3c\xdc\x67\xc2\xe3\x00\xd8\xe8\xb4\x0a\xee\x0b\xde\x7f\x40\x7f\x44\xc3\x29\xb1\xe9\x0a\x43\x46\xec\xdb\x30\x28\x71\x84\x70\x5f\x99\x22\xda\x73\x10\x46\x74\x52\x9a\x79\x0b\xeb\x14\x36\xc9\xc9\x64\x85\xb0\x00\xff\x10\x36\x7b\xd4\x05\xfa\xcf\x11\xb8\xa9\x6f\x14\xed\xad\x11\xdf\x18\xd3\xbc\xe7\x17\xb2\xf3\xb0\x2e\xb4\x34\xe4\x6e\x83\x47\x3d\x11\x78\x2a\x85\x7e\x92\xb9\x1b\x00\xae\x1e\x74\x50\xa8\x89\x5a\xda\xc9\xda\xcc\xbb\x7d\x64\x81\x8f\x35\x80\x47\x42\x36\x27\xee\xe0\xfd\x87\x9b\x25\x7a\xb5\x6b\x24\xc1\x67\x94\xf2\xaf\x87\x23\xf8\x1f\x52\x2f\xfa\x39\xfe\xa7\xf9\x3a\xfe\x2a\xce\xe0\x61\xfb\x2f\x14\x37\x0b\xcd\x9c\xbb\x74\x4b\xb5\x4c\x40\x16\x0b\x54\xf2\xa0\x6a\x05\x92\x1c\xaa\x63\x64\x68\x36\x53\xb2\x12\xfd\x4b\xc5\x8f\x2a\x4f\x2e\x13\x2d\x27\xd8\x7a\x43\x46\x23\x92\x67\xa9\xb0\x2a\xb0\x66\x6b\x5a\x22\xf6\x5e\x0d\x64\xef\x95\x61\x56\x8e\xb6\x40\xad\xe2\x6d\x5b\xe8\xa6\xee\xbe\x01\x7e\x33\x3d\xb4\x06\xb1\x0a\x2a\xed\x90\xac\xdf\xce\x41\xe0\xac\x89\x58\x87\x69\xb5\xac\x73\x60\x6b\xb4\x77\x03\x77\x7d\xd6\xdc\xd0\x4d\x8b\x24\xea\xf8\x7c\xb5\xe2\x6b\xbf\x0e\x3b\x13\xff\x3b\xf3\xda\x9a\x60\x75\x30\x57\xcb\xf6\xe1\xbf\x15\xf1\x1d\x70\xae\x3d\x61\x66\x99\x26\xf8\x8a\x27\x26\x72\x50\x5c\x34\x8f\x3d\xe2\xeb\xa7\x2b\x08\x1b\x2d\x2a\xd0\xda\x3d\x59\xee\x54\xc8\xaa\x2a\xec\xea\x7e\x21\xbc\xec\x6a\x06\x66\xd1\xc2\x11\x3e\xf5\x22\xe4\x7a\xe6\xe0\xe3\x52\x47\x71\x86\xcb\x64\x4c\x14\xa1\x66\x65\x22\x21\x21\x65\xcc\x9a\x59\x46\x1b\x4b\xad\xdc\x25\x97\x16\x14\x3a\xc9\xa7\x0b\xa4\x1a\xe7\xd4\x85\x9d\x8d\xf2\x6a\xa9\x26\x09\x2e\xf9\x5a\xa8\xc0\x74\x2d\xf1\x7a\x6a\xe0\xf3\xc0\xfe\xcc\x61\x36\x57\x8b\xcf\xe9\x3d\xe7\x7a\x11\x37\x3b\x84\x41\x9d\xce\x87\x45\x9f\xd1\xb2\x83\x5a\x5d\xd9\x0a\x9b\x62\x99\xb9\xe3\xcb\x88\x2f\x1a\x6a\x7e\x24\xeb\x71\xe8\xb2\xe7\x7b\x1f\x9b\x0a\xc7\x75\xde\x3b\xb4\xee\x6b\x88\xa6\x76\x8d\x1c\x95\x52\x14\xba\x34\xb2\xcd\x30\x10\xb6\x9c\xb5\x1a\xb4\xde\xec\x50\xb4\x18\x6a\x98\xcd\x31\x39\x98\xe0\xcd\x5f\x11\xfb\x6f\xc2\x61\x20\x9a\x7a\x9c\x44\x83\xd6\xc2\x46\xc6\x75\x75\xeb\xcf\xbb\xd9\x5f\x67\xd6\xb7\xad\xed\x6d\x63\x79\x39\xbb\xab\xb2\xba\x4e\x6d\x6e\x2f\x16\x87\x11\x89\xf7\x27\xda\xa1\xf6\x5b\xb5\x34\x95\x4a\xee\xc4\x53\x92\x43\xf4\xfb\x23\xe8\xdf\x04\x93\x65\x7f\x54\x46\x61\x07\xdb\x12\xcc\xf1\x0f\x59\x78\x82\x05\x3f\xc3\xc3\x42\xba\x11\x84\xcc\xe2\xd1\x3e\x60\x4e\x44\x33\xa0\x5c\xf0\x19\xbe\xcb\xb2\xac\x61\x79\x4a\x52\x06\x53\xf5\x59\x6f\x15\xfe\xcc\x86\x89\x99\x88\xdf\x2b\xff\x38\x7f\x87\x2e\xca\x01\x6a\xd2\xfd\x25\xe6\x0d\xd4\xf1\x9d\x64\xea\x4d\x24\x2d\x4b\xdd\x37\xef\xeb\x32\x97\xd7\x00\x53\xc8\x6c\xf7\xdf\x9f\xa9\x97\xf5\xae\x77\x6d\x9a\x6a\xe7\xbb\xeb\xe5\x34\x16\xbc\xbd\xfd\xec\xa5\xef\x53\x67\x44\x1d\x35\x83\xf2\x1f\x93\xcb\xf4\xa1\x7c\xfc\x14\x89\x24\xcc\x8b\x9f\x88\x1d\x38\x30\x95\x7c\x24\xd7\xce\xe2\x2a\x6e\xf6\x14\xb7\xf6\x1c\xb7\xba\xe9\xc1\xd6\x6b\x64\xeb\xce\xec\x01\xac\x6e\xcf\xdd\xd9\xa6\x8a\xb9\x13\x99\xe0\x86\x4e\x6e\xc3\xcd\xdd\xdb\xd6\xc6\x23\xbb\xe9\xfa\xe2\x5f\x77\x8d\x80\xaa\x96\xf0\xe1\x2c\xa7\x49\x97\x77\xb5\x97\xaf\x3b\x69\x9a\xde\xe2\x6b\x7e\xc6\x55\xe9\x37\x65\x7e\x77\x40\xef\x47\xaf\x6b\xeb\xe6\x4e\xee\xf4\x54\x5e\x9f\xca\xeb\x53\x9a\x72\x2a\xaf\x4f\xe5\xf5\xa9\xbc\x3e\x95\xd7\x47\x14\x89\x4e\xe5\xf5\x29\x6e\x9d\xca\xeb\x53\x79\x7d\xdc\x99\xe0\x9d\x2f\xaf\xbf\x95\x9a\xb8\x6d\x89\xda\xab\xab\x51\x0b\x3f\x3b\xd3\x7f\x9d\xdb\x22\xa8\xdf\x89\x5c\xb9\x55\x20\xef\x20\x3f\xfe\x26\xe3\x76\xc3\xf4\x78\xaf\x89\x70\x87\x39\x6f\xad\x5b\x28\x62\xac\x09\x04\x9b\xb7\xbe\x78\xcb\xc7\xbc\xc3\xac\x05\x64\xce\x94\x7d\xaf\x51\xfc\x3a\x31\xf7\x43\xee\x4d\x3f\x46\xb4\xaa\x39\x97\xaa\xdb\xe4\x83\x4a\x71\x6b\x7e\xdf\xcb\x50\x77\xde\x31\xfd\x1b\x00\x00\xff\xff\xa6\x78\x31\x23\xf8\x48\x00\x00")
+var _templatesSchemavalidatorGotmpl = []byte("\x1f\x8b\x08\x00\x00\x09\x6e\x88\x00\xff\xec\x5b\xdd\x73\xd3\x46\x10\x7f\xcf\x5f\xb1\xf5\xd0\x8e\x0d\xae\xc2\x43\xa7\x0f\x50\x3a\x93\x42\x68\x33\x05\x92\x01\xca\x43\x19\xa6\xb9\xc8\x67\x5b\x54\x1f\x46\x27\x41\x5c\x8f\xff\xf7\xee\xe9\x4e\xa7\xd3\xe9\xc3\x92\x2d\x3b\x09\x28\x2f\x91\xee\x63\x6f\x77\xef\xb7\x9f\xb6\x57\xab\x09\x9d\x3a\x3e\x85\xc1\x22\x74\x3c\x27\x72\x3e\xe3\x2b\x75\x27\x9f\x89\xeb\x4c\x48\x14\x84\x83\xf5\xfa\x68\xb5\x72\xa6\x60\xbd\xa6\x9f\x62\x27\xa4\x13\x1c\xc0\x57\x1a\x86\xf0\xe8\x09\xc8\x75\x54\xcd\x0e\x57\x2b\xe0\xab\x2f\x48\x34\x87\xf5\x1a\xdf\xb2\x47\xea\x32\xba\x5e\x0f\x06\xf8\xe4\x23\x99\x31\xe0\x2c\x1e\xeb\x47\x53\x18\x7c\xff\x69\x00\xd6\x8b\xc0\x26\x91\x13\xf8\x20\x27\x91\x90\x1f\x44\x60\x9d\xb1\x13\x3f\xf0\x97\x5e\x10\x33\x49\xf3\xf7\xe0\xed\x72\x41\xf1\x65\x28\x89\xc9\x63\xcf\xd8\xab\xd8\x75\xc9\x95\xcb\xe7\xee\xe3\x20\x4e\x26\x5b\xac\x77\xc4\x8d\xe9\xe9\xf5\x22\xa4\x8c\xe1\x11\xe9\x8e\x12\xfa\x23\x49\x72\xf4\x38\x91\xf2\xbb\x27\xe0\x3b\x2e\xac\x8e\x00\x42\x1a\xc5\xa1\xcf\x47\x8f\xb8\x56\x24\x71\xa9\x9f\x97\x8e\xff\x82\xfa\xb3\x68\x5e\xae\x20\x35\xdd\x9d\x86\x58\x84\x53\xb3\x61\x7b\xd1\x47\x9c\xb0\xce\xf0\x46\x51\x13\x76\x52\x41\xc9\x75\xad\xa0\xe9\xf4\xed\x11\x34\x63\xb8\x95\xa0\xc8\x6d\x44\x43\xbf\x5c\x4c\x39\x79\x3b\x84\xbc\xc4\x71\xc5\xed\x65\xbb\xdb\x74\x7c\xc7\x8b\xbd\x4a\xd0\xf2\xc9\xee\x84\x9c\xba\x01\x89\x7e\xfe\x69\x17\xcc\x0a\x6e\x93\xb7\xd3\x6b\xdb\x8d\x19\xfa\x2c\x35\xdc\x16\xc8\x35\xa2\x8b\xc9\x5b\x24\x7a\xca\xad\x21\x7a\x3a\xdc\x4e\xf4\xd8\x8d\x9c\x85\x4b\xcf\xa7\x15\xd2\xab\xf9\x5b\xa4\x00\x8d\xe7\x56\xc2\x9e\xfa\xc6\x25\x23\xb1\xd7\xd4\xa6\xa8\xbd\xf0\x15\xf1\x50\x04\x2b\x15\x9c\x0b\x40\x98\x8d\x6f\xff\x51\xb0\xf8\xa4\x90\x59\x1b\x7c\x13\x4f\xa7\xce\x35\x0e\x73\xb2\x5d\x87\xbb\x56\x5a\x69\xaa\x83\xf4\x7f\x1a\xea\x99\xeb\xd8\xd4\x88\xf0\xa0\x87\x78\x38\x60\x8c\x37\xe5\x82\xb6\x81\x37\x08\x13\x27\x76\x16\x51\x8f\x25\x36\x2d\x9e\x84\x54\xd6\x99\x3f\xa1\xd7\xef\x48\x58\xb8\x46\x79\xb7\x6f\xf8\x0b\x0a\x89\x1c\x22\x34\x5d\xca\x1d\x7a\x89\xaa\x47\x45\xaf\x99\x1c\x53\xe9\x36\x93\xd9\x6e\x15\xd5\x44\x94\xd4\x49\x4a\xe6\xda\xba\xc3\x3a\x99\xe4\xec\x4d\xc9\xa4\x98\x6b\x25\xd3\x5f\xbe\xf3\x29\xa6\x35\x62\x69\x0b\xba\x94\x6c\x07\x6b\xed\xc2\x63\x75\xed\x9a\xb6\x15\x27\x75\x6a\xd2\x22\xc5\x2b\x37\xd8\x64\x24\xf3\x37\xf2\xfd\x0f\xc2\xde\x09\xb1\xf0\x0c\x96\x8e\x9e\xb1\xdf\x08\xa3\x32\xdf\x3f\x9a\xe2\x76\x64\x28\x05\xce\x7a\xcd\xd5\xf3\xf0\xb1\x31\xf6\x0b\x54\x9a\xb2\xb1\xf4\xc1\x03\xe4\x7e\xb5\xfa\xe2\xa0\x6a\xac\x14\x28\xa0\x57\x1f\xba\x57\x04\x3e\xca\xbe\x90\x19\x72\xf5\x37\x0d\x83\x61\x85\x07\x83\x15\x1c\x1f\x27\xdb\x43\xb9\x1b\xb7\x02\xd8\x81\x1f\x39\x7e\x4c\xf1\x45\x1c\x22\x2e\x9d\x3f\xe1\xc9\x0b\x17\xef\x93\x57\x62\xc1\x82\x86\xd1\x32\xf3\xd0\x60\x69\x7e\x7c\xad\x74\x6b\xfa\x77\x48\x1d\xbc\x47\x16\xda\xe6\xcc\xbf\xa3\x7e\x4f\x26\x13\x87\x6b\x97\xb8\x17\xe2\x18\x87\x66\x37\x63\x95\xcd\xde\x48\x54\x68\x55\xf9\xed\xa7\xb6\x43\x96\xa5\xc4\xdb\xde\xb7\x24\x89\x27\xe8\x51\x4b\xf0\x56\xa1\xeb\x57\x94\x4e\x34\x1b\xd0\x00\x5f\xba\xfc\x4f\xba\x54\x36\x10\x12\x7f\x46\x2b\x22\x6a\x22\x21\x4e\x09\x94\x57\x60\xe0\x26\x50\x0f\xf5\xb0\x57\x5c\xc9\x80\x5f\x50\x63\xe2\x29\xc1\x70\x95\x90\xf3\x95\x70\x68\x67\xb9\x4b\x4a\xa3\x3d\x98\x59\x5b\x70\xf5\x91\xda\x91\x9e\xb6\x55\xa2\xfc\xa8\x2c\x99\xc4\x81\x0a\x70\x28\xae\x32\x45\xe7\x22\x4f\xc1\xbc\x2c\x89\x50\x3a\x44\x70\x7a\x24\x62\x9b\xc5\x2b\xb0\xb3\xd6\xd3\x38\x65\x6d\xf8\x28\x70\x6c\x9d\xb8\xee\xf9\x34\x3f\x94\x47\x6b\x23\xf0\xe4\x0f\x51\x4f\x1d\x10\x54\xde\x07\x25\x23\x3e\x0f\x61\xec\x6d\x8c\xd5\x89\x6e\x5e\x2a\x13\x45\xab\x78\x7b\xfe\xec\xfc\x51\xea\x35\xb1\xd0\x07\xa2\x96\x81\x93\xac\x63\xf3\x20\x76\x27\x30\x0b\x60\x4e\x43\xcc\x7a\x90\xf0\x32\x88\x81\x51\x0a\xd1\xdc\x61\xc8\xb4\x83\x4a\x22\x3e\x38\x8c\xa1\x31\x21\x4d\x12\xc1\x3c\x8a\x16\xec\xd1\xf1\xf1\x0c\x2d\x3b\xbe\xb2\xec\xc0\x3b\x9e\x05\x3f\x72\x5b\x9d\xd1\x50\x7f\x4c\x36\xb1\xa3\x42\xf0\xc8\xfa\x7f\xa6\xc0\x2a\x1b\x39\x63\x17\x69\x73\x50\x40\x54\x57\x53\x79\xd7\x30\x8d\x58\xfc\x5a\x05\x89\xa7\x31\x8b\x02\xef\x79\x82\x97\x88\x86\x26\x21\x3b\x99\x16\x70\xaa\x23\x73\x12\x86\x64\x69\x6e\x36\x0a\x9a\xe2\xae\x97\x64\x61\x6c\xc9\x87\x48\x79\xb5\xe9\x8e\x24\x43\x61\x4f\x03\x5c\x4c\xaf\xcf\x13\xbb\xd3\xee\xf7\xac\x26\x88\x66\x07\x98\xe6\x9a\x9c\x51\x53\x93\xd9\x73\xea\x91\x5c\xd4\x36\x3c\xdc\x67\xc2\xe3\x00\xd8\xe8\xb4\x0a\xee\x0b\xde\x7f\x40\x7f\x44\xc3\x29\xb1\xe9\x0a\x43\x46\xec\xdb\x30\x2c\x71\x84\x70\x5f\x99\x22\xda\x73\x10\x46\x74\x52\x9a\x79\x0b\xeb\x14\x36\xc9\xc9\x64\x85\xb0\x00\xff\x08\x36\x7b\xd4\x05\xfa\xcf\x31\xb8\xa9\x6f\x14\xed\xad\x31\xdf\x18\xd3\xbc\xe7\x9f\x20\xdc\xa7\x53\x3a\x79\x93\xe8\x80\x87\x77\xa1\xad\x11\x77\x1f\x3c\xfa\x89\x00\x54\x29\xfc\x93\xcc\xed\x00\x70\x35\xa1\xa3\x42\x8d\x34\x3a\x23\xd9\x93\x79\xbb\x8f\x2c\xf0\xb1\x26\xf0\x48\xc8\xe6\xc4\x1d\xbe\xff\x70\xb5\x44\x2f\x77\x89\xa4\xf8\x8c\xba\x8c\xcb\xd1\x18\x7e\xc0\x53\x8a\x7e\x8f\xff\x69\xbe\x8f\xbf\x8a\x33\x78\x18\xff\x07\xc5\xcf\x42\x35\xe7\x32\xdd\x52\x2d\x1b\x90\xc5\x02\x95\x3e\xac\x5a\x81\x24\x47\xea\x18\x19\xaa\xcd\x14\xad\xe4\x3e\xe4\x45\x8c\x2b\x4f\x2e\x13\x2d\x27\xd8\x7a\x43\x86\x23\x92\x69\xa9\xb0\x2a\xf0\x66\x6b\x5a\x22\xf8\x5e\x0d\x84\xef\x95\x61\x58\x8e\xb6\x40\xb1\xe2\x6d\x57\x28\xa7\x61\xa0\x01\x9e\x33\x7d\x6c\x0d\x6a\x15\x74\xda\x21\x5b\xbf\xad\x83\xc0\x5b\x13\xb5\x0e\xe3\x6a\x59\xe7\x40\xd7\x68\xef\x06\xf6\xfa\xac\xba\xa1\x1b\x17\x49\xd6\xed\xf3\xe5\x8a\xaf\xc3\x38\xf4\x4c\x0d\x5f\xa9\x57\xd7\x04\xac\x83\xbd\x5a\xb6\x0f\xff\xae\x88\xef\x80\x7b\xed\x09\x33\xd1\xb4\x20\x50\x3c\x31\x91\xb3\xe2\xa2\x79\xec\x11\x5f\x3f\x5d\x41\xda\x68\x69\x81\xd6\x1e\xca\x72\xad\x42\x16\x56\x61\x67\xf7\x0b\xe1\x67\x57\xb3\x30\x8b\x1c\x8e\xf8\xa9\x17\x21\xd7\x33\x07\x1f\x97\x3a\x9a\x33\x7c\x26\x63\xa2\x68\x35\x2b\x19\x09\x09\x29\x63\xd6\xfc\x32\xda\x5e\x6a\xe5\x2e\xb9\xb7\xa0\xd0\x49\xfe\x5d\x20\xd5\x38\x07\x2f\xec\x6c\x94\x87\x4b\x35\x49\x70\xc9\xd7\x42\xc5\xa6\x6b\x89\xd7\x5f\x43\x9f\x07\xfe\x67\x0e\xb3\xb9\x5a\x7c\x4e\xef\x39\xd7\x8b\xb8\xd9\x11\x0c\xeb\x74\x3e\x2a\xfa\x8c\x96\x1d\xd7\xea\x4a\x58\xd8\x14\xcb\xcc\x1d\x5f\xc6\x7c\xd1\x48\xf3\x23\x59\x4f\x44\x97\x3d\xdf\x2b\xd9\x54\x68\xae\xf3\xde\xa1\x75\x1f\x44\x34\xc1\x6b\xe4\xa8\x94\xa2\xd0\xd5\x91\x6d\x89\xa1\xb0\xe5\xac\x35\xa1\xf5\x72\x47\xa2\x25\x51\xc3\x6c\x8e\xc9\xe1\x04\x6f\xfe\x82\xd8\xff\x12\x0e\x03\xd1\x04\xe4\x24\x1a\xb4\x22\x36\x32\xae\xab\x5b\x7f\xde\xcd\xfe\x3a\xb3\xbe\x6d\x6d\x6f\x1b\xcb\xcb\xd9\x5d\x95\xd5\x75\x6a\x73\x7b\xb1\x38\x8c\x48\xbc\x9f\xd1\x0e\xb5\x77\xd5\xd2\x54\x6a\xb9\x13\x4f\x49\x0e\x31\x18\x8c\x61\x70\x15\x4c\x96\x83\x71\x19\x85\x1d\x6c\x4b\x30\xc7\x3f\x94\xe1\x09\x16\xfc\x0a\x0f\x0b\xe9\x46\x10\x32\x8b\x47\xfb\x80\x39\x11\xcd\x80\x72\xca\x67\xf8\x2e\xcb\xb2\x46\xe5\x29\x49\x19\x4c\xd5\x67\xc3\x55\xf8\x33\x1b\x2c\x66\x62\x7e\xaf\xfc\xe3\xff\x1d\xba\x2e\x07\xa8\x59\xf7\x9f\xa8\x37\x50\xcb\x57\x96\xb9\x37\x91\xb8\x2c\x95\xdf\xbc\xaf\xcb\xdc\x5e\x03\x50\x21\xd3\xdd\x7f\x3f\xa7\x5e\xd6\xbe\xcb\xd3\x4e\x4b\x5f\x6d\xef\xa7\xb1\x02\xda\xdb\xd3\x5e\xfa\x44\x75\x46\xd5\x51\xf3\x28\xff\xb1\xbb\x4c\x2f\xca\xc7\xfb\x48\x65\xc0\xbd\xf8\x49\xdb\x0d\x05\xae\x92\x8f\xfc\xda\x59\x60\xc5\x4d\xf7\x71\x6d\xcf\x71\xad\x9b\x1e\x6e\xbd\x46\xb6\xee\xec\x1e\xc0\x0a\x0f\xd4\xdd\x6d\xaa\xa0\x6f\x2a\x73\xdc\xd0\x09\x6e\xb8\xb9\x7b\x5b\xdb\x78\x64\x37\x5d\x63\xfc\xeb\xae\x91\x50\xd5\x52\x3e\x9c\x25\x35\xe9\x12\xaf\xf6\xf2\xf5\x2a\x4d\xd3\x5b\x7c\xad\xd0\xb8\x2a\xfd\xa6\xcc\xef\x2a\xe8\xfd\xec\x75\x6d\xdd\xdd\xc9\x9d\xf6\xe5\x79\x5f\x9e\xf7\x69\x4c\x5f\x9e\xf7\xe5\x79\x5f\x9e\xf7\xe5\xf9\x1d\x8c\x54\x7d\x79\xde\xc7\xb5\xbe\x3c\xef\xcb\xf3\xbb\x99\x39\x7e\xf3\xe5\xf9\x5d\xa9\xa9\xdb\x96\xb8\x47\x75\x35\x6e\xe1\x67\x72\xfa\xaf\x89\x5b\x04\xfd\x6f\x2a\xb7\x6e\x15\xe8\x3b\xcc\xa7\xef\x64\x5c\x6f\x98\x4e\xef\x35\x71\xee\x30\x47\xae\x75\x13\x45\xcc\x35\x81\x64\xf3\x56\x1a\x6f\x21\x99\x77\x98\xb5\x94\xcc\x99\xb2\xef\x59\x8a\x5f\x57\xe6\x7e\x88\xbe\xe9\xc7\x94\x56\x35\xe7\x52\x75\x9b\x7c\x52\x29\x6e\xcd\xef\x9f\x19\xea\xce\x3b\xaa\xff\x03\x00\x00\xff\xff\x93\x49\x47\x01\xb8\x49\x00\x00")
 
 func templatesSchemavalidatorGotmplBytes() ([]byte, error) {
 	return bindataRead(
@@ -349,7 +349,7 @@ func templatesSchemavalidatorGotmpl() (*asset, error) {
 		return nil, err
 	}
 
-	info := bindataFileInfo{name: "templates/schemavalidator.gotmpl", size: 18680, mode: os.FileMode(420), modTime: time.Unix(1451454590, 0)}
+	info := bindataFileInfo{name: "templates/schemavalidator.gotmpl", size: 18872, mode: os.FileMode(420), modTime: time.Unix(1451528418, 0)}
 	a := &asset{bytes: bytes, info: info}
 	return a, nil
 }
diff --git a/generator/model.go b/generator/model.go
index 9054083a..daab1797 100644
--- a/generator/model.go
+++ b/generator/model.go
@@ -518,6 +518,13 @@ func (sg *schemaGenContext) buildProperties() error {
 	if Debug {
 		log.Printf("building properties %s (parent: %s)", sg.Name, sg.Container)
 	}
+	//var discriminatorField string
+	//if sg.Discrimination != nil {
+	//dis, ok := sg.Discriminated["#/definitions/"+sg.Container]
+	//if ok {
+
+	//}
+	//}
 	for k, v := range sg.Schema.Properties {
 		if Debug {
 			bbb, _ := json.MarshalIndent(sg.Schema, "", "  ")
diff --git a/generator/templates/schematype.gotmpl b/generator/templates/schematype.gotmpl
index 71f74421..f51f78d2 100644
--- a/generator/templates/schematype.gotmpl
+++ b/generator/templates/schematype.gotmpl
@@ -1 +1,2 @@
 {{ define "schemaType" }}{{ if and (or ((len .AllOf) gt 0) .IsAnonymous) ( not .IsMap) }}{{ template "schemaBody" . }}{{ else }}{{ if .IsNullable }}*{{ end }}{{ .GoType }}{{end}}{{ end }}
+{{ define "dereffedSchemaType" }}{{ if and (or ((len .AllOf) gt 0) .IsAnonymous) ( not .IsMap) }}{{ template "schemaBody" . }}{{ else }}{{ .GoType }}{{end}}{{ end }}
diff --git a/generator/templates/schemavalidator.gotmpl b/generator/templates/schemavalidator.gotmpl
index 17831d44..5d7b955e 100644
--- a/generator/templates/schemavalidator.gotmpl
+++ b/generator/templates/schemavalidator.gotmpl
@@ -133,9 +133,9 @@ if err := {{.ValueExpression}}.Validate(formats); err != nil {
 {{end}}
 {{define "schemavalidator" }}{{ if .Enum }}
 var {{ camelize .Name }}Enum []interface{}
-func ({{ .ReceiverName }} *{{ if .IsExported }}{{ pascalize .Name}}{{ else }}{{ .Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "schemaType" . }}) error {
+func ({{ .ReceiverName }} *{{ if .IsExported }}{{ pascalize .Name}}{{ else }}{{ .Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "dereffedSchemaType" . }}) error {
   if {{ camelize .Name }}Enum == nil {
-    var res []{{ template "schemaType" . }}
+    var res []{{ template "dereffedSchemaType" . }}
     if err := json.Unmarshal([]byte(`{{ json .Enum }}`), &res); err != nil {
       return err
     }
@@ -149,9 +149,9 @@ func ({{ .ReceiverName }} *{{ if .IsExported }}{{ pascalize .Name}}{{ else }}{{
   return nil
 }
 {{ end }}{{ if .ItemsEnum }}var {{ camelize .Name }}ItemsEnum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "schemaType" .Items }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "dereffedSchemaType" .Items }}) error {
   if {{ camelize .Name }}ItemsEnum == nil {
-    var res []{{ template "schemaType" .Items }}
+    var res []{{ template "dereffedSchemaType" .Items }}
     if err := json.Unmarshal([]byte(`{{ json .ItemsEnum }}`), &res); err != nil {
       return err
     }
@@ -167,9 +167,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
 {{ end }}{{ with .AdditionalProperties }}
 {{ if .Enum }}
 var {{ camelize .Name }}ValueEnum []interface{}
-func ({{ .ReceiverName }} *{{ if .IsExported }}{{ pascalize .Name}}{{ else }}{{ .Name }}{{ end }}) validate{{ pascalize .Name }}ValueEnum(path, location string, value {{ template "schemaType" . }}) error {
+func ({{ .ReceiverName }} *{{ if .IsExported }}{{ pascalize .Name}}{{ else }}{{ .Name }}{{ end }}) validate{{ pascalize .Name }}ValueEnum(path, location string, value {{ template "dereffedSchemaType" . }}) error {
   if {{ camelize .Name }}ValueEnum == nil {
-    var res []{{ template "schemaType" . }}
+    var res []{{ template "dereffedSchemaType" . }}
     if err := json.Unmarshal([]byte(`{{ json .Enum }}`), &res); err != nil {
       return err
     }
@@ -245,9 +245,9 @@ func ({{.ReceiverName}} {{ if or .IsTuple .IsComplexObject .IsAdditionalProperti
 }
 {{range .Properties}}
 {{if or .Required .HasValidations}}{{ if .Enum }}var {{ camelize $.Name }}{{ pascalize .Name }}Enum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "schemaType" . }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "dereffedSchemaType" . }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}Enum == nil {
-    var res []{{ template "schemaType" . }}
+    var res []{{ template "dereffedSchemaType" . }}
     if err := json.Unmarshal([]byte(`{{ json .Enum }}`), &res); err != nil {
       return err
     }
@@ -261,9 +261,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
   return nil
 }
 {{ end }}{{ if .ItemsEnum }}var {{ camelize $.Name }}{{ pascalize .Name }}ItemsEnum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "schemaType" .Items }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "dereffedSchemaType" .Items }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}ItemsEnum == nil {
-    var res []{{ template "schemaType" .Items }}
+    var res []{{ template "dereffedSchemaType" .Items }}
     if err := json.Unmarshal([]byte(`{{ json .ItemsEnum }}`), &res); err != nil {
       return err
     }
@@ -277,9 +277,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
   return nil
 }
 {{ end }}{{ if .AdditionalItems}}{{ if .AdditionalItems.Enum }}var {{ camelize $.Name }}{{ pascalize .Name }}Enum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "schemaType" .AdditionalItems }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "dereffedSchemaType" .AdditionalItems }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}Enum == nil {
-    var res []{{ template "schemaType" .AdditionalItems }}
+    var res []{{ template "dereffedSchemaType" .AdditionalItems }}
     if err := json.Unmarshal([]byte(`{{ json .AdditionalItems.Enum }}`), &res); err != nil {
       return err
     }
@@ -295,9 +295,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
 {{ end }}{{ end }}{{ with .AdditionalProperties }}
 {{ if .Enum }}
 var {{ camelize $.Name }}{{ pascalize .Name }}ValueEnum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ValueEnum(path, location string, value {{ template "schemaType" . }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ValueEnum(path, location string, value {{ template "dereffedSchemaType" . }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}ValueEnum == nil {
-    var res []{{ template "schemaType" . }}
+    var res []{{ template "dereffedSchemaType" . }}
     if err := json.Unmarshal([]byte(`{{ json .Enum }}`), &res); err != nil {
       return err
     }
@@ -330,9 +330,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
 {{range .AllOf}}
 {{range .Properties}}
 {{if and (ne $.DiscriminatorField .Name) (or .Required .HasValidations) }}{{ if .Enum }}var {{ camelize $.Name }}{{ pascalize .Name }}Enum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "schemaType" . }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "dereffedSchemaType" . }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}Enum == nil {
-    var res []{{ template "schemaType" . }}
+    var res []{{ template "dereffedSchemaType" . }}
     if err := json.Unmarshal([]byte(`{{ json .Enum }}`), &res); err != nil {
       return err
     }
@@ -346,9 +346,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
   return nil
 }
 {{ end }}{{ if .ItemsEnum }}var {{ camelize $.Name }}{{ pascalize .Name }}ItemsEnum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "schemaType" .Items }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "dereffedSchemaType" .Items }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}ItemsEnum == nil {
-    var res []{{ template "schemaType" .Items }}
+    var res []{{ template "dereffedSchemaType" .Items }}
     if err := json.Unmarshal([]byte(`{{ json .ItemsEnum }}`), &res); err != nil {
       return err
     }
@@ -362,9 +362,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
   return nil
 }
 {{ end }}{{ if .AdditionalItems}}{{ if .AdditionalItems.Enum }}var {{ camelize $.Name }}{{ pascalize .Name }}Enum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "schemaType" .AdditionalItems }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}Enum(path, location string, value {{ template "dereffedSchemaType" .AdditionalItems }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}Enum == nil {
-    var res []{{ template "schemaType" .AdditionalItems }}
+    var res []{{ template "dereffedSchemaType" .AdditionalItems }}
     if err := json.Unmarshal([]byte(`{{ json .AdditionalItems.Enum }}`), &res); err != nil {
       return err
     }
@@ -380,9 +380,9 @@ func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{
 {{ end }}{{ end }}{{ with .AdditionalProperties }}
 {{ if .Enum }}
 var {{ camelize $.Name }}{{ pascalize .Name }}ValueEnum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ValueEnum(path, location string, value {{ template "schemaType" . }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ValueEnum(path, location string, value {{ template "dereffedSchemaType" . }}) error {
   if {{ camelize $.Name }}{{ pascalize .Name }}ValueEnum == nil {
-    var res []{{ template "schemaType" . }}
+    var res []{{ template "dereffedSchemaType" . }}
     if err := json.Unmarshal([]byte(`{{ json .Enum }}`), &res); err != nil {
       return err
     }
@@ -409,9 +409,9 @@ func ({{.ReceiverName}} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{
 {{end}}
 {{if .HasAdditionalItems }}
 {{ if .AdditionalItems.Enum }}var {{ camelize .Name }}ItemsEnum []interface{}
-func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "schemaType" .AdditionalItems }}) error {
+func ({{ .ReceiverName }} *{{ if $.IsExported }}{{ pascalize $.Name}}{{ else }}{{  $.Name }}{{ end }}) validate{{ pascalize .Name }}ItemsEnum(path, location string, value {{ template "dereffedSchemaType" .AdditionalItems }}) error {
   if {{ camelize .Name }}ItemsEnum == nil {
-    var res []{{ template "schemaType" .AdditionalItems }}
+    var res []{{ template "dereffedSchemaType" .AdditionalItems }}
     if err := json.Unmarshal([]byte(`{{ json .AdditionalItems.Enum }}`), &res); err != nil {
       return err
     }
