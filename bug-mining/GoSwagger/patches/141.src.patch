diff --git a/cmd/swagger/commands/version_number.go b/cmd/swagger/commands/version_number.go
index bdbbb375..e1dbd377 100644
--- a/cmd/swagger/commands/version_number.go
+++ b/cmd/swagger/commands/version_number.go
@@ -1,6 +1,6 @@
 package commands
 
 func init() {
-  Version = "0.4.0-31-ga7c264a"
+  Version = "0.4.0-39-g2fcbae8"
 }
 
diff --git a/examples/todo-list/restapi/server.go b/examples/todo-list/restapi/server.go
index 63a4c9bf..5d8c0821 100644
--- a/examples/todo-list/restapi/server.go
+++ b/examples/todo-list/restapi/server.go
@@ -12,6 +12,7 @@ import (
 	graceful "github.com/tylerb/graceful"
 
 	"github.com/go-swagger/go-swagger/examples/todo-list/restapi/operations"
+	"github.com/go-swagger/go-swagger/swag"
 )
 
 //go:generate swagger generate server -t ../.. -A TodoList -f ./swagger.yml
@@ -38,8 +39,11 @@ type Server struct {
 	TLSCertificate    flags.Filename `long:"tls-certificate" description:"the certificate to use for secure connections" required:"true" env:"TLS_CERTIFICATE"`
 	TLSCertificateKey flags.Filename `long:"tls-key" description:"the private key to use for secure conections" required:"true" env:"TLS_PRIVATE_KEY"`
 
-	api     *operations.TodoListAPI
-	handler http.Handler
+	api           *operations.TodoListAPI
+	handler       http.Handler
+	domainSocketL net.Listener
+	httpServerL   net.Listener
+	httpsServerL  net.Listener
 }
 
 // SetAPI configures the server with the specified API. Needs to be called before Serve
@@ -57,34 +61,28 @@ func (s *Server) SetAPI(api *operations.TodoListAPI) {
 // Serve the api
 func (s *Server) Serve() (err error) {
 
-	domainSocket := &graceful.Server{Server: new(http.Server)}
-	domainSocket.Handler = s.handler
-	domSockListener, err := net.Listen("unix", string(s.SocketPath))
-	if err != nil {
+	if err := s.Listen(); err != nil {
 		return err
 	}
+	domainSocket := &graceful.Server{Server: new(http.Server)}
+	domainSocket.Handler = s.handler
 
 	fmt.Printf("serving todo list at unix://%s\n", s.SocketPath)
-	go func() {
-		if err := domainSocket.Serve(domSockListener); err != nil {
+	go func(l net.Listener) {
+		if err := domainSocket.Serve(l); err != nil {
 			log.Fatalln(err)
 		}
-	}()
+	}(s.domainSocketL)
 
 	httpServer := &graceful.Server{Server: new(http.Server)}
 	httpServer.Handler = s.handler
 
-	listener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.Host, s.Port))
-	if err != nil {
-		return err
-	}
-
-	fmt.Printf("serving todo list at http://%s\n", listener.Addr())
-	go func() {
-		if err := httpServer.Serve(tcpKeepAliveListener{listener.(*net.TCPListener)}); err != nil {
+	fmt.Printf("serving todo list at http://%s\n", s.httpServerL.Addr())
+	go func(l net.Listener) {
+		if err := httpServer.Serve(tcpKeepAliveListener{l.(*net.TCPListener)}); err != nil {
 			log.Fatalln(err)
 		}
-	}()
+	}(s.httpServerL)
 
 	httpsServer := &graceful.Server{Server: new(http.Server)}
 	httpsServer.Handler = s.handler
@@ -101,17 +99,52 @@ func (s *Server) Serve() (err error) {
 	if s.TLSHost == "" {
 		s.TLSHost = s.Host
 	}
-	tlsListener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.TLSHost, s.TLSPort))
+
+	fmt.Printf("serving todo list at https://%s\n", s.httpsServerL.Addr())
+	wrapped := tls.NewListener(tcpKeepAliveListener{s.httpsServerL.(*net.TCPListener)}, httpsServer.TLSConfig)
+	if err := httpsServer.Serve(wrapped); err != nil {
+		return err
+	}
+
+	return nil
+}
+
+// Listen creates the listeners for the server
+func (s *Server) Listen() error {
+	domSockListener, err := net.Listen("unix", string(s.SocketPath))
 	if err != nil {
 		return err
 	}
+	s.domainSocketL = domSockListener
 
-	fmt.Printf("serving todo list at https://%s\n", tlsListener.Addr())
-	wrapped := tls.NewListener(tcpKeepAliveListener{tlsListener.(*net.TCPListener)}, httpsServer.TLSConfig)
-	if err := httpsServer.Serve(wrapped); err != nil {
+	listener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.Host, s.Port))
+	if err != nil {
+		return err
+	}
+
+	h, p, err := swag.SplitHostPort(listener.Addr().String())
+	if err != nil {
 		return err
 	}
+	s.Host = h
+	s.Port = p
+	s.httpServerL = listener
 
+	if s.TLSHost == "" {
+		s.TLSHost = s.Host
+	}
+	tlsListener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.TLSHost, s.TLSPort))
+	if err != nil {
+		return err
+	}
+
+	sh, sp, err := swag.SplitHostPort(tlsListener.Addr().String())
+	if err != nil {
+		return err
+	}
+	s.TLSHost = sh
+	s.TLSPort = sp
+	s.httpsServerL = tlsListener
 	return nil
 }
 
diff --git a/generator/bindata.go b/generator/bindata.go
index 6e8a1f37..e25c7fac 100644
--- a/generator/bindata.go
+++ b/generator/bindata.go
@@ -130,7 +130,7 @@ func templatesClientClientGotmpl() (*asset, error) {
 		return nil, err
 	}
 
-	info := bindataFileInfo{name: "templates/client/client.gotmpl", size: 2547, mode: os.FileMode(420), modTime: time.Unix(1456930339, 0)}
+	info := bindataFileInfo{name: "templates/client/client.gotmpl", size: 2547, mode: os.FileMode(420), modTime: time.Unix(1457192837, 0)}
 	a := &asset{bytes: bytes, info: info}
 	return a, nil
 }
@@ -495,7 +495,7 @@ func templatesServerResponsesGotmpl() (*asset, error) {
 	return a, nil
 }
 
-var _templatesServerServerGotmpl = []byte("\x1f\x8b\x08\x00\x00\x09\x6e\x88\x00\xff\xb4\x58\xe1\x6f\xdb\xba\x11\xff\x2c\xfd\x15\x9c\xf6\xba\x49\x41\x4c\xbf\x60\xd8\x87\x79\xe8\x87\x20\x6b\xd1\xa0\x5d\x6b\xd4\xc1\xc3\x86\xae\x70\x19\xe9\x6c\x6b\x91\x49\x95\xa4\xe2\x7a\x46\xfe\xf7\xdd\x91\x94\x25\xbb\x72\xda\x04\x78\x02\x0c\x59\xe4\xf1\xee\x77\xc7\x1f\xef\x4e\xaa\x45\x7e\x27\x96\xc0\x76\x3b\xc6\x2f\xa7\xd7\xd3\xf0\xf8\xf0\x10\xc7\xe5\xba\x56\xda\xb2\x34\x8e\x92\x5c\x6f\x6b\xab\xc6\xb6\x32\x09\x3e\x2d\xd6\x96\x6e\x95\x5a\xd2\x4d\x82\x0d\xb7\xf1\xca\xda\x9a\xfe\xdb\x72\x0d\x49\x1c\x47\x8b\x4a\x2c\x0d\x4b\x96\xa5\x5d\x35\xb7\x3c\x57\xeb\xf1\x7f\xc1\x18\xb8\x2f\xee\xc6\x4b\x35\x72\xb3\x28\xbe\xd4\x22\x87\x45\x53\x1d\x08\xda\x6d\x05\xfa\x76\xdc\xce\xa1\x36\x46\x18\xb5\x90\x88\x8e\xff\x03\x16\xa2\xa9\xec\xb5\x43\x68\x10\x2d\x4e\xd5\xba\x94\x76\xc1\x92\x17\x5f\x13\xc6\xc9\x01\xb7\x00\x64\xb1\xff\xef\x17\xff\x72\x07\xdb\x73\xf6\xcb\xbd\xa8\x1a\x60\x93\x97\x8c\x1f\x68\xa1\x59\xfc\xc7\x8e\x14\x06\xf1\x23\xad\x59\x1c\x8f\xd1\x93\xc9\x12\x24\x68\x61\x81\x99\x8d\x58\x2e\x41\xb3\x6e\x00\xf4\x3d\x3e\x8f\x2c\xe3\x7c\xcc\x39\x1b\x5d\x3a\xcd\xc2\xe4\xa2\x2a\xff\x87\x9e\xbc\x17\x6b\x52\xcb\x46\x0b\xc6\xc7\x61\x39\xdf\xae\x2b\xd2\xcc\xde\xc3\x66\xe6\x15\xe4\x1a\x50\x9d\x61\x82\x49\xd8\x30\x51\x97\xa4\x66\xd5\xac\x85\x3c\xd0\xe2\xcd\xc5\x8b\x46\xe6\xdd\xe2\x94\xc4\xcf\x68\x83\xbb\xdd\xe5\x83\x28\x90\x00\x19\x3b\x0b\x26\x77\x71\x64\x28\x3e\x68\x30\xf5\x43\x19\x8e\x70\x52\xf6\x92\x10\xc4\x51\xb9\x70\x48\xfe\x80\x32\x65\x45\xf2\x38\xbd\x12\xb2\xc0\x9d\x43\x91\x5c\xc9\x45\xb9\x6c\x34\xa0\x56\x82\x80\xab\x1f\xe2\x48\x83\x6d\xb4\x64\x26\x7e\x70\x1e\x06\x5b\x0b\xa5\x99\x5d\xc1\xb0\x53\xb8\x3e\xb6\xdb\x1a\x5a\x61\x63\x75\x93\x5b\xb6\x23\x69\x84\x90\xa2\x21\x2b\x4a\x69\x18\x7f\xf5\xcd\x6a\x31\xcb\x57\xb0\xc6\x50\x25\x8d\x2c\xbf\x25\x99\xdf\xb3\x99\xca\xef\xc0\x4e\x85\x5d\x31\x47\x3b\xfe\xba\xac\x40\x92\x81\x2f\x95\x92\xcb\x49\x62\x9c\xc0\xa8\x46\x89\x84\x15\x60\x72\x5d\xd6\xb6\x54\x72\x92\x10\x2e\x52\xc5\xbc\x08\xb3\x8a\x55\xa5\xb1\x20\x99\x92\x24\xea\x98\x38\x49\xc6\xf7\x42\x8f\x75\x23\xc7\x88\xaa\x10\x66\x05\xba\xef\x04\xa7\xc5\xc9\x97\x38\xda\x93\x27\x80\x5f\x09\x73\x2d\x0d\xe4\x18\x27\xc6\x03\x74\x87\x39\x7a\xa3\x8c\x25\x5f\x4b\xb9\x6c\x41\xae\x70\x68\x00\xdd\xf5\xf4\x14\xa8\x4a\xe1\x0e\xfb\x55\x20\xef\x27\xc9\x9b\x0f\xb3\x1b\x42\x31\xa5\x83\x8d\xec\x66\x78\x05\xdd\x74\x06\x06\x74\xbb\x14\xd0\xd7\xee\xf6\xaa\x6c\x21\x63\xec\x25\xe4\x24\x6e\xce\x5b\xb3\x86\xe4\x05\x9d\xb6\x42\xad\x99\x3b\x38\xc1\xfc\xf4\xc3\x47\x34\x3f\x10\x82\xd9\x40\x00\xe2\xe8\xe6\xdd\xcc\x05\xa1\xbb\x42\x38\xda\x2b\x40\xc7\xb4\x34\xfa\xb9\xd0\x78\xa2\x55\x88\x75\xb3\xc2\x01\xa9\x30\xc2\x35\xe4\xe5\xa2\x84\x82\x95\xf6\xcf\xc6\xb1\xd0\xd0\x9e\x09\xc3\x46\xa3\x5e\xe8\x10\xcc\xbc\x0d\x1f\xfe\x77\x11\xec\xae\x10\xcb\x01\x60\x4f\x8a\xeb\xb3\xa2\x4a\xc8\x7c\x64\x1d\xb2\x2b\xd0\x16\x1d\xca\x29\xfd\xe0\x35\x4c\x77\x42\x96\x77\x82\x03\x00\x7b\xb3\x64\xb9\x31\x70\x02\x61\xc2\x34\x7c\x6d\x4a\x0d\x05\x2e\xd4\x07\xa8\xae\x5e\x7d\xbc\xb9\x7e\x7d\x7d\x75\x79\xf3\xea\x7b\x70\x6f\x31\xd1\x9e\x06\x87\x69\x78\x28\x6a\xba\xbc\x27\x40\x94\xa4\x07\x41\xfd\x18\xd3\xf4\xe3\xf5\x6f\x88\x67\xfe\xf6\xd5\xbf\x93\x2f\xbd\x5c\xee\x8e\x26\xd2\x11\x93\x48\x5e\x35\x05\xcc\x90\x17\x38\xee\x6e\x27\x52\x06\x4e\x0d\x60\x6c\x6b\x40\x20\x16\xba\x8a\x53\x84\xd6\x25\xe7\x1e\xfd\xe3\x88\xb2\xe7\xe1\x75\xa6\x6a\x2a\x1c\xe4\xc3\xc9\x14\x1d\x47\x6d\x92\xed\x2e\xaa\xbc\xfc\x8d\x1f\xde\xa7\x56\x8b\xc2\x5d\x1a\x0e\xdc\xf6\x39\x74\x83\x95\xd6\x3f\xef\xe9\x8f\xc2\x1c\x8b\x06\x14\x8e\x69\xb7\x18\x4e\x51\x55\x38\x7e\x0b\x18\xe2\x90\x7c\x7d\x65\x49\x4d\x5b\x24\xb2\x60\xe5\x89\x25\x66\xb7\xaf\x1d\x2f\xfb\xb5\xc3\x97\x16\x7c\x3e\xaa\x24\x7e\xc4\x57\x0e\x2a\x22\x47\x65\xe8\xf1\xa2\xd3\xab\x33\xce\x61\x5a\x32\xe0\x05\xde\xd3\x8c\xa5\xa0\x35\xc3\x9f\xd2\x0e\xe4\x13\x0a\x0c\x1e\x4a\x14\xf1\x65\x86\xaa\xe6\x9f\xda\xce\x85\x7b\x1b\x3b\x7f\x9b\xb8\x72\xea\x76\x2b\xd8\x3e\x5e\xdc\xee\x22\x3a\xb3\x77\xcc\x8b\xd0\xfc\x3b\x97\x2e\x40\x9f\x13\x4a\x5f\x9d\x2d\xf7\x83\xa9\xc7\x73\x1e\x92\x64\x6a\x78\x57\xf4\xb2\x0c\x55\xa0\x2b\xb4\x68\x5f\xae\x89\x37\xa1\x1c\xe3\x38\x3e\x3e\x50\x93\x85\xcd\x1d\x9f\xba\xce\x27\x4d\x88\x2c\x94\x6f\x07\xcb\xb2\xb0\xae\x2c\x4e\xc6\xe3\x17\xe6\x3f\x92\xec\xf6\x0d\xfa\x3e\x09\x4d\xe2\xf1\x3c\x51\xe4\x4e\x24\xfe\xa5\x62\xb4\x3f\x69\xb6\xeb\xf7\x5a\x01\x3c\x7a\x7c\x10\x2c\xbf\x71\x47\xc1\xc9\xfe\xfe\xbd\xa3\xcf\x86\x83\x5d\x2e\x7f\x2d\x2c\x9e\x05\x49\xec\xc8\x08\x51\x65\x28\x02\x5d\xec\xfa\x7d\x26\x85\xf1\xd9\xc6\x1e\xd2\xec\xa8\x67\xfd\xc9\x66\x81\x18\x15\xda\xa3\xa7\x91\xaf\xb7\x72\x90\x79\x71\x54\x3d\x46\x39\x9b\xd7\xb8\xf3\xc4\x99\x59\x1d\x48\xf3\xc2\x4c\x5e\x14\x8e\x0e\x54\xbc\xe9\x4e\xb5\x12\x19\x18\x1d\x13\xb0\x3d\xd3\x8e\x7e\xee\x5c\x3f\x85\x7c\x04\xbc\x23\x5f\x8b\x92\x5f\x16\x85\x4e\xb3\x8e\x7f\x3f\x62\x99\xc3\x31\x40\xb3\x5e\x5c\x3c\xc9\xd0\xd5\xb7\x00\xf5\x65\x55\xde\x43\xcb\xb4\xdd\xde\x6c\x7a\x46\x61\xb9\xb9\x9a\xee\x49\xf8\x70\x4c\xc3\x28\x8a\x1e\x85\xf4\x34\xa6\x45\xd1\xc3\x8f\x7c\x3c\x60\xd3\x4f\x76\x5d\x8e\x0f\xe6\xf9\x54\x32\x8f\x70\xe9\x40\x80\x9a\x01\x97\xac\x99\x7f\xc5\xc0\xa2\xcf\xfd\x40\x76\x42\x90\xbf\x87\x6f\x76\xaa\x95\x55\x06\xd7\x7c\xfa\xec\xf3\xdc\x2e\x21\xe1\xf1\x05\xbf\x48\x10\x02\xa6\x7a\xb7\x16\x89\xb1\xd9\x6c\xb8\xda\x08\x53\x73\xa5\x97\xe3\x52\x16\xf0\x8d\xd7\xab\x7a\x7c\x83\x2d\x94\xa1\xf6\x6b\xfe\x4e\x6c\x41\xcf\x49\xa3\x6f\x1b\xe6\x57\x2b\x7c\xcb\x9a\xcf\x56\x00\xf6\x8f\x1f\x9b\x0a\xe6\xa3\xf9\x07\x59\x6d\xe7\xb3\xa6\x76\x0b\x66\x56\x63\xe5\x77\x2b\x54\xae\x2a\x73\x0a\xe8\x3f\x4b\xf9\x1b\x68\x43\x75\xff\x25\xb5\x9b\x3c\x3c\xa1\xc4\xc5\xc5\xa9\x45\xbd\xd6\x88\xfc\x5b\x8b\x3b\x48\x3f\x7d\x76\x61\xe9\x66\xce\xd9\xc5\xc9\xf0\xf4\x15\x7c\xfa\xf5\xb3\x3f\xaf\xde\xfe\x3b\x25\x8a\x7f\xfd\xf5\xd7\xbf\x61\xcf\x35\x15\xa5\x4e\xf7\x25\xe2\xb0\x25\xcb\x7a\xc5\xe3\xbb\x66\xed\x67\x4e\xf0\x0f\xf3\x14\xce\x3a\xd5\xae\xaf\xc7\xe2\x9f\x24\xa1\xf6\xef\xc7\x42\xde\x40\x6d\x3d\xae\xa3\x0f\x8f\x56\xbe\x47\xd3\x50\x50\x1d\xfe\xfe\x7e\xc9\xc8\x74\xd9\xa8\x87\xb7\x97\x90\x36\x5a\xd4\x35\x76\x54\x13\xbf\x29\xf8\x82\xde\x0a\x0d\x27\x97\xbe\x96\x81\xfc\x72\xce\x06\x79\xd0\x2b\xf5\x21\x8d\x99\x83\x3c\x16\x50\x0c\x15\xc9\xa3\x6e\xa0\xff\xa9\xa3\x8d\x0e\xf5\x62\xa1\xa5\x5a\x35\xb6\x50\x1b\xd9\xb6\x94\x78\xc8\x59\x5e\x81\x90\xac\xa9\x51\x93\x51\x8d\xce\xc1\x0c\xf4\x5a\x61\x1d\xa6\x5e\xd7\x69\xb9\x0f\x0d\xd4\xcf\x85\x4c\xd2\xcd\x0f\x18\x1d\x8a\x13\x2b\x0d\xf6\x7d\x35\xf5\xb0\x0b\x8d\xef\x46\xae\xad\xb5\x45\x55\xde\xb2\xf6\xa3\x14\x0b\x9f\xb9\x4e\xeb\x30\x80\x6f\x58\x18\x5e\x7c\xb5\x80\x7a\x24\x68\x8e\xd1\x67\x2c\xd5\xe0\x38\x9e\x63\x91\xe7\x50\x5b\x28\x48\x41\xef\xe5\x87\xb3\x6b\x7a\x6b\xc4\x17\x11\x6c\x94\xb7\xcc\xab\xbb\x94\x85\xef\x37\x29\x24\x87\x43\xb8\x4b\xcc\x28\x52\x52\x80\x28\x9c\xc1\x9e\x36\xec\x3f\xf9\x92\x63\x14\x95\x21\xb2\x55\xa2\xb6\xaa\x66\xeb\xb2\x18\x51\x40\x2a\x3c\xc4\x18\xb3\x7b\x90\xb6\xc1\x22\xb1\x25\x2d\x58\xc6\xc4\x46\x6c\xb9\xff\x40\x32\xec\x59\xf8\x5c\x12\x47\xc7\x14\xa2\x98\xfa\xed\xa9\xe4\xe0\xda\x8c\x5d\x3a\xb7\xa9\x33\xce\xdd\x81\x43\x8a\x49\x7f\x02\xbb\x2e\xd9\xe6\xfb\x33\x59\x49\xee\x57\xa0\x95\xf4\x91\x43\xe6\x3e\x05\xd9\x1c\x77\xdc\xee\x8d\xa6\xf4\xa2\x96\x7d\x37\x3c\x05\x5d\xaa\x22\xfd\x0b\x3b\x73\xfb\x41\xb9\xb5\xb1\xd0\x71\x83\xac\x7b\x7e\xfc\x3f\x00\x00\xff\xff\xc9\xaf\xdf\x54\xcb\x14\x00\x00")
+var _templatesServerServerGotmpl = []byte("\x1f\x8b\x08\x00\x00\x09\x6e\x88\x00\xff\x9c\x58\x6d\x6f\xdb\xba\xf5\x7f\x2d\x7d\x0a\x5e\xfd\x6f\xff\x93\x83\x98\xbe\xc1\xb0\x17\xf3\x90\x17\x41\xd6\xa2\x41\xb3\xd6\xa8\x83\x8b\x0d\x5d\xe1\x32\x12\x6d\x6b\xa1\x49\x5d\x92\x8a\xeb\x05\xf9\xee\x3b\x87\xa4\x24\xda\x95\xd3\x24\x06\x0c\x5b\x7c\x38\x8f\x3f\x9e\xdf\xa1\x6a\x56\xdc\xb1\x15\x27\x0f\x0f\x84\x5e\xcc\xae\x66\xe1\xf1\xf1\x31\x4d\xab\x4d\xad\xb4\x25\x79\x9a\x64\x85\xde\xd5\x56\x4d\xac\x30\x19\x3c\x2d\x37\x16\x7f\x84\x5a\xe1\x8f\xe4\x36\xfc\x4c\xd6\xd6\xd6\xf8\xdf\x56\x1b\x9e\xa5\x69\xb2\x14\x6c\x65\x48\xb6\xaa\xec\xba\xb9\xa5\x85\xda\x4c\xfe\xc3\x8d\xe1\xf7\xe5\xdd\x64\xa5\xc6\x6e\x16\x96\xaf\x34\x2b\xf8\xb2\x11\x7b\x0b\xed\x4e\x70\x7d\x3b\x69\xe7\x40\x1a\x41\x1b\x35\x93\x60\x1d\xfd\x3b\x5f\xb2\x46\xd8\x2b\x67\xa1\x01\x6b\x61\xaa\xd6\x95\xb4\x4b\x92\xbd\xf9\x23\x23\x14\x1d\x70\x1b\xb8\x2c\xbb\xff\x7e\xf3\xaf\x77\x7c\x77\x4a\x7e\xbd\x67\xa2\xe1\x64\x7a\x4e\xe8\x9e\x14\x9c\x85\x7f\xe4\x40\x60\x58\x7e\x20\x75\x94\xa6\x13\xf0\x64\xba\xe2\x92\x6b\x66\x39\x31\x5b\xb6\x5a\x71\x4d\xfa\x01\xae\xef\xe1\x79\x6c\x09\xa5\x13\x4a\xc9\xf8\xc2\x49\x66\xa6\x60\xa2\xfa\x2f\x78\xf2\x91\x6d\x50\x2c\x19\x2f\x09\x9d\x84\xed\x74\xb7\x11\x28\x99\x7c\xe4\xdb\xb9\x17\x50\x68\x0e\xe2\x0c\x61\x44\xf2\x2d\x61\x75\x85\x62\xd6\xcd\x86\xc9\x3d\x29\x5e\x5d\xba\x6c\x64\xd1\x6f\xce\x71\xf9\x09\x26\xb8\xcf\x2e\x1d\xb4\x02\x00\x30\x22\x27\x41\xe5\x43\x9a\x18\x8c\x0f\x28\xcc\xfd\xd0\x08\x46\x28\x0a\x3b\x47\x0b\xd2\xa4\x5a\x3a\x4b\x7e\x81\x35\x95\xc0\xf5\x30\xbd\x66\xb2\x84\xcc\xc1\x92\x42\xc9\x65\xb5\x6a\x34\x07\xa9\x68\x02\xec\x7e\x4c\x13\xcd\x6d\xa3\x25\x31\xe9\xa3\xf3\x30\xe8\x5a\x2a\x4d\xec\x9a\x0f\x3b\x05\xfb\x53\xbb\xab\x79\xbb\xd8\x58\xdd\x14\x96\x3c\xe0\x6a\x30\x21\x07\x45\x96\x55\xd2\x10\xfa\xf6\xbb\xd5\x6c\x5e\xac\xf9\x06\x42\x95\x35\xb2\xfa\x9e\x8d\x7c\xce\xe6\xaa\xb8\xe3\x76\xc6\xec\x9a\x38\xd8\xd1\x77\x95\xe0\x12\x15\x7c\x13\x4a\xae\xa6\x99\x71\x0b\xc6\x35\xac\xc8\x48\xc9\x4d\xa1\xab\xda\x56\x4a\x4e\x33\xb4\x0b\x45\x11\xbf\x84\x58\x45\x44\x65\x2c\x97\x44\x49\x5c\xea\x90\x38\xcd\x26\xf7\x4c\x4f\x74\x23\x27\x60\x55\xc9\xcc\x9a\xeb\xd8\x09\x8a\x9b\xb3\x6f\x69\x52\xaa\x0d\xd8\xea\xcd\xb9\x86\xd8\x5a\x7a\xed\x84\x41\xd6\x92\x0e\x58\xc1\xb1\x35\x33\x57\xd2\xf0\x02\x62\x48\x68\x70\xcb\xf9\x93\xbc\x57\xc6\x62\x1c\x2a\xb9\x6a\x1d\x58\xc3\xd0\x80\xe5\x57\xb3\x63\x06\x0b\x05\xd9\xf7\xbb\xb8\xbc\x9f\x66\xef\x3f\xcd\x6f\xd0\xc2\x19\x1e\x7a\x40\x3e\x81\x4f\x90\x8d\xe7\x63\x40\xb6\x2b\x0f\xb1\x74\x97\xc7\xaa\x35\x19\xf2\x22\x79\x81\xcb\xcd\x69\xab\xd6\xe0\x7a\x86\x27\x11\x02\x41\xdc\xa1\x0a\xea\x67\x9f\x3e\x3b\xf5\x58\x43\x7c\xa2\xaf\xc1\x80\x38\x40\x03\xe1\x99\x0f\x04\x27\x4d\x6e\xae\xe7\x2e\x40\xfd\x27\x84\xaa\xfd\x04\xb7\xa0\x9c\x8d\x9f\x17\x36\x0f\x50\x01\x7e\x6c\xd7\x30\x20\x15\x44\xbf\xe6\x45\xb5\xac\x78\x49\x2a\xfb\x27\xe3\xd0\x6b\x30\xd7\xcc\x90\xf1\x38\x0a\x2b\x18\xb3\x68\x43\x0b\xff\x5d\x74\xfb\x4f\x88\xf3\x80\x61\x2f\x8a\xf9\xab\x22\x8e\x96\xb5\x51\x87\xff\x97\x5c\x5b\x70\xa8\xc0\xb2\x05\x9f\xe1\x63\x82\x96\x15\xfd\xc2\x01\x03\xa3\x59\xd4\xdc\x18\x7e\xc4\xc2\x8c\x68\xfe\x47\x53\x69\x5e\xc2\x46\xbd\x67\xd5\xe5\xdb\xcf\x37\x57\xef\xae\x2e\x2f\x6e\xde\xfe\x68\xdc\x07\x28\xd0\xc7\x8d\x83\xf2\x3d\x14\x35\x5d\xdd\xa3\x41\x58\xdc\x07\x8d\xfa\xb9\x4d\xb3\xcf\x57\xbf\x83\x3d\x8b\x0f\x6f\xff\xd5\xc2\xd4\x74\x38\x1d\x84\x69\xea\x4e\x34\x20\x15\xea\x52\x21\x9a\x92\xcf\x01\x32\x30\xee\x7e\x8e\x54\x21\x98\x1a\x30\xbf\xa5\x95\x80\x39\x88\x02\x4c\xa1\x23\xae\xde\x67\xdf\x7a\x95\x09\x16\xe4\xfd\xcf\x89\xaa\x91\x8b\xd0\xbd\xa3\x55\x1f\xfc\x09\x75\xbb\xff\xa0\x87\xf4\xbd\x1f\x86\x0a\x0a\xa7\xad\xf5\xd0\x90\x5b\xa5\x44\x57\xc1\x2d\x08\xe8\xab\x7d\x38\x0a\xbe\x54\x6f\x81\xd0\xfd\x73\x77\x5a\x60\x31\x05\x6e\xe2\xa5\x03\xe6\x2d\x44\x9f\x09\x01\xe3\xb7\x1c\x32\x12\x6a\xbc\x27\xb0\xdc\xb4\x5c\x34\x0a\x5a\x5e\xc8\x64\x0f\x1d\x45\x9d\xc7\x14\xe5\x19\x0c\x9e\x0f\x08\xcb\x8f\x78\x82\x42\xae\x3a\x60\xbb\xa7\xb9\x2d\xa2\x33\xe7\x30\x6e\x19\xf0\x02\x7e\xf3\x11\xc9\xb9\xd6\x04\xbe\x4a\xa3\x91\x04\x31\xf2\x0b\x8a\x8f\x22\x8c\xc3\x6e\x02\x97\x02\x0b\x9b\x80\xaf\x7c\xf4\x37\x37\xd4\x91\xae\x4f\x56\xa0\x55\x98\x71\x03\x48\x79\x8f\x2d\xfc\x9e\x45\x90\x31\x2f\xa1\xbe\xff\x6f\x3b\x2f\xea\x8d\x7f\xf0\x3f\x53\xd7\x0e\x38\x68\x04\xa7\x0e\x37\xb7\x90\x21\x68\x73\x88\x18\x36\x6f\xd0\x34\xd2\x99\xeb\xa8\xf2\x0c\xd1\x81\xf5\x78\x90\xee\x99\x75\x74\x3b\x9d\x4c\xde\x98\x7f\xcb\xec\x14\xc4\xf4\xec\x3d\xf2\xfd\x17\x78\x05\xc7\xf7\x08\x41\x1e\x21\x86\x95\x22\x98\x90\x5c\xec\x9d\xd6\xd1\x43\xdc\xd1\xf5\xf1\xde\x73\xc9\xe7\x4d\x0c\x87\xfe\x95\xe6\x40\xf7\x4c\xdf\x31\x0b\xe0\x97\x08\x87\x11\xda\x20\x0c\x46\xa0\xcf\x65\xdc\xbf\xfa\xa4\xbe\x52\xd9\x63\x6e\xe8\x5e\xe7\x31\x3a\x68\x8d\x9f\xd9\x77\xf4\xe4\xfc\x42\x8c\x44\x3b\x87\x01\x92\xbc\x04\x1f\x28\x2c\xc6\x47\xd4\x33\xd0\x8b\xb2\xd4\xf9\xa8\xc7\xc9\xcb\xd0\x40\x5a\x38\xf8\x54\x08\x7f\xf4\x22\xf9\x50\x21\x06\xd0\x12\x79\xe7\xb1\x62\x8b\xfa\x03\xe7\xf5\x85\xa8\xee\x79\x47\x0c\x82\xe6\x27\xa8\xed\xe6\x72\xd6\x29\x7c\x3c\x04\x55\x92\x24\x4f\x1a\xfe\x32\xdc\x24\xc9\xe3\xcf\x22\x81\xd8\x88\x1c\x8c\x90\xf1\xcc\x86\x2b\xe6\xc2\xd7\xc0\xc2\x3c\x81\x8b\xbd\x05\xd8\x07\xb8\xc2\x4b\xfc\xad\x04\xf8\x9e\xfa\x81\xd1\x91\x85\xf4\x23\xff\x6e\x67\x5a\x59\x65\x60\xcf\x97\xaf\xbe\x0f\x7c\xc8\x70\xf1\xe4\x8c\x9e\x65\x60\x02\x94\x6d\xb7\x17\x00\xb5\xdd\x6e\xa9\xda\x32\x53\x53\xa5\x57\x93\x4a\x96\xfc\x3b\xad\xd7\xf5\xe4\x06\xba\x27\x83\x9d\xd7\xe2\x9a\xed\xb8\x5e\xa0\x44\xdf\x31\x2c\x2e\xd7\x70\x31\x5b\xcc\xd7\x9c\xdb\xff\xfb\xdc\x08\xbe\x18\x2f\x3e\x49\xb1\x5b\xcc\x9b\xda\x6d\x98\x5b\x0d\xcc\xee\x76\xa8\x42\x09\x73\xcc\xd0\x7f\x54\xf2\x77\xa8\xfb\xc8\xeb\xe7\xd8\x69\xd2\xf0\x04\x2b\xce\xce\x8e\x6d\x8a\xba\x22\xf4\x6f\xc3\xee\x78\xfe\xe5\xab\x0b\x4b\x3f\x73\x4a\xce\x8e\x86\x27\x16\xf0\xe5\xb7\xaf\xa7\x0e\x8a\x5e\xff\xb5\x62\xe5\x3f\xff\xf2\xdb\x5f\xa1\xdd\x9a\xb1\x4a\xe7\x3e\x74\x80\x95\xfd\x6e\x6c\x74\x4a\x8e\xcc\xc0\x46\x38\x86\x49\x38\x24\x11\xbe\x23\xae\x72\x2c\xfb\xd2\x93\x6f\x0e\x8f\xbe\xf9\xf1\xec\x6f\x35\xab\x6b\xe8\x2a\xa6\xde\x19\xb8\x0b\xb7\x27\x6e\xf8\x68\x1e\x08\x1a\x38\xa7\xa7\x64\x30\x84\xa3\x34\x66\xe9\x78\x89\x2f\x04\xc1\x90\x21\xea\xd8\xe3\xec\xfd\x17\x0b\x6d\x8c\xb0\x25\xf1\x9d\x85\x37\xa4\x7b\x0f\x80\x2d\x86\xe8\x9a\x85\xf6\xfa\x1c\x5f\xff\xe3\xbe\xa3\x6d\x1d\x7c\xcf\xd1\xb6\x1c\x87\x1d\x07\x01\x35\x4c\x80\x82\x72\x07\xf4\x27\xb1\x8f\xa9\x4c\x6c\x29\x5a\xf3\xa2\xbe\x02\x28\x07\xf9\xa6\xd5\x71\xda\x86\xa9\x2f\xb9\xb9\x5f\x1c\x81\x28\xe2\xfa\x67\xa0\x27\x39\xe0\x35\xe2\x98\x3b\x56\x1a\x05\xf5\x27\xf4\x26\x9e\x32\x13\x50\x03\x56\x22\x54\xe7\x75\xc0\xea\x1b\x33\x7d\x53\x3a\x10\xe2\x6d\x13\x7f\xf1\x72\xf7\x3c\xcc\xaf\x4f\x49\xdd\xe9\xc1\xf6\x1e\xc4\x8a\xca\xa2\x20\x14\x92\xb7\xb6\x04\x48\xd3\xb9\x0f\xcf\x33\x43\xe2\x6e\xbf\x80\x46\xfc\xef\x2e\x9c\xe7\xa4\x76\x0d\x6c\x74\xb7\x3e\xef\xf0\x33\x18\xa1\x81\x42\xff\xd3\xee\xc0\x61\xaa\xbd\x7c\x43\xcb\x9d\x65\xa1\xe3\xee\xc6\x42\xac\xc0\xcc\xb8\xff\x80\x13\xfa\x24\x44\x9e\x8c\x7d\x90\x1d\xfe\x3e\x3f\x03\x06\x52\x60\x9e\xcc\x41\x64\xd6\xeb\xd2\x10\xb9\xbd\x0e\xcf\x21\x1b\xa6\x4b\x87\xe9\xf3\x11\xe9\x8b\xa3\x73\x70\x4c\x61\x1d\x5c\x4c\x07\x2a\xc4\x7c\xdd\xd8\x52\x6d\x65\x7b\xf7\x02\x06\x25\x85\xe0\x4c\x92\xa6\x86\x13\x6c\x54\xa3\x0b\x6e\x06\x2e\x25\x61\x5f\x54\x1e\xfc\xc5\x27\xd0\x74\x3f\x3f\xa0\x74\xa8\x98\x92\xca\xc0\x05\xa9\xc6\xcb\xde\x52\xab\x8d\xaf\x4c\xb6\x14\xd5\x2d\x69\x5f\x12\x93\xf0\xda\xf9\xb8\x0c\xc3\xad\x21\x50\x80\xe1\xca\xce\xeb\x31\xc3\x39\x82\xaf\x95\x55\x03\xe3\x40\x92\xac\x28\x78\x6d\x79\x89\x02\xa2\x97\x0a\x94\x5c\xe1\xdb\x18\xb8\xe0\xc3\x8d\x72\x17\x0a\xdf\x85\x2c\xfd\xc5\x0c\x43\xb2\x3f\x04\x29\x21\x46\xa1\x90\x12\xea\x9e\x53\x18\x49\x83\x8b\x1a\x5d\x51\x88\xa2\x32\x48\x4a\x82\xd5\x56\xd5\x64\x53\x95\x63\x0c\x88\x00\x86\x84\x98\xdd\x73\x69\x1b\x68\xc7\x76\x28\x05\xda\x4a\xb6\x65\x3b\xea\x5f\x58\x0e\x7b\x16\x5e\x5f\xa6\xc9\x21\xc9\x60\x4c\x7d\x7a\x84\x1c\xdc\x3b\x22\x17\xce\x6d\xbc\x42\x16\xee\x88\x00\x09\x49\x8f\xe1\xee\x3a\x99\xd8\xa2\x43\xb5\x90\xd4\xef\x00\x2d\xf9\x13\xa0\x75\x80\xb5\x05\x64\xdc\x76\x4a\x73\xc4\xd9\xe8\x87\xe1\x19\xd7\x95\x2a\xf3\x3f\x93\x13\x97\x0f\x6c\x5c\x1a\xcb\x7b\x6c\xa0\x76\x8f\x8f\xff\x05\x00\x00\xff\xff\xdb\x65\xd6\xb5\x5b\x18\x00\x00")
 
 func templatesServerServerGotmplBytes() ([]byte, error) {
 	return bindataRead(
@@ -510,7 +510,7 @@ func templatesServerServerGotmpl() (*asset, error) {
 		return nil, err
 	}
 
-	info := bindataFileInfo{name: "templates/server/server.gotmpl", size: 5323, mode: os.FileMode(420), modTime: time.Unix(1456779999, 0)}
+	info := bindataFileInfo{name: "templates/server/server.gotmpl", size: 6235, mode: os.FileMode(420), modTime: time.Unix(1457197252, 0)}
 	a := &asset{bytes: bytes, info: info}
 	return a, nil
 }
diff --git a/generator/templates/server/server.gotmpl b/generator/templates/server/server.gotmpl
index 074653ac..98d04a28 100644
--- a/generator/templates/server/server.gotmpl
+++ b/generator/templates/server/server.gotmpl
@@ -32,18 +32,22 @@ func NewServer(api *{{ .Package }}.{{ pascalize .Name }}API) *Server {
 // Server for the {{ humanize .Name }} API
 type Server struct { {{ if (contains .ExtraSchemes "unix") }}
   SocketPath flags.Filename `long:"socket-path" description:"the unix socket to listen on" default:"/var/run/{{ dasherize .Name }}.sock"`
+	domainSocketL net.Listener
 	{{ end }}{{ if (hasInsecure .Schemes) }}
 	Host string `long:"host" description:"the IP to listen on" default:"localhost" env:"HOST"`
-	Port int    `long:"port" description:"the port to listen on for insecure connections, defaults to a random value" env:"PORT"`{{ end }}{{ if (hasSecure .Schemes) }}
+	Port int    `long:"port" description:"the port to listen on for insecure connections, defaults to a random value" env:"PORT"`
+	httpServerL   net.Listener{{ end }}{{ if (hasSecure .Schemes) }}
 
 	TLSHost           string         `long:"tls-host" description:"the IP to listen on for tls, when not specified it's the same as --host" env:"TLS_HOST"`
 	TLSPort           int            `long:"tls-port" description:"the port to listen on for secure connections, defaults to a random value" env:"TLS_PORT"`
 	TLSCertificate    flags.Filename `long:"tls-certificate" description:"the certificate to use for secure connections" required:"true" env:"TLS_CERTIFICATE"`
-	TLSCertificateKey flags.Filename `long:"tls-key" description:"the private key to use for secure conections" required:"true" env:"TLS_PRIVATE_KEY"` {{ end }}
+	TLSCertificateKey flags.Filename `long:"tls-key" description:"the private key to use for secure conections" required:"true" env:"TLS_PRIVATE_KEY"`
+	httpsServerL  net.Listener{{ end }}
 
 	{{ if .ExcludeSpec }}Spec flags.Filename `long:"spec" description:"the swagger specification to serve"`{{ end }}
 	api               *operations.{{ pascalize .Name }}API
 	handler           http.Handler
+  hasListeners bool
 }
 
 // SetAPI configures the server with the specified API. Needs to be called before Serve
@@ -60,35 +64,32 @@ func (s *Server) SetAPI(api *{{ .Package }}.{{ pascalize .Name }}API) {
 
 // Serve the api
 func (s *Server) Serve() (err error) {
+  if !s.hasListeners {
+    if err := s.Listen(); err != nil {
+      return err
+    }
+  }
 	{{ if (contains .ExtraSchemes "unix") }}
   domainSocket := &graceful.Server{Server: new(http.Server)}
   domainSocket.Handler = s.handler
-  domSockListener, err := net.Listen("unix", string(s.SocketPath))
-  if err != nil {
-    return err
-  }
 
   fmt.Printf("serving {{ humanize .Name }} at unix://%s\n", s.SocketPath)
-  {{ if or (hasInsecure .Schemes) (hasSecure .Schemes) }}go func(){
-  {{ end }}if err := domainSocket.Serve(domSockListener); err != nil {
+  {{ if or (hasInsecure .Schemes) (hasSecure .Schemes) }}go func(l net.Listener){
+  {{ end }}if err := domainSocket.Serve(l); err != nil {
       {{ if or (hasInsecure .Schemes) (hasSecure .Schemes) }}log.Fatalln(err){{ else }}return err{{ end }}
     }
-  {{ if or (hasInsecure .Schemes) (hasSecure .Schemes) }}}(){{ end }}
+  {{ if or (hasInsecure .Schemes) (hasSecure .Schemes) }}}(s.domainSocketL){{ end }}
   {{ end }}{{ if (hasInsecure .Schemes) }}
 	httpServer := &graceful.Server{Server: new(http.Server)}
 	httpServer.Handler = s.handler
 
-	listener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.Host, s.Port))
-	if err != nil {
-		return err
-	}
-
-	fmt.Printf("serving {{ humanize .Name }} at http://%s\n", listener.Addr())
-  {{ if (hasSecure .Schemes) }}go func() {
-		{{ end }}if err := httpServer.Serve(tcpKeepAliveListener{listener.(*net.TCPListener)}); err != nil {
+	fmt.Printf("serving {{ humanize .Name }} at http://%s\n", s.httpServerL.Addr())
+  {{ if (hasSecure .Schemes) }}go func(l net.Listener) {
+  {{ else }}l := s.httpServerL
+		{{ end }}if err := httpServer.Serve(tcpKeepAliveListener{l.(*net.TCPListener)}); err != nil {
 			{{ if (hasSecure .Schemes) }}log.Fatalln(err){{ else }}return err{{ end }}
 		}
-  {{ if (hasSecure .Schemes) }}}(){{ end }}
+  {{ if (hasSecure .Schemes) }}}(s.httpServerL){{ end }}
 {{ end }}{{ if (hasSecure .Schemes) }}
 	httpsServer := &graceful.Server{Server: new(http.Server)}
 	httpsServer.Handler = s.handler
@@ -101,21 +102,55 @@ func (s *Server) Serve() (err error) {
 	if err != nil {
 		return err
 	}
-{{ if (hasInsecure .Schemes) }}
+
+	fmt.Printf("serving {{ humanize .Name }} at https://%s\n", s.httpsServerL.Addr())
+  wrapped := tls.NewListener(tcpKeepAliveListener{s.httpsServerL.(*net.TCPListener)}, httpsServer.TLSConfig)
+  if err := httpsServer.Serve(wrapped); err != nil {
+    return err
+  }
+  {{ end }}
+	return nil
+}
+
+// Listen creates the listeners for the server
+func (s *Server) Listen() error {
+  if s.hasListeners { // already done this
+    return nil
+  }
+	{{ if (contains .ExtraSchemes "unix") }}domSockListener, err := net.Listen("unix", string(s.SocketPath))
+	if err != nil {
+		return err
+	}
+	s.domainSocketL = domSockListener{{ end }}
+	{{ if (hasInsecure .Schemes) }}listener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.Host, s.Port))
+	if err != nil {
+		return err
+	}
+
+	h, p, err := swag.SplitHostPort(listener.Addr().String())
+	if err != nil {
+		return err
+	}
+	s.Host = h
+	s.Port = p
+	s.httpServerL = listener{{ end }}
+	{{ if (hasSecure .Schemes) }}{{ if (hasInsecure .Schemes) }}
 	if s.TLSHost == "" {
 		s.TLSHost = s.Host
 	}{{ end }}
-	tlsListener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.TLSHost, s.TLSPort))
+  tlsListener, err := net.Listen("tcp", fmt.Sprintf("%s:%d", s.TLSHost, s.TLSPort))
 	if err != nil {
 		return err
 	}
 
-	fmt.Printf("serving {{ humanize .Name }} at https://%s\n", tlsListener.Addr())
-  wrapped := tls.NewListener(tcpKeepAliveListener{tlsListener.(*net.TCPListener)}, httpsServer.TLSConfig)
-  if err := httpsServer.Serve(wrapped); err != nil {
-    return err
-  }
-  {{ end }}
+	sh, sp, err := swag.SplitHostPort(tlsListener.Addr().String())
+	if err != nil {
+		return err
+	}
+	s.TLSHost = sh
+	s.TLSPort = sp
+	s.httpsServerL = tlsListener{{ end }}
+  s.hasListeners = true
 	return nil
 }
 
diff --git a/internal/validate/schema_props.go b/internal/validate/schema_props.go
index a8739f8e..1a4e601b 100644
--- a/internal/validate/schema_props.go
+++ b/internal/validate/schema_props.go
@@ -180,12 +180,3 @@ func (s *schemaPropsValidator) Validate(data interface{}) *Result {
 	mainResult.Inc()
 	return mainResult
 }
-
-// IsZero returns true when the value is a zero for the type
-func isZero(data reflect.Value) bool {
-	if !data.CanInterface() {
-		return true
-	}
-	tpe := data.Type()
-	return reflect.DeepEqual(data.Interface(), reflect.Zero(tpe).Interface())
-}
diff --git a/jsonpointer/pointer.go b/jsonpointer/pointer.go
index 70999abb..d62ca3a0 100644
--- a/jsonpointer/pointer.go
+++ b/jsonpointer/pointer.go
@@ -105,14 +105,6 @@ func GetForToken(document interface{}, decodedToken string) (interface{}, reflec
 	return getSingleImpl(document, decodedToken, swag.DefaultJSONNameProvider)
 }
 
-func isZero(data reflect.Value) bool {
-	if !data.CanInterface() {
-		return true
-	}
-	tpe := data.Type()
-	return reflect.DeepEqual(data.Interface(), reflect.Zero(tpe).Interface())
-}
-
 func getSingleImpl(node interface{}, decodedToken string, nameProvider *swag.NameProvider) (interface{}, reflect.Kind, error) {
 	kind := reflect.Invalid
 	rValue := reflect.Indirect(reflect.ValueOf(node))
@@ -137,7 +129,7 @@ func getSingleImpl(node interface{}, decodedToken string, nameProvider *swag.Nam
 	case reflect.Map:
 		kv := reflect.ValueOf(decodedToken)
 		mv := rValue.MapIndex(kv)
-		if mv.IsValid() && !isZero(mv) {
+		if mv.IsValid() && !swag.IsZero(mv) {
 			return mv.Interface(), kind, nil
 		}
 		return nil, kind, fmt.Errorf("object has no key %q", decodedToken)
diff --git a/spec/analyzer.go b/spec/analyzer.go
index dd4ab35e..1fee2eff 100644
--- a/spec/analyzer.go
+++ b/spec/analyzer.go
@@ -334,6 +334,7 @@ func (s *specAnalyzer) paramsAsMap(parameters []Parameter, res map[string]Parame
 	}
 }
 
+// ParametersFor the specified operation id
 func (s *specAnalyzer) ParametersFor(operationID string) []Parameter {
 	gatherParams := func(pi *PathItem, op *Operation) []Parameter {
 		bag := make(map[string]Parameter)
@@ -449,6 +450,8 @@ type SchemaRef struct {
 	Schema *Schema
 }
 
+// SchemasWithAllOf returns schema references to all schemas that are defined
+// with an allOf key
 func (s *specAnalyzer) SchemasWithAllOf() (result []SchemaRef) {
 	for _, v := range s.allOfs {
 		result = append(result, v)
@@ -456,6 +459,7 @@ func (s *specAnalyzer) SchemasWithAllOf() (result []SchemaRef) {
 	return
 }
 
+// AllDefinitions returns schema references for all the definitions that were discovered
 func (s *specAnalyzer) AllDefinitions() (result []SchemaRef) {
 	for _, v := range s.allSchemas {
 		result = append(result, v)
@@ -463,6 +467,7 @@ func (s *specAnalyzer) AllDefinitions() (result []SchemaRef) {
 	return
 }
 
+// AllDefinitionReferences returns json refs for all the discovered schemas
 func (s *specAnalyzer) AllDefinitionReferences() (result []string) {
 	for _, v := range s.references.schemas {
 		result = append(result, v.String())
@@ -470,6 +475,7 @@ func (s *specAnalyzer) AllDefinitionReferences() (result []string) {
 	return
 }
 
+// AllParameterReferences returns json refs for all the discovered parameters
 func (s *specAnalyzer) AllParameterReferences() (result []string) {
 	for _, v := range s.references.parameters {
 		result = append(result, v.String())
@@ -477,6 +483,7 @@ func (s *specAnalyzer) AllParameterReferences() (result []string) {
 	return
 }
 
+// AllResponseReferences returns json refs for all the discovered responses
 func (s *specAnalyzer) AllResponseReferences() (result []string) {
 	for _, v := range s.references.responses {
 		result = append(result, v.String())
diff --git a/spec/swagger_test.go b/spec/swagger_test.go
index 6e2e864a..1341dc74 100644
--- a/spec/swagger_test.go
+++ b/spec/swagger_test.go
@@ -20,15 +20,11 @@ import (
 	"reflect"
 	"testing"
 
+	"github.com/go-swagger/go-swagger/swag"
 	. "github.com/smartystreets/goconvey/convey"
 	"github.com/stretchr/testify/assert"
 )
 
-func IsZero(data reflect.Value) bool {
-	tpe := data.Type()
-	return reflect.DeepEqual(data.Interface(), reflect.Zero(tpe).Interface())
-}
-
 var spec = Swagger{
 	SwaggerProps: SwaggerProps{
 		ID:          "http://localhost:3849/api-docs",
@@ -138,7 +134,7 @@ func ShouldBeEquivalentTo(actual interface{}, expecteds ...interface{}) string {
 	expectedType := reflect.TypeOf(expected)
 	if reflect.TypeOf(actual).ConvertibleTo(expectedType) {
 		expectedValue := reflect.ValueOf(expected)
-		if IsZero(expectedValue) && IsZero(reflect.ValueOf(actual)) {
+		if swag.IsZero(expectedValue) && swag.IsZero(reflect.ValueOf(actual)) {
 			return ""
 		}
 
diff --git a/swag/net.go b/swag/net.go
new file mode 100644
index 00000000..8323fa37
--- /dev/null
+++ b/swag/net.go
@@ -0,0 +1,24 @@
+package swag
+
+import (
+	"net"
+	"strconv"
+)
+
+// SplitHostPort splits a network address into a host and a port.
+// The port is -1 when there is no port to be found
+func SplitHostPort(addr string) (host string, port int, err error) {
+	h, p, err := net.SplitHostPort(addr)
+	if err != nil {
+		return "", -1, err
+	}
+	if p == "" {
+		return "", -1, &net.AddrError{Err: "missing port in address", Addr: addr}
+	}
+
+	pi, err := strconv.Atoi(p)
+	if err != nil {
+		return "", -1, err
+	}
+	return h, pi, nil
+}
diff --git a/swag/net_test.go b/swag/net_test.go
new file mode 100644
index 00000000..041db60a
--- /dev/null
+++ b/swag/net_test.go
@@ -0,0 +1,30 @@
+package swag
+
+import (
+	"testing"
+
+	"github.com/stretchr/testify/assert"
+)
+
+func TestSplitHostPort(t *testing.T) {
+	data := []struct {
+		Input string
+		Host  string
+		Port  int
+		Err   bool
+	}{
+		{"localhost:3933", "localhost", 3933, false},
+		{"localhost:yellow", "", -1, true},
+		{"localhost", "", -1, true},
+		{"localhost:", "", -1, true},
+		{"localhost:3933", "localhost", 3933, false},
+	}
+
+	for _, e := range data {
+		h, p, err := SplitHostPort(e.Input)
+		if (!e.Err && assert.NoError(t, err)) || (e.Err && assert.Error(t, err)) {
+			assert.Equal(t, e.Host, h)
+			assert.Equal(t, e.Port, p)
+		}
+	}
+}
