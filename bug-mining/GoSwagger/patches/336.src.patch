diff --git a/cmd/swagger/commands/flatten_test.go b/cmd/swagger/commands/flatten_test.go
index bfc2eb44..5c6ef804 100644
--- a/cmd/swagger/commands/flatten_test.go
+++ b/cmd/swagger/commands/flatten_test.go
@@ -9,6 +9,9 @@ import (
 
 	flags "github.com/jessevdk/go-flags"
 	"github.com/stretchr/testify/assert"
+	"github.com/stretchr/testify/require"
+
+	"github.com/go-swagger/go-swagger/cmd/swagger/commands/generate"
 )
 
 type executable interface {
@@ -80,6 +83,7 @@ func TestCmd_Flatten_Issue2919(t *testing.T) {
 	specDoc := filepath.Join(fixtureBase, "bugs", "2919", "edge-api", "client.yml")
 	outDir, output := getOutput(t, specDoc, "flatten", "fixture-2919-flat-minimal.yml")
 	defer os.RemoveAll(outDir)
+
 	v := &FlattenSpec{
 		Format:  "yaml",
 		Compact: true,
@@ -87,3 +91,26 @@ func TestCmd_Flatten_Issue2919(t *testing.T) {
 	}
 	testProduceOutput(t, v, specDoc, output)
 }
+
+func TestCmd_FlattenKeepNames_Issue2334(t *testing.T) {
+	specDoc := filepath.Join(fixtureBase, "bugs", "2334", "swagger.yaml")
+	outDir, output := getOutput(t, specDoc, "flatten", "fixture-2334-flat-keep-names.yaml")
+	defer os.RemoveAll(outDir)
+
+	v := &FlattenSpec{
+		Format:  "yaml",
+		Compact: true,
+		Output:  flags.Filename(output),
+		FlattenCmdOptions: generate.FlattenCmdOptions{
+			WithFlatten: []string{"keep-names"},
+		},
+	}
+	testProduceOutput(t, v, specDoc, output)
+	buf, err := os.ReadFile(output)
+	require.NoError(t, err)
+	spec := string(buf)
+
+	require.Contains(t, spec, "$ref: '#/definitions/Bar'")
+	require.Contains(t, spec, "Bar:")
+	require.Contains(t, spec, "Baz:")
+}
diff --git a/cmd/swagger/commands/generate/shared.go b/cmd/swagger/commands/generate/shared.go
index ab9725a7..7eb3af3f 100644
--- a/cmd/swagger/commands/generate/shared.go
+++ b/cmd/swagger/commands/generate/shared.go
@@ -17,7 +17,7 @@ import (
 // FlattenCmdOptions determines options to the flatten spec preprocessing
 type FlattenCmdOptions struct {
 	WithExpand  bool     `long:"with-expand" description:"expands all $ref's in spec prior to generation (shorthand to --with-flatten=expand)"  group:"shared"`
-	WithFlatten []string `long:"with-flatten" description:"flattens all $ref's in spec prior to generation" choice:"minimal" choice:"full" choice:"expand" choice:"verbose" choice:"noverbose" choice:"remove-unused" default:"minimal" default:"verbose" group:"shared"` // nolint: staticcheck
+	WithFlatten []string `long:"with-flatten" description:"flattens all $ref's in spec prior to generation" choice:"minimal" choice:"full" choice:"expand" choice:"verbose" choice:"noverbose" choice:"remove-unused" choice:"keep-names" default:"minimal" default:"verbose" group:"shared"`
 }
 
 // SetFlattenOptions builds flatten options from command line args
@@ -64,6 +64,8 @@ func (f *FlattenCmdOptions) SetFlattenOptions(dflt *analysis.FlattenOpts) (res *
 				res.Minimal = true
 				minimalIsSet = true
 			}
+		case "keep-names":
+			res.KeepNames = true
 		}
 	}
 	return
diff --git a/docs/usage/flatten.md b/docs/usage/flatten.md
index bc29b8c9..5fdc1295 100644
--- a/docs/usage/flatten.md
+++ b/docs/usage/flatten.md
@@ -4,10 +4,12 @@ The toolkit has a command to flatten a swagger specification.
 
 Flattening a specification bundles all remote `$ref` in the main spec document.
 
-Depending on flattening options, additional preprocessing may take place:
+Depending on the selected flattening options, additional preprocessing may take place:
 
 - full flattening: replacing all inline complex constructs by a named entry in #/definitions
 - expand: replace all $ref's in the document by their expanded content
+- remove-unused: remove unused definitions from the spec
+- keep-names: does not attempt to jsonify names in definitions and keep them as-is. Generally not suited to use with "full".
 
 The default behavior of flatten is to bundles remote refs into definitions and
 normalize JSON pointers to definitions.
@@ -23,16 +25,16 @@ Usage:
 expand the remote references in a spec and move inline schemas to definitions, after flattening there are no complex inlined anymore
 
 Application Options:
-  -q, --quiet                                                                     silence logs
-      --log-output=LOG-FILE                                                       redirect logs to file
+  -q, --quiet                                                                                silence logs
+      --log-output=LOG-FILE                                                                  redirect logs to file
 
 Help Options:
-  -h, --help                                                                      Show this help message
+  -h, --help                                                                                 Show this help message
 
 [flatten command options]
-          --compact                                                               applies to JSON formatted specs. When present, doesn't prettify the json
-      -o, --output=                                                               the file to write to
-          --format=[yaml|json]                                                    the format for the spec document (default: json)
-          --with-expand                                                           expands all $ref's in spec prior to generation (equivalent to --with-flatten=expand)
-          --with-flatten=[minimal|full|expand|verbose|noverbose|remove-unused]    flattens all $ref's in spec prior to generation (default: minimal, verbose)
+          --compact                                                                          applies to JSON formatted specs. When present, doesn't prettify the json
+      -o, --output=                                                                          the file to write to
+          --format=[yaml|json]                                                               the format for the spec document (default: json)
+          --with-expand                                                                      expands all $ref's in spec prior to generation (shorthand to --with-flatten=expand)
+          --with-flatten=[minimal|full|expand|verbose|noverbose|remove-unused|keep-names]    flattens all $ref's in spec prior to generation (default: minimal, verbose)
 ```
diff --git a/fixtures/bugs/2334/bar.yaml b/fixtures/bugs/2334/bar.yaml
new file mode 100644
index 00000000..7b55340e
--- /dev/null
+++ b/fixtures/bugs/2334/bar.yaml
@@ -0,0 +1,8 @@
+paths: {}
+
+definitions:
+   Bar:
+      type: object
+      properties:
+         Baz:
+            type: string
diff --git a/fixtures/bugs/2334/swagger.yaml b/fixtures/bugs/2334/swagger.yaml
new file mode 100644
index 00000000..4a560e54
--- /dev/null
+++ b/fixtures/bugs/2334/swagger.yaml
@@ -0,0 +1,12 @@
+swagger: '2.0'
+info:
+  title: Object
+  version: 0.1.0
+paths: 
+   /bar:
+     get:
+      responses:
+        200:
+          description: OK
+          schema:
+            $ref: "./bar.yaml#/definitions/Bar"
