diff --git a/cmd/swagger/commands/version_number.go b/cmd/swagger/commands/version_number.go
index 951859f0..ee79afa4 100644
--- a/cmd/swagger/commands/version_number.go
+++ b/cmd/swagger/commands/version_number.go
@@ -1,6 +1,6 @@
 package commands
 
 func init() {
-  Version = "0.4.0-9-g10eac0f"
+  Version = "0.4.0-11-g7bf6593"
 }
 
diff --git a/fixtures/bugs/319/swagger.yml b/fixtures/bugs/319/swagger.yml
new file mode 100644
index 00000000..5b51903f
--- /dev/null
+++ b/fixtures/bugs/319/swagger.yml
@@ -0,0 +1,43 @@
+info:
+  description: a spec for issue 319 on github
+  title: bug 319
+  version: 1.0.0
+paths: {}
+consumes:
+- application/json
+produces:
+- application/json
+schemes:
+- http
+swagger: "2.0"
+definitions:
+  Base:
+    description: Base class
+    discriminator: dType
+    properties:
+      dType:
+        type: string
+        description: discriminating type
+    required:
+      - dType
+
+  Derived:
+    description: Derived class
+    allOf:
+      - "$ref": "#/definitions/Base"
+      - required:
+        - name
+        properties:
+          name:
+            type: string
+            description: name of the property
+
+  Container:
+    description: Container type
+    properties:
+      mapNoWorky:
+        type: object
+        additionalProperties:
+          $ref: "#/definitions/Base"
+    required:
+      - mapNoWorky
diff --git a/generator/bindata.go b/generator/bindata.go
index 17341771..100433be 100644
--- a/generator/bindata.go
+++ b/generator/bindata.go
@@ -310,7 +310,7 @@ func templatesSchemabodyGotmpl() (*asset, error) {
 		return nil, err
 	}
 
-	info := bindataFileInfo{name: "templates/schemabody.gotmpl", size: 7562, mode: os.FileMode(420), modTime: time.Unix(1455953094, 0)}
+	info := bindataFileInfo{name: "templates/schemabody.gotmpl", size: 7562, mode: os.FileMode(420), modTime: time.Unix(1456593931, 0)}
 	a := &asset{bytes: bytes, info: info}
 	return a, nil
 }
diff --git a/generator/discriminators_test.go b/generator/discriminators_test.go
index 0928f39e..4458ab28 100644
--- a/generator/discriminators_test.go
+++ b/generator/discriminators_test.go
@@ -301,3 +301,24 @@ func TestGenerateModel_Bitbucket_WebhookSubscription(t *testing.T) {
 		}
 	}
 }
+
+func TestGenerateModel_Issue319(t *testing.T) {
+	specDoc, err := spec.Load("../fixtures/bugs/319/swagger.yml")
+	if assert.NoError(t, err) {
+		definitions := specDoc.Spec().Definitions
+		k := "Container"
+		schema := definitions[k]
+		genModel, err := makeGenDefinition(k, "models", schema, specDoc)
+		if assert.NoError(t, err) && assert.Equal(t, "map[string]Base", genModel.Properties[0].GoType) {
+			buf := bytes.NewBuffer(nil)
+			err := modelTemplate.Execute(buf, genModel)
+			if assert.NoError(t, err) {
+				b, err := formatGoFile("ifacedmap.go", buf.Bytes())
+				if assert.NoError(t, err) {
+					res := string(b)
+					assertInCode(t, "MapNoWorky map[string]Base", res)
+				}
+			}
+		}
+	}
+}
diff --git a/generator/template_repo.go b/generator/template_repo.go
index 96470ce4..da206111 100644
--- a/generator/template_repo.go
+++ b/generator/template_repo.go
@@ -76,7 +76,8 @@ var FuncMap template.FuncMap = map[string]interface{}{
 
 		return inflect.Pluralize(sentence[0]) + " " + strings.Join(sentence[1:], " ")
 	},
-	"json": asJSON,
+	"json":       asJSON,
+	"prettyjson": asPrettyJSON,
 	"hasInsecure": func(arg []string) bool {
 		return swag.ContainsStringsCI(arg, "http") || swag.ContainsStringsCI(arg, "ws")
 	},
diff --git a/generator/templates.go b/generator/templates.go
index 144c143a..bc231e2e 100644
--- a/generator/templates.go
+++ b/generator/templates.go
@@ -124,3 +124,11 @@ func asJSON(data interface{}) (string, error) {
 	}
 	return string(b), nil
 }
+
+func asPrettyJSON(data interface{}) (string, error) {
+	b, err := json.MarshalIndent(data, "", "  ")
+	if err != nil {
+		return "", err
+	}
+	return string(b), nil
+}
diff --git a/generator/types.go b/generator/types.go
index 8d788dcb..a9d077a8 100644
--- a/generator/types.go
+++ b/generator/types.go
@@ -356,6 +356,7 @@ func (t *typeResolver) goTypeName(nm string) string {
 func (t *typeResolver) resolveObject(schema *spec.Schema, isAnonymous bool) (result resolvedType, err error) {
 	result.IsAnonymous = isAnonymous
 
+	result.IsBaseType = schema.Discriminator != ""
 	if !isAnonymous {
 		result.SwaggerType = "object"
 		result.GoType = t.goTypeName(t.ModelName)
@@ -394,7 +395,7 @@ func (t *typeResolver) resolveObject(schema *spec.Schema, isAnonymous bool) (res
 		result.SwaggerType = "object"
 		result.IsNullable = false
 		result.GoType = "map[string]" + et.GoType
-		if et.IsNullable && et.IsComplexObject {
+		if et.IsNullable && et.IsComplexObject && !et.IsBaseType {
 			result.GoType = "map[string]*" + et.GoType
 		}
 		return
@@ -521,6 +522,7 @@ type resolvedType struct {
 	IsTuple            bool
 	HasAdditionalItems bool
 	IsComplexObject    bool
+	IsBaseType         bool
 
 	GoType        string
 	AliasedType   string
