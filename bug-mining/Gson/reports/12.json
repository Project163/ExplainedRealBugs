{"url":"https://api.github.com/repos/google/gson/issues/2334","repository_url":"https://api.github.com/repos/google/gson","labels_url":"https://api.github.com/repos/google/gson/issues/2334/labels{/name}","comments_url":"https://api.github.com/repos/google/gson/issues/2334/comments","events_url":"https://api.github.com/repos/google/gson/issues/2334/events","html_url":"https://github.com/google/gson/issues/2334","id":1609740458,"node_id":"I_kwDOAfCA985f8rCq","number":2334,"title":"Malformed Unicode escape sequence causes `NumberFormatException` instead of `MalformedJsonException`","user":{"login":"Marcono1234","id":11685886,"node_id":"MDQ6VXNlcjExNjg1ODg2","avatar_url":"https://avatars.githubusercontent.com/u/11685886?v=4","gravatar_id":"","url":"https://api.github.com/users/Marcono1234","html_url":"https://github.com/Marcono1234","followers_url":"https://api.github.com/users/Marcono1234/followers","following_url":"https://api.github.com/users/Marcono1234/following{/other_user}","gists_url":"https://api.github.com/users/Marcono1234/gists{/gist_id}","starred_url":"https://api.github.com/users/Marcono1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marcono1234/subscriptions","organizations_url":"https://api.github.com/users/Marcono1234/orgs","repos_url":"https://api.github.com/users/Marcono1234/repos","events_url":"https://api.github.com/users/Marcono1234/events{/privacy}","received_events_url":"https://api.github.com/users/Marcono1234/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":189516447,"node_id":"MDU6TGFiZWwxODk1MTY0NDc=","url":"https://api.github.com/repos/google/gson/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-04T11:49:51Z","updated_at":"2023-03-06T16:24:11Z","closed_at":"2023-03-06T16:24:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Gson version\r\n2.10.1\r\n\r\n# Description\r\n`JsonReader` throws a `NumberFormatException` instead of a `MalformedJsonException` when it encounters a malformed Unicode escape sequence in the JSON data.\r\nThis actually works as designed:\r\nhttps://github.com/google/gson/blob/19983737ae5e45f90cbc50cbd7b70a0db9ed7a83/gson/src/main/java/com/google/gson/stream/JsonReader.java#L1590-L1591\r\n\r\nHowever, it is questionable whether that design is really a good choice because a `MalformedJsonException` seems to fit better here, especially since other malformed escape sequences do cause a `MalformedJsonException`.\r\n\r\nNote that `NumberFormatException` being thrown is apparently not publicly documented, so changing this should be rather safe to do.\r\n\r\n## Expected behavior\r\nA `MalformedJsonException` is thrown for malformed Unicode escape sequences.\r\n\r\n## Actual behavior\r\nA `NumberFormatException` is thrown.\r\n\r\n# Reproduction steps\r\n```java\r\nReader reader = new StringReader(\"\\\"\\\\uXYZ\\\"\");\r\nJsonReader jsonReader = new JsonReader(reader);\r\njsonReader.nextString();\r\n```\r\n","closed_by":{"login":"eamonnmcmanus","id":5246810,"node_id":"MDQ6VXNlcjUyNDY4MTA=","avatar_url":"https://avatars.githubusercontent.com/u/5246810?v=4","gravatar_id":"","url":"https://api.github.com/users/eamonnmcmanus","html_url":"https://github.com/eamonnmcmanus","followers_url":"https://api.github.com/users/eamonnmcmanus/followers","following_url":"https://api.github.com/users/eamonnmcmanus/following{/other_user}","gists_url":"https://api.github.com/users/eamonnmcmanus/gists{/gist_id}","starred_url":"https://api.github.com/users/eamonnmcmanus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eamonnmcmanus/subscriptions","organizations_url":"https://api.github.com/users/eamonnmcmanus/orgs","repos_url":"https://api.github.com/users/eamonnmcmanus/repos","events_url":"https://api.github.com/users/eamonnmcmanus/events{/privacy}","received_events_url":"https://api.github.com/users/eamonnmcmanus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google/gson/issues/2334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google/gson/issues/2334/timeline","performed_via_github_app":null,"state_reason":"completed"}