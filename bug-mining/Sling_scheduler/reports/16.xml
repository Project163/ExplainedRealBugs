<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:38:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-4826] WebConsolePrinter.testConsolePrinter always fails on Java 8</title>
                <link>https://issues.apache.org/jira/browse/SLING-4826</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;On builds.apache.org the test fails with Java 8 but passes with Java 7. I&apos;ve verified that the same happens locally, so this is not a flaky test.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Error Message&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Expecting regexp match: &apos;Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2&apos; / &apos;^Job.*testName3.*&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Stacktrace&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: Expecting regexp match: &apos;Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2&apos; / &apos;^Job.*testName3.*&apos;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.apache.sling.commons.scheduler.impl.WebConsolePrinterTest.assertRegexp(WebConsolePrinterTest.java:86)
	at org.apache.sling.commons.scheduler.impl.WebConsolePrinterTest.testConsolePrinter(WebConsolePrinterTest.java:71)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Standard Error&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;373 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPoolManager - Startet Apache Sling Thread Pool Manager: org.apache.sling.commons.threads.impl.DefaultThreadPoolManager
373 [main] ERROR org.apache.sling.commons.threads.impl.DefaultThreadPoolManager - Configuration admin is not available.
373 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Initializing thread pool [testName]  ...
373 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Thread pool [testName] initialized.
373 [main] INFO org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
373 [main] INFO org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.2.1 created.
373 [main] INFO org.quartz.simpl.RAMJobStore - RAMJobStore initialized.
373 [main] INFO org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.2.1) &apos;ApacheSling&apos; with instanceId &apos;Mon_Jun_22_08:44:40_UTC_2015&apos;
  Scheduler class: &apos;org.quartz.core.QuartzScheduler&apos; - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool &apos;org.apache.sling.commons.scheduler.impl.QuartzScheduler$QuartzThreadPool&apos; - with 5 threads.
  Using job-store &apos;org.quartz.simpl.RAMJobStore&apos; - which does not support persistence. and is not clustered.

374 [main] INFO org.quartz.impl.DirectSchedulerFactory - Quartz scheduler &apos;ApacheSling
374 [main] INFO org.quartz.impl.DirectSchedulerFactory - Quartz scheduler version: 2.2.1
374 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 started.
378 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 shutting down.
378 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 paused.
378 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 shutdown complete.
378 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Shutting down thread pool [testName] ...
378 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Thread pool [testName] is shut down.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12839487">SLING-4826</key>
            <summary>WebConsolePrinter.testConsolePrinter always fails on Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jun 2015 09:14:21 +0000</created>
                <updated>Fri, 14 Aug 2015 04:56:32 +0000</updated>
                            <resolved>Mon, 22 Jun 2015 12:30:15 +0000</resolved>
                                    <version>Commons Scheduler 2.4.8</version>
                                    <fixVersion>Commons Scheduler 2.4.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14595563" author="rombert" created="Mon, 22 Jun 2015 09:17:44 +0000"  >&lt;p&gt;Based on the console output and previous experience with tests failing on Java 8, it looks like the test has strict expectations related to the order in which information is returned, but that order is not enforced by the backing data structures ( e.g. a &lt;tt&gt;HashSet&lt;/tt&gt; ). &lt;/p&gt;</comment>
                            <comment id="14595566" author="rombert" created="Mon, 22 Jun 2015 09:23:30 +0000"  >&lt;p&gt;Minor preparatory cleanup in &lt;a href=&quot;https://svn.apache.org/r1686818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1686818&lt;/a&gt; - use a StringWriter instead of a FileWriter&lt;/p&gt;</comment>
                            <comment id="14595579" author="bdelacretaz" created="Mon, 22 Jun 2015 09:39:09 +0000"  >&lt;p&gt;Confirmed, I see the same issue in my environment. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=petr.shypila&quot; class=&quot;user-hover&quot; rel=&quot;petr.shypila&quot;&gt;petr.shypila&lt;/a&gt; could you have a look? This is one of the tests that you supplied for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4735&quot; title=&quot;New tests for commons.scheduler module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4735&quot;&gt;&lt;del&gt;SLING-4735&lt;/del&gt;&lt;/a&gt; - let us know if you need any help!&lt;/p&gt;</comment>
                            <comment id="14595737" author="petr.shypila" created="Mon, 22 Jun 2015 10:36:27 +0000"  >&lt;p&gt;Same behavior on my environment. Investigating that.&lt;/p&gt;</comment>
                            <comment id="14595790" author="petr.shypila" created="Mon, 22 Jun 2015 11:21:31 +0000"  >&lt;p&gt;So the problem was quite simple. The Set of &lt;tt&gt;org.quartz.JobKey&lt;/tt&gt; returned by &lt;tt&gt;org.quartz.Scheduler&lt;/tt&gt; has another order in a for loop. So in Java 7 WebConsolePrinter produces this content:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Job : testName3, class: java.lang.Thread, concurrent: true, bundleId: 3, serviceId: 3
Trigger : Trigger &apos;DEFAULT.testName3&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 06:13:00 VET 2015

Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2
Trigger : Trigger &apos;DEFAULT.testName2&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 06:13:00 VET 2015

Job : testName1, class: java.lang.Thread, concurrent: true, bundleId: 1, serviceId: 1
Trigger : Trigger &apos;DEFAULT.testName1&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 06:13:00 VET 2015
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But in Java 8 this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2
Trigger : Trigger &apos;DEFAULT.testName2&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 13:47:00 MSK 2015

Job : testName1, class: java.lang.Thread, concurrent: true, bundleId: 1, serviceId: 1
Trigger : Trigger &apos;DEFAULT.testName1&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 13:47:00 MSK 2015

Job : testName3, class: java.lang.Thread, concurrent: true, bundleId: 3, serviceId: 3
Trigger : Trigger &apos;DEFAULT.testName3&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 13:47:00 MSK 2015
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have fixed this problem by regular expression modification. Please take a look in a patch.&lt;/p&gt;</comment>
                            <comment id="14595848" author="rombert" created="Mon, 22 Jun 2015 12:30:15 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;https://svn.apache.org/r1686847&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1686847&lt;/a&gt;, thanks for the fix!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12831900">SLING-4735</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12741013" name="SLING-4826_Tests_Fails_on_Java_8.patch" size="1857" author="petr.shypila" created="Mon, 22 Jun 2015 11:21:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gbrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>