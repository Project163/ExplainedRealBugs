<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:38:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-4981] Deadlock involving Scheduler Whiteboard</title>
                <link>https://issues.apache.org/jira/browse/SLING-4981</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I repeatedly observed a deadlock situation in an AEM 6.1 installation (involving custom code).&lt;/p&gt;

&lt;p&gt;The result, amongst others, is a blocked SCR Actor thread.&lt;/p&gt;

&lt;p&gt;Hypothesis: I suspect that this can occur in situations where a scheduled Job (A) has a reference to another SCR component (B) that is lazily initialized (immediate=false) and itself registered via the whiteboard. If A is disabled while B is being added by the Scheduler, this triggers deregistration of B as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; could you please take a look at the attached thread-dump? Several subsequent thread-dumps showed no progress. I would appreciate your opinion on this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860933">SLING-4981</key>
            <summary>Deadlock involving Scheduler Whiteboard</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2015 08:31:45 +0000</created>
                <updated>Mon, 14 Dec 2015 21:24:54 +0000</updated>
                            <resolved>Fri, 4 Sep 2015 13:41:38 +0000</resolved>
                                    <version>Commons Scheduler 2.4.6</version>
                                    <fixVersion>Commons Scheduler 2.4.12</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14725057" author="cziegeler" created="Tue, 1 Sep 2015 09:27:03 +0000"  >&lt;p&gt;I suggest you give it a try with removing the &quot;synchronized&quot; for the three methods in the ServiceTrackerCustomizer implementation and see what happens. I don&apos;t think these really need to be sync&apos;ed&lt;/p&gt;</comment>
                            <comment id="14730838" author="jsedding" created="Fri, 4 Sep 2015 13:41:38 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1701254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1701254&lt;/a&gt; by removing the &lt;tt&gt;synchronized&lt;/tt&gt; keyword from all callbacks of the &lt;tt&gt;ServiceTrackerCustomizer&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In local tests I could re-create the deadlock from the attached dump by repeatedly restarting a bundle that registered several scheduled tasks on startup and subsequently unregistered some of them again.&lt;/p&gt;

&lt;p&gt;With my changes I was not able to reproduce.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12753486" name="scheduler-scr-deadlock.log" size="120897" author="jsedding" created="Tue, 1 Sep 2015 08:32:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jmzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>