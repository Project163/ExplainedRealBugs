<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:37:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-1040] Too much synchronization in QuartzScheduler?</title>
                <link>https://issues.apache.org/jira/browse/SLING-1040</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In one of my jcrinstall tests I got a deadlock when jcrinstall tried to stop the org.apache.sling.commons.scheduler bundle while it was being started by the Felix ComponentActorThread.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach the deadlock stack trace - wondering if some of the synchronized sections in QuartzScheduler could be removed, to avoid such issues.&lt;/p&gt;

&lt;p&gt;That might be a jcrinstall/Felix problem as well: stopping a bundle while it is being activated doesn&apos;t sound right, but I&apos;m not sure how to prevent this, as the ComponentActorThread actions run asynchronously.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429912">SLING-1040</key>
            <summary>Too much synchronization in QuartzScheduler?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jul 2009 08:26:05 +0000</created>
                <updated>Fri, 10 Jul 2009 06:10:34 +0000</updated>
                            <resolved>Fri, 10 Jul 2009 06:10:34 +0000</resolved>
                                    <version>Commons Scheduler 2.0.4</version>
                                    <fixVersion>Commons Scheduler 2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12729107" author="fmeschbe" created="Thu, 9 Jul 2009 08:39:40 +0000"  >&lt;p&gt;It looks like the QuartzScheduler is holding a lock on an Array Liste while calling into the framework. Probably the lock should be released before calling into the framework (caveat: not looking at the code, just the stacktrace)&lt;/p&gt;</comment>
                            <comment id="12729109" author="bdelacretaz" created="Thu, 9 Jul 2009 08:44:10 +0000"  >&lt;p&gt;Right - I guess the problematic section is&lt;/p&gt;

&lt;p&gt;  protected void activate(ComponentContext ctx) throws Exception {&lt;br/&gt;
        this.context = ctx;&lt;br/&gt;
        synchronized ( this.registeredJobs ) {&lt;br/&gt;
            this.init();&lt;br/&gt;
            for( Object[] arr : this.registeredJobs ) {&lt;br/&gt;
                try {&lt;br/&gt;
                    this.register((String)arr&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, (ServiceReference)arr&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;);&lt;/p&gt;

&lt;p&gt;The lock should be released before calling this.register(...)&lt;/p&gt;

&lt;p&gt;That code was written by Carsten, so I&apos;ll let him have a look instead of messing with it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12729535" author="cziegeler" created="Fri, 10 Jul 2009 06:10:34 +0000"  >&lt;p&gt;The synchronization was way to aggressive and has been introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-984&quot; title=&quot;Registered quartz scheduler should use unique name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-984&quot;&gt;&lt;del&gt;SLING-984&lt;/del&gt;&lt;/a&gt;; I&apos;Ve cleaned it up now to a minimum and also fixed some other minor issues in revision: 792809&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412974" name="deadlock-trace.txt" size="33721" author="bdelacretaz" created="Thu, 9 Jul 2009 08:31:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>175961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1edcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>