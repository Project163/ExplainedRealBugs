<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:37:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-4460] QuartzScheduler component is registered resulting in sling jobs not being sent to job consumer</title>
                <link>https://issues.apache.org/jira/browse/SLING-4460</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sling jobs were not being processed on an instance due to the QuartzScheduler component being in a registered state (see attached image for the component&#8217;s state). The Sling job processor was not sending the job to our job consumer. From our error logs we could see that the job was created but the job consumer never received it. Looking at the crx we could see the job under /var/eventing. Our bundles &amp;amp; components were all active (we explicitly checked the component that consumes the job).&lt;/p&gt;

&lt;p&gt;Occasionally we see this problem on a restart of a production instance. This is an instance on our QA environment (we are hoping they are the same but will continue to monitor on subsequent production deployments).&lt;/p&gt;

&lt;p&gt;We noticed in the log file lots of exceptions related to QuartzScheduler indicating that the &#8220;Scheduler is not available anymore.&#8221; Truncated exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;26.02.2015 22:05:16.904 *WARN* [&amp;lt;redacted&amp;gt; [1424988304541] POST /system/console/bundles/342 HTTP/1.1] org.apache.sling.discovery.impl.DiscoveryServiceImpl sendTopologyEvent: handler threw exception. handler: org.apache.sling.event.impl.jobs.config.JobManagerConfiguration@651e2ff3, exception: java.lang.IllegalStateException: Scheduler is not available anymore. java.lang.IllegalStateException: Scheduler is not available anymore.
        at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:634)
        at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:578)
        at org.apache.sling.commons.scheduler.impl.SchedulerServiceFactory.schedule(SchedulerServiceFactory.java:56)
        at org.apache.sling.event.impl.jobs.config.JobManagerConfiguration.startProcessing(JobManagerConfiguration.java:500)
        at org.apache.sling.event.impl.jobs.config.JobManagerConfiguration.handleTopologyEvent(JobManagerConfiguration.java:551)
        at org.apache.sling.discovery.impl.DiscoveryServiceImpl.sendTopologyEvent(DiscoveryServiceImpl.java:192)
        at org.apache.sling.discovery.impl.DiscoveryServiceImpl.handlePotentialTopologyChange(DiscoveryServiceImpl.java:484)
        at org.apache.sling.discovery.impl.DiscoveryServiceImpl.bindPropertyProviderInteral(DiscoveryServiceImpl.java:272)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From grepping the error log we saw that the QuartzScheduler has been shutdown previously:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; cat error.log.2015-02-25 error.log | grep QuartzScheduler
25.02.2015 19:16:31.246 *INFO* [OsgiInstallerImpl] org.quartz.core.QuartzScheduler Scheduler ApacheSling_$_Tue_Feb_24_10:52:11_UTC_2015 shutting down.
25.02.2015 19:16:31.246 *INFO* [OsgiInstallerImpl] org.quartz.core.QuartzScheduler Scheduler ApacheSling_$_Tue_Feb_24_10:52:11_UTC_2015 paused.
25.02.2015 19:16:31.251 *INFO* [OsgiInstallerImpl] org.quartz.core.QuartzScheduler Scheduler ApacheSling_$_Tue_Feb_24_10:52:11_UTC_2015 shutdown complete.
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:634)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:578)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:634)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:578)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:634)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:578)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:634)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:578)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:634)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:578)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:634)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stop-Starting the QuartzScheduler resulted in all the jobs being processed.&lt;/p&gt;</description>
                <environment>3.3.4-11.omtr.el6.x86_64 GNU/Linux, java version &amp;quot;1.7.0_60&amp;quot;</environment>
        <key id="12778132">SLING-4460</key>
            <summary>QuartzScheduler component is registered resulting in sling jobs not being sent to job consumer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="kenrussell">Ken Russell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Feb 2015 05:36:18 +0000</created>
                <updated>Wed, 4 Mar 2015 14:24:15 +0000</updated>
                            <resolved>Fri, 27 Feb 2015 17:58:29 +0000</resolved>
                                    <version>Commons Scheduler 2.4.4</version>
                                    <fixVersion>Commons Scheduler 2.4.6</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14340452" author="cziegeler" created="Fri, 27 Feb 2015 17:55:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenrussell&quot; class=&quot;user-hover&quot; rel=&quot;kenrussell&quot;&gt;kenrussell&lt;/a&gt; There is indeed a problem with the scheduler service - it only gets active if another service depends on it; which is not what we want&lt;/p&gt;</comment>
                            <comment id="14340458" author="cziegeler" created="Fri, 27 Feb 2015 17:58:29 +0000"  >&lt;p&gt;Fixed by making the service immediate&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12701275" name="QuartzSchedulerComponent.pdf" size="246523" author="kenrussell" created="Fri, 27 Feb 2015 05:37:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i264vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>