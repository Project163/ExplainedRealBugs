{"url":"https://api.github.com/repos/JodaOrg/joda-time/issues/187","repository_url":"https://api.github.com/repos/JodaOrg/joda-time","labels_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/187/labels{/name}","comments_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/187/comments","events_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/187/events","html_url":"https://github.com/JodaOrg/joda-time/issues/187","id":44642432,"node_id":"MDU6SXNzdWU0NDY0MjQzMg==","number":187,"title":"Let \"withZone\" method change the original locale on PeriodFormatter","user":{"login":"basil-bourque","id":3393964,"node_id":"MDQ6VXNlcjMzOTM5NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/3393964?v=4","gravatar_id":"","url":"https://api.github.com/users/basil-bourque","html_url":"https://github.com/basil-bourque","followers_url":"https://api.github.com/users/basil-bourque/followers","following_url":"https://api.github.com/users/basil-bourque/following{/other_user}","gists_url":"https://api.github.com/users/basil-bourque/gists{/gist_id}","starred_url":"https://api.github.com/users/basil-bourque/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/basil-bourque/subscriptions","organizations_url":"https://api.github.com/users/basil-bourque/orgs","repos_url":"https://api.github.com/users/basil-bourque/repos","events_url":"https://api.github.com/users/basil-bourque/events{/privacy}","received_events_url":"https://api.github.com/users/basil-bourque/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":42317690,"node_id":"MDU6TGFiZWw0MjMxNzY5MA==","url":"https://api.github.com/repos/JodaOrg/joda-time/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null},{"id":42318930,"node_id":"MDU6TGFiZWw0MjMxODkzMA==","url":"https://api.github.com/repos/JodaOrg/joda-time/labels/Fixed","name":"Fixed","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2014-10-02T03:05:32Z","updated_at":"2015-01-12T01:00:15Z","closed_at":"2015-01-12T00:09:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When accessing a `PeriodFormatter` with the method `PeriodFormat` > [`getDefault()`](http://www.joda.org/joda-time/apidocs/org/joda/time/format/PeriodFormat.html#getDefault%28%29) the locale is English, and with `PeriodFormat` > [`wordBased()`](http://www.joda.org/joda-time/apidocs/org/joda/time/format/PeriodFormat.html#wordBased%28%29) the locale is current JVM default locale. That is okay. \n\nThe problem is that in both cases, calling `withLocale()` on the resulting [`PeriodFormatter`](http://www.joda.org/joda-time/apidocs/org/joda/time/format/PeriodFormatter.html) has no effect. The locale as originally set remains. This behavior is inconsistent with other classes such as `DateTime` that always alters the locale when calling `withLocale`. And this behavior is illogical; why offer a `withLocale` method that does nothing?\n\nI suggest changing the behavior of PeriodFormatter to always respect a call to `withLocale` regardless of how the formatter was obtained.\n\nExample code follows.\n\n<!-- language: lang-java -->\n\n```\nDateTime now = DateTime.now( DateTimeZone.forID( \"America/Montreal\" ) );\nLocale locale = Locale.CANADA_FRENCH; // Same behavior for Locale.CANADA_FRENCH, Locale.FRENCH, and Locale.GERMAN.\n\n// Calling \"withLocale\" works on a DateTimeFormatter. LOCALE WORKS.\nDateTimeFormatter formatter = DateTimeFormat.forStyle( \"FF\" ).withLocale( locale );\nString outputDateTime = formatter.print( now );\n\n// Calling \"withLocale\" fails on a PeriodFormatter, has no effect. LOCALE FAILS.\nDateTime later = now.plusHours( 2 ).plusMinutes( 5 );\nPeriod period = new Period( now , later );\nPeriodFormatter periodFormatterDefault = PeriodFormat.getDefault().withLocale( locale );\nString outputPeriodDefault = periodFormatterDefault.print( period );\n\n// Same problem if period formatter obtained with \"wordBased\" (calling \"withLocale\" has no effect). LOCALE FAILS.\nPeriodFormatter periodFormatterWordBased = PeriodFormat.wordBased().withLocale( locale );\nString outputPeriodWordBased = periodFormatterWordBased.print( period );\n\n// The only way to set Locale is by passing one to \"wordBased()\". LOCALE WORKS.\nPeriodFormatter periodFormatterWordBasedPassingLocale = PeriodFormat.wordBased( locale );\nString outputPeriodWordBasedPassingLocale = periodFormatterWordBasedPassingLocale.print( period );\n\nSystem.out.println( \"outputDateTime: \" + outputDateTime );\nSystem.out.println( \"outputPeriodDefault: \" + outputPeriodDefault );\nSystem.out.println( \"outputPeriodWordBased: \" + outputPeriodWordBased );\nSystem.out.println( \"outputPeriodWordBasedPassingLocale: \" + outputPeriodWordBasedPassingLocale );\n```\n\nWhen run.\n\n```\noutputDateTime: mercredi 1 octobre 2014 23 h 01 EDT\noutputPeriodDefault: 2 hours and 5 minutes\noutputPeriodWordBased: 2 hours and 5 minutes\noutputPeriodWordBasedPassingLocale: 2 heures et 5 minutes\n```\n","closed_by":{"login":"jodastephen","id":213212,"node_id":"MDQ6VXNlcjIxMzIxMg==","avatar_url":"https://avatars.githubusercontent.com/u/213212?v=4","gravatar_id":"","url":"https://api.github.com/users/jodastephen","html_url":"https://github.com/jodastephen","followers_url":"https://api.github.com/users/jodastephen/followers","following_url":"https://api.github.com/users/jodastephen/following{/other_user}","gists_url":"https://api.github.com/users/jodastephen/gists{/gist_id}","starred_url":"https://api.github.com/users/jodastephen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jodastephen/subscriptions","organizations_url":"https://api.github.com/users/jodastephen/orgs","repos_url":"https://api.github.com/users/jodastephen/repos","events_url":"https://api.github.com/users/jodastephen/events{/privacy}","received_events_url":"https://api.github.com/users/jodastephen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/JodaOrg/joda-time/issues/187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/187/timeline","performed_via_github_app":null,"state_reason":"completed"}