{"url":"https://api.github.com/repos/JodaOrg/joda-time/issues/674","repository_url":"https://api.github.com/repos/JodaOrg/joda-time","labels_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/674/labels{/name}","comments_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/674/comments","events_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/674/events","html_url":"https://github.com/JodaOrg/joda-time/issues/674","id":1458408163,"node_id":"I_kwDOABrMvs5W7Yrj","number":674,"title":"testPropertyGetMonthOfYear failures with CLDR 39","user":{"login":"cushon","id":478458,"node_id":"MDQ6VXNlcjQ3ODQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/478458?v=4","gravatar_id":"","url":"https://api.github.com/users/cushon","html_url":"https://github.com/cushon","followers_url":"https://api.github.com/users/cushon/followers","following_url":"https://api.github.com/users/cushon/following{/other_user}","gists_url":"https://api.github.com/users/cushon/gists{/gist_id}","starred_url":"https://api.github.com/users/cushon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cushon/subscriptions","organizations_url":"https://api.github.com/users/cushon/orgs","repos_url":"https://api.github.com/users/cushon/repos","events_url":"https://api.github.com/users/cushon/events{/privacy}","received_events_url":"https://api.github.com/users/cushon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":42317690,"node_id":"MDU6TGFiZWw0MjMxNzY5MA==","url":"https://api.github.com/repos/JodaOrg/joda-time/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null},{"id":42318930,"node_id":"MDU6TGFiZWw0MjMxODkzMA==","url":"https://api.github.com/repos/JodaOrg/joda-time/labels/Fixed","name":"Fixed","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-11-21T18:39:45Z","updated_at":"2023-03-05T21:50:53Z","closed_at":"2023-03-05T21:50:53Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Key information\r\n\r\n- Joda-Time version: 48b30023e56e9f748a795659526ce4e162f9d5b2\r\n- Result of `TimeZone.getDefault()`: `sun.util.calendar.ZoneInfo[id=\"America/Los_Angeles\",offset=-28800000,dstSavings=3600000,useDaylight=true,transitions=185,lastRule=java.util.SimpleTimeZone[id=America/Los_Angeles,offset=-28800000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=3,startMonth=2,startDay=8,startDayOfWeek=1,startTime=7200000,startTimeMode=0,endMode=3,endMonth=10,endDay=1,endDayOfWeek=1,endTime=7200000,endTimeMode=0]]`\r\n- Result of `DateTimeZone.getDefault()`: `America/Los_Angeles`\r\n\r\n### Problem description\r\n\r\nWhen running on JDK 17, several Joda tests fail due to a change to the JDK's CLDR data: [JDK-8265308](https://bugs.openjdk.org/browse/JDK-8265308)\r\n\r\n### Test case\r\n\r\n\r\n```\r\n$ java -fullversion\r\nopenjdk full version \"17.0.2+8-86\"\r\n```\r\n\r\n```\r\n$ mvn clean test\r\n...\r\n[ERROR] Tests run: 4232, Failures: 4, Errors: 0, Skipped: 0, Time elapsed: 2.129 s <<< FAILURE! - in org.joda.time.TestAllPackages\r\n[ERROR] testPropertyGetMonthOfYear(org.joda.time.TestDateTime_Properties)  Time elapsed: 0.004 s  <<< FAILURE!\r\njunit.framework.AssertionFailedError: expected:<3> but was:<4>\r\n        at junit.framework.Assert.fail(Assert.java:47)\r\n        at junit.framework.Assert.failNotEquals(Assert.java:280)\r\n        at junit.framework.Assert.assertEquals(Assert.java:64)\r\n        at junit.framework.Assert.assertEquals(Assert.java:198)\r\n        at junit.framework.Assert.assertEquals(Assert.java:204)\r\n        at org.joda.time.TestDateTime_Properties.testPropertyGetMonthOfYear(TestDateTime_Properties.java:361)\r\n\r\n[ERROR] testPropertyGetMonthOfYear(org.joda.time.TestMutableDateTime_Properties)  Time elapsed: 0 s  <<< FAILURE!\r\njunit.framework.AssertionFailedError: expected:<3> but was:<4>\r\n        at junit.framework.Assert.fail(Assert.java:47)\r\n        at junit.framework.Assert.failNotEquals(Assert.java:280)\r\n        at junit.framework.Assert.assertEquals(Assert.java:64)\r\n        at junit.framework.Assert.assertEquals(Assert.java:198)\r\n        at junit.framework.Assert.assertEquals(Assert.java:204)\r\n        at org.joda.time.TestMutableDateTime_Properties.testPropertyGetMonthOfYear(TestMutableDateTime_Properties.java:247)\r\n\r\n[ERROR] testPropertyGetMonthOfYear(org.joda.time.TestDateMidnight_Properties)  Time elapsed: 0 s  <<< FAILURE!\r\njunit.framework.AssertionFailedError: expected:<3> but was:<4>\r\n        at junit.framework.Assert.fail(Assert.java:47)\r\n        at junit.framework.Assert.failNotEquals(Assert.java:280)\r\n        at junit.framework.Assert.assertEquals(Assert.java:64)\r\n        at junit.framework.Assert.assertEquals(Assert.java:198)\r\n        at junit.framework.Assert.assertEquals(Assert.java:204)\r\n        at org.joda.time.TestDateMidnight_Properties.testPropertyGetMonthOfYear(TestDateMidnight_Properties.java:238)\r\n\r\n[ERROR] testPropertyGetMonthOfYear(org.joda.time.TestMonthDay_Properties)  Time elapsed: 0.001 s  <<< FAILURE!\r\njunit.framework.ComparisonFailure: expected:<Sep[]> but was:<Sep[t]>\r\n        at junit.framework.Assert.assertEquals(Assert.java:81)\r\n        at junit.framework.Assert.assertEquals(Assert.java:87)\r\n        at org.joda.time.TestMonthDay_Properties.testPropertyGetMonthOfYear(TestMonthDay_Properties.java:93)\r\n\r\n```\r\n\r\nSince the JDK 17 javac doesn't support `-source 5 -target 5` I had to update the build to use Java 8, but compiling the tests as Java 5 and running on JDK 17 would reproduce the same issue:\r\n\r\n```diff\r\ngit diff\r\ndiff --git a/pom.xml b/pom.xml\r\nindex 486dd702..d6e60402 100644\r\n--- a/pom.xml\r\n+++ b/pom.xml\r\n@@ -1069,8 +1069,8 @@\r\n     <nexus-staging-maven-plugin.version>1.6.13</nexus-staging-maven-plugin.version>\r\n     <!-- Properties for maven-compiler-plugin -->\r\n     <maven.compiler.compilerVersion>1.5</maven.compiler.compilerVersion>\r\n-    <maven.compiler.source>1.5</maven.compiler.source>\r\n-    <maven.compiler.target>1.5</maven.compiler.target>\r\n+    <maven.compiler.source>8</maven.compiler.source>\r\n+    <maven.compiler.target>8</maven.compiler.target>\r\n     <maven.compiler.fork>true</maven.compiler.fork>\r\n     <maven.compiler.verbose>false</maven.compiler.verbose>\r\n     <maven.compiler.optimize>true</maven.compiler.optimize>\r\n```","closed_by":{"login":"jodastephen","id":213212,"node_id":"MDQ6VXNlcjIxMzIxMg==","avatar_url":"https://avatars.githubusercontent.com/u/213212?v=4","gravatar_id":"","url":"https://api.github.com/users/jodastephen","html_url":"https://github.com/jodastephen","followers_url":"https://api.github.com/users/jodastephen/followers","following_url":"https://api.github.com/users/jodastephen/following{/other_user}","gists_url":"https://api.github.com/users/jodastephen/gists{/gist_id}","starred_url":"https://api.github.com/users/jodastephen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jodastephen/subscriptions","organizations_url":"https://api.github.com/users/jodastephen/orgs","repos_url":"https://api.github.com/users/jodastephen/repos","events_url":"https://api.github.com/users/jodastephen/events{/privacy}","received_events_url":"https://api.github.com/users/jodastephen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/JodaOrg/joda-time/issues/674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/674/timeline","performed_via_github_app":null,"state_reason":"completed"}