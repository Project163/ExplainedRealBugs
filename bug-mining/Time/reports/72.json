{"url":"https://api.github.com/repos/JodaOrg/joda-time/issues/373","repository_url":"https://api.github.com/repos/JodaOrg/joda-time","labels_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/373/labels{/name}","comments_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/373/comments","events_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/373/events","html_url":"https://github.com/JodaOrg/joda-time/issues/373","id":153449240,"node_id":"MDU6SXNzdWUxNTM0NDkyNDA=","number":373,"title":"Incorrect handling of IANA time zone data","user":{"login":"jskeet","id":17011,"node_id":"MDQ6VXNlcjE3MDEx","avatar_url":"https://avatars.githubusercontent.com/u/17011?v=4","gravatar_id":"","url":"https://api.github.com/users/jskeet","html_url":"https://github.com/jskeet","followers_url":"https://api.github.com/users/jskeet/followers","following_url":"https://api.github.com/users/jskeet/following{/other_user}","gists_url":"https://api.github.com/users/jskeet/gists{/gist_id}","starred_url":"https://api.github.com/users/jskeet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jskeet/subscriptions","organizations_url":"https://api.github.com/users/jskeet/orgs","repos_url":"https://api.github.com/users/jskeet/repos","events_url":"https://api.github.com/users/jskeet/events{/privacy}","received_events_url":"https://api.github.com/users/jskeet/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":42317690,"node_id":"MDU6TGFiZWw0MjMxNzY5MA==","url":"https://api.github.com/repos/JodaOrg/joda-time/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-05-06T13:20:55Z","updated_at":"2016-10-27T17:32:45Z","closed_at":"2016-08-18T23:22:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Key information\n- Joda-Time version: 2.9.3\n- Result of `TimeZone.getDefault()`: `sun.util.calendar.ZoneInfo[id=\"Europe/London\", [...]]`\n- Result of `DateTimeZone.getDefault()`: `Europe/London`\n### Problem description\n\nMy [tzvalidate](https://github.com/nodatime/tzvalidate) project aims to make it easy to validate that code intepreting the IANA time zone data all does it in the same way. Joda Time appears to have some discrepancies. (Without looking into the code, it's hard to guess how many code changes would be required.)\n### Test case\n\nAs a single example, using the 2016d data release, Joda Time claims America/Argentina/Catamarca had a transition at 1999-10-03T04:00:00Z; I believe this transition should be at 1999-10-03T03:00:00Z. (This was just a change from standard to daylight, but without any overall offset change.\n\nhttp://www.timeanddate.com/time/zone/argentina/catamarca confirms that this would have been at 3am UTC (midnight local)\n\nSample code:\n\n``` java\nimport java.io.*;\nimport java.util.*;\nimport org.joda.time.*;\nimport org.joda.time.tz.*;\n\npublic class Test\n{\n    public static void main(String[] args) throws Exception\n    {\n        ZoneInfoCompiler compiler = new ZoneInfoCompiler();\n        File[] files = { new File(\"southamerica\") }; // From 2016d\n        Map<String, DateTimeZone> zones = compiler.compile(null, files);\n        DateTimeZone zone = zones.get(\"America/Argentina/Catamarca\");\n\n        DateTime midJune = new DateTime(1999, 6, 15, 0, 0, 0, DateTimeZone.UTC);\n        long millis = zone.nextTransition(midJune.getMillis());\n        DateTime transition = new DateTime(millis, DateTimeZone.UTC);\n        System.out.println(transition);\n    }\n}\n```\n\nExpected output: 1999-10-03T03:00:00.000Z  \nActual output: 1999-10-03T04:00:00.000Z\n\nI'm very happy to provide the full tzvalidate files for 2016d - the one I'm treating as \"canonical\" agrees with both `zic` and Noda Time, as well as a third party implementation. I haven't attached the files here as they're rather large.\n","closed_by":{"login":"jodastephen","id":213212,"node_id":"MDQ6VXNlcjIxMzIxMg==","avatar_url":"https://avatars.githubusercontent.com/u/213212?v=4","gravatar_id":"","url":"https://api.github.com/users/jodastephen","html_url":"https://github.com/jodastephen","followers_url":"https://api.github.com/users/jodastephen/followers","following_url":"https://api.github.com/users/jodastephen/following{/other_user}","gists_url":"https://api.github.com/users/jodastephen/gists{/gist_id}","starred_url":"https://api.github.com/users/jodastephen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jodastephen/subscriptions","organizations_url":"https://api.github.com/users/jodastephen/orgs","repos_url":"https://api.github.com/users/jodastephen/repos","events_url":"https://api.github.com/users/jodastephen/events{/privacy}","received_events_url":"https://api.github.com/users/jodastephen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/JodaOrg/joda-time/issues/373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/JodaOrg/joda-time/issues/373/timeline","performed_via_github_app":null,"state_reason":"completed"}