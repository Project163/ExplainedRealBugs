diff --git a/.psalm/baseline.xml b/.psalm/baseline.xml
index 0f677a5f6..b98498217 100644
--- a/.psalm/baseline.xml
+++ b/.psalm/baseline.xml
@@ -219,7 +219,7 @@
       <code>$loader</code>
     </PossiblyNullPropertyAssignmentValue>
     <PossiblyUndefinedVariable occurrences="1">
-      <code>$coverageFilterFromConfigurationFile</code>
+      <code>$codeCoverageConfiguration</code>
     </PossiblyUndefinedVariable>
   </file>
   <file src="src/Util/Annotation/DocBlock.php">
diff --git a/ChangeLog-9.3.md b/ChangeLog-9.3.md
index 718576865..c07e044b1 100644
--- a/ChangeLog-9.3.md
+++ b/ChangeLog-9.3.md
@@ -4,6 +4,10 @@ All notable changes of the PHPUnit 9.3 release series are documented in this fil
 
 ## [9.3.0] - 2020-08-07
 
+### Added
+
+* [#4260](https://github.com/sebastianbergmann/phpunit/issues/4260): `pathCoverage` attribute on the `phpunit/coverage` element of the XML configuration file for enabling path coverage for code coverage drivers that support it
+
 ### Changed
 
 * [#4264](https://github.com/sebastianbergmann/phpunit/pull/4264): Refactor logical operator constraints
diff --git a/phpunit.xsd b/phpunit.xsd
index 369ba677f..278469872 100644
--- a/phpunit.xsd
+++ b/phpunit.xsd
@@ -29,6 +29,7 @@
                 </xs:complexType>
             </xs:element>
         </xs:all>
+        <xs:attribute name="pathCoverage" type="xs:boolean" default="false"/>
         <xs:attribute name="includeUncoveredFiles" type="xs:boolean" default="true"/>
         <xs:attribute name="processUncoveredFiles" type="xs:boolean" default="false"/>
         <xs:attribute name="ignoreDeprecatedCodeUnits" type="xs:boolean" default="false"/>
diff --git a/src/Framework/TestCase.php b/src/Framework/TestCase.php
index b49549da5..9a9bc9657 100644
--- a/src/Framework/TestCase.php
+++ b/src/Framework/TestCase.php
@@ -726,8 +726,14 @@ public function run(TestResult $result = null): TestResult
                 $phar = '\'\'';
             }
 
+            $driverMethod = 'forLineCoverage';
+
             if ($result->getCodeCoverage()) {
                 $codeCoverageFilter = $result->getCodeCoverage()->filter();
+
+                if ($result->getCodeCoverage()->collectsBranchAndPathCoverage()) {
+                    $driverMethod = 'forLineAndPathCoverage';
+                }
             } else {
                 $codeCoverageFilter = null;
             }
@@ -753,6 +759,7 @@ public function run(TestResult $result = null): TestResult
                 'filename'                                   => $class->getFileName(),
                 'className'                                  => $class->getName(),
                 'collectCodeCoverageInformation'             => $coverage,
+                'driverMethod'                               => $driverMethod,
                 'data'                                       => $data,
                 'dataName'                                   => $dataName,
                 'dependencyInput'                            => $dependencyInput,
diff --git a/src/Runner/PhptTestCase.php b/src/Runner/PhptTestCase.php
index 783783a40..61ebe4f9d 100644
--- a/src/Runner/PhptTestCase.php
+++ b/src/Runner/PhptTestCase.php
@@ -162,7 +162,7 @@ public function run(TestResult $result = null): TestResult
         }
 
         if ($result->getCollectCodeCoverageInformation()) {
-            $this->renderForCoverage($code);
+            $this->renderForCoverage($code, $result->getCodeCoverage()->collectsBranchAndPathCoverage());
         }
 
         $timer = new Timer;
@@ -550,7 +550,7 @@ private function getCoverageFiles(): array
         ];
     }
 
-    private function renderForCoverage(string &$job): void
+    private function renderForCoverage(string &$job, bool $pathCoverage): void
     {
         $files = $this->getCoverageFiles();
 
@@ -586,10 +586,12 @@ private function renderForCoverage(string &$job): void
                 'globals'          => $globals,
                 'job'              => $files['job'],
                 'coverageFile'     => $files['coverage'],
+                'driverMethod'     => $pathCoverage ? 'forLineAndPathCoverage' : 'forLineCoverage',
             ]
         );
 
         \file_put_contents($files['job'], $job);
+
         $job = $template->render();
     }
 
diff --git a/src/TextUI/TestRunner.php b/src/TextUI/TestRunner.php
index 6595cdc48..a384af752 100644
--- a/src/TextUI/TestRunner.php
+++ b/src/TextUI/TestRunner.php
@@ -465,12 +465,6 @@ public function run(TestSuite $suite, array $arguments = [], array $warnings = [
             $codeCoverageReports = 0;
         }
 
-        if ($codeCoverageReports > 0 && !$this->runtime->canCollectCodeCoverage()) {
-            $this->writeMessage('Error', 'No code coverage driver is available');
-
-            $codeCoverageReports = 0;
-        }
-
         if ($codeCoverageReports > 0 || isset($arguments['xdebugFilterFile'])) {
             $coverageFilterFromConfigurationFile = false;
             $coverageFilterFromOption            = false;
@@ -563,63 +557,75 @@ public function run(TestSuite $suite, array $arguments = [], array $warnings = [
         }
 
         if ($codeCoverageReports > 0) {
-            $codeCoverage = new CodeCoverage(
-                Driver::forLineCoverage($this->codeCoverageFilter),
-                $this->codeCoverageFilter
-            );
+            try {
+                if ($codeCoverageConfiguration->pathCoverage()) {
+                    $driver = Driver::forLineAndPathCoverage($this->codeCoverageFilter);
+                } else {
+                    $driver = Driver::forLineCoverage($this->codeCoverageFilter);
+                }
 
-            $codeCoverage->excludeSubclassesOfThisClassFromUnintentionallyCoveredCodeCheck(Comparator::class);
+                $codeCoverage = new CodeCoverage(
+                    $driver,
+                    $this->codeCoverageFilter
+                );
 
-            if ($arguments['strictCoverage']) {
-                $codeCoverage->enableCheckForUnintentionallyCoveredCode();
-            }
+                $codeCoverage->excludeSubclassesOfThisClassFromUnintentionallyCoveredCodeCheck(Comparator::class);
 
-            if (isset($arguments['ignoreDeprecatedCodeUnitsFromCodeCoverage'])) {
-                if ($arguments['ignoreDeprecatedCodeUnitsFromCodeCoverage']) {
-                    $codeCoverage->ignoreDeprecatedCode();
-                } else {
-                    $codeCoverage->doNotIgnoreDeprecatedCode();
+                if ($arguments['strictCoverage']) {
+                    $codeCoverage->enableCheckForUnintentionallyCoveredCode();
                 }
-            }
 
-            if (isset($arguments['disableCodeCoverageIgnore'])) {
-                if ($arguments['disableCodeCoverageIgnore']) {
-                    $codeCoverage->disableAnnotationsForIgnoringCode();
-                } else {
-                    $codeCoverage->enableAnnotationsForIgnoringCode();
+                if (isset($arguments['ignoreDeprecatedCodeUnitsFromCodeCoverage'])) {
+                    if ($arguments['ignoreDeprecatedCodeUnitsFromCodeCoverage']) {
+                        $codeCoverage->ignoreDeprecatedCode();
+                    } else {
+                        $codeCoverage->doNotIgnoreDeprecatedCode();
+                    }
                 }
-            }
 
-            if (isset($arguments['configuration'])) {
-                \assert($arguments['configuration'] instanceof Configuration);
+                if (isset($arguments['disableCodeCoverageIgnore'])) {
+                    if ($arguments['disableCodeCoverageIgnore']) {
+                        $codeCoverage->disableAnnotationsForIgnoringCode();
+                    } else {
+                        $codeCoverage->enableAnnotationsForIgnoringCode();
+                    }
+                }
 
-                $codeCoverageConfiguration = $arguments['configuration']->codeCoverage();
+                if (isset($arguments['configuration'])) {
+                    \assert($arguments['configuration'] instanceof Configuration);
 
-                if ($codeCoverageConfiguration->hasNonEmptyListOfFilesToBeIncludedInCodeCoverageReport()) {
-                    if ($codeCoverageConfiguration->includeUncoveredFiles()) {
-                        $codeCoverage->includeUncoveredFiles();
-                    } else {
-                        $codeCoverage->excludeUncoveredFiles();
+                    $codeCoverageConfiguration = $arguments['configuration']->codeCoverage();
+
+                    if ($codeCoverageConfiguration->hasNonEmptyListOfFilesToBeIncludedInCodeCoverageReport()) {
+                        if ($codeCoverageConfiguration->includeUncoveredFiles()) {
+                            $codeCoverage->includeUncoveredFiles();
+                        } else {
+                            $codeCoverage->excludeUncoveredFiles();
+                        }
+
+                        if ($codeCoverageConfiguration->processUncoveredFiles()) {
+                            $codeCoverage->processUncoveredFiles();
+                        } else {
+                            $codeCoverage->doNotProcessUncoveredFiles();
+                        }
                     }
+                }
 
-                    if ($codeCoverageConfiguration->processUncoveredFiles()) {
-                        $codeCoverage->processUncoveredFiles();
+                if ($this->codeCoverageFilter->isEmpty()) {
+                    if (!$coverageFilterFromConfigurationFile && !$coverageFilterFromOption) {
+                        $this->writeMessage('Warning', 'No filter is configured, code coverage will not be processed');
                     } else {
-                        $codeCoverage->doNotProcessUncoveredFiles();
+                        $this->writeMessage('Warning', 'Incorrect filter configuration, code coverage will not be processed');
                     }
-                }
-            }
 
-            if ($this->codeCoverageFilter->isEmpty()) {
-                if (!$coverageFilterFromConfigurationFile && !$coverageFilterFromOption) {
-                    $this->writeMessage('Error', 'No filter is configured, no code coverage will be generated.');
-                } else {
-                    $this->writeMessage('Error', 'Incorrect filter configuration, no code coverage will be generated.');
+                    $codeCoverageReports = 0;
+
+                    unset($codeCoverage);
                 }
+            } catch (CodeCoverageException $e) {
+                $this->writeMessage('Warning', $e->getMessage());
 
                 $codeCoverageReports = 0;
-
-                unset($codeCoverage);
             }
         }
 
diff --git a/src/TextUI/XmlConfiguration/CodeCoverage/CodeCoverage.php b/src/TextUI/XmlConfiguration/CodeCoverage/CodeCoverage.php
index 0c17eabad..abc02faae 100644
--- a/src/TextUI/XmlConfiguration/CodeCoverage/CodeCoverage.php
+++ b/src/TextUI/XmlConfiguration/CodeCoverage/CodeCoverage.php
@@ -45,6 +45,11 @@ final class CodeCoverage
      */
     private $excludeFiles;
 
+    /**
+     * @var bool
+     */
+    private $pathCoverage;
+
     /**
      * @var bool
      */
@@ -100,12 +105,13 @@ final class CodeCoverage
      */
     private $xml;
 
-    public function __construct(DirectoryCollection $directories, FileCollection $files, DirectoryCollection $excludeDirectories, FileCollection $excludeFiles, bool $includeUncoveredFiles, bool $processUncoveredFiles, bool $cacheTokens, bool $ignoreDeprecatedCodeUnits, bool $disableCodeCoverageIgnore, ?Clover $clover, ?Crap4j $crap4j, ?Html $html, ?Php $php, ?Text $text, ?Xml $xml)
+    public function __construct(DirectoryCollection $directories, FileCollection $files, DirectoryCollection $excludeDirectories, FileCollection $excludeFiles, bool $pathCoverage, bool $includeUncoveredFiles, bool $processUncoveredFiles, bool $cacheTokens, bool $ignoreDeprecatedCodeUnits, bool $disableCodeCoverageIgnore, ?Clover $clover, ?Crap4j $crap4j, ?Html $html, ?Php $php, ?Text $text, ?Xml $xml)
     {
         $this->directories               = $directories;
         $this->files                     = $files;
         $this->excludeDirectories        = $excludeDirectories;
         $this->excludeFiles              = $excludeFiles;
+        $this->pathCoverage              = $pathCoverage;
         $this->includeUncoveredFiles     = $includeUncoveredFiles;
         $this->processUncoveredFiles     = $processUncoveredFiles;
         $this->cacheTokens               = $cacheTokens;
@@ -144,6 +150,11 @@ public function excludeFiles(): FileCollection
         return $this->excludeFiles;
     }
 
+    public function pathCoverage(): bool
+    {
+        return $this->pathCoverage;
+    }
+
     public function includeUncoveredFiles(): bool
     {
         return $this->includeUncoveredFiles;
diff --git a/src/TextUI/XmlConfiguration/Loader.php b/src/TextUI/XmlConfiguration/Loader.php
index a1c88c6c1..b727bf833 100644
--- a/src/TextUI/XmlConfiguration/Loader.php
+++ b/src/TextUI/XmlConfiguration/Loader.php
@@ -371,6 +371,7 @@ private function codeCoverage(string $filename, \DOMXPath $xpath, \DOMDocument $
             return $this->legacyCodeCoverage($filename, $xpath, $document);
         }
 
+        $pathCoverage              = false;
         $includeUncoveredFiles     = true;
         $processUncoveredFiles     = false;
         $cacheTokens               = false;
@@ -380,6 +381,12 @@ private function codeCoverage(string $filename, \DOMXPath $xpath, \DOMDocument $
         $element = $this->element($xpath, 'coverage');
 
         if ($element) {
+            $pathCoverage = $this->getBooleanAttribute(
+                $element,
+                'pathCoverage',
+                false
+            );
+
             $includeUncoveredFiles  = $this->getBooleanAttribute(
                 $element,
                 'includeUncoveredFiles',
@@ -505,6 +512,7 @@ private function codeCoverage(string $filename, \DOMXPath $xpath, \DOMDocument $
             $this->readFilterFiles($filename, $xpath, 'coverage/include/file'),
             $this->readFilterDirectories($filename, $xpath, 'coverage/exclude/directory'),
             $this->readFilterFiles($filename, $xpath, 'coverage/exclude/file'),
+            $pathCoverage,
             $includeUncoveredFiles,
             $processUncoveredFiles,
             $cacheTokens,
@@ -637,6 +645,7 @@ private function legacyCodeCoverage(string $filename, \DOMXPath $xpath, \DOMDocu
             $this->readFilterFiles($filename, $xpath, 'filter/whitelist/file'),
             $this->readFilterDirectories($filename, $xpath, 'filter/whitelist/exclude/directory'),
             $this->readFilterFiles($filename, $xpath, 'filter/whitelist/exclude/file'),
+            false,
             $includeUncoveredFiles,
             $processUncoveredFiles,
             $cacheTokens,
diff --git a/src/Util/PHP/Template/TestCaseClass.tpl b/src/Util/PHP/Template/TestCaseClass.tpl
index e438f5962..19788330a 100644
--- a/src/Util/PHP/Template/TestCaseClass.tpl
+++ b/src/Util/PHP/Template/TestCaseClass.tpl
@@ -40,7 +40,7 @@ function __phpunit_run_isolated_test()
 
         $result->setCodeCoverage(
             new CodeCoverage(
-                Driver::forLineCoverage($filter),
+                Driver::{driverMethod}($filter),
                 $filter
             )
         );
diff --git a/src/Util/PHP/Template/TestCaseMethod.tpl b/src/Util/PHP/Template/TestCaseMethod.tpl
index e5afeee9c..4a7230479 100644
--- a/src/Util/PHP/Template/TestCaseMethod.tpl
+++ b/src/Util/PHP/Template/TestCaseMethod.tpl
@@ -41,7 +41,7 @@ function __phpunit_run_isolated_test()
 
         $result->setCodeCoverage(
             new CodeCoverage(
-                Driver::forLineCoverage($filter),
+                Driver::{driverMethod}($filter),
                 $filter
             )
         );
diff --git a/tests/_files/configuration_codecoverage.xml b/tests/_files/configuration_codecoverage.xml
index 25b95159f..0a7f37a69 100644
--- a/tests/_files/configuration_codecoverage.xml
+++ b/tests/_files/configuration_codecoverage.xml
@@ -1,6 +1,7 @@
 <?xml version="1.0" encoding="utf-8" ?>
 <phpunit>
-    <coverage includeUncoveredFiles="true"
+    <coverage pathCoverage="true"
+              includeUncoveredFiles="true"
               processUncoveredFiles="true"
               ignoreDeprecatedCodeUnits="true"
               disableCodeCoverageIgnore="true"
diff --git a/tests/unit/TextUI/XmlConfigurationTest.php b/tests/unit/TextUI/XmlConfigurationTest.php
index 0e3943df6..5c0d00af2 100644
--- a/tests/unit/TextUI/XmlConfigurationTest.php
+++ b/tests/unit/TextUI/XmlConfigurationTest.php
@@ -140,6 +140,7 @@ public function testCodeCoverageConfigurationIsReadCorrectly(): void
     {
         $codeCoverage = $this->configuration('configuration_codecoverage.xml')->codeCoverage();
 
+        $this->assertTrue($codeCoverage->pathCoverage());
         $this->assertTrue($codeCoverage->includeUncoveredFiles());
         $this->assertTrue($codeCoverage->processUncoveredFiles());
         $this->assertTrue($codeCoverage->ignoreDeprecatedCodeUnits());
diff --git a/tests/unit/Util/XDebugFilterScriptGeneratorTest.php b/tests/unit/Util/XDebugFilterScriptGeneratorTest.php
index 3192f5837..0079f89cc 100644
--- a/tests/unit/Util/XDebugFilterScriptGeneratorTest.php
+++ b/tests/unit/Util/XDebugFilterScriptGeneratorTest.php
@@ -85,6 +85,7 @@ public function testReturnsExpectedScript(): void
             ),
             DirectoryCollection::fromArray([]),
             FileCollection::fromArray([]),
+            false,
             true,
             true,
             false,
