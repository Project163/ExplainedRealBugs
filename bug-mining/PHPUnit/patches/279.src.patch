diff --git a/src/Extensions/PhptTestCase.php b/src/Extensions/PhptTestCase.php
index 993e357d1..117fb6362 100644
--- a/src/Extensions/PhptTestCase.php
+++ b/src/Extensions/PhptTestCase.php
@@ -166,14 +166,17 @@ public function run(PHPUnit_Framework_TestResult $result = null)
 
             if (isset($sections['EXPECT'])) {
                 $assertion = 'assertEquals';
-                $expected  = preg_replace('/\r\n/', "\n", trim($sections['EXPECT']));
+                $expected  = $sections['EXPECT'];
             } else {
                 $assertion = 'assertStringMatchesFormat';
-                $expected  = trim($sections['EXPECTF']);
+                $expected  = $sections['EXPECTF'];
             }
 
+            $output = preg_replace('/\r\n/', "\n", trim($jobResult['stdout']));
+            $expected = preg_replace('/\r\n/', "\n", trim($expected));
+
             try {
-                PHPUnit_Framework_Assert::$assertion($expected, trim($jobResult['stdout']));
+                PHPUnit_Framework_Assert::$assertion($expected, $output);
             } catch (PHPUnit_Framework_AssertionFailedError $e) {
                 $result->addFailure($this, $e, $time);
             } catch (Exception $e) {
