diff --git a/PHPUnit/Framework/Process/TestCaseMethod.tpl.dist b/PHPUnit/Framework/Process/TestCaseMethod.tpl.dist
index 12a4e52a2..492ad71ed 100644
--- a/PHPUnit/Framework/Process/TestCaseMethod.tpl.dist
+++ b/PHPUnit/Framework/Process/TestCaseMethod.tpl.dist
@@ -35,9 +35,9 @@ if (isset($GLOBALS['__PHPUNIT_BOOTSTRAP'])) {
     unset($GLOBALS['__PHPUNIT_BOOTSTRAP']);
 }
 
-{included_files}
 {constants}
 {globals}
+{included_files}
 
 __phpunit_run_isolated_test();
 ob_end_clean();
diff --git a/PHPUnit/Util/Getopt.php b/PHPUnit/Util/Getopt.php
index da0929c5b..fd4211e14 100644
--- a/PHPUnit/Util/Getopt.php
+++ b/PHPUnit/Util/Getopt.php
@@ -80,8 +80,13 @@ public static function getopt(array $args, $short_options, $long_options = NULL)
         }
 
         reset($args);
+        array_map('trim', $args);
 
         while (list($i, $arg) = each($args)) {
+            if ($arg == '') {
+                continue;
+            }
+
             if ($arg == '--') {
                 $non_opts = array_merge($non_opts, array_slice($args, $i + 1));
                 break;
