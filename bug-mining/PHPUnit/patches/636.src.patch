diff --git a/.psalm/baseline.xml b/.psalm/baseline.xml
index 5e65619eb..4ef1a958c 100644
--- a/.psalm/baseline.xml
+++ b/.psalm/baseline.xml
@@ -947,12 +947,11 @@
     </PossiblyUndefinedArrayOffset>
   </file>
   <file src="src/TextUI/TestRunner.php">
-    <DeprecatedClass occurrences="5">
+    <DeprecatedClass occurrences="4">
       <code>TestSuiteLoader</code>
       <code>TestSuiteLoader</code>
       <code>TestSuiteLoader</code>
       <code>new StandardTestSuiteLoader</code>
-      <code>new XdebugFilterScriptGenerator</code>
     </DeprecatedClass>
     <DeprecatedMethod occurrences="10">
       <code>addListener</code>
@@ -998,9 +997,7 @@
     <PropertyNotSetInConstructor occurrences="1">
       <code>$printer</code>
     </PropertyNotSetInConstructor>
-    <RedundantCondition occurrences="3">
-      <code>assert($arguments['configurationObject'] instanceof Configuration)</code>
-      <code>assert($arguments['configurationObject'] instanceof Configuration)</code>
+    <RedundantCondition occurrences="1">
       <code>assert($this-&gt;printer instanceof CliTestDoxPrinter)</code>
     </RedundantCondition>
     <RedundantConditionGivenDocblockType occurrences="1">
diff --git a/ChangeLog-10.0.md b/ChangeLog-10.0.md
index 38ce0b4c5..c4cc8658a 100644
--- a/ChangeLog-10.0.md
+++ b/ChangeLog-10.0.md
@@ -22,6 +22,7 @@ All notable changes of the PHPUnit 10.0 release series are documented in this fi
 * [#4090](https://github.com/sebastianbergmann/phpunit/issues/4090): Remove `assertNotRegExp()`
 * [#4092](https://github.com/sebastianbergmann/phpunit/issues/4092): Remove `assertEqualXMLStructure()`
 * [#4142](https://github.com/sebastianbergmann/phpunit/issues/4142): Remove Prophecy integration
+* [#4227](https://github.com/sebastianbergmann/phpunit/issues/4227): Remove `--dump-xdebug-filter` and `--prepend`
 * [#4272](https://github.com/sebastianbergmann/phpunit/issues/4272): Remove `PHPUnit\Util\Blacklist`
 * [#4273](https://github.com/sebastianbergmann/phpunit/issues/4273): Remove `PHPUnit\Framework\TestCase::$backupGlobalsBlacklist`
 * [#4274](https://github.com/sebastianbergmann/phpunit/issues/4274): Remove `PHPUnit\Framework\TestCase::$backupStaticAttributesBlacklist`
diff --git a/build/templates/binary-phar-autoload.php.in b/build/templates/binary-phar-autoload.php.in
index d79f20ef5..c9cb86099 100644
--- a/build/templates/binary-phar-autoload.php.in
+++ b/build/templates/binary-phar-autoload.php.in
@@ -21,11 +21,7 @@ if (__FILE__ === realpath($_SERVER['SCRIPT_NAME'])) {
     $execute = false;
 }
 
-$options = getopt('', array('prepend:', 'manifest'));
-
-if (isset($options['prepend'])) {
-    require $options['prepend'];
-}
+$options = getopt('', array('manifest'));
 
 if (isset($options['manifest'])) {
     $printManifest = true;
diff --git a/phpunit b/phpunit
index 02f04c9db..bc053cce8 100755
--- a/phpunit
+++ b/phpunit
@@ -48,14 +48,6 @@ if (!defined('PHPUNIT_COMPOSER_INSTALL')) {
     die(1);
 }
 
-$options = getopt('', array('prepend:'));
-
-if (isset($options['prepend'])) {
-    require $options['prepend'];
-}
-
-unset($options);
-
 require PHPUNIT_COMPOSER_INSTALL;
 
 PHPUnit\TextUI\Command::main();
diff --git a/src/TextUI/CliArguments/Builder.php b/src/TextUI/CliArguments/Builder.php
index 96fca855e..80fa76556 100644
--- a/src/TextUI/CliArguments/Builder.php
+++ b/src/TextUI/CliArguments/Builder.php
@@ -30,7 +30,6 @@ final class Builder
 {
     private const LONG_OPTIONS = [
         'atleast-version=',
-        'prepend=',
         'bootstrap=',
         'cache-result',
         'do-not-cache-result',
@@ -118,7 +117,6 @@ final class Builder
         'testsuite=',
         'verbose',
         'version',
-        'dump-xdebug-filter=',
     ];
 
     private const SHORT_OPTIONS = 'd:c:hv';
@@ -229,7 +227,6 @@ public function fromParameters(array $parameters, array $additionalLongOptions):
         $useDefaultConfiguration                    = null;
         $verbose                                    = null;
         $version                                    = null;
-        $xdebugFilterFile                           = null;
 
         if (isset($options[1][0])) {
             $argument = $options[1][0];
@@ -762,11 +759,6 @@ public function fromParameters(array $parameters, array $additionalLongOptions):
 
                     break;
 
-                case '--dump-xdebug-filter':
-                    $xdebugFilterFile = $option[1];
-
-                    break;
-
                 default:
                     $unrecognizedOptions[str_replace('--', '', $option[0])] = $option[1];
             }
@@ -878,8 +870,7 @@ public function fromParameters(array $parameters, array $additionalLongOptions):
             $useDefaultConfiguration,
             $verbose,
             $version,
-            $coverageFilter,
-            $xdebugFilterFile
+            $coverageFilter
         );
     }
 }
diff --git a/src/TextUI/CliArguments/Configuration.php b/src/TextUI/CliArguments/Configuration.php
index b220dd7aa..0593a3677 100644
--- a/src/TextUI/CliArguments/Configuration.php
+++ b/src/TextUI/CliArguments/Configuration.php
@@ -467,15 +467,10 @@ final class Configuration
      */
     private $version;
 
-    /**
-     * @var ?string
-     */
-    private $xdebugFilterFile;
-
     /**
      * @param null|int|string $columns
      */
-    public function __construct(?string $argument, ?string $atLeastVersion, ?bool $backupGlobals, ?bool $backupStaticAttributes, ?bool $beStrictAboutChangesToGlobalState, ?bool $beStrictAboutResourceUsageDuringSmallTests, ?string $bootstrap, ?bool $cacheResult, ?string $cacheResultFile, ?bool $checkVersion, ?string $colors, $columns, ?string $configuration, ?string $coverageClover, ?string $coverageCobertura, ?string $coverageCrap4J, ?string $coverageHtml, ?string $coveragePhp, ?string $coverageText, ?bool $coverageTextShowUncoveredFiles, ?bool $coverageTextShowOnlySummary, ?string $coverageXml, ?bool $pathCoverage, ?string $coverageCacheDirectory, ?bool $warmCoverageCache, ?bool $debug, ?int $defaultTimeLimit, ?bool $disableCodeCoverageIgnore, ?bool $disallowTestOutput, ?bool $disallowTodoAnnotatedTests, ?bool $enforceTimeLimit, ?array $excludeGroups, ?int $executionOrder, ?int $executionOrderDefects, ?array $extensions, ?array $unavailableExtensions, ?bool $failOnEmptyTestSuite, ?bool $failOnIncomplete, ?bool $failOnRisky, ?bool $failOnSkipped, ?bool $failOnWarning, ?string $filter, ?bool $generateConfiguration, ?bool $migrateConfiguration, ?array $groups, ?array $testsCovering, ?array $testsUsing, ?bool $help, ?string $includePath, ?array $iniSettings, ?string $junitLogfile, ?bool $listGroups, ?bool $listSuites, ?bool $listTests, ?string $listTestsXml, ?string $loader, ?bool $noCoverage, ?bool $noExtensions, ?bool $noInteraction, ?bool $noLogging, ?string $printer, ?bool $processIsolation, ?int $randomOrderSeed, ?int $repeat, ?bool $reportUselessTests, ?bool $resolveDependencies, ?bool $reverseList, ?bool $stderr, ?bool $strictCoverage, ?bool $stopOnDefect, ?bool $stopOnError, ?bool $stopOnFailure, ?bool $stopOnIncomplete, ?bool $stopOnRisky, ?bool $stopOnSkipped, ?bool $stopOnWarning, ?string $teamcityLogfile, ?array $testdoxExcludeGroups, ?array $testdoxGroups, ?string $testdoxHtmlFile, ?string $testdoxTextFile, ?string $testdoxXmlFile, ?array $testSuffixes, ?string $testSuite, array $unrecognizedOptions, ?string $unrecognizedOrderBy, ?bool $useDefaultConfiguration, ?bool $verbose, ?bool $version, ?array $coverageFilter, ?string $xdebugFilterFile)
+    public function __construct(?string $argument, ?string $atLeastVersion, ?bool $backupGlobals, ?bool $backupStaticAttributes, ?bool $beStrictAboutChangesToGlobalState, ?bool $beStrictAboutResourceUsageDuringSmallTests, ?string $bootstrap, ?bool $cacheResult, ?string $cacheResultFile, ?bool $checkVersion, ?string $colors, $columns, ?string $configuration, ?string $coverageClover, ?string $coverageCobertura, ?string $coverageCrap4J, ?string $coverageHtml, ?string $coveragePhp, ?string $coverageText, ?bool $coverageTextShowUncoveredFiles, ?bool $coverageTextShowOnlySummary, ?string $coverageXml, ?bool $pathCoverage, ?string $coverageCacheDirectory, ?bool $warmCoverageCache, ?bool $debug, ?int $defaultTimeLimit, ?bool $disableCodeCoverageIgnore, ?bool $disallowTestOutput, ?bool $disallowTodoAnnotatedTests, ?bool $enforceTimeLimit, ?array $excludeGroups, ?int $executionOrder, ?int $executionOrderDefects, ?array $extensions, ?array $unavailableExtensions, ?bool $failOnEmptyTestSuite, ?bool $failOnIncomplete, ?bool $failOnRisky, ?bool $failOnSkipped, ?bool $failOnWarning, ?string $filter, ?bool $generateConfiguration, ?bool $migrateConfiguration, ?array $groups, ?array $testsCovering, ?array $testsUsing, ?bool $help, ?string $includePath, ?array $iniSettings, ?string $junitLogfile, ?bool $listGroups, ?bool $listSuites, ?bool $listTests, ?string $listTestsXml, ?string $loader, ?bool $noCoverage, ?bool $noExtensions, ?bool $noInteraction, ?bool $noLogging, ?string $printer, ?bool $processIsolation, ?int $randomOrderSeed, ?int $repeat, ?bool $reportUselessTests, ?bool $resolveDependencies, ?bool $reverseList, ?bool $stderr, ?bool $strictCoverage, ?bool $stopOnDefect, ?bool $stopOnError, ?bool $stopOnFailure, ?bool $stopOnIncomplete, ?bool $stopOnRisky, ?bool $stopOnSkipped, ?bool $stopOnWarning, ?string $teamcityLogfile, ?array $testdoxExcludeGroups, ?array $testdoxGroups, ?string $testdoxHtmlFile, ?string $testdoxTextFile, ?string $testdoxXmlFile, ?array $testSuffixes, ?string $testSuite, array $unrecognizedOptions, ?string $unrecognizedOrderBy, ?bool $useDefaultConfiguration, ?bool $verbose, ?bool $version, ?array $coverageFilter)
     {
         $this->argument                                   = $argument;
         $this->atLeastVersion                             = $atLeastVersion;
@@ -567,7 +562,6 @@ public function __construct(?string $argument, ?string $atLeastVersion, ?bool $b
         $this->useDefaultConfiguration                    = $useDefaultConfiguration;
         $this->verbose                                    = $verbose;
         $this->version                                    = $version;
-        $this->xdebugFilterFile                           = $xdebugFilterFile;
     }
 
     public function hasArgument(): bool
@@ -2087,21 +2081,4 @@ public function version(): bool
 
         return $this->version;
     }
-
-    public function hasXdebugFilterFile(): bool
-    {
-        return $this->xdebugFilterFile !== null;
-    }
-
-    /**
-     * @throws Exception
-     */
-    public function xdebugFilterFile(): string
-    {
-        if ($this->xdebugFilterFile === null) {
-            throw new Exception;
-        }
-
-        return $this->xdebugFilterFile;
-    }
 }
diff --git a/src/TextUI/CliArguments/Mapper.php b/src/TextUI/CliArguments/Mapper.php
index 9ceb8ab47..9e2394682 100644
--- a/src/TextUI/CliArguments/Mapper.php
+++ b/src/TextUI/CliArguments/Mapper.php
@@ -356,10 +356,6 @@ public function mapToLegacyArray(Configuration $arguments): array
             $result['randomOrderSeed'] = $arguments->randomOrderSeed();
         }
 
-        if ($arguments->hasXdebugFilterFile()) {
-            $result['xdebugFilterFile'] = $arguments->xdebugFilterFile();
-        }
-
         return $result;
     }
 }
diff --git a/src/TextUI/Help.php b/src/TextUI/Help.php
index 35b39b959..745126e57 100644
--- a/src/TextUI/Help.php
+++ b/src/TextUI/Help.php
@@ -125,7 +125,6 @@ final class Help
         ],
 
         'Configuration Options' => [
-            ['arg' => '--prepend <file>', 'desc' => 'A PHP script that is included as early as possible'],
             ['arg' => '--bootstrap <file>', 'desc' => 'A PHP script that is included before the tests run'],
             ['arg' => '-c|--configuration <file>', 'desc' => 'Read configuration from XML file'],
             ['arg' => '--no-configuration', 'desc' => 'Ignore default configuration file (phpunit.xml)'],
diff --git a/src/TextUI/TestRunner.php b/src/TextUI/TestRunner.php
index ccca0039b..8e94e1036 100644
--- a/src/TextUI/TestRunner.php
+++ b/src/TextUI/TestRunner.php
@@ -18,7 +18,6 @@
 use function class_exists;
 use function count;
 use function dirname;
-use function file_put_contents;
 use function htmlspecialchars;
 use function is_array;
 use function is_int;
@@ -53,7 +52,6 @@
 use PHPUnit\TextUI\XmlConfiguration\Configuration;
 use PHPUnit\TextUI\XmlConfiguration\Loader;
 use PHPUnit\TextUI\XmlConfiguration\PhpHandler;
-use PHPUnit\Util\Filesystem;
 use PHPUnit\Util\Log\JUnit;
 use PHPUnit\Util\Log\TeamCity;
 use PHPUnit\Util\Printer;
@@ -61,7 +59,6 @@
 use PHPUnit\Util\TestDox\HtmlResultPrinter;
 use PHPUnit\Util\TestDox\TextResultPrinter;
 use PHPUnit\Util\TestDox\XmlResultPrinter;
-use PHPUnit\Util\XdebugFilterScriptGenerator;
 use PHPUnit\Util\Xml\SchemaDetector;
 use ReflectionClass;
 use ReflectionException;
@@ -414,7 +411,7 @@ public function run(TestSuite $suite, array $arguments = [], array $warnings = [
             $codeCoverageReports++;
         }
 
-        if ($codeCoverageReports > 0 || isset($arguments['xdebugFilterFile'])) {
+        if ($codeCoverageReports > 0) {
             if (isset($arguments['coverageFilter'])) {
                 if (!is_array($arguments['coverageFilter'])) {
                     $coverageFilterDirectories = [$arguments['coverageFilter']];
@@ -600,24 +597,6 @@ public function run(TestSuite $suite, array $arguments = [], array $warnings = [
             }
         }
 
-        if (isset($arguments['xdebugFilterFile'], $codeCoverageConfiguration)) {
-            $this->write(PHP_EOL . 'Please note that --dump-xdebug-filter and --prepend are deprecated and will be removed in PHPUnit 10.' . PHP_EOL);
-
-            $script = (new XdebugFilterScriptGenerator)->generate($codeCoverageConfiguration);
-
-            if ($arguments['xdebugFilterFile'] !== 'php://stdout' && $arguments['xdebugFilterFile'] !== 'php://stderr' && !Filesystem::createDirectory(dirname($arguments['xdebugFilterFile']))) {
-                $this->write(sprintf('Cannot write Xdebug filter script to %s ' . PHP_EOL, $arguments['xdebugFilterFile']));
-
-                exit(self::EXCEPTION_EXIT);
-            }
-
-            file_put_contents($arguments['xdebugFilterFile'], $script);
-
-            $this->write(sprintf('Wrote Xdebug filter script to %s ' . PHP_EOL . PHP_EOL, $arguments['xdebugFilterFile']));
-
-            exit(self::SUCCESS_EXIT);
-        }
-
         $this->printer->write("\n");
 
         if (isset($codeCoverage)) {
diff --git a/src/Util/XdebugFilterScriptGenerator.php b/src/Util/XdebugFilterScriptGenerator.php
deleted file mode 100644
index 4a57528cc..000000000
--- a/src/Util/XdebugFilterScriptGenerator.php
+++ /dev/null
@@ -1,80 +0,0 @@
-<?php declare(strict_types=1);
-/*
- * This file is part of PHPUnit.
- *
- * (c) Sebastian Bergmann <sebastian@phpunit.de>
- *
- * For the full copyright and license information, please view the LICENSE
- * file that was distributed with this source code.
- */
-namespace PHPUnit\Util;
-
-use const DIRECTORY_SEPARATOR;
-use function addslashes;
-use function array_map;
-use function implode;
-use function is_string;
-use function realpath;
-use function sprintf;
-use PHPUnit\TextUI\XmlConfiguration\CodeCoverage\CodeCoverage as FilterConfiguration;
-
-/**
- * @internal This class is not covered by the backward compatibility promise for PHPUnit
- *
- * @deprecated
- */
-final class XdebugFilterScriptGenerator
-{
-    public function generate(FilterConfiguration $filter): string
-    {
-        $files = array_map(
-            static function ($item) {
-                return sprintf(
-                    "        '%s'",
-                    $item
-                );
-            },
-            $this->getItems($filter)
-        );
-
-        $files = implode(",\n", $files);
-
-        return <<<EOF
-<?php declare(strict_types=1);
-if (!\\function_exists('xdebug_set_filter')) {
-    return;
-}
-
-\\xdebug_set_filter(
-    \\XDEBUG_FILTER_CODE_COVERAGE,
-    \\XDEBUG_PATH_WHITELIST,
-    [
-{$files}
-    ]
-);
-
-EOF;
-    }
-
-    private function getItems(FilterConfiguration $filter): array
-    {
-        $files = [];
-
-        foreach ($filter->directories() as $directory) {
-            $path = realpath($directory->path());
-
-            if (is_string($path)) {
-                $files[] = sprintf(
-                    addslashes('%s' . DIRECTORY_SEPARATOR),
-                    $path
-                );
-            }
-        }
-
-        foreach ($filter->files() as $file) {
-            $files[] = $file->path();
-        }
-
-        return $files;
-    }
-}
diff --git a/tests/end-to-end/cli/_files/output-cli-help-color.txt b/tests/end-to-end/cli/_files/output-cli-help-color.txt
index e12ff59f8..945855c5b 100644
--- a/tests/end-to-end/cli/_files/output-cli-help-color.txt
+++ b/tests/end-to-end/cli/_files/output-cli-help-color.txt
@@ -115,8 +115,6 @@
   [32m--do-not-cache-result      [0m Do not write test results to cache file
 
 [33mConfiguration Options:[0m
-  [32m--prepend [36m<file>[0m           [0m A PHP script that is included as early as
-                              possible
   [32m--bootstrap [36m<file>[0m         [0m A PHP script that is included before the
                               tests run
   [32m-c|--configuration [36m<file>[0m  [0m Read configuration from XML file
diff --git a/tests/end-to-end/cli/_files/output-cli-usage.txt b/tests/end-to-end/cli/_files/output-cli-usage.txt
index 6e098d03d..8c7e0a073 100644
--- a/tests/end-to-end/cli/_files/output-cli-usage.txt
+++ b/tests/end-to-end/cli/_files/output-cli-usage.txt
@@ -92,7 +92,6 @@ Test Execution Options:
 
 Configuration Options:
 
-  --prepend <file>            A PHP script that is included as early as possible
   --bootstrap <file>          A PHP script that is included before the tests run
   -c|--configuration <file>   Read configuration from XML file
   --no-configuration          Ignore default configuration file (phpunit.xml)
diff --git a/tests/unit/Util/XDebugFilterScriptGeneratorTest.php b/tests/unit/Util/XDebugFilterScriptGeneratorTest.php
deleted file mode 100644
index 4fed96eae..000000000
--- a/tests/unit/Util/XDebugFilterScriptGeneratorTest.php
+++ /dev/null
@@ -1,113 +0,0 @@
-<?php declare(strict_types=1);
-/*
- * This file is part of PHPUnit.
- *
- * (c) Sebastian Bergmann <sebastian@phpunit.de>
- *
- * For the full copyright and license information, please view the LICENSE
- * file that was distributed with this source code.
- */
-namespace PHPUnit\Util;
-
-use const DIRECTORY_SEPARATOR;
-use function addslashes;
-use function basename;
-use function dirname;
-use function sprintf;
-use PHPUnit\Framework\TestCase;
-use PHPUnit\TextUI\XmlConfiguration\CodeCoverage\CodeCoverage;
-use PHPUnit\TextUI\XmlConfiguration\CodeCoverage\Filter\Directory;
-use PHPUnit\TextUI\XmlConfiguration\CodeCoverage\Filter\DirectoryCollection;
-use PHPUnit\TextUI\XmlConfiguration\File;
-use PHPUnit\TextUI\XmlConfiguration\FileCollection;
-
-/**
- * @small
- * @covers \PHPUnit\Util\XdebugFilterScriptGenerator
- */
-final class XDebugFilterScriptGeneratorTest extends TestCase
-{
-    public function testReturnsExpectedScript(): void
-    {
-        $expectedDirectory = sprintf(addslashes('%s' . DIRECTORY_SEPARATOR), __DIR__);
-        $expected          = <<<EOF
-<?php declare(strict_types=1);
-if (!\\function_exists('xdebug_set_filter')) {
-    return;
-}
-
-\\xdebug_set_filter(
-    \\XDEBUG_FILTER_CODE_COVERAGE,
-    \\XDEBUG_PATH_WHITELIST,
-    [
-        '{$expectedDirectory}',
-        '{$expectedDirectory}',
-        '{$expectedDirectory}',
-        'src/foo.php',
-        'src/bar.php'
-    ]
-);
-
-EOF;
-
-        $directoryPathThatDoesNotExist = sprintf('%s/path/that/does/not/exist', __DIR__);
-        $this->assertDirectoryDoesNotExist($directoryPathThatDoesNotExist);
-
-        $filterConfiguration = new CodeCoverage(
-            null,
-            DirectoryCollection::fromArray(
-                [
-                    new Directory(
-                        __DIR__,
-                        '',
-                        '.php',
-                        'DEFAULT'
-                    ),
-                    new Directory(
-                        sprintf('%s/', __DIR__),
-                        '',
-                        '.php',
-                        'DEFAULT'
-                    ),
-                    new Directory(
-                        sprintf('%s/./%s', dirname(__DIR__), basename(__DIR__)),
-                        '',
-                        '.php',
-                        'DEFAULT'
-                    ),
-                    new Directory(
-                        $directoryPathThatDoesNotExist,
-                        '',
-                        '.php',
-                        'DEFAULT'
-                    ),
-                ]
-            ),
-            FileCollection::fromArray(
-                [
-                    new File('src/foo.php'),
-                    new File('src/bar.php'),
-                ]
-            ),
-            DirectoryCollection::fromArray([]),
-            FileCollection::fromArray([]),
-            false,
-            true,
-            true,
-            false,
-            false,
-            null,
-            null,
-            null,
-            null,
-            null,
-            null,
-            null
-        );
-
-        $writer = new XdebugFilterScriptGenerator;
-        $actual = $writer->generate($filterConfiguration);
-
-        $this->assertSame($expected, $actual);
-    }
-}
