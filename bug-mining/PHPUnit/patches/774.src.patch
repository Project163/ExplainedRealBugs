diff --git a/ChangeLog-10.4.md b/ChangeLog-10.4.md
index 17bfa43a7..7962c2e63 100644
--- a/ChangeLog-10.4.md
+++ b/ChangeLog-10.4.md
@@ -2,6 +2,12 @@
 
 All notable changes of the PHPUnit 10.4 release series are documented in this file using the [Keep a CHANGELOG](https://keepachangelog.com/) principles.
 
+## [10.4.1] - 2023-MM-DD
+
+### Fixed
+
+* [#5534](https://github.com/sebastianbergmann/phpunit/issues/5534): Cache for generated Test Double code was not updated for Test Stub and Mock Object distinction
+
 ## [10.4.0] - 2023-10-06
 
 ### Added
@@ -35,4 +41,5 @@ All notable changes of the PHPUnit 10.4 release series are documented in this fi
 * `PHPUnit\TextUI\Configuration\Configuration::cliArgument()` and `PHPUnit\TextUI\Configuration\Configuration::hasCliArgument()`
 * `PHPUnit\Framework\Constraint\Constraint::exporter()`
 
+[10.4.1]: https://github.com/sebastianbergmann/phpunit/compare/10.4.0...10.4
 [10.4.0]: https://github.com/sebastianbergmann/phpunit/compare/10.3.5...10.4.0
diff --git a/src/Framework/MockObject/Generator/Generator.php b/src/Framework/MockObject/Generator/Generator.php
index 5d5a8c96d..eeb75598b 100644
--- a/src/Framework/MockObject/Generator/Generator.php
+++ b/src/Framework/MockObject/Generator/Generator.php
@@ -391,6 +391,7 @@ public function generate(string $type, bool $mockObject, array $methods = null,
 
         $key = md5(
             $type .
+            ($mockObject ? 'MockObject' : 'TestStub') .
             serialize($methods) .
             serialize($callOriginalClone) .
             serialize($cloneArguments) .
