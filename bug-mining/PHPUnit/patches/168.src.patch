diff --git a/PHPUnit/Framework/TestCase.php b/PHPUnit/Framework/TestCase.php
index 107be06fd..16194c30b 100644
--- a/PHPUnit/Framework/TestCase.php
+++ b/PHPUnit/Framework/TestCase.php
@@ -889,15 +889,15 @@ public function runBare()
         if (!isset($e)) {
             try {
                 if ($this->outputExpectedRegex !== NULL) {
+                    $this->hasPerformedExpectationsOnOutput = TRUE;
                     $this->assertRegExp($this->outputExpectedRegex, $this->output);
                     $this->outputExpectedRegex = NULL;
-                    $this->hasPerformedExpectationsOnOutput = TRUE;
                 }
 
                 else if ($this->outputExpectedString !== NULL) {
+                    $this->hasPerformedExpectationsOnOutput = TRUE;
                     $this->assertEquals($this->outputExpectedString, $this->output);
                     $this->outputExpectedString = NULL;
-                    $this->hasPerformedExpectationsOnOutput = TRUE;
                 }
             }
 
diff --git a/Tests/Regression/GitHub/433.phpt b/Tests/Regression/GitHub/433.phpt
index 5dfdc21aa..a04074849 100644
--- a/Tests/Regression/GitHub/433.phpt
+++ b/Tests/Regression/GitHub/433.phpt
@@ -13,8 +13,22 @@ PHPUnit_TextUI_Command::main();
 --EXPECTF--
 PHPUnit %s by Sebastian Bergmann.
 
-..
+..F
 
 Time: %i %s, Memory: %sMb
 
-OK (2 tests, 2 assertions)
+There was 1 failure:
+
+1) Issue433Test::testNotMatchingOutput
+Failed asserting that two strings are equal.
+--- Expected
++++ Actual
+@@ @@
+-'foo'
++'bar'
+
+%s:%i
+
+FAILURES!
+Tests: 3, Assertions: 3, Failures: 1.
+
diff --git a/Tests/Regression/GitHub/433/Issue433Test.php b/Tests/Regression/GitHub/433/Issue433Test.php
index 968173cce..18bd547a0 100644
--- a/Tests/Regression/GitHub/433/Issue433Test.php
+++ b/Tests/Regression/GitHub/433/Issue433Test.php
@@ -12,5 +12,10 @@ public function testOutputWithExpectationAfter() {
         $this->expectOutputString('test');
     }
 
+    public function testNotMatchingOutput() {
+        echo 'bar';
+        $this->expectOutputString('foo');
+    }
+
 }
 
