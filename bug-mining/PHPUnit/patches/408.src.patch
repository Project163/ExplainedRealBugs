diff --git a/composer.json b/composer.json
index b03d27fa7..ac5ef134e 100644
--- a/composer.json
+++ b/composer.json
@@ -37,7 +37,7 @@
         "phpunit/php-timer": "^1.0.6",
         "phpunit/phpunit-mock-objects": "^4.0",
         "sebastian/comparator": "^2.0",
-        "sebastian/diff": "^1.4.3 || ^2.0",
+        "sebastian/diff": "^2.0",
         "sebastian/environment": "^3.1",
         "sebastian/exporter": "^3.1",
         "sebastian/global-state": "^1.1 || ^2.0",
diff --git a/tests/Framework/ConstraintTest.php b/tests/Framework/ConstraintTest.php
index 00c5eeb96..6fd2eff4c 100644
--- a/tests/Framework/ConstraintTest.php
+++ b/tests/Framework/ConstraintTest.php
@@ -644,10 +644,8 @@ public function isEqualProvider()
 -b\\n
 +p\\n
 @@ @@
- i\\n
 -j\\n
 +w\\n
- k'
 
 EOF
             ],
@@ -669,7 +667,6 @@ public function isEqualProvider()
  Array (
 -    0 => 0
 +    0 => 1
- )
 
 EOF
             ],
@@ -681,7 +678,6 @@ public function isEqualProvider()
  Array (
 -    0 => true
 +    0 => 'true'
- )
 
 EOF
             ],
@@ -695,10 +691,6 @@ public function isEqualProvider()
      1 => Array (
 -        0 => 1
 +        0 => 4
-     )
-     2 => Array (...)
-     3 => 3
- )
 
 EOF
             ],
@@ -719,7 +711,6 @@ public function isEqualProvider()
 @@ @@
  stdClass Object (
 -    'foo' => 'bar'
- )
 
 EOF
             ],
@@ -738,18 +729,11 @@ public function isEqualProvider()
 -            0 => 1
 +            0 => 4
 @@ @@
-         'foo' => 'a\\n
 -        b\\n
 +        p\\n
 @@ @@
-         i\\n
 -        j\\n
 +        w\\n
-         k'
-     )
-     'self' => stdClass Object (...)
-     'c' => stdClass Object (...)
- )
 
 EOF
             ],
@@ -797,10 +781,6 @@ public function isEqualProvider()
 -    '$bhash' => Array &1 (
 +SplObjectStorage Object &$storage2hash (
 +    '$bhash' => Array &0 (
-         'obj' => stdClass Object &$bhash ()
-         'inf' => null
-     )
- )
 
 EOF
             ];
@@ -820,10 +800,6 @@ public function isEqualProvider()
 -    '$bhash' => Array &1 (
 +SplObjectStorage Object &$storage2hash (
 +    '$bhash' => Array &0 (
-         'obj' => stdClass Object &$bhash ()
-         'inf' => null
-     )
- )
 
 EOF
             ];
diff --git a/tests/Regression/GitHub/503.phpt b/tests/Regression/GitHub/503.phpt
index bcae5b621..bbb20aed0 100644
--- a/tests/Regression/GitHub/503.phpt
+++ b/tests/Regression/GitHub/503.phpt
@@ -25,8 +25,8 @@ Failed asserting that two strings are identical.
 +++ Actual
 @@ @@
  #Warning: Strings contain different line endings!
- 'foo
- '
+-'foo
++'foo
 
 %s:%i
 
diff --git a/tests/Regression/GitHub/581.phpt b/tests/Regression/GitHub/581.phpt
index 02ae17b3f..e0c956feb 100644
--- a/tests/Regression/GitHub/581.phpt
+++ b/tests/Regression/GitHub/581.phpt
@@ -31,10 +31,6 @@ Failed asserting that two objects are equal.
      3 => 4
 -    4 => 5
 +    4 => 1
-     5 => 6
-     6 => 7
-     7 => 8
- )
 
 %s:%i
 
diff --git a/tests/TextUI/exception-stack.phpt b/tests/TextUI/exception-stack.phpt
index ccedd5a55..a26525519 100644
--- a/tests/TextUI/exception-stack.phpt
+++ b/tests/TextUI/exception-stack.phpt
@@ -27,7 +27,6 @@ Failed asserting that two arrays are equal.
  Array (
 -    0 => 1
 +    0 => 2
- )
 
 
 %s:%i
@@ -41,7 +40,6 @@ Failed asserting that two arrays are equal.
  Array (
 -    0 => 1
 +    0 => 2
- )
 
 %s:%i
 
diff --git a/tests/TextUI/failure-isolation.phpt b/tests/TextUI/failure-isolation.phpt
index 51efbe843..c67090227 100644
--- a/tests/TextUI/failure-isolation.phpt
+++ b/tests/TextUI/failure-isolation.phpt
@@ -27,7 +27,6 @@ Failed asserting that two arrays are equal.
  Array (
 -    0 => 1
 +    0 => 2
- )
 
 %s:%i
 
@@ -46,7 +45,6 @@ Failed asserting that two objects are equal.
  stdClass Object (
 -    'foo' => 'bar'
 +    'bar' => 'foo'
- )
 
 %s:%i
 
@@ -76,7 +74,6 @@ Failed asserting that two strings are equal.
  'foo\n
 -bar\n
 +baz\n
- '
 
 %s:%i
 
@@ -132,7 +129,6 @@ Failed asserting that string matches format description.
 +++ Actual
 @@ @@
 -FOO
--
 +...BAR...
 
 %s:%i
diff --git a/tests/TextUI/failure-reverse-list.phpt b/tests/TextUI/failure-reverse-list.phpt
index c01a8f678..9988fe7b1 100644
--- a/tests/TextUI/failure-reverse-list.phpt
+++ b/tests/TextUI/failure-reverse-list.phpt
@@ -24,7 +24,6 @@ Failed asserting that string matches format description.
 +++ Actual
 @@ @@
 -FOO
--
 +...BAR...
 
 %s:%d
@@ -84,7 +83,6 @@ Failed asserting that two strings are equal.
  'foo\n
 -bar\n
 +baz\n
- '
 
 %s:%d
 
@@ -114,7 +112,6 @@ Failed asserting that two objects are equal.
  stdClass Object (
 -    'foo' => 'bar'
 +    'bar' => 'foo'
- )
 
 %s:%d
 
@@ -133,7 +130,6 @@ Failed asserting that two arrays are equal.
  Array (
 -    0 => 1
 +    0 => 2
- )
 
 %s:%d
 
diff --git a/tests/TextUI/failure.phpt b/tests/TextUI/failure.phpt
index 0a50d3fed..d455d25b5 100644
--- a/tests/TextUI/failure.phpt
+++ b/tests/TextUI/failure.phpt
@@ -26,7 +26,6 @@ Failed asserting that two arrays are equal.
  Array (
 -    0 => 1
 +    0 => 2
- )
 
 %s:%i
 
@@ -45,7 +44,6 @@ Failed asserting that two objects are equal.
  stdClass Object (
 -    'foo' => 'bar'
 +    'bar' => 'foo'
- )
 
 %s:%i
 
@@ -75,7 +73,6 @@ Failed asserting that two strings are equal.
  'foo\n
 -bar\n
 +baz\n
- '
 
 %s:%i
 
@@ -131,7 +128,6 @@ Failed asserting that string matches format description.
 +++ Actual
 @@ @@
 -FOO
--
 +...BAR...
 
 %s:%i
diff --git a/tests/TextUI/teamcity-inner-exceptions.phpt b/tests/TextUI/teamcity-inner-exceptions.phpt
index 9235d5a2d..524a34331 100644
--- a/tests/TextUI/teamcity-inner-exceptions.phpt
+++ b/tests/TextUI/teamcity-inner-exceptions.phpt
@@ -19,7 +19,7 @@ PHPUnit %s by Sebastian Bergmann and contributors.
 
 ##teamcity[testStarted name='testPrintingChildException' locationHint='php_qn://%s%etests%e_files%eExceptionStackTest.php::\ExceptionStackTest::testPrintingChildException' flowId='%d']
 
-##teamcity[testFailed name='testPrintingChildException' message='Child exception|nmessage|nFailed asserting that two arrays are equal.|n--- Expected|n+++ Actual|n@@ @@|n Array (|n-    0 => 1|n+    0 => 2|n )|n' details=' %s%etests%e_files%eExceptionStackTest.php:14|n |n Caused by|n message|n Failed asserting that two arrays are equal.|n --- Expected|n +++ Actual|n @@ @@|n  Array (|n -    0 => 1|n +    0 => 2|n  )|n |n %s%etests%e_files%eExceptionStackTest.php:10|n ' flowId='%d']
+##teamcity[testFailed name='testPrintingChildException' message='Child exception|nmessage|nFailed asserting that two arrays are equal.|n--- Expected|n+++ Actual|n@@ @@|n Array (|n-    0 => 1|n+    0 => 2|n' details=' %s/ExceptionStackTest.php:14|n |n Caused by|n message|n Failed asserting that two arrays are equal.|n --- Expected|n +++ Actual|n @@ @@|n  Array (|n -    0 => 1|n +    0 => 2|n |n %s/ExceptionStackTest.php:10|n ' flowId='%d']
 
 ##teamcity[testFinished name='testPrintingChildException' duration='%d' flowId='%d']
 
