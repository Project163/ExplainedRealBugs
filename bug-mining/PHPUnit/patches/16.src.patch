diff --git a/PHPUnit/Util/Skeleton.php b/PHPUnit/Util/Skeleton.php
index 7c100f2b5..a92b5b23e 100644
--- a/PHPUnit/Util/Skeleton.php
+++ b/PHPUnit/Util/Skeleton.php
@@ -100,7 +100,11 @@ public function __construct($className, $classSourceFile = '')
         $this->className      = $className;
         $this->testSourceFile = $className . 'Test.php';
 
-        if (empty($classSourceFile) && is_file($className . '.php')) {
+        if (class_exists($className)) {
+            $this->classSourceFile = '<internal>';
+        }
+
+        else if (empty($classSourceFile) && is_file($className . '.php')) {
             $this->classSourceFile = $className . '.php';
         }
 
@@ -132,7 +136,9 @@ public function __construct($className, $classSourceFile = '')
             $this->classSourceFile = $classSourceFile;
         }
 
-        include_once $this->classSourceFile;
+        if ($this->classSourceFile != '<internal>') {
+            include_once $this->classSourceFile;
+        }
 
         if (!class_exists($className)) {
             throw new RuntimeException(
@@ -162,7 +168,6 @@ public function generate($verbose = FALSE)
         foreach ($class->getMethods() as $method) {
             if (!$method->isConstructor() &&
                 !$method->isAbstract() &&
-                 $method->isUserDefined() &&
                  $method->isPublic() &&
                  $method->getDeclaringClass()->getName() == $this->className) {
                 $testTagFound = FALSE;
@@ -278,17 +283,27 @@ public function generate($verbose = FALSE)
           )
         );
 
+        if ($this->classSourceFile != '<internal>') {
+            $requireClassFile = sprintf(
+              "\n\nrequire_once '%s';",
+
+              $this->classSourceFile
+            );
+        } else {
+            $requireClassFile = '';
+        }
+
         $classTemplate->setVar(
           array(
             'className',
-            'classFile',
+            'requireClassFile',
             'methods',
             'date',
             'time'
           ),
           array(
             $this->className,
-            $this->classSourceFile,
+            $requireClassFile,
             !empty($methods) ? $methods : $incompleteMethods,
             date('Y-m-d'),
             date('H:i:s')
diff --git a/PHPUnit/Util/Skeleton/TestClass.php b/PHPUnit/Util/Skeleton/TestClass.php
index 847a48482..2785e3149 100644
--- a/PHPUnit/Util/Skeleton/TestClass.php
+++ b/PHPUnit/Util/Skeleton/TestClass.php
@@ -5,9 +5,7 @@
 }
 
 require_once "PHPUnit/Framework/TestCase.php";
-require_once "PHPUnit/Framework/TestSuite.php";
-
-require_once "{classFile}";
+require_once "PHPUnit/Framework/TestSuite.php";{requireClassFile}
 
 /**
  * Test class for {className}.
