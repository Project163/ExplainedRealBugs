diff --git a/PHPUnit/Tests/TextUI/coverage-clover-function.phpt b/PHPUnit/Tests/TextUI/coverage-clover-function.phpt
new file mode 100644
index 000000000..8633f6b9c
--- /dev/null
+++ b/PHPUnit/Tests/TextUI/coverage-clover-function.phpt
@@ -0,0 +1,33 @@
+--TEST--
+phpunit --coverage-clover php://stdout CoverageFunctionTest ../_files/CoverageFunctionTest.php
+--FILE--
+<?php
+$_SERVER['argv'][1] = '--no-configuration';
+$_SERVER['argv'][2] = '--coverage-clover';
+$_SERVER['argv'][3] = 'php://stdout';
+$_SERVER['argv'][4] = 'CoverageFunctionTest';
+$_SERVER['argv'][5] = dirname(dirname(__FILE__)) . '/_files/CoverageFunctionTest.php';
+
+require_once dirname(dirname(dirname(__FILE__))) . '/TextUI/Command.php';
+PHPUnit_TextUI_Command::main();
+?>
+--EXPECTF--
+PHPUnit %s by Sebastian Bergmann.
+
+.
+
+Time: %i %s
+
+OK (1 test, 0 assertions)
+
+Writing code coverage data to XML file, this may take a moment.<?xml version="1.0" encoding="UTF-8"?>
+<coverage generated="%i" phpunit="%s">
+  <project name="CoverageTest" timestamp="%i">
+    <file name="%s/CoveredFunction.php">
+      <line num="4" type="stmt" count="1"/>
+      <line num="5" type="stmt" count="1"/>
+      <metrics loc="5" ncloc="5" classes="0" methods="0" coveredmethods="0" statements="2" coveredstatements="2" elements="2" coveredelements="2"/>
+    </file>
+    <metrics files="1" loc="5" ncloc="5" classes="0" methods="0" coveredmethods="0" statements="2" coveredstatements="2" elements="2" coveredelements="2"/>
+  </project>
+</coverage>
diff --git a/PHPUnit/Tests/_files/CoverageFunctionTest.php b/PHPUnit/Tests/_files/CoverageFunctionTest.php
new file mode 100644
index 000000000..f26d73bd3
--- /dev/null
+++ b/PHPUnit/Tests/_files/CoverageFunctionTest.php
@@ -0,0 +1,10 @@
+<?php
+require 'CoveredFunction.php';
+
+class CoverageTest extends PHPUnit_Framework_TestCase
+{
+    public function testFunction()
+    {
+        global_function();
+    }
+}
diff --git a/PHPUnit/Tests/_files/CoveredFunction.php b/PHPUnit/Tests/_files/CoveredFunction.php
new file mode 100644
index 000000000..b5009ed31
--- /dev/null
+++ b/PHPUnit/Tests/_files/CoveredFunction.php
@@ -0,0 +1,5 @@
+<?php
+function global_function()
+{
+    $a = 1 + 2;
+}
diff --git a/PHPUnit/Util/Log/Clover.php b/PHPUnit/Util/Log/Clover.php
index 8d2eefda8..5d9e07a16 100644
--- a/PHPUnit/Util/Log/Clover.php
+++ b/PHPUnit/Util/Log/Clover.php
@@ -245,22 +245,25 @@ public function process(PHPUnit_Framework_TestResult $result)
                 }
 
                 foreach ($data as $_line => $_data) {
-                    if (is_array($_data)) {
-                        $count = count($_data);
+                    if (isset($lines[$_line])) {
+                        continue;
                     }
 
-                    else if ($_data == -1) {
-                        $count = 0;
-                    }
+                    if ($_data != -2) {
+                        $fileStatistics['statements']++;
 
-                    else if ($_data == -2) {
-                        continue;
-                    }
+                        if (is_array($_data)) {
+                            $count = count($_data);
+                            $fileStatistics['coveredStatements']++;
+                        } else {
+                            $count = 0;
+                        }
 
-                    $lines[$_line] = array(
-                      'count' => $count,
-                      'type' => 'stmt'
-                    );
+                        $lines[$_line] = array(
+                          'count' => $count,
+                          'type' => 'stmt'
+                        );
+                    }
                 }
 
                 ksort($lines);
diff --git a/package.xml b/package.xml
index 7f0431587..640e5d34a 100644
--- a/package.xml
+++ b/package.xml
@@ -957,6 +957,7 @@
       <file baseinstalldir="/" name="coverage-clover-class-extended.phpt" role="test" />
       <file baseinstalldir="/" name="coverage-clover-class-isolation.phpt" role="test" />
       <file baseinstalldir="/" name="coverage-clover-class.phpt" role="test" />
+      <file baseinstalldir="/" name="coverage-clover-function.phpt" role="test" />
       <file baseinstalldir="/" name="coverage-clover-isolation.phpt" role="test" />
       <file baseinstalldir="/" name="coverage-clover-method-isolation.phpt" role="test" />
       <file baseinstalldir="/" name="coverage-clover-method.phpt" role="test" />
@@ -1068,6 +1069,9 @@
       <file baseinstalldir="/" name="CoverageClassTest.php" role="test">
        <tasks:replace from="@package_version@" to="version" type="package-info" />
       </file>
+      <file baseinstalldir="/" name="CoverageFunctionTest.php" role="test">
+       <tasks:replace from="@package_version@" to="version" type="package-info" />
+      </file>
       <file baseinstalldir="/" name="CoverageMethodTest.php" role="test">
        <tasks:replace from="@package_version@" to="version" type="package-info" />
       </file>
@@ -1092,6 +1096,9 @@
       <file baseinstalldir="/" name="CoveredClass.php" role="test">
        <tasks:replace from="@package_version@" to="version" type="package-info" />
       </file>
+      <file baseinstalldir="/" name="CoveredFunction.php" role="test">
+       <tasks:replace from="@package_version@" to="version" type="package-info" />
+      </file>
       <file baseinstalldir="/" name="DataProviderTest.php" role="test">
        <tasks:replace from="@package_version@" to="version" type="package-info" />
       </file>
