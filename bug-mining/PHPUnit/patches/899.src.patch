diff --git a/ChangeLog-11.4.md b/ChangeLog-11.4.md
index 3009d1e6f..a915d6ed6 100644
--- a/ChangeLog-11.4.md
+++ b/ChangeLog-11.4.md
@@ -2,6 +2,12 @@
 
 All notable changes of the PHPUnit 11.4 release series are documented in this file using the [Keep a CHANGELOG](https://keepachangelog.com/) principles.
 
+## [11.4.4] - 2024-MM-DD
+
+### Fixed
+
+* [#6028](https://github.com/sebastianbergmann/phpunit/issues/6028): `ignoreIndirectDeprecations=true` suppresses deprecations triggered in test code
+
 ## [11.4.3] - 2024-10-28
 
 ### Changed
diff --git a/src/Event/Value/Test/Issue/IssueTrigger.php b/src/Event/Value/Test/Issue/IssueTrigger.php
index 80ba1c8b7..93e42c729 100644
--- a/src/Event/Value/Test/Issue/IssueTrigger.php
+++ b/src/Event/Value/Test/Issue/IssueTrigger.php
@@ -16,6 +16,11 @@
  */
 abstract class IssueTrigger
 {
+    public static function test(): TestTrigger
+    {
+        return new TestTrigger;
+    }
+
     public static function self(): SelfTrigger
     {
         return new SelfTrigger;
@@ -40,6 +45,16 @@ final private function __construct()
     {
     }
 
+    /**
+     * Your test code triggers an issue.
+     *
+     * @phpstan-assert-if-true TestTrigger $this
+     */
+    public function isTest(): bool
+    {
+        return false;
+    }
+
     /**
      * Your own code triggers an issue in your own code.
      *
diff --git a/src/Event/Value/Test/Issue/TestTrigger.php b/src/Event/Value/Test/Issue/TestTrigger.php
new file mode 100644
index 000000000..ea3c66400
--- /dev/null
+++ b/src/Event/Value/Test/Issue/TestTrigger.php
@@ -0,0 +1,39 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\Event\Code\IssueTrigger;
+
+/**
+ * @immutable
+ *
+ * @no-named-arguments Parameter names are not covered by the backward compatibility promise for PHPUnit
+ */
+final class TestTrigger extends IssueTrigger
+{
+    /**
+     * Your test code triggers an issue.
+     */
+    public function isTest(): true
+    {
+        return true;
+    }
+
+    /**
+     * Your own code triggers an issue in your own code.
+     */
+    public function isSelf(): true
+    {
+        return true;
+    }
+
+    public function asString(): string
+    {
+        return 'issue triggered by test code';
+    }
+}
diff --git a/src/Runner/ErrorHandler.php b/src/Runner/ErrorHandler.php
index a6597475f..95afbeb32 100644
--- a/src/Runner/ErrorHandler.php
+++ b/src/Runner/ErrorHandler.php
@@ -269,10 +269,14 @@ private function trigger(TestMethod $test, bool $filterTrigger): IssueTrigger
         $triggeredInFirstPartyCode       = false;
         $triggerCalledFromFirstPartyCode = false;
 
-        if (isset($trace[0]['file']) &&
-            ($trace[0]['file'] === $test->file() ||
-            $this->sourceFilter->includes($this->source, $trace[0]['file']))) {
-            $triggeredInFirstPartyCode = true;
+        if (isset($trace[0]['file'])) {
+            if ($trace[0]['file'] === $test->file()) {
+                return IssueTrigger::test();
+            }
+
+            if ($this->sourceFilter->includes($this->source, $trace[0]['file'])) {
+                $triggeredInFirstPartyCode = true;
+            }
         }
 
         if (isset($trace[1]['file']) &&
diff --git a/tests/end-to-end/regression/6028.phpt b/tests/end-to-end/regression/6028.phpt
new file mode 100644
index 000000000..ebdf9236f
--- /dev/null
+++ b/tests/end-to-end/regression/6028.phpt
@@ -0,0 +1,34 @@
+--TEST--
+https://github.com/sebastianbergmann/phpunit/issues/6028
+--FILE--
+<?php declare(strict_types=1);
+$_SERVER['argv'][] = '--do-not-cache-result';
+$_SERVER['argv'][] = '--display-deprecations';
+$_SERVER['argv'][] = '--configuration';
+$_SERVER['argv'][] = __DIR__ . '/6028';
+
+require_once __DIR__ . '/../../bootstrap.php';
+
+(new PHPUnit\TextUI\Application)->run($_SERVER['argv']);
+--EXPECTF--
+PHPUnit %s by Sebastian Bergmann and contributors.
+
+Runtime:       %s
+Configuration: %sphpunit.xml
+
+D                                                                   1 / 1 (100%)
+
+Time: %s, Memory: %s
+
+1 test triggered 1 deprecation:
+
+1) %sIssue6028Test.php:20
+message
+
+Triggered by:
+
+* PHPUnit\TestFixture\Issue6028\Issue6028Test::testOne
+  %sIssue6028Test.php:18
+
+OK, but there were issues!
+Tests: 1, Assertions: 1, Deprecations: 1.
diff --git a/tests/end-to-end/regression/6028/phpunit.xml b/tests/end-to-end/regression/6028/phpunit.xml
new file mode 100644
index 000000000..f2074c54f
--- /dev/null
+++ b/tests/end-to-end/regression/6028/phpunit.xml
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+         xsi:noNamespaceSchemaLocation="../../../../phpunit.xsd"
+>
+    <testsuites>
+        <testsuite name="default">
+            <directory>tests</directory>
+        </testsuite>
+    </testsuites>
+
+    <source ignoreIndirectDeprecations="true" restrictNotices="true" restrictWarnings="true">
+        <include>
+            <directory>src</directory>
+        </include>
+    </source>
+</phpunit>
diff --git a/tests/end-to-end/regression/6028/src/.gitkeep b/tests/end-to-end/regression/6028/src/.gitkeep
new file mode 100644
index 000000000..e69de29bb
diff --git a/tests/end-to-end/regression/6028/tests/Issue6028Test.php b/tests/end-to-end/regression/6028/tests/Issue6028Test.php
new file mode 100644
index 000000000..906b11de8
--- /dev/null
+++ b/tests/end-to-end/regression/6028/tests/Issue6028Test.php
@@ -0,0 +1,24 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\Issue6028;
+
+use const E_USER_DEPRECATED;
+use function trigger_error;
+use PHPUnit\Framework\TestCase;
+
+final class Issue6028Test extends TestCase
+{
+    public function testOne(): void
+    {
+        trigger_error('message', E_USER_DEPRECATED);
+
+        $this->assertTrue(true);
+    }
+}
diff --git a/tests/unit/Event/Value/Test/IssueTriggerTest.php b/tests/unit/Event/Value/Test/IssueTriggerTest.php
index ae1b712d2..d610f3f03 100644
--- a/tests/unit/Event/Value/Test/IssueTriggerTest.php
+++ b/tests/unit/Event/Value/Test/IssueTriggerTest.php
@@ -20,11 +20,24 @@
 #[Small]
 final class IssueTriggerTest extends TestCase
 {
+    public function testCanBeTest(): void
+    {
+        $trigger = IssueTrigger::test();
+
+        $this->assertTrue($trigger->isTest());
+        $this->assertTrue($trigger->isSelf());
+        $this->assertFalse($trigger->isDirect());
+        $this->assertFalse($trigger->isIndirect());
+        $this->assertFalse($trigger->isUnknown());
+        $this->assertSame('issue triggered by test code', $trigger->asString());
+    }
+
     public function testCanBeSelf(): void
     {
         $trigger = IssueTrigger::self();
 
         $this->assertTrue($trigger->isSelf());
+        $this->assertFalse($trigger->isTest());
         $this->assertFalse($trigger->isDirect());
         $this->assertFalse($trigger->isIndirect());
         $this->assertFalse($trigger->isUnknown());
@@ -36,6 +49,7 @@ public function testCanBeDirect(): void
         $trigger = IssueTrigger::direct();
 
         $this->assertTrue($trigger->isDirect());
+        $this->assertFalse($trigger->isTest());
         $this->assertFalse($trigger->isSelf());
         $this->assertFalse($trigger->isIndirect());
         $this->assertFalse($trigger->isUnknown());
@@ -47,6 +61,7 @@ public function testCanBeIndirect(): void
         $trigger = IssueTrigger::indirect();
 
         $this->assertTrue($trigger->isIndirect());
+        $this->assertFalse($trigger->isTest());
         $this->assertFalse($trigger->isSelf());
         $this->assertFalse($trigger->isDirect());
         $this->assertFalse($trigger->isUnknown());
@@ -57,6 +72,7 @@ public function testCanBeUnknown(): void
     {
         $trigger = IssueTrigger::unknown();
 
+        $this->assertFalse($trigger->isTest());
         $this->assertFalse($trigger->isSelf());
         $this->assertFalse($trigger->isDirect());
         $this->assertFalse($trigger->isIndirect());
