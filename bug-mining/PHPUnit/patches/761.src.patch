diff --git a/ChangeLog-10.3.md b/ChangeLog-10.3.md
index 0fe7336a7..688fc37c8 100644
--- a/ChangeLog-10.3.md
+++ b/ChangeLog-10.3.md
@@ -19,4 +19,8 @@ All notable changes of the PHPUnit 10.3 release series are documented in this fi
 * `TestCase::createStub()`, `TestCase::createStubForIntersectionOfInterfaces()`, and `TestCase::createConfiguredStub()` are now static (and can be used from static data provider methods)
 * The internal methods `__phpunit_*()` have been removed from the `Stub` and `MockObject` interfaces
 
+### Fixed
+
+* [#5456](https://github.com/sebastianbergmann/phpunit/issues/5456): Risky Test Check for Output Buffering is performed before after-test methods are called
+
 [10.3.0]: https://github.com/sebastianbergmann/phpunit/compare/10.2.7...main
diff --git a/src/Framework/TestCase.php b/src/Framework/TestCase.php
index 8e14876b5..2d7606460 100644
--- a/src/Framework/TestCase.php
+++ b/src/Framework/TestCase.php
@@ -705,7 +705,13 @@ final public function runBare(): void
             }
         }
 
-        if ($this->stopOutputBuffering() && !isset($e)) {
+        $outputBufferingStopped = false;
+
+        if (!isset($e) &&
+            $this->hasExpectationOnOutput() &&
+            $this->stopOutputBuffering()) {
+            $outputBufferingStopped = true;
+
             $this->performAssertionsOnOutput();
         }
 
@@ -746,6 +752,10 @@ final public function runBare(): void
             }
         }
 
+        if (!$outputBufferingStopped) {
+            $this->stopOutputBuffering();
+        }
+
         clearstatcache();
 
         if ($currentWorkingDirectory !== getcwd()) {
diff --git a/tests/end-to-end/regression/5456.phpt b/tests/end-to-end/regression/5456.phpt
new file mode 100644
index 000000000..1bec8c504
--- /dev/null
+++ b/tests/end-to-end/regression/5456.phpt
@@ -0,0 +1,21 @@
+--TEST--
+https://github.com/sebastianbergmann/phpunit/issues/5456
+--FILE--
+<?php declare(strict_types=1);
+$_SERVER['argv'][] = '--do-not-cache-result';
+$_SERVER['argv'][] = '--no-configuration';
+$_SERVER['argv'][] = __DIR__ . '/5456';
+
+require_once __DIR__ . '/../../bootstrap.php';
+
+(new PHPUnit\TextUI\Application)->run($_SERVER['argv']);
+--EXPECTF--
+PHPUnit %s by Sebastian Bergmann and contributors.
+
+Runtime: %s
+
+.                                                                   1 / 1 (100%)
+
+Time: %s, Memory: %s
+
+OK (1 test, 1 assertion)
diff --git a/tests/end-to-end/regression/5456/Issue5456Test.php b/tests/end-to-end/regression/5456/Issue5456Test.php
new file mode 100644
index 000000000..f98685f37
--- /dev/null
+++ b/tests/end-to-end/regression/5456/Issue5456Test.php
@@ -0,0 +1,29 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\Issue5456;
+
+use function ob_end_clean;
+use function ob_start;
+use PHPUnit\Framework\TestCase;
+
+final class Issue5456Test extends TestCase
+{
+    protected function tearDown(): void
+    {
+        ob_end_clean();
+    }
+
+    public function testOne(): void
+    {
+        $this->assertTrue(true);
+
+        ob_start();
+    }
+}
