diff --git a/build.xml b/build.xml
index 39f753e4c..4c23ea3b5 100644
--- a/build.xml
+++ b/build.xml
@@ -377,13 +377,12 @@
 
   <exec executable="phpab">
    <arg value="--all" />
+   <arg value="--static" />
    <arg value="--phar" />
    <arg value="--output" />
    <arg path="${basedir}/build/phpunit-${_version}.phar" />
    <arg value="--template" />
    <arg path="${basedir}/build/phar-autoload.php.in" />
-   <arg value="--indent" />
-   <arg value="            " />
    <arg path="${basedir}/build/phar" />
   </exec>
 
diff --git a/build/phar-autoload.php.in b/build/phar-autoload.php.in
index 62d8f4966..d08b3ad97 100644
--- a/build/phar-autoload.php.in
+++ b/build/phar-autoload.php.in
@@ -12,24 +12,7 @@ if (__FILE__ == realpath($GLOBALS['_SERVER']['SCRIPT_NAME'])) {
 define('__PHPUNIT_PHAR__', str_replace(DIRECTORY_SEPARATOR, '/', $phar));
 define('__PHPUNIT_PHAR_ROOT__', 'phar://___PHAR___');
 
-spl_autoload_register(
-  function ($class)
-  {
-      static $classes = NULL;
-
-      if ($classes === NULL) {
-          $classes = array(
-            ___CLASSLIST___
-          );
-      }
-
-      $class = strtolower($class);
-
-      if (isset($classes[$class])) {
-          require __PHPUNIT_PHAR_ROOT__ . $classes[$class];
-      }
-  }
-);
+___FILELIST___
 
 Phar::mapPhar('___PHAR___');
 
