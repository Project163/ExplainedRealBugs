diff --git a/ChangeLog.markdown b/ChangeLog.markdown
index cb8a87318..6008ea511 100644
--- a/ChangeLog.markdown
+++ b/ChangeLog.markdown
@@ -9,6 +9,7 @@ PHPUnit 3.6.11
 * Fixed #510: PHP 5.4 `callable` type hint raises `E_NOTICE` when object is mocked.
 * Fixed phpunit-selenium #72: Allow Selenium to have tests that have no concrete test methods.
 * Fixed phpunit-mock-object #83: `getMockFromWsdl()` didn't work twice with the same wsdl file.
+* Fixed #503: Improved the error message if compared strings only differ in line ending style.
 
 PHPUnit 3.6.10
 --------------
diff --git a/PHPUnit/Util/Diff.php b/PHPUnit/Util/Diff.php
index f9040bf21..df09fde48 100644
--- a/PHPUnit/Util/Diff.php
+++ b/PHPUnit/Util/Diff.php
@@ -148,6 +148,9 @@ public static function diff($from, $to)
      */
     public static function diffToArray($from, $to)
     {
+        preg_match_all('(\r\n|\r|\n)', $from, $fromMatches);
+        preg_match_all('(\r\n|\r|\n)', $to, $toMatches);
+
         if (is_string($from)) {
             $from = preg_split('(\r\n|\r|\n)', $from);
         }
@@ -189,6 +192,14 @@ public static function diffToArray($from, $to)
         $diff = array();
         $line = 0;
 
+        if(isset($fromMatches[0]) 
+            && $toMatches[0] 
+            && count($fromMatches[0]) === count($toMatches[0]) 
+            && $fromMatches[0] !== $toMatches[0]
+        ) {
+            $diff[] = array('#Warning: Strings contain different line endings!', 0);
+        }
+
         foreach ($start as $token) {
             $diff[] = array($token, 0 /* OLD */);
         }
diff --git a/Tests/Regression/GitHub/503.phpt b/Tests/Regression/GitHub/503.phpt
new file mode 100644
index 000000000..3ccff2784
--- /dev/null
+++ b/Tests/Regression/GitHub/503.phpt
@@ -0,0 +1,34 @@
+--TEST--
+GH-503: assertEquals() Line Ending Differences Are Obscure
+--FILE--
+<?php
+
+$_SERVER['argv'][1] = '--no-configuration';
+$_SERVER['argv'][2] = 'Issue503Test';
+$_SERVER['argv'][3] = dirname(__FILE__).'/503/Issue503Test.php';
+
+require_once dirname(dirname(dirname(dirname(__FILE__)))) . '/PHPUnit/Autoload.php';
+PHPUnit_TextUI_Command::main();
+?>
+--EXPECTF--
+PHPUnit %s by Sebastian Bergmann.
+
+F
+
+Time: %i %s, Memory: %sMb
+
+There was 1 failure:
+
+1) Issue503Test::testCompareDifferentLineEndings
+Failed asserting that two strings are identical.
+--- Expected
++++ Actual
+@@ @@
+ #Warning: Strings contain different line endings!
+ foo
+
+%s:%i
+
+FAILURES!
+Tests: 1, Assertions: 1, Failures: 1.
+
diff --git a/Tests/Regression/GitHub/503/Issue503Test.php b/Tests/Regression/GitHub/503/Issue503Test.php
new file mode 100644
index 000000000..75ca8d454
--- /dev/null
+++ b/Tests/Regression/GitHub/503/Issue503Test.php
@@ -0,0 +1,11 @@
+<?php
+class Issue503Test extends PHPUnit_Framework_TestCase
+{
+    public function testCompareDifferentLineEndings()
+    {
+        $this->assertSame(
+            "foo\n",
+            "foo\r\n"
+        );
+    }
+}
