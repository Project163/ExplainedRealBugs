diff --git a/ChangeLog-10.3.md b/ChangeLog-10.3.md
index 32be20763..314365f63 100644
--- a/ChangeLog-10.3.md
+++ b/ChangeLog-10.3.md
@@ -8,6 +8,10 @@ All notable changes of the PHPUnit 10.3 release series are documented in this fi
 
 * The child processes used for process isolation now use temporary files to communicate their result to the parent process
 
+### Fixed
+
+* [#5493](https://github.com/sebastianbergmann/phpunit/issues/5493): Assertion failures during setup swallows test outcome
+
 ## [10.3.4] - 2023-09-12
 
 ### Changed
diff --git a/src/Framework/TestCase.php b/src/Framework/TestCase.php
index 3214882d5..9ce8f91b1 100644
--- a/src/Framework/TestCase.php
+++ b/src/Framework/TestCase.php
@@ -671,6 +671,10 @@ final public function runBare(): void
                 $e->getMessage(),
             );
         } catch (AssertionError|AssertionFailedError $e) {
+            if (!$this->wasPrepared) {
+                $this->wasPrepared = true;
+            }
+
             $this->status = TestStatus::failure($e->getMessage());
 
             $emitter->testFailed(
diff --git a/tests/end-to-end/regression/5493.phpt b/tests/end-to-end/regression/5493.phpt
index 95edce599..c828eb60e 100644
--- a/tests/end-to-end/regression/5493.phpt
+++ b/tests/end-to-end/regression/5493.phpt
@@ -1,7 +1,5 @@
 --TEST--
 https://github.com/sebastianbergmann/phpunit/issues/5493
---XFAIL--
-https://github.com/sebastianbergmann/phpunit/issues/5493
 --FILE--
 <?php declare(strict_types=1);
 $_SERVER['argv'][] = '--do-not-cache-result';
