diff --git a/src/Framework/MockObject/MockMethod.php b/src/Framework/MockObject/MockMethod.php
index 00c3c039a..4cbda2610 100644
--- a/src/Framework/MockObject/MockMethod.php
+++ b/src/Framework/MockObject/MockMethod.php
@@ -374,7 +374,7 @@ private static function unionTypeAsString(ReflectionUnionType $union, string $se
         $types = [];
 
         foreach ($union->getTypes() as $type) {
-            if ($type === 'self') {
+            if ((string) $type === 'self') {
                 $types[] = $self;
             } else {
                 $types[] = $type;
diff --git a/tests/end-to-end/mock-objects/generator/union_type_parameter.phpt b/tests/end-to-end/mock-objects/generator/union_type_parameter.phpt
index 1244fe53c..b4f036317 100644
--- a/tests/end-to-end/mock-objects/generator/union_type_parameter.phpt
+++ b/tests/end-to-end/mock-objects/generator/union_type_parameter.phpt
@@ -9,7 +9,7 @@ if (PHP_MAJOR_VERSION < 8) {
 <?php declare(strict_types=1);
 class Foo
 {
-    public function bar(bool|int $baz)
+    public function bar(bool|int $baz, self|stdClass $other)
     {
     }
 }
@@ -36,15 +36,15 @@ class MockFoo extends Foo implements PHPUnit\Framework\MockObject\MockObject
     use \PHPUnit\Framework\MockObject\Method;
     use \PHPUnit\Framework\MockObject\MockedCloneMethod;
 
-    public function bar(int|bool $baz)
+    public function bar(int|bool $baz, Foo|stdClass $other)
     {
-        $__phpunit_arguments = [$baz];
+        $__phpunit_arguments = [$baz, $other];
         $__phpunit_count     = func_num_args();
 
-        if ($__phpunit_count > 1) {
+        if ($__phpunit_count > 2) {
             $__phpunit_arguments_tmp = func_get_args();
 
-            for ($__phpunit_i = 1; $__phpunit_i < $__phpunit_count; $__phpunit_i++) {
+            for ($__phpunit_i = 2; $__phpunit_i < $__phpunit_count; $__phpunit_i++) {
                 $__phpunit_arguments[] = $__phpunit_arguments_tmp[$__phpunit_i];
             }
         }
