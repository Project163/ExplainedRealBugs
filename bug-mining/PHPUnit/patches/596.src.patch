diff --git a/src/TextUI/XmlConfiguration/Migration/Migrations/MoveWhitelistExcludesToCoverage.php b/src/TextUI/XmlConfiguration/Migration/Migrations/MoveWhitelistExcludesToCoverage.php
index b007de471..0a85cd1b8 100644
--- a/src/TextUI/XmlConfiguration/Migration/Migrations/MoveWhitelistExcludesToCoverage.php
+++ b/src/TextUI/XmlConfiguration/Migration/Migrations/MoveWhitelistExcludesToCoverage.php
@@ -11,6 +11,7 @@
 
 use DOMDocument;
 use DOMElement;
+use TextUI\XmlConfiguration\Migration\SnapshotNodeList;
 
 /**
  * @internal This class is not covered by the backward compatibility promise for PHPUnit
@@ -28,9 +29,8 @@ public function migrate(DOMDocument $document): void
             return;
         }
 
-        $exclude = $whitelist->getElementsByTagName('exclude')->item(0);
-
-        if ($exclude === null) {
+        $excludeNodes = SnapshotNodeList::fromNodeList($whitelist->getElementsByTagName('exclude'));
+        if ($excludeNodes->count() === 0) {
             return;
         }
 
@@ -40,6 +40,31 @@ public function migrate(DOMDocument $document): void
             throw new MigrationException('Unexpected state - No coverage element');
         }
 
-        $coverage->appendChild($exclude);
+        $targetExclude = $coverage->getElementsByTagName('exclude')->item(0);
+
+        if ($targetExclude === null) {
+            $targetExclude = $coverage->appendChild(
+                $document->createElement('exclude')
+            );
+        }
+
+        foreach ($excludeNodes as $excludeNode) {
+            assert($excludeNode instanceof DOMElement);
+
+
+            foreach (SnapshotNodeList::fromNodeList($excludeNode->childNodes) as $child) {
+                if (!$child instanceof DOMElement || !in_array($child->nodeName, ['directory', 'file'], true)) {
+                    continue;
+                }
+
+                $targetExclude->appendChild($child);
+            }
+
+            if ($excludeNode->getElementsByTagName('*')->count() !== 0) {
+                throw new MigrationException('Dangling child elements in exclude found.');
+            }
+
+            $whitelist->removeChild($excludeNode);
+        }
     }
 }
diff --git a/src/TextUI/XmlConfiguration/Migration/SnapshotNodeList.php b/src/TextUI/XmlConfiguration/Migration/SnapshotNodeList.php
new file mode 100644
index 000000000..4a5ee9d44
--- /dev/null
+++ b/src/TextUI/XmlConfiguration/Migration/SnapshotNodeList.php
@@ -0,0 +1,32 @@
+<?php declare(strict_types = 1);
+namespace TextUI\XmlConfiguration\Migration;
+
+use ArrayIterator;
+use Countable;
+use DOMNode;
+use DOMNodeList;
+use IteratorAggregate;
+
+class SnapshotNodeList implements IteratorAggregate, Countable {
+
+    /** @var DOMNode[] */
+    private $nodes = [];
+
+    public static function fromNodeList(DOMNodeList  $list): SnapshotNodeList {
+        $snapshot = new self();
+        foreach($list as $node) {
+            $snapshot->nodes[] = $node;
+        }
+
+        return $snapshot;
+    }
+
+    public function count(): int {
+        return count($this->nodes);
+    }
+
+    public function getIterator() {
+        return new ArrayIterator($this->nodes);
+    }
+
+}
diff --git a/tests/_files/XmlConfigurationMigration/input-9.2.xml b/tests/_files/XmlConfigurationMigration/input-9.2.xml
index b2f4fb4dd..5ca77be85 100644
--- a/tests/_files/XmlConfigurationMigration/input-9.2.xml
+++ b/tests/_files/XmlConfigurationMigration/input-9.2.xml
@@ -14,6 +14,10 @@
                 <directory suffix=".php">src/generated</directory>
                 <file>src/autoload.php</file>
             </exclude>
+            <exclude>
+                <directory suffix=".php">src/other</directory>
+                <file>src/some.php</file>
+            </exclude>
         </whitelist>
     </filter>
 
diff --git a/tests/_files/XmlConfigurationMigration/output-9.3.xml b/tests/_files/XmlConfigurationMigration/output-9.3.xml
index 6b8c47c79..2ad764173 100644
--- a/tests/_files/XmlConfigurationMigration/output-9.3.xml
+++ b/tests/_files/XmlConfigurationMigration/output-9.3.xml
@@ -13,6 +13,8 @@
         <exclude>
             <directory suffix=".php">src/generated</directory>
             <file>src/autoload.php</file>
+            <directory suffix=".php">src/other</directory>
+            <file>src/some.php</file>
         </exclude>
 
         <report>
