diff --git a/src/Framework/MockObject/Builder/InvocationMocker.php b/src/Framework/MockObject/Builder/InvocationMocker.php
index c20347ba3..8ea17c033 100644
--- a/src/Framework/MockObject/Builder/InvocationMocker.php
+++ b/src/Framework/MockObject/Builder/InvocationMocker.php
@@ -30,11 +30,17 @@ class PHPUnit_Framework_MockObject_Builder_InvocationMocker implements PHPUnit_F
      */
     protected $matcher;
 
+    /**
+     * @var string[]
+     */
+    private $configurableMethods = [];
+
     /**
      * @param PHPUnit_Framework_MockObject_Stub_MatcherCollection $collection
      * @param PHPUnit_Framework_MockObject_Matcher_Invocation     $invocationMatcher
+     * @param array                                               $configurableMethods
      */
-    public function __construct(PHPUnit_Framework_MockObject_Stub_MatcherCollection $collection, PHPUnit_Framework_MockObject_Matcher_Invocation $invocationMatcher)
+    public function __construct(PHPUnit_Framework_MockObject_Stub_MatcherCollection $collection, PHPUnit_Framework_MockObject_Matcher_Invocation $invocationMatcher, array $configurableMethods)
     {
         $this->collection = $collection;
         $this->matcher    = new PHPUnit_Framework_MockObject_Matcher(
@@ -42,6 +48,8 @@ public function __construct(PHPUnit_Framework_MockObject_Stub_MatcherCollection
         );
 
         $this->collection->addMatcher($this->matcher);
+
+        $this->configurableMethods = $configurableMethods;
     }
 
     /**
@@ -249,6 +257,15 @@ public function method($constraint)
             );
         }
 
+        if (is_string($constraint) && !in_array($constraint, $this->configurableMethods)) {
+            throw new PHPUnit_Framework_MockObject_RuntimeException(
+                sprintf(
+                    'Trying to configure method "%s" which cannot be configured',
+                    $constraint
+                )
+            );
+        }
+
         $this->matcher->methodNameMatcher = new PHPUnit_Framework_MockObject_Matcher_MethodName($constraint);
 
         return $this;
diff --git a/src/Framework/MockObject/Generator.php b/src/Framework/MockObject/Generator.php
index e12d1067d..bae1e628e 100644
--- a/src/Framework/MockObject/Generator.php
+++ b/src/Framework/MockObject/Generator.php
@@ -753,6 +753,13 @@ private function generateMock($type, $methods, $mockClassName, $callOriginalClon
         }
 
         $mockedMethods = '';
+        $configurable  = [];
+
+        foreach ($methods as $methodName) {
+            if ($methodName != '__construct' && $methodName != '__clone') {
+                $configurable[] = $methodName;
+            }
+        }
 
         if (isset($class)) {
             // https://github.com/sebastianbergmann/phpunit-mock-objects/issues/103
@@ -817,7 +824,8 @@ private function generateMock($type, $methods, $mockClassName, $callOriginalClon
                 'clone'             => $cloneTemplate,
                 'mock_class_name'   => $mockClassName['className'],
                 'mocked_methods'    => $mockedMethods,
-                'method'            => $method
+                'method'            => $method,
+                'configurable'      => '[' . implode(', ', array_map(function ($m) { return '\'' . $m . '\'';}, $configurable)) . ']'
             ]
         );
 
diff --git a/src/Framework/MockObject/Generator/mocked_class.tpl.dist b/src/Framework/MockObject/Generator/mocked_class.tpl.dist
index 4b781a17e..30ec49055 100644
--- a/src/Framework/MockObject/Generator/mocked_class.tpl.dist
+++ b/src/Framework/MockObject/Generator/mocked_class.tpl.dist
@@ -2,6 +2,7 @@
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = {configurable};
 
 {clone}{mocked_methods}
     public function expects(PHPUnit_Framework_MockObject_Matcher_Invocation $matcher)
@@ -17,7 +18,7 @@
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/src/Framework/MockObject/InvocationMocker.php b/src/Framework/MockObject/InvocationMocker.php
index 434e11d12..3da5e1fdc 100644
--- a/src/Framework/MockObject/InvocationMocker.php
+++ b/src/Framework/MockObject/InvocationMocker.php
@@ -29,6 +29,19 @@ class PHPUnit_Framework_MockObject_InvocationMocker implements PHPUnit_Framework
      */
     protected $builderMap = [];
 
+    /**
+     * @var string[]
+     */
+    private $configurableMethods = [];
+
+    /**
+     * @param array $configurableMethods
+     */
+    public function __construct(array $configurableMethods)
+    {
+        $this->configurableMethods = $configurableMethods;
+    }
+
     /**
      * @param PHPUnit_Framework_MockObject_Matcher_Invocation $matcher
      */
@@ -88,7 +101,8 @@ public function expects(PHPUnit_Framework_MockObject_Matcher_Invocation $matcher
     {
         return new PHPUnit_Framework_MockObject_Builder_InvocationMocker(
             $this,
-            $matcher
+            $matcher,
+            $this->configurableMethods
         );
     }
 
diff --git a/tests/MockObject/232.phpt b/tests/MockObject/232.phpt
index e02762ec6..b0690e90c 100644
--- a/tests/MockObject/232.phpt
+++ b/tests/MockObject/232.phpt
@@ -57,6 +57,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['speak'];
 
     public function __clone()
     {
@@ -105,7 +106,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/abstract_class.phpt b/tests/MockObject/abstract_class.phpt
index 8e4f384f4..800b45533 100644
--- a/tests/MockObject/abstract_class.phpt
+++ b/tests/MockObject/abstract_class.phpt
@@ -32,6 +32,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['one', 'two', 'three'];
 
     public function __clone()
     {
@@ -124,7 +125,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class.phpt b/tests/MockObject/class.phpt
index 73cc79370..4b1def350 100644
--- a/tests/MockObject/class.phpt
+++ b/tests/MockObject/class.phpt
@@ -32,6 +32,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar', 'baz'];
 
     public function __clone()
     {
@@ -102,7 +103,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_call_parent_clone.phpt b/tests/MockObject/class_call_parent_clone.phpt
index d0dc024b1..dd04cdbba 100644
--- a/tests/MockObject/class_call_parent_clone.phpt
+++ b/tests/MockObject/class_call_parent_clone.phpt
@@ -27,6 +27,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -54,7 +55,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_call_parent_constructor.phpt b/tests/MockObject/class_call_parent_constructor.phpt
index 07437c142..8c790448a 100644
--- a/tests/MockObject/class_call_parent_constructor.phpt
+++ b/tests/MockObject/class_call_parent_constructor.phpt
@@ -27,6 +27,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -53,7 +54,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_dont_call_parent_clone.phpt b/tests/MockObject/class_dont_call_parent_clone.phpt
index 854c31e3d..ce35011ed 100644
--- a/tests/MockObject/class_dont_call_parent_clone.phpt
+++ b/tests/MockObject/class_dont_call_parent_clone.phpt
@@ -27,6 +27,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -53,7 +54,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_dont_call_parent_constructor.phpt b/tests/MockObject/class_dont_call_parent_constructor.phpt
index 07437c142..8c790448a 100644
--- a/tests/MockObject/class_dont_call_parent_constructor.phpt
+++ b/tests/MockObject/class_dont_call_parent_constructor.phpt
@@ -27,6 +27,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -53,7 +54,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_implementing_interface_call_parent_constructor.phpt b/tests/MockObject/class_implementing_interface_call_parent_constructor.phpt
index ea98a4e75..54b7cc417 100644
--- a/tests/MockObject/class_implementing_interface_call_parent_constructor.phpt
+++ b/tests/MockObject/class_implementing_interface_call_parent_constructor.phpt
@@ -32,6 +32,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -58,7 +59,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_implementing_interface_dont_call_parent_constructor.phpt b/tests/MockObject/class_implementing_interface_dont_call_parent_constructor.phpt
index ea98a4e75..54b7cc417 100644
--- a/tests/MockObject/class_implementing_interface_dont_call_parent_constructor.phpt
+++ b/tests/MockObject/class_implementing_interface_dont_call_parent_constructor.phpt
@@ -32,6 +32,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -58,7 +59,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_partial.phpt b/tests/MockObject/class_partial.phpt
index 74e217445..e7b2fd4dc 100644
--- a/tests/MockObject/class_partial.phpt
+++ b/tests/MockObject/class_partial.phpt
@@ -32,6 +32,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -80,7 +81,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_with_method_named_method.phpt b/tests/MockObject/class_with_method_named_method.phpt
index 930622016..4711b8b93 100644
--- a/tests/MockObject/class_with_method_named_method.phpt
+++ b/tests/MockObject/class_with_method_named_method.phpt
@@ -28,6 +28,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['method'];
 
     public function __clone()
     {
@@ -69,7 +70,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/class_with_method_with_variadic_arguments.phpt b/tests/MockObject/class_with_method_with_variadic_arguments.phpt
index 3c1b1db45..006b84914 100644
--- a/tests/MockObject/class_with_method_with_variadic_arguments.phpt
+++ b/tests/MockObject/class_with_method_with_variadic_arguments.phpt
@@ -28,6 +28,7 @@ class MockFoo extends ClassWithMethodWithVariadicArguments implements PHPUnit_Fr
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['methodWithVariadicArguments'];
 
     public function __clone()
     {
@@ -76,7 +77,7 @@ class MockFoo extends ClassWithMethodWithVariadicArguments implements PHPUnit_Fr
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/interface.phpt b/tests/MockObject/interface.phpt
index 4d27e6e4b..70fa71855 100644
--- a/tests/MockObject/interface.phpt
+++ b/tests/MockObject/interface.phpt
@@ -26,6 +26,7 @@ class MockFoo implements PHPUnit_Framework_MockObject_MockObject, Foo
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -74,7 +75,7 @@ class MockFoo implements PHPUnit_Framework_MockObject_MockObject, Foo
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/invocation_object_clone_object.phpt b/tests/MockObject/invocation_object_clone_object.phpt
index 5b489c55c..932789ac4 100644
--- a/tests/MockObject/invocation_object_clone_object.phpt
+++ b/tests/MockObject/invocation_object_clone_object.phpt
@@ -33,6 +33,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar', 'baz'];
 
     public function __clone()
     {
@@ -103,7 +104,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class.phpt b/tests/MockObject/namespaced_class.phpt
index 3a8853099..f71b07dec 100644
--- a/tests/MockObject/namespaced_class.phpt
+++ b/tests/MockObject/namespaced_class.phpt
@@ -34,6 +34,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar', 'baz'];
 
     public function __clone()
     {
@@ -104,7 +105,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class_call_parent_clone.phpt b/tests/MockObject/namespaced_class_call_parent_clone.phpt
index a4cdd2087..bdc6739f7 100644
--- a/tests/MockObject/namespaced_class_call_parent_clone.phpt
+++ b/tests/MockObject/namespaced_class_call_parent_clone.phpt
@@ -29,6 +29,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -56,7 +57,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class_call_parent_constructor.phpt b/tests/MockObject/namespaced_class_call_parent_constructor.phpt
index c88f766f9..2c72d67bf 100644
--- a/tests/MockObject/namespaced_class_call_parent_constructor.phpt
+++ b/tests/MockObject/namespaced_class_call_parent_constructor.phpt
@@ -29,6 +29,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -55,7 +56,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class_dont_call_parent_clone.phpt b/tests/MockObject/namespaced_class_dont_call_parent_clone.phpt
index e104e74e1..0dc954b47 100644
--- a/tests/MockObject/namespaced_class_dont_call_parent_clone.phpt
+++ b/tests/MockObject/namespaced_class_dont_call_parent_clone.phpt
@@ -29,6 +29,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -55,7 +56,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class_dont_call_parent_constructor.phpt b/tests/MockObject/namespaced_class_dont_call_parent_constructor.phpt
index c88f766f9..2c72d67bf 100644
--- a/tests/MockObject/namespaced_class_dont_call_parent_constructor.phpt
+++ b/tests/MockObject/namespaced_class_dont_call_parent_constructor.phpt
@@ -29,6 +29,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -55,7 +56,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class_implementing_interface_call_parent_constructor.phpt b/tests/MockObject/namespaced_class_implementing_interface_call_parent_constructor.phpt
index 9343250e1..483919e30 100644
--- a/tests/MockObject/namespaced_class_implementing_interface_call_parent_constructor.phpt
+++ b/tests/MockObject/namespaced_class_implementing_interface_call_parent_constructor.phpt
@@ -34,6 +34,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -60,7 +61,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class_implementing_interface_dont_call_parent_constructor.phpt b/tests/MockObject/namespaced_class_implementing_interface_dont_call_parent_constructor.phpt
index 9343250e1..483919e30 100644
--- a/tests/MockObject/namespaced_class_implementing_interface_dont_call_parent_constructor.phpt
+++ b/tests/MockObject/namespaced_class_implementing_interface_dont_call_parent_constructor.phpt
@@ -34,6 +34,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -60,7 +61,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_class_partial.phpt b/tests/MockObject/namespaced_class_partial.phpt
index 75f385989..74efb76c3 100644
--- a/tests/MockObject/namespaced_class_partial.phpt
+++ b/tests/MockObject/namespaced_class_partial.phpt
@@ -34,6 +34,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -82,7 +83,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/namespaced_interface.phpt b/tests/MockObject/namespaced_interface.phpt
index d41471128..8c332b732 100644
--- a/tests/MockObject/namespaced_interface.phpt
+++ b/tests/MockObject/namespaced_interface.phpt
@@ -28,6 +28,7 @@ class MockFoo implements PHPUnit_Framework_MockObject_MockObject, NS\Foo
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -76,7 +77,7 @@ class MockFoo implements PHPUnit_Framework_MockObject_MockObject, NS\Foo
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/nonexistent_class.phpt b/tests/MockObject/nonexistent_class.phpt
index 348a85402..4e981d2ed 100644
--- a/tests/MockObject/nonexistent_class.phpt
+++ b/tests/MockObject/nonexistent_class.phpt
@@ -25,6 +25,7 @@ class MockFoo extends NonExistentClass implements PHPUnit_Framework_MockObject_M
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -51,7 +52,7 @@ class MockFoo extends NonExistentClass implements PHPUnit_Framework_MockObject_M
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/nonexistent_class_with_namespace.phpt b/tests/MockObject/nonexistent_class_with_namespace.phpt
index 38dd2cdd9..8bbbecf49 100644
--- a/tests/MockObject/nonexistent_class_with_namespace.phpt
+++ b/tests/MockObject/nonexistent_class_with_namespace.phpt
@@ -31,6 +31,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -57,7 +58,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/nonexistent_class_with_namespace_starting_with_separator.phpt b/tests/MockObject/nonexistent_class_with_namespace_starting_with_separator.phpt
index 514796ea7..286883735 100644
--- a/tests/MockObject/nonexistent_class_with_namespace_starting_with_separator.phpt
+++ b/tests/MockObject/nonexistent_class_with_namespace_starting_with_separator.phpt
@@ -31,6 +31,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = [];
 
     public function __clone()
     {
@@ -57,7 +58,7 @@ class MockFoo extends NS\Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/proxy.phpt b/tests/MockObject/proxy.phpt
index 0e83a82a6..65ce5ef9a 100644
--- a/tests/MockObject/proxy.phpt
+++ b/tests/MockObject/proxy.phpt
@@ -28,6 +28,7 @@ class ProxyFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar', 'baz'];
 
     public function __clone()
     {
@@ -98,7 +99,7 @@ class ProxyFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/return_type_declarations_object_method.phpt b/tests/MockObject/return_type_declarations_object_method.phpt
index d1c50e958..82c0c044b 100644
--- a/tests/MockObject/return_type_declarations_object_method.phpt
+++ b/tests/MockObject/return_type_declarations_object_method.phpt
@@ -33,6 +33,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -81,7 +82,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/return_type_declarations_self.phpt b/tests/MockObject/return_type_declarations_self.phpt
index 97382e60b..af9cc1053 100644
--- a/tests/MockObject/return_type_declarations_self.phpt
+++ b/tests/MockObject/return_type_declarations_self.phpt
@@ -30,6 +30,7 @@ class MockFoo implements PHPUnit_Framework_MockObject_MockObject, Foo
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -78,7 +79,7 @@ class MockFoo implements PHPUnit_Framework_MockObject_MockObject, Foo
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/return_type_declarations_static_method.phpt b/tests/MockObject/return_type_declarations_static_method.phpt
index 8bc7cfd2c..cc090faf2 100644
--- a/tests/MockObject/return_type_declarations_static_method.phpt
+++ b/tests/MockObject/return_type_declarations_static_method.phpt
@@ -33,6 +33,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -64,7 +65,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
diff --git a/tests/MockObject/scalar_type_declarations.phpt b/tests/MockObject/scalar_type_declarations.phpt
index fea09499a..46b5305c9 100644
--- a/tests/MockObject/scalar_type_declarations.phpt
+++ b/tests/MockObject/scalar_type_declarations.phpt
@@ -32,6 +32,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
 {
     private $__phpunit_invocationMocker;
     private $__phpunit_originalObject;
+    private $__phpunit_configurable = ['bar'];
 
     public function __clone()
     {
@@ -80,7 +81,7 @@ class MockFoo extends Foo implements PHPUnit_Framework_MockObject_MockObject
     public function __phpunit_getInvocationMocker()
     {
         if ($this->__phpunit_invocationMocker === null) {
-            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker;
+            $this->__phpunit_invocationMocker = new PHPUnit_Framework_MockObject_InvocationMocker($this->__phpunit_configurable);
         }
 
         return $this->__phpunit_invocationMocker;
