diff --git a/PHPUnit/Extensions/SeleniumTestCase.php b/PHPUnit/Extensions/SeleniumTestCase.php
index a21569e24..08d0a0e14 100644
--- a/PHPUnit/Extensions/SeleniumTestCase.php
+++ b/PHPUnit/Extensions/SeleniumTestCase.php
@@ -1064,27 +1064,33 @@ public function runDefaultAssertions($action)
     protected function onNotSuccessfulTest(Exception $e)
     {
         if ($e instanceof PHPUnit_Framework_ExpectationFailedException) {
-            $buffer  = 'Current URL: ' . $this->drivers[0]->getLocation() . "\n";
+            $buffer  = 'Current URL: ' . $this->drivers[0]->getLocation() .
+                       "\n";
             $message = $e->getCustomMessage();
 
             if ($this->captureScreenshotOnFailure &&
-                !empty($this->screenshotPath) && !empty($this->screenshotUrl)) {
+                !empty($this->screenshotPath) &&
+                !empty($this->screenshotUrl)) {
                 $this->drivers[0]->captureEntirePageScreenshot(
-                  $this->screenshotPath . DIRECTORY_SEPARATOR . $this->testId . '.png'
+                  $this->screenshotPath . DIRECTORY_SEPARATOR . $this->testId .
+                  '.png'
                 );
 
-                $buffer .= 'Screenshot: ' . $this->screenshotUrl . '/' . $this->testId . ".png\n";
+                $buffer .= 'Screenshot: ' . $this->screenshotUrl . '/' .
+                           $this->testId . ".png\n";
             }
+        }
 
-            if ($this->autoStop) {
-                try {
-                    $this->stop();
-                }
+        if ($this->autoStop) {
+            try {
+                $this->stop();
+            }
 
-                catch (RuntimeException $e) {
-                }
+            catch (RuntimeException $e) {
             }
+        }
 
+        if ($e instanceof PHPUnit_Framework_ExpectationFailedException) {
             if (!empty($message)) {
                 $buffer .= "\n" . $message;
             }
