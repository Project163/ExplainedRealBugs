diff --git a/.php_cs.dist b/.php_cs.dist
index c393f18e0..28c5eaab7 100644
--- a/.php_cs.dist
+++ b/.php_cs.dist
@@ -18,7 +18,9 @@ $finder = PhpCsFixer\Finder::create()
     ->in(__DIR__ . '/tests/_files')
     ->notName('*.phpt')
     ->notName('ClassWithAllPossibleReturnTypes.php')
-    ->notName('ClassWithUnionReturnTypes.php');
+    ->notName('ClassWithUnionReturnTypes.php')
+    ->notName('ValueObjectWithEqualsMethodWithUnionReturnType.php')
+    ->notName('ValueObjectWithEqualsMethodThatHasUnionParameterType.php');
 
 return PhpCsFixer\Config::create()
     ->setFinder($finder)
diff --git a/.psalm/baseline.xml b/.psalm/baseline.xml
index ee89e0ca7..53a18d8cc 100644
--- a/.psalm/baseline.xml
+++ b/.psalm/baseline.xml
@@ -117,7 +117,7 @@
       <code>$value</code>
       <code>$value</code>
     </MissingParamType>
-    <MissingThrowsDocblock occurrences="36">
+    <MissingThrowsDocblock occurrences="37">
       <code>loadFile</code>
       <code>loadFile</code>
       <code>loadFile</code>
@@ -156,7 +156,8 @@
       <code>$expected</code>
       <code>$expected</code>
     </PossiblyInvalidArgument>
-    <PossiblyUnusedMethod occurrences="1">
+    <PossiblyUnusedMethod occurrences="2">
+      <code>assertObjectEquals</code>
       <code>getCount</code>
     </PossiblyUnusedMethod>
     <RedundantCondition occurrences="1">
@@ -679,6 +680,11 @@
   <file src="src/Framework/Constraint/Object/ClassHasStaticAttribute.php">
     <MissingThrowsDocblock occurrences="1"/>
   </file>
+  <file src="src/Framework/Constraint/Object/ObjectEquals.php">
+    <PropertyNotSetInConstructor occurrences="1">
+      <code>$failureReason</code>
+    </PropertyNotSetInConstructor>
+  </file>
   <file src="src/Framework/Constraint/Operator/BinaryOperator.php">
     <PossiblyUnusedMethod occurrences="1">
       <code>fromConstraints</code>
diff --git a/ChangeLog-9.4.md b/ChangeLog-9.4.md
index 452e5840d..f3bce812e 100644
--- a/ChangeLog-9.4.md
+++ b/ChangeLog-9.4.md
@@ -7,6 +7,7 @@ All notable changes of the PHPUnit 9.4 release series are documented in this fil
 ### Added
 
 * [#4464](https://github.com/sebastianbergmann/phpunit/issues/4464): Filter based on covered (`@covers`) / used (`@uses`) units of code
+* [#4467](https://github.com/sebastianbergmann/phpunit/issues/4467): Convenient custom comparison of objects
 
 ### Changed
 
diff --git a/src/Framework/Assert.php b/src/Framework/Assert.php
index 2e92ad4df..b49553f95 100644
--- a/src/Framework/Assert.php
+++ b/src/Framework/Assert.php
@@ -70,6 +70,7 @@
 use PHPUnit\Framework\Constraint\LogicalNot;
 use PHPUnit\Framework\Constraint\LogicalOr;
 use PHPUnit\Framework\Constraint\LogicalXor;
+use PHPUnit\Framework\Constraint\ObjectEquals;
 use PHPUnit\Framework\Constraint\ObjectHasAttribute;
 use PHPUnit\Framework\Constraint\RegularExpression;
 use PHPUnit\Framework\Constraint\SameSize;
@@ -2715,6 +2716,11 @@ public static function countOf(int $count): Count
         return new Count($count);
     }
 
+    public static function objectEquals(object $object, string $method = 'equals'): ObjectEquals
+    {
+        return new ObjectEquals($object, $method);
+    }
+
     /**
      * Fails a test with the given message.
      *
@@ -2777,6 +2783,18 @@ public static function resetCount(): void
         self::$count = 0;
     }
 
+    /**
+     * @throws ExpectationFailedException
+     */
+    public function assertObjectEquals(object $expected, object $actual, string $method = 'equals', string $message = ''): void
+    {
+        static::assertThat(
+            $actual,
+            static::objectEquals($expected, $method),
+            $message
+        );
+    }
+
     private static function detectLocationHint(string $message): ?array
     {
         $hint  = null;
diff --git a/src/Framework/Constraint/Object/ObjectEquals.php b/src/Framework/Constraint/Object/ObjectEquals.php
new file mode 100644
index 000000000..3a2a0e03f
--- /dev/null
+++ b/src/Framework/Constraint/Object/ObjectEquals.php
@@ -0,0 +1,205 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\Framework\Constraint;
+
+use function get_class;
+use function is_object;
+use ReflectionNamedType;
+use ReflectionObject;
+
+/**
+ * @no-named-arguments Parameter names are not covered by the backward compatibility promise for PHPUnit
+ */
+final class ObjectEquals extends Constraint
+{
+    private const ACTUAL_IS_NOT_AN_OBJECT = 1;
+
+    private const ACTUAL_DOES_NOT_HAVE_METHOD = 2;
+
+    private const METHOD_DOES_NOT_HAVE_BOOL_RETURN_TYPE = 3;
+
+    private const METHOD_DOES_NOT_ACCEPT_EXACTLY_ONE_ARGUMENT = 4;
+
+    private const PARAMETER_DOES_NOT_HAVE_DECLARED_TYPE = 5;
+
+    private const EXPECTED_NOT_COMPATIBLE_WITH_PARAMETER_TYPE = 6;
+
+    private const OBJECTS_ARE_NOT_EQUAL_ACCORDING_TO_METHOD = 7;
+
+    /**
+     * @var object
+     */
+    private $expected;
+
+    /**
+     * @var string
+     */
+    private $method;
+
+    /**
+     * @var int
+     */
+    private $failureReason;
+
+    public function __construct(object $object, string $method = 'equals')
+    {
+        $this->expected = $object;
+        $this->method   = $method;
+    }
+
+    public function toString(): string
+    {
+        return 'two objects are equal';
+    }
+
+    protected function matches($other): bool
+    {
+        if (!is_object($other)) {
+            $this->failureReason = self::ACTUAL_IS_NOT_AN_OBJECT;
+
+            return false;
+        }
+
+        $object = new ReflectionObject($other);
+
+        if (!$object->hasMethod($this->method)) {
+            $this->failureReason = self::ACTUAL_DOES_NOT_HAVE_METHOD;
+
+            return false;
+        }
+
+        /** @noinspection PhpUnhandledExceptionInspection */
+        $method = $object->getMethod($this->method);
+
+        if (!$method->hasReturnType()) {
+            $this->failureReason = self::METHOD_DOES_NOT_HAVE_BOOL_RETURN_TYPE;
+
+            return false;
+        }
+
+        $returnType = $method->getReturnType();
+
+        if (!$returnType instanceof ReflectionNamedType) {
+            $this->failureReason = self::METHOD_DOES_NOT_HAVE_BOOL_RETURN_TYPE;
+
+            return false;
+        }
+
+        if ($returnType->allowsNull()) {
+            $this->failureReason = self::METHOD_DOES_NOT_HAVE_BOOL_RETURN_TYPE;
+
+            return false;
+        }
+
+        if ($returnType->getName() !== 'bool') {
+            $this->failureReason = self::METHOD_DOES_NOT_HAVE_BOOL_RETURN_TYPE;
+
+            return false;
+        }
+
+        if ($method->getNumberOfParameters() !== 1 || $method->getNumberOfRequiredParameters() !== 1) {
+            $this->failureReason = self::METHOD_DOES_NOT_ACCEPT_EXACTLY_ONE_ARGUMENT;
+
+            return false;
+        }
+
+        $parameter = $method->getParameters()[0];
+
+        if (!$parameter->hasType()) {
+            $this->failureReason = self::PARAMETER_DOES_NOT_HAVE_DECLARED_TYPE;
+
+            return false;
+        }
+
+        $type = $parameter->getType();
+
+        if (!$type instanceof ReflectionNamedType) {
+            $this->failureReason = self::PARAMETER_DOES_NOT_HAVE_DECLARED_TYPE;
+
+            return false;
+        }
+
+        $typeName = $type->getName();
+
+        if ($typeName === 'self') {
+            $typeName = get_class($other);
+        }
+
+        if (!$this->expected instanceof $typeName) {
+            $this->failureReason = self::EXPECTED_NOT_COMPATIBLE_WITH_PARAMETER_TYPE;
+
+            return false;
+        }
+
+        if ($other->{$this->method}($this->expected)) {
+            return true;
+        }
+
+        $this->failureReason = self::OBJECTS_ARE_NOT_EQUAL_ACCORDING_TO_METHOD;
+
+        return false;
+    }
+
+    protected function failureDescription($other): string
+    {
+        return $this->toString();
+    }
+
+    protected function additionalFailureDescription($other): string
+    {
+        switch ($this->failureReason) {
+            case self::ACTUAL_IS_NOT_AN_OBJECT:
+                return 'Actual value is not an object.';
+
+            case self::ACTUAL_DOES_NOT_HAVE_METHOD:
+                return sprintf(
+                    '%s::%s() does not exist.',
+                    get_class($other),
+                    $this->method
+                );
+
+            case self::METHOD_DOES_NOT_HAVE_BOOL_RETURN_TYPE:
+                return sprintf(
+                    '%s::%s() does not declare a bool return type.',
+                    get_class($other),
+                    $this->method
+                );
+
+            case self::METHOD_DOES_NOT_ACCEPT_EXACTLY_ONE_ARGUMENT:
+                return sprintf(
+                    '%s::%s() does not accept exactly one argument.',
+                    get_class($other),
+                    $this->method
+                );
+
+            case self::PARAMETER_DOES_NOT_HAVE_DECLARED_TYPE:
+                return sprintf(
+                    'Parameter of %s::%s() does not have a declared type.',
+                    get_class($other),
+                    $this->method
+                );
+
+            case self::EXPECTED_NOT_COMPATIBLE_WITH_PARAMETER_TYPE:
+                return sprintf(
+                    '%s is not accepted an accepted argument type for %s::%s().',
+                    get_class($this->expected),
+                    get_class($other),
+                    $this->method
+                );
+
+            default:
+                return sprintf(
+                    'The objects are not equal according to %s::%s().',
+                    get_class($other),
+                    $this->method
+                );
+        }
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObject.php b/tests/_files/ObjectEquals/ValueObject.php
new file mode 100644
index 000000000..49449eea1
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObject.php
@@ -0,0 +1,30 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObject
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(self $other): bool
+    {
+        return $this->asInt() === $other->asInt();
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatAcceptsTooManyArguments.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatAcceptsTooManyArguments.php
new file mode 100644
index 000000000..dae003c52
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatAcceptsTooManyArguments.php
@@ -0,0 +1,30 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithEqualsMethodThatAcceptsTooManyArguments
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(self $other, self $another): bool
+    {
+        return false;
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatDoesNotAcceptArguments.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatDoesNotAcceptArguments.php
new file mode 100644
index 000000000..c6e78ebd9
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatDoesNotAcceptArguments.php
@@ -0,0 +1,30 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithEqualsMethodThatDoesNotAcceptArguments
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(): bool
+    {
+        return false;
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType.php
new file mode 100644
index 000000000..36ce99b3e
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType.php
@@ -0,0 +1,30 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals($other): bool
+    {
+        return $this->asInt() === $other->asInt();
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatHasIncompatibleParameterType.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatHasIncompatibleParameterType.php
new file mode 100644
index 000000000..60e00f026
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatHasIncompatibleParameterType.php
@@ -0,0 +1,32 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+use stdClass;
+
+final class ValueObjectWithEqualsMethodThatHasIncompatibleParameterType
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(stdClass $other): bool
+    {
+        return false;
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatHasUnionParameterType.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatHasUnionParameterType.php
new file mode 100644
index 000000000..31cb559af
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodThatHasUnionParameterType.php
@@ -0,0 +1,32 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+use stdClass;
+
+final class ValueObjectWithEqualsMethodThatHasUnionParameterType
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(stdClass|self $other): bool
+    {
+        return false;
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithNullableReturnType.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithNullableReturnType.php
new file mode 100644
index 000000000..a93dd17bc
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithNullableReturnType.php
@@ -0,0 +1,30 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithEqualsMethodWithNullableReturnType
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(self $other): ?bool
+    {
+        return null;
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithUnionReturnType.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithUnionReturnType.php
new file mode 100644
index 000000000..e5baff484
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithUnionReturnType.php
@@ -0,0 +1,30 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithEqualsMethodWithUnionReturnType
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(self $other): bool|int
+    {
+        return 0;
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithVoidReturnType.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithVoidReturnType.php
new file mode 100644
index 000000000..ddc11c1fd
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithVoidReturnType.php
@@ -0,0 +1,29 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithEqualsMethodWithVoidReturnType
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(self $other): void
+    {
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithoutReturnType.php b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithoutReturnType.php
new file mode 100644
index 000000000..102c12cc1
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithEqualsMethodWithoutReturnType.php
@@ -0,0 +1,30 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithEqualsMethodWithoutReturnType
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function equals(self $other)
+    {
+        return $this->asInt() === $other->asInt();
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/_files/ObjectEquals/ValueObjectWithoutEqualsMethod.php b/tests/_files/ObjectEquals/ValueObjectWithoutEqualsMethod.php
new file mode 100644
index 000000000..1a8f935b4
--- /dev/null
+++ b/tests/_files/ObjectEquals/ValueObjectWithoutEqualsMethod.php
@@ -0,0 +1,25 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\ObjectEquals;
+
+final class ValueObjectWithoutEqualsMethod
+{
+    private $value;
+
+    public function __construct(int $value)
+    {
+        $this->value = $value;
+    }
+
+    public function asInt(): int
+    {
+        return $this->value;
+    }
+}
diff --git a/tests/unit/Framework/AssertTest.php b/tests/unit/Framework/AssertTest.php
index a25d26798..e62d90ecd 100644
--- a/tests/unit/Framework/AssertTest.php
+++ b/tests/unit/Framework/AssertTest.php
@@ -36,6 +36,7 @@
 use PHPUnit\TestFixture\Book;
 use PHPUnit\TestFixture\ClassWithNonPublicAttributes;
 use PHPUnit\TestFixture\ClassWithToString;
+use PHPUnit\TestFixture\ObjectEquals\ValueObject;
 use PHPUnit\TestFixture\SampleArrayAccess;
 use PHPUnit\TestFixture\SampleClass;
 use PHPUnit\TestFixture\Struct;
@@ -2404,6 +2405,19 @@ public function testIterableNotContainsEqualObjectCanBeAsserted(): void
         $this->fail();
     }
 
+    public function testTwoObjectsCanBeAssertedToBeEqualUsingComparisonMethod(): void
+    {
+        $this->assertObjectEquals(new ValueObject(1), new ValueObject(1));
+
+        try {
+            $this->assertObjectEquals(new ValueObject(1), new ValueObject(2));
+        } catch (AssertionFailedError $e) {
+            return;
+        }
+
+        $this->fail();
+    }
+
     protected function sameValues(): array
     {
         $object   = new SampleClass(4, 8, 15);
diff --git a/tests/unit/Framework/Constraint/ObjectEqualsTest.php b/tests/unit/Framework/Constraint/ObjectEqualsTest.php
new file mode 100644
index 000000000..fad0964dd
--- /dev/null
+++ b/tests/unit/Framework/Constraint/ObjectEqualsTest.php
@@ -0,0 +1,134 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\Framework\Constraint;
+
+use const PHP_EOL;
+use PHPUnit\Framework\ExpectationFailedException;
+use PHPUnit\Framework\TestCase;
+use PHPUnit\TestFixture\ObjectEquals\ValueObject;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatAcceptsTooManyArguments;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatDoesNotAcceptArguments;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatHasIncompatibleParameterType;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatHasUnionParameterType;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithNullableReturnType;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithoutReturnType;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithUnionReturnType;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithVoidReturnType;
+use PHPUnit\TestFixture\ObjectEquals\ValueObjectWithoutEqualsMethod;
+
+/**
+ * @covers \PHPUnit\Framework\Constraint\ObjectEquals
+ *
+ * @small
+ */
+final class ObjectEqualsTest extends TestCase
+{
+    public function testAcceptsActualObjectWhenMethodSaysTheyAreEqual(): void
+    {
+        $this->assertTrue((new ObjectEquals(new ValueObject(1)))->evaluate(new ValueObject(1), '', true));
+    }
+
+    public function testRejectsActualValueThatIsNotAnObject(): void
+    {
+        $this->expectFailure('Actual value is not an object.');
+
+        (new ObjectEquals(new ValueObject(1)))->evaluate(null);
+    }
+
+    public function testRejectsActualObjectThatDoesNotHaveTheSpecifiedMethod(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithoutEqualsMethod::equals() does not exist.');
+
+        (new ObjectEquals(new ValueObjectWithoutEqualsMethod(1)))->evaluate(new ValueObjectWithoutEqualsMethod(1));
+    }
+
+    public function testRejectsActualObjectWhenTheSpecifiedMethodExistsButIsNotDeclaredToReturnBool(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithoutReturnType::equals() does not declare a bool return type.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodWithoutReturnType(1)))->evaluate(new ValueObjectWithEqualsMethodWithoutReturnType(1));
+    }
+
+    /**
+     * @requires PHP 8
+     */
+    public function testRejectsActualObjectWhenTheSpecifiedMethodExistsButIsDeclaredToReturnUnion(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithUnionReturnType::equals() does not declare a bool return type.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodWithUnionReturnType(1)))->evaluate(new ValueObjectWithEqualsMethodWithUnionReturnType(1));
+    }
+
+    public function testRejectsActualObjectWhenTheSpecifiedMethodExistsButIsDeclaredVoid(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithVoidReturnType::equals() does not declare a bool return type.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodWithVoidReturnType(1)))->evaluate(new ValueObjectWithEqualsMethodWithVoidReturnType(1));
+    }
+
+    public function testRejectsActualObjectWhenTheSpecifiedMethodExistsButIsDeclaredNullable(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodWithNullableReturnType::equals() does not declare a bool return type.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodWithNullableReturnType(1)))->evaluate(new ValueObjectWithEqualsMethodWithNullableReturnType(1));
+    }
+
+    public function testRejectsActualObjectWhenTheSpecifiedMethodDoesNotAcceptArguments(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatDoesNotAcceptArguments::equals() does not accept exactly one argument.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodThatDoesNotAcceptArguments(1)))->evaluate(new ValueObjectWithEqualsMethodThatDoesNotAcceptArguments(1));
+    }
+
+    public function testRejectsActualObjectWhenTheSpecifiedMethodAcceptsTooManyArguments(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatAcceptsTooManyArguments::equals() does not accept exactly one argument.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodThatAcceptsTooManyArguments(1)))->evaluate(new ValueObjectWithEqualsMethodThatAcceptsTooManyArguments(1));
+    }
+
+    public function testRejectsActualObjectWhenTheSpecifiedMethodDoesNotDeclareParameterType(): void
+    {
+        $this->expectFailure('Parameter of PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType::equals() does not have a declared type.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType(1)))->evaluate(new ValueObjectWithEqualsMethodThatDoesNotDeclareParameterType(1));
+    }
+
+    /**
+     * @requires PHP 8
+     */
+    public function testRejectsActualObjectWhenTheSpecifiedMethodHasUnionParameterType(): void
+    {
+        $this->expectFailure('Parameter of PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatHasUnionParameterType::equals() does not have a declared type.');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodThatHasUnionParameterType(1)))->evaluate(new ValueObjectWithEqualsMethodThatHasUnionParameterType(1));
+    }
+
+    public function testRejectsActualObjectWhenTheSpecifiedMethodHasIncompatibleParameterType(): void
+    {
+        $this->expectFailure('PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatHasIncompatibleParameterType is not accepted an accepted argument type for PHPUnit\TestFixture\ObjectEquals\ValueObjectWithEqualsMethodThatHasIncompatibleParameterType::equals().');
+
+        (new ObjectEquals(new ValueObjectWithEqualsMethodThatHasIncompatibleParameterType(1)))->evaluate(new ValueObjectWithEqualsMethodThatHasIncompatibleParameterType(1));
+    }
+
+    public function testRejectsActualObjectWhenMethodSaysTheyAreNotEqual(): void
+    {
+        $this->expectFailure('The objects are not equal according to PHPUnit\TestFixture\ObjectEquals\ValueObject::equals().');
+
+        (new ObjectEquals(new ValueObject(1)))->evaluate(new ValueObject(2));
+    }
+
+    private function expectFailure(string $message): void
+    {
+        $this->expectException(ExpectationFailedException::class);
+        $this->expectExceptionMessage('Failed asserting that two objects are equal.' . PHP_EOL . $message);
+    }
+}
