diff --git a/src/Util/Getopt.php b/src/Util/Getopt.php
index 0606406cb..b68a75b80 100644
--- a/src/Util/Getopt.php
+++ b/src/Util/Getopt.php
@@ -188,7 +188,8 @@ protected static function parseLongOption($arg, $long_options, &$opts, &$args)
                 );
             }
 
-            $opts[] = array('--' . $opt, $opt_arg);
+            $full_option = '--' . preg_replace('/={1,2}$/', '', $long_opt);
+            $opts[] = array($full_option, $opt_arg);
 
             return;
         }
diff --git a/tests/Regression/GitHub/1330.phpt b/tests/Regression/GitHub/1330.phpt
new file mode 100644
index 000000000..af02df1c4
--- /dev/null
+++ b/tests/Regression/GitHub/1330.phpt
@@ -0,0 +1,26 @@
+--TEST--
+GH-1330: Allow non-ambiguous shortened longopts
+--FILE--
+<?php
+
+$_SERVER['argv'][1] = '--deb';
+$_SERVER['argv'][2] = '--config';
+$_SERVER['argv'][3] = dirname(__FILE__).'/1330/phpunit1330.xml';
+$_SERVER['argv'][4] = 'Issue1330Test';
+$_SERVER['argv'][5] = dirname(__FILE__).'/1330/Issue1330Test.php';
+
+require __DIR__ . '/../../bootstrap.php';
+PHPUnit_TextUI_Command::main();
+?>
+--EXPECTF--
+PHPUnit %s by Sebastian Bergmann.
+
+Configuration read from %s
+
+
+Starting test 'Issue1330Test::testTrue'.
+.
+
+Time: %s, Memory: %sMb
+
+OK (1 test, 1 assertion)
diff --git a/tests/Regression/GitHub/1330/Issue1330Test.php b/tests/Regression/GitHub/1330/Issue1330Test.php
new file mode 100644
index 000000000..0829cb95b
--- /dev/null
+++ b/tests/Regression/GitHub/1330/Issue1330Test.php
@@ -0,0 +1,8 @@
+<?php
+class Issue1330Test extends PHPUnit_Framework_TestCase
+{
+    public function testTrue()
+    {
+        $this->assertTrue(PHPUNIT_1330);
+    }
+}
diff --git a/tests/Regression/GitHub/1330/phpunit1330.xml b/tests/Regression/GitHub/1330/phpunit1330.xml
new file mode 100644
index 000000000..a61e0cc10
--- /dev/null
+++ b/tests/Regression/GitHub/1330/phpunit1330.xml
@@ -0,0 +1,5 @@
+<phpunit>
+  <php>
+    <const name="PHPUNIT_1330" value="true"/>
+  </php>
+</phpunit>
