diff --git a/src/Util/Log/JUnit.php b/src/Util/Log/JUnit.php
index ef073d0fb..fc9d35548 100644
--- a/src/Util/Log/JUnit.php
+++ b/src/Util/Log/JUnit.php
@@ -126,29 +126,7 @@ public function flush()
      */
     public function addError(PHPUnit_Framework_Test $test, Exception $e, $time)
     {
-        if ($this->currentTestCase === null) {
-            return;
-        }
-
-        if ($test instanceof PHPUnit_Framework_SelfDescribing) {
-            $buffer = $test->toString() . "\n";
-        } else {
-            $buffer = '';
-        }
-
-        $buffer .= PHPUnit_Framework_TestFailure::exceptionToString($e) .
-                   "\n" .
-                   PHPUnit_Util_Filter::getFilteredStacktrace($e);
-
-        $error = $this->document->createElement(
-            'error',
-            PHPUnit_Util_XML::prepareString($buffer)
-        );
-
-        $error->setAttribute('type', get_class($e));
-
-        $this->currentTestCase->appendChild($error);
-
+        $this->doAddFault($test, $e, $time, 'error');
         $this->testSuiteErrors[$this->testSuiteLevel]++;
     }
 
@@ -161,29 +139,7 @@ public function addError(PHPUnit_Framework_Test $test, Exception $e, $time)
      */
     public function addFailure(PHPUnit_Framework_Test $test, PHPUnit_Framework_AssertionFailedError $e, $time)
     {
-        if ($this->currentTestCase === null) {
-            return;
-        }
-
-        if ($test instanceof PHPUnit_Framework_SelfDescribing) {
-            $buffer = $test->toString() . "\n";
-        } else {
-            $buffer = '';
-        }
-
-        $buffer .= PHPUnit_Framework_TestFailure::exceptionToString($e) .
-                   "\n" .
-                   PHPUnit_Util_Filter::getFilteredStacktrace($e);
-
-        $failure = $this->document->createElement(
-            'failure',
-            PHPUnit_Util_XML::prepareString($buffer)
-        );
-
-        $failure->setAttribute('type', get_class($e));
-
-        $this->currentTestCase->appendChild($failure);
-
+        $this->doAddFault($test, $e, $time, 'failure');
         $this->testSuiteFailures[$this->testSuiteLevel]++;
     }
 
@@ -449,4 +405,37 @@ public function setWriteDocument($flag)
             $this->writeDocument = $flag;
         }
     }
+
+    /**
+     * Method which generalizes addError() and addFailure()
+     * 
+     * @param PHPUnit_Framework_Test $test
+     * @param Exception              $e
+     * @param float                  $time
+     * @param string                 $type
+     */
+    private function doAddFault(PHPUnit_Framework_Test $test, Exception $e, $time, $type)
+    {
+        if ($this->currentTestCase === null) {
+            return;
+        }
+		
+        if ($test instanceof PHPUnit_Framework_SelfDescribing) {
+            $buffer = $test->toString() . "\n";
+        } else {
+            $buffer = '';
+        }
+	
+        $buffer .= PHPUnit_Framework_TestFailure::exceptionToString($e) .
+                   "\n" .
+                   PHPUnit_Util_Filter::getFilteredStacktrace($e);
+        
+        $fault = $this->document->createElement(
+            $type,
+            PHPUnit_Util_XML::prepareString($buffer)
+        );
+        
+        $fault->setAttribute('type', get_class($e));		
+        $this->currentTestCase->appendChild($fault);
+    }
 }
