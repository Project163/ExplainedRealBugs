diff --git a/src/Framework/Constraint/StringMatchesFormatDescription.php b/src/Framework/Constraint/StringMatchesFormatDescription.php
index b146c15ab..59a9b89cd 100644
--- a/src/Framework/Constraint/StringMatchesFormatDescription.php
+++ b/src/Framework/Constraint/StringMatchesFormatDescription.php
@@ -66,19 +66,19 @@ protected function additionalFailureDescription($other)
 
     protected function createPatternFromFormat($string)
     {
-        $string = \str_replace(
+        $string = \preg_replace(
             [
-                '%e',
-                '%s',
-                '%S',
-                '%a',
-                '%A',
-                '%w',
-                '%i',
-                '%d',
-                '%x',
-                '%f',
-                '%c'
+                '/(?<!%)%e/',
+                '/(?<!%)%s/',
+                '/(?<!%)%S/',
+                '/(?<!%)%a/',
+                '/(?<!%)%A/',
+                '/(?<!%)%w/',
+                '/(?<!%)%i/',
+                '/(?<!%)%d/',
+                '/(?<!%)%x/',
+                '/(?<!%)%f/',
+                '/(?<!%)%c/'
             ],
             [
                 '\\' . DIRECTORY_SEPARATOR,
@@ -96,6 +96,8 @@ protected function createPatternFromFormat($string)
             \preg_quote($string, '/')
         );
 
+        $string = \str_replace('%%', '%', $string);
+
         return '/^' . $string . '$/s';
     }
 }
diff --git a/tests/Framework/Constraint/StringMatchesFormatDescriptionTest.php b/tests/Framework/Constraint/StringMatchesFormatDescriptionTest.php
index 0e25e0430..31e8f29ba 100644
--- a/tests/Framework/Constraint/StringMatchesFormatDescriptionTest.php
+++ b/tests/Framework/Constraint/StringMatchesFormatDescriptionTest.php
@@ -135,6 +135,11 @@ public function evaluateDataProvider()
                 false,
                 '%c',
                 'abc'
+            ],
+            'Escaped %' => [
+                true,
+                'Escaped %%e %%s %%S %%a %%A %%w %%i %%d %%x %%f %%c',
+                'Escaped %e %s %S %a %A %w %i %d %x %f %c'
             ]
         ];
     }
