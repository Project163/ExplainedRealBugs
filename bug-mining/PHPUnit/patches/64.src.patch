diff --git a/PHPUnit/Util/Filter.php b/PHPUnit/Util/Filter.php
index 5aa39f5db..c8f260b4c 100644
--- a/PHPUnit/Util/Filter.php
+++ b/PHPUnit/Util/Filter.php
@@ -402,9 +402,11 @@ public static function getFilteredStacktrace(Exception $e, $filterTests = TRUE,
 
         $eTrace = $e->getTrace();
 
-        array_unshift(
-          $eTrace, array('file' => $e->getFile(), 'line' => $e->getLine())
-        );
+        if (!self::frameExists($eTrace, $e->getFile(), $e->getLine())) {
+            array_unshift(
+              $eTrace, array('file' => $e->getFile(), 'line' => $e->getLine())
+            );
+        }
 
         foreach ($eTrace as $frame) {
             if (!self::$filter || (isset($frame['file']) && !self::isFiltered($frame['file'], $filterTests, TRUE))) {
@@ -534,6 +536,25 @@ public static function getCoveredFiles()
     {
         return self::$coveredFiles;
     }
+
+    /**
+     * @param  array  $trace
+     * @param  string $file
+     * @param  int    $line
+     * @return boolean
+     * @since  Method available since Release 3.3.2
+     */
+    public static function frameExists(array $trace, $file, $line)
+    {
+        foreach ($trace as $frame) {
+            if (isset($frame['file']) && $frame['file'] == $file &&
+                isset($frame['line']) && $frame['line'] == $line) {
+                return TRUE;
+            }
+        }
+        
+        return FALSE;
+    }
 }
 
 PHPUnit_Util_Filter::addFileToFilter(__FILE__, 'PHPUNIT');
