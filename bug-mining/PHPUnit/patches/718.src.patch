diff --git a/ChangeLog-10.0.md b/ChangeLog-10.0.md
index c82121b93..f557ef115 100644
--- a/ChangeLog-10.0.md
+++ b/ChangeLog-10.0.md
@@ -11,6 +11,7 @@ All notable changes of the PHPUnit 10.0 release series are documented in this fi
 ### Fixed
 
 * [#5165](https://github.com/sebastianbergmann/phpunit/issues/5165): `markTestSkipped()` not handled correctly when called in "before first test" method
+* [#5166](https://github.com/sebastianbergmann/phpunit/issues/5166): Error when generating TestDox output for risky test
 
 ## [10.0.2] - 2023-02-04
 
diff --git a/src/TextUI/Output/TestDox/ResultPrinter.php b/src/TextUI/Output/TestDox/ResultPrinter.php
index 04678e9a4..ba34c0e7f 100644
--- a/src/TextUI/Output/TestDox/ResultPrinter.php
+++ b/src/TextUI/Output/TestDox/ResultPrinter.php
@@ -112,6 +112,10 @@ private function printTestResultBody(TestResult $test): void
             return;
         }
 
+        if (!$test->hasThrowable()) {
+            return;
+        }
+
         $this->printTestResultBodyStart($test);
         $this->printThrowable($test);
         $this->printTestResultBodyEnd($test);
diff --git a/tests/end-to-end/testdox/_files/RiskyTest.php b/tests/end-to-end/testdox/_files/RiskyTest.php
new file mode 100644
index 000000000..c09f70746
--- /dev/null
+++ b/tests/end-to-end/testdox/_files/RiskyTest.php
@@ -0,0 +1,19 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\TestDox;
+
+use PHPUnit\Framework\TestCase;
+
+final class RiskyTest extends TestCase
+{
+    public function test_this_is_a_useless_test_that_does_not_test_anything(): void
+    {
+    }
+}
diff --git a/tests/end-to-end/testdox/risky-test-colorized.phpt b/tests/end-to-end/testdox/risky-test-colorized.phpt
new file mode 100644
index 000000000..435626685
--- /dev/null
+++ b/tests/end-to-end/testdox/risky-test-colorized.phpt
@@ -0,0 +1,26 @@
+--TEST--
+TestDox: Risky; Colorized
+--FILE--
+<?php declare(strict_types=1);
+$_SERVER['argv'][] = '--do-not-cache-result';
+$_SERVER['argv'][] = '--no-configuration';
+$_SERVER['argv'][] = '--no-progress';
+$_SERVER['argv'][] = '--testdox';
+$_SERVER['argv'][] = '--colors=always';
+$_SERVER['argv'][] = __DIR__ . '/_files/RiskyTest.php';
+
+require_once __DIR__ . '/../../bootstrap.php';
+
+(new PHPUnit\TextUI\Application)->run($_SERVER['argv']);
+--EXPECTF--
+PHPUnit %s by Sebastian Bergmann and contributors.
+
+Runtime: %s
+
+Time: %s, Memory: %s
+
+[4mRisky (PHPUnit\TestFixture\TestDox\Risky)[0m
+[33m â˜¢ [0mThis is a useless test that does not test anything
+
+[30;43mOK, but some tests have issues![0m
+[30;43mTests: 1[0m[30;43m, Assertions: 0[0m[30;43m, Risky: 1[0m[30;43m.[0m
diff --git a/tests/end-to-end/testdox/risky-test.phpt b/tests/end-to-end/testdox/risky-test.phpt
new file mode 100644
index 000000000..af5d1116e
--- /dev/null
+++ b/tests/end-to-end/testdox/risky-test.phpt
@@ -0,0 +1,26 @@
+--TEST--
+TestDox: Risky
+--FILE--
+<?php declare(strict_types=1);
+$_SERVER['argv'][] = '--do-not-cache-result';
+$_SERVER['argv'][] = '--no-configuration';
+$_SERVER['argv'][] = '--no-progress';
+$_SERVER['argv'][] = '--testdox';
+$_SERVER['argv'][] = '--colors=never';
+$_SERVER['argv'][] = __DIR__ . '/_files/RiskyTest.php';
+
+require_once __DIR__ . '/../../bootstrap.php';
+
+(new PHPUnit\TextUI\Application)->run($_SERVER['argv']);
+--EXPECTF--
+PHPUnit %s by Sebastian Bergmann and contributors.
+
+Runtime: %s
+
+Time: %s, Memory: %s
+
+Risky (PHPUnit\TestFixture\TestDox\Risky)
+ â˜¢ This is a useless test that does not test anything
+
+OK, but some tests have issues!
+Tests: 1, Assertions: 0, Risky: 1.
