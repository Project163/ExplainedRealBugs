diff --git a/src/Generator.php b/src/Generator.php
index d974460b9..88aa1afc3 100644
--- a/src/Generator.php
+++ b/src/Generator.php
@@ -593,7 +593,9 @@ private function getObject($code, $className, $type = '', $callOriginalConstruct
             $object->__phpunit_setOriginalObject($proxyTarget);
         }
 
-        $object->__phpunit_setReturnValueGeneration($returnValueGeneration);
+        if ($object instanceof MockObject) {
+            $object->__phpunit_setReturnValueGeneration($returnValueGeneration);
+        }
 
         return $object;
     }
diff --git a/tests/MockObjectTest.php b/tests/MockObjectTest.php
index 5017cf66c..92d94a908 100644
--- a/tests/MockObjectTest.php
+++ b/tests/MockObjectTest.php
@@ -1105,4 +1105,11 @@ public function testObjectReturnTypeIsMockedCorrectly()
 
         $this->assertInstanceOf(stdClass::class, $stub->methodWithObjectReturnTypeDeclaration());
     }
+
+    public function testGetObjectForTrait()
+    {
+        $object = $this->getObjectForTrait(ExampleTrait::class);
+
+        $this->assertSame('ohHai', $object->ohHai());
+    }
 }
diff --git a/tests/_fixture/ExampleTrait.php b/tests/_fixture/ExampleTrait.php
new file mode 100644
index 000000000..fb317fbc4
--- /dev/null
+++ b/tests/_fixture/ExampleTrait.php
@@ -0,0 +1,8 @@
+<?php
+trait ExampleTrait
+{
+    public function ohHai()
+    {
+        return __FUNCTION__;
+    }
+}
