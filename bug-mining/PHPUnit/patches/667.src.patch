diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
index abf07d433..f807dbbc8 100644
--- a/.github/workflows/ci.yml
+++ b/.github/workflows/ci.yml
@@ -208,3 +208,52 @@ jobs:
 
       - name: Assert that git tree is clean
         run: git diff || echo "Run 'php build/scripts/generate-global-assert-wrappers.php' to regenerate global assert wrappers!"
+
+  build-and-test-phar:
+    name: Build and test PHAR
+
+    runs-on: ubuntu-latest
+
+    env:
+      PHP_EXTENSIONS: dom, json, libxml, mbstring, pdo_sqlite, soap, xml, xmlwriter
+      PHP_INI_VALUES: assert.exception=1, phar.readonly=0, zend.assertions=1
+
+    strategy:
+      fail-fast: false
+      matrix:
+        php-version:
+          - "7.2"
+          - "7.3"
+          - "7.4"
+          - "8.0"
+          - "8.1"
+
+    steps:
+      - name: Checkout
+        uses: actions/checkout@v2
+
+      - name: Install PHP with extensions
+        uses: shivammathur/setup-php@v2
+        with:
+          php-version: ${{ matrix.php-version }}
+          coverage: none
+          extensions: ${{ env.PHP_EXTENSIONS }}
+          ini-values: ${{ env.PHP_INI_VALUES }}
+          tools: none
+
+      - name: Install java
+        uses: actions/setup-java@v1
+        with:
+          java-version: 1.8
+
+      - name: Build unscoped PHAR for testing
+        run: ant unscoped-phar-nightly
+
+      - name: Run regular tests with unscoped PHAR
+        run: ./build/artifacts/phpunit-nightly.phar
+
+      - name: Build scoped PHAR for testing
+        run: ant phar-nightly
+
+      - name: Run PHAR-specific tests with scoped PHAR
+        run: ./build/artifacts/phpunit-nightly.phar --configuration tests/phar/phpunit.xml
diff --git a/tests/phar/phpunit.xml b/tests/phar/phpunit.xml
new file mode 100644
index 000000000..6c74efc98
--- /dev/null
+++ b/tests/phar/phpunit.xml
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+         xsi:noNamespaceSchemaLocation="../../phpunit.xsd"
+         bootstrap="src/autoload.php"
+         failOnRisky="true"
+         failOnWarning="true">
+    <testsuites>
+        <testsuite name="default">
+            <directory>tests</directory>
+        </testsuite>
+    </testsuites>
+</phpunit>
diff --git a/tests/phar/src/Greeter.php b/tests/phar/src/Greeter.php
new file mode 100644
index 000000000..00dc4a68c
--- /dev/null
+++ b/tests/phar/src/Greeter.php
@@ -0,0 +1,18 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\Phar;
+
+final class Greeter
+{
+    public function greet(): string
+    {
+        return 'Hello world!';
+    }
+}
diff --git a/tests/phar/src/autoload.php b/tests/phar/src/autoload.php
new file mode 100644
index 000000000..eb5eef2f7
--- /dev/null
+++ b/tests/phar/src/autoload.php
@@ -0,0 +1,10 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+require __DIR__ . '/Greeter.php';
diff --git a/tests/phar/tests/GreeterTest.php b/tests/phar/tests/GreeterTest.php
new file mode 100644
index 000000000..4f4d6e4f8
--- /dev/null
+++ b/tests/phar/tests/GreeterTest.php
@@ -0,0 +1,32 @@
+<?php declare(strict_types=1);
+/*
+ * This file is part of PHPUnit.
+ *
+ * (c) Sebastian Bergmann <sebastian@phpunit.de>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+namespace PHPUnit\TestFixture\Phar;
+
+use PHPUnit\Framework\TestCase;
+
+/**
+ * @covers \PHPUnit\TestFixture\Phar\Greeter
+ */
+final class GreeterTest extends TestCase
+{
+    public function testGreets(): void
+    {
+        $this->assertSame('Hello world!', (new Greeter)->greet());
+    }
+
+    /**
+     * @runInSeparateProcess
+     * @ticket https://github.com/sebastianbergmann/phpunit/issues/4412
+     */
+    public function testGreetsInIsolation(): void
+    {
+        $this->assertSame('Hello world!', (new Greeter)->greet());
+    }
+}
diff --git a/tests/phar/tests/Issue4399Test.php b/tests/phar/tests/Issue4399Test.php
new file mode 100644
index 000000000..9cd868cfc
--- /dev/null
+++ b/tests/phar/tests/Issue4399Test.php
@@ -0,0 +1,10 @@
+<?php declare(strict_types=1);
+use PHPUnit\Framework\TestCase;
+
+final class Issue4399Test extends TestCase
+{
+    public function testOne(): void
+    {
+        $this->assertCount(0, []);
+    }
+}
