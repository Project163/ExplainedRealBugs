diff --git a/PHPUnit/Framework/Comparator/Double.php b/PHPUnit/Framework/Comparator/Double.php
index 35effbfd6..37d1b8d5d 100644
--- a/PHPUnit/Framework/Comparator/Double.php
+++ b/PHPUnit/Framework/Comparator/Double.php
@@ -97,11 +97,17 @@ public function assertEquals($expected, $actual, $delta = 0, $canonicalize = FAL
             return;
         }
 
+        if (is_nan($actual) && is_nan($expected)) {
+            return;
+        }
+
         if ($delta == 0) {
             $delta = self::EPSILON;
         }
 
-        if (abs($actual - $expected) >= $delta) {
+        if ((is_infinite($actual) XOR is_infinite($expected)) ||
+            (is_nan($actual) XOR is_nan($expected)) ||
+            abs($actual - $expected) >= $delta) {
             throw new PHPUnit_Framework_ComparisonFailure(
               $expected,
               $actual,
diff --git a/Tests/Framework/AssertTest.php b/Tests/Framework/AssertTest.php
index abfcc9f64..7b01fbbbd 100644
--- a/Tests/Framework/AssertTest.php
+++ b/Tests/Framework/AssertTest.php
@@ -619,6 +619,8 @@ protected function notEqualValues()
             // We want these values to differ
             array(0, 'Foobar'),
             array('Foobar', 0),
+            array(3, acos(8)),
+            array(acos(8), 3)
         );
     }
 
