diff --git a/PHPUnit/Util/XML.php b/PHPUnit/Util/XML.php
index ea5edc2a5..b272153bf 100644
--- a/PHPUnit/Util/XML.php
+++ b/PHPUnit/Util/XML.php
@@ -65,10 +65,10 @@ class PHPUnit_Util_XML
     public static function prepareString($string)
     {
         return preg_replace_callback(
-          '([\\x00-\\x04\\x0b\\x0c\\x0e-\\x1f\\x7f])',
+          '/[\\x00-\\x04\\x0b\\x0c\\x0e-\\x1f\\x7f]/',
           function ($matches)
           {
-              return sprintf('&#x%02x;', ord($matches[1]));
+              return sprintf('&#x%02x;', ord($matches[0]));
           },
           htmlspecialchars(
             PHPUnit_Util_String::convertToUtf8($string), ENT_COMPAT, 'UTF-8'
diff --git a/Tests/Util/XMLTest.php b/Tests/Util/XMLTest.php
index 9ff7b55a2..e9e003960 100644
--- a/Tests/Util/XMLTest.php
+++ b/Tests/Util/XMLTest.php
@@ -320,4 +320,9 @@ public function testConvertAssertRange()
 
         $this->assertEquals($tag, $converted);
     }
+
+    public function testPrepareStringEscapesChars()
+    {
+        $this->assertEquals('&#x1b;', PHPUnit_Util_XML::prepareString("\033"));
+    }
 }
