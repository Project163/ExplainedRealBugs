{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/667","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/667/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/667/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/667/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/667","id":7095190,"node_id":"MDU6SXNzdWU3MDk1MTkw","number":667,"title":"PHP_CodeCoverage 1.2.2 fails if files without tests are whitelisted","user":{"login":"bskendig","id":1202806,"node_id":"MDQ6VXNlcjEyMDI4MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1202806?v=4","gravatar_id":"","url":"https://api.github.com/users/bskendig","html_url":"https://github.com/bskendig","followers_url":"https://api.github.com/users/bskendig/followers","following_url":"https://api.github.com/users/bskendig/following{/other_user}","gists_url":"https://api.github.com/users/bskendig/gists{/gist_id}","starred_url":"https://api.github.com/users/bskendig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bskendig/subscriptions","organizations_url":"https://api.github.com/users/bskendig/orgs","repos_url":"https://api.github.com/users/bskendig/repos","events_url":"https://api.github.com/users/bskendig/events{/privacy}","received_events_url":"https://api.github.com/users/bskendig/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2012-09-24T15:41:01Z","updated_at":"2012-10-07T06:03:58Z","closed_at":"2012-10-07T06:03:58Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have PHPUnit 3.6.12 and PHP_CodeCoverage 1.2.2. My configuration xml file has:\n\n```\n<testsuite name=\"DefaultTestSuite\">\n    <directory>./application/controllers/actions</directory>\n</testsuite>\n<filter>\n  <whitelist>\n    <directory suffix=\".php\">../application/controllers/actions</directory>\n  </whitelist>\n</filter>\n```\n\nso that any source files that aren't touched by tests will show up in the reports.\n\nHowever, after all of the tests run, PHPUnit dies on the first file that was whitelisted without being touched by a test:\n\n```\nFatal error: Cannot redeclare class Default_Controller_Action_Helper_CartMessenger in /src/application/controllers/actions/helpers/CartMessenger.php on line 288\n\nCall Stack:\n    0.0004     322860   1. {main}() /usr/local/zend/bin/phpunit:0\n    0.0070     659632   2. PHPUnit_TextUI_Command::main() /usr/local/zend/bin/phpunit:46\n    0.0070     660032   3. PHPUnit_TextUI_Command->run() /usr/local/zend/share/pear/PHPUnit/TextUI/Command.php:130\n    1.4451   44726616   4. PHPUnit_TextUI_TestRunner->doRun() /usr/local/zend/share/pear/PHPUnit/TextUI/Command.php:192\n   92.7170  100353076   5. PHP_CodeCoverage_Report_Clover->process() /usr/local/zend/share/pear/PHPUnit/TextUI/TestRunner.php:351\n   92.7171  100353796   6. PHP_CodeCoverage->getReport() /usr/local/zend/share/pear/PHP/CodeCoverage/Report/Clover.php:85\n   92.7177  100391508   7. PHP_CodeCoverage_Report_Factory->create() /usr/local/zend/share/pear/PHP/CodeCoverage.php:140\n   92.7177  100391508   8. PHP_CodeCoverage->getData() /usr/local/zend/share/pear/PHP/CodeCoverage/Report/Factory.php:65\n   92.7177  100391508   9. PHP_CodeCoverage->processUncoveredFilesFromWhitelist() /usr/local/zend/share/pear/PHP/CodeCoverage.php:171\n   92.7480  101196116  10. PHP_CodeCoverage->processUncoveredFileFromWhitelist() /usr/local/zend/share/pear/PHP/CodeCoverage.php:495\n```\n\nIf I downgrade PHP_CodeCoverage to 1.1.3, I don't get this error.\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/667/timeline","performed_via_github_app":null,"state_reason":"completed"}