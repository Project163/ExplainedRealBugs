{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/71","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/71/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/71/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/71/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/71","id":418465,"node_id":"MDU6SXNzdWU0MTg0NjU=","number":71,"title":"addTestFile() in PHPUnit_Framework_TestSuite has problems identifying the correct test suite","user":{"login":"wrobel","id":10232,"node_id":"MDQ6VXNlcjEwMjMy","avatar_url":"https://avatars.githubusercontent.com/u/10232?v=4","gravatar_id":"","url":"https://api.github.com/users/wrobel","html_url":"https://github.com/wrobel","followers_url":"https://api.github.com/users/wrobel/followers","following_url":"https://api.github.com/users/wrobel/following{/other_user}","gists_url":"https://api.github.com/users/wrobel/gists{/gist_id}","starred_url":"https://api.github.com/users/wrobel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wrobel/subscriptions","organizations_url":"https://api.github.com/users/wrobel/orgs","repos_url":"https://api.github.com/users/wrobel/repos","events_url":"https://api.github.com/users/wrobel/events{/privacy}","received_events_url":"https://api.github.com/users/wrobel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2010-11-15T05:13:48Z","updated_at":"2012-11-21T15:54:14Z","closed_at":"2011-01-19T07:04:53Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When loading a test suite via the addTestFile() method of PHPUnit_Framework_TestSuite the suite() method may be called on the wrong class. This happens if the test suite derives a class with the same basename (e.g. Horde_Db_AllTests extends Horde_Test_AllTests). PHPUnit will call Horde_Test_AllTests::suite() in that case.\n\n[Horde](http://www.horde.org) collects its tests via one central test suite named AllTests.php. This happens on a per-PEAR-package-level. As Horde has many PEAR modules in its base framework we have many AllTests.php classes (e.g.[AllTests of a module](https://github.com/horde/horde/blob/master/framework/Kolab_Config/test/Horde/Kolab/Config/AllTests.php)). Most of these classes derive from one central [AllTests.php](https://github.com/horde/horde/blob/master/framework/Test/lib/Horde/Test/AllTests.php) to avoid duplicating the test class collection in each of the modules.\n\nWhen loading the derived AllTests.php via a phpunit.xml PHPUnit will call addTestFile() in PHPUnit_FrameworkTestSuite with the path to the test suite being included. When including the test suite file PHPUnit will identify the new classes available after this operation. It then matches the base name of the filename with the class names to identify the test suite class.\n\nIn our case Horde_Test_AllTests is always identified first rather than the child test suite class.\n\nI could try to provide a patch but I admit that I currently don't understand why PHPUnit tries to identify the test suite method in this specific way. \n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/71/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/71/timeline","performed_via_github_app":null,"state_reason":"completed"}