[{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/549992","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-549992","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":549992,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk5Mg==","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2010-11-18T06:29:23Z","updated_at":"2010-11-18T06:29:23Z","body":"I will need a small reproducing test case to investigate this further.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/549992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/551843","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-551843","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":551843,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTg0Mw==","user":{"login":"fentie","id":273815,"node_id":"MDQ6VXNlcjI3MzgxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/273815?v=4","gravatar_id":"","url":"https://api.github.com/users/fentie","html_url":"https://github.com/fentie","followers_url":"https://api.github.com/users/fentie/followers","following_url":"https://api.github.com/users/fentie/following{/other_user}","gists_url":"https://api.github.com/users/fentie/gists{/gist_id}","starred_url":"https://api.github.com/users/fentie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fentie/subscriptions","organizations_url":"https://api.github.com/users/fentie/orgs","repos_url":"https://api.github.com/users/fentie/repos","events_url":"https://api.github.com/users/fentie/events{/privacy}","received_events_url":"https://api.github.com/users/fentie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2010-11-18T21:50:49Z","updated_at":"2010-11-18T21:50:49Z","body":"I've made hours worth of changes since then and worked around the problem, but (I believe) it centered around trying to (erroneously) throw an abstract Exception class. I'm continuing to dig through my change logs and if I can roll back to a non-working state and isolate this I'll let you know. Thanks. \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/551843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fentie","id":273815,"node_id":"MDQ6VXNlcjI3MzgxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/273815?v=4","gravatar_id":"","url":"https://api.github.com/users/fentie","html_url":"https://github.com/fentie","followers_url":"https://api.github.com/users/fentie/followers","following_url":"https://api.github.com/users/fentie/following{/other_user}","gists_url":"https://api.github.com/users/fentie/gists{/gist_id}","starred_url":"https://api.github.com/users/fentie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fentie/subscriptions","organizations_url":"https://api.github.com/users/fentie/orgs","repos_url":"https://api.github.com/users/fentie/repos","events_url":"https://api.github.com/users/fentie/events{/privacy}","received_events_url":"https://api.github.com/users/fentie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/670187","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-670187","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":670187,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDE4Nw==","user":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-01-11T20:56:37Z","updated_at":"2011-01-11T20:56:37Z","body":"here is the recipe:\nphpunitTestExc.php:\n<?php\nclass TestException extends Exception {}\nfunction doThrow() {\n        throw new TestException(\"BLA\");\n} //EOF\nphpunitTest.php:\n<?php\nrequire_once('PEAR/PHPUnit/Autoload.php');\nclass phpunitTestBase extends PHPUnit_Framework_TestCase {\n        protected function setUp() {\n                require_once('phpunitTestExc.php');\n        }\n}\nclass phpunitTest extends phpunitTestBase {\n        public function testSomething() {\n                doThrow();\n        }\n} //EOF\n\ntest with:\nphpunit --process-isolation phpunitTest.php\n\n--> result:\nPHPUnit 3.5.3 by Sebastian Bergmann.\n\nPHP Catchable fatal error:  Argument 2 passed to PHPUnit_Framework_TestResult::addError() must be an instance of Exception, instance of __PHP_Incomplete_Class given, called in /usr/share/php5/PEAR/PHPUnit/Util/PHP.php on line 235 and defined in /usr/share/php5/PEAR/PHPUnit/Framework/TestResult.php on line 237\n\nCatchable fatal error: Argument 2 passed to PHPUnit_Framework_TestResult::addError() must be an instance of Exception, instance of __PHP_Incomplete_Class given, called in /usr/share/php5/PEAR/PHPUnit/Util/PHP.php on line 235 and defined in /usr/share/php5/PEAR/PHPUnit/Framework/TestResult.php on line 237\n\nfeel free to ask if you need more info ;)\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/670187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/679724","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-679724","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":679724,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTcyNA==","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-01-15T10:35:02Z","updated_at":"2011-01-15T10:35:02Z","body":"Should be fixed.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/679724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/715480","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-715480","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":715480,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTQ4MA==","user":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-01-27T17:37:33Z","updated_at":"2011-01-27T17:37:33Z","body":"sorry for making noise here again, in what version should it be fixed? i just checked against PHPUnit 3.5.10 and it still shows that error:\nPHP Catchable fatal error:  Argument 2 passed to PHPUnit_Framework_TestResult::addError() must be an instance of Exception, instance of __PHP_Incomplete_Class given, called in /usr/share/php5/PEAR/PHPUnit/Util/PHP.php on line 235 and defined in /usr/share/php5/PEAR/PHPUnit/Framework/TestResult.php on line 242\n\nregards cobexer\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/715480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/715574","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-715574","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":715574,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTU3NA==","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-01-27T18:12:11Z","updated_at":"2011-01-27T18:12:11Z","body":"It should have been fixed in PHPUnit 3.5.10. Please provide a small yet complete reproducing example so that I can further investigate.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/715574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/720403","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-720403","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":720403,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDQwMw==","user":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-01-29T08:31:06Z","updated_at":"2011-01-29T08:31:06Z","body":"still happens with the example posted above!\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/720403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1070425","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1070425","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1070425,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNzA0MjU=","user":{"login":"necromant2005","id":159874,"node_id":"MDQ6VXNlcjE1OTg3NA==","avatar_url":"https://avatars.githubusercontent.com/u/159874?v=4","gravatar_id":"","url":"https://api.github.com/users/necromant2005","html_url":"https://github.com/necromant2005","followers_url":"https://api.github.com/users/necromant2005/followers","following_url":"https://api.github.com/users/necromant2005/following{/other_user}","gists_url":"https://api.github.com/users/necromant2005/gists{/gist_id}","starred_url":"https://api.github.com/users/necromant2005/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/necromant2005/subscriptions","organizations_url":"https://api.github.com/users/necromant2005/orgs","repos_url":"https://api.github.com/users/necromant2005/repos","events_url":"https://api.github.com/users/necromant2005/events{/privacy}","received_events_url":"https://api.github.com/users/necromant2005/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-04-28T15:36:05Z","updated_at":"2011-04-28T15:36:05Z","body":"Still reproducing phpunit 3.5.13 / centos 5\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1070425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"necromant2005","id":159874,"node_id":"MDQ6VXNlcjE1OTg3NA==","avatar_url":"https://avatars.githubusercontent.com/u/159874?v=4","gravatar_id":"","url":"https://api.github.com/users/necromant2005","html_url":"https://github.com/necromant2005","followers_url":"https://api.github.com/users/necromant2005/followers","following_url":"https://api.github.com/users/necromant2005/following{/other_user}","gists_url":"https://api.github.com/users/necromant2005/gists{/gist_id}","starred_url":"https://api.github.com/users/necromant2005/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/necromant2005/subscriptions","organizations_url":"https://api.github.com/users/necromant2005/orgs","repos_url":"https://api.github.com/users/necromant2005/repos","events_url":"https://api.github.com/users/necromant2005/events{/privacy}","received_events_url":"https://api.github.com/users/necromant2005/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":427635,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyNzYzNQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/427635","actor":{"login":"necromant2005","id":159874,"node_id":"MDQ6VXNlcjE1OTg3NA==","avatar_url":"https://avatars.githubusercontent.com/u/159874?v=4","gravatar_id":"","url":"https://api.github.com/users/necromant2005","html_url":"https://github.com/necromant2005","followers_url":"https://api.github.com/users/necromant2005/followers","following_url":"https://api.github.com/users/necromant2005/following{/other_user}","gists_url":"https://api.github.com/users/necromant2005/gists{/gist_id}","starred_url":"https://api.github.com/users/necromant2005/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/necromant2005/subscriptions","organizations_url":"https://api.github.com/users/necromant2005/orgs","repos_url":"https://api.github.com/users/necromant2005/repos","events_url":"https://api.github.com/users/necromant2005/events{/privacy}","received_events_url":"https://api.github.com/users/necromant2005/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2011-04-28T15:36:05Z","performed_via_github_app":null},{"id":427636,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ0Mjc2MzY=","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/427636","actor":{"login":"necromant2005","id":159874,"node_id":"MDQ6VXNlcjE1OTg3NA==","avatar_url":"https://avatars.githubusercontent.com/u/159874?v=4","gravatar_id":"","url":"https://api.github.com/users/necromant2005","html_url":"https://github.com/necromant2005","followers_url":"https://api.github.com/users/necromant2005/followers","following_url":"https://api.github.com/users/necromant2005/following{/other_user}","gists_url":"https://api.github.com/users/necromant2005/gists{/gist_id}","starred_url":"https://api.github.com/users/necromant2005/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/necromant2005/subscriptions","organizations_url":"https://api.github.com/users/necromant2005/orgs","repos_url":"https://api.github.com/users/necromant2005/repos","events_url":"https://api.github.com/users/necromant2005/events{/privacy}","received_events_url":"https://api.github.com/users/necromant2005/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2011-04-28T15:36:12Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1131150","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1131150","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1131150,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzExNTA=","user":{"login":"serebrov","id":597640,"node_id":"MDQ6VXNlcjU5NzY0MA==","avatar_url":"https://avatars.githubusercontent.com/u/597640?v=4","gravatar_id":"","url":"https://api.github.com/users/serebrov","html_url":"https://github.com/serebrov","followers_url":"https://api.github.com/users/serebrov/followers","following_url":"https://api.github.com/users/serebrov/following{/other_user}","gists_url":"https://api.github.com/users/serebrov/gists{/gist_id}","starred_url":"https://api.github.com/users/serebrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serebrov/subscriptions","organizations_url":"https://api.github.com/users/serebrov/orgs","repos_url":"https://api.github.com/users/serebrov/repos","events_url":"https://api.github.com/users/serebrov/events{/privacy}","received_events_url":"https://api.github.com/users/serebrov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-05-10T14:20:38Z","updated_at":"2011-05-10T14:20:38Z","body":"I also reproduced this: phpunit 3.5.13, ubuntu 10.04.\nNote this issue is only reproduced with \"--process-isolation\" option.\nYou can see a test case here - https://github.com/sebgoo/testPHPUnit/tree/master/incompleteClassException\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1131150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"serebrov","id":597640,"node_id":"MDQ6VXNlcjU5NzY0MA==","avatar_url":"https://avatars.githubusercontent.com/u/597640?v=4","gravatar_id":"","url":"https://api.github.com/users/serebrov","html_url":"https://github.com/serebrov","followers_url":"https://api.github.com/users/serebrov/followers","following_url":"https://api.github.com/users/serebrov/following{/other_user}","gists_url":"https://api.github.com/users/serebrov/gists{/gist_id}","starred_url":"https://api.github.com/users/serebrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serebrov/subscriptions","organizations_url":"https://api.github.com/users/serebrov/orgs","repos_url":"https://api.github.com/users/serebrov/repos","events_url":"https://api.github.com/users/serebrov/events{/privacy}","received_events_url":"https://api.github.com/users/serebrov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":594562,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDU5NDU2Mg==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/594562","actor":{"login":"serebrov","id":597640,"node_id":"MDQ6VXNlcjU5NzY0MA==","avatar_url":"https://avatars.githubusercontent.com/u/597640?v=4","gravatar_id":"","url":"https://api.github.com/users/serebrov","html_url":"https://github.com/serebrov","followers_url":"https://api.github.com/users/serebrov/followers","following_url":"https://api.github.com/users/serebrov/following{/other_user}","gists_url":"https://api.github.com/users/serebrov/gists{/gist_id}","starred_url":"https://api.github.com/users/serebrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serebrov/subscriptions","organizations_url":"https://api.github.com/users/serebrov/orgs","repos_url":"https://api.github.com/users/serebrov/repos","events_url":"https://api.github.com/users/serebrov/events{/privacy}","received_events_url":"https://api.github.com/users/serebrov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2011-05-10T14:20:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1207494","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1207494","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1207494,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDc0OTQ=","user":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-05-20T01:14:52Z","updated_at":"2011-05-20T01:14:52Z","body":"This is actually expected behavior if you understand how process isolation works.  During process isolation you have one main PHPUnit process that is collecting tests and then a separate PHPUnit process for each test that the main process collects.  When one of the separate test processes finishes, it serializes the results and sends them back to the main process.  \n\nThe problem with your code is that the separate test process is including a file which defines a new exception class that the main process knows nothing about.  So when your test throws this new exception, it gets serialized as part of the result object and sent back to the main process.  When the main process tries to unserialize the result object, PHP gives a `__PHP_Incomplete_Class` object for all classes which are not yet defined in the main process (your new exception object).  The unfortunate side effect of this is that `__PHP_Incomplete_Class` fails a type check which causes the error you are reporting.\n\nThe remedy for this is pretty simple: be cognizant of how process isolation works and make sure that you are not hiding classes from the main process.  The simplest way to do this is to move your file include outside of the class definition.  A better way is to use an autoloader.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1207494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":765897,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDc2NTg5Nw==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/765897","actor":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2011-05-20T01:14:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1208241","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1208241","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1208241,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDgyNDE=","user":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-05-20T05:50:52Z","updated_at":"2011-05-20T05:50:52Z","body":"My main concern with this is that a test that fails and unexpectedly throws an unknown exception crashes the PHPUnit main process!\nwhy not fix it this way:\nthe child process knows how to handle that exception. extract all the information the parent process needs in the child process and avoid any such problem.\n\nfixing this in my code is easy, but if it fails it destroys the complete test run. and fixing such a problem in a third party library may not be easy / wanted.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1208241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1208290","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1208290","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1208290,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDgyOTA=","user":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-05-20T06:10:14Z","updated_at":"2011-05-20T06:10:14Z","body":"I think it's definitely possible for PHPUnit to handle this more gracefully (and @sebastianbergmann may have some desire to do so), but ultimately the problem is that you're structuring your test in a way that is not compatible with process isolation.  If you structure your tests properly, you won't ever encounter this and it won't matter how PHPUnit handles it.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1208290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":768253,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NzY4MjUz","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/768253","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2011-05-20T06:10:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1211177","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1211177","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1211177,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTExNzc=","user":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-05-20T17:05:03Z","updated_at":"2011-05-20T17:05:03Z","body":"Hmm i do something and as a result PHPUnit crashes, oh of course i must be\nholding it wrong... do you work for apple? /rant\n\nI still think it's a bug and should be fixed.\nAm 20.05.2011 08:10 schrieb \"whatthejeff\" <\nreply@reply.github.com>:\n\n> I think it's definitely possible for PHPUnit to handle this more\n> gracefully (and @sebastianbergmann may have some desire to do so), but\n> ultimately the problem is that you're structuring your test in a way that is\n> not compatible with process isolation. If you structure your tests properly,\n> you won't ever encounter this and it won't matter how PHPUnit handles it.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/sebastianbergmann/phpunit/issues/74#comment_1208290\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1211177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":776238,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Nzc2MjM4","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/776238","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2011-05-20T17:05:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1211363","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1211363","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1211363,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTEzNjM=","user":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-05-20T17:37:44Z","updated_at":"2011-05-20T17:37:44Z","body":"I've acknowledged that PHPUnit could handle this situation more gracefullyâ€“I was actually planning on looking into this later tonight. I just wanted to help you understand what's going on and how to avoid this situation as it can take a while before patches make it into an official release of PHPUnit and there's no guarantee that Sebastian will accept a patch for this.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1211363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1211915","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1211915","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1211915,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTE5MTU=","user":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-05-20T19:17:36Z","updated_at":"2011-05-20T19:17:36Z","body":"That would be great!\nSince i do use code coverage and have code running directly on inclusion of\nthe class in question. I'm sadly depending on process isolation, it makes\ntests run slower too, but this bug was the most annoying part of it.\nMany thanks!\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1211915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cobexer","id":460721,"node_id":"MDQ6VXNlcjQ2MDcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/460721?v=4","gravatar_id":"","url":"https://api.github.com/users/cobexer","html_url":"https://github.com/cobexer","followers_url":"https://api.github.com/users/cobexer/followers","following_url":"https://api.github.com/users/cobexer/following{/other_user}","gists_url":"https://api.github.com/users/cobexer/gists{/gist_id}","starred_url":"https://api.github.com/users/cobexer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cobexer/subscriptions","organizations_url":"https://api.github.com/users/cobexer/orgs","repos_url":"https://api.github.com/users/cobexer/repos","events_url":"https://api.github.com/users/cobexer/events{/privacy}","received_events_url":"https://api.github.com/users/cobexer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":801573,"node_id":"MDExOkNsb3NlZEV2ZW50ODAxNTcz","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/801573","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"07982e02b09638950f481f1f6dd4a8c1abe56cfe","commit_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits/07982e02b09638950f481f1f6dd4a8c1abe56cfe","created_at":"2011-05-23T06:08:04Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1604880","html_url":"https://github.com/sebastianbergmann/phpunit/issues/74#issuecomment-1604880","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/74","id":1604880,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDQ4ODA=","user":{"login":"laoneo","id":251072,"node_id":"MDQ6VXNlcjI1MTA3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/251072?v=4","gravatar_id":"","url":"https://api.github.com/users/laoneo","html_url":"https://github.com/laoneo","followers_url":"https://api.github.com/users/laoneo/followers","following_url":"https://api.github.com/users/laoneo/following{/other_user}","gists_url":"https://api.github.com/users/laoneo/gists{/gist_id}","starred_url":"https://api.github.com/users/laoneo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laoneo/subscriptions","organizations_url":"https://api.github.com/users/laoneo/orgs","repos_url":"https://api.github.com/users/laoneo/repos","events_url":"https://api.github.com/users/laoneo/events{/privacy}","received_events_url":"https://api.github.com/users/laoneo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-07-19T06:44:23Z","updated_at":"2011-07-19T06:44:23Z","body":"What is the status of this issue? Is it fixed or left as it is? If fixed in which release will it be shipped?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1604880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"laoneo","id":251072,"node_id":"MDQ6VXNlcjI1MTA3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/251072?v=4","gravatar_id":"","url":"https://api.github.com/users/laoneo","html_url":"https://github.com/laoneo","followers_url":"https://api.github.com/users/laoneo/followers","following_url":"https://api.github.com/users/laoneo/following{/other_user}","gists_url":"https://api.github.com/users/laoneo/gists{/gist_id}","starred_url":"https://api.github.com/users/laoneo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laoneo/subscriptions","organizations_url":"https://api.github.com/users/laoneo/orgs","repos_url":"https://api.github.com/users/laoneo/repos","events_url":"https://api.github.com/users/laoneo/events{/privacy}","received_events_url":"https://api.github.com/users/laoneo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1870556,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE4NzA1NTY=","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/1870556","actor":{"login":"laoneo","id":251072,"node_id":"MDQ6VXNlcjI1MTA3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/251072?v=4","gravatar_id":"","url":"https://api.github.com/users/laoneo","html_url":"https://github.com/laoneo","followers_url":"https://api.github.com/users/laoneo/followers","following_url":"https://api.github.com/users/laoneo/following{/other_user}","gists_url":"https://api.github.com/users/laoneo/gists{/gist_id}","starred_url":"https://api.github.com/users/laoneo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laoneo/subscriptions","organizations_url":"https://api.github.com/users/laoneo/orgs","repos_url":"https://api.github.com/users/laoneo/repos","events_url":"https://api.github.com/users/laoneo/events{/privacy}","received_events_url":"https://api.github.com/users/laoneo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2011-07-19T06:44:23Z","performed_via_github_app":null},{"actor":{"login":"sun","id":41992,"node_id":"MDQ6VXNlcjQxOTky","avatar_url":"https://avatars.githubusercontent.com/u/41992?v=4","gravatar_id":"","url":"https://api.github.com/users/sun","html_url":"https://github.com/sun","followers_url":"https://api.github.com/users/sun/followers","following_url":"https://api.github.com/users/sun/following{/other_user}","gists_url":"https://api.github.com/users/sun/gists{/gist_id}","starred_url":"https://api.github.com/users/sun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sun/subscriptions","organizations_url":"https://api.github.com/users/sun/orgs","repos_url":"https://api.github.com/users/sun/repos","events_url":"https://api.github.com/users/sun/events{/privacy}","received_events_url":"https://api.github.com/users/sun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-07-24T23:24:04Z","updated_at":"2014-07-24T23:24:04Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1351","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1351/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1351/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1351/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/1351","id":38676860,"node_id":"MDU6SXNzdWUzODY3Njg2MA==","number":1351,"title":"Process isolation TestResult contains serialized test class upon test failure/exception","user":{"login":"sun","id":41992,"node_id":"MDQ6VXNlcjQxOTky","avatar_url":"https://avatars.githubusercontent.com/u/41992?v=4","gravatar_id":"","url":"https://api.github.com/users/sun","html_url":"https://github.com/sun","followers_url":"https://api.github.com/users/sun/followers","following_url":"https://api.github.com/users/sun/following{/other_user}","gists_url":"https://api.github.com/users/sun/gists{/gist_id}","starred_url":"https://api.github.com/users/sun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sun/subscriptions","organizations_url":"https://api.github.com/users/sun/orgs","repos_url":"https://api.github.com/users/sun/repos","events_url":"https://api.github.com/users/sun/events{/privacy}","received_events_url":"https://api.github.com/users/sun/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones/2","html_url":"https://github.com/sebastianbergmann/phpunit/milestone/2","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones/2/labels","id":741672,"node_id":"MDk6TWlsZXN0b25lNzQxNjcy","number":2,"title":"PHPUnit 4.3","description":"Alpha: June 6, 2014 - August 8, 2014\r\nBeta: August 8, 2014 - October 3, 2014","creator":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":5,"state":"closed","created_at":"2014-08-04T06:51:49Z","updated_at":"2014-10-06T08:54:45Z","due_on":"2014-10-03T07:00:00Z","closed_at":"2014-10-03T12:18:03Z"},"comments":21,"created_at":"2014-07-24T21:40:10Z","updated_at":"2014-10-06T08:53:51Z","closed_at":"2014-07-27T06:26:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":448045,"node_id":"MDEwOlJlcG9zaXRvcnk0NDgwNDU=","name":"phpunit","full_name":"sebastianbergmann/phpunit","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit","description":"The PHP Unit Testing framework.","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/deployments","created_at":"2009-12-24T13:16:23Z","updated_at":"2025-11-09T22:28:27Z","pushed_at":"2025-11-08T12:36:44Z","git_url":"git://github.com/sebastianbergmann/phpunit.git","ssh_url":"git@github.com:sebastianbergmann/phpunit.git","clone_url":"https://github.com/sebastianbergmann/phpunit.git","svn_url":"https://github.com/sebastianbergmann/phpunit","homepage":"https://phpunit.de/","size":204756,"stargazers_count":19957,"watchers_count":19957,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2223,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":105,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["php","phpunit","testing-tools"],"visibility":"public","forks":2223,"open_issues":105,"watchers":19957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"If a test is executed in a separate process and it passes, then the serialized `$result` is a simple instance of `PHPUnit_Framework_TestResult`.\n\nBut if it fails, then the `TestResult::$failures` property contains a [`TestFailure`](https://github.com/sebastianbergmann/phpunit/blob/master/src/Framework/TestFailure.php#L75) object,\n1. whose `$failedTest` property contains the complete instance of the test class,  \n   and\n2. whose `$thrownException` property contains an instance of `ExpectationFailedException`, which in turn contains a full backtrace that includes another instance of the test class.\n\nA full serialization of the `TestCase` is problematic, because the class instance can have properties that cannot be serialized - or - which will be unserialized into the scope of the parent process (e.g., a full service container, including instantiated database connections).\n\nTo see it in action, Inject a `var_dump($result);` right before the serialization in the [process isolation template](https://github.com/sebastianbergmann/phpunit/blob/master/src/Util/PHP/Template/TestCaseMethod.tpl.dist#L43) + execute a test that fails:\n\n```\nclass PHPUnit_Framework_TestResult#3 (26) {\n  protected $passed => array(0) {}\n  protected $errors => array(0) {}\n  protected $deprecatedFeatures => array(0) {}\n  protected $failures => array(1) {\n    [0] => class PHPUnit_Framework_TestFailure#3716 (2) {\n\n      protected $failedTest => class Drupal\\views\\Tests\\Handler\\ArgumentDateTest#4 (44) {\n        protected $preserveGlobalState => bool(false)\n        ...\n\n      protected $thrownException => class PHPUnit_Framework_ExpectationFailedException#2968 (9) {\n        protected $comparisonFailure => NULL\n        protected $message => ...\n        ...\n        private $trace => array(15) {\n          ...\n          [5] => array(6) {\n            'class' => string(35) \"Drupal\\views\\Tests\\ViewUnitTestBase\"\n            'args' => array(5) {\n              [0] => class Drupal\\views\\ViewExecutable#2575 (55) {\n                public $storage => class Drupal\\views\\Entity\\View#3655 (21) {\n                ...\n              ...\n           ...\n```\n\nNow, the part I don't understand:  Why does `TestFailure` hold objects to begin with?\n1. `$failedTest` is only consumed once in `TestFailure::toString()`, to call the corresponding method on `TestCase`.\n2. `$thrownException` is only consumed to generate string representations of the exception's message + backtrace.\n\nBoth operations could be performed ahead of time upon instantiation of `TestFailure`, so that it no longer references any objects and just simply holds a string representation of the test failure.\n\nAlso positive impact on memory:  By removing the object references, they can be destructed sooner.  Currently, they're kept around + add up until test results are printed. - In case of process isolation, all involved objects of the child process are _newly_ instantiated in the parent process, clobbering CPU + memory (for no purpose).\n\nThe response in similar issues has been that this would be required to back up global state with enabled process isolation. â€” However, I can't get behind that idea.  In my mind, process isolation is one-directional, not bi-directional.  Global state is injected into the child process only, not vice-versa.  The whole point of process isolation is that the child process should not affect the parent process, so unserializing any kind of _user_ data/objects into the parent process defeats that purpose (because `unserialize()` is an unholy magic beast).\n#### Proposed solution\n1. #1352 Remove the properties referencing injected objects from `TestFailure`, make it hold a string representation of the failure only.\n\nI'm not familiar with this part of the code yet, but given some initial pointers, I could try to get my hands dirty.\n#### Related issues\n- #282 seemingly reported this problem in the past, but suggested a slightly weird solution.\n- #7 fixed a similar problem for `Warning` already, but the solution does not apply here.\n- #451 is about serialization of Closures in process isolation, which might have the same root cause.\n#### API changes\n\nThe only backwards-incompatible API change is in `TestFailure`:\n\n``` diff\ndiff src/Framework/TestFailure.php\n     /**\n-     * Gets the failed test.\n+     * Returns the name of the failing test (including data set, if any).\n      *\n-     * @return PHPUnit_Framework_Test\n+     * @return string\n      */\n-    public function failedTest()\n+    public function getTestName()\n     {\n-        return $this->failedTest;\n+        return $this->testName;\n     }\n```\n\nHowever, the only call existed in `ResultPrinter`:\n\n``` diff\ndiff src/TextUI/ResultPrinter.php\n     protected function printDefectHeader(PHPUnit_Framework_TestFailure $defect, $count)\n     {\n-        $failedTest = $defect->failedTest();\n-\n-        if ($failedTest instanceof PHPUnit_Framework_SelfDescribing) {\n-            $testName = $failedTest->toString();\n-        } else {\n-            $testName = get_class($failedTest);\n-        }\n...\n         $this->write(\n...\n-            $testName\n+            $defect->getTestName()\n```\n\nIf that's deemed to be an integral part of the API, then I assume this fix will have to wait for the next minor release.  (Hopefully not major :wink:)\n\n---\n\n_Original intro:_\nI'm a [Drupal](https://drupal.org) core developer, and I want to rebase 900+ functional integration tests from its custom testing framework (originally a fork of [Simpletest](http://simpletest.org)) to PHPUnit.  Due to many [fatal errors](https://travis-ci.org/sun/drupal), I don't even get a test result that would allow me to debug similarities in failures, so that's why process isolation is highly useful.\n\nI don't plan to keep it enabled in the end, but a future change to (Drupal) APIs might run into similar mass-failure conditions, in which case process isolation would likely help to pinpoint the root causes again, so that's why I'm looking into these bugs.\n","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1351/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":1616391810,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE2MTYzOTE4MTA=","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/1616391810","actor":{"login":"axiac","id":1086598,"node_id":"MDQ6VXNlcjEwODY1OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1086598?v=4","gravatar_id":"","url":"https://api.github.com/users/axiac","html_url":"https://github.com/axiac","followers_url":"https://api.github.com/users/axiac/followers","following_url":"https://api.github.com/users/axiac/following{/other_user}","gists_url":"https://api.github.com/users/axiac/gists{/gist_id}","starred_url":"https://api.github.com/users/axiac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/axiac/subscriptions","organizations_url":"https://api.github.com/users/axiac/orgs","repos_url":"https://api.github.com/users/axiac/repos","events_url":"https://api.github.com/users/axiac/events{/privacy}","received_events_url":"https://api.github.com/users/axiac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3e93362e040bb81d6e1037c4d57c81caa2b89280","commit_url":"https://api.github.com/repos/axiac/phpunit/commits/3e93362e040bb81d6e1037c4d57c81caa2b89280","created_at":"2018-05-08T22:10:27Z","performed_via_github_app":null}]