{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5621","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5621/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5621/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5621/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5621","id":2048156706,"node_id":"I_kwDOAAbWLc56FGQi","number":5621,"title":"Name of data set is missing from TeamCity output","user":{"login":"i582","id":51853996,"node_id":"MDQ6VXNlcjUxODUzOTk2","avatar_url":"https://avatars.githubusercontent.com/u/51853996?v=4","gravatar_id":"","url":"https://api.github.com/users/i582","html_url":"https://github.com/i582","followers_url":"https://api.github.com/users/i582/followers","following_url":"https://api.github.com/users/i582/following{/other_user}","gists_url":"https://api.github.com/users/i582/gists{/gist_id}","starred_url":"https://api.github.com/users/i582/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i582/subscriptions","organizations_url":"https://api.github.com/users/i582/orgs","repos_url":"https://api.github.com/users/i582/repos","events_url":"https://api.github.com/users/i582/events{/privacy}","received_events_url":"https://api.github.com/users/i582/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":723342126,"node_id":"MDU6TGFiZWw3MjMzNDIxMjY=","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/teamcity","name":"feature/teamcity","color":"e9b96e","default":false,"description":"The TeamCity logger"},{"id":5111411238,"node_id":"LA_kwDOAAbWLc8AAAABMKnyJg","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/10","name":"version/10","color":"888a85","default":false,"description":"Something affects PHPUnit 10"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-19T08:23:55Z","updated_at":"2023-12-20T06:27:43Z","closed_at":"2023-12-20T06:27:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 9.6.15 and 10.4.2\r\n| PHP version         | 8.2.9\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\n\r\nIn PHPUnit 10, when run with the `--teamcity` flag, the `##teamcity[testStarted` output in `locationHint` is missing the `with data set #{num}` part that was present in PHPUnit 9.\r\n\r\n#### Current behavior\r\n\r\n```\r\n##teamcity[testStarted name='testMethod with data set #0' locationHint='php_qn:///Users/Petr.Makhnev/phpunit_teamcity/SimpleDataProviderTest.php::\\SimpleDataProviderTest::testMethod' flowId='36370']\r\n```\r\n\r\nCompared with PHPUnit 9:\r\n\r\n```diff\r\n##teamcity[testStarted name='testMethod with data set #3185 locationHint='php_qn:///Users/Petr.Makhnev/phpunit_teamcity/SimpleDataProviderTest.php::\\SimpleDataProviderTest::testMethod\r\n- with data set #0' \r\nflowId='36509']\r\n```\r\n\r\n#### How to reproduce\r\n\r\n**SimpleDataProviderTest.php**\r\n\r\n```php\r\n<?php\r\n\r\nuse PHPUnit\\Framework\\TestCase;\r\nuse PHPUnit\\Framework\\Attributes\\DataProvider;\r\n\r\nclass SimpleDataProviderTest extends TestCase\r\n{\r\n    #[DataProvider(\"providePlainData\")]\r\n    function testMethod($value, $expected)\r\n    {\r\n        self::assertEquals($expected, $value);\r\n    }\r\n\r\n    public static function providePlainData(): array\r\n    {\r\n        return [\r\n            1 => array(0, 2), 2 => array(0, 3), 3 => array(0, 4),\r\n        ];\r\n    }\r\n}\r\n```\r\n\r\nRun:\r\n\r\n```\r\n./vendor/bin/phpunit . --teamcity\r\n```\r\n\r\n#### Expected behavior\r\n\r\n```diff\r\n##teamcity[testStarted name='testMethod with data set #3185 locationHint='php_qn:///Users/Petr.Makhnev/phpunit_teamcity/SimpleDataProviderTest.php::\\SimpleDataProviderTest::testMethod\r\n+with data set #0' \r\nflowId='36509']\r\n```\r\n\r\n### Impact\r\n\r\nThis issue prevents PhpStorm from navigating to specific failed datasets in PHPUnit 10.\r\n\r\n\r\n\r\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5621/timeline","performed_via_github_app":null,"state_reason":"completed"}