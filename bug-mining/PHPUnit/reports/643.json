{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/4572","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/4572/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/4572/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/4572/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/4572","id":776960820,"node_id":"MDU6SXNzdWU3NzY5NjA4MjA=","number":4572,"title":"Schema validation does not work with %xx sequences in path to phpunit.xsd","user":{"login":"veugenio","id":2116593,"node_id":"MDQ6VXNlcjIxMTY1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/2116593?v=4","gravatar_id":"","url":"https://api.github.com/users/veugenio","html_url":"https://github.com/veugenio","followers_url":"https://api.github.com/users/veugenio/followers","following_url":"https://api.github.com/users/veugenio/following{/other_user}","gists_url":"https://api.github.com/users/veugenio/gists{/gist_id}","starred_url":"https://api.github.com/users/veugenio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/veugenio/subscriptions","organizations_url":"https://api.github.com/users/veugenio/orgs","repos_url":"https://api.github.com/users/veugenio/repos","events_url":"https://api.github.com/users/veugenio/events{/privacy}","received_events_url":"https://api.github.com/users/veugenio/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":1329317012,"node_id":"MDU6TGFiZWwxMzI5MzE3MDEy","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/test-runner","name":"feature/test-runner","color":"e9b96e","default":false,"description":"CLI test runner"}],"state":"closed","locked":false,"assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2020-12-31T13:07:54Z","updated_at":"2021-01-01T11:27:06Z","closed_at":"2021-01-01T11:27:06Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 9.5.0\r\n| PHP version         | 7.4.13\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\nPHPUnit returns \"Warning - The configuration file did not pass validation!\" when running inside a directory containing a %xx sequence as name.\r\n\r\nApparently this is related to this bug https://bugs.php.net/bug.php?id=55374 and if you change this code, it works as expected:\r\nvendor/phpunit/phpunit/src/Util/Xml/Validator.php:26\r\n```\r\n// $document->schemaValidate($xsdFilename);\r\n$document->schemaValidateSource(file_get_contents($xsdFilename));\r\n```\r\n\r\nComposer info:\r\n```\r\ndoctrine/instantiator              1.4.0   A small, lightweight utility to instantiate objects in PHP without...\r\nmyclabs/deep-copy                  1.10.2  Create deep copies (clones) of your objects\r\nnikic/php-parser                   v4.10.4 A PHP parser written in PHP\r\nphar-io/manifest                   2.0.1   Component for reading phar.io manifest information from a PHP Arch...\r\nphar-io/version                    3.0.4   Library for handling version information and constraints\r\nphpdocumentor/reflection-common    2.2.0   Common reflection classes used by phpdocumentor to reflect the cod...\r\nphpdocumentor/reflection-docblock  5.2.2   With this component, a library can provide support for annotations...\r\nphpdocumentor/type-resolver        1.4.0   A PSR-5 based resolver of Class names, Types and Structural Elemen...\r\nphpspec/prophecy                   1.12.2  Highly opinionated mocking framework for PHP 5.3+\r\nphpunit/php-code-coverage          9.2.5   Library that provides collection, processing, and rendering functi...\r\nphpunit/php-file-iterator          3.0.5   FilterIterator implementation that filters files based on a list o...\r\nphpunit/php-invoker                3.1.1   Invoke callables with a timeout\r\nphpunit/php-text-template          2.0.4   Simple template engine.\r\nphpunit/php-timer                  5.0.3   Utility class for timing\r\nphpunit/phpunit                    9.5.0   The PHP Unit Testing framework.\r\nsebastian/cli-parser               1.0.1   Library for parsing CLI options\r\nsebastian/code-unit                1.0.8   Collection of value objects that represent the PHP code units\r\nsebastian/code-unit-reverse-lookup 2.0.3   Looks up which function or method a line of code belongs to\r\nsebastian/comparator               4.0.6   Provides the functionality to compare PHP values for equality\r\nsebastian/complexity               2.0.2   Library for calculating the complexity of PHP code units\r\nsebastian/diff                     4.0.4   Diff implementation\r\nsebastian/environment              5.1.3   Provides functionality to handle HHVM/PHP environments\r\nsebastian/exporter                 4.0.3   Provides the functionality to export PHP variables for visualization\r\nsebastian/global-state             5.0.2   Snapshotting of global state\r\nsebastian/lines-of-code            1.0.3   Library for counting the lines of code in PHP source code\r\nsebastian/object-enumerator        4.0.4   Traverses array structures and object graphs to enumerate all refe...\r\nsebastian/object-reflector         2.0.4   Allows reflection of object attributes, including inherited and no...\r\nsebastian/recursion-context        4.0.4   Provides functionality to recursively process PHP variables\r\nsebastian/resource-operations      3.0.3   Provides a list of PHP built-in functions that operate on resources\r\nsebastian/type                     2.3.1   Collection of value objects that represent the types of the PHP ty...\r\nsebastian/version                  3.0.2   Library that helps with managing the version number of Git-hosted ...\r\nsymfony/polyfill-ctype             v1.20.0 Symfony polyfill for ctype functions\r\ntheseer/tokenizer                  1.2.0   A small library for converting tokenized PHP source code into XML ...\r\nwebmozart/assert                   1.9.1   Assertions to validate method input/output with nice error messages.\r\n```\r\n\r\n#### Current behavior\r\n\r\nWhen running vendor/bin/phpunit we have this:\r\n```\r\nPHP Warning:  DOMDocument::schemaValidate(): Invalid Schema in /var/www/a%25/vendor/phpunit/phpunit/src/Util/Xml/Validator.php on line 26\r\n\r\n  Warning - The configuration file did not pass validation!\r\n  The following problems have been detected:\r\n\r\n  Line 0:\r\n  - failed to load external entity \"/var/www/a%25/vendor/phpunit/phpunit/phpunit.xsd\"\r\n  - Failed to locate the main schema resource at '/var/www/a%25/vendor/phpunit/phpunit/phpunit.xsd'.\r\n\r\n  Test results may not be as expected.\r\n```\r\n\r\n#### How to reproduce\r\n\r\n- Create a directory called _a%25_ (or another name with the same pattern);\r\n- Init a new composer project inside this directory that requires PHPUnit;\r\n- Create a basic phpunit.xml;\r\n- Run vendor/bin/phpunit;\r\n\r\n#### Expected behavior\r\n\r\nRun without warnings:\r\n```\r\nPHPUnit 9.5.0 by Sebastian Bergmann and contributors.\r\n\r\nNo tests executed!\r\n```\r\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/4572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/4572/timeline","performed_via_github_app":null,"state_reason":"completed"}