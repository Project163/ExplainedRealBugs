{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3739","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3739/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3739/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3739/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/3739","id":460664435,"node_id":"MDU6SXNzdWU0NjA2NjQ0MzU=","number":3739,"title":"The at (@) error control operator does not work as expected after latest changes","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"}],"state":"closed","locked":false,"assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2019-06-25T22:00:08Z","updated_at":"2019-06-27T06:08:02Z","closed_at":"2019-06-27T06:08:02Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | PHPUnit 8.3-g3b4ff210c\r\n| PHP version         | PHP 7.3.5 (cli)\r\n| Installation Method | Composer\r\n\r\nDescription: after installation of the latest PHPUnit using dev-master, the [@ control operator](https://www.php.net/manual/en/language.operators.errorcontrol.php) has stopped to work.\r\n\r\ncomposer.json:\r\n```\r\n{\r\n    \"require\": {\r\n        \"phpunit/phpunit\": \"dev-master\"\r\n    },\r\n    \"minimum-stability\": \"dev\"\r\n}\r\n```\r\n\r\nTest case:\r\n```php\r\n<?php declare(strict_types=1);\r\nclass FooTest extends \\PHPUnit\\Framework\\TestCase {\r\n    public function testAtOperator() {\r\n        $this->assertNull((new Bar())->test());\r\n    }\r\n}\r\n\r\nclass Bar {\r\n    public function test() {\r\n        @unlink(__DIR__ . '/fsdf'); // attempt to remove non-existing file\r\n    }\r\n}\r\n```\r\n\r\nThis test is not passed, however due the `@` before the `unlink` it should pass. Example of the broken test:\r\n```sh\r\nvendor/phpunit/phpunit/phpunit MyTest.php\r\nPHPUnit 8.3-g3b4ff210c by Sebastian Bergmann and contributors.\r\n\r\nE                                                                   1 / 1 (100%)\r\n\r\nTime: 45 ms, Memory: 4.00 MB\r\n\r\nThere was 1 error:\r\n\r\n1) FooTest::testAtOperator\r\nunlink(/home/test/tmp/fsdf): No such file or directory\r\n\r\n/home/test/tmp/MyTest.php:10\r\n/home/test/tmp/MyTest.php:4\r\n\r\nERRORS!\r\nTests: 1, Assertions: 0, Errors: 1.\r\n```\r\n\r\n```\r\ncomposer info | sort\r\ndoctrine/instantiator              dev-master fb21dea A small, lightweight utility to instantiate objects in PHP without invoking their constructors\r\nmyclabs/deep-copy                  1.x-dev e6828ef    Create deep copies (clones) of your objects\r\nphar-io/manifest                   dev-master 7761fca Component for reading phar.io manifest information from a PHP Archive (PHAR)\r\nphar-io/version                    2.0.1              Library for handling version information and constraints\r\nphpdocumentor/reflection-common    1.0.1              Common reflection classes used by phpdocumentor to reflect the code structure\r\nphpdocumentor/reflection-docblock  4.3.1              With this component, a library can provide support for annotations via DocBlocks or otherwise retrieve information that is embedded in a DocBlock.\r\nphpdocumentor/type-resolver        0.4.0             \r\nphpspec/prophecy                   dev-master 1927e75 Highly opinionated mocking framework for PHP 5.3+\r\nphpunit/php-code-coverage          dev-master cee18ca Library that provides collection, processing, and rendering functionality for PHP code coverage information.\r\nphpunit/php-file-iterator          dev-master 80ca798 FilterIterator implementation that filters files based on a list of suffixes.\r\nphpunit/php-text-template          1.2.1              Simple template engine.\r\nphpunit/php-timer                  dev-master 29995fb Utility class for timing\r\nphpunit/php-token-stream           dev-master 2d574d6 Wrapper around PHP's tokenizer extension.\r\nphpunit/phpunit                    dev-master 3b4ff21 The PHP Unit Testing framework.\r\nsebastian/code-unit-reverse-lookup dev-master aa16919 Looks up which function or method a line of code belongs to\r\nsebastian/comparator               dev-master 6ddb43a Provides the functionality to compare PHP values for equality\r\nsebastian/diff                     dev-master 1d90f91 Diff implementation\r\nsebastian/environment              dev-master 48c9235 Provides functionality to handle HHVM/PHP environments\r\nsebastian/exporter                 dev-master cf3a70c Provides the functionality to export PHP variables for visualization\r\nsebastian/global-state             dev-master 6ddc744 Snapshotting of global state\r\nsebastian/object-enumerator        dev-master eb45b4b Traverses array structures and object graphs to enumerate all referenced objects\r\nsebastian/object-reflector         dev-master a253986 Allows reflection of object attributes, including inherited and non-public ones\r\nsebastian/recursion-context        dev-master b6a7e76 Provides functionality to recursively process PHP variables\r\nsebastian/resource-operations      dev-master 366bbb1 Provides a list of PHP built-in functions that operate on resources\r\nsebastian/type                     dev-master 531b53a Collection of value objects that represent the types of the PHP type system\r\nsebastian/version                  2.0.1              Library that helps with managing the version number of Git-hosted PHP projects\r\nsymfony/polyfill-ctype             dev-master 82ebae0 Symfony polyfill for ctype functions\r\ntheseer/tokenizer                  1.1.3              A small library for converting tokenized PHP source code into XML and potentially other formats\r\nwebmozart/assert                   1.4.0              Assertions to validate method input/output with nice error messages.\r\n```\r\n\r\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3739/timeline","performed_via_github_app":null,"state_reason":"completed"}