[{"id":10950884627,"node_id":"LE_lADOAAbWLc52vkr7zwAAAAKMuT0T","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/10950884627","actor":{"login":"hbrecht","id":13656589,"node_id":"MDQ6VXNlcjEzNjU2NTg5","avatar_url":"https://avatars.githubusercontent.com/u/13656589?v=4","gravatar_id":"","url":"https://api.github.com/users/hbrecht","html_url":"https://github.com/hbrecht","followers_url":"https://api.github.com/users/hbrecht/followers","following_url":"https://api.github.com/users/hbrecht/following{/other_user}","gists_url":"https://api.github.com/users/hbrecht/gists{/gist_id}","starred_url":"https://api.github.com/users/hbrecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hbrecht/subscriptions","organizations_url":"https://api.github.com/users/hbrecht/orgs","repos_url":"https://api.github.com/users/hbrecht/repos","events_url":"https://api.github.com/users/hbrecht/events{/privacy}","received_events_url":"https://api.github.com/users/hbrecht/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-14T07:55:52Z","label":{"name":"type/bug","color":"cc0000"},"performed_via_github_app":null},{"id":10950884638,"node_id":"LE_lADOAAbWLc52vkr7zwAAAAKMuT0e","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/10950884638","actor":{"login":"hbrecht","id":13656589,"node_id":"MDQ6VXNlcjEzNjU2NTg5","avatar_url":"https://avatars.githubusercontent.com/u/13656589?v=4","gravatar_id":"","url":"https://api.github.com/users/hbrecht","html_url":"https://github.com/hbrecht","followers_url":"https://api.github.com/users/hbrecht/followers","following_url":"https://api.github.com/users/hbrecht/following{/other_user}","gists_url":"https://api.github.com/users/hbrecht/gists{/gist_id}","starred_url":"https://api.github.com/users/hbrecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hbrecht/subscriptions","organizations_url":"https://api.github.com/users/hbrecht/orgs","repos_url":"https://api.github.com/users/hbrecht/repos","events_url":"https://api.github.com/users/hbrecht/events{/privacy}","received_events_url":"https://api.github.com/users/hbrecht/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-14T07:55:52Z","label":{"name":"version/10","color":"888a85"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1809709432","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5561#issuecomment-1809709432","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5561","id":1809709432,"node_id":"IC_kwDOAAbWLc5r3fl4","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T08:02:57Z","updated_at":"2023-11-14T08:02:57Z","body":"This is \"just\" a bug in the JUnit XML logger:\r\n\r\n#### `Issue5561Test.php`\r\n```php\r\n<?php declare(strict_types=1);\r\nuse PHPUnit\\Framework\\TestCase;\r\n\r\nfinal class Issue5561Test extends TestCase\r\n{\r\n    protected function setUp(): void\r\n    {\r\n        $this->assertTrue(false);\r\n    }\r\n\r\n    public function testOne(): void\r\n    {\r\n        $this->assertTrue(true);\r\n    }\r\n}\r\n```\r\n#### Without `--log-junit`\r\n```\r\nPHPUnit 10.4.2-20-gefd8372395 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.2.12\r\n\r\nF                                                                   1 / 1 (100%)\r\n\r\nTime: 00:00.016, Memory: 4.00 MB\r\n\r\nThere was 1 failure:\r\n\r\n1) Issue5561Test::testOne\r\nFailed asserting that false is true.\r\n\r\n/home/sb/Issue5561Test.php:8\r\n\r\nFAILURES!\r\nTests: 1, Assertions: 1, Failures: 1.\r\n```\r\n#### With `--log-junit`\r\n```\r\nPHPUnit 10.4.2-20-gefd8372395 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.2.12\r\n\r\nF                                                                   1 / 1 (100%)\r\n\r\nAn error occurred inside PHPUnit.\r\n\r\nMessage:  assert($this->currentTestCase !== null)\r\nLocation: /usr/local/src/phpunit/src/TextUI/TestRunner.php:68\r\n\r\n#0 /usr/local/src/phpunit/src/TextUI/Application.php(189): PHPUnit\\TextUI\\TestRunner->run()\r\n#1 /usr/local/src/phpunit/phpunit(99): PHPUnit\\TextUI\\Application->run()\r\n#2 {main}\r\n\r\nCaused by: /usr/local/src/phpunit/src/Logging/JUnit/JunitXmlLogger.php:238\r\n\r\n#0 /usr/local/src/phpunit/src/Logging/JUnit/JunitXmlLogger.php(238): assert()\r\n#1 /usr/local/src/phpunit/src/Logging/JUnit/JunitXmlLogger.php(190): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->handleFinish()\r\n#2 /usr/local/src/phpunit/src/Logging/JUnit/Subscriber/TestFinishedSubscriber.php(28): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->testFinished()\r\n#3 /usr/local/src/phpunit/src/Event/Dispatcher/DirectDispatcher.php(100): PHPUnit\\Logging\\JUnit\\TestFinishedSubscriber->notify()\r\n#4 /usr/local/src/phpunit/src/Event/Dispatcher/DeferringDispatcher.php(45): PHPUnit\\Event\\DirectDispatcher->dispatch()\r\n#5 /usr/local/src/phpunit/src/Event/Emitter/DispatchingEmitter.php(952): PHPUnit\\Event\\DeferringDispatcher->dispatch()\r\n#6 /usr/local/src/phpunit/src/Framework/TestRunner.php(238): PHPUnit\\Event\\DispatchingEmitter->testFinished()\r\n#7 /usr/local/src/phpunit/src/Framework/TestCase.php(489): PHPUnit\\Framework\\TestRunner->run()\r\n#8 /usr/local/src/phpunit/src/Framework/TestSuite.php(340): PHPUnit\\Framework\\TestCase->run()\r\n#9 /usr/local/src/phpunit/src/TextUI/TestRunner.php(63): PHPUnit\\Framework\\TestSuite->run()\r\n#10 /usr/local/src/phpunit/src/TextUI/Application.php(189): PHPUnit\\TextUI\\TestRunner->run()\r\n#11 /usr/local/src/phpunit/phpunit(99): PHPUnit\\TextUI\\Application->run()\r\n#12 {main}\r\n```\r\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/1809709432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10950947212,"node_id":"AE_lADOAAbWLc52vkr7zwAAAAKMujGM","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/10950947212","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-11-14T08:03:00Z","assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":10950948441,"node_id":"LE_lADOAAbWLc52vkr7zwAAAAKMujZZ","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/10950948441","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-14T08:03:08Z","label":{"name":"feature/test-runner","color":"e9b96e"},"performed_via_github_app":null},{"id":10950948452,"node_id":"LE_lADOAAbWLc52vkr7zwAAAAKMujZk","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/10950948452","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-14T08:03:08Z","label":{"name":"feature/logging","color":"e9b96e"},"performed_via_github_app":null},{"id":10950953711,"node_id":"RTE_lADOAAbWLc52vkr7zwAAAAKMukrv","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/10950953711","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2023-11-14T08:03:44Z","rename":{"from":"PHPunit internal error when assertion fails in setUp","to":"JUnit XML logger does not handle assertion failures in before-test methods"},"performed_via_github_app":null},{"actor":{"login":"sakarikl","id":439008,"node_id":"MDQ6VXNlcjQzOTAwOA==","avatar_url":"https://avatars.githubusercontent.com/u/439008?v=4","gravatar_id":"","url":"https://api.github.com/users/sakarikl","html_url":"https://github.com/sakarikl","followers_url":"https://api.github.com/users/sakarikl/followers","following_url":"https://api.github.com/users/sakarikl/following{/other_user}","gists_url":"https://api.github.com/users/sakarikl/gists{/gist_id}","starred_url":"https://api.github.com/users/sakarikl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sakarikl/subscriptions","organizations_url":"https://api.github.com/users/sakarikl/orgs","repos_url":"https://api.github.com/users/sakarikl/repos","events_url":"https://api.github.com/users/sakarikl/events{/privacy}","received_events_url":"https://api.github.com/users/sakarikl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T08:17:31Z","updated_at":"2023-11-14T08:17:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5562","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5562/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5562/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5562/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5562","id":1992209229,"node_id":"I_kwDOAAbWLc52vrNN","number":5562,"title":"test case start time is null and JunitXmlLogger throws fatal error","user":{"login":"sakarikl","id":439008,"node_id":"MDQ6VXNlcjQzOTAwOA==","avatar_url":"https://avatars.githubusercontent.com/u/439008?v=4","gravatar_id":"","url":"https://api.github.com/users/sakarikl","html_url":"https://github.com/sakarikl","followers_url":"https://api.github.com/users/sakarikl/followers","following_url":"https://api.github.com/users/sakarikl/following{/other_user}","gists_url":"https://api.github.com/users/sakarikl/gists{/gist_id}","starred_url":"https://api.github.com/users/sakarikl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sakarikl/subscriptions","organizations_url":"https://api.github.com/users/sakarikl/orgs","repos_url":"https://api.github.com/users/sakarikl/repos","events_url":"https://api.github.com/users/sakarikl/events{/privacy}","received_events_url":"https://api.github.com/users/sakarikl/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":5111411238,"node_id":"LA_kwDOAAbWLc8AAAABMKnyJg","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/10","name":"version/10","color":"888a85","default":false,"description":"Something affects PHPUnit 10"},{"id":8052990377,"node_id":"LA_kwDOAAbWLc8AAAAB3_7hqQ","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/logging/junit","name":"feature/logging/junit","color":"e9b96e","default":false,"description":"Issues related to logging test results in JUnit XML format"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-11-14T08:14:52Z","updated_at":"2025-01-25T09:06:25Z","closed_at":"2023-11-14T08:17:30Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":448045,"node_id":"MDEwOlJlcG9zaXRvcnk0NDgwNDU=","name":"phpunit","full_name":"sebastianbergmann/phpunit","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit","description":"The PHP Unit Testing framework.","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/deployments","created_at":"2009-12-24T13:16:23Z","updated_at":"2025-11-09T22:28:27Z","pushed_at":"2025-11-08T12:36:44Z","git_url":"git://github.com/sebastianbergmann/phpunit.git","ssh_url":"git@github.com:sebastianbergmann/phpunit.git","clone_url":"https://github.com/sebastianbergmann/phpunit.git","svn_url":"https://github.com/sebastianbergmann/phpunit","homepage":"https://phpunit.de/","size":204756,"stargazers_count":19957,"watchers_count":19957,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2223,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":105,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["php","phpunit","testing-tools"],"visibility":"public","forks":2223,"open_issues":105,"watchers":19957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 10.4.2\r\n| PHP version         | 8.2.12\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\n\r\nFatal error: Uncaught TypeError: PHPUnit\\Event\\Telemetry\\HRTime::duration() : Argument #1 ($start) must be of type PHPUnit\\Event\\Telemetry\\HRTime, null  given, called in /builds/verkkokauppa/verkkokauppa/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php on line 241 and defined in vendor/phpunit/phpunit/src/Event/Value/Telemetry/HRTime.php:62 \r\n\r\nI can not test this on PHPUnit 9\r\n\r\n#### Current behaviour\r\n\r\nCan not reproduce this locally, but in our CI environment this happens repeatably. Started to happen after adding new test case for existing test file.\r\n\r\n### Environment\r\n\r\nRun with ParaTest v7.3.1\r\n","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5562/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":11044038754,"node_id":"REFE_lADOAAbWLc52vkr7zwAAAAKSRqhi","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/11044038754","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"538b2376b6bba706bbe91f0dfc186cb0932bea98","commit_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits/538b2376b6bba706bbe91f0dfc186cb0932bea98","created_at":"2023-11-23T07:35:07Z","performed_via_github_app":null},{"id":11148899052,"node_id":"CE_lADOAAbWLc52vkr7zwAAAAKYhrLs","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/11148899052","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"61037fcebd1e10b64f8697b594e716b31cd3a55b","commit_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits/61037fcebd1e10b64f8697b594e716b31cd3a55b","created_at":"2023-12-05T07:31:55Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"asbiin","id":25419741,"node_id":"MDQ6VXNlcjI1NDE5NzQx","avatar_url":"https://avatars.githubusercontent.com/u/25419741?v=4","gravatar_id":"","url":"https://api.github.com/users/asbiin","html_url":"https://github.com/asbiin","followers_url":"https://api.github.com/users/asbiin/followers","following_url":"https://api.github.com/users/asbiin/following{/other_user}","gists_url":"https://api.github.com/users/asbiin/gists{/gist_id}","starred_url":"https://api.github.com/users/asbiin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asbiin/subscriptions","organizations_url":"https://api.github.com/users/asbiin/orgs","repos_url":"https://api.github.com/users/asbiin/repos","events_url":"https://api.github.com/users/asbiin/events{/privacy}","received_events_url":"https://api.github.com/users/asbiin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-09T18:06:06Z","updated_at":"2023-12-09T18:06:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5606","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5606/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5606/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5606/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5606","id":2033968547,"node_id":"I_kwDOAAbWLc55O-Wj","number":5606,"title":"JUnit XML logger issue with php8.3","user":{"login":"asbiin","id":25419741,"node_id":"MDQ6VXNlcjI1NDE5NzQx","avatar_url":"https://avatars.githubusercontent.com/u/25419741?v=4","gravatar_id":"","url":"https://api.github.com/users/asbiin","html_url":"https://github.com/asbiin","followers_url":"https://api.github.com/users/asbiin/followers","following_url":"https://api.github.com/users/asbiin/following{/other_user}","gists_url":"https://api.github.com/users/asbiin/gists{/gist_id}","starred_url":"https://api.github.com/users/asbiin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asbiin/subscriptions","organizations_url":"https://api.github.com/users/asbiin/orgs","repos_url":"https://api.github.com/users/asbiin/repos","events_url":"https://api.github.com/users/asbiin/events{/privacy}","received_events_url":"https://api.github.com/users/asbiin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":5111411238,"node_id":"LA_kwDOAAbWLc8AAAABMKnyJg","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/10","name":"version/10","color":"888a85","default":false,"description":"Something affects PHPUnit 10"},{"id":8052990377,"node_id":"LA_kwDOAAbWLc8AAAAB3_7hqQ","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/logging/junit","name":"feature/logging/junit","color":"e9b96e","default":false,"description":"Issues related to logging test results in JUnit XML format"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-12-09T18:06:05Z","updated_at":"2025-01-25T09:06:25Z","closed_at":"2023-12-17T05:50:58Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":448045,"node_id":"MDEwOlJlcG9zaXRvcnk0NDgwNDU=","name":"phpunit","full_name":"sebastianbergmann/phpunit","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit","description":"The PHP Unit Testing framework.","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/deployments","created_at":"2009-12-24T13:16:23Z","updated_at":"2025-11-09T22:28:27Z","pushed_at":"2025-11-08T12:36:44Z","git_url":"git://github.com/sebastianbergmann/phpunit.git","ssh_url":"git@github.com:sebastianbergmann/phpunit.git","clone_url":"https://github.com/sebastianbergmann/phpunit.git","svn_url":"https://github.com/sebastianbergmann/phpunit","homepage":"https://phpunit.de/","size":204756,"stargazers_count":19957,"watchers_count":19957,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2223,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":105,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["php","phpunit","testing-tools"],"visibility":"public","forks":2223,"open_issues":105,"watchers":19957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\n- Please do not report an issue for a version of PHPUnit that is no longer supported. A list of currently supported versions of PHPUnit is available at https://phpunit.de/supported-versions.html.\r\n- Please do not report an issue if you are using a version of PHP that is not supported by the version of PHPUnit you are using. A list that shows which version of PHP is supported by which version of PHPUnit is available at https://phpunit.de/supported-versions.html.\r\n- Please do not report an issue if you are not using PHPUnit directly, but rather a third-party wrapper around it.\r\n- Please do not report an issue if you are using a third-party extension such as alternative output printers.\r\n- Please fill in this template according to your issue.\r\n- Please keep the table shown below at the top of your issue.\r\n- Please include the output of \"composer info | sort\" if you installed PHPUnit using Composer.\r\n- Please post code as text (using proper markup). Do not post screenshots of code.\r\n- Please remove this comment before submitting your issue.\r\n-->\r\n\r\n| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 10.5.2\r\n| PHP version         | 8.3.0\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\n\r\nThis is the same bug as #5561, but it appear to fail on php8.3.\r\n\r\n<!-- Provide a summary describing the problem you are experiencing. -->\r\n\r\n#### Current behavior\r\n\r\nSee https://github.com/monicahq/monica/actions/runs/7152664272/job/19478241958?pr=6892\r\n```\r\nAn error occurred inside PHPUnit.\r\n\r\nMessage:  PHPUnit\\Event\\Telemetry\\HRTime::duration(): Argument #1 ($start) must be of type PHPUnit\\Event\\Telemetry\\HRTime, null given, called in /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php on line 264\r\nLocation: /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Event/Value/Telemetry/HRTime.php:62\r\n\r\n#0 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php(264): PHPUnit\\Event\\Telemetry\\HRTime->duration()\r\n#1 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php(213): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->handleFinish()\r\n#2 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Logging/JUnit/Subscriber/TestFinishedSubscriber.php(28): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->testFinished()\r\n#3 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Event/Dispatcher/DirectDispatcher.php(100): PHPUnit\\Logging\\JUnit\\TestFinishedSubscriber->notify()\r\n#4 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Event/Dispatcher/DeferringDispatcher.php(45): PHPUnit\\Event\\DirectDispatcher->dispatch()\r\n#5 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Event/Emitter/DispatchingEmitter.php(954): PHPUnit\\Event\\DeferringDispatcher->dispatch()\r\n#6 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Util/PHP/AbstractPhpProcess.php(272): PHPUnit\\Event\\DispatchingEmitter->testFinished()\r\n#7 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Util/PHP/AbstractPhpProcess.php(150): PHPUnit\\Util\\PHP\\AbstractPhpProcess->processChildResult()\r\n#8 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Framework/TestRunner.php(347): PHPUnit\\Util\\PHP\\AbstractPhpProcess->runTestJob()\r\n#9 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Framework/TestCase.php(491): PHPUnit\\Framework\\TestRunner->runInSeparateProcess()\r\n#10 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Framework/TestSuite.php(340): PHPUnit\\Framework\\TestCase->run()\r\n#11 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Framework/TestSuite.php(340): PHPUnit\\Framework\\TestSuite->run()\r\n#12 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/Framework/TestSuite.php(340): PHPUnit\\Framework\\TestSuite->run()\r\n#13 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(63): PHPUnit\\Framework\\TestSuite->run()\r\n#14 /home/runner/work/monica/monica/vendor/phpunit/phpunit/src/TextUI/Application.php(189): PHPUnit\\TextUI\\TestRunner->run()\r\n#15 /home/runner/work/monica/monica/vendor/phpunit/phpunit/phpunit(99): PHPUnit\\TextUI\\Application->run()\r\n#16 /home/runner/work/monica/monica/vendor/bin/phpunit(122): include('...')\r\n#17 {main}\r\n```\r\n#### How to reproduce\r\n\r\n<!-- Provide steps to reproduce the issue. -->\r\n\r\n#### Expected behavior\r\n\r\n<!-- What was the expected (correct) behavior? -->\r\n\r\nThere is no issue on php 8.2\r\n","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5606/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":11830243215,"node_id":"REFE_lADOAAbWLc52vkr7zwAAAALBIy-P","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/11830243215","actor":{"login":"clxmstaab","id":47448731,"node_id":"MDQ6VXNlcjQ3NDQ4NzMx","avatar_url":"https://avatars.githubusercontent.com/u/47448731?v=4","gravatar_id":"","url":"https://api.github.com/users/clxmstaab","html_url":"https://github.com/clxmstaab","followers_url":"https://api.github.com/users/clxmstaab/followers","following_url":"https://api.github.com/users/clxmstaab/following{/other_user}","gists_url":"https://api.github.com/users/clxmstaab/gists{/gist_id}","starred_url":"https://api.github.com/users/clxmstaab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clxmstaab/subscriptions","organizations_url":"https://api.github.com/users/clxmstaab/orgs","repos_url":"https://api.github.com/users/clxmstaab/repos","events_url":"https://api.github.com/users/clxmstaab/events{/privacy}","received_events_url":"https://api.github.com/users/clxmstaab/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"61037fcebd1e10b64f8697b594e716b31cd3a55b","commit_url":"https://api.github.com/repos/staabm/phpunit/commits/61037fcebd1e10b64f8697b594e716b31cd3a55b","created_at":"2024-02-16T15:20:39Z","performed_via_github_app":null},{"actor":{"login":"Elkano","id":965706,"node_id":"MDQ6VXNlcjk2NTcwNg==","avatar_url":"https://avatars.githubusercontent.com/u/965706?v=4","gravatar_id":"","url":"https://api.github.com/users/Elkano","html_url":"https://github.com/Elkano","followers_url":"https://api.github.com/users/Elkano/followers","following_url":"https://api.github.com/users/Elkano/following{/other_user}","gists_url":"https://api.github.com/users/Elkano/gists{/gist_id}","starred_url":"https://api.github.com/users/Elkano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Elkano/subscriptions","organizations_url":"https://api.github.com/users/Elkano/orgs","repos_url":"https://api.github.com/users/Elkano/repos","events_url":"https://api.github.com/users/Elkano/events{/privacy}","received_events_url":"https://api.github.com/users/Elkano/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T15:39:56Z","updated_at":"2024-03-27T15:39:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5771","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5771/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5771/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5771/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5771","id":2211137381,"node_id":"I_kwDOAAbWLc6Dy0dl","number":5771,"title":"JUnit XML logger may crash when test that is run in separate process exits unexpectedly","user":{"login":"Elkano","id":965706,"node_id":"MDQ6VXNlcjk2NTcwNg==","avatar_url":"https://avatars.githubusercontent.com/u/965706?v=4","gravatar_id":"","url":"https://api.github.com/users/Elkano","html_url":"https://github.com/Elkano","followers_url":"https://api.github.com/users/Elkano/followers","following_url":"https://api.github.com/users/Elkano/following{/other_user}","gists_url":"https://api.github.com/users/Elkano/gists{/gist_id}","starred_url":"https://api.github.com/users/Elkano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Elkano/subscriptions","organizations_url":"https://api.github.com/users/Elkano/orgs","repos_url":"https://api.github.com/users/Elkano/repos","events_url":"https://api.github.com/users/Elkano/events{/privacy}","received_events_url":"https://api.github.com/users/Elkano/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":1841128667,"node_id":"MDU6TGFiZWwxODQxMTI4NjY3","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/process-isolation","name":"feature/process-isolation","color":"e9b96e","default":false,"description":"Issues related to running tests in separate PHP processes"},{"id":1842308147,"node_id":"MDU6TGFiZWwxODQyMzA4MTQ3","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/logging","name":"feature/logging","color":"e9b96e","default":false,"description":"Issues related to logging test results"},{"id":5111411238,"node_id":"LA_kwDOAAbWLc8AAAABMKnyJg","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/10","name":"version/10","color":"888a85","default":false,"description":"Something affects PHPUnit 10"},{"id":6451629111,"node_id":"LA_kwDOAAbWLc8AAAABgIwMNw","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/11","name":"version/11","color":"888a85","default":false,"description":"Something affects PHPUnit 11"},{"id":8052990377,"node_id":"LA_kwDOAAbWLc8AAAAB3_7hqQ","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/logging/junit","name":"feature/logging/junit","color":"e9b96e","default":false,"description":"Issues related to logging test results in JUnit XML format"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-27T15:39:55Z","updated_at":"2025-01-25T09:06:26Z","closed_at":"2024-04-23T13:29:13Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":448045,"node_id":"MDEwOlJlcG9zaXRvcnk0NDgwNDU=","name":"phpunit","full_name":"sebastianbergmann/phpunit","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit","description":"The PHP Unit Testing framework.","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/deployments","created_at":"2009-12-24T13:16:23Z","updated_at":"2025-11-09T22:28:27Z","pushed_at":"2025-11-08T12:36:44Z","git_url":"git://github.com/sebastianbergmann/phpunit.git","ssh_url":"git@github.com:sebastianbergmann/phpunit.git","clone_url":"https://github.com/sebastianbergmann/phpunit.git","svn_url":"https://github.com/sebastianbergmann/phpunit","homepage":"https://phpunit.de/","size":204756,"stargazers_count":19957,"watchers_count":19957,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2223,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":105,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["php","phpunit","testing-tools"],"visibility":"public","forks":2223,"open_issues":105,"watchers":19957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 10.5.15\r\n| PHP version         | 8.2.7\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\n\r\nWhen a test run in a separate process caused the child process to ended unexpectedly, that is without serialized output, and JUnit logging is used, the main process will *crash* afterwards due to an assert or subsequent type error.\r\n\r\n#### Current behavior\r\n\r\n`JunitXmlLogger` works with the event system.  \r\nWhen it receives a `PreparationStarted` event, it will initialize its internal data for the current test case.  \r\nWhen it receives a `Finished` event, it will assert that the internal data has been initialized.\r\n\r\nWhen the test is run in a separate process, this all happens in that child process, which thus has its own instance of `JunitXmlLogger`.  \r\nShould the child process *end unexpectedly*, `AbstractPhpProcess::processChildResult` will first emit an `Errored` event and then a `Finished` event.  \r\nThese two are processed by the `JunitXmlLogger` instance of the main process that never received a `PreparationStarted` event.\r\n\r\nWhile the handler for the `Errored` event is capable to deal with that by first initializing the internal data structures for the test case, it will also call the inner handler for a finished test which resets these internal data structures.\r\n\r\nThe handler for the `Finished` event does not handle initialization and thus runs into the assert.\r\n\r\n#### How to reproduce\r\n\r\n##### minimal test case\r\n\r\n```php\r\nclass PHPUnitEventBugTest extends \\PHPUnit\\Framework\\TestCase\r\n{\r\n    public function __construct(string $name)\r\n    {\r\n        parent::__construct($name);\r\n\r\n        $this->setRunTestInSeparateProcess(true);\r\n    }\r\n\r\n    #[\\PHPUnit\\Framework\\Attributes\\Test]\r\n    public function forceBug(): void\r\n    {\r\n        // exit is used as a simple means to end the process \"unexpectedly\"\r\n        exit;\r\n    }\r\n}\r\n```\r\n##### output without `--log-junit`\r\n\r\n```\r\nPHPUnit 10.5.15 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.2.7\r\n\r\nE                                                                   1 / 1 (100%)\r\n\r\nTime: 00:02.087, Memory: 10.00 MB\r\n\r\nThere was 1 error:\r\n\r\n1) PHPUnitEventBugTest::forceBug\r\nTest was run in child process and ended unexpectedly\r\n\r\nERRORS!\r\nTests: 1, Assertions: 0, Errors: 1.\r\n```\r\n\r\n##### output with `--log-junit`\r\n\r\n```\r\nPHPUnit 10.5.15 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.2.7\r\n\r\nE                                                                   1 / 1 (100%)\r\n\r\nAn error occurred inside PHPUnit.\r\n\r\nMessage:  assert($this->currentTestCase !== null)\r\nLocation: /app/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php:253\r\n\r\n#0 /app/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php(253): assert(false, '...')\r\n#1 /app/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php(209): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->handleFinish(Object(PHPUnit\\Event\\Telemetry\\Info), 0)\r\n#2 /app/vendor/phpunit/phpunit/src/Logging/JUnit/Subscriber/TestFinishedSubscriber.php(26): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->testFinished(Object(PHPUnit\\Event\\Test\\Finished))\r\n#3 /app/vendor/phpunit/phpunit/src/Event/Dispatcher/DirectDispatcher.php(102): PHPUnit\\Logging\\JUnit\\TestFinishedSubscriber->notify(Object(PHPUnit\\Event\\Test\\Finished))\r\n#4 /app/vendor/phpunit/phpunit/src/Event/Dispatcher/DeferringDispatcher.php(45): PHPUnit\\Event\\DirectDispatcher->dispatch(Object(PHPUnit\\Event\\Test\\Finished))\r\n#5 /app/vendor/phpunit/phpunit/src/Event/Emitter/DispatchingEmitter.php(998): PHPUnit\\Event\\DeferringDispatcher->dispatch(Object(PHPUnit\\Event\\Test\\Finished))\r\n#6 /app/vendor/phpunit/phpunit/src/Util/PHP/AbstractPhpProcess.php(272): PHPUnit\\Event\\DispatchingEmitter->testFinished(Object(PHPUnit\\Event\\Code\\TestMethod), 0)\r\n#7 /app/vendor/phpunit/phpunit/src/Util/PHP/AbstractPhpProcess.php(150): PHPUnit\\Util\\PHP\\AbstractPhpProcess->processChildResult(Object(PHPUnitEventBugTest), '', '')\r\n#8 /app/vendor/phpunit/phpunit/src/Framework/TestRunner.php(351): PHPUnit\\Util\\PHP\\AbstractPhpProcess->runTestJob('...', Object(PHPUnitEventBugTest), '...')\r\n#9 /app/vendor/phpunit/phpunit/src/Framework/TestCase.php(490): PHPUnit\\Framework\\TestRunner->runInSeparateProcess(Object(PHPUnitEventBugTest), false, false)\r\n#10 /app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(341): PHPUnit\\Framework\\TestCase->run()\r\n#11 /app/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(62): PHPUnit\\Framework\\TestSuite->run()\r\n#12 /app/vendor/phpunit/phpunit/src/TextUI/Application.php(198): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\r\n#13 /app/vendor/phpunit/phpunit/phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\r\n#14 /app/vendor/bin/phpunit(122): include('...')\r\n#15 {main}\r\n```\r\n\r\n##### output with `--log-junit` and asserts disabled\r\n\r\n```\r\nPHPUnit 10.5.15 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.2.7\r\n\r\nE                                                                   1 / 1 (100%)\r\n\r\nAn error occurred inside PHPUnit.\r\n\r\nMessage:  PHPUnit\\Event\\Telemetry\\HRTime::duration(): Argument #1 ($start) must be of type PHPUnit\\Event\\Telemetry\\HRTime, null given, called in /app/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php on line 256\r\nLocation: /app/vendor/phpunit/phpunit/src/Event/Value/Telemetry/HRTime.php:59\r\n\r\n#0 /app/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php(256): PHPUnit\\Event\\Telemetry\\HRTime->duration(NULL)\r\n#1 /app/vendor/phpunit/phpunit/src/Logging/JUnit/JunitXmlLogger.php(209): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->handleFinish(Object(PHPUnit\\Event\\Telemetry\\Info), 0)\r\n#2 /app/vendor/phpunit/phpunit/src/Logging/JUnit/Subscriber/TestFinishedSubscriber.php(26): PHPUnit\\Logging\\JUnit\\JunitXmlLogger->testFinished(Object(PHPUnit\\Event\\Test\\Finished))\r\n#3 /app/vendor/phpunit/phpunit/src/Event/Dispatcher/DirectDispatcher.php(102): PHPUnit\\Logging\\JUnit\\TestFinishedSubscriber->notify(Object(PHPUnit\\Event\\Test\\Finished))\r\n#4 /app/vendor/phpunit/phpunit/src/Event/Dispatcher/DeferringDispatcher.php(45): PHPUnit\\Event\\DirectDispatcher->dispatch(Object(PHPUnit\\Event\\Test\\Finished))\r\n#5 /app/vendor/phpunit/phpunit/src/Event/Emitter/DispatchingEmitter.php(998): PHPUnit\\Event\\DeferringDispatcher->dispatch(Object(PHPUnit\\Event\\Test\\Finished))\r\n#6 /app/vendor/phpunit/phpunit/src/Util/PHP/AbstractPhpProcess.php(272): PHPUnit\\Event\\DispatchingEmitter->testFinished(Object(PHPUnit\\Event\\Code\\TestMethod), 0)\r\n#7 /app/vendor/phpunit/phpunit/src/Util/PHP/AbstractPhpProcess.php(150): PHPUnit\\Util\\PHP\\AbstractPhpProcess->processChildResult(Object(PHPUnitEventBugTest), '', '')\r\n#8 /app/vendor/phpunit/phpunit/src/Framework/TestRunner.php(351): PHPUnit\\Util\\PHP\\AbstractPhpProcess->runTestJob('...', Object(PHPUnitEventBugTest), '...')\r\n#9 /app/vendor/phpunit/phpunit/src/Framework/TestCase.php(490): PHPUnit\\Framework\\TestRunner->runInSeparateProcess(Object(PHPUnitEventBugTest), false, false)\r\n#10 /app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(341): PHPUnit\\Framework\\TestCase->run()\r\n#11 /app/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(62): PHPUnit\\Framework\\TestSuite->run()\r\n#12 /app/vendor/phpunit/phpunit/src/TextUI/Application.php(198): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\r\n#13 /app/vendor/phpunit/phpunit/phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\r\n#14 /app/vendor/bin/phpunit(122): include('...')\r\n#15 {main}\r\n```\r\n\r\n#### Expected behavior\r\n\r\nThe assert should not fail and output stay the same even when using JUnit logging.\r\n\r\nThe fix for https://github.com/sebastianbergmann/phpunit/issues/5561 (which had similar symptoms) introduced a `preparationFailed` flag (which is never cleared once set; another potential bug?) which is used to skip the inner handler for the `Finished` event (in `JunitXmlLogger::testFinished`).  \r\nI'm not sure why this flag was introduced instead of just checking the `prepared` flag, however checking the latter in that place seems to solve the issue.","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5771/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5771/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":16066949480,"node_id":"LE_lADOAAbWLc52vkr7zwAAAAO9qjFo","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/16066949480","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-25T09:06:24Z","label":{"name":"feature/logging/junit","color":"e9b96e"},"performed_via_github_app":null}]