{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6097","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6097/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6097/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6097/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/6097","id":2778574886,"node_id":"I_kwDOAAbWLc6lnbAm","number":6097,"title":"The `file` attribute of `<testClass>` node of XML test list can be wrong","user":{"login":"mondrake","id":1174864,"node_id":"MDQ6VXNlcjExNzQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1174864?v=4","gravatar_id":"","url":"https://api.github.com/users/mondrake","html_url":"https://github.com/mondrake","followers_url":"https://api.github.com/users/mondrake/followers","following_url":"https://api.github.com/users/mondrake/following{/other_user}","gists_url":"https://api.github.com/users/mondrake/gists{/gist_id}","starred_url":"https://api.github.com/users/mondrake/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mondrake/subscriptions","organizations_url":"https://api.github.com/users/mondrake/orgs","repos_url":"https://api.github.com/users/mondrake/repos","events_url":"https://api.github.com/users/mondrake/events{/privacy}","received_events_url":"https://api.github.com/users/mondrake/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":1329317012,"node_id":"MDU6TGFiZWwxMzI5MzE3MDEy","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/test-runner","name":"feature/test-runner","color":"e9b96e","default":false,"description":"CLI test runner"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-01-09T19:09:29Z","updated_at":"2025-07-30T06:44:19Z","closed_at":"2025-07-30T06:44:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n- Please do not report a bug for a version of PHPUnit that is no longer in Bugfix Support. A list of currently supported versions of PHPUnit is available at https://phpunit.de/supported-versions.html.\r\n- Please do not report an issue if you are using a version of PHP that is not supported by the version of PHPUnit you are using. A list that shows which version of PHP is supported by which version of PHPUnit is available at https://phpunit.de/supported-versions.html.\r\n- Please do not report an issue if you are not using PHPUnit directly, but rather a third-party wrapper around it.\r\n- Please do not report an issue if you are using a third-party extension such as alternative output printers.\r\n- Please do not report an issue for API changes in internal code (see https://phpunit.de/backward-compatibility.html#internal-code).\r\n- Please fill in this template according to your issue.\r\n- Please keep the table shown below at the top of your issue.\r\n- Please include the output of \"composer info | sort\" if you installed PHPUnit using Composer.\r\n- Please post code as text (using proper markup). Do not post screenshots of code.\r\n- Please make sure that you have configured your PHP interpreter like so: `error_reporting=-1`, `zend.assertions=1`.\r\n- Please remove this comment before submitting your issue.\r\n-->\r\n\r\n| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 10.5.38\r\n| PHP version         | 8.3\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\n\r\n`ListTestsAsXmlCommand` builds the `file` attribute of each `<testClass>` node by getting the file path of the first test case method found in a class, and using the file path returned by calling `$test->valueObjectForEvents()->file()`.\r\n\r\nThis is not accurate as this returns the file path of the file where the method is defined, not the file path of the class. The method could be defined in a parent base class, or in a trait, and then the file returned would not be the one where the TestCase class is contained.\r\n\r\n#### Current behavior\r\n\r\nSee above.\r\n\r\n#### How to reproduce\r\n\r\nMake an abstract base TestCase class with test case methods in it, a separate concrete class with no methods extending the abstract, and run phpunit with the `--list-tests-xml` option. The file attribute of the concrete `<testClass>` will point to the abstract class file and not to the concrete one.\r\n\r\n#### Expected behavior\r\n\r\nThe file path should match the class, as the autoloader will map.\r\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6097/timeline","performed_via_github_app":null,"state_reason":"completed"}