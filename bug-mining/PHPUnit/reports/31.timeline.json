[{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/681076","html_url":"https://github.com/sebastianbergmann/phpunit/issues/98#issuecomment-681076","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/98","id":681076,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTA3Ng==","user":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-01-16T06:17:00Z","updated_at":"2011-01-16T06:17:00Z","body":"This happens because PHPUnit is comparing the [uncommented canonical form](http://www.w3.org/TR/xml-c14n#Example-OutsideDoc) of the XML documents.  It's using the undocumented `DomDocument::C14N()` function to canonicalize the XML before making the comparisons.  Here's an example to illustrate what's going on:\n\n```\nphp > $doc1 = new DOMDocument();\nphp > $doc1->loadXML('<root><!-- A comment that will be ignored --></root>');\nphp > $doc2 = new DOMDocument();\nphp > $doc2->loadXML('<root/>');\nphp > \nphp > var_dump($doc1->C14N());\nstring(13) \"<root></root>\"\nphp > var_dump($doc2->C14N());\nstring(13) \"<root></root>\"\n```\n\nIt's actually possible to use `DomDocument::C14N()` and still include comments.  The second optional parameter is `$with_comments`:\n\n```\nphp > $doc1 = new DOMDocument();\nphp > $doc1->loadXML('<root><!-- A comment that will be ignored --></root>');\nphp > var_dump($doc1->C14N(false, true));\nstring(52) \"<root><!-- A comment that will be ignored --></root>\"\n```\n\nSince the default behavior of `DomDocument::C14N()` is to exclude comments, I think it's probably best that PHPUnit uses the same convention.  If you want to make your comparison with comments, you can do:\n\n```\n$this->assertNotEquals($doc1->C14N(false, true), $doc2->C14N(false, true));\n```\n\nOf couse you also have the capability to define your own custom assertions if you'd like.\n\nI do agree that this is something that could be documented a little better, so I've submitted [a pull request](https://github.com/sebastianbergmann/phpunit-documentation/pull/3) to the documentation repository.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/681076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/681176","html_url":"https://github.com/sebastianbergmann/phpunit/issues/98#issuecomment-681176","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/98","id":681176,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTE3Ng==","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-01-16T08:17:36Z","updated_at":"2011-01-16T08:17:36Z","body":"Closing.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/681176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1616391834,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE2MTYzOTE4MzQ=","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/1616391834","actor":{"login":"axiac","id":1086598,"node_id":"MDQ6VXNlcjEwODY1OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1086598?v=4","gravatar_id":"","url":"https://api.github.com/users/axiac","html_url":"https://github.com/axiac","followers_url":"https://api.github.com/users/axiac/followers","following_url":"https://api.github.com/users/axiac/following{/other_user}","gists_url":"https://api.github.com/users/axiac/gists{/gist_id}","starred_url":"https://api.github.com/users/axiac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/axiac/subscriptions","organizations_url":"https://api.github.com/users/axiac/orgs","repos_url":"https://api.github.com/users/axiac/repos","events_url":"https://api.github.com/users/axiac/events{/privacy}","received_events_url":"https://api.github.com/users/axiac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c95eab4de61600dc4d9cc756426be85b862e732b","commit_url":"https://api.github.com/repos/axiac/phpunit/commits/c95eab4de61600dc4d9cc756426be85b862e732b","created_at":"2018-05-08T22:10:28Z","performed_via_github_app":null}]