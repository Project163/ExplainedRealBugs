{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5178","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5178/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5178/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5178/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5178","id":1574179029,"node_id":"I_kwDOAAbWLc5d1BDV","number":5178,"title":"Test depending on a test with data provider is always skipped","user":{"login":"wol-soft","id":14750468,"node_id":"MDQ6VXNlcjE0NzUwNDY4","avatar_url":"https://avatars.githubusercontent.com/u/14750468?v=4","gravatar_id":"","url":"https://api.github.com/users/wol-soft","html_url":"https://github.com/wol-soft","followers_url":"https://api.github.com/users/wol-soft/followers","following_url":"https://api.github.com/users/wol-soft/following{/other_user}","gists_url":"https://api.github.com/users/wol-soft/gists{/gist_id}","starred_url":"https://api.github.com/users/wol-soft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wol-soft/subscriptions","organizations_url":"https://api.github.com/users/wol-soft/orgs","repos_url":"https://api.github.com/users/wol-soft/repos","events_url":"https://api.github.com/users/wol-soft/events{/privacy}","received_events_url":"https://api.github.com/users/wol-soft/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":1329317012,"node_id":"MDU6TGFiZWwxMzI5MzE3MDEy","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/test-runner","name":"feature/test-runner","color":"e9b96e","default":false,"description":"CLI test runner"},{"id":1841109330,"node_id":"MDU6TGFiZWwxODQxMTA5MzMw","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/data-provider","name":"feature/data-provider","color":"e9b96e","default":false,"description":"Data Providers"},{"id":1841127601,"node_id":"MDU6TGFiZWwxODQxMTI3NjAx","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/test-dependencies","name":"feature/test-dependencies","color":"e9b96e","default":false,"description":"Issues related to explicitly declared dependencies between tests"},{"id":5111411238,"node_id":"LA_kwDOAAbWLc8AAAABMKnyJg","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/10","name":"version/10","color":"888a85","default":false,"description":"Something affects PHPUnit 10"}],"state":"closed","locked":false,"assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2023-02-07T11:44:03Z","updated_at":"2023-02-07T14:16:18Z","closed_at":"2023-02-07T14:16:18Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n- Please do not report an issue for a version of PHPUnit that is no longer supported. A list of currently supported versions of PHPUnit is available at https://phpunit.de/supported-versions.html.\r\n- Please do not report an issue if you are using a version of PHP that is not supported by the version of PHPUnit you are using. A list that shows which version of PHP is supported by which version of PHPUnit is available at https://phpunit.de/supported-versions.html.\r\n- Please do not report an issue if you are not using PHPUnit directly, but rather a wrapper around it such as Symfony's PHPUnit Bridge\r\n- Please fill in this template according to your issue.\r\n- Please keep the table shown below at the top of your issue.\r\n- Please include the output of \"composer info | sort\" if you installed PHPUnit using Composer.\r\n- Please post code as text (using proper markup). Do not post screenshots of code.\r\n- Visit https://phpunit.de/support.html if you are looking for support.\r\n- Please remove this comment before submitting your issue.\r\n-->\r\n\r\n| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 10.0.5\r\n| PHP version         | 8.2.2\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\n\r\nIf a test B depends on a test A which uses a data provider the depending test B is always skipped.\r\n\r\n#### How to reproduce\r\n\r\n```php\r\n<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\nuse PHPUnit\\Framework\\Attributes\\DataProvider;\r\nuse PHPUnit\\Framework\\Attributes\\Depends;\r\nuse PHPUnit\\Framework\\TestCase;\r\n\r\nclass SkipAfterDataProviderTest extends TestCase\r\n{\r\n    public static function fooDataProvider(): array\r\n    {\r\n        return [\r\n            'foo 1' => ['Hello'],\r\n            'foo 2' => ['World'],\r\n        ];\r\n    }\r\n\r\n    #[DataProvider('fooDataProvider')]\r\n    public function testFoo(string $input): void\r\n    {\r\n        $this->assertNotEmpty($input);\r\n    }\r\n\r\n    #[Depends('testFoo')]\r\n    public function testBar(): void\r\n    {\r\n        $this->expectNotToPerformAssertions();\r\n    }\r\n}\r\n```\r\n\r\nThe execution of the test class with the `--display-skipped` flag enabled results in the following output:\r\n\r\n```\r\nPHPUnit 10.0.5 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.2.2\r\n\r\n..S                                                                 3 / 3 (100%)\r\n\r\nTime: 00:00.755, Memory: 6.00 MB\r\n\r\nThere was 1 skipped test:\r\n\r\n1) SkipAfterDataProviderTest::testBar\r\nThis test depends on \"SkipAfterDataProviderTest::testFoo\" to pass\r\n\r\nOK, but some tests were skipped!\r\nTests: 3, Assertions: 2, Skipped: 1.\r\n```\r\n\r\n#### Expected behavior\r\n\r\n`testBar` should only be skipped if any iteration of `testFoo` fails. If all iterations succeed `testBar` should be executed.\r\n\r\n#### composer info | sort\r\n\r\n```\r\ndoctrine/deprecations                               v1.0.0             A small layer on top of trigger_error(E_USER_DEPRECATED) or PSR-3 logging with options to disable all deprecations or selectively for packages.\r\ndoctrine/lexer                                      2.1.0              PHP Doctrine Lexer parser library that can be used in Top-Down, Recursive Descent Parsers.\r\ndragonmantank/cron-expression                       v3.3.2             CRON for PHP: Calculate the next or previous run date and determine if a CRON expression is due\r\negulias/email-validator                             3.2.5              A library for validating emails against several RFCs\r\nelastic/transport                                   v8.6.0             HTTP transport PHP library for Elastic products\r\nelasticsearch/elasticsearch                         v8.6.1             PHP Client for Elasticsearch\r\nguzzlehttp/guzzle                                   7.5.0              Guzzle is a PHP HTTP client library\r\nguzzlehttp/promises                                 1.5.2              Guzzle promises library\r\nguzzlehttp/psr7                                     2.4.3              PSR-7 message implementation that also provides common utility methods\r\nhellogerard/jobby                                   v3.5.0             Manage all your cron jobs without modifying crontab. Handles locking, logging, error emails, and more.\r\nmyclabs/deep-copy                                   1.11.0             Create deep copies (clones) of your objects\r\nnikic/phlexy                                        v0.2               Lexing experiments in PHP\r\nnikic/php-parser                                    v4.15.3            A PHP parser written in PHP\r\nopis/closure                                        3.6.3              A library that can be used to serialize closures (anonymous functions) and arbitrary objects.\r\nphar-io/manifest                                    2.0.3              Component for reading phar.io manifest information from a PHP Archive (PHAR)\r\nphar-io/version                                     3.2.1              Library for handling version information and constraints\r\nphp-http/discovery                                  1.14.3             Finds installed HTTPlug implementations and PSR-7 message factories\r\nphp-http/httplug                                    2.3.0              HTTPlug, the HTTP client abstraction for PHP\r\nphp-http/promise                                    1.1.0              Promise used for asynchronous HTTP requests\r\nphpstan/phpstan                                     1.9.15             PHPStan - PHP Static Analysis Tool\r\nphpunit/php-code-coverage                           10.0.0             Library that provides collection, processing, and rendering functionality for PHP code coverage information.\r\nphpunit/php-file-iterator                           4.0.0              FilterIterator implementation that filters files based on a list of suffixes.\r\nphpunit/php-invoker                                 4.0.0              Invoke callables with a timeout\r\nphpunit/php-text-template                           3.0.0              Simple template engine.\r\nphpunit/php-timer                                   6.0.0              Utility class for timing\r\nphpunit/phpunit                                     10.0.5             The PHP Unit Testing framework.\r\npsr/http-client                                     1.0.1              Common interface for HTTP clients\r\npsr/http-factory                                    1.0.1              Common interfaces for PSR-7 HTTP message factories\r\npsr/http-message                                    1.0.1              Common interface for HTTP messages\r\npsr/log                                             3.0.0              Common interface for logging libraries\r\nralouphie/getallheaders                             3.0.3              A polyfill for getallheaders.\r\nrector/rector                                       0.15.13            Instant Upgrade and Automated Refactoring of any PHP code\r\nsebastian/cli-parser                                2.0.0              Library for parsing CLI options\r\nsebastian/code-unit                                 2.0.0              Collection of value objects that represent the PHP code units\r\nsebastian/code-unit-reverse-lookup                  3.0.0              Looks up which function or method a line of code belongs to\r\nsebastian/comparator                                5.0.0              Provides the functionality to compare PHP values for equality\r\nsebastian/complexity                                3.0.0              Library for calculating the complexity of PHP code units\r\nsebastian/diff                                      5.0.0              Diff implementation\r\nsebastian/environment                               6.0.0              Provides functionality to handle HHVM/PHP environments\r\nsebastian/exporter                                  5.0.0              Provides the functionality to export PHP variables for visualization\r\nsebastian/global-state                              6.0.0              Snapshotting of global state\r\nsebastian/lines-of-code                             2.0.0              Library for counting the lines of code in PHP source code\r\nsebastian/object-enumerator                         5.0.0              Traverses array structures and object graphs to enumerate all referenced objects\r\nsebastian/object-reflector                          3.0.0              Allows reflection of object attributes, including inherited and non-public ones\r\nsebastian/recursion-context                         5.0.0              Provides functionality to recursively process PHP variables\r\nsebastian/type                                      4.0.0              Collection of value objects that represent the types of the PHP type system\r\nsebastian/version                                   4.0.0              Library that helps with managing the version number of Git-hosted PHP projects\r\nswiftmailer/swiftmailer                             v6.3.0             Swiftmailer, free feature-rich PHP mailer\r\nsymfony/deprecation-contracts                       v3.2.0             A generic function and convention to trigger deprecation notices\r\nsymfony/polyfill-ctype                              v1.27.0            Symfony polyfill for ctype functions\r\nsymfony/polyfill-iconv                              v1.27.0            Symfony polyfill for the Iconv extension\r\nsymfony/polyfill-intl-idn                           v1.27.0            Symfony polyfill for intl's idn_to_ascii and idn_to_utf8 functions\r\nsymfony/polyfill-intl-normalizer                    v1.27.0            Symfony polyfill for intl's Normalizer class and related functions\r\nsymfony/polyfill-mbstring                           v1.27.0            Symfony polyfill for the Mbstring extension\r\nsymfony/polyfill-php72                              v1.27.0            Symfony polyfill backporting some PHP 7.2+ features to lower PHP versions\r\nsymfony/polyfill-php80                              v1.27.0            Symfony polyfill backporting some PHP 8.0+ features to lower PHP versions\r\nsymfony/process                                     v5.4.19            Executes commands in sub-processes\r\ntheseer/tokenizer                                   1.2.1              A small library for converting tokenized PHP source code into XML and potentially other formats\r\ntwig/twig                                           v3.5.0             Twig, the flexible, fast, and secure template language for PHP\r\nwebmozart/assert                                    1.11.0             Assertions to validate method input/output with nice error messages.\r\n```","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5178/timeline","performed_via_github_app":null,"state_reason":"completed"}