{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/909","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/909/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/909/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/909/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/909","id":14128307,"node_id":"MDU6SXNzdWUxNDEyODMwNw==","number":909,"title":" process isolation could use fork()","user":{"login":"RichardBradley","id":1265780,"node_id":"MDQ6VXNlcjEyNjU3ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1265780?v=4","gravatar_id":"","url":"https://api.github.com/users/RichardBradley","html_url":"https://github.com/RichardBradley","followers_url":"https://api.github.com/users/RichardBradley/followers","following_url":"https://api.github.com/users/RichardBradley/following{/other_user}","gists_url":"https://api.github.com/users/RichardBradley/gists{/gist_id}","starred_url":"https://api.github.com/users/RichardBradley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RichardBradley/subscriptions","organizations_url":"https://api.github.com/users/RichardBradley/orgs","repos_url":"https://api.github.com/users/RichardBradley/repos","events_url":"https://api.github.com/users/RichardBradley/events{/privacy}","received_events_url":"https://api.github.com/users/RichardBradley/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2013-05-08T23:59:12Z","updated_at":"2017-08-25T16:01:46Z","closed_at":"2013-05-14T09:00:01Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I was wondering why PHPUnit, when running tests in separate processes for isolation, recreates the process environment by laboriously creating a script which reloads all the loaded files and sets all the same global variables etc, instead of using fork()?\r\n\r\nWould it not be faster and simpler to use fork()?\r\n\r\nDid you do it that way just to support Windows, or for some other reason?\r\n\r\nDo you think the framework would do better to detect whether fork() is available and if it is, use that instead of the current approach, or do you think that keeping the Unix and Windows approaches the same outweighs the performance benefits on Unix?\r\n\r\nI refer to the code starting from “`if ($this->runTestInSeparateProcess === TRUE`” at \r\n[`TestCase.php:783`](https://github.com/sebastianbergmann/phpunit/blob/a1b5663a426b85854e97dce080a3546907836d5a/src/Framework/TestCase.php#L783)\r\n","closed_by":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/909/timeline","performed_via_github_app":null,"state_reason":"completed"}