[{"id":12962679984,"node_id":"LE_lADOAAbWLc6KZF0LzwAAAAMEosyw","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/12962679984","actor":{"login":"kkmuffme","id":11071985,"node_id":"MDQ6VXNlcjExMDcxOTg1","avatar_url":"https://avatars.githubusercontent.com/u/11071985?v=4","gravatar_id":"","url":"https://api.github.com/users/kkmuffme","html_url":"https://github.com/kkmuffme","followers_url":"https://api.github.com/users/kkmuffme/followers","following_url":"https://api.github.com/users/kkmuffme/following{/other_user}","gists_url":"https://api.github.com/users/kkmuffme/gists{/gist_id}","starred_url":"https://api.github.com/users/kkmuffme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkmuffme/subscriptions","organizations_url":"https://api.github.com/users/kkmuffme/orgs","repos_url":"https://api.github.com/users/kkmuffme/repos","events_url":"https://api.github.com/users/kkmuffme/events{/privacy}","received_events_url":"https://api.github.com/users/kkmuffme/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-28T20:09:11Z","label":{"name":"type/bug","color":"cc0000"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2136519840","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5844#issuecomment-2136519840","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5844","id":2136519840,"node_id":"IC_kwDOAAbWLc5_WLSg","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-29T05:05:23Z","updated_at":"2024-05-29T05:05:23Z","body":"Thank you for your report.\r\n\r\nPlease provide a **minimal**, **self-contained**, reproducing test case that shows the problem you are reporting.\r\n\r\nWithout such a minimal, self-contained, reproducing test case I will not be able to investigate this issue.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2136519840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12965851757,"node_id":"LE_lADOAAbWLc6KZF0LzwAAAAME0zJt","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/12965851757","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-29T05:05:29Z","label":{"name":"status/waiting-for-feedback","color":"b60205"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2136766176","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5844#issuecomment-2136766176","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5844","id":2136766176,"node_id":"IC_kwDOAAbWLc5_XHbg","user":{"login":"kkmuffme","id":11071985,"node_id":"MDQ6VXNlcjExMDcxOTg1","avatar_url":"https://avatars.githubusercontent.com/u/11071985?v=4","gravatar_id":"","url":"https://api.github.com/users/kkmuffme","html_url":"https://github.com/kkmuffme","followers_url":"https://api.github.com/users/kkmuffme/followers","following_url":"https://api.github.com/users/kkmuffme/following{/other_user}","gists_url":"https://api.github.com/users/kkmuffme/gists{/gist_id}","starred_url":"https://api.github.com/users/kkmuffme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkmuffme/subscriptions","organizations_url":"https://api.github.com/users/kkmuffme/orgs","repos_url":"https://api.github.com/users/kkmuffme/repos","events_url":"https://api.github.com/users/kkmuffme/events{/privacy}","received_events_url":"https://api.github.com/users/kkmuffme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-29T07:49:06Z","updated_at":"2024-05-29T07:49:06Z","body":"Here's a really basic one (of course not very realistic, but it's minimal and self-contained). Same thing also (more realistic) is possible with exception handler\r\n\r\n```php\r\n<?php declare(strict_types=1);\r\n/*\r\n * This file is part of PHPUnit.\r\n *\r\n * (c) Sebastian Bergmann <sebastian@phpunit.de>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\nnamespace PHPUnit\\TestFixture;\r\n\r\nuse function set_error_handler;\r\nuse function trigger_error;\r\nuse PHPUnit\\Framework\\TestCase;\r\n\r\nclass SomeExternalDependency {\r\n    public function __construct()\r\n    {\r\n        set_error_handler([$this, 'logError']);\r\n    }\r\n\r\n    private function logError(): bool\r\n    {\r\n        return false;\r\n    }\r\n}\r\n\r\nclass Issue5844Test extends TestCase\r\n{\r\n\r\n    public function testSetErrorHandlerNonCallable(): void\r\n    {\r\n        new SomeExternalDependency();\r\n\r\n        trigger_error('error', E_USER_WARNING);\r\n\r\n        $this->assertTrue(true);\r\n    }\r\n}\r\n```\r\n    ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2136766176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kkmuffme","id":11071985,"node_id":"MDQ6VXNlcjExMDcxOTg1","avatar_url":"https://avatars.githubusercontent.com/u/11071985?v=4","gravatar_id":"","url":"https://api.github.com/users/kkmuffme","html_url":"https://github.com/kkmuffme","followers_url":"https://api.github.com/users/kkmuffme/followers","following_url":"https://api.github.com/users/kkmuffme/following{/other_user}","gists_url":"https://api.github.com/users/kkmuffme/gists{/gist_id}","starred_url":"https://api.github.com/users/kkmuffme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkmuffme/subscriptions","organizations_url":"https://api.github.com/users/kkmuffme/orgs","repos_url":"https://api.github.com/users/kkmuffme/repos","events_url":"https://api.github.com/users/kkmuffme/events{/privacy}","received_events_url":"https://api.github.com/users/kkmuffme/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12967480758,"node_id":"UNLE_lADOAAbWLc6KZF0LzwAAAAME7A22","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/12967480758","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-05-29T07:49:58Z","label":{"name":"status/waiting-for-feedback","color":"b60205"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2154238175","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5844#issuecomment-2154238175","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5844","id":2154238175,"node_id":"IC_kwDOAAbWLc6AZxDf","user":{"login":"mvorisek","id":2228672,"node_id":"MDQ6VXNlcjIyMjg2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2228672?v=4","gravatar_id":"","url":"https://api.github.com/users/mvorisek","html_url":"https://github.com/mvorisek","followers_url":"https://api.github.com/users/mvorisek/followers","following_url":"https://api.github.com/users/mvorisek/following{/other_user}","gists_url":"https://api.github.com/users/mvorisek/gists{/gist_id}","starred_url":"https://api.github.com/users/mvorisek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvorisek/subscriptions","organizations_url":"https://api.github.com/users/mvorisek/orgs","repos_url":"https://api.github.com/users/mvorisek/repos","events_url":"https://api.github.com/users/mvorisek/events{/privacy}","received_events_url":"https://api.github.com/users/mvorisek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-07T07:16:06Z","updated_at":"2024-06-07T07:55:28Z","body":"Here is an repro: https://3v4l.org/GFd18\r\n\r\nThe issue is the callback must be restored in rebound context. I belive reflection can be used to detect the target context.\r\n\r\nHere is docs https://www.php.net/manual/en/language.types.callable.php for all supportted callable types. All possibly private/not-callable-from-non-this must be tested.\r\n\r\nhttps://github.com/php/php-src/issues/14494 should be linked as IMO it is a little flaw in php design/callable validation on `set_error_handler`.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2154238175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvorisek","id":2228672,"node_id":"MDQ6VXNlcjIyMjg2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2228672?v=4","gravatar_id":"","url":"https://api.github.com/users/mvorisek","html_url":"https://github.com/mvorisek","followers_url":"https://api.github.com/users/mvorisek/followers","following_url":"https://api.github.com/users/mvorisek/following{/other_user}","gists_url":"https://api.github.com/users/mvorisek/gists{/gist_id}","starred_url":"https://api.github.com/users/mvorisek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvorisek/subscriptions","organizations_url":"https://api.github.com/users/mvorisek/orgs","repos_url":"https://api.github.com/users/mvorisek/repos","events_url":"https://api.github.com/users/mvorisek/events{/privacy}","received_events_url":"https://api.github.com/users/mvorisek/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"mvorisek","id":2228672,"node_id":"MDQ6VXNlcjIyMjg2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2228672?v=4","gravatar_id":"","url":"https://api.github.com/users/mvorisek","html_url":"https://github.com/mvorisek","followers_url":"https://api.github.com/users/mvorisek/followers","following_url":"https://api.github.com/users/mvorisek/following{/other_user}","gists_url":"https://api.github.com/users/mvorisek/gists{/gist_id}","starred_url":"https://api.github.com/users/mvorisek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvorisek/subscriptions","organizations_url":"https://api.github.com/users/mvorisek/orgs","repos_url":"https://api.github.com/users/mvorisek/repos","events_url":"https://api.github.com/users/mvorisek/events{/privacy}","received_events_url":"https://api.github.com/users/mvorisek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-07T07:38:25Z","updated_at":"2024-06-07T07:38:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/php/php-src/issues/14494","repository_url":"https://api.github.com/repos/php/php-src","labels_url":"https://api.github.com/repos/php/php-src/issues/14494/labels{/name}","comments_url":"https://api.github.com/repos/php/php-src/issues/14494/comments","events_url":"https://api.github.com/repos/php/php-src/issues/14494/events","html_url":"https://github.com/php/php-src/issues/14494","id":2339800732,"node_id":"I_kwDOAB0Los6Ldoac","number":14494,"title":"`set_error_handler` should accept \"only globally callable callback\"","user":{"login":"mvorisek","id":2228672,"node_id":"MDQ6VXNlcjIyMjg2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2228672?v=4","gravatar_id":"","url":"https://api.github.com/users/mvorisek","html_url":"https://github.com/mvorisek","followers_url":"https://api.github.com/users/mvorisek/followers","following_url":"https://api.github.com/users/mvorisek/following{/other_user}","gists_url":"https://api.github.com/users/mvorisek/gists{/gist_id}","starred_url":"https://api.github.com/users/mvorisek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvorisek/subscriptions","organizations_url":"https://api.github.com/users/mvorisek/orgs","repos_url":"https://api.github.com/users/mvorisek/repos","events_url":"https://api.github.com/users/mvorisek/events{/privacy}","received_events_url":"https://api.github.com/users/mvorisek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":148912334,"node_id":"MDU6TGFiZWwxNDg5MTIzMzQ=","url":"https://api.github.com/repos/php/php-src/labels/Feature","name":"Feature","color":"C2E0C6","default":false,"description":""},{"id":3611416941,"node_id":"LA_kwDOAB0Los7XQdlt","url":"https://api.github.com/repos/php/php-src/labels/Status:%20Needs%20Triage","name":"Status: Needs Triage","color":"D93F0B","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2024-06-07T07:38:24Z","updated_at":"2024-10-19T17:57:44Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":1903522,"node_id":"MDEwOlJlcG9zaXRvcnkxOTAzNTIy","name":"php-src","full_name":"php/php-src","private":false,"owner":{"login":"php","id":25158,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI1MTU4","avatar_url":"https://avatars.githubusercontent.com/u/25158?v=4","gravatar_id":"","url":"https://api.github.com/users/php","html_url":"https://github.com/php","followers_url":"https://api.github.com/users/php/followers","following_url":"https://api.github.com/users/php/following{/other_user}","gists_url":"https://api.github.com/users/php/gists{/gist_id}","starred_url":"https://api.github.com/users/php/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/php/subscriptions","organizations_url":"https://api.github.com/users/php/orgs","repos_url":"https://api.github.com/users/php/repos","events_url":"https://api.github.com/users/php/events{/privacy}","received_events_url":"https://api.github.com/users/php/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/php/php-src","description":"The PHP Interpreter","fork":false,"url":"https://api.github.com/repos/php/php-src","forks_url":"https://api.github.com/repos/php/php-src/forks","keys_url":"https://api.github.com/repos/php/php-src/keys{/key_id}","collaborators_url":"https://api.github.com/repos/php/php-src/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/php/php-src/teams","hooks_url":"https://api.github.com/repos/php/php-src/hooks","issue_events_url":"https://api.github.com/repos/php/php-src/issues/events{/number}","events_url":"https://api.github.com/repos/php/php-src/events","assignees_url":"https://api.github.com/repos/php/php-src/assignees{/user}","branches_url":"https://api.github.com/repos/php/php-src/branches{/branch}","tags_url":"https://api.github.com/repos/php/php-src/tags","blobs_url":"https://api.github.com/repos/php/php-src/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/php/php-src/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/php/php-src/git/refs{/sha}","trees_url":"https://api.github.com/repos/php/php-src/git/trees{/sha}","statuses_url":"https://api.github.com/repos/php/php-src/statuses/{sha}","languages_url":"https://api.github.com/repos/php/php-src/languages","stargazers_url":"https://api.github.com/repos/php/php-src/stargazers","contributors_url":"https://api.github.com/repos/php/php-src/contributors","subscribers_url":"https://api.github.com/repos/php/php-src/subscribers","subscription_url":"https://api.github.com/repos/php/php-src/subscription","commits_url":"https://api.github.com/repos/php/php-src/commits{/sha}","git_commits_url":"https://api.github.com/repos/php/php-src/git/commits{/sha}","comments_url":"https://api.github.com/repos/php/php-src/comments{/number}","issue_comment_url":"https://api.github.com/repos/php/php-src/issues/comments{/number}","contents_url":"https://api.github.com/repos/php/php-src/contents/{+path}","compare_url":"https://api.github.com/repos/php/php-src/compare/{base}...{head}","merges_url":"https://api.github.com/repos/php/php-src/merges","archive_url":"https://api.github.com/repos/php/php-src/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/php/php-src/downloads","issues_url":"https://api.github.com/repos/php/php-src/issues{/number}","pulls_url":"https://api.github.com/repos/php/php-src/pulls{/number}","milestones_url":"https://api.github.com/repos/php/php-src/milestones{/number}","notifications_url":"https://api.github.com/repos/php/php-src/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/php/php-src/labels{/name}","releases_url":"https://api.github.com/repos/php/php-src/releases{/id}","deployments_url":"https://api.github.com/repos/php/php-src/deployments","created_at":"2011-06-16T01:52:25Z","updated_at":"2025-11-10T03:31:35Z","pushed_at":"2025-11-09T21:57:25Z","git_url":"git://github.com/php/php-src.git","ssh_url":"git@github.com:php/php-src.git","clone_url":"https://github.com/php/php-src.git","svn_url":"https://github.com/php/php-src","homepage":"https://www.php.net","size":615309,"stargazers_count":39604,"watchers_count":39604,"language":"C","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":7961,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1598,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":7961,"open_issues":1598,"watchers":39604,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Description\r\n\r\nsee https://github.com/sebastianbergmann/phpunit/issues/5844\r\n\r\n`set_error_handler` (and `set_exception_handler`, maybe even more handlers) should accept only callables callable from any context. Accepting any callable like php does not is dangerous and unwanted, the error/exception can from any context.\r\n\r\nI would expect php to evaluate \"if the callable is callable\" in global context on set phase.\r\n\r\nrepro: https://3v4l.org/mZ9E3\r\n\r\nResulted in this output:\r\n```\r\n...\r\nFatal error: Uncaught Error: Invalid callback Foo\\SomeExternalDependency::logError, cannot access private\r\nmethod Foo\\SomeExternalDependency::logError()\r\n...\r\n```\r\n\r\nBut I expected this output instead:\r\n```\r\nFatal error: Uncaught TypeError: set_error_handler(): Argument #1 ($callback) must be a valid globally\r\ncallable callback or null, Foo\\SomeExternalDependency::logError() method is private\"\r\n...\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/php/php-src/issues/14494/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/php/php-src/issues/14494/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":14733145267,"node_id":"RTE_lADOAAbWLc6KZF0LzwAAAANuKfSz","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/14733145267","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-10-19T12:29:33Z","rename":{"from":"Fatal with some error/exception handlers","to":"Error handlers that are not callable outside the scope they were registered in are not handled correctly"},"performed_via_github_app":null},{"id":14733200308,"node_id":"REFE_lADOAAbWLc6KZF0LzwAAAANuKsu0","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/14733200308","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8e8776083c71277fa90403b183530c956b110b60","commit_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits/8e8776083c71277fa90403b183530c956b110b60","created_at":"2024-10-19T12:38:14Z","performed_via_github_app":null},{"id":14733200335,"node_id":"CE_lADOAAbWLc6KZF0LzwAAAANuKsvP","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/14733200335","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"8e8776083c71277fa90403b183530c956b110b60","commit_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits/8e8776083c71277fa90403b183530c956b110b60","created_at":"2024-10-19T12:38:15Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2423986543","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5844#issuecomment-2423986543","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5844","id":2423986543,"node_id":"IC_kwDOAAbWLc6Qexlv","user":{"login":"kkmuffme","id":11071985,"node_id":"MDQ6VXNlcjExMDcxOTg1","avatar_url":"https://avatars.githubusercontent.com/u/11071985?v=4","gravatar_id":"","url":"https://api.github.com/users/kkmuffme","html_url":"https://github.com/kkmuffme","followers_url":"https://api.github.com/users/kkmuffme/followers","following_url":"https://api.github.com/users/kkmuffme/following{/other_user}","gists_url":"https://api.github.com/users/kkmuffme/gists{/gist_id}","starred_url":"https://api.github.com/users/kkmuffme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkmuffme/subscriptions","organizations_url":"https://api.github.com/users/kkmuffme/orgs","repos_url":"https://api.github.com/users/kkmuffme/repos","events_url":"https://api.github.com/users/kkmuffme/events{/privacy}","received_events_url":"https://api.github.com/users/kkmuffme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-19T15:39:45Z","updated_at":"2024-10-19T15:39:45Z","body":"This will completely remove it though?\r\n\r\nWouldn't the correct way to do it be to add it back with something like https://github.com/php/php-src/issues/14494#issuecomment-2423936334 ?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2423986543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kkmuffme","id":11071985,"node_id":"MDQ6VXNlcjExMDcxOTg1","avatar_url":"https://avatars.githubusercontent.com/u/11071985?v=4","gravatar_id":"","url":"https://api.github.com/users/kkmuffme","html_url":"https://github.com/kkmuffme","followers_url":"https://api.github.com/users/kkmuffme/followers","following_url":"https://api.github.com/users/kkmuffme/following{/other_user}","gists_url":"https://api.github.com/users/kkmuffme/gists{/gist_id}","starred_url":"https://api.github.com/users/kkmuffme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkmuffme/subscriptions","organizations_url":"https://api.github.com/users/kkmuffme/orgs","repos_url":"https://api.github.com/users/kkmuffme/repos","events_url":"https://api.github.com/users/kkmuffme/events{/privacy}","received_events_url":"https://api.github.com/users/kkmuffme/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"soyuka","id":1321971,"node_id":"MDQ6VXNlcjEzMjE5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/1321971?v=4","gravatar_id":"","url":"https://api.github.com/users/soyuka","html_url":"https://github.com/soyuka","followers_url":"https://api.github.com/users/soyuka/followers","following_url":"https://api.github.com/users/soyuka/following{/other_user}","gists_url":"https://api.github.com/users/soyuka/gists{/gist_id}","starred_url":"https://api.github.com/users/soyuka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soyuka/subscriptions","organizations_url":"https://api.github.com/users/soyuka/orgs","repos_url":"https://api.github.com/users/soyuka/repos","events_url":"https://api.github.com/users/soyuka/events{/privacy}","received_events_url":"https://api.github.com/users/soyuka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-28T23:48:47Z","updated_at":"2025-03-28T23:48:47Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6165","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6165/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6165/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6165/events","html_url":"https://github.com/sebastianbergmann/phpunit/pull/6165","id":2955873957,"node_id":"PR_kwDOAAbWLc6Qi1Oj","number":6165,"title":"Collect deprecations triggered by autoloading while loading/building the test suite","user":{"login":"soyuka","id":1321971,"node_id":"MDQ6VXNlcjEzMjE5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/1321971?v=4","gravatar_id":"","url":"https://api.github.com/users/soyuka","html_url":"https://github.com/soyuka","followers_url":"https://api.github.com/users/soyuka/followers","following_url":"https://api.github.com/users/soyuka/following{/other_user}","gists_url":"https://api.github.com/users/soyuka/gists{/gist_id}","starred_url":"https://api.github.com/users/soyuka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soyuka/subscriptions","organizations_url":"https://api.github.com/users/soyuka/orgs","repos_url":"https://api.github.com/users/soyuka/repos","events_url":"https://api.github.com/users/soyuka/events{/privacy}","received_events_url":"https://api.github.com/users/soyuka/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44002,"node_id":"MDU6TGFiZWw0NDAwMg==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/enhancement","name":"type/enhancement","color":"73d216","default":false,"description":"A new idea that should be implemented"},{"id":1329317012,"node_id":"MDU6TGFiZWwxMzI5MzE3MDEy","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/test-runner","name":"feature/test-runner","color":"e9b96e","default":false,"description":"CLI test runner"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones/65","html_url":"https://github.com/sebastianbergmann/phpunit/milestone/65","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones/65/labels","id":11972302,"node_id":"MI_kwDOAAbWLc4Atq7O","number":65,"title":"PHPUnit 12.2","description":"","creator":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":4,"state":"closed","created_at":"2024-11-30T07:24:28Z","updated_at":"2025-06-06T03:10:42Z","due_on":"2025-06-06T07:00:00Z","closed_at":"2025-06-06T03:10:42Z"},"comments":11,"created_at":"2025-03-28T11:21:31Z","updated_at":"2025-06-04T10:26:51Z","closed_at":"2025-06-04T10:26:51Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":448045,"node_id":"MDEwOlJlcG9zaXRvcnk0NDgwNDU=","name":"phpunit","full_name":"sebastianbergmann/phpunit","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit","description":"The PHP Unit Testing framework.","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/deployments","created_at":"2009-12-24T13:16:23Z","updated_at":"2025-11-09T22:28:27Z","pushed_at":"2025-11-08T12:36:44Z","git_url":"git://github.com/sebastianbergmann/phpunit.git","ssh_url":"git@github.com:sebastianbergmann/phpunit.git","clone_url":"https://github.com/sebastianbergmann/phpunit.git","svn_url":"https://github.com/sebastianbergmann/phpunit","homepage":"https://phpunit.de/","size":204756,"stargazers_count":19957,"watchers_count":19957,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2223,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":105,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["php","phpunit","testing-tools"],"visibility":"public","forks":2223,"open_issues":105,"watchers":19957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/pulls/6165","html_url":"https://github.com/sebastianbergmann/phpunit/pull/6165","diff_url":"https://github.com/sebastianbergmann/phpunit/pull/6165.diff","patch_url":"https://github.com/sebastianbergmann/phpunit/pull/6165.patch","merged_at":"2025-06-04T10:26:51Z"},"body":"When one triggers a deprecation in a class directly like this:\r\n\r\n```php\r\n<?php\r\ntrigger_error('Depreciated interface', E_USER_DEPRECATED);\r\n\r\ninterface Foo {}\r\n```\r\n\r\nThis technique is notably used in many Symfony components, for example:\r\n\r\nhttps://github.com/symfony/symfony/blob/82cf90aefb7e9117ebd981fec83d7546e310e52b/src/Symfony/Component/PropertyInfo/Type.php#L12-L15\r\n\r\nThe deprecation will be triggered when autoloading the class, which happens in:\r\n\r\nhttps://github.com/sebastianbergmann/phpunit/blob/4b6a4ee654e5e0c5e1f17e2f83c0f4c91dee1f9c/src/TextUI/Application.php#L181\r\n\r\nAt that point, the ErrorHandler is not registered and we loose the deprecation. \r\n\r\nThis pull request gives an idea on how it may be fixed, indeed the `ErrorHandler` needs a `TestCase` therefore I'm collecting these deprecations and triggering them once we call `ErrorHandler::enable`. I'm open to suggestions on how to fix this differently. Obviously I'll add tests if/once a solution is found that can be merged.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6165/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6165/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]