{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/415","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/415/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/415/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/415/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/415","id":2296736,"node_id":"MDU6SXNzdWUyMjk2NzM2","number":415,"title":"Pass exception to tearDown()","user":{"login":"fbrnc","id":468820,"node_id":"MDQ6VXNlcjQ2ODgyMA==","avatar_url":"https://avatars.githubusercontent.com/u/468820?v=4","gravatar_id":"","url":"https://api.github.com/users/fbrnc","html_url":"https://github.com/fbrnc","followers_url":"https://api.github.com/users/fbrnc/followers","following_url":"https://api.github.com/users/fbrnc/following{/other_user}","gists_url":"https://api.github.com/users/fbrnc/gists{/gist_id}","starred_url":"https://api.github.com/users/fbrnc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbrnc/subscriptions","organizations_url":"https://api.github.com/users/fbrnc/orgs","repos_url":"https://api.github.com/users/fbrnc/repos","events_url":"https://api.github.com/users/fbrnc/events{/privacy}","received_events_url":"https://api.github.com/users/fbrnc/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-11-20T19:28:42Z","updated_at":"2015-10-02T04:18:48Z","closed_at":"2015-10-02T04:18:46Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"A testcase's tearDown() method always gets called before the onNotSuccessfulTest() method in case an exception has been thrown somewhere. \n\nIf you need the current testenvironment in onNotSuccessfulTest() you must not \"clean\" it in tearDown(), but inside onNotSuccessfulTest(). Currently this is only possible using some workarounds. \n\nPassing the exception to tearDown() would enable you to decide inside that method what to do.\n\nExample Usecase: I use tearDown() to close the connection to a Selenium2 server (I'm not using PHPUnit_Selenium...). If an execption occured I'd like to take a screenshot in onNotSuccessfulTest(), so session needs to be closed inside onNotSuccessfulTest() and not in tearDown(). But if no exception occured session needs to be closed inside tearDown().\n\nAnother nice approach would be to have a template method that will be called at the very end (after tearDown and onNotSuccessfulTest).\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/415/timeline","performed_via_github_app":null,"state_reason":"completed"}