{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3535","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3535/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3535/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3535/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/3535","id":411227686,"node_id":"MDU6SXNzdWU0MTEyMjc2ODY=","number":3535,"title":"ini_set method signature type missmatch renders fatal error","user":{"login":"oligus","id":2466591,"node_id":"MDQ6VXNlcjI0NjY1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/2466591?v=4","gravatar_id":"","url":"https://api.github.com/users/oligus","html_url":"https://github.com/oligus","followers_url":"https://api.github.com/users/oligus/followers","following_url":"https://api.github.com/users/oligus/following{/other_user}","gists_url":"https://api.github.com/users/oligus/gists{/gist_id}","starred_url":"https://api.github.com/users/oligus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oligus/subscriptions","organizations_url":"https://api.github.com/users/oligus/orgs","repos_url":"https://api.github.com/users/oligus/repos","events_url":"https://api.github.com/users/oligus/events{/privacy}","received_events_url":"https://api.github.com/users/oligus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-02-17T19:55:14Z","updated_at":"2019-02-18T06:12:23Z","closed_at":"2019-02-18T06:12:17Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 8.0.3\r\n| PHP version         | 7.3.2\r\n| Installation Method | Composer\r\n\r\nThank you for PHPUnit, it is a tool that I use daily and been doing so for years. I appreciate the work you guys put into the project to keep it updated!\r\n\r\nI have however encountered an error and I'm not sure if it is me or an actual bug but I thought I would share it here and see if you have an idea.\r\n\r\nWhen using phpunit -d option (Set the value of the given PHP configuration option) a fatal error is thrown:\r\n\r\n```\r\nFatal error: Uncaught TypeError: ini_set() expects parameter 2 to be string, bool given in /Users/oli/PhpstormProjects/refactoring/vendor/phpunit/phpunit/src/TextUI/Command.php:379\r\nStack trace:\r\n#0 /Users/oli/PhpstormProjects/refactoring/vendor/phpunit/phpunit/src/TextUI/Command.php(379): ini_set('--update-snapsh...', true)\r\n#1 /Users/oli/PhpstormProjects/refactoring/vendor/phpunit/phpunit/src/TextUI/Command.php(175): PHPUnit\\TextUI\\Command->handleArguments(Array)\r\n#2 /Users/oli/PhpstormProjects/refactoring/vendor/phpunit/phpunit/src/TextUI/Command.php(164): PHPUnit\\TextUI\\Command->run(Array, true)\r\n#3 /Users/oli/PhpstormProjects/refactoring/vendor/phpunit/phpunit/phpunit(61): PHPUnit\\TextUI\\Command::main()\r\n#4 {main}\r\n  thrown in /Users/oli/PhpstormProjects/refactoring/vendor/phpunit/phpunit/src/TextUI/Command.php on line 379\r\n```\r\n\r\nThis is probably due to `declare(strict_types=1)`.\r\n\r\nini_set method signature:\r\n```\r\nini_set ( string $varname , string $newvalue ) : string\r\n```\r\n\r\nHowever, here it sets a boolean value to `true`:\r\n\r\nhttps://github.com/sebastianbergmann/phpunit/blob/36057af90ae6e67f4a80e1d4a9a71187e346284d/src/TextUI/Command.php#L380\r\n\r\n```\r\nclue/stdio-react                   v2.2.0  Async, event-driven console input & output (STDIN, STDOUT) for truly interactive CLI applications, built on top of ReactPHP\r\nclue/term-react                    v1.2.0  Streaming terminal emulator, built on top of ReactPHP\r\nclue/utf8-react                    v1.1.0  Streaming UTF-8 parser, built on top of ReactPHP\r\ndoctrine/collections               v1.5.0  Collections Abstraction library\r\ndoctrine/instantiator              1.1.0   A small, lightweight utility to instantiate objects in PHP without invoking their constructors\r\nevenement/evenement                v3.0.1  Événement is a very simple event dispatching library for PHP\r\njolicode/jolinotif                 v2.0.1  Send desktop notifications on Windows, Linux, MacOS.\r\nmyclabs/deep-copy                  1.8.1   Create deep copies (clones) of your objects\r\nphar-io/manifest                   1.0.3   Component for reading phar.io manifest information from a PHP Archive (PHAR)\r\nphar-io/version                    2.0.1   Library for handling version information and constraints\r\nphpdocumentor/reflection-common    1.0.1   Common reflection classes used by phpdocumentor to reflect the code structure\r\nphpdocumentor/reflection-docblock  4.3.0   With this component, a library can provide support for annotations via DocBlocks or otherwise retrieve information that is embedded in a DocBlock.\r\nphpdocumentor/type-resolver        0.4.0  \r\nphpspec/prophecy                   1.8.0   Highly opinionated mocking framework for PHP 5.3+\r\nphpunit/php-code-coverage          7.0.2   Library that provides collection, processing, and rendering functionality for PHP code coverage information.\r\nphpunit/php-file-iterator          2.0.2   FilterIterator implementation that filters files based on a list of suffixes.\r\nphpunit/php-text-template          1.2.1   Simple template engine.\r\nphpunit/php-timer                  2.0.0   Utility class for timing\r\nphpunit/php-token-stream           3.0.1   Wrapper around PHP's tokenizer extension.\r\nphpunit/phpunit                    8.0.3   The PHP Unit Testing framework.\r\nreact/event-loop                   v1.1.0  ReactPHP's core reactor event loop that libraries can use for evented I/O.\r\nreact/stream                       v1.1.0  Event-driven readable and writable streams for non-blocking I/O in ReactPHP\r\nsebastian/code-unit-reverse-lookup 1.0.1   Looks up which function or method a line of code belongs to\r\nsebastian/comparator               3.0.2   Provides the functionality to compare PHP values for equality\r\nsebastian/diff                     3.0.2   Diff implementation\r\nsebastian/environment              4.1.0   Provides functionality to handle HHVM/PHP environments\r\nsebastian/exporter                 3.1.0   Provides the functionality to export PHP variables for visualization\r\nsebastian/global-state             3.0.0   Snapshotting of global state\r\nsebastian/object-enumerator        3.0.3   Traverses array structures and object graphs to enumerate all referenced objects\r\nsebastian/object-reflector         1.1.1   Allows reflection of object attributes, including inherited and non-public ones\r\nsebastian/recursion-context        3.0.0   Provides functionality to recursively process PHP variables\r\nsebastian/resource-operations      2.0.1   Provides a list of PHP built-in functions that operate on resources\r\nsebastian/version                  2.0.1   Library that helps with managing the version number of Git-hosted PHP projects\r\nspatie/phpunit-snapshot-assertions 2.1.0   Snapshot testing with PHPUnit\r\nspatie/phpunit-watcher             1.8.3   Automatically rerun PHPUnit tests when source code changes\r\nsymfony/console                    v4.2.3  Symfony Console Component\r\nsymfony/contracts                  v1.0.2  A set of abstractions extracted out of the Symfony components\r\nsymfony/finder                     v4.2.3  Symfony Finder Component\r\nsymfony/polyfill-ctype             v1.10.0 Symfony polyfill for ctype functions\r\nsymfony/polyfill-mbstring          v1.10.0 Symfony polyfill for the Mbstring extension\r\nsymfony/polyfill-php72             v1.10.0 Symfony polyfill backporting some PHP 7.2+ features to lower PHP versions\r\nsymfony/process                    v4.2.3  Symfony Process Component\r\nsymfony/var-dumper                 v4.2.3  Symfony mechanism for exploring and dumping PHP variables\r\nsymfony/yaml                       v4.2.3  Symfony Yaml Component\r\ntheseer/tokenizer                  1.1.0   A small library for converting tokenized PHP source code into XML and potentially other formats\r\nwebmozart/assert                   1.4.0   Assertions to validate method input/output with nice error messages.\r\nyosymfony/resource-watcher         v1.3.0  A simple resource watcher using Symfony Finder\r\n```\r\n\r\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3535/timeline","performed_via_github_app":null,"state_reason":"completed"}