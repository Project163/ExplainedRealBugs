{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/943","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/943/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/943/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/943/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/943","id":15943289,"node_id":"MDU6SXNzdWUxNTk0MzI4OQ==","number":943,"title":"Memory leak and performance problems with many test methods","user":{"login":"alfmel","id":4806187,"node_id":"MDQ6VXNlcjQ4MDYxODc=","avatar_url":"https://avatars.githubusercontent.com/u/4806187?v=4","gravatar_id":"","url":"https://api.github.com/users/alfmel","html_url":"https://github.com/alfmel","followers_url":"https://api.github.com/users/alfmel/followers","following_url":"https://api.github.com/users/alfmel/following{/other_user}","gists_url":"https://api.github.com/users/alfmel/gists{/gist_id}","starred_url":"https://api.github.com/users/alfmel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfmel/subscriptions","organizations_url":"https://api.github.com/users/alfmel/orgs","repos_url":"https://api.github.com/users/alfmel/repos","events_url":"https://api.github.com/users/alfmel/events{/privacy}","received_events_url":"https://api.github.com/users/alfmel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2013-06-24T19:37:21Z","updated_at":"2013-07-17T13:58:16Z","closed_at":"2013-06-24T21:51:04Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I am adding PHPUnit tests to an old project. I used phpunit-skelgen to create my test case on a class that has about 80 methods. Running this test suite showed some interesting performance issues. To test the performance issues, I created a test class with 50 incomplete tests:\n\n``` php\nclass MemoryLeakTest extends PHPUnit_Framework_TestCase {\n    public function testIncomplete00() {\n        $this->markTestIncomplete(\"Test not implemented yet\");\n    }\n    public function testIncomplete01() {\n        $this->markTestIncomplete(\"Test not implemented yet\");\n    }\n    ...\n    public function testIncomplete49() {\n        $this->markTestIncomplete(\"Test not implemented yet\");\n    }\n}\n```\n\nThis class took 30 seconds to execute. I then doubled the number of test methods to 100. That one took a little over 2 minutes to execute, and exited with an out of memory error (php.ini has a 128M limit). The most obvious evidence that there is a problem is that the display of the \"I\" character for the incomplete tests gets slower and slower as the test is executed.\n\nI am using PHP 5.4.16 on Arch Linux. My PHPUnit version is 3.7.21.\n","closed_by":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/943/timeline","performed_via_github_app":null,"state_reason":"completed"}