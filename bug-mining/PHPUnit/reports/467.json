{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3361","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3361/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3361/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3361/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/3361","id":372165725,"node_id":"MDU6SXNzdWUzNzIxNjU3MjU=","number":3361,"title":"[PHP 7.3] Regression with xdebug","user":{"login":"DavidPrevot","id":3936728,"node_id":"MDQ6VXNlcjM5MzY3Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/3936728?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidPrevot","html_url":"https://github.com/DavidPrevot","followers_url":"https://api.github.com/users/DavidPrevot/followers","following_url":"https://api.github.com/users/DavidPrevot/following{/other_user}","gists_url":"https://api.github.com/users/DavidPrevot/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidPrevot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidPrevot/subscriptions","organizations_url":"https://api.github.com/users/DavidPrevot/orgs","repos_url":"https://api.github.com/users/DavidPrevot/repos","events_url":"https://api.github.com/users/DavidPrevot/events{/privacy}","received_events_url":"https://api.github.com/users/DavidPrevot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-10-20T02:58:34Z","updated_at":"2018-10-29T07:36:56Z","closed_at":"2018-10-29T07:36:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 7.4.1\r\n| PHP version         | 7.3.0RC3\r\n| Installation Method | Debian\r\n\r\nHi,\r\n\r\nWith PHP 7.3, if xdebug is enabled, the following internal test now fails:\r\n\r\n```\r\n$ ./phpunit /build/phpunit-7.4.1/tests/end-to-end/regression/GitHub/2591-separate-function-no-preserve-no-bootstrap-xdebug.phpt\r\nPHPUnit 7.4.1 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 7.3.0RC3 with Xdebug 2.7.0beta1\r\nConfiguration: /build/phpunit-7.4.1/phpunit.xml\r\n\r\nF                                                                   1 / 1 (100%)\r\n\r\nTime: 179 ms, Memory: 4.00MB\r\n\r\nThere was 1 failure:\r\n\r\n1) /build/phpunit-7.4.1/tests/end-to-end/regression/GitHub/2591-separate-function-no-preserve-no-bootstrap-xdebug.phpt\r\nFailed asserting that string matches format description.\r\n--- Expected\r\n+++ Actual\r\n@@ @@\r\n There were 2 errors:\r\n \r\n 1) Issue2591_SeparateFunctionNoPreserveTest::testChangedGlobalString\r\n-PHPUnit\\Framework\\Exception:%sPHP Fatal error:  Class 'PHPUnit\\Framework\\TestCase' not found %s\r\n-%SPHP Stack trace:%S\r\n+PHPUnit\\Framework\\Exception: PHP Fatal error:  Uncaught Error: Class 'PHPUnit\\Framework\\TestCase' not found in /build/phpunit-7.4.1/tests/end-to-end/regression/GitHub/2591/SeparateFunctionNoPreserveTest.php:16\r\n+Stack trace:\r\n #0 Standard input code(31): require_once()\r\n+#1 Standard input code(111): __phpunit_run_isolated_test()\r\n+#2 {main}\r\n+  thrown in /build/phpunit-7.4.1/tests/end-to-end/regression/GitHub/2591/SeparateFunctionNoPreserveTest.php on line 16\r\n+\r\n 2) Issue2591_SeparateFunctionNoPreserveTest::testGlobalString\r\n-PHPUnit\\Framework\\Exception:%sPHP Fatal error:  Class 'PHPUnit\\Framework\\TestCase' not found %s\r\n-%SPHP Stack trace:%S\r\n-%a\r\n+PHPUnit\\Framework\\Exception: PHP Fatal error:  Uncaught Error: Class 'PHPUnit\\Framework\\TestCase' not found in /build/phpunit-7.4.1/tests/end-to-end/regression/GitHub/2591/SeparateFunctionNoPreserveTest.php:16\r\n+Stack trace:\r\n+#0 Standard input code(31): require_once()\r\n+#1 Standard input code(111): __phpunit_run_isolated_test()\r\n+#2 {main}\r\n+  thrown in /build/phpunit-7.4.1/tests/end-to-end/regression/GitHub/2591/SeparateFunctionNoPreserveTest.php on line 16\r\n+\r\n ERRORS!\r\n Tests: 2, Assertions: 0, Errors: 2.\r\n\r\n/build/phpunit-7.4.1/src/Framework/Constraint/Constraint.php:112\r\n/build/phpunit-7.4.1/src/Framework/Constraint/Constraint.php:60\r\n/build/phpunit-7.4.1/src/Framework/Assert.php:1855\r\n/build/phpunit-7.4.1/src/Framework/Assert.php:1555\r\n/build/phpunit-7.4.1/src/Runner/PhptTestCase.php:277\r\n/build/phpunit-7.4.1/src/Runner/PhptTestCase.php:166\r\n/build/phpunit-7.4.1/src/Framework/TestSuite.php:750\r\n/build/phpunit-7.4.1/src/TextUI/TestRunner.php:622\r\n/build/phpunit-7.4.1/src/TextUI/Command.php:206\r\n/build/phpunit-7.4.1/src/TextUI/Command.php:162\r\n\r\nFAILURES!\r\nTests: 1, Assertions: 1, Failures: 1.\r\n```\r\n\r\nIt seems that xdebug is not loaded in the travis configuration ([test is skipped](https://travis-ci.org/sebastianbergmann/phpunit/jobs/443673126#L629)), so that regression has not been caught earlier.\r\n\r\nRegards\r\n\r\nDavid","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/3361/timeline","performed_via_github_app":null,"state_reason":"completed"}