{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5157","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5157/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5157/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5157/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5157","id":1569453471,"node_id":"I_kwDOAAbWLc5di_Wf","number":5157,"title":"Test Runner tries to run hook methods for TestSuite objects that do not collect TestCase objects","user":{"login":"llaville","id":364342,"node_id":"MDQ6VXNlcjM2NDM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/364342?v=4","gravatar_id":"","url":"https://api.github.com/users/llaville","html_url":"https://github.com/llaville","followers_url":"https://api.github.com/users/llaville/followers","following_url":"https://api.github.com/users/llaville/following{/other_user}","gists_url":"https://api.github.com/users/llaville/gists{/gist_id}","starred_url":"https://api.github.com/users/llaville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/llaville/subscriptions","organizations_url":"https://api.github.com/users/llaville/orgs","repos_url":"https://api.github.com/users/llaville/repos","events_url":"https://api.github.com/users/llaville/events{/privacy}","received_events_url":"https://api.github.com/users/llaville/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":1329317012,"node_id":"MDU6TGFiZWwxMzI5MzE3MDEy","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/test-runner","name":"feature/test-runner","color":"e9b96e","default":false,"description":"CLI test runner"},{"id":5111411238,"node_id":"LA_kwDOAAbWLc8AAAABMKnyJg","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/10","name":"version/10","color":"888a85","default":false,"description":"Something affects PHPUnit 10"}],"state":"closed","locked":false,"assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":14,"created_at":"2023-02-03T08:50:43Z","updated_at":"2023-02-03T13:48:38Z","closed_at":"2023-02-03T13:34:03Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"\r\n| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 10.0.0\r\n| PHP version         | 8.0.x, 8.1.x, 8.2.x\r\n| Installation Method | PHAR (SHA-256 checksum 07c7ccac3526aea9dfcc6d5eeb5dd852ed1b6e88a497dbb243ae050fd8b5ec4f)\r\n\r\n#### Summary\r\n\r\nWhile running my GitHub Workflow I discovered that my test suites failed, because PHPUnit version was 10.0.0 \r\nPrevious runs with 9.5 were OK\r\n\r\n#### Current behavior\r\n\r\nReproduces it with the fresh PHAR version downloaded from your site https://phar.phpunit.de/\r\n\r\n```\r\nPHPUnit 10.0.0 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.1.14\r\nConfiguration: /shared/backups/bartlett/php-compatinfo-db/phpunit.xml.dist\r\n\r\n\r\n\r\nAn error occurred inside PHPUnit.\r\n\r\nMessage:  PHPUnit\\Metadata\\Annotation\\Parser\\DocBlock::__construct(): Argument #3 ($startLine) must be of type int, bool given, called in phar:///shared/backups/php/phpunit-10.0.0.phar/phpunit/Metadata/Parser/Annotation/DocBlock.php on line 70\r\nLocation: phar:///shared/backups/php/phpunit-10.0.0.phar/phpunit/TextUI/TestRunner.php:48\r\n\r\n#0 phar:///shared/backups/php/phpunit-10.0.0.phar/phpunit/TextUI/Application.php(107): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\NullResultCache), Object(PHPUnit\\Framework\\TestSuite))\r\n#1 /shared/backups/php/phpunit-10.0.0.phar(2825): PHPUnit\\TextUI\\Application->run(Array)\r\n#2 {main}\r\n```\r\n\r\nAnd log events contents : \r\n```\r\n[00:00:00.000010500 / 00:00:00.000003900] [23355392 bytes] PHPUnit Started (PHPUnit 10.0.0 using PHP 8.1.14 (cli) on Linux)\r\n[00:00:00.006860000 / 00:00:00.006849500] [23355392 bytes] Test Runner Triggered Warning (Your XML configuration validates against a deprecated schema. Migrate your XML configuration using \"--migrate-configuration\"!)\r\n[00:00:00.006915500 / 00:00:00.000055500] [23355392 bytes] Test Runner Configured\r\n[00:00:00.011752700 / 00:00:00.004837200] [25452544 bytes] Bootstrap Finished (/shared/backups/bartlett/php-compatinfo-db/config/bootstrap.php)\r\n[00:00:00.018236900 / 00:00:00.006484200] [25452544 bytes] Test Suite Loaded (13 tests)\r\n[00:00:00.019030400 / 00:00:00.000793500] [25452544 bytes] Event Facade Sealed\r\n[00:00:00.019079500 / 00:00:00.000049100] [25452544 bytes] Test Runner Started\r\n[00:00:00.019277900 / 00:00:00.000198400] [25452544 bytes] Test Suite Sorted\r\n[00:00:00.019324600 / 00:00:00.000046700] [25452544 bytes] Test Runner Execution Started (13 tests)\r\n[00:00:00.019393400 / 00:00:00.000068800] [25452544 bytes] Test Suite Started (13 tests)\r\n```\r\n\r\n#### How to reproduce\r\n\r\nOn my repository https://github.com/llaville/php-compatinfo-db (`master` branch)\r\n\r\nExecute command : `phpunit-10.0.0.phar --do-not-cache-result --testsuite=mysqli --log-events-verbose-text=./phpunit-10.events.txt`\r\n\r\n#### Expected behavior\r\n\r\nTestsuite(s) OK like with PHPUnit 9.5\r\nFor example:\r\n```\r\nPHPUnit 9.5.27 by Sebastian Bergmann and contributors.\r\n\r\nRuntime:       PHP 8.1.14\r\nConfiguration: /shared/backups/bartlett/php-compatinfo-db/phpunit.xml.dist\r\nWarning:       Your XML configuration validates against a deprecated schema.\r\nSuggestion:    Migrate your XML configuration using \"--migrate-configuration\"!\r\n\r\n.............                                                     13 / 13 (100%)\r\n\r\nTime: 00:00.094, Memory: 30.39 MB\r\n\r\nOK (13 tests, 688 assertions)\r\n```\r\n\r\n**NOTE** I've restricted run to only one test suite, but there are several that raised the same issue.","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5157/timeline","performed_via_github_app":null,"state_reason":"completed"}