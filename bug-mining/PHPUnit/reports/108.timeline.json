[{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/11548236","html_url":"https://github.com/sebastianbergmann/phpunit/issues/749#issuecomment-11548236","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/749","id":11548236,"node_id":"MDEyOklzc3VlQ29tbWVudDExNTQ4MjM2","user":{"login":"edorian","id":247397,"node_id":"MDQ6VXNlcjI0NzM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/247397?v=4","gravatar_id":"","url":"https://api.github.com/users/edorian","html_url":"https://github.com/edorian","followers_url":"https://api.github.com/users/edorian/followers","following_url":"https://api.github.com/users/edorian/following{/other_user}","gists_url":"https://api.github.com/users/edorian/gists{/gist_id}","starred_url":"https://api.github.com/users/edorian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edorian/subscriptions","organizations_url":"https://api.github.com/users/edorian/orgs","repos_url":"https://api.github.com/users/edorian/repos","events_url":"https://api.github.com/users/edorian/events{/privacy}","received_events_url":"https://api.github.com/users/edorian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-12-19T20:59:21Z","updated_at":"2012-12-19T20:59:21Z","body":"The callback is executed twice. I've ran into this issue a couple of times ( See: http://stackoverflow.com/questions/13550914/mock-atleastonce-with-concrete-value-the-rest-not-important/13551464#13551464 ) but I haven't had time to really look into it. It's something I've been meaning to get to for some time so thanks for the bug report :)\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/11548236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"edorian","id":247397,"node_id":"MDQ6VXNlcjI0NzM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/247397?v=4","gravatar_id":"","url":"https://api.github.com/users/edorian","html_url":"https://github.com/edorian","followers_url":"https://api.github.com/users/edorian/followers","following_url":"https://api.github.com/users/edorian/following{/other_user}","gists_url":"https://api.github.com/users/edorian/gists{/gist_id}","starred_url":"https://api.github.com/users/edorian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edorian/subscriptions","organizations_url":"https://api.github.com/users/edorian/orgs","repos_url":"https://api.github.com/users/edorian/repos","events_url":"https://api.github.com/users/edorian/events{/privacy}","received_events_url":"https://api.github.com/users/edorian/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/24815451","html_url":"https://github.com/sebastianbergmann/phpunit/issues/749#issuecomment-24815451","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/749","id":24815451,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODE1NDUx","user":{"login":"elvetemedve","id":596431,"node_id":"MDQ6VXNlcjU5NjQzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/596431?v=4","gravatar_id":"","url":"https://api.github.com/users/elvetemedve","html_url":"https://github.com/elvetemedve","followers_url":"https://api.github.com/users/elvetemedve/followers","following_url":"https://api.github.com/users/elvetemedve/following{/other_user}","gists_url":"https://api.github.com/users/elvetemedve/gists{/gist_id}","starred_url":"https://api.github.com/users/elvetemedve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvetemedve/subscriptions","organizations_url":"https://api.github.com/users/elvetemedve/orgs","repos_url":"https://api.github.com/users/elvetemedve/repos","events_url":"https://api.github.com/users/elvetemedve/events{/privacy}","received_events_url":"https://api.github.com/users/elvetemedve/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-09-20T14:46:10Z","updated_at":"2013-09-20T14:46:10Z","body":"I can confirm this issue using PHPUnit 3.7.22.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/24815451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"elvetemedve","id":596431,"node_id":"MDQ6VXNlcjU5NjQzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/596431?v=4","gravatar_id":"","url":"https://api.github.com/users/elvetemedve","html_url":"https://github.com/elvetemedve","followers_url":"https://api.github.com/users/elvetemedve/followers","following_url":"https://api.github.com/users/elvetemedve/following{/other_user}","gists_url":"https://api.github.com/users/elvetemedve/gists{/gist_id}","starred_url":"https://api.github.com/users/elvetemedve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvetemedve/subscriptions","organizations_url":"https://api.github.com/users/elvetemedve/orgs","repos_url":"https://api.github.com/users/elvetemedve/repos","events_url":"https://api.github.com/users/elvetemedve/events{/privacy}","received_events_url":"https://api.github.com/users/elvetemedve/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"zwilias","id":1038427,"node_id":"MDQ6VXNlcjEwMzg0Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1038427?v=4","gravatar_id":"","url":"https://api.github.com/users/zwilias","html_url":"https://github.com/zwilias","followers_url":"https://api.github.com/users/zwilias/followers","following_url":"https://api.github.com/users/zwilias/following{/other_user}","gists_url":"https://api.github.com/users/zwilias/gists{/gist_id}","starred_url":"https://api.github.com/users/zwilias/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zwilias/subscriptions","organizations_url":"https://api.github.com/users/zwilias/orgs","repos_url":"https://api.github.com/users/zwilias/repos","events_url":"https://api.github.com/users/zwilias/events{/privacy}","received_events_url":"https://api.github.com/users/zwilias/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-10-29T21:28:48Z","updated_at":"2013-10-29T21:28:48Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/142","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/142/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/142/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/142/events","html_url":"https://github.com/sebastianbergmann/phpunit-mock-objects/pull/142","id":21789322,"node_id":"MDExOlB1bGxSZXF1ZXN0OTUwNTE4OA==","number":142,"title":"Invoke MockObject_Matcher_Parameters::verify only once","user":{"login":"zwilias","id":1038427,"node_id":"MDQ6VXNlcjEwMzg0Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1038427?v=4","gravatar_id":"","url":"https://api.github.com/users/zwilias","html_url":"https://github.com/zwilias","followers_url":"https://api.github.com/users/zwilias/followers","following_url":"https://api.github.com/users/zwilias/following{/other_user}","gists_url":"https://api.github.com/users/zwilias/gists{/gist_id}","starred_url":"https://api.github.com/users/zwilias/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zwilias/subscriptions","organizations_url":"https://api.github.com/users/zwilias/orgs","repos_url":"https://api.github.com/users/zwilias/repos","events_url":"https://api.github.com/users/zwilias/events{/privacy}","received_events_url":"https://api.github.com/users/zwilias/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2013-10-29T21:28:48Z","updated_at":"2014-06-14T22:09:30Z","closed_at":"2014-04-22T09:43:17Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":637935,"node_id":"MDEwOlJlcG9zaXRvcnk2Mzc5MzU=","name":"phpunit-mock-objects","full_name":"sebastianbergmann/phpunit-mock-objects","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit-mock-objects","description":"Mock Object library for PHPUnit","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/deployments","created_at":"2010-04-29T10:25:12Z","updated_at":"2025-11-06T09:18:32Z","pushed_at":"2018-10-30T00:10:52Z","git_url":"git://github.com/sebastianbergmann/phpunit-mock-objects.git","ssh_url":"git@github.com:sebastianbergmann/phpunit-mock-objects.git","clone_url":"https://github.com/sebastianbergmann/phpunit-mock-objects.git","svn_url":"https://github.com/sebastianbergmann/phpunit-mock-objects","homepage":"https://phpunit.de/","size":1374,"stargazers_count":4956,"watchers_count":4956,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":154,"mirror_url":null,"archived":true,"disabled":false,"open_issues_count":0,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":154,"open_issues":0,"watchers":4956,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/pulls/142","html_url":"https://github.com/sebastianbergmann/phpunit-mock-objects/pull/142","diff_url":"https://github.com/sebastianbergmann/phpunit-mock-objects/pull/142.diff","patch_url":"https://github.com/sebastianbergmann/phpunit-mock-objects/pull/142.patch","merged_at":null},"body":".. which is generally fine for idempotent matches; but that's no guarantee. Besides, there's no point.\n\nThis is basically in reference to sebastianbergmann/phpunit#749 (callback() assert seems to be called incorrectly).\n\nWhat is happening right now, is that the `verify()` method will throw an exception if the number of parameters in the current invocation is strictly less than the number of parameter constraints we have currently defined. That's all fine and dandy, but the `matches()` method (which also calls the `verify()`) method, disagrees. The `matches()` method, after running `verify()`, will only consider the parameters to 'match' iff the current invocation has strictly less parameters defined as compared to the number of parameter constraints we have. This, of course, makes no sense.\n\nWhat happens then, though, is even more interesting -  `verify()` is called, once again. But since that one already passed, earlier on, we just merrily go on with our business, disregarding that `matches` at any point in time disagreed with `verify`.\n\nSo, to keep the semantics of `matches`, `verify` and the code that's calling them in such rapid succession intact; I propose the following:\n- make `verify()` actually return a boolean, instead of being void, indicating whether verification passes; as it is supposed to\n- make `matches()` return the result of `verify()`\n- leave the somewhat awkward `if (!matches()) verify()` type construct intact - even though `verify` will never be called there, it sorta seems intuitive.\n\nThat way, `matches()` and `verify()` can still be invoked \"standalone\", but they will actually agree with one another.\n","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/142/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/31345808","html_url":"https://github.com/sebastianbergmann/phpunit/issues/749#issuecomment-31345808","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/749","id":31345808,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzQ1ODA4","user":{"login":"mvar","id":1286752,"node_id":"MDQ6VXNlcjEyODY3NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1286752?v=4","gravatar_id":"","url":"https://api.github.com/users/mvar","html_url":"https://github.com/mvar","followers_url":"https://api.github.com/users/mvar/followers","following_url":"https://api.github.com/users/mvar/following{/other_user}","gists_url":"https://api.github.com/users/mvar/gists{/gist_id}","starred_url":"https://api.github.com/users/mvar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvar/subscriptions","organizations_url":"https://api.github.com/users/mvar/orgs","repos_url":"https://api.github.com/users/mvar/repos","events_url":"https://api.github.com/users/mvar/events{/privacy}","received_events_url":"https://api.github.com/users/mvar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-12-30T13:34:50Z","updated_at":"2013-12-30T13:34:50Z","body":"+1\nPHPUnit 3.7.28\nmy callback was called 3 times\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/31345808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvar","id":1286752,"node_id":"MDQ6VXNlcjEyODY3NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1286752?v=4","gravatar_id":"","url":"https://api.github.com/users/mvar","html_url":"https://github.com/mvar","followers_url":"https://api.github.com/users/mvar/followers","following_url":"https://api.github.com/users/mvar/following{/other_user}","gists_url":"https://api.github.com/users/mvar/gists{/gist_id}","starred_url":"https://api.github.com/users/mvar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvar/subscriptions","organizations_url":"https://api.github.com/users/mvar/orgs","repos_url":"https://api.github.com/users/mvar/repos","events_url":"https://api.github.com/users/mvar/events{/privacy}","received_events_url":"https://api.github.com/users/mvar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/41855837","html_url":"https://github.com/sebastianbergmann/phpunit/issues/749#issuecomment-41855837","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/749","id":41855837,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODU1ODM3","user":{"login":"hbandura","id":731692,"node_id":"MDQ6VXNlcjczMTY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/731692?v=4","gravatar_id":"","url":"https://api.github.com/users/hbandura","html_url":"https://github.com/hbandura","followers_url":"https://api.github.com/users/hbandura/followers","following_url":"https://api.github.com/users/hbandura/following{/other_user}","gists_url":"https://api.github.com/users/hbandura/gists{/gist_id}","starred_url":"https://api.github.com/users/hbandura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hbandura/subscriptions","organizations_url":"https://api.github.com/users/hbandura/orgs","repos_url":"https://api.github.com/users/hbandura/repos","events_url":"https://api.github.com/users/hbandura/events{/privacy}","received_events_url":"https://api.github.com/users/hbandura/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-04-30T21:52:51Z","updated_at":"2014-04-30T21:52:51Z","body":"Ran into this bug in 4.0.19 :( called three times\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/41855837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hbandura","id":731692,"node_id":"MDQ6VXNlcjczMTY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/731692?v=4","gravatar_id":"","url":"https://api.github.com/users/hbandura","html_url":"https://github.com/hbandura","followers_url":"https://api.github.com/users/hbandura/followers","following_url":"https://api.github.com/users/hbandura/following{/other_user}","gists_url":"https://api.github.com/users/hbandura/gists{/gist_id}","starred_url":"https://api.github.com/users/hbandura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hbandura/subscriptions","organizations_url":"https://api.github.com/users/hbandura/orgs","repos_url":"https://api.github.com/users/hbandura/repos","events_url":"https://api.github.com/users/hbandura/events{/privacy}","received_events_url":"https://api.github.com/users/hbandura/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/41884145","html_url":"https://github.com/sebastianbergmann/phpunit/issues/749#issuecomment-41884145","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/749","id":41884145,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODg0MTQ1","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-05-01T06:23:56Z","updated_at":"2014-05-01T06:23:56Z","body":"This should have been fixed in https://github.com/sebastianbergmann/phpunit-mock-objects/commit/6b76772e2cd74e326c4909c00d18618cf67ffcb3\n\nPlease note that this should have been reported at https://github.com/sebastianbergmann/phpunit-mock-objects/issues.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/41884145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"spako","id":1162547,"node_id":"MDQ6VXNlcjExNjI1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1162547?v=4","gravatar_id":"","url":"https://api.github.com/users/spako","html_url":"https://github.com/spako","followers_url":"https://api.github.com/users/spako/followers","following_url":"https://api.github.com/users/spako/following{/other_user}","gists_url":"https://api.github.com/users/spako/gists{/gist_id}","starred_url":"https://api.github.com/users/spako/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spako/subscriptions","organizations_url":"https://api.github.com/users/spako/orgs","repos_url":"https://api.github.com/users/spako/repos","events_url":"https://api.github.com/users/spako/events{/privacy}","received_events_url":"https://api.github.com/users/spako/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-30T10:07:14Z","updated_at":"2014-06-30T10:07:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/181","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/181/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/181/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/181/events","html_url":"https://github.com/sebastianbergmann/phpunit-mock-objects/issues/181","id":36784534,"node_id":"MDU6SXNzdWUzNjc4NDUzNA==","number":181,"title":"callback() for parameter called twice","user":{"login":"spako","id":1162547,"node_id":"MDQ6VXNlcjExNjI1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1162547?v=4","gravatar_id":"","url":"https://api.github.com/users/spako","html_url":"https://github.com/spako","followers_url":"https://api.github.com/users/spako/followers","following_url":"https://api.github.com/users/spako/following{/other_user}","gists_url":"https://api.github.com/users/spako/gists{/gist_id}","starred_url":"https://api.github.com/users/spako/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spako/subscriptions","organizations_url":"https://api.github.com/users/spako/orgs","repos_url":"https://api.github.com/users/spako/repos","events_url":"https://api.github.com/users/spako/events{/privacy}","received_events_url":"https://api.github.com/users/spako/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2014-06-30T10:07:14Z","updated_at":"2015-10-02T04:41:16Z","closed_at":"2015-10-02T04:41:14Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":637935,"node_id":"MDEwOlJlcG9zaXRvcnk2Mzc5MzU=","name":"phpunit-mock-objects","full_name":"sebastianbergmann/phpunit-mock-objects","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit-mock-objects","description":"Mock Object library for PHPUnit","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/deployments","created_at":"2010-04-29T10:25:12Z","updated_at":"2025-11-06T09:18:32Z","pushed_at":"2018-10-30T00:10:52Z","git_url":"git://github.com/sebastianbergmann/phpunit-mock-objects.git","ssh_url":"git@github.com:sebastianbergmann/phpunit-mock-objects.git","clone_url":"https://github.com/sebastianbergmann/phpunit-mock-objects.git","svn_url":"https://github.com/sebastianbergmann/phpunit-mock-objects","homepage":"https://phpunit.de/","size":1374,"stargazers_count":4956,"watchers_count":4956,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":154,"mirror_url":null,"archived":true,"disabled":false,"open_issues_count":0,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":154,"open_issues":0,"watchers":4956,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This is related to sebastianbergmann/phpunit#749\n\nWhen a callback is used for an expected parameter it is being verified twice. Once on method invocation and again when the mock class is verified.\n\nThis caused problems for me when the same instance was a parameter for two different methods. When the mock is then verified, the latest parameter version was used my my assertions failed.\n\n`enableArgumentCloning()` did not help.\n\nI implemented a \"quick fix\" that will only allow `PHPUnit_Framework_MockObject_Matcher_Parameters::verify()` to run through once, the second time it is called it will just return `true`. I don't know if this breaks anything else, but it solved my issue.\n","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/issues/181/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/48106409","html_url":"https://github.com/sebastianbergmann/phpunit/issues/749#issuecomment-48106409","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/749","id":48106409,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTA2NDA5","user":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-07-06T08:53:49Z","updated_at":"2014-07-06T08:53:49Z","body":"Closing this in favor of  sebastianbergmann/phpunit-mock-objects#181.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/48106409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":138497735,"node_id":"MDExOkNsb3NlZEV2ZW50MTM4NDk3NzM1","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/138497735","actor":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2014-07-06T08:53:49Z","state_reason":null,"performed_via_github_app":null}]