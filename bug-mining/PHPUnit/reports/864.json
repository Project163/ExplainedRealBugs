{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5956","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5956/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5956/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5956/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5956","id":2535795471,"node_id":"I_kwDOAAbWLc6XJSsP","number":5956,"title":"Deprecation of the `E_STRICT` constant in PHP 8.4","user":{"login":"derrabus","id":1506493,"node_id":"MDQ6VXNlcjE1MDY0OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1506493?v=4","gravatar_id":"","url":"https://api.github.com/users/derrabus","html_url":"https://github.com/derrabus","followers_url":"https://api.github.com/users/derrabus/followers","following_url":"https://api.github.com/users/derrabus/following{/other_user}","gists_url":"https://api.github.com/users/derrabus/gists{/gist_id}","starred_url":"https://api.github.com/users/derrabus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/derrabus/subscriptions","organizations_url":"https://api.github.com/users/derrabus/orgs","repos_url":"https://api.github.com/users/derrabus/repos","events_url":"https://api.github.com/users/derrabus/events{/privacy}","received_events_url":"https://api.github.com/users/derrabus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2638987726,"node_id":"MDU6TGFiZWwyNjM4OTg3NzI2","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/change-in-php-requires-adaptation","name":"type/change-in-php-requires-adaptation","color":"cc0000","default":false,"description":"A change in PHP requires a change so that existing PHPUnit functionality continues to work"},{"id":5111410650,"node_id":"LA_kwDOAAbWLc8AAAABMKnv2g","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/9","name":"version/9","color":"888a85","default":false,"description":"Something affects PHPUnit 9"},{"id":5111411238,"node_id":"LA_kwDOAAbWLc8AAAABMKnyJg","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/10","name":"version/10","color":"888a85","default":false,"description":"Something affects PHPUnit 10"},{"id":5154370240,"node_id":"LA_kwDOAAbWLc8AAAABMzlywA","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/8","name":"version/8","color":"888a85","default":false,"description":"Something affects PHPUnit 8"},{"id":6451629111,"node_id":"LA_kwDOAAbWLc8AAAABgIwMNw","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/11","name":"version/11","color":"888a85","default":false,"description":"Something affects PHPUnit 11"}],"state":"closed","locked":false,"assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":12,"created_at":"2024-09-19T09:28:31Z","updated_at":"2025-04-30T08:35:50Z","closed_at":"2024-09-19T10:35:00Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 9.6.20, but the 8.5 branch seems to be affected too.\r\n| PHP version         | 8.4-dev\r\n| Installation Method | Composer\r\n\r\n#### Summary\r\n\r\nPHP 8.4 triggers a deprecation if we access the `E_STRICT` constant.\r\n\r\nhttps://wiki.php.net/rfc/deprecations_php_8_4#remove_e_strict_error_level_and_deprecate_e_strict_constant\r\n\r\nThat error code is obsolete since PHP 7.0, but some core extensions did still use it in rare cases until PHP 7.4. The deprecation prepares a possible future removal of said constant.\r\n\r\nThe constant is used inside a `switch` block that triggers different behavior depending on the error level. This means that even if no `E_STRICT` errors are triggered, we get a deprecation notice because PHPUnit accesses a deprecated constant for comparison.\r\n\r\nI'd volunteer to work on a fix, but I'm not sure about the way forward. Not handling the `E_STRICT` level at all feels wrong because as long as the level exists, some custom PHP extension could still trigger it. We could just use the plain value of the constant for comparison, assuming that the constant's value will never be changed or repurposed in future PHP releases.\r\n\r\n#### Current behavior\r\n\r\n```\r\nPHP Deprecated:  Constant E_STRICT is deprecated in /path/to/phpunit/src/Util/ErrorHandler.php on line 99\r\n```\r\n\r\n#### How to reproduce\r\n\r\nRun a test that triggers PHPUnit's error handler.\r\n\r\n#### Expected behavior\r\n\r\nNo deprecation is triggered.\r\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5956/timeline","performed_via_github_app":null,"state_reason":"completed"}