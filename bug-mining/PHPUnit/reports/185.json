{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/320","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/320/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/320/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/320/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/320","id":1420422,"node_id":"MDU6SXNzdWUxNDIwNDIy","number":320,"title":"TextUI runner command line options should override configuration file","user":{"login":"jhansche","id":99272,"node_id":"MDQ6VXNlcjk5Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/99272?v=4","gravatar_id":"","url":"https://api.github.com/users/jhansche","html_url":"https://github.com/jhansche","followers_url":"https://api.github.com/users/jhansche/followers","following_url":"https://api.github.com/users/jhansche/following{/other_user}","gists_url":"https://api.github.com/users/jhansche/gists{/gist_id}","starred_url":"https://api.github.com/users/jhansche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhansche/subscriptions","organizations_url":"https://api.github.com/users/jhansche/orgs","repos_url":"https://api.github.com/users/jhansche/repos","events_url":"https://api.github.com/users/jhansche/events{/privacy}","received_events_url":"https://api.github.com/users/jhansche/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2011-08-17T03:45:09Z","updated_at":"2012-07-27T13:25:50Z","closed_at":"2012-07-27T13:25:50Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"``` xml\n<phpunit>\n\n  <groups>\n    <exclude>\n      <group>FlakyTests</group>\n    </exclude>\n  </groups>\n\n  <testsuites />\n</phpunit>\n```\n\nIn this example any test case annotated with `@group FlakyTests` would be ignored when running `phpunit` in the same directory.  However, if I then want to run just the FlakyTests in a separate execution, the common-sense way to attempt that would be:\n\n```\n$ phpunit --group FlakyTests\n```\n\nhowever, that does not execute the FlakyTests group.  Instead, it seems to try to combine both the `--group` (i.e., `<include/>`) and `<exclude/>` (i.e., `--exclude-group`) options, and it ends up running nothing -- it tries to run only the FlakyTests group, but because it's being excluded by the xml file, it refuses to do so, and therefore does not run anything.  The only way then to override that behavior so that you run only the originally-excluded tests is by excluding a different group (doesn't matter if it exists, just something other than the \"FlakyTests\" that we want to run):\n\n```\n$ phpunit --group FlakyTests --exclude-group nonexistent\n```\n\nThe `--exclude-group` is extraneous, and not immediately obvious that it would be required at all (and is only a workaround).  A user would normally think that a command-line option would always override an XML directive, and the thing is, it **does** override the XML, but the problem is that a command-line `--group` _does not_ override an XML `exclude`.\n\nIt's not a huge deal, since it can be worked around, as mentioned above.  But it is a strange requirement.  If the tests are being run in a CI server, it's even easier to configure the job to override the exclusion, or provide a secondary configuration file, or even use an xslt ant task to first strip the exclusion from the configuration file.  I just thought it was a weird behavior.  I would consider something given on the command-line to be the final input that nothing else should be able to override  E.g., I would consider the opposite to be just as strange:  `<include>EasyTests</include>` exists in the XML file, but `--exclude-group EasyTests` given on command line.  In other words, it seems obvious to me as a user that whatever I pass on the command line should always override any conflicting statements in the XML file.\n","closed_by":{"login":"edorian","id":247397,"node_id":"MDQ6VXNlcjI0NzM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/247397?v=4","gravatar_id":"","url":"https://api.github.com/users/edorian","html_url":"https://github.com/edorian","followers_url":"https://api.github.com/users/edorian/followers","following_url":"https://api.github.com/users/edorian/following{/other_user}","gists_url":"https://api.github.com/users/edorian/gists{/gist_id}","starred_url":"https://api.github.com/users/edorian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edorian/subscriptions","organizations_url":"https://api.github.com/users/edorian/orgs","repos_url":"https://api.github.com/users/edorian/repos","events_url":"https://api.github.com/users/edorian/events{/privacy}","received_events_url":"https://api.github.com/users/edorian/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/320/timeline","performed_via_github_app":null,"state_reason":"completed"}