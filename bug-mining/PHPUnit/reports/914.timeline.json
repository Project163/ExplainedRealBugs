[{"id":15994365406,"node_id":"LE_lADOAAbWLc6mzV8ezwAAAAO5VqXe","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/15994365406","actor":{"login":"yurii-stickee-2023","id":126063507,"node_id":"U_kgDOB4OTkw","avatar_url":"https://avatars.githubusercontent.com/u/126063507?v=4","gravatar_id":"","url":"https://api.github.com/users/yurii-stickee-2023","html_url":"https://github.com/yurii-stickee-2023","followers_url":"https://api.github.com/users/yurii-stickee-2023/followers","following_url":"https://api.github.com/users/yurii-stickee-2023/following{/other_user}","gists_url":"https://api.github.com/users/yurii-stickee-2023/gists{/gist_id}","starred_url":"https://api.github.com/users/yurii-stickee-2023/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurii-stickee-2023/subscriptions","organizations_url":"https://api.github.com/users/yurii-stickee-2023/orgs","repos_url":"https://api.github.com/users/yurii-stickee-2023/repos","events_url":"https://api.github.com/users/yurii-stickee-2023/events{/privacy}","received_events_url":"https://api.github.com/users/yurii-stickee-2023/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-20T07:56:17Z","label":{"name":"type/bug","color":"cc0000"},"performed_via_github_app":null},{"id":15994386265,"node_id":"LE_lADOAAbWLc6mzV8ezwAAAAO5VvdZ","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/15994386265","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-20T07:57:43Z","label":{"name":"feature/test-runner","color":"e9b96e"},"performed_via_github_app":null},{"id":15994386274,"node_id":"LE_lADOAAbWLc6mzV8ezwAAAAO5Vvdi","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/15994386274","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-20T07:57:43Z","label":{"name":"feature/process-isolation","color":"e9b96e"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2603815023","html_url":"https://github.com/sebastianbergmann/phpunit/issues/6103#issuecomment-2603815023","issue_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6103","id":2603815023,"node_id":"IC_kwDOAAbWLc6bMxBv","user":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-21T07:05:46Z","updated_at":"2025-01-21T07:05:46Z","body":"As far as I can see, the test is only executed once, but its output is printed twice (which is a bug, of course):\n\n#### `Issue6103Test.php`\n```php\n<?php declare(strict_types=1);\nnamespace PHPUnit\\TestFixture\\Issue6103;\n\nuse PHPUnit\\Framework\\Attributes\\RunInSeparateProcess;\nuse PHPUnit\\Framework\\TestCase;\n\nfinal class Issue6103Test extends TestCase\n{\n    #[RunInSeparateProcess]\n    public function testOne(): void\n    {\n        print '*';\n\n        file_put_contents('/tmp/debug', '*', FILE_APPEND | LOCK_EX);\n\n        $this->assertTrue(true);\n    }\n}\n```\n#### `phpunit --debug Issue6103Test.php`\n```\n❯ rm /tmp/debug\n```\n```\n❯ phpunit --debug Issue6103Test.php\nPHPUnit Started (PHPUnit 11.5.3-8-g09ce2ee174 using PHP 8.4.3 (cli) on Linux)\nTest Runner Configured\nEvent Facade Sealed\nTest Suite Loaded (1 test)\nTest Runner Started\nTest Suite Sorted\nTest Runner Execution Started (1 test)\nTest Suite Started (PHPUnit\\TestFixture\\Issue6103\\Issue6103Test, 1 test)\nChild Process Started\nTest Preparation Started (PHPUnit\\TestFixture\\Issue6103\\Issue6103Test::testOne)\nTest Prepared (PHPUnit\\TestFixture\\Issue6103\\Issue6103Test::testOne)\nTest Passed (PHPUnit\\TestFixture\\Issue6103\\Issue6103Test::testOne)\nTest Printed Unexpected Output\n*\nTest Finished (PHPUnit\\TestFixture\\Issue6103\\Issue6103Test::testOne)\nChild Process Finished\n*Test Suite Finished (PHPUnit\\TestFixture\\Issue6103\\Issue6103Test, 1 test)\nTest Runner Execution Finished\nTest Runner Finished\nPHPUnit Finished (Shell Exit Code: 0)\n```\n```\n❯ cat /tmp/debug\n*\n```\n\nIf the test were executed twice then `/tmp/debug` would contain `**` instead of `*`.\n\n#### `phpunit Issue6103Test.php`\n```\nPHPUnit 11.5.3-8-g09ce2ee174 by Sebastian Bergmann and contributors.\n\nRuntime:       PHP 8.4.3\n\n*.                                                                   1 / 1 (100%)*\n\nTime: 00:00.065, Memory: 8.00 MB\n\nOK (1 test, 1 assertion)\n```\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments/2603815023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16008997597,"node_id":"AE_lADOAAbWLc6mzV8ezwAAAAO6Nerd","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/16008997597","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2025-01-21T07:07:51Z","assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":16008999040,"node_id":"LE_lADOAAbWLc6mzV8ezwAAAAO6NfCA","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/16008999040","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-21T07:08:01Z","label":{"name":"version/10","color":"888a85"},"performed_via_github_app":null},{"id":16008999044,"node_id":"LE_lADOAAbWLc6mzV8ezwAAAAO6NfCE","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/16008999044","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-21T07:08:01Z","label":{"name":"version/11","color":"888a85"},"performed_via_github_app":null},{"id":16009001477,"node_id":"RTE_lADOAAbWLc6mzV8ezwAAAAO6NfoF","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/16009001477","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2025-01-21T07:08:17Z","rename":{"from":"test with runInSeparateProcess is executed twice","to":"Output from test run in separate process is printed twice"},"performed_via_github_app":null},{"id":16009110661,"node_id":"REFE_lADOAAbWLc6mzV8ezwAAAAO6N6SF","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/16009110661","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fbffae79beb6aabd6aaf58970b953a3c0f3b3ea2","commit_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits/fbffae79beb6aabd6aaf58970b953a3c0f3b3ea2","created_at":"2025-01-21T07:20:29Z","performed_via_github_app":null},{"id":16009110734,"node_id":"CE_lADOAAbWLc6mzV8ezwAAAAO6N6TO","url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events/16009110734","actor":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"fbffae79beb6aabd6aaf58970b953a3c0f3b3ea2","commit_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits/fbffae79beb6aabd6aaf58970b953a3c0f3b3ea2","created_at":"2025-01-21T07:20:29Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"yurii-stickee-2023","id":126063507,"node_id":"U_kgDOB4OTkw","avatar_url":"https://avatars.githubusercontent.com/u/126063507?v=4","gravatar_id":"","url":"https://api.github.com/users/yurii-stickee-2023","html_url":"https://github.com/yurii-stickee-2023","followers_url":"https://api.github.com/users/yurii-stickee-2023/followers","following_url":"https://api.github.com/users/yurii-stickee-2023/following{/other_user}","gists_url":"https://api.github.com/users/yurii-stickee-2023/gists{/gist_id}","starred_url":"https://api.github.com/users/yurii-stickee-2023/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurii-stickee-2023/subscriptions","organizations_url":"https://api.github.com/users/yurii-stickee-2023/orgs","repos_url":"https://api.github.com/users/yurii-stickee-2023/repos","events_url":"https://api.github.com/users/yurii-stickee-2023/events{/privacy}","received_events_url":"https://api.github.com/users/yurii-stickee-2023/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-21T12:48:23Z","updated_at":"2025-01-21T12:48:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6105","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6105/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6105/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6105/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/6105","id":2801756861,"node_id":"I_kwDOAAbWLc6m_2q9","number":6105,"title":"missing sent headers when 'RunInSeparateProcess' is used","user":{"login":"yurii-stickee-2023","id":126063507,"node_id":"U_kgDOB4OTkw","avatar_url":"https://avatars.githubusercontent.com/u/126063507?v=4","gravatar_id":"","url":"https://api.github.com/users/yurii-stickee-2023","html_url":"https://github.com/yurii-stickee-2023","followers_url":"https://api.github.com/users/yurii-stickee-2023/followers","following_url":"https://api.github.com/users/yurii-stickee-2023/following{/other_user}","gists_url":"https://api.github.com/users/yurii-stickee-2023/gists{/gist_id}","starred_url":"https://api.github.com/users/yurii-stickee-2023/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurii-stickee-2023/subscriptions","organizations_url":"https://api.github.com/users/yurii-stickee-2023/orgs","repos_url":"https://api.github.com/users/yurii-stickee-2023/repos","events_url":"https://api.github.com/users/yurii-stickee-2023/events{/privacy}","received_events_url":"https://api.github.com/users/yurii-stickee-2023/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":1841128667,"node_id":"MDU6TGFiZWwxODQxMTI4NjY3","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/process-isolation","name":"feature/process-isolation","color":"e9b96e","default":false,"description":"Issues related to running tests in separate PHP processes"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2025-01-21T12:48:22Z","updated_at":"2025-09-11T09:17:24Z","closed_at":"2025-09-11T09:17:24Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":448045,"node_id":"MDEwOlJlcG9zaXRvcnk0NDgwNDU=","name":"phpunit","full_name":"sebastianbergmann/phpunit","private":false,"owner":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sebastianbergmann/phpunit","description":"The PHP Unit Testing framework.","fork":false,"url":"https://api.github.com/repos/sebastianbergmann/phpunit","forks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/forks","keys_url":"https://api.github.com/repos/sebastianbergmann/phpunit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sebastianbergmann/phpunit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sebastianbergmann/phpunit/teams","hooks_url":"https://api.github.com/repos/sebastianbergmann/phpunit/hooks","issue_events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/events{/number}","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/events","assignees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/assignees{/user}","branches_url":"https://api.github.com/repos/sebastianbergmann/phpunit/branches{/branch}","tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/tags","blobs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sebastianbergmann/phpunit/statuses/{sha}","languages_url":"https://api.github.com/repos/sebastianbergmann/phpunit/languages","stargazers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/stargazers","contributors_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contributors","subscribers_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscribers","subscription_url":"https://api.github.com/repos/sebastianbergmann/phpunit/subscription","commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sebastianbergmann/phpunit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sebastianbergmann/phpunit/contents/{+path}","compare_url":"https://api.github.com/repos/sebastianbergmann/phpunit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sebastianbergmann/phpunit/merges","archive_url":"https://api.github.com/repos/sebastianbergmann/phpunit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sebastianbergmann/phpunit/downloads","issues_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues{/number}","pulls_url":"https://api.github.com/repos/sebastianbergmann/phpunit/pulls{/number}","milestones_url":"https://api.github.com/repos/sebastianbergmann/phpunit/milestones{/number}","notifications_url":"https://api.github.com/repos/sebastianbergmann/phpunit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels{/name}","releases_url":"https://api.github.com/repos/sebastianbergmann/phpunit/releases{/id}","deployments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/deployments","created_at":"2009-12-24T13:16:23Z","updated_at":"2025-11-09T22:28:27Z","pushed_at":"2025-11-08T12:36:44Z","git_url":"git://github.com/sebastianbergmann/phpunit.git","ssh_url":"git@github.com:sebastianbergmann/phpunit.git","clone_url":"https://github.com/sebastianbergmann/phpunit.git","svn_url":"https://github.com/sebastianbergmann/phpunit","homepage":"https://phpunit.de/","size":204756,"stargazers_count":19957,"watchers_count":19957,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2223,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":105,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["php","phpunit","testing-tools"],"visibility":"public","forks":2223,"open_issues":105,"watchers":19957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\n- Please do not report a bug for a version of PHPUnit that is no longer in Bugfix Support. A list of currently supported versions of PHPUnit is available at https://phpunit.de/supported-versions.html.\n- Please do not report an issue if you are using a version of PHP that is not supported by the version of PHPUnit you are using. A list that shows which version of PHP is supported by which version of PHPUnit is available at https://phpunit.de/supported-versions.html.\n- Please do not report an issue if you are not using PHPUnit directly, but rather a third-party wrapper around it.\n- Please do not report an issue if you are using a third-party extension such as alternative output printers.\n- Please do not report an issue for API changes in internal code (see https://phpunit.de/backward-compatibility.html#internal-code).\n- Please fill in this template according to your issue.\n- Please keep the table shown below at the top of your issue.\n- Please include the output of \"composer info | sort\" if you installed PHPUnit using Composer.\n- Please post code as text (using proper markup). Do not post screenshots of code.\n- Please make sure that you have configured your PHP interpreter like so: `error_reporting=-1`, `zend.assertions=1`.\n- Please remove this comment before submitting your issue.\n-->\n\n| Q                   | A\n| --------------------| ---------------\n| PHPUnit version     | 11.5.3\n| PHP version         | 8.3.16\n| Installation Method | Composer / PHAR\n\n#### Summary\n\nGood day, @sebastianbergmann \n\nThank you for fixing this issue https://github.com/sebastianbergmann/phpunit/issues/6103\nYou have said there that it was executing for you once and it was just the print issue.\nThe output was fixed there and that's great, but the problem with headers still exists for me.\n\nI have very small understanding of PHPUnit internals, so I will try my best to explain the problem.\n\nI am using Xdebug for testing headers (specifically `xdebug_get_headers()` ), and for some reason they are not properly sent (or not reported by xDebug) with `RunInSeparateProcess`  while using PHPUnit 11.x (PHPUnit 10.x is working fine! Very strange situation, considering that it printed output twice as 11.x did)\n\nOriginally I thought that it somehow run test twice with headers and without, but after your output fix I am curious what is happening here now.\n\n\n#### Current behavior\n\n`xdebug_get_headers()` return empty, while sent headers are expected to be there.\n\nMy PHP setup is next\n```\nphp -v\nPHP 8.3.16 (cli) (built: Jan 19 2025 13:29:55) (NTS)\nCopyright (c) The PHP Group\nZend Engine v4.3.16, Copyright (c) Zend Technologies\n    with Zend OPcache v8.3.16, Copyright (c), by Zend Technologies\n    with Xdebug v3.4.0, Copyright (c) 2002-2024, by Derick Rethans\n```\n\n#### How to reproduce\n\n0. Install xDebug and test that it works. Make some file like `1.php`\n```\n<?php\nheader( \"X-Test\", \"Testing\" );\nsetcookie( \"TestCookie\", \"test-value\" );\nvar_dump( xdebug_get_headers() );\n```\nand run it as `php 1.php`. It should output\n```\n$ php 1.php \n/var/www/test-phpunit/1.php:4:\narray(2) {\n  [0] =>\n  string(6) \"X-Test\"\n  [1] =>\n  string(33) \"Set-Cookie: TestCookie=test-value\"\n}\n```\n*I took example from https://xdebug.org/docs/all_functions#xdebug_get_headers*\n1. create composer project with `\"minimum-stability\": \"dev\"`\n2. create test case `tests/TestAnnotation4.php`\n```\n<?php\n\n#[\\PHPUnit\\Framework\\Attributes\\CoversNothing]\nclass TestAnnotation4 extends \\PHPUnit\\Framework\\TestCase\n{\n    public static int $calls = 0;\n\n    public function test_1()\n    {\n        $this->assertTrue(true);\n    }\n\n    #[\\PHPUnit\\Framework\\Attributes\\RunInSeparateProcess]\n    public function test_case_2_check()\n    {\n        var_dump(++self::$calls);\n\n        ob_start();\n        header(\"X-Test\", \"Testing\");\n        echo 'asd';\n        $content = ob_get_clean();\n\n        $this->assertSame('asd', $content);\n        $this->assertSame(['X-Test'], xdebug_get_headers());\n    }\n}\n```\n3. require PHPUnit as `composer require phpunit/phpunit:11.5.3 -W`\n2. run test case as `./vendor/bin/phpunit tests/TestAnnotation4.php`\n3. See output with failed test\n```\n ./vendor/bin/phpunit tests/TestAnnotation4.php\nPHPUnit 11.5.3 by Sebastian Bergmann and contributors.\n\nRuntime:       PHP 8.3.16\n\n.int(1)\nF                                                                  2 / 2 (100%)int(1)\n\n\nTime: 00:00.059, Memory: 8.00 MB\n\nThere was 1 failure:\n\n1) TestAnnotation4::test_case_2_check\nFailed asserting that two arrays are identical.\n--- Expected\n+++ Actual\n@@ @@\n-Array &0 [\n-    0 => 'X-Test',\n-]\n+Array &0 []\n\n/var/www/test-phpunit/tests/TestAnnotation4.php:26\n\nFAILURES!\nTests: 2, Assertions: 3, Failures: 1, PHPUnit Deprecations: 2.\n```\n**NOTE! If you run it with the fix from https://github.com/sebastianbergmann/phpunit/issues/6103 you will see that output is fixed (it outputs int(1) once), but the issue with headers is still there.**\n```\ncomposer require phpunit/phpunit:11.5.x-dev -W\n\n ./vendor/bin/phpunit tests/TestAnnotation4.php\n\nPHPUnit 11.5.3 by Sebastian Bergmann and contributors.\n\nRuntime:       PHP 8.3.16\n\n.int(1)\nF                                                                  2 / 2 (100%)\n\nTime: 00:00.059, Memory: 8.00 MB\n\nThere was 1 failure:\n\n1) TestAnnotation4::test_case_2_check\nFailed asserting that two arrays are identical.\n--- Expected\n+++ Actual\n@@ @@\n-Array &0 [\n-    0 => 'X-Test',\n-]\n+Array &0 []\n\n/var/www/test-phpunit/tests/TestAnnotation4.php:26\n\nFAILURES!\nTests: 2, Assertions: 3, Failures: 1, PHPUnit Deprecations: 2.\n```\n\n\n#### Expected behavior\n\nThe expected behavior is that `xdebug_get_headers()` returns sent headers and not empty array.     \nFor example, in PHPUnit 10.x it works as expected and returns sent headers\n```\ncomposer require phpunit/phpunit:10.5 -W\n\n./vendor/bin/phpunit tests/TestAnnotation4.php\n\nPHPUnit 10.5.0 by Sebastian Bergmann and contributors.\n\nRuntime:       PHP 8.3.16\n\n./var/www/test-phpunit/tests/TestAnnotation4.php:18:\nint(1)\n.                                                                  2 / 2 (100%)/var/www/test-phpunit/tests/TestAnnotation4.php:18:\nint(1)\n\n\nTime: 00:00.059, Memory: 8.00 MB\n\nOK (2 tests, 3 assertions)\n```\nthat is what I expected before. It works correctly in PHPUnit 9.x with annotations too.\n\n\nBest regards","reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6105/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]