{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5205","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5205/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5205/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5205/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/5205","id":1588135839,"node_id":"I_kwDOAAbWLc5eqQef","number":5205,"title":"Wrong default value for optional parameter of PHPUnit\\Util\\Test::parseTestMethodAnnotations() causes ReflectionException","user":{"login":"vemod","id":4331256,"node_id":"MDQ6VXNlcjQzMzEyNTY=","avatar_url":"https://avatars.githubusercontent.com/u/4331256?v=4","gravatar_id":"","url":"https://api.github.com/users/vemod","html_url":"https://github.com/vemod","followers_url":"https://api.github.com/users/vemod/followers","following_url":"https://api.github.com/users/vemod/following{/other_user}","gists_url":"https://api.github.com/users/vemod/gists{/gist_id}","starred_url":"https://api.github.com/users/vemod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vemod/subscriptions","organizations_url":"https://api.github.com/users/vemod/orgs","repos_url":"https://api.github.com/users/vemod/repos","events_url":"https://api.github.com/users/vemod/events{/privacy}","received_events_url":"https://api.github.com/users/vemod/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44001,"node_id":"MDU6TGFiZWw0NDAwMQ==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/bug","name":"type/bug","color":"cc0000","default":false,"description":"Something is broken"},{"id":5111410650,"node_id":"LA_kwDOAAbWLc8AAAABMKnv2g","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/version/9","name":"version/9","color":"888a85","default":false,"description":"Something affects PHPUnit 9"}],"state":"closed","locked":false,"assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-02-16T18:01:37Z","updated_at":"2023-02-28T06:44:42Z","closed_at":"2023-02-28T06:44:42Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\r\n| --------------------| ---------------\r\n| PHPUnit version     | 9.6.3\r\n| PHP version         | 7.4\r\n| Installation Method | PHAR\r\n\r\n#### Summary\r\n\r\nA lot of `ReflectionException` messages in the test output when using testdox. \r\n`prettifyTestClass($className = 'MyTest')` should not throw `ReflectionException`\r\n\r\n#### Current behavior\r\n\r\nWhen xdebug is active bunch of noise due to not properly handled ReflectionExceptions. \r\nThis issue exists since ages: see https://github.com/sebastianbergmann/phpunit/issues/4379\r\n\r\n#### How to reproduce\r\n```\r\ncat > MyTest.php <<FILE\r\n<?php\r\n\r\nclass MyTest extends \\PHPUnit\\Framework\\TestCase {\r\n\r\n  public function testFoo(): void {\r\n    \\$this->assertTrue(true);\r\n  }\r\n}\r\nFILE\r\n```\r\n```\r\nphp /tmp/phpunit.phar --testdox  MyTest.php\r\n\r\nPHP ReflectionException:  Method suite does not exist in phar:///tmp/phpunit.phar/phpunit/Runner/BaseTestRunner.php on line 100\r\nPHP Stack trace:\r\nPHP   1. {main}() /tmp/phpunit.phar:0\r\nPHP   2. PHPUnit\\TextUI\\Command::main($exit = *uninitialized*) /tmp/phpunit.phar:2305\r\nPHP   3. PHPUnit\\TextUI\\Command->run($argv = [0 => '/tmp/phpunit.phar', 1 => '--testdox', 2 => 'MyTest.php'], $exit = TRUE) phar:///tmp/phpunit.phar/phpunit/TextUI/Command.php:94\r\nPHP   4. PHPUnit\\Runner\\BaseTestRunner->getTest($suiteClassFile = '/tmp/MyTest.php', $suffixes = [0 => 'Test.php', 1 => '.phpt']) phar:///tmp/phpunit.phar/phpunit/TextUI/Command.php:109\r\nPHP   5. ReflectionClass->getMethod($name = 'suite') phar:///tmp/phpunit.phar/phpunit/Runner/BaseTestRunner.php:100\r\nPHPUnit 9.6.3 by Sebastian Bergmann and contributors.\r\n\r\nPHP ReflectionException:  Method MyTest::() does not exist in phar:///tmp/phpunit.phar/phpunit/Util/Annotation/Registry.php on line 70\r\nPHP Stack trace:\r\nPHP   1. {main}() /tmp/phpunit.phar:0\r\nPHP   2. PHPUnit\\TextUI\\Command::main($exit = *uninitialized*) /tmp/phpunit.phar:2305\r\nPHP   3. PHPUnit\\TextUI\\Command->run($argv = [0 => '/tmp/phpunit.phar', 1 => '--testdox', 2 => 'MyTest.php'], $exit = TRUE) phar:///tmp/phpunit.phar/phpunit/TextUI/Command.php:94\r\n...\r\nPHP  13. PHPUnit\\Util\\TestDox\\NamePrettifier->prettifyTestClass($className = 'MyTest') phar:///tmp/phpunit.phar/phpunit/Util/TestDox/CliTestDoxPrinter.php:83\r\nPHP  14. PHPUnit\\Util\\Test::parseTestMethodAnnotations($className = 'MyTest', $methodName = *uninitialized*) phar:///tmp/phpunit.phar/phpunit/Util/TestDox/NamePrettifier.php:76\r\nPHP  15. PHPUnit\\Util\\Annotation\\Registry->forMethod($classInHierarchy = 'MyTest', $method = '') phar:///tmp/phpunit.phar/phpunit/Util/Test.php:279\r\nPHP  16. ReflectionMethod->__construct($class_or_method = 'MyTest', $name = '') phar:///tmp/phpunit.phar/phpunit/Util/Annotation/Registry.php:70\r\n\r\n\r\nMy\r\nâœ”\r\n\r\nTime: 00:00.003, Memory: 10.00 MB\r\n\r\nOK (1 test, 1 assertion)\r\n```\r\n\r\n#### Expected behavior\r\n\r\nNo exceptions in the output if nothing is wrong with the code. \r\n\r\nTestdox processors should either catch exceptions not expose them, or let the developer know what is wrong with the code. Throwing exception when some generated method doesn't exist doesn't help anyone. \r\n\r\n```\r\nPHP  13. PHPUnit\\Util\\TestDox\\NamePrettifier->prettifyTestClass($className = 'MyTest') \r\n```\r\nshould not throw `ReflectionException`","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/5205/timeline","performed_via_github_app":null,"state_reason":"completed"}