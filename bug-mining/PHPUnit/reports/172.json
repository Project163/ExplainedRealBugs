{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/443","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/443/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/443/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/443/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/443","id":2587037,"node_id":"MDU6SXNzdWUyNTg3MDM3","number":443,"title":"Output buffering is swallowed in JSON log","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2011-12-17T01:50:32Z","updated_at":"2011-12-21T03:39:45Z","closed_at":"2011-12-20T12:11:19Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Somewhat related to https://github.com/sebastianbergmann/phpunit/issues/411 -\n\nThe following code:\n\n```\n<?php\n\nclass PUTest extends PHPUnit_Framework_TestCase {\n    public function test_this() {\n        $key = 'test';\n        $value = 'value';\n        print_r('some stuff');\n        $this->assertEquals($key, $value, 'test_this() failed!');\n    }\n}\n\n?>\n```\n\nwhen used in conjunction with PHPUnit_Util_Log_JSON (PHPUnit 3.6.4), returns the following:\n\n```\nstring(1431) \"{\"event\":\"suiteStart\",\"suite\":\"\",\"tests\":1}{\"event\":\"suiteStart\",\"suite\":\"PUTest\",\"tests\":1}{\"event\":\"testStart\",\"suite\":\"PUTest\",\"test\":\"PUTest::test_this\"}{\"event\":\"test\",\"suite\":\"PUTest\",\"test\":\"PUTest::test_this\",\"status\":\"fail\",\"time\":0.0033881664276123,\"trace\":[{\"file\":\"\\/srv\\/http\\/pu\\/tests\\/PUTest.php\",\"line\":8,\"function\":\"assertEquals\",\"class\":\"PHPUnit_Framework_Assert\",\"type\":\"::\",\"args\":[\"test\",\"value\",\"test_this() failed!\"]},{\"file\":\"\\/srv\\/http\\/pu\\/lib\\/VPU.php\",\"line\":743,\"function\":\"run\",\"class\":\"PHPUnit_Framework_TestSuite\",\"type\":\"->\",\"args\":[{}]},{\"file\":\"\\/srv\\/http\\/pu\\/index.php\",\"line\":148,\"function\":\"run\",\"class\":\"VPU\",\"type\":\"->\",\"args\":[[\"\\/srv\\/http\\/pu\\/tests\\/PUTest.php\",\"\"]]}],\"message\":\"test_this() failed!\\nFailed asserting that two strings are equal.\"}\" \n```\n\nPHPUnit 3.5.5 returns the following:\n\n```\nstring(1191) \"{\"event\":\"suiteStart\",\"suite\":\"\",\"tests\":1}{\"event\":\"suiteStart\",\"suite\":\"PUTest\",\"tests\":1}{\"event\":\"testStart\",\"suite\":\"PUTest\",\"test\":\"PUTest::test_this\"}some stuff{\"event\":\"test\",\"suite\":\"PUTest\",\"test\":\"PUTest::test_this\",\"status\":\"fail\",\"time\":0.041908025741577,\"trace\":[{\"file\":\"\\/srv\\/http\\/pu\\/lib\\/VPU.php\",\"line\":741,\"function\":\"run\",\"class\":\"PHPUnit_Framework_TestSuite\",\"type\":\"->\",\"args\":[{}]},{\"file\":\"\\/srv\\/http\\/pu\\/index.php\",\"line\":148,\"function\":\"run\",\"class\":\"VPU\",\"type\":\"->\",\"args\":[[\"\\/srv\\/http\\/pu\\/tests\\/PUTest.php\",\"\"]]}],\"message\":\"test_this() failed!\\nFailed asserting that <string:value> is equal to <string:test>.\\ntest_this() failed!\"}\"\n```\n\n(Note how \"some stuff\" is wedged in between the json.)\n\nIt would be great if that functionality could be restored.  If not, could the output buffering somehow be included in one of the js objects?\n\nThanks!\n","closed_by":{"login":"edorian","id":247397,"node_id":"MDQ6VXNlcjI0NzM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/247397?v=4","gravatar_id":"","url":"https://api.github.com/users/edorian","html_url":"https://github.com/edorian","followers_url":"https://api.github.com/users/edorian/followers","following_url":"https://api.github.com/users/edorian/following{/other_user}","gists_url":"https://api.github.com/users/edorian/gists{/gist_id}","starred_url":"https://api.github.com/users/edorian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edorian/subscriptions","organizations_url":"https://api.github.com/users/edorian/orgs","repos_url":"https://api.github.com/users/edorian/repos","events_url":"https://api.github.com/users/edorian/events{/privacy}","received_events_url":"https://api.github.com/users/edorian/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/443/timeline","performed_via_github_app":null,"state_reason":"completed"}