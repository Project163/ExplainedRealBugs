{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/159","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/159/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/159/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/159/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/159","id":591362,"node_id":"MDU6SXNzdWU1OTEzNjI=","number":159,"title":"PHPUnit code coverage does not generate the clover.xml file (3.5.10/1.0.3) - 2","user":{"login":"Jean007","id":611291,"node_id":"MDQ6VXNlcjYxMTI5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/611291?v=4","gravatar_id":"","url":"https://api.github.com/users/Jean007","html_url":"https://github.com/Jean007","followers_url":"https://api.github.com/users/Jean007/followers","following_url":"https://api.github.com/users/Jean007/following{/other_user}","gists_url":"https://api.github.com/users/Jean007/gists{/gist_id}","starred_url":"https://api.github.com/users/Jean007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jean007/subscriptions","organizations_url":"https://api.github.com/users/Jean007/orgs","repos_url":"https://api.github.com/users/Jean007/repos","events_url":"https://api.github.com/users/Jean007/events{/privacy}","received_events_url":"https://api.github.com/users/Jean007/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2011-02-11T08:36:19Z","updated_at":"2011-11-09T08:51:36Z","closed_at":"2011-11-09T08:51:36Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have selected the comment and close button instead of comment button\n\nWe run this test as root. The content of the Php error log is :\n\n[11-Feb-2011 10:11:15] PHP Fatal error:  Class 'BaseIautsFormFilter' not found in /home/intranet/histoComptaAuteur/lib/filter/doctrine/IautsFormFilter.class.php on line 12\n\nThis trace is written only when PHPUnit executes the code coverage.\n\nIn the following, the log test execution :\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<testsuites>\n  <testsuite name=\"\" tests=\"1\" assertions=\"4\" failures=\"0\" errors=\"0\" time=\"0.737962\">\n    <testsuite name=\"Unit Tests\" tests=\"0\" assertions=\"0\" failures=\"0\" errors=\"0\" time=\"0.000000\"/>\n    <testsuite name=\"Functional Frontend Tests\" tests=\"1\" assertions=\"4\" failures=\"0\" errors=\"0\" time=\"0.737962\">\n      <testsuite name=\"selectAuteurTest\" file=\"/home/intranet/histoComptaAuteur/test/phpunit/functional/utilisateur/selectAuteurActionsTest.php\" tests=\"1\" assertions=\"4\" failures=\"0\" errors=\"0\" time=\"0.737962\">\n        <testcase name=\"testIndex\" class=\"selectAuteurTest\" file=\"/home/intranet/histoComptaAuteur/test/phpunit/functional/utilisateur/selectAuteurActionsTest.php\" line=\"17\" assertions=\"4\" time=\"0.737962\"/>\n      </testsuite>\n    </testsuite>\n    <testsuite name=\"Functional Backend Tests\" tests=\"0\" assertions=\"0\" failures=\"0\" errors=\"0\" time=\"0.000000\"/>\n  </testsuite>\n</testsuites>\n\n---\n\nFor the continuous integration of our project in PHP, it is necessary to generate the clover.xml file . But with the  version 3.5.10 of PHPUnit, it is impossible. You will find below the configuration files, test and commands executed.\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit\n  colors=\"true\"\n  verbose=\"true\"\n  convertErrorsToExceptions=\"true\"\n  convertNoticesToExceptions=\"true\"\n  convertWarningsToExceptions=\"true\"\n  stopOnFailure=\"false\"\n  syntaxCheck=\"true\"\n  processIsolation=\"true\">\n\n  <testsuites>\n    <testsuite name=\"Unit Tests\">\n      <directory>test/phpunit/unit</directory>\n    </testsuite>\n     <testsuite name=\"Functional Frontend Tests\">\n       <directory>test/phpunit/functional/utilisateur</directory>\n    </testsuite>\n     <testsuite name=\"Functional Backend Tests\">\n       <directory>test/phpunit/functional/backend</directory>\n    </testsuite>\n  </testsuites>\n\n  <filter>\n    <whitelist>\n      <directory suffix=\".php\">lib</directory>\n      <directory suffix=\".php\">apps</directory>\n      <exclude>\n        <directory>cache</directory>\n        <directory>log</directory>\n        <directory>test/phpunit/bootstrap</directory>\n      </exclude>\n    </whitelist>\n  </filter>\n</phpunit>\n\nFor this test, we have only one file test :\n\n<?php\n\nrequire_once dirname(**FILE**).'/../../bootstrap/functional.php';\nrequire_once dirname(**FILE**).'/../../../../apps/utilisateur/modules/selectAuteur/actions/actions.class.php';\n\nclass selectAuteurTest extends sfPHPUnitBaseFunctionalTestCase\n{\n\n  protected function getApplication()\n  {\n    return 'utilisateur';\n  }\n\n /**\n- @covers     SelectAuteurActions::executeIndex\n  */\n  public function testIndex()\n  {\n    $this->getBrowser()->\n      get('/selectAuteur/index')->\n  \n  ```\n  with('request')->begin()->\n    isParameter('module', 'selectAuteur')->\n    isParameter('action', 'index')->\n  end()->\n  \n  with('response')->begin()->\n    isStatusCode(200)->\n    checkElement('body', '!/This is a temporary page/')->\n  end();\n  ```\n  \n  }\n  }\n\nThe command line, we have run and the trace console :\n\nphpunit --verbose  --coverage-html /tmp/PHPUnit  --coverage-clover /home/mavenProjets/intranet/histoComptaAuteur/build/logs/phpunit.coverage.xml --log-junit /home/mavenProjets/intranet/histoComptaAuteur/build/logs/phpunit.xml\n\nPHPUnit 3.5.10 by Sebastian Bergmann.\n# COMMENT: get /selectAuteur/index.\n\nTime: 2 seconds, Memory: 10.50Mb\n\nOK (1 test, 4 assertions)\n\nWriting code coverage data to XML file, this may take a moment.\n\nThe « ls » command see that Code Coverage has not generated clover.xml file in the target folder :\n\nls -l /home/mavenProjets/intranet/histoComptaAuteur/build/logs/\ntotal 508\ndrwxr-xr-x 2 root root   4096 fév 10 12:07    ./\ndrwxr-xr-x 3 root root   4096 fév 10 11:48    ../\n-rw-r--r-- 1 root root 484580 fév 10 12:07     pdepend.xml\n-rw-r--r-- 1 root root    950 fév 10 19:31       phpunit.xml\n","closed_by":{"login":"edorian","id":247397,"node_id":"MDQ6VXNlcjI0NzM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/247397?v=4","gravatar_id":"","url":"https://api.github.com/users/edorian","html_url":"https://github.com/edorian","followers_url":"https://api.github.com/users/edorian/followers","following_url":"https://api.github.com/users/edorian/following{/other_user}","gists_url":"https://api.github.com/users/edorian/gists{/gist_id}","starred_url":"https://api.github.com/users/edorian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edorian/subscriptions","organizations_url":"https://api.github.com/users/edorian/orgs","repos_url":"https://api.github.com/users/edorian/repos","events_url":"https://api.github.com/users/edorian/events{/privacy}","received_events_url":"https://api.github.com/users/edorian/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/159/timeline","performed_via_github_app":null,"state_reason":"completed"}