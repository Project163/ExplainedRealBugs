{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1042","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1042/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1042/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1042/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/1042","id":21813907,"node_id":"MDU6SXNzdWUyMTgxMzkwNw==","number":1042,"title":"3.7.28: When generating exception in in setUpBeforeClass, JSON TestListener will cause a fatal error","user":{"login":"andig","id":184815,"node_id":"MDQ6VXNlcjE4NDgxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/184815?v=4","gravatar_id":"","url":"https://api.github.com/users/andig","html_url":"https://github.com/andig","followers_url":"https://api.github.com/users/andig/followers","following_url":"https://api.github.com/users/andig/following{/other_user}","gists_url":"https://api.github.com/users/andig/gists{/gist_id}","starred_url":"https://api.github.com/users/andig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andig/subscriptions","organizations_url":"https://api.github.com/users/andig/orgs","repos_url":"https://api.github.com/users/andig/repos","events_url":"https://api.github.com/users/andig/events{/privacy}","received_events_url":"https://api.github.com/users/andig/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2013-10-30T09:46:38Z","updated_at":"2013-11-05T08:13:26Z","closed_at":"2013-11-05T08:13:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Issue seems similar to https://github.com/sebastianbergmann/phpunit/issues/748. \nRunning into exceptions in setUpBeforeClass, e.g. due to missing/ wrong DB credentials, PHPUnit ends with fatal error when JSON Listener is configured via phpunit.xml:\n\n```\nPHPUnit 3.7.28 by Sebastian Bergmann.\n\nConfiguration read from C:\\data\\htdocs\\vz\\test\\phpunit.xml\n\n{\n    \"event\": \"suiteStart\",\n    \"suite\": \"AggregationTest\",\n    \"tests\": 7\n}\nFatal error: Call to undefined method PHPUnit_Framework_TestSuite::hasOutput() in c:\\data\\pear\\PHPUnit\\Util\\Log\\JSON.php on line 226\n\nCall Stack:\n    0.0010     123104   1. {main}() c:\\data\\phpunit:0\n    0.0280     193536   2. PHPUnit_TextUI_Command::main() c:\\data\\phpunit:46\n    0.0280     196944   3. PHPUnit_TextUI_Command->run() c:\\data\\pear\\PHPUnit\\TextUI\\Command.php:129\n    0.2070     598400   4. PHPUnit_TextUI_TestRunner->doRun() c:\\data\\pear\\PHPUnit\\TextUI\\Command.php:176\n    0.2300     651624   5. PHPUnit_Framework_TestSuite->run() c:\\data\\pear\\PHPUnit\\TextUI\\TestRunner.php:349\n    0.2340     665720   6. PHPUnit_Framework_TestResult->addError() c:\\data\\pear\\PHPUnit\\Framework\\TestSuite.php:673\n    0.2360     669488   7. PHPUnit_Util_Log_JSON->addError() c:\\data\\pear\\PHPUnit\\Framework\\TestResult.php:259\n    1.8712    1064824   8. PHPUnit_Util_Log_JSON->writeCase() c:\\data\\pear\\PHPUnit\\Util\\Log\\JSON.php:90\n```\n","closed_by":{"login":"whatthejeff","id":306525,"node_id":"MDQ6VXNlcjMwNjUyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/306525?v=4","gravatar_id":"","url":"https://api.github.com/users/whatthejeff","html_url":"https://github.com/whatthejeff","followers_url":"https://api.github.com/users/whatthejeff/followers","following_url":"https://api.github.com/users/whatthejeff/following{/other_user}","gists_url":"https://api.github.com/users/whatthejeff/gists{/gist_id}","starred_url":"https://api.github.com/users/whatthejeff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whatthejeff/subscriptions","organizations_url":"https://api.github.com/users/whatthejeff/orgs","repos_url":"https://api.github.com/users/whatthejeff/repos","events_url":"https://api.github.com/users/whatthejeff/events{/privacy}","received_events_url":"https://api.github.com/users/whatthejeff/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/1042/timeline","performed_via_github_app":null,"state_reason":"completed"}