{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6236","repository_url":"https://api.github.com/repos/sebastianbergmann/phpunit","labels_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6236/labels{/name}","comments_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6236/comments","events_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6236/events","html_url":"https://github.com/sebastianbergmann/phpunit/issues/6236","id":3142512555,"node_id":"I_kwDOAAbWLc67Tu-r","number":6236,"title":"CLI and XML option to not fail on PHPUnit warnings","user":{"login":"nikophil","id":10139766,"node_id":"MDQ6VXNlcjEwMTM5NzY2","avatar_url":"https://avatars.githubusercontent.com/u/10139766?v=4","gravatar_id":"","url":"https://api.github.com/users/nikophil","html_url":"https://github.com/nikophil","followers_url":"https://api.github.com/users/nikophil/followers","following_url":"https://api.github.com/users/nikophil/following{/other_user}","gists_url":"https://api.github.com/users/nikophil/gists{/gist_id}","starred_url":"https://api.github.com/users/nikophil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikophil/subscriptions","organizations_url":"https://api.github.com/users/nikophil/orgs","repos_url":"https://api.github.com/users/nikophil/repos","events_url":"https://api.github.com/users/nikophil/events{/privacy}","received_events_url":"https://api.github.com/users/nikophil/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":44002,"node_id":"MDU6TGFiZWw0NDAwMg==","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/type/enhancement","name":"type/enhancement","color":"73d216","default":false,"description":"A new idea that should be implemented"},{"id":1329317012,"node_id":"MDU6TGFiZWwxMzI5MzE3MDEy","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/test-runner","name":"feature/test-runner","color":"e9b96e","default":false,"description":"CLI test runner"},{"id":5333828224,"node_id":"LA_kwDOAAbWLc8AAAABPevCgA","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/configuration/xml","name":"feature/configuration/xml","color":"e9b96e","default":false,"description":""},{"id":5333828800,"node_id":"LA_kwDOAAbWLc8AAAABPevEwA","url":"https://api.github.com/repos/sebastianbergmann/phpunit/labels/feature/configuration/cli","name":"feature/configuration/cli","color":"e9b96e","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2025-06-13T07:05:16Z","updated_at":"2025-06-20T08:18:30Z","closed_at":"2025-06-20T06:20:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"| Q                   | A\n| --------------------| ---------------\n| PHPUnit version     | 12.2.2 \n| PHP version         | 8.3.20\n| Installation Method | Composer\n\n#### Summary\n\nPHPUnit warnings are always failing the testsuite, diregarding of `failOnWarning` configuration.\n\nThe final outcome of the testsuite is:\n```\nOK, but there were issues!\nTests: 1, Assertions: 1, Warnings: 1.\n```\nbut always return an exit code of `1`\n\nThis wasn't a problem until https://github.com/sebastianbergmann/phpunit/pull/6213 which started to trigger PHPUnit warnings when the number of arguments returned by the data provider does not match the number of arguments of the test method.\n\nThis warning seems totally legit, but in some case, it could be useful to allow those numbers of arguments to not match, example:\n\n```php\nfinal class SomeTest extends TestCase\n{\n    #[Before]\n    public function initializationMethod(): void\n    {\n        // do some heavy initialization using `$this->providedData()`\n        // which would be reused by all test methods in the class\n    }\n\n    #[Test]\n    #[DataProvider('provider')]\n    public function testMethod() void\n    {\n        self::assertTrue(true);\n    }\n\n    public static function provider(): iterable\n    {\n        yield ['foo'];\n    }\n}\n```\n\nI know this is a little bit hacky, but in some complex scenario, it is pretty handy.\n\n#### How to reproduce\n\n```php\nfinal class ReproducingTest extends TestCase\n{\n    #[Test]\n    #[DataProvider('provider')]\n    public function testMethod() void\n    {\n        self::assertTrue(true);\n    }\n\n    public static function provider(): iterable\n    {\n        yield ['foo'];\n    }\n}\n```\n\n#### Expected behavior\n\nI'm not sure what's the best way to fix this... There could be some \"global\" solutions:\n- make the config `failOnWarning` to act on PHPUnit warning as well\n- add a new config `failOnPHPUnitWarning`\n\nbut both of them would hide other more legit warnings, I think they are not a really good solution.\n\nOr maybe we could go for a more fine-grained solution:\n- allow to ignore PHPUnit warning along with a baseline, as well as deprecations\n- add a new parameter to `DataProvider` attribute? `#[DataProvider('providerMethodName', allowExtraArguments: true)]`\n- introduce a new attribute `#[IgnoreWarnings]` / `#[IgnorePHPUnitWarnings]`\n\nI'd be willing to provide a PR if we agree on a solution to implement.\n\nthanks!\n","closed_by":{"login":"sebastianbergmann","id":25218,"node_id":"MDQ6VXNlcjI1MjE4","avatar_url":"https://avatars.githubusercontent.com/u/25218?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianbergmann","html_url":"https://github.com/sebastianbergmann","followers_url":"https://api.github.com/users/sebastianbergmann/followers","following_url":"https://api.github.com/users/sebastianbergmann/following{/other_user}","gists_url":"https://api.github.com/users/sebastianbergmann/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianbergmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianbergmann/subscriptions","organizations_url":"https://api.github.com/users/sebastianbergmann/orgs","repos_url":"https://api.github.com/users/sebastianbergmann/repos","events_url":"https://api.github.com/users/sebastianbergmann/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianbergmann/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sebastianbergmann/phpunit/issues/6236/timeline","performed_via_github_app":null,"state_reason":"completed"}