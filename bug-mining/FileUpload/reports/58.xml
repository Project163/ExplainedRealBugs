<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:55:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FILEUPLOAD-137] MultipartStream public API broken</title>
                <link>https://issues.apache.org/jira/browse/FILEUPLOAD-137</link>
                <project id="12310476" key="FILEUPLOAD">Commons FileUpload</project>
                    <description>&lt;p&gt;In commons-transaction 1.2 the MultipartStream class has 2 public constructors. Both are deprecated; however their implementation delegates to non-visible (package-private) constructors. There are two issues here:&lt;/p&gt;

&lt;p&gt;1. the deprecated, delegating constructors use a null pointer for the progress notifier, which in turn yield a NullPointerException when you try to use them&lt;br/&gt;
2. the non-deprecated constructors are not visible.&lt;/p&gt;

&lt;p&gt;Hence, I cannot really upgrade from 1.0 to 1.2.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Mark.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12371852">FILEUPLOAD-137</key>
            <summary>MultipartStream public API broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jochen@apache.org">Jochen Wiedmann</assignee>
                                    <reporter username="marksinke">Mark Sinke</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jun 2007 09:49:06 +0000</created>
                <updated>Tue, 6 Jun 2017 04:26:04 +0000</updated>
                            <resolved>Mon, 12 Aug 2013 13:30:55 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.2.1</fixVersion>
                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="12505818" author="jochen@apache.org" created="Mon, 18 Jun 2007 13:54:34 +0000"  >&lt;p&gt;How&apos;s that related to commons-transaction?&lt;/p&gt;</comment>
                            <comment id="12505819" author="jochen@apache.org" created="Mon, 18 Jun 2007 13:55:19 +0000"  >&lt;p&gt;Apart from that: Why do you use the MultipartStream class directly? Making it public was an error, which I am trying to fix in 1.2.&lt;/p&gt;</comment>
                            <comment id="12508611" author="marksinke" created="Wed, 27 Jun 2007 18:22:28 +0000"  >&lt;p&gt;Hi Jochen,&lt;/p&gt;

&lt;p&gt;We&apos;re using it to do SOAP with attachments.&lt;/p&gt;

&lt;p&gt;Mark. &lt;/p&gt;
</comment>
                            <comment id="12508621" author="bayard" created="Wed, 27 Jun 2007 18:59:54 +0000"  >&lt;p&gt;Still a problem. According to findbugs, there are still errors:&lt;/p&gt;

&lt;p&gt;&quot;Message:  Non-virtual method call in org.apache.commons.fileupload.MultipartStream.MultipartStream() passes null for unconditionally dereferenced parameter of org.apache.commons.fileupload.MultipartStream.MultipartStream(java.io.InputStream,byte[],MultipartStream)&quot;&lt;/p&gt;

&lt;p&gt;Looking at the code, the boundary parameter jumps out as one that will throw an NPE if you call new MultipartStream().&lt;/p&gt;</comment>
                            <comment id="12532128" author="jason.madden@riskmetrics.com" created="Wed, 3 Oct 2007 14:40:18 +0000"  >&lt;p&gt;I am also using MultiPartStream to do SOAP attachments. It&apos;s the lowest-level API that&apos;s available and seemed the most appropriate. I also cannot upgrade to 1.2 because of these NPEs.&lt;/p&gt;</comment>
                            <comment id="12532187" author="jochen@apache.org" created="Wed, 3 Oct 2007 18:35:42 +0000"  >&lt;p&gt;I&apos;d recommend that you give Mime4J a try.&lt;/p&gt;</comment>
                            <comment id="13598218" author="tn" created="Sun, 10 Mar 2013 12:06:30 +0000"  >&lt;p&gt;The calls to the notifier are now protected by a null check, so this should be safe.&lt;/p&gt;

&lt;p&gt;The default constructor MultipartStream() will still cause a NullPointerException.&lt;br/&gt;
I would suggest to throw something like a IllegalStateException in any case and document it in the javadoc.&lt;br/&gt;
It is deprecated anyway and will be removed.&lt;/p&gt;</comment>
                            <comment id="13598656" author="simone.tripodi" created="Mon, 11 Mar 2013 09:00:04 +0000"  >&lt;p&gt;even if the 0-arguments constructor is deprecated it should not break the backward compatibility - I am investigating if/how it can be still supported.&lt;/p&gt;

&lt;p&gt;If not, I&apos;m by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;tn&lt;/a&gt;&apos;s side on throwing an unchecked exception and document it in apidoc&lt;/p&gt;</comment>
                            <comment id="13598673" author="simone.tripodi" created="Mon, 11 Mar 2013 09:54:42 +0000"  >&lt;p&gt;while it would be possible to work around the NPE on &lt;tt&gt;boundary&lt;/tt&gt;, the adapted &lt;tt&gt;InputStream&lt;/tt&gt; reference cannot be set if not via the constructor since &lt;tt&gt;MultipartStream#input&lt;/tt&gt; is &lt;tt&gt;final&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Since it doesn&apos;t look like there is a fix for this, I&apos;d go for &lt;tt&gt;UnsupportedOperationException&lt;/tt&gt; in &lt;tt&gt;MultipartStream()&lt;/tt&gt; constructor and add a note in its javadoc.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13736856" author="jochen@apache.org" created="Mon, 12 Aug 2013 13:30:25 +0000"  >&lt;p&gt;Two parts:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I fail to find any uses of &quot;notifier&quot;, that could trigger an NPE. Namely, checks for null are present in makeAvailable(), and readByte(). Please be more specific on that part.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-The constructor     MultipartStream(InputStream, byte[], int, ProgressNotifier) is now public. This is an upwards compatible  change with no side effects.&lt;/p&gt;
</comment>
                            <comment id="13736858" author="mark.sinke@forcare.com" created="Mon, 12 Aug 2013 13:32:49 +0000"  >&lt;p&gt;I&apos;m enjoying a holiday, without access to e-mail. I will respond to mails on or after Aug 19th. Please contact &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:info@forcare.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;info@forcare.com&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; or &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:support@forcare.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;support@forcare.com&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; for specific questions. Regards, Mark Sinke, CTO, Forcare BV.&lt;/p&gt;</comment>
                            <comment id="13867903" author="robmcdougall" created="Fri, 10 Jan 2014 15:24:47 +0000"  >&lt;p&gt;If the constructor MultipartStream(InputStream, byte[], int, ProgressNotifier) is public, is there any reason not to make the convenience function MultipartStream(InputStream input, byte[] boundary, ProgressNotifier pNotifier) public as well?  They are both mentioned in the comments for the deprecated constructors but only one is actually public.&lt;/p&gt;</comment>
                            <comment id="16038109" author="chtompki" created="Tue, 6 Jun 2017 04:26:04 +0000"  >&lt;p&gt;1.3.1 released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sksn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>