<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FILEUPLOAD-120] memory leak due to classloader leak (in commons.io)</title>
                <link>https://issues.apache.org/jira/browse/FILEUPLOAD-120</link>
                <project id="12310476" key="FILEUPLOAD">Commons FileUpload</project>
                    <description>&lt;p&gt;commons.io opens a thread that is never stopped. The result is that a reference from a container class (jboss threads pool) to my webapp classloader is never released and my webapp classloader is never garbaged. After serveral deploy/undeploy cycles I experience an &quot;OutOfMemoryError : PermGen&quot;.&lt;/p&gt;

&lt;p&gt;I did open an issue in commons.io : &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-99&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/IO-99&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I also open an issue here as I think commons.fileupload have concerns about webapp environnements&lt;/p&gt;</description>
                <environment>&lt;p&gt;JBoss portal&lt;/p&gt;</environment>
        <key id="12355970">FILEUPLOAD-120</key>
            <summary>memory leak due to classloader leak (in commons.io)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mvera">Vera Micka&#235;l</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Nov 2006 10:27:47 +0000</created>
                <updated>Fri, 9 Mar 2007 20:32:11 +0000</updated>
                            <resolved>Tue, 2 Jan 2007 20:08:05 +0000</resolved>
                                    <version>1.1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12450690" author="jochen@apache.org" created="Fri, 17 Nov 2006 10:36:27 +0000"  >&lt;p&gt;As you have found not only the problem, but the reason as well, I believe that there doesn&apos;t remain any work for the FILEUPLOAD team. Consequently, I am resolving this as &quot;Invalid&quot; (must be fixed externally). Thanks for reporting this.&lt;/p&gt;</comment>
                            <comment id="12450746" author="mvera" created="Fri, 17 Nov 2006 14:15:55 +0000"  >&lt;p&gt;I don&apos;t feel like my issue is invalid. &lt;/p&gt;

&lt;p&gt;This is really a commons.fileupload bug as commons.fileupload depends on a lib that isn&apos;t designed to be embeded in a webapp.&lt;/p&gt;

&lt;p&gt;I did open an issue in commons.fileupload because I expected developpers of fileuploads to be concerned by hot deploy in web servers more than commons.io Could someone of the commons.fileupload support my issue in commons.io by voting for it in commons.io, and add a comment supporting my description of the problem. &lt;/p&gt;

&lt;p&gt;This a complex problem with a very simple solution, any support for the commons.io team is welcome.&lt;/p&gt;

</comment>
                            <comment id="12451230" author="bayard" created="Mon, 20 Nov 2006 05:55:12 +0000"  >&lt;p&gt;Reopening - it seems to me that if the IO feature is added, then we&apos;ll need to make sure FileUpload use it. So this seems like a good issue to record the need for FileUpload to use the IO bit &lt;span class=&quot;error&quot;&gt;&amp;#91;see Martin&amp;#39;s comments in IO-99&amp;#93;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="12451381" author="mvera" created="Mon, 20 Nov 2006 17:44:07 +0000"  >&lt;p&gt;I proposed a solution on commons.io, an API using the classloader to release resources. I thought that maybe commons.fileupload may offer the same service and delegate a part of it to commons.io. As I don&apos;t use directly commons.io, I&apos;d prefer to ask commons.fileupload to release its resources better than to commons.io&lt;/p&gt;

&lt;p&gt;Thanks for reopening this issue, IMHO the new status reflects better the situation.&lt;/p&gt;
</comment>
                            <comment id="12455460" author="bayard" created="Mon, 4 Dec 2006 23:50:09 +0000"  >&lt;p&gt;Sounds like FileUpload 1.2 is waiting on IO 1.3 so it can fix this. As far as I understand, FileUpload will need a small amount of code change&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="12455524" author="jochen@apache.org" created="Tue, 5 Dec 2006 06:48:42 +0000"  >
&lt;p&gt;&amp;gt; Sounds like FileUpload 1.2 is waiting on IO 1.3 so it can fix this. As far as I understand, FileUpload will need a small amount of code change&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Dunno. My intention was to wait for 1.3, then change the POM&apos;s (Maven 1 and 2) and see what happens. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12455812" author="bayard" created="Wed, 6 Dec 2006 00:02:49 +0000"  >&lt;p&gt;I think we need to get it in FileUpload earlier than that so we can be happy releasing 1.3.&lt;/p&gt;</comment>
                            <comment id="12455820" author="bayard" created="Wed, 6 Dec 2006 00:12:09 +0000"  >&lt;p&gt;I&apos;m being dumb. So Vera needs to grab the latest nightly IO and add a call to FileCleaner.exitWhenFinished in javax.servlet.ServletContextListener#contextDestroyed().&lt;/p&gt;

&lt;p&gt;Such a thing is attached. I don&apos;t know if we want to ship that in FileUpload or not.&lt;/p&gt;</comment>
                            <comment id="12455823" author="bayard" created="Wed, 6 Dec 2006 00:17:06 +0000"  >&lt;p&gt;Here&apos;s the web.xml, to save anyone reading this from having to look it up.&lt;/p&gt;

&lt;p&gt;&amp;lt;web-app&amp;gt;&lt;br/&gt;
	&amp;lt;listener&amp;gt;&lt;br/&gt;
		&amp;lt;listener-class&amp;gt;&lt;br/&gt;
		    org.apache.commons.fileupload.FileCleanerCleanup&lt;br/&gt;
		&amp;lt;/listener-class&amp;gt;&lt;br/&gt;
	&amp;lt;/listener&amp;gt;&lt;/p&gt;

&lt;p&gt;.....&lt;/p&gt;</comment>
                            <comment id="12455910" author="jochen@apache.org" created="Wed, 6 Dec 2006 07:58:31 +0000"  >&lt;p&gt;I agree with you, Henri, that it makes sense to provide a servletcontextlistener. Question: I would assume that there is a similar thing for portlets, is it? Can anyone provide an implementation for that as well?&lt;/p&gt;</comment>
                            <comment id="12461779" author="bayard" created="Tue, 2 Jan 2007 18:26:26 +0000"  >
&lt;p&gt;Looking at &lt;a href=&quot;http://portals.apache.org/pluto/pluto-container/apidocs/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://portals.apache.org/pluto/pluto-container/apidocs/index.html&lt;/a&gt; - I don&apos;t see any obvious Listener classes. I figure we can just release FileUpload and let someone contribute a portlet listener if it&apos;s important to them.&lt;/p&gt;</comment>
                            <comment id="12461808" author="jochen@apache.org" created="Tue, 2 Jan 2007 20:08:05 +0000"  >&lt;p&gt;Ok, &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-99&quot; title=&quot;FileCleaner thread never ends and cause memory leak in AS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-99&quot;&gt;&lt;del&gt;IO-99&lt;/del&gt;&lt;/a&gt; is resolved, Henri&apos;s patch is in, so I am now resolving this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12355892">IO-99</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12346498" name="FileCleanerCleanup.java" size="418" author="bayard" created="Wed, 6 Dec 2006 00:17:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43112</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0skwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>