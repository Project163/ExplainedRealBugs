<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:55:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FILEUPLOAD-189] DiskFileItemFactory use of FileCleaningTracker is documented or coded wrong</title>
                <link>https://issues.apache.org/jira/browse/FILEUPLOAD-189</link>
                <project id="12310476" key="FILEUPLOAD">Commons FileUpload</project>
                    <description>&lt;p&gt;Regarding latest SVN revision:&lt;/p&gt;

&lt;p&gt;The DiskFileItemFactory documents:&lt;br/&gt;
Temporary files are automatically deleted as soon as they are no longer needed. (More precisely, when the corresponding instance of &lt;/p&gt;
{@link java.io.File}
&lt;p&gt; is garbage collected.)&lt;/p&gt;

&lt;p&gt;But the code in DiskFileItemFactory.createItem() is doing:&lt;br/&gt;
tracker.track(result.getTempFile(), this);&lt;/p&gt;

&lt;p&gt;Which means the file is cleaned when DiskFileItemFactory is garbage collected.&lt;/p&gt;

&lt;p&gt;This error is propably introduced in Rev 578253 when the code was moved from DiskFileItem to DiskFileItemFactory, without changing &quot;this&quot; (which was DiskFileItem) and is not DiskFileItemFactory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12503607">FILEUPLOAD-189</key>
            <summary>DiskFileItemFactory use of FileCleaningTracker is documented or coded wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simone.tripodi">Simone Tripodi</assignee>
                                    <reporter username="gregork">Gregor K</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Apr 2011 08:04:55 +0000</created>
                <updated>Tue, 6 Jun 2017 04:49:41 +0000</updated>
                            <resolved>Wed, 6 Mar 2013 19:44:16 +0000</resolved>
                                    <version>1.2.2</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>16</votes>
                                    <watches>9</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13459006" author="novoj" created="Wed, 19 Sep 2012 19:31:23 +0000"  >&lt;p&gt;I think this issue should be considered as Critical. DiskFileItemFactory is usually used as singleton object and thus this behaviour leads to OutOfMemory exceptions, because file tracker never removes corresponding temp files and list of tracker only gets bigger and bigger. We noticed this problem when our server passed through several crashes due to OOM when someone started penetration test on our site which uploaded files through publicly accessible form.&lt;/p&gt;</comment>
                            <comment id="13459035" author="novoj" created="Wed, 19 Sep 2012 20:06:29 +0000"  >&lt;p&gt;Proposed patch.&lt;/p&gt;</comment>
                            <comment id="13506382" author="nishinaka" created="Thu, 29 Nov 2012 10:49:42 +0000"  >&lt;p&gt;I think this issue Critical , too.&lt;/p&gt;

&lt;p&gt;If the lifecycle of DiskFileItemFactory object is shorter than DiskFileItem, There is a possibility that the temporary files are deleted before DiskFileItem#get() is called.&lt;br/&gt;
This causes upload files will be lost.&lt;/p&gt;</comment>
                            <comment id="13595031" author="simone.tripodi" created="Wed, 6 Mar 2013 19:44:16 +0000"  >&lt;p&gt;patch applied at r1453510, thanks Jan for contributing - I also added your name in the contributors list&lt;/p&gt;</comment>
                            <comment id="13595629" author="novoj" created="Thu, 7 Mar 2013 07:11:09 +0000"  >&lt;p&gt;You&apos;re welcome. I think I&apos;m not worthy to become a contributor by writing a single line of code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ... thank you.&lt;/p&gt;</comment>
                            <comment id="13595640" author="simone.tripodi" created="Thu, 7 Mar 2013 07:35:16 +0000"  >&lt;p&gt;a single line of code that made the difference &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Everybody putting an effort on improving the project is a contributor, so, YES, you ARE a contributor &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Looking forward to apply more patches from you!&lt;/p&gt;</comment>
                            <comment id="13595667" author="gregork" created="Thu, 7 Mar 2013 08:21:15 +0000"  >&lt;p&gt;Thanks, for fixing after such a long time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I don&apos;t won&apos;t to be contributor, but hey I think it took me considerably more hours to find and report it.. and the reporter is not even getting a tiny thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13595681" author="simone.tripodi" created="Thu, 7 Mar 2013 08:37:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gregork&quot; class=&quot;user-hover&quot; rel=&quot;gregork&quot;&gt;gregork&lt;/a&gt; reporters will be mentioned in the changelist, once generated, everybody here takes his acknowledgment &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; that is why ASF projects are different - it&apos;s really a community-driven environment! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;the &quot;issue&quot; about timing is that ASF projects are maintained by volunteers - since I need &lt;span class=&quot;error&quot;&gt;&amp;#91;fileupload&amp;#93;&lt;/span&gt; at work, actually my spare time coincides with my working time, I got more chances to put an effort on maintaining it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16038143" author="chtompki" created="Tue, 6 Jun 2017 04:49:41 +0000"  >&lt;p&gt;1.3 released.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12466982">SOLR-1953</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12545785" name="FILEUPLOAD-189.patch" size="1033" author="novoj" created="Wed, 19 Sep 2012 20:06:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eqov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84086</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>