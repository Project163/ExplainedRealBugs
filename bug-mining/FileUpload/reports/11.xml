<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FILEUPLOAD-145] setFileSizeMax validation is happening after ENTIRE file gets uploaded</title>
                <link>https://issues.apache.org/jira/browse/FILEUPLOAD-145</link>
                <project id="12310476" key="FILEUPLOAD">Commons FileUpload</project>
                    <description>&lt;p&gt;The LimitedInputStream &lt;b&gt;IS&lt;/b&gt; correctly raising a FileUploadBase.FileSizeLimitExceededException in the event of a too-large file.  HOWEVER, the exception isn&apos;t getting &lt;b&gt;processed&lt;/b&gt; until AFTER all of the data is read.  This is because of what appears to be a bug in MultipartStream.ItemInputStream.close() (or a bug in close handling after the FileSizeLimitExceededException is raised).  After the LimitedInputStream correctly raises the file size exception, someone attempts to close the MultipartStream, but the close() method repeatedly calls &apos;makeAvailable()&apos; which ends up reading the rest of the file upload data anyways, REGARDLESS of the size limit exception being raised.&lt;/p&gt;</description>
                <environment>&lt;p&gt;All, however I mainly use Mac OSX&lt;/p&gt;</environment>
        <key id="12377199">FILEUPLOAD-145</key>
            <summary>setFileSizeMax validation is happening after ENTIRE file gets uploaded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jochen@apache.org">Jochen Wiedmann</assignee>
                                    <reporter username="zmonster">Eric Hermanson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Aug 2007 23:53:56 +0000</created>
                <updated>Tue, 6 Jun 2017 04:21:41 +0000</updated>
                            <resolved>Sat, 22 Sep 2007 21:01:15 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12527250" author="bayard" created="Thu, 13 Sep 2007 20:33:40 +0000"  >&lt;p&gt;Looking at the code, I agree with Eric&apos;s description above.&lt;/p&gt;

&lt;p&gt;The options would seem to be:&lt;/p&gt;

&lt;p&gt;1) Remove the eating of the stream from close() (presumably it&apos;s there for a reason).&lt;br/&gt;
2) Add a boolean to turn off the eating of the stream and set that when raising an error in checkLimit.&lt;br/&gt;
3) other ideas?&lt;/p&gt;</comment>
                            <comment id="12529554" author="jochen@apache.org" created="Fri, 21 Sep 2007 21:07:32 +0000"  >&lt;p&gt;Could you please verify, whether the attached patch works?&lt;/p&gt;</comment>
                            <comment id="12529560" author="zmonster" created="Fri, 21 Sep 2007 21:39:23 +0000"  >&lt;p&gt;The attached patch does appear to work in that the client (web browser) receives the desired file size max error after fileSizeMax bytes are uploaded (whereas before, the entire (size&amp;gt;fileSizeMax) had to be uploaded before the error was sent).  However, this is still not completely ideal.  It would be desireable for the server to check the file size immediately, before the upload starts, and throw the error in a pre-emptive fashion.  But maybe that information is not available at the fileupload level, and &apos;fileSizeMax&apos; bytes have to be read in all cases before any error can be thrown?  If so, that&apos;s fine.  This patch is one step better than we had before.  Please excuse my ignorance of the inner-workings of the fileupload code.&lt;/p&gt;</comment>
                            <comment id="12529697" author="jochen@apache.org" created="Sat, 22 Sep 2007 21:01:15 +0000"  >&lt;p&gt;A FileSizeLimitExceededException was deferred until the complete file has been uploaded. Additionally, the FileSizeLimitException is now thrown immediately, if the attachments headers contain a content-length value, which exceeds the configured limit. (It is unlikely, that browsers send such a header, but one can try.)&lt;/p&gt;
</comment>
                            <comment id="16038098" author="chtompki" created="Tue, 6 Jun 2017 04:21:41 +0000"  >&lt;p&gt;1.2.1 released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12366387" name="FILEUPLOAD-145.patch" size="2956" author="jochen@apache.org" created="Fri, 21 Sep 2007 21:07:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43087</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0skqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>