<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FILEUPLOAD-134] A factory-created DiskFileItem does not have an initialized dfos, causing NullPointerExceptions if getOutputStream() is not called.</title>
                <link>https://issues.apache.org/jira/browse/FILEUPLOAD-134</link>
                <project id="12310476" key="FILEUPLOAD">Commons FileUpload</project>
                    <description>&lt;p&gt;When upgrading the Turbine code to commons-fileupload 1.2, I got NPEs in Unit tests dealing with DiskFileItems. In that special case, a FileItem was created like this:&lt;/p&gt;

&lt;p&gt;        ParameterParser pp = new DefaultParameterParser();&lt;br/&gt;
        DiskFileItemFactory factory = new DiskFileItemFactory(10240, new File(&quot;.&quot;));&lt;/p&gt;

&lt;p&gt;        FileItem test = factory.createItem(&quot;upload-field&quot;, &quot;application/octet-stream&quot;, false, null);&lt;/p&gt;

&lt;p&gt;        pp.add(&quot;upload-field&quot;, test);&lt;/p&gt;

&lt;p&gt;        assertTrue(pp.toString().startsWith(&quot;{upload-field=[name=null&quot;));&lt;/p&gt;

&lt;p&gt;pp.toString() causes a call to test.toString() which (among other things) calls dfos.getFile(). This fails because dfos is not initialized before getOutputStream() is called.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12366902">FILEUPLOAD-134</key>
            <summary>A factory-created DiskFileItem does not have an initialized dfos, causing NullPointerExceptions if getOutputStream() is not called.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tv">Thomas Vandahl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Apr 2007 15:46:06 +0000</created>
                <updated>Tue, 6 Jun 2017 04:29:13 +0000</updated>
                            <resolved>Thu, 7 Jun 2007 00:06:00 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12502154" author="jochen@apache.org" created="Thu, 7 Jun 2007 00:06:00 +0000"  >&lt;p&gt;The method DiskFileItem.getStorageLocation() is now checking for dfos == null.&lt;/p&gt;</comment>
                            <comment id="12760262" author="miek" created="Mon, 28 Sep 2009 14:42:18 +0000"  >&lt;p&gt;Jochen, it turns out the resolution you described only affects the sympton and not the original problem. The dfos is not initialized at all unless getOutputStream() is manually invoked. As I see it, the fix would be to initialize the dfos as soon as the object is created.&lt;/p&gt;

&lt;p&gt;I came across this problem when trying to wrap a newly created DiskFileItem in a MultipartFile, which causes getSize() to be called, which ultimately leads to a call of dfos.isInMemory() (line 306 in DiskFileItem.java), which results to an NPE.&lt;/p&gt;</comment>
                            <comment id="16038116" author="chtompki" created="Tue, 6 Jun 2017 04:29:13 +0000"  >&lt;p&gt;1.2.1 released.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12505046">FILEUPLOAD-190</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sktb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>