{"url":"https://api.github.com/repos/cypress-io/cypress/issues/25839","repository_url":"https://api.github.com/repos/cypress-io/cypress","labels_url":"https://api.github.com/repos/cypress-io/cypress/issues/25839/labels{/name}","comments_url":"https://api.github.com/repos/cypress-io/cypress/issues/25839/comments","events_url":"https://api.github.com/repos/cypress-io/cypress/issues/25839/events","html_url":"https://github.com/cypress-io/cypress/issues/25839","id":1586947824,"node_id":"I_kwDOAeKht85elubw","number":25839,"title":"[ERR_INVALID_CHAR]: Invalid character in header content [\"x-cypress-file-path\"]","user":{"login":"Nutcracker52","id":65933656,"node_id":"MDQ6VXNlcjY1OTMzNjU2","avatar_url":"https://avatars.githubusercontent.com/u/65933656?v=4","gravatar_id":"","url":"https://api.github.com/users/Nutcracker52","html_url":"https://github.com/Nutcracker52","followers_url":"https://api.github.com/users/Nutcracker52/followers","following_url":"https://api.github.com/users/Nutcracker52/following{/other_user}","gists_url":"https://api.github.com/users/Nutcracker52/gists{/gist_id}","starred_url":"https://api.github.com/users/Nutcracker52/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nutcracker52/subscriptions","organizations_url":"https://api.github.com/users/Nutcracker52/orgs","repos_url":"https://api.github.com/users/Nutcracker52/repos","events_url":"https://api.github.com/users/Nutcracker52/events{/privacy}","received_events_url":"https://api.github.com/users/Nutcracker52/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":182981366,"node_id":"MDU6TGFiZWwxODI5ODEzNjY=","url":"https://api.github.com/repos/cypress-io/cypress/labels/type:%20bug","name":"type: bug","color":"e11d21","default":false,"description":null},{"id":2384125815,"node_id":"MDU6TGFiZWwyMzg0MTI1ODE1","url":"https://api.github.com/repos/cypress-io/cypress/labels/Reproducible","name":"Reproducible","color":"8f1d7e","default":false,"description":"Can be reproduced"},{"id":4775936870,"node_id":"LA_kwDOAeKht88AAAABHKsDZg","url":"https://api.github.com/repos/cypress-io/cypress/labels/E2E","name":"E2E","color":"6B4AEE","default":false,"description":"Issue related to end-to-end testing"},{"id":5409621712,"node_id":"LA_kwDOAeKht88AAAABQnBG0A","url":"https://api.github.com/repos/cypress-io/cypress/labels/Triaged","name":"Triaged","color":"5319e7","default":false,"description":"Issue has been routed to backlog.  This is not a commitment to have it prioritized by the team."}],"state":"closed","locked":true,"assignee":{"login":"mjhenkes","id":1588747,"node_id":"MDQ6VXNlcjE1ODg3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1588747?v=4","gravatar_id":"","url":"https://api.github.com/users/mjhenkes","html_url":"https://github.com/mjhenkes","followers_url":"https://api.github.com/users/mjhenkes/followers","following_url":"https://api.github.com/users/mjhenkes/following{/other_user}","gists_url":"https://api.github.com/users/mjhenkes/gists{/gist_id}","starred_url":"https://api.github.com/users/mjhenkes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjhenkes/subscriptions","organizations_url":"https://api.github.com/users/mjhenkes/orgs","repos_url":"https://api.github.com/users/mjhenkes/repos","events_url":"https://api.github.com/users/mjhenkes/events{/privacy}","received_events_url":"https://api.github.com/users/mjhenkes/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[],"milestone":null,"comments":10,"created_at":"2023-02-16T03:36:18Z","updated_at":"2024-05-21T20:52:52Z","closed_at":"2024-05-21T14:54:03Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Current behavior\n\nhttps://github.com/cypress-io/cypress/issues/25273 related to this closed issue and I can confirm this is happening and it's pretty annyoing. \n\nError Code pops \n```\nTypeError [ERR_INVALID_CHAR] [ERR_INVALID_CHAR]: Invalid character in header content [\"x-cypress-file-path\"]\n    at ServerResponse.setHeader (_http_outgoing.js:561:3)\n    at onRequest (C:\\Users\\Nutcracker52\\AppData\\Local\\Cypress\\Cache\\8.3.1\\Cypress\\resources\\app\\packages\\server\\lib\\file_server.js:37:7)\n    at Server.<anonymous> (C:\\Users\\Nutcracker52\\AppData\\Local\\Cypress\\Cache\\8.3.1\\Cypress\\resources\\app\\packages\\server\\lib\\file_server.js:57:16)\n    at Server.emit (events.js:315:20)\n    at parserOnIncoming (_http_server.js:874:12)\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:126:17)\n```\n  test I am trying to run \n```js\n  it('validation email sent and user can confirm', () => {\n    cy.getEmail(Cypress.env('emailAddress'), 'Welcome to ABC', true).then(email => {\n      expect(email.subject).equal('Welcome to ABC')\n      const validateUrl = getEmailLink(email.html, `${Cypress.env('appUrl')}/account/verify?code`, '\"')\n      cy.visit(validateUrl)\n      cy.contains('you are now ready to login!', { timeout: 30000 })\n    })\n  })\n```\n  I am reading emails from an API and check that email has been received and then email contains a link and click that link\n  \n\n### Desired behavior\n\nCypress shouldn't throw any errors while test is running. This completely crashes Cypress and I have to run tests again. \n\nTo avoid the error I had to add cy.visit command as first line to the code. which is not necessary. \n\n### Test code to reproduce\n\nplease use the given code above. \nget email is a function that we designed to get emails from an api. \nI cannot share it. \n\n### Cypress Version\n\n8.3.1\n\n### Node version\n\n16.19.0\n\n### Operating System\n\nWindows 11\n\n### Debug Logs\n\n_No response_\n\n### Other\n\n_No response_","closed_by":{"login":"jennifer-shehane","id":1271364,"node_id":"MDQ6VXNlcjEyNzEzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1271364?v=4","gravatar_id":"","url":"https://api.github.com/users/jennifer-shehane","html_url":"https://github.com/jennifer-shehane","followers_url":"https://api.github.com/users/jennifer-shehane/followers","following_url":"https://api.github.com/users/jennifer-shehane/following{/other_user}","gists_url":"https://api.github.com/users/jennifer-shehane/gists{/gist_id}","starred_url":"https://api.github.com/users/jennifer-shehane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jennifer-shehane/subscriptions","organizations_url":"https://api.github.com/users/jennifer-shehane/orgs","repos_url":"https://api.github.com/users/jennifer-shehane/repos","events_url":"https://api.github.com/users/jennifer-shehane/events{/privacy}","received_events_url":"https://api.github.com/users/jennifer-shehane/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/cypress-io/cypress/issues/25839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cypress-io/cypress/issues/25839/timeline","performed_via_github_app":null,"state_reason":"completed"}