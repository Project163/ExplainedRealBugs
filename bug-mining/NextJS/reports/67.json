{"url":"https://api.github.com/repos/vercel/next.js/issues/82584","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/82584/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/82584/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/82584/events","html_url":"https://github.com/vercel/next.js/issues/82584","id":3315679438,"node_id":"I_kwDOBC3Cis7FoUDO","number":82584,"title":"[Turbopack] Build: The high bits of the position 1401321 are not all 0s or 1s: 1","user":{"login":"AleksandarDev","id":643171,"node_id":"MDQ6VXNlcjY0MzE3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/643171?v=4","gravatar_id":"","url":"https://api.github.com/users/AleksandarDev","html_url":"https://github.com/AleksandarDev","followers_url":"https://api.github.com/users/AleksandarDev/followers","following_url":"https://api.github.com/users/AleksandarDev/following{/other_user}","gists_url":"https://api.github.com/users/AleksandarDev/gists{/gist_id}","starred_url":"https://api.github.com/users/AleksandarDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AleksandarDev/subscriptions","organizations_url":"https://api.github.com/users/AleksandarDev/orgs","repos_url":"https://api.github.com/users/AleksandarDev/repos","events_url":"https://api.github.com/users/AleksandarDev/events{/privacy}","received_events_url":"https://api.github.com/users/AleksandarDev/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5484123250,"node_id":"LA_kwDOBC3Cis8AAAABRuEUcg","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20turbopack","name":"linear: turbopack","color":"290F77","default":false,"description":"Confirmed issue that is tracked by the Turbopack team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2025-08-12T19:52:35Z","updated_at":"2025-09-26T00:05:16Z","closed_at":"2025-09-11T16:22:29Z","author_association":"NONE","type":{"id":1930995,"node_id":"IT_kwDOAOSnPM4AHXbz","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T15:36:35Z","updated_at":"2024-07-26T10:33:22Z","is_enabled":true},"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/gredice/gredice\n\n### To Reproduce\n\n1. Checkout to branch: `next-15-4-build`\n2. Install packages with `pnpm i`\n3. Try to build the project using `pnpm build --filter=garden`\n\n### Current vs. Expected behavior\n\nExpecting all apps to build, but we get error on 2 apps that use React Three Fiber. Issue is not present with < 15.4 nextjs version, even with turbo build.\n\nLooks like it has issues with dynamic component loaded from package (not prebuilt): \n- https://github.com/gredice/gredice/blob/main/packages/game/src/GameSceneDynamic.tsx\n- https://github.com/gredice/gredice/blob/main/packages/game/src/GameSceneWrapper.tsx\n- https://github.com/gredice/gredice/blob/main/packages/game/src/index.ts\n\n```\n> RUST_BACKTRACE=full next build --turbopack\n\n   ▲ Next.js 15.4.6 (Turbopack)\n   - Environments: .env\n   - Experiments (use with caution):\n     ✓ reactCompiler\n\n   Creating an optimized production build ...\n\nwarn - The class `data-[state=closed]:slide-out-to-top-[48%]` is ambiguous and matches multiple utilities.\nwarn - If this is content and not a class, replace it with `data-&lsqb;state=closed&rsqb;:slide-out-to-top-[48%]` to silence this warning.\n\nwarn - The class `data-[state=open]:slide-in-from-top-[48%]` is ambiguous and matches multiple utilities.\nwarn - If this is content and not a class, replace it with `data-&lsqb;state=open&rsqb;:slide-in-from-top-[48%]` to silence this warning.\n\nthread 'tokio-runtime-worker' panicked at turbopack/crates/turbopack-ecmascript/src/lib.rs:2435:13:\nThe high bits of the position 1401321 are not all 0s or 1s: 1\nstack backtrace:\n   0:        0x15cbc24d4 - _napi_register_module_v1\n   1:        0x15cbe5e54 - _napi_register_module_v1\n   2:        0x15cbbd884 - _napi_register_module_v1\n   3:        0x15cbc2388 - _napi_register_module_v1\n   4:        0x15cbc49e0 - _napi_register_module_v1\n   5:        0x15cbc4830 - _napi_register_module_v1\n   6:        0x15cbc54e0 - _napi_register_module_v1\n   7:        0x15cbc50d0 - _napi_register_module_v1\n   8:        0x15cbc2998 - _napi_register_module_v1\n   9:        0x15cbc4d78 - _napi_register_module_v1\n  10:        0x15cd31e58 - _napi_register_module_v1\n  11:        0x15a902598 - _BrotliDecoderVersion\n  12:        0x15ab37d64 - _BrotliDecoderVersion\n  13:        0x15abc5ef0 - _BrotliDecoderVersion\n  14:        0x15ac24094 - _BrotliDecoderVersion\n  15:        0x15abc678c - _BrotliDecoderVersion\n  16:        0x15ac239b4 - _BrotliDecoderVersion\n  17:        0x15abef338 - _BrotliDecoderVersion\n  18:        0x15a8f0d8c - _BrotliDecoderVersion\n  19:        0x157e011e4 - <unknown>\n  20:        0x157c4d430 - <unknown>\n  21:        0x157c19540 - <unknown>\n  22:        0x157c184cc - <unknown>\n  23:        0x157c4d1d0 - <unknown>\n  24:        0x157d6f338 - <unknown>\n  25:        0x157bcf4c4 - <unknown>\n  26:        0x157bda184 - <unknown>\n  27:        0x157bda538 - <unknown>\n  28:        0x15cb8f378 - _napi_register_module_v1\n  29:        0x15cb8e8c4 - _napi_register_module_v1\n  30:        0x15cb60080 - _napi_register_module_v1\n  31:        0x15cb5fb80 - _napi_register_module_v1\n  32:        0x15cb8e0f4 - _napi_register_module_v1\n  33:        0x15cb6751c - _napi_register_module_v1\n  34:        0x15cb76d44 - _napi_register_module_v1\n  35:        0x15cb531dc - _napi_register_module_v1\n  36:        0x15cb4d298 - _napi_register_module_v1\n  37:        0x15cb66154 - _napi_register_module_v1\n  38:        0x15cb88f44 - _napi_register_module_v1\n  39:        0x15cb55ff4 - _napi_register_module_v1\n  40:        0x15cb563a8 - _napi_register_module_v1\n  41:        0x15cbc78f8 - _napi_register_module_v1\n  42:        0x186e4fc0c - __pthread_cond_wait\n ✓ Finished writing to disk in 219ms\n ⚠ Support for Turbopack builds is experimental. We don't recommend deploying mission-critical applications to production.\n\n- Turbopack currently always builds production source maps for the browser. This will include project source code if deployed to production.\n- It is expected that your bundle size might be different from `next build` with webpack. This will be improved as we work towards stability.\n- This build is without disk caching; subsequent builds will become faster when disk caching becomes available.\n- When comparing output to webpack builds, make sure to first clear the Next.js cache by deleting the `.next` directory.\n\nProvide feedback for Turbopack builds at https://github.com/vercel/next.js/discussions/77721\n\n> Build error occurred\n[Error: Turbopack build failed with 1 errors:\n./packages/game/src/GameSceneWrapper.tsx\nCode generation for chunk item errored\nAn error occurred while generating the chunk item [project]/packages/game/src/GameSceneWrapper.tsx [app-client] (ecmascript)\n\nCaused by:\n- The high bits of the position 1401321 are not all 0s or 1s: 1\n\nDebug info:\n- An error occurred while generating the chunk item [project]/packages/game/src/GameSceneWrapper.tsx [app-client] (ecmascript)\n- Execution of *EcmascriptChunkItemContent::module_factory failed\n- Execution of <MergedEcmascriptModuleChunkItem as EcmascriptChunkItem>::content_with_async_module_info failed\n- Execution of *EcmascriptChunkItemContent::new failed\n- Execution of EcmascriptModuleContent::new_merged failed\n- The high bits of the position 1401321 are not all 0s or 1s: 1\n\n]\n```\n\n### Provide environment information\n\n```bash\nThis project is configured to use pnpm because /Users/aleks/Documents/GitHub/gredice/package.json has a \"packageManager\" field\nThis project is configured to use pnpm because /Users/aleks/Documents/GitHub/gredice/package.json has a \"packageManager\" field\n\nOperating System:\n  Platform: darwin\n  Arch: arm64\n  Version: Darwin Kernel Version 24.6.0: Mon Jul 14 11:28:30 PDT 2025; root:xnu-11417.140.69~1/RELEASE_ARM64_T6030\n  Available memory (MB): 18432\n  Available CPU cores: 11\nBinaries:\n  Node: 22.13.1\n  npm: 11.3.0\n  Yarn: N/A\n  pnpm: 10.14.0\nRelevant Packages:\n  next: 15.4.6 // Latest available version is detected (15.4.6).\n  eslint-config-next: 15.4.5\n  react: 19.1.1\n  react-dom: 19.1.1\n  typescript: 5.9.2\nNext.js Config:\n  output: N/A\n```\n\n### Which area(s) are affected? (Select all that apply)\n\nTurbopack\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext build (local), Vercel (Deployed)\n\n### Additional context\n\n_No response_\n\n<sub>[PACK-5244](https://linear.app/vercel/issue/PACK-5244/turbopack-build-the-high-bits-of-the-position-1401321-are-not-all-0s)</sub>","closed_by":{"login":"Cy-Tek","id":16470547,"node_id":"MDQ6VXNlcjE2NDcwNTQ3","avatar_url":"https://avatars.githubusercontent.com/u/16470547?v=4","gravatar_id":"","url":"https://api.github.com/users/Cy-Tek","html_url":"https://github.com/Cy-Tek","followers_url":"https://api.github.com/users/Cy-Tek/followers","following_url":"https://api.github.com/users/Cy-Tek/following{/other_user}","gists_url":"https://api.github.com/users/Cy-Tek/gists{/gist_id}","starred_url":"https://api.github.com/users/Cy-Tek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cy-Tek/subscriptions","organizations_url":"https://api.github.com/users/Cy-Tek/orgs","repos_url":"https://api.github.com/users/Cy-Tek/repos","events_url":"https://api.github.com/users/Cy-Tek/events{/privacy}","received_events_url":"https://api.github.com/users/Cy-Tek/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/82584/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/82584/timeline","performed_via_github_app":null,"state_reason":"completed"}