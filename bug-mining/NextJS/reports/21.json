{"url":"https://api.github.com/repos/vercel/next.js/issues/74757","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/74757/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/74757/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/74757/events","html_url":"https://github.com/vercel/next.js/issues/74757","id":2780682813,"node_id":"I_kwDOBC3Cis6lvdo9","number":74757,"title":"revalidateTag/revalidatePath do not work when directly followed by a redirect in a route handler","user":{"login":"WebDevSimplified","id":39717099,"node_id":"MDQ6VXNlcjM5NzE3MDk5","avatar_url":"https://avatars.githubusercontent.com/u/39717099?v=4","gravatar_id":"","url":"https://api.github.com/users/WebDevSimplified","html_url":"https://github.com/WebDevSimplified","followers_url":"https://api.github.com/users/WebDevSimplified/followers","following_url":"https://api.github.com/users/WebDevSimplified/following{/other_user}","gists_url":"https://api.github.com/users/WebDevSimplified/gists{/gist_id}","starred_url":"https://api.github.com/users/WebDevSimplified/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WebDevSimplified/subscriptions","organizations_url":"https://api.github.com/users/WebDevSimplified/orgs","repos_url":"https://api.github.com/users/WebDevSimplified/repos","events_url":"https://api.github.com/users/WebDevSimplified/events{/privacy}","received_events_url":"https://api.github.com/users/WebDevSimplified/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3502592891,"node_id":"LA_kwDOBC3Cis7QxVN7","url":"https://api.github.com/repos/vercel/next.js/labels/Linking%20and%20Navigating","name":"Linking and Navigating","color":"EFE07C","default":false,"description":"Related to Next.js linking (e.g., <Link>) and navigation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":7684431993,"node_id":"LA_kwDOBC3Cis8AAAABygcgeQ","url":"https://api.github.com/repos/vercel/next.js/labels/Cache%20Components","name":"Cache Components","color":"ea02e9","default":false,"description":"Related to the `cacheComponents`, `useCache`, or `ppr` experimental flags."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2025-01-10T17:13:41Z","updated_at":"2025-04-02T00:06:00Z","closed_at":"2025-03-18T21:43:10Z","author_association":"NONE","type":{"id":1930995,"node_id":"IT_kwDOAOSnPM4AHXbz","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T15:36:35Z","updated_at":"2024-07-26T10:33:22Z","is_enabled":true},"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/WebDevSimplified/next-cache-redirect-bug\n\n### To Reproduce\n\n1. Run `npm run dev`\r\n2. Navigate to http://localhost:3000\r\n3. Note the random numbers being generated\r\n4. Navigate to http://localhost:3000/revalidate\r\n5. Notice the numbers are still the same cached versions even though `revalidateTag` was called with the proper tag.\n\n### Current vs. Expected behavior\n\n### Expected\r\n\r\nWhen calling `revalidateTag` or `revalidatePath` in a route handler that redirects the user it should invalidate all caches for that tag or path.\r\n\r\n### Current\r\n\r\nWhen `revalidateTag`/`revalidatePath` is used within a route handler it does not actually invalidate the cache for that tag/path when followed by the `redirect` function. It is the same issue with other similar functions, such as, `notFound`, `forbidden`, etc. Using `NextResponse.redirect`, does work as expected, though, and the cached data is invalidated and refetched.\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: win32\r\n  Arch: x64\r\n  Version: Windows 11 Education\r\n  Available memory (MB): 65300\r\n  Available CPU cores: 24\r\nBinaries:\r\n  Node: 22.7.0\r\n  npm: 10.9.0\r\n  Yarn: 1.22.17\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 15.2.0-canary.3 // Latest available version is detected (15.2.0-canary.3).\r\n  eslint-config-next: N/A\r\n  react: 19.0.0\r\n  react-dom: 19.0.0\r\n  typescript: 5.7.3\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\ndynamicIO, Navigation\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next start (local)\n\n### Additional context\n\nThis seems very related to PR https://github.com/vercel/next.js/pull/70715. This PR was specifically focused on server actions and my best guess is the same problem exists in route handlers as well, but it was not addressed in this PR since this PR was focused solely on server actions.","closed_by":{"login":"unstubbable","id":761683,"node_id":"MDQ6VXNlcjc2MTY4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/761683?v=4","gravatar_id":"","url":"https://api.github.com/users/unstubbable","html_url":"https://github.com/unstubbable","followers_url":"https://api.github.com/users/unstubbable/followers","following_url":"https://api.github.com/users/unstubbable/following{/other_user}","gists_url":"https://api.github.com/users/unstubbable/gists{/gist_id}","starred_url":"https://api.github.com/users/unstubbable/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unstubbable/subscriptions","organizations_url":"https://api.github.com/users/unstubbable/orgs","repos_url":"https://api.github.com/users/unstubbable/repos","events_url":"https://api.github.com/users/unstubbable/events{/privacy}","received_events_url":"https://api.github.com/users/unstubbable/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/74757/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/74757/timeline","performed_via_github_app":null,"state_reason":"completed"}