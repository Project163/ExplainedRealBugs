{"url":"https://api.github.com/repos/vercel/next.js/issues/74185","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/74185/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/74185/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/74185/events","html_url":"https://github.com/vercel/next.js/issues/74185","id":2752589968,"node_id":"I_kwDOBC3Cis6kETCQ","number":74185,"title":"Turbopack \"unreachable code\" string causing warnings in Firefox","user":{"login":"OleSkaar","id":5891010,"node_id":"MDQ6VXNlcjU4OTEwMTA=","avatar_url":"https://avatars.githubusercontent.com/u/5891010?v=4","gravatar_id":"","url":"https://api.github.com/users/OleSkaar","html_url":"https://github.com/OleSkaar","followers_url":"https://api.github.com/users/OleSkaar/followers","following_url":"https://api.github.com/users/OleSkaar/following{/other_user}","gists_url":"https://api.github.com/users/OleSkaar/gists{/gist_id}","starred_url":"https://api.github.com/users/OleSkaar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OleSkaar/subscriptions","organizations_url":"https://api.github.com/users/OleSkaar/orgs","repos_url":"https://api.github.com/users/OleSkaar/repos","events_url":"https://api.github.com/users/OleSkaar/events{/privacy}","received_events_url":"https://api.github.com/users/OleSkaar/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5484123250,"node_id":"LA_kwDOBC3Cis8AAAABRuEUcg","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20turbopack","name":"linear: turbopack","color":"290F77","default":false,"description":"Confirmed issue that is tracked by the Turbopack team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":6384337404,"node_id":"LA_kwDOBC3Cis8AAAABfIlB_A","url":"https://api.github.com/repos/vercel/next.js/labels/Module%20Resolution","name":"Module Resolution","color":"e99695","default":false,"description":"Module resolution (CJS / ESM, module resolving)."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-12-20T11:58:33Z","updated_at":"2025-06-14T00:05:46Z","closed_at":"2025-05-27T22:46:53Z","author_association":"NONE","type":{"id":1930995,"node_id":"IT_kwDOAOSnPM4AHXbz","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T15:36:35Z","updated_at":"2024-07-26T10:33:22Z","is_enabled":true},"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Link to the code that reproduces this issue\r\n\r\nhttps://github.com/OleSkaar/with-turbopack-app\r\n\r\nI've used the [with-turbopack](https://github.com/vercel/next.js/tree/canary/examples/with-turbopack) example here, with two dependencies that were giving the same error in my project: \r\n\r\n`\"@tanstack/react-query\": \"5.62.2\",\r\n    \"@tanstack/react-query-devtools\": \"5.62.2\",`\r\n\r\n### To Reproduce\r\n\r\n1. Start the application with `pnpm run dev`\r\n2. Open the app at `localhost:3000`\r\n3. Check the browser console in Firefox. You should see several warnings about unreachable code:\r\n\r\n![Screenshot 2024-12-20 at 12 59 10](https://github.com/user-attachments/assets/57bd77a3-77cf-4538-8c2b-b24e6eec39e6)\r\n\r\nThis is happening because of the `\"TURBOPACK unreachable\";` statement that's inserted after the return statement in the code from react query dev tools: \r\n\r\n![Screenshot 2024-12-20 at 12 49 38](https://github.com/user-attachments/assets/8a674e26-393a-421d-ba6c-da65abf49bd4)\r\n\r\n\r\n\r\n### Current vs. Expected behavior\r\n\r\nI expect being able to load up this project without warnings in the console. \r\n\r\nI believe Firefox is detecting the `\"TURBOPACK unreachable\";` string as unreachable code and therefore reporting a warning (see [this page](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Stmt_after_return)). \r\n\r\nThe string appears before a function declaration, and this seemed to be the case for the other warnings reported here as well. This function is declared below the return the statement, but because of hoisting it is reachable (and used) higher up in the code. Could the `\"TURBOPACK unreachable\";` string be inserted after the function declaration instead?\r\n\r\n### Provide environment information\r\n\r\n```bash\r\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 23.6.0: Mon Jul 29 21:14:30 PDT 2024; root:xnu-10063.141.2~1/RELEASE_ARM64_T6030\r\n  Available memory (MB): 36864\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 20.13.1\r\n  npm: 10.5.2\r\n  Yarn: 1.22.22\r\n  pnpm: 9.14.4\r\nRelevant Packages:\r\n  next: 15.1.2 // Latest available version is detected (15.1.2).\r\n  eslint-config-next: N/A\r\n  react: 18.3.1\r\n  react-dom: 18.3.1\r\n  typescript: 5.7.2\r\nNext.js Config:\r\n  output: N/A\r\n```\r\n\r\n\r\n### Which area(s) are affected? (Select all that apply)\r\n\r\nDeveloper Experience, Module Resolution, Turbopack\r\n\r\n### Which stage(s) are affected? (Select all that apply)\r\n\r\nnext dev (local)\r\n\r\n### Additional context\r\n\r\n_No response_","closed_by":{"login":"kdy1","id":29931815,"node_id":"MDQ6VXNlcjI5OTMxODE1","avatar_url":"https://avatars.githubusercontent.com/u/29931815?v=4","gravatar_id":"","url":"https://api.github.com/users/kdy1","html_url":"https://github.com/kdy1","followers_url":"https://api.github.com/users/kdy1/followers","following_url":"https://api.github.com/users/kdy1/following{/other_user}","gists_url":"https://api.github.com/users/kdy1/gists{/gist_id}","starred_url":"https://api.github.com/users/kdy1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdy1/subscriptions","organizations_url":"https://api.github.com/users/kdy1/orgs","repos_url":"https://api.github.com/users/kdy1/repos","events_url":"https://api.github.com/users/kdy1/events{/privacy}","received_events_url":"https://api.github.com/users/kdy1/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/74185/reactions","total_count":18,"+1":18,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/74185/timeline","performed_via_github_app":null,"state_reason":"completed"}