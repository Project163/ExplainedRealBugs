[{"id":19135844965,"node_id":"ITAE_lADOBC3Cis7Fx8h8zwAAAAR0ldJl","url":"https://api.github.com/repos/vercel/next.js/issues/events/19135844965","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"issue_type_added","commit_id":null,"commit_url":null,"created_at":"2025-08-13T12:08:38Z","performed_via_github_app":null},{"id":19135849409,"node_id":"LE_lADOBC3Cis7Fx8h8zwAAAAR0lePB","url":"https://api.github.com/repos/vercel/next.js/issues/events/19135849409","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-08-13T12:08:52Z","label":{"name":"Image (next/image)","color":"45ADE8"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183619572","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3183619572","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3183619572,"node_id":"IC_kwDOBC3Cis69wi30","user":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-13T12:16:32Z","updated_at":"2025-08-13T12:16:41Z","body":"hi, well, odd that it stops working between versions ü§î however, I thought one had to copy the public folder?\n\n- https://nextjs.org/docs/app/api-reference/config/next-config-js/output#automatically-copying-traced-files\n\n> This minimal server does not copy the public or .next/static folders by default as these should ideally be handled by a CDN instead, although these folders can be copied to the standalone/public and standalone/.next/static folders manually, after which server.js file will serve these automatically.\n\n\nI can try to investigate this a bit later on if nobody else does","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183619572/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183751492","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3183751492","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3183751492,"node_id":"IC_kwDOBC3Cis69xDFE","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-13T12:39:29Z","updated_at":"2025-08-13T12:39:29Z","body":"When building our Docker image we copy over `/public`\nAfter running `yarn build` we use a Dockerfile similar to below (removed redundant parts) and build an image for both `linux/amd64` and `linux/arm64`\n\n```dockerfile\nFROM node:24-alpine\n\nWORKDIR /app\n\nENV NODE_ENV=production\n\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nextjs\n\nCOPY /public ./public\n\n# Set the correct permission for prerender cache\nRUN mkdir .next\nRUN chown nextjs:nodejs .next\n\nCOPY --chown=nextjs:nodejs /.next/standalone ./\nCOPY --chown=nextjs:nodejs /.next/static ./.next/static\n\nUSER nextjs\n\nEXPOSE 3000\n\nENV PORT=3000\n\n# server.js is created by next build from the standalone output\n# https://nextjs.org/docs/pages/api-reference/next-config-js/output\nENV HOSTNAME=\"0.0.0.0\"\n\nCMD [\"node\", \"server.js\"]\n```\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183751492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183757339","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3183757339","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3183757339,"node_id":"IC_kwDOBC3Cis69xEgb","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-13T12:40:40Z","updated_at":"2025-08-13T12:40:40Z","body":"With that being said, after running\n```\ncp -r public .next/standalone/\ncp -r .next/static .next/standalone/.next\n```\nto emulate the Docker image in my repo the images aren't broken ü§î ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183757339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183769075","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3183769075","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3183769075,"node_id":"IC_kwDOBC3Cis69xHXz","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-13T12:44:08Z","updated_at":"2025-08-13T12:44:08Z","body":"To me this indicates the issue lies with the way we built the Docker image. I will appreciate any insights you might have, but I think this issue can otherwise be closed as the reproduction repo doesn't actually reproduce the issue.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183769075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19137039902,"node_id":"AE_lADOBC3Cis7Fx8h8zwAAAAR0qA4e","url":"https://api.github.com/repos/vercel/next.js/issues/events/19137039902","actor":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2025-08-13T13:04:43Z","assignee":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183959817","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3183959817","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3183959817,"node_id":"IC_kwDOBC3Cis69x18J","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-13T13:35:33Z","updated_at":"2025-08-13T13:35:33Z","body":"I have updated the reproduction repo with a Dockerfile and middleware to be closer to how our application is setup. However, even with this and running\n```\ndocker build . -t foo && docker run -p 3000:3000 foo\n```\nto run the standalone server from the Docker image it still doesn't reproduce the issue we are seeing in our app. At this point I'm at a loss for where the difference lies, but it seems like there's no actual issue in Next üëç ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3183959817/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3185829157","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3185829157","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3185829157,"node_id":"IC_kwDOBC3Cis694-Ul","user":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-13T21:07:11Z","updated_at":"2025-08-13T21:07:11Z","body":"Maybe someone else has some insight, let's keep it open for now. \n\nI wonder though, are you building on-system, and then copying to docker, right? Could there be some dependency that breaks when it runs in a different environment? Just guessing right now.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3185829157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3190843941","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3190843941","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3190843941,"node_id":"IC_kwDOBC3Cis6-MGol","user":{"login":"matt-blanchette","id":4365537,"node_id":"MDQ6VXNlcjQzNjU1Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/4365537?v=4","gravatar_id":"","url":"https://api.github.com/users/matt-blanchette","html_url":"https://github.com/matt-blanchette","followers_url":"https://api.github.com/users/matt-blanchette/followers","following_url":"https://api.github.com/users/matt-blanchette/following{/other_user}","gists_url":"https://api.github.com/users/matt-blanchette/gists{/gist_id}","starred_url":"https://api.github.com/users/matt-blanchette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt-blanchette/subscriptions","organizations_url":"https://api.github.com/users/matt-blanchette/orgs","repos_url":"https://api.github.com/users/matt-blanchette/repos","events_url":"https://api.github.com/users/matt-blanchette/events{/privacy}","received_events_url":"https://api.github.com/users/matt-blanchette/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T07:31:25Z","updated_at":"2025-08-15T07:31:25Z","body":"I hit this same issue on upgrading, caused by #82114 (backported to 15.4.5 in #82175), \nimage optimizer no longer sends headers in internal image request, which failed my middleware requiring auth header.\n\nthe fix was to exclude the public images from middleware matcher: https://github.com/vercel/next.js/discussions/36308","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3190843941/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":1,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"matt-blanchette","id":4365537,"node_id":"MDQ6VXNlcjQzNjU1Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/4365537?v=4","gravatar_id":"","url":"https://api.github.com/users/matt-blanchette","html_url":"https://github.com/matt-blanchette","followers_url":"https://api.github.com/users/matt-blanchette/followers","following_url":"https://api.github.com/users/matt-blanchette/following{/other_user}","gists_url":"https://api.github.com/users/matt-blanchette/gists{/gist_id}","starred_url":"https://api.github.com/users/matt-blanchette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt-blanchette/subscriptions","organizations_url":"https://api.github.com/users/matt-blanchette/orgs","repos_url":"https://api.github.com/users/matt-blanchette/repos","events_url":"https://api.github.com/users/matt-blanchette/events{/privacy}","received_events_url":"https://api.github.com/users/matt-blanchette/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3190983269","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3190983269","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3190983269,"node_id":"IC_kwDOBC3Cis6-Mopl","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T08:51:02Z","updated_at":"2025-08-15T08:51:02Z","body":"Thanks! We use AuthJS for authentication, but was lazy and didn't include it in my reproduction repo üôÄ ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3190983269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3190990467","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3190990467","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3190990467,"node_id":"IC_kwDOBC3Cis6-MqaD","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T08:54:56Z","updated_at":"2025-08-15T08:54:56Z","body":"@matt-blanchette Did you mean to link to a specific comment in that discussion? \n\nI would have thought that our middleware matcher already excluded the `__next/image` route\n```typescript\nexport const config = {\n    matcher: [\n        /*\n         * Match all request paths except for the ones starting with:\n         * - api (API routes)\n         * - login (The login page)\n         * - health (Health check route)\n         * - _next/static (static files)\n         * - _next/image (image optimization files)\n         * - favicon.ico (favicon file)\n         */\n        '/((?!login|api|health|_next/static|_next/image|favicon.ico|logo.svg).*)',\n    ],\n};\n```\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3190990467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19173274419,"node_id":"MEE_lADOBC3Cis7Fx8h8zwAAAAR20PMz","url":"https://api.github.com/repos/vercel/next.js/issues/events/19173274419","actor":{"login":"matt-blanchette","id":4365537,"node_id":"MDQ6VXNlcjQzNjU1Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/4365537?v=4","gravatar_id":"","url":"https://api.github.com/users/matt-blanchette","html_url":"https://github.com/matt-blanchette","followers_url":"https://api.github.com/users/matt-blanchette/followers","following_url":"https://api.github.com/users/matt-blanchette/following{/other_user}","gists_url":"https://api.github.com/users/matt-blanchette/gists{/gist_id}","starred_url":"https://api.github.com/users/matt-blanchette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt-blanchette/subscriptions","organizations_url":"https://api.github.com/users/matt-blanchette/orgs","repos_url":"https://api.github.com/users/matt-blanchette/repos","events_url":"https://api.github.com/users/matt-blanchette/events{/privacy}","received_events_url":"https://api.github.com/users/matt-blanchette/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-08-15T08:54:57Z","performed_via_github_app":null},{"id":19173274435,"node_id":"SE_lADOBC3Cis7Fx8h8zwAAAAR20PND","url":"https://api.github.com/repos/vercel/next.js/issues/events/19173274435","actor":{"login":"matt-blanchette","id":4365537,"node_id":"MDQ6VXNlcjQzNjU1Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/4365537?v=4","gravatar_id":"","url":"https://api.github.com/users/matt-blanchette","html_url":"https://github.com/matt-blanchette","followers_url":"https://api.github.com/users/matt-blanchette/followers","following_url":"https://api.github.com/users/matt-blanchette/following{/other_user}","gists_url":"https://api.github.com/users/matt-blanchette/gists{/gist_id}","starred_url":"https://api.github.com/users/matt-blanchette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt-blanchette/subscriptions","organizations_url":"https://api.github.com/users/matt-blanchette/orgs","repos_url":"https://api.github.com/users/matt-blanchette/repos","events_url":"https://api.github.com/users/matt-blanchette/events{/privacy}","received_events_url":"https://api.github.com/users/matt-blanchette/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-08-15T08:54:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191004539","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3191004539","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3191004539,"node_id":"IC_kwDOBC3Cis6-Mt17","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T09:01:18Z","updated_at":"2025-08-15T09:01:18Z","body":"I think I understand, the `_next/image` route isn't matched by the middleware, but the route to the images themselves _are_ which lead to the issue because the auth headers are not forwarded when the image optimizer fetches the images (causing the optimizer to be blocked by the middleware).\n\nI suppose as a workaround I can add a `/public` folder inside the `public` folder and then add the `/public` path to the ignore list in the middleware matcher (and update all my paths to the images)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191004539/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19174758460,"node_id":"RTE_lADOBC3Cis7Fx8h8zwAAAAR255g8","url":"https://api.github.com/repos/vercel/next.js/issues/events/19174758460","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2025-08-15T11:13:25Z","rename":{"from":"Public images fail to serve using Next/Image when using standalone server","to":"[Regression] Image optimizer fails to serve images on authenticated routes"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191353707","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3191353707","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3191353707,"node_id":"IC_kwDOBC3Cis6-ODFr","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T12:03:13Z","updated_at":"2025-08-15T12:03:13Z","body":"Thanks @matt-blanchette for your insights. It has allowed me to workaround the issue in our application (we don't _need_ authorization for the images being served from the `/public` folder) and to update the reproduction repo.\n\n@icyJoseph I have updated the description and reproduction repo to match what's actually happening. I don't know if it's desirable to fix this or just accept the regression.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191353707/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19175243096,"node_id":"MEE_lADOBC3Cis7Fx8h8zwAAAAR27v1Y","url":"https://api.github.com/repos/vercel/next.js/issues/events/19175243096","actor":{"login":"matt-blanchette","id":4365537,"node_id":"MDQ6VXNlcjQzNjU1Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/4365537?v=4","gravatar_id":"","url":"https://api.github.com/users/matt-blanchette","html_url":"https://github.com/matt-blanchette","followers_url":"https://api.github.com/users/matt-blanchette/followers","following_url":"https://api.github.com/users/matt-blanchette/following{/other_user}","gists_url":"https://api.github.com/users/matt-blanchette/gists{/gist_id}","starred_url":"https://api.github.com/users/matt-blanchette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt-blanchette/subscriptions","organizations_url":"https://api.github.com/users/matt-blanchette/orgs","repos_url":"https://api.github.com/users/matt-blanchette/repos","events_url":"https://api.github.com/users/matt-blanchette/events{/privacy}","received_events_url":"https://api.github.com/users/matt-blanchette/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-08-15T12:03:14Z","performed_via_github_app":null},{"id":19175243115,"node_id":"SE_lADOBC3Cis7Fx8h8zwAAAAR27v1r","url":"https://api.github.com/repos/vercel/next.js/issues/events/19175243115","actor":{"login":"matt-blanchette","id":4365537,"node_id":"MDQ6VXNlcjQzNjU1Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/4365537?v=4","gravatar_id":"","url":"https://api.github.com/users/matt-blanchette","html_url":"https://github.com/matt-blanchette","followers_url":"https://api.github.com/users/matt-blanchette/followers","following_url":"https://api.github.com/users/matt-blanchette/following{/other_user}","gists_url":"https://api.github.com/users/matt-blanchette/gists{/gist_id}","starred_url":"https://api.github.com/users/matt-blanchette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matt-blanchette/subscriptions","organizations_url":"https://api.github.com/users/matt-blanchette/orgs","repos_url":"https://api.github.com/users/matt-blanchette/repos","events_url":"https://api.github.com/users/matt-blanchette/events{/privacy}","received_events_url":"https://api.github.com/users/matt-blanchette/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-08-15T12:03:14Z","performed_via_github_app":null},{"id":19175243131,"node_id":"MEE_lADOBC3Cis7Fx8h8zwAAAAR27v17","url":"https://api.github.com/repos/vercel/next.js/issues/events/19175243131","actor":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-08-15T12:03:14Z","performed_via_github_app":null},{"id":19175243139,"node_id":"SE_lADOBC3Cis7Fx8h8zwAAAAR27v2D","url":"https://api.github.com/repos/vercel/next.js/issues/events/19175243139","actor":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-08-15T12:03:14Z","performed_via_github_app":null},{"id":19175254788,"node_id":"RTE_lADOBC3Cis7Fx8h8zwAAAAR27ysE","url":"https://api.github.com/repos/vercel/next.js/issues/events/19175254788","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2025-08-15T12:04:26Z","rename":{"from":"[Regression] Image optimizer fails to serve images on authenticated routes","to":"[Regression] Image optimizer fails to serve images on routes requiring autorization"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191397217","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3191397217","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3191397217,"node_id":"IC_kwDOBC3Cis6-ONth","user":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T12:30:59Z","updated_at":"2025-08-15T12:30:59Z","body":"Aha, I see, so we fixed `_next/image` not being hit by middleware. And when the image itself is in the public directory, then the loader makes an additional call to fetch the resource, that's the issue right?\n\nI realize now I had run into this before https://github.com/vercel/next.js/discussions/80899#discussioncomment-13596134\n\nI think maybe I have to add this to the docs ü§î - do you mind changing this to a documentation issue?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191397217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191411205","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3191411205","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3191411205,"node_id":"IC_kwDOBC3Cis6-ORIF","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T12:39:23Z","updated_at":"2025-08-15T12:39:23Z","body":"If I understand correctly the issue is as follows:\n* There's middleware that applies to the route the resource is on, e.g. `/my-image.jpg`\n* The middleware rejects serving the resource for some reason\n\nDue to changes in https://github.com/vercel/next.js/pull/82114 the image optimiser no longer forwards headers when fetching the image, so if the middleware is configured to perform authorization via headers, e.g. using AuthJS, then it'll reject the request.\n\nThis is a regression from the behavior in previous versions where headers _were_ forwarded and it was possible to protect those resources using middleware.\n\nI.e. I'm not sure I entirely agree that it's purely a documentation issue.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191411205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191414364","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3191414364","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3191414364,"node_id":"IC_kwDOBC3Cis6-OR5c","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T12:41:16Z","updated_at":"2025-08-15T12:49:59Z","body":"Of course it can be argued that protecting resources in the `/public` folder via middleware isn't necessarily something that should be supported, but it used to be supported and now it isn't.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191414364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191415895","html_url":"https://github.com/vercel/next.js/issues/82610#issuecomment-3191415895","issue_url":"https://api.github.com/repos/vercel/next.js/issues/82610","id":3191415895,"node_id":"IC_kwDOBC3Cis6-OSRX","user":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-15T12:42:08Z","updated_at":"2025-08-15T12:42:08Z","body":"E.g. if you check out the reproduction repo and downgrade to Next 15.3.5 then it'll work fine","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/3191415895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jakobmerrild","id":2920412,"node_id":"MDQ6VXNlcjI5MjA0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/2920412?v=4","gravatar_id":"","url":"https://api.github.com/users/jakobmerrild","html_url":"https://github.com/jakobmerrild","followers_url":"https://api.github.com/users/jakobmerrild/followers","following_url":"https://api.github.com/users/jakobmerrild/following{/other_user}","gists_url":"https://api.github.com/users/jakobmerrild/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobmerrild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobmerrild/subscriptions","organizations_url":"https://api.github.com/users/jakobmerrild/orgs","repos_url":"https://api.github.com/users/jakobmerrild/repos","events_url":"https://api.github.com/users/jakobmerrild/events{/privacy}","received_events_url":"https://api.github.com/users/jakobmerrild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19186019275,"node_id":"SE_lADOBC3Cis7Fx8h8zwAAAAR3k2vL","url":"https://api.github.com/repos/vercel/next.js/issues/events/19186019275","actor":{"login":"volk-mivogo","id":79542640,"node_id":"MDQ6VXNlcjc5NTQyNjQw","avatar_url":"https://avatars.githubusercontent.com/u/79542640?v=4","gravatar_id":"","url":"https://api.github.com/users/volk-mivogo","html_url":"https://github.com/volk-mivogo","followers_url":"https://api.github.com/users/volk-mivogo/followers","following_url":"https://api.github.com/users/volk-mivogo/following{/other_user}","gists_url":"https://api.github.com/users/volk-mivogo/gists{/gist_id}","starred_url":"https://api.github.com/users/volk-mivogo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/volk-mivogo/subscriptions","organizations_url":"https://api.github.com/users/volk-mivogo/orgs","repos_url":"https://api.github.com/users/volk-mivogo/repos","events_url":"https://api.github.com/users/volk-mivogo/events{/privacy}","received_events_url":"https://api.github.com/users/volk-mivogo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-08-16T10:22:49Z","performed_via_github_app":null},{"id":19186842864,"node_id":"REFE_lADOBC3Cis7Fx8h8zwAAAAR3n_zw","url":"https://api.github.com/repos/vercel/next.js/issues/events/19186842864","actor":{"login":"Raghuboi","id":82239949,"node_id":"MDQ6VXNlcjgyMjM5OTQ5","avatar_url":"https://avatars.githubusercontent.com/u/82239949?v=4","gravatar_id":"","url":"https://api.github.com/users/Raghuboi","html_url":"https://github.com/Raghuboi","followers_url":"https://api.github.com/users/Raghuboi/followers","following_url":"https://api.github.com/users/Raghuboi/following{/other_user}","gists_url":"https://api.github.com/users/Raghuboi/gists{/gist_id}","starred_url":"https://api.github.com/users/Raghuboi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raghuboi/subscriptions","organizations_url":"https://api.github.com/users/Raghuboi/orgs","repos_url":"https://api.github.com/users/Raghuboi/repos","events_url":"https://api.github.com/users/Raghuboi/events{/privacy}","received_events_url":"https://api.github.com/users/Raghuboi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ef674e7d7432184684aca91aa6ef20c163b2c641","commit_url":"https://api.github.com/repos/Raghuboi/next.js/commits/ef674e7d7432184684aca91aa6ef20c163b2c641","created_at":"2025-08-16T14:04:09Z","performed_via_github_app":null},{"actor":{"login":"Raghuboi","id":82239949,"node_id":"MDQ6VXNlcjgyMjM5OTQ5","avatar_url":"https://avatars.githubusercontent.com/u/82239949?v=4","gravatar_id":"","url":"https://api.github.com/users/Raghuboi","html_url":"https://github.com/Raghuboi","followers_url":"https://api.github.com/users/Raghuboi/followers","following_url":"https://api.github.com/users/Raghuboi/following{/other_user}","gists_url":"https://api.github.com/users/Raghuboi/gists{/gist_id}","starred_url":"https://api.github.com/users/Raghuboi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raghuboi/subscriptions","organizations_url":"https://api.github.com/users/Raghuboi/orgs","repos_url":"https://api.github.com/users/Raghuboi/repos","events_url":"https://api.github.com/users/Raghuboi/events{/privacy}","received_events_url":"https://api.github.com/users/Raghuboi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-16T14:16:29Z","updated_at":"2025-08-16T14:16:29Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/vercel/next.js/issues/82705","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/82705/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/82705/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/82705/events","html_url":"https://github.com/vercel/next.js/pull/82705","id":3327318482,"node_id":"PR_kwDOBC3Cis6j8WHo","number":82705,"title":"docs: add middleware troubleshooting and image optimization guidance","user":{"login":"Raghuboi","id":82239949,"node_id":"MDQ6VXNlcjgyMjM5OTQ5","avatar_url":"https://avatars.githubusercontent.com/u/82239949?v=4","gravatar_id":"","url":"https://api.github.com/users/Raghuboi","html_url":"https://github.com/Raghuboi","followers_url":"https://api.github.com/users/Raghuboi/followers","following_url":"https://api.github.com/users/Raghuboi/following{/other_user}","gists_url":"https://api.github.com/users/Raghuboi/gists{/gist_id}","starred_url":"https://api.github.com/users/Raghuboi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raghuboi/subscriptions","organizations_url":"https://api.github.com/users/Raghuboi/orgs","repos_url":"https://api.github.com/users/Raghuboi/repos","events_url":"https://api.github.com/users/Raghuboi/events{/privacy}","received_events_url":"https://api.github.com/users/Raghuboi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3644980154,"node_id":"LA_kwDOBC3Cis7ZQfu6","url":"https://api.github.com/repos/vercel/next.js/labels/Documentation","name":"Documentation","color":"C2E0C6","default":false,"description":"Related to Next.js' official documentation."}],"state":"open","locked":false,"assignee":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2025-08-16T14:16:27Z","updated_at":"2025-10-16T17:44:27Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":70107786,"node_id":"MDEwOlJlcG9zaXRvcnk3MDEwNzc4Ng==","name":"next.js","full_name":"vercel/next.js","private":false,"owner":{"login":"vercel","id":14985020,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE0OTg1MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14985020?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel","html_url":"https://github.com/vercel","followers_url":"https://api.github.com/users/vercel/followers","following_url":"https://api.github.com/users/vercel/following{/other_user}","gists_url":"https://api.github.com/users/vercel/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel/subscriptions","organizations_url":"https://api.github.com/users/vercel/orgs","repos_url":"https://api.github.com/users/vercel/repos","events_url":"https://api.github.com/users/vercel/events{/privacy}","received_events_url":"https://api.github.com/users/vercel/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/vercel/next.js","description":"The React Framework","fork":false,"url":"https://api.github.com/repos/vercel/next.js","forks_url":"https://api.github.com/repos/vercel/next.js/forks","keys_url":"https://api.github.com/repos/vercel/next.js/keys{/key_id}","collaborators_url":"https://api.github.com/repos/vercel/next.js/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/vercel/next.js/teams","hooks_url":"https://api.github.com/repos/vercel/next.js/hooks","issue_events_url":"https://api.github.com/repos/vercel/next.js/issues/events{/number}","events_url":"https://api.github.com/repos/vercel/next.js/events","assignees_url":"https://api.github.com/repos/vercel/next.js/assignees{/user}","branches_url":"https://api.github.com/repos/vercel/next.js/branches{/branch}","tags_url":"https://api.github.com/repos/vercel/next.js/tags","blobs_url":"https://api.github.com/repos/vercel/next.js/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/vercel/next.js/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/vercel/next.js/git/refs{/sha}","trees_url":"https://api.github.com/repos/vercel/next.js/git/trees{/sha}","statuses_url":"https://api.github.com/repos/vercel/next.js/statuses/{sha}","languages_url":"https://api.github.com/repos/vercel/next.js/languages","stargazers_url":"https://api.github.com/repos/vercel/next.js/stargazers","contributors_url":"https://api.github.com/repos/vercel/next.js/contributors","subscribers_url":"https://api.github.com/repos/vercel/next.js/subscribers","subscription_url":"https://api.github.com/repos/vercel/next.js/subscription","commits_url":"https://api.github.com/repos/vercel/next.js/commits{/sha}","git_commits_url":"https://api.github.com/repos/vercel/next.js/git/commits{/sha}","comments_url":"https://api.github.com/repos/vercel/next.js/comments{/number}","issue_comment_url":"https://api.github.com/repos/vercel/next.js/issues/comments{/number}","contents_url":"https://api.github.com/repos/vercel/next.js/contents/{+path}","compare_url":"https://api.github.com/repos/vercel/next.js/compare/{base}...{head}","merges_url":"https://api.github.com/repos/vercel/next.js/merges","archive_url":"https://api.github.com/repos/vercel/next.js/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/vercel/next.js/downloads","issues_url":"https://api.github.com/repos/vercel/next.js/issues{/number}","pulls_url":"https://api.github.com/repos/vercel/next.js/pulls{/number}","milestones_url":"https://api.github.com/repos/vercel/next.js/milestones{/number}","notifications_url":"https://api.github.com/repos/vercel/next.js/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/vercel/next.js/labels{/name}","releases_url":"https://api.github.com/repos/vercel/next.js/releases{/id}","deployments_url":"https://api.github.com/repos/vercel/next.js/deployments","created_at":"2016-10-05T23:32:51Z","updated_at":"2025-11-10T10:44:26Z","pushed_at":"2025-11-10T10:56:53Z","git_url":"git://github.com/vercel/next.js.git","ssh_url":"git@github.com:vercel/next.js.git","clone_url":"https://github.com/vercel/next.js.git","svn_url":"https://github.com/vercel/next.js","homepage":"https://nextjs.org","size":2399702,"stargazers_count":135568,"watchers_count":135568,"language":"JavaScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":29788,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3207,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["blog","browser","compiler","components","hybrid","nextjs","node","react","server-rendering","ssg","static","static-site-generator","universal","vercel"],"visibility":"public","forks":29788,"open_issues":3207,"watchers":135568,"default_branch":"canary","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/82705","html_url":"https://github.com/vercel/next.js/pull/82705","diff_url":"https://github.com/vercel/next.js/pull/82705.diff","patch_url":"https://github.com/vercel/next.js/pull/82705.patch","merged_at":null},"body":"  ### What?\r\n\r\n  Added comprehensive middleware documentation to address gaps around image loading failures when authentication middleware processes\r\n  `/_next/image` requests.\r\n\r\n  ### Why?\r\n\r\n  Users experience images failing to load on authenticated routes when middleware interferes with Next.js Image Optimization API requests.\r\n  While the docs mentioned excluding `_next/image` from middleware matchers, they didn't explain the critical reasoning or provide\r\n  troubleshooting guidance for this common issue.\r\n\r\n  ### How?\r\n\r\n  **Authentication Guide (`docs/01-app/02-guides/authentication.mdx`)**:\r\n  - Added \"Middleware Matcher\" section explaining regex pattern breakdown\r\n  - Documented why `_next/image` exclusion prevents image loading failures\r\n  - Provided API route alternative for protected images\r\n\r\n  **Middleware API Reference (`docs/01-app/03-api-reference/03-file-conventions/middleware.mdx`)**:\r\n  - Added comprehensive \"Troubleshooting\" section with 4 common issues:\r\n    - Images not loading with authentication middleware\r\n    - Middleware not running on routes\r\n    - Performance issues\r\n    - Edge Runtime compatibility\r\n\r\n  **Key improvements**:\r\n  - Clear explanation of middleware/image optimization interaction\r\n  - Practical code examples for common patterns\r\n  - Performance optimization guidance\r\n  - Alternative approaches for protected images\r\n\r\n  Related to #82610","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/82705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/82705/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":19225827849,"node_id":"SE_lADOBC3Cis7Fx8h8zwAAAAR58toJ","url":"https://api.github.com/repos/vercel/next.js/issues/events/19225827849","actor":{"login":"lamc305","id":103289255,"node_id":"U_kgDOBigRpw","avatar_url":"https://avatars.githubusercontent.com/u/103289255?v=4","gravatar_id":"","url":"https://api.github.com/users/lamc305","html_url":"https://github.com/lamc305","followers_url":"https://api.github.com/users/lamc305/followers","following_url":"https://api.github.com/users/lamc305/following{/other_user}","gists_url":"https://api.github.com/users/lamc305/gists{/gist_id}","starred_url":"https://api.github.com/users/lamc305/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamc305/subscriptions","organizations_url":"https://api.github.com/users/lamc305/orgs","repos_url":"https://api.github.com/users/lamc305/repos","events_url":"https://api.github.com/users/lamc305/events{/privacy}","received_events_url":"https://api.github.com/users/lamc305/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-08-19T14:13:12Z","performed_via_github_app":null}]