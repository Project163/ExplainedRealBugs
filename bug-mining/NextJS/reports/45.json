{"url":"https://api.github.com/repos/vercel/next.js/issues/75541","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/75541/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/75541/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/75541/events","html_url":"https://github.com/vercel/next.js/issues/75541","id":2824452242,"node_id":"I_kwDOBC3Cis6oWbiS","number":75541,"title":"Client cannot recover from version skew","user":{"login":"knpwrs","id":174864,"node_id":"MDQ6VXNlcjE3NDg2NA==","avatar_url":"https://avatars.githubusercontent.com/u/174864?v=4","gravatar_id":"","url":"https://api.github.com/users/knpwrs","html_url":"https://github.com/knpwrs","followers_url":"https://api.github.com/users/knpwrs/followers","following_url":"https://api.github.com/users/knpwrs/following{/other_user}","gists_url":"https://api.github.com/users/knpwrs/gists{/gist_id}","starred_url":"https://api.github.com/users/knpwrs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knpwrs/subscriptions","organizations_url":"https://api.github.com/users/knpwrs/orgs","repos_url":"https://api.github.com/users/knpwrs/repos","events_url":"https://api.github.com/users/knpwrs/events{/privacy}","received_events_url":"https://api.github.com/users/knpwrs/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4932840687,"node_id":"LA_kwDOBC3Cis8AAAABJgUs7w","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20next","name":"linear: next","color":"A53EF5","default":false,"description":"Confirmed issue that is tracked by the Next.js team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":8064249485,"node_id":"LA_kwDOBC3Cis8AAAAB4KqujQ","url":"https://api.github.com/repos/vercel/next.js/labels/Server%20Actions","name":"Server Actions","color":"EF04D1","default":false,"description":"Related to Server Actions."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":51,"created_at":"2025-01-31T21:46:58Z","updated_at":"2025-07-03T00:06:07Z","closed_at":"2025-06-18T09:23:04Z","author_association":"NONE","type":{"id":25076157,"node_id":"IT_kwDOAOSnPM4BfqG9","name":"Documentation","description":"An issue related to documentation","color":"orange","created_at":"2025-01-16T18:30:16Z","updated_at":"2025-01-16T18:30:45Z","is_enabled":true},"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/knpwrs/nextjs-skew-recovery-bug\n\n### To Reproduce\n\n1. Run `npm run build`\n2. Run `npm start`\n3. Open `http://localhost:3000` and make sure the browser development tools are open.\n4. Press the `Server Action` button.\n5. Observe logs on the server indicating the function was called.\n6. The network response has a `200` response code indicating no errors and a `text/x-component` mime type.\n7. Shutdown the server, leave the app running in the web browser.\n8. Rename the `logServer` function in `actions.ts` and update the import and usage in `components.tsx` to match (for instance, `logServer` can be renamed to `logServer2`).\n9. Run `npm run build`\n10. Run `npm start`\n11. Go to the already running app\n12. Press the `Server Action` button.\n13. Observe an error on the server: `[Error: Failed to find Server Action \"006c3c7b08402d18959b82a9692db1011f32bcc8fd\". This request might be from an older or newer deployment. Original error: Cannot read properties of undefined (reading 'workers')]`\n14. There are no errors on the client. Error boundaries do not trigger. There are no uncaught errors in the console. There is no way for the client to know that the function call failed and no way for the client to recover.\n15. The network response has a `200` response code indicating no errors and a `text/html` mime type.\n16. Press the `Throw Error` button. Observe an uncaught error in the console.\n\nNote that I couldn't get `error.tsx` or `global-error.tsx` to work for either the failed function call or the thrown client-side error.\n\n### Current vs. Expected behavior\n\nCurrently the client is not able to recover from version skew when a server action cannot be called. Everything appears normal to the client.\n\nI would expect the error boundary to catch an error so the client can refresh and recover.\n\n### Provide environment information\n\n```bash\nOperating System:\n  Platform: darwin\n  Arch: arm64\n  Version: Darwin Kernel Version 24.2.0: Fri Dec  6 19:01:59 PST 2024; root:xnu-11215.61.5~2/RELEASE_ARM64_T6000\n  Available memory (MB): 32768\n  Available CPU cores: 10\nBinaries:\n  Node: 23.6.0\n  npm: 10.9.2\n  Yarn: 1.22.19\n  pnpm: 9.12.2\nRelevant Packages:\n  next: 15.2.0-canary.33 // Latest available version is detected (15.2.0-canary.33).\n  eslint-config-next: N/A\n  react: 19.0.0\n  react-dom: 19.0.0\n  typescript: 5.7.3\nNext.js Config:\n  output: N/A\n```\n\n### Which area(s) are affected? (Select all that apply)\n\nServer Actions, Error Handling\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext start (local), Other (Deployed), Vercel (Deployed)\n\n### Additional context\n\nThis is particularly problematic given the following quote from [this blog post](https://nextjs.org/blog/next-15#enhanced-security-for-server-actions):\n\n> Secure action IDs: Next.js now creates unguessable, non-deterministic IDs to allow the client to reference and call the Server Action. These IDs are periodically recalculated between builds for enhanced security.\n\nI couldn't find any documentation about this. It appears that action IDs can change at any time and clients which haven't refreshed yet won't have any way to deal with this.","closed_by":{"login":"unstubbable","id":761683,"node_id":"MDQ6VXNlcjc2MTY4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/761683?v=4","gravatar_id":"","url":"https://api.github.com/users/unstubbable","html_url":"https://github.com/unstubbable","followers_url":"https://api.github.com/users/unstubbable/followers","following_url":"https://api.github.com/users/unstubbable/following{/other_user}","gists_url":"https://api.github.com/users/unstubbable/gists{/gist_id}","starred_url":"https://api.github.com/users/unstubbable/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unstubbable/subscriptions","organizations_url":"https://api.github.com/users/unstubbable/orgs","repos_url":"https://api.github.com/users/unstubbable/repos","events_url":"https://api.github.com/users/unstubbable/events{/privacy}","received_events_url":"https://api.github.com/users/unstubbable/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/75541/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/75541/timeline","performed_via_github_app":null,"state_reason":"completed"}