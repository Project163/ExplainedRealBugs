{"url":"https://api.github.com/repos/babel/babel/issues/10324","repository_url":"https://api.github.com/repos/babel/babel","labels_url":"https://api.github.com/repos/babel/babel/issues/10324/labels{/name}","comments_url":"https://api.github.com/repos/babel/babel/issues/10324/comments","events_url":"https://api.github.com/repos/babel/babel/issues/10324/events","html_url":"https://github.com/babel/babel/issues/10324","id":479667534,"node_id":"MDU6SXNzdWU0Nzk2Njc1MzQ=","number":10324,"title":"Flow comments change order of comments at beginning of file","user":{"login":"ziadkh0","id":603764,"node_id":"MDQ6VXNlcjYwMzc2NA==","avatar_url":"https://avatars.githubusercontent.com/u/603764?v=4","gravatar_id":"","url":"https://api.github.com/users/ziadkh0","html_url":"https://github.com/ziadkh0","followers_url":"https://api.github.com/users/ziadkh0/followers","following_url":"https://api.github.com/users/ziadkh0/following{/other_user}","gists_url":"https://api.github.com/users/ziadkh0/gists{/gist_id}","starred_url":"https://api.github.com/users/ziadkh0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziadkh0/subscriptions","organizations_url":"https://api.github.com/users/ziadkh0/orgs","repos_url":"https://api.github.com/users/ziadkh0/repos","events_url":"https://api.github.com/users/ziadkh0/events{/privacy}","received_events_url":"https://api.github.com/users/ziadkh0/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":445632327,"node_id":"MDU6TGFiZWw0NDU2MzIzMjc=","url":"https://api.github.com/repos/babel/babel/labels/area:%20flow","name":"area: flow","color":"c5def5","default":false,"description":null},{"id":500939970,"node_id":"MDU6TGFiZWw1MDA5Mzk5NzA=","url":"https://api.github.com/repos/babel/babel/labels/area:%20comments","name":"area: comments","color":"c5def5","default":false,"description":null},{"id":919437103,"node_id":"MDU6TGFiZWw5MTk0MzcxMDM=","url":"https://api.github.com/repos/babel/babel/labels/outdated","name":"outdated","color":"ededed","default":false,"description":"A closed issue/PR that is archived due to age. Recommended to make a new issue"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-08-12T14:10:08Z","updated_at":"2019-11-13T14:10:56Z","closed_at":"2019-08-14T13:46:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bug Report\r\n\r\n**Current Behavior**\r\n`@babel/plugin-transform-flow-comments` change order of comments at beginning of file when the file starts with a comment followed by a flow statement\r\n\r\n```js\r\n/*:: import type {A} from 'a';*/\r\n\r\n/**/\r\nX;\r\n```\r\n\r\n**Input Code**\r\n[REPL link](https://babeljs.io/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=true&code_lz=PQKhwKASwWwBwPYCcAuACFBPOBTNBvAQQF80AzJBGNAcgEMaBuCADSA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=false&presets=&prettier=false&targets=&version=7.5.5&externalPlugins=%40babel%2Fplugin-transform-flow-comments%407.5.5)\r\n\r\n```js\r\n/**/\r\nimport type {A} from 'a';\r\nX\r\n```\r\n\r\n**Expected behavior/code**\r\n\r\n```js\r\n/**/\r\n/*:: import type {A} from 'a';*/\r\nX;\r\n```\r\n\r\n**Environment**\r\n- Babel version(s): v7.5.5\r\n- How you are using Babel: Online REPL\r\n\r\n**Possible Solution**\r\n```js\r\n  //...\r\n  function attachComment(path, comment) {\r\n    let attach = path.getPrevSibling();\r\n    let where = \"trailing\";\r\n    if (!attach.node) {\r\n      attach = path.getNextSibling();\r\n      where = \"leading\";\r\n    }\r\n    if (!attach.node) {\r\n      attach = path.parentPath;\r\n      where = \"inner\";\r\n    }\r\n    attach.addComment(where, comment);\r\n    path.remove();\r\n  }\r\n  //...\r\n```\r\n","closed_by":{"login":"nicolo-ribaudo","id":7000710,"node_id":"MDQ6VXNlcjcwMDA3MTA=","avatar_url":"https://avatars.githubusercontent.com/u/7000710?v=4","gravatar_id":"","url":"https://api.github.com/users/nicolo-ribaudo","html_url":"https://github.com/nicolo-ribaudo","followers_url":"https://api.github.com/users/nicolo-ribaudo/followers","following_url":"https://api.github.com/users/nicolo-ribaudo/following{/other_user}","gists_url":"https://api.github.com/users/nicolo-ribaudo/gists{/gist_id}","starred_url":"https://api.github.com/users/nicolo-ribaudo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicolo-ribaudo/subscriptions","organizations_url":"https://api.github.com/users/nicolo-ribaudo/orgs","repos_url":"https://api.github.com/users/nicolo-ribaudo/repos","events_url":"https://api.github.com/users/nicolo-ribaudo/events{/privacy}","received_events_url":"https://api.github.com/users/nicolo-ribaudo/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/babel/babel/issues/10324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/babel/babel/issues/10324/timeline","performed_via_github_app":null,"state_reason":"completed"}