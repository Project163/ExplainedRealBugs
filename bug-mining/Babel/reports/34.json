{"url":"https://api.github.com/repos/babel/babel/issues/8928","repository_url":"https://api.github.com/repos/babel/babel","labels_url":"https://api.github.com/repos/babel/babel/issues/8928/labels{/name}","comments_url":"https://api.github.com/repos/babel/babel/issues/8928/comments","events_url":"https://api.github.com/repos/babel/babel/issues/8928/events","html_url":"https://github.com/babel/babel/issues/8928","id":374186569,"node_id":"MDU6SXNzdWUzNzQxODY1Njk=","number":8928,"title":"Make all the polyfills available without global namespace pollution","user":{"login":"millsp","id":18401805,"node_id":"MDQ6VXNlcjE4NDAxODA1","avatar_url":"https://avatars.githubusercontent.com/u/18401805?v=4","gravatar_id":"","url":"https://api.github.com/users/millsp","html_url":"https://github.com/millsp","followers_url":"https://api.github.com/users/millsp/followers","following_url":"https://api.github.com/users/millsp/following{/other_user}","gists_url":"https://api.github.com/users/millsp/gists{/gist_id}","starred_url":"https://api.github.com/users/millsp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/millsp/subscriptions","organizations_url":"https://api.github.com/users/millsp/orgs","repos_url":"https://api.github.com/users/millsp/repos","events_url":"https://api.github.com/users/millsp/events{/privacy}","received_events_url":"https://api.github.com/users/millsp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":919437103,"node_id":"MDU6TGFiZWw5MTk0MzcxMDM=","url":"https://api.github.com/repos/babel/babel/labels/outdated","name":"outdated","color":"ededed","default":false,"description":"A closed issue/PR that is archived due to age. Recommended to make a new issue"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-10-26T00:51:50Z","updated_at":"2019-06-18T20:51:27Z","closed_at":"2019-03-19T20:07:46Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Feature Request\r\n\r\nThis is a draft proposal that aims to make all the polyfills available without global namespace pollution.\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nMake all the polyfills available on the runtime to make development easier. Development of libraries is possible but some of de features (polyfills) are not available when using **babel-runtime**. These are the instance methods (polyfills) like *.includes()*, *.repeat()*... that can pollute our global scope.\r\n\r\n**Describe the solution you'd like**\r\n\r\nInclude all the missing instance methods like (.includes, .repeat ...) and without polluting the global scope.\r\nTo to so, babel would have to determine the type of the instance at runtime to transfer the call to a static one.\r\n\r\n```ts\r\n console.log(['a', 'b', 'c'].includes('a'));\r\n```\r\nwould be transformed to\r\n\r\n```js\r\nvar _arrayIncludes = require(\"core-js-pure/features/array/includes\");\r\nvar _stringIncludes = require(\"core-js-pure/features/string/includes\");\r\n\r\n// Here is decided what built-in method to call based on instance type\r\nvar _polyfillsCalls = (instance, methodName, methodParams) => {\r\n     // ... Use methodName to determine that it can only be 'String' or 'Array' (because of includes)\r\n     // This feature has to be generic and return the maybe-type of the instance calling the method\r\n     // This can be possibly done by mapping function names to their possible instance types\r\n     // For example .includes() calls can be mapped to types => ['string', 'Array'] !\r\n\r\n     // Then we proceed with the execution with type detection #map\r\n\r\n     if (Array.isArray(instance))\r\n          return _arrayIncludes(instance, ...methodParams);\r\n     \r\n     if (typeof instance === 'string')\r\n          return _stringIncludes(instance, ...methodParams);\r\n\r\n     // No polyfill could be mached, default call\r\n     return instance[methodName](methodParams);\r\n};\r\n\r\nconsole.log(_polyfillsCalls(['a', 'b', 'c'], 'includes', ['a']);\r\n```\r\n\r\nFor this, core-js features could be used directly. Not sure that all polyfills can be covered this way, but it should cover most of them...","closed_by":{"login":"nicolo-ribaudo","id":7000710,"node_id":"MDQ6VXNlcjcwMDA3MTA=","avatar_url":"https://avatars.githubusercontent.com/u/7000710?v=4","gravatar_id":"","url":"https://api.github.com/users/nicolo-ribaudo","html_url":"https://github.com/nicolo-ribaudo","followers_url":"https://api.github.com/users/nicolo-ribaudo/followers","following_url":"https://api.github.com/users/nicolo-ribaudo/following{/other_user}","gists_url":"https://api.github.com/users/nicolo-ribaudo/gists{/gist_id}","starred_url":"https://api.github.com/users/nicolo-ribaudo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicolo-ribaudo/subscriptions","organizations_url":"https://api.github.com/users/nicolo-ribaudo/orgs","repos_url":"https://api.github.com/users/nicolo-ribaudo/repos","events_url":"https://api.github.com/users/nicolo-ribaudo/events{/privacy}","received_events_url":"https://api.github.com/users/nicolo-ribaudo/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/babel/babel/issues/8928/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/babel/babel/issues/8928/timeline","performed_via_github_app":null,"state_reason":"completed"}