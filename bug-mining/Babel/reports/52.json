{"url":"https://api.github.com/repos/babel/babel/issues/9851","repository_url":"https://api.github.com/repos/babel/babel","labels_url":"https://api.github.com/repos/babel/babel/issues/9851/labels{/name}","comments_url":"https://api.github.com/repos/babel/babel/issues/9851/comments","events_url":"https://api.github.com/repos/babel/babel/issues/9851/events","html_url":"https://github.com/babel/babel/issues/9851","id":432520696,"node_id":"MDU6SXNzdWU0MzI1MjA2OTY=","number":9851,"title":"Babel's “replaceWithMultiple” adds unnecessary parentheses","user":{"login":"jukben","id":8135252,"node_id":"MDQ6VXNlcjgxMzUyNTI=","avatar_url":"https://avatars.githubusercontent.com/u/8135252?v=4","gravatar_id":"","url":"https://api.github.com/users/jukben","html_url":"https://github.com/jukben","followers_url":"https://api.github.com/users/jukben/followers","following_url":"https://api.github.com/users/jukben/following{/other_user}","gists_url":"https://api.github.com/users/jukben/gists{/gist_id}","starred_url":"https://api.github.com/users/jukben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jukben/subscriptions","organizations_url":"https://api.github.com/users/jukben/orgs","repos_url":"https://api.github.com/users/jukben/repos","events_url":"https://api.github.com/users/jukben/events{/privacy}","received_events_url":"https://api.github.com/users/jukben/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":438580610,"node_id":"MDU6TGFiZWw0Mzg1ODA2MTA=","url":"https://api.github.com/repos/babel/babel/labels/area:%20react","name":"area: react","color":"c5def5","default":false,"description":null},{"id":484326141,"node_id":"MDU6TGFiZWw0ODQzMjYxNDE=","url":"https://api.github.com/repos/babel/babel/labels/pkg:%20traverse","name":"pkg: traverse","color":"c2e0c6","default":false,"description":null},{"id":555615173,"node_id":"MDU6TGFiZWw1NTU2MTUxNzM=","url":"https://api.github.com/repos/babel/babel/labels/claimed","name":"claimed","color":"bfdadc","default":false,"description":null},{"id":919437103,"node_id":"MDU6TGFiZWw5MTk0MzcxMDM=","url":"https://api.github.com/repos/babel/babel/labels/outdated","name":"outdated","color":"ededed","default":false,"description":"A closed issue/PR that is archived due to age. Recommended to make a new issue"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-04-12T11:30:49Z","updated_at":"2020-02-10T11:38:04Z","closed_at":"2019-11-11T09:36:18Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bug Report\r\n\r\n**Current Behavior**\r\nA clear and concise description of the behavior.\r\n\r\n**Input Code**\r\n- REPL or Repo link if applicable\r\n\r\nhttps://astexplorer.net/#/gist/7f499680fcd4aaaba9af215afe42de80/c91228b082de80ef2c57e9c1960b22f884d1e694\r\n\r\nhttps://stackoverflow.com/questions/55648184/babels-replacewithmultiple-adds-unnecessary-parentheses/55649060#55649060\r\n\r\nBabel plugin:\r\n```js\r\nexport default function (babel) {\r\n  const { types: t } = babel;\r\n\r\n  return {\r\n    name: \"ast-transform\", // not required\r\n    visitor: {\r\n      JSXElement(path) {\r\n        if (path.node.openingElement.name.name === \"defs\") {\r\n          path.replaceWithMultiple(\r\n            path.node.children.filter(t.isJSXElement)\r\n          );\r\n        }\r\n      },\r\n    }\r\n  };\r\n}\r\n```\r\n\r\n**Expected behavior/code**\r\n```jsx\r\n<svg width=\"72\" height=\"72\" viewBox=\"0 0 72 72\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n  <rect width=\"72\" height=\"72\" fill=\"white\" />\r\n  <path d=\"M68.81 0H34.23C34.23 4.14003 35.8746 8.11049 38.8021 11.0379C40.2516 12.4875 41.9724 13.6373 43.8663 14.4218C45.7602 15.2062 47.7901 15.61 49.84 15.61H56.21V21.76C56.2127 25.8966 57.8571 29.8629 60.7821 32.7879C63.7071 35.7129 67.6734 37.3574 71.81 37.36V3C71.81 2.20435 71.4939 1.44129 70.9313 0.87868C70.3687 0.31607 69.6057 0 68.81 0V0Z\" fill=\"#2684FF\" />\r\n  <path d=\"M51.7 17.23H17.12C17.1226 21.3666 18.7671 25.3329 21.6921 28.2579C24.617 31.1829 28.5834 32.8273 32.72 32.83H39.09V39C39.0953 43.1366 40.7423 47.1019 43.6691 50.025C46.596 52.9481 50.5634 54.59 54.7 54.59V20.23C54.7 19.4343 54.3839 18.6713 53.8213 18.1087C53.2587 17.5461 52.4956 17.23 51.7 17.23V17.23Z\" fill=\"url(#paint0_linear)\" />\r\n  <path d=\"M34.58 34.45H0C0 38.59 1.64462 42.5605 4.57206 45.4879C7.49951 48.4154 11.47 50.06 15.61 50.06H22V56.21C22.0026 60.3431 23.6443 64.3065 26.565 67.2309C29.4857 70.1553 33.4469 71.8021 37.58 71.81V37.45C37.58 36.6543 37.2639 35.8913 36.7013 35.3287C36.1387 34.7661 35.3757 34.45 34.58 34.45Z\" fill=\"url(#paint1_linear)\" />\r\n  <linearGradient id=\"paint0_linear\" x1=\"53.96\" y1=\"17.29\" x2=\"39.25\" y2=\"32.46\" gradientUnits=\"userSpaceOnUse\">\r\n    <stop offset=\"0.18\" stop-color=\"#0052CC\" />\r\n    <stop offset=\"1\" stop-color=\"#2684FF\" />\r\n  </linearGradient>\r\n  <linearGradient id=\"paint1_linear\" x1=\"1421.65\" y1=\"1327.85\" x2=\"786.064\" y2=\"1949.52\" gradientUnits=\"userSpaceOnUse\">\r\n    <stop offset=\"0.18\" stop-color=\"#0052CC\" />\r\n    <stop offset=\"1\" stop-color=\"#2684FF\" />\r\n  </linearGradient>\r\n</svg>;\r\n```\r\n\r\n**Actual behavior/code**\r\n```jsx\r\n<svg width=\"72\" height=\"72\" viewBox=\"0 0 72 72\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n  <rect width=\"72\" height=\"72\" fill=\"white\" />\r\n  <path d=\"M68.81 0H34.23C34.23 4.14003 35.8746 8.11049 38.8021 11.0379C40.2516 12.4875 41.9724 13.6373 43.8663 14.4218C45.7602 15.2062 47.7901 15.61 49.84 15.61H56.21V21.76C56.2127 25.8966 57.8571 29.8629 60.7821 32.7879C63.7071 35.7129 67.6734 37.3574 71.81 37.36V3C71.81 2.20435 71.4939 1.44129 70.9313 0.87868C70.3687 0.31607 69.6057 0 68.81 0V0Z\" fill=\"#2684FF\" />\r\n  <path d=\"M51.7 17.23H17.12C17.1226 21.3666 18.7671 25.3329 21.6921 28.2579C24.617 31.1829 28.5834 32.8273 32.72 32.83H39.09V39C39.0953 43.1366 40.7423 47.1019 43.6691 50.025C46.596 52.9481 50.5634 54.59 54.7 54.59V20.23C54.7 19.4343 54.3839 18.6713 53.8213 18.1087C53.2587 17.5461 52.4956 17.23 51.7 17.23V17.23Z\" fill=\"url(#paint0_linear)\" />\r\n  <path d=\"M34.58 34.45H0C0 38.59 1.64462 42.5605 4.57206 45.4879C7.49951 48.4154 11.47 50.06 15.61 50.06H22V56.21C22.0026 60.3431 23.6443 64.3065 26.565 67.2309C29.4857 70.1553 33.4469 71.8021 37.58 71.81V37.45C37.58 36.6543 37.2639 35.8913 36.7013 35.3287C36.1387 34.7661 35.3757 34.45 34.58 34.45Z\" fill=\"url(#paint1_linear)\" />\r\n  (\r\n  <linearGradient id=\"paint0_linear\" x1=\"53.96\" y1=\"17.29\" x2=\"39.25\" y2=\"32.46\" gradientUnits=\"userSpaceOnUse\">\r\n    <stop offset=\"0.18\" stop-color=\"#0052CC\" />\r\n    <stop offset=\"1\" stop-color=\"#2684FF\" />\r\n  </linearGradient>,\r\n  <linearGradient id=\"paint1_linear\" x1=\"1421.65\" y1=\"1327.85\" x2=\"786.064\" y2=\"1949.52\" gradientUnits=\"userSpaceOnUse\">\r\n    <stop offset=\"0.18\" stop-color=\"#0052CC\" />\r\n    <stop offset=\"1\" stop-color=\"#2684FF\" />\r\n  </linearGradient>)\r\n\r\n</svg>;\r\n```\r\n\r\n**Babel Configuration (.babelrc, package.json, cli command)**\r\n\r\n```js\r\nexport default function (babel) {\r\n  const { types: t } = babel;\r\n  \r\n  return {\r\n    name: \"ast-transform\", // not required\r\n    visitor: {\r\n      JSXElement(path) {\r\n        if (path.node.openingElement.name.name === \"defs\") {\r\n          console.log(path.node.children.filter(t.isJSXElement))\r\n          path.replaceWithMultiple(path.node.children.filter(t.isJSXElement));\r\n        }\r\n      },\r\n    }\r\n  };\r\n}\r\n\r\n```\r\n\r\n**Environment**\r\n- Babel version(s): [e.g. v6.0.0, v7.0.0-beta.34]\r\n- Node/npm version: [e.g. Node 8/npm 5]\r\n- OS: [e.g. OSX 10.13.4, Windows 10]\r\n- Monorepo: [e.g. yes/no/Lerna]\r\n- How you are using Babel: [e.g. `cli`, `register`, `loader`]\r\n\r\n**Possible Solution**\r\n<!--- Only if you have suggestions on a fix for the bug -->\r\nI found out there is `replaceInline` with does the job, but not sure if this is expected behavior or not.\r\n\r\n**Additional context/Screenshots**\r\nAdd any other context about the problem here. If applicable, add screenshots to help explain.\r\n","closed_by":{"login":"nicolo-ribaudo","id":7000710,"node_id":"MDQ6VXNlcjcwMDA3MTA=","avatar_url":"https://avatars.githubusercontent.com/u/7000710?v=4","gravatar_id":"","url":"https://api.github.com/users/nicolo-ribaudo","html_url":"https://github.com/nicolo-ribaudo","followers_url":"https://api.github.com/users/nicolo-ribaudo/followers","following_url":"https://api.github.com/users/nicolo-ribaudo/following{/other_user}","gists_url":"https://api.github.com/users/nicolo-ribaudo/gists{/gist_id}","starred_url":"https://api.github.com/users/nicolo-ribaudo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicolo-ribaudo/subscriptions","organizations_url":"https://api.github.com/users/nicolo-ribaudo/orgs","repos_url":"https://api.github.com/users/nicolo-ribaudo/repos","events_url":"https://api.github.com/users/nicolo-ribaudo/events{/privacy}","received_events_url":"https://api.github.com/users/nicolo-ribaudo/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/babel/babel/issues/9851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/babel/babel/issues/9851/timeline","performed_via_github_app":null,"state_reason":"completed"}