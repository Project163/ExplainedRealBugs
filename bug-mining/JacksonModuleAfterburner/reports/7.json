{"url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/issues/51","repository_url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner","labels_url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/issues/51/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/issues/51/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/issues/51/events","html_url":"https://github.com/FasterXML/jackson-module-afterburner/issues/51","id":58874341,"node_id":"MDU6SXNzdWU1ODg3NDM0MQ==","number":51,"title":"JsonMappingException: Invalid field index when using mixin annotations on and off","user":{"login":"natnan","id":5628051,"node_id":"MDQ6VXNlcjU2MjgwNTE=","avatar_url":"https://avatars.githubusercontent.com/u/5628051?v=4","gravatar_id":"","url":"https://api.github.com/users/natnan","html_url":"https://github.com/natnan","followers_url":"https://api.github.com/users/natnan/followers","following_url":"https://api.github.com/users/natnan/following{/other_user}","gists_url":"https://api.github.com/users/natnan/gists{/gist_id}","starred_url":"https://api.github.com/users/natnan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natnan/subscriptions","organizations_url":"https://api.github.com/users/natnan/orgs","repos_url":"https://api.github.com/users/natnan/repos","events_url":"https://api.github.com/users/natnan/events{/privacy}","received_events_url":"https://api.github.com/users/natnan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/milestones/10","html_url":"https://github.com/FasterXML/jackson-module-afterburner/milestone/10","labels_url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/milestones/10/labels","id":1006672,"node_id":"MDk6TWlsZXN0b25lMTAwNjY3Mg==","number":10,"title":"2.6.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":2,"state":"open","created_at":"2015-03-04T22:52:42Z","updated_at":"2015-06-30T17:07:35Z","due_on":null,"closed_at":null},"comments":9,"created_at":"2015-02-25T09:35:16Z","updated_at":"2015-06-30T17:07:35Z","closed_at":"2015-03-04T01:32:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Using 2.5.0 via dropwizard 0.8-rc2.\n\nIn one of the use cases I'm implementing I need to ignore one of the fields when I'm serializing/deserializing an object while in general I don't need to do so. So, in that particular class I use a copy of the main object mapper with mixin configuration.\n\n``` java\nthis.objectMapper = objectMapper.copy();\nthis.objectMapper.addMixIn(MyClass.class, IgnoreParticularFieldMixIn.class);\n\n...\npublic abstract class IgnoreParticularFieldMixIn{\n  @JsonIgnore\n  public abstract byte[] getParticularField();\n}\n```\n\nFirst, an object is serialized with mixIn, then without it. But the second operation fails with `JsonMappingException: Invalid field index (valid; 0 <= n < 4): 4` (because the ignored field is the 5th field). So it looks like MyClass' details are cached with 4 fields in the beginning, but encountered 5 fields on the second which led to an exception.\n\nI understand the logic there but the issue here is that these two operations are handled by two different object mappers, so to me, they should have two different caches. But it looks like afterburner is keeping them in a static context. Is this how it's designed or a bug?\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/issues/51/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-module-afterburner/issues/51/timeline","performed_via_github_app":null,"state_reason":"completed"}