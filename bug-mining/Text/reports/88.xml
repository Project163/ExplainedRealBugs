<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:54:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TEXT-233] Missing OSGi import-package commons-lang3 version can make commons-text unusable in OSGi</title>
                <link>https://issues.apache.org/jira/browse/TEXT-233</link>
                <project id="12318221" key="TEXT">Commons Text</project>
                    <description>&lt;p&gt;Since commons-text 1.11.0, there&apos;s commons-text codes that requires the presence of commons-lang3 3.13.0 or higher. However, in an OSGi environment, this requirement is not enforced due to shortcoming an the commons-text 1.11.0 MANIFEST.MF, which may lead to unpredictable, uncontrollable failure when trying to use commons-text 1.11.0.&lt;/p&gt;

&lt;p&gt;Some more detail:&lt;/p&gt;

&lt;p&gt;Since commons-text 1.11.0, the NumericEntityEscaper makes uses of the method &lt;b&gt;Range.&lt;em&gt;&lt;ins&gt;of&lt;/ins&gt;&lt;/em&gt;(...)&lt;/b&gt; in commons-lang3 :&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; NumericEntityEscaper(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; below, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; above, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; between) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.range = Range.of(below, above);
  &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.between = between;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Method Range.of(...) was added in &lt;b&gt;commons-lang3 3.13.0&lt;/b&gt; :&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;* @since 3.13.0
&#160;*/
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Comparable&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; T&amp;gt;&amp;gt; Range&amp;lt;T&amp;gt; of(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; T fromInclusive, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; T toInclusive) {&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Previously, in commons-text 1.10.0 or earlier, NumericEntityEscaper made use of the the commons-lang3 method &lt;b&gt;Range.&lt;em&gt;&lt;ins&gt;between&lt;/ins&gt;&lt;/em&gt;(...)&lt;/b&gt;&#160; (which is now marked as deprecated since commons-lang3 3.13.0)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; NumericEntityEscaper(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; below, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; above, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; between) {
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.range = Range.between(below, above);
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.between = between;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is all fine in a non-OSGi environment.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;However, to always resolve this correctly in an OSGi environment, some essential information is missing in the commons-text 1.11.0 &lt;b&gt;MANIFEST.MF&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;The commons-text 1.11.0 declares the following &lt;b&gt;Import-Package&lt;/b&gt; in its manifest:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Import-Package: javax.script,javax.xml.xpath,org.apache.commons.lang3,or
&#160;g.apache.commons.lang3.time,org.xml.sax
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice how this indeed imports the required package &quot;&lt;em&gt;org.apache.commons.lang3&lt;/em&gt;&quot;, but this import &lt;ins&gt;is not qualified with a version number&lt;/ins&gt;.&lt;/p&gt;

&lt;p&gt;When an OSGi package is not qualified by a version number or version range, then during package resolution, OSGi may resolve this import against whatever version of commons-lang3 it can find and that exports this package.&lt;/p&gt;

&lt;p&gt;In other words, because there&apos;s no version restriction in this import as far as OSGi is concerned : if you have an OSGi environment where also an older version older version of commons-lang3 is already present, e.g. commons-lang &quot;3.12.0&quot;, then the import-package of commons-text 1.11.0 will happily be satisfied by that package and resolve and link its import-package requirement against the 3.12.0 version.&lt;/p&gt;

&lt;p&gt;So when loading these OSGi bundles, all will look fine. The OSGi will nicely resolve everything without complaining at this point.&lt;/p&gt;

&lt;p&gt;However in the above example environment, maybe much much later, when at a given moment a user of the 1.11.0 commons-text NumericEntityEscaper (e.g. some of the StringEscapeUtils method being called by user code) is invoked,&lt;br/&gt;
then that commons-text 1.11.0 NumericEntityEscaper will see the 3.12.0 version of the Range class in its classpath. It will try to invoke the method Range.of(...) ... but this method didn&apos;t exist yet in this 3.12.0 version of the Range class.&lt;/p&gt;

&lt;p&gt;Which will fail with a NoSuchMethodError:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NoSuchMethodError: org.apache.commons.lang3.Range.of(Ljava/lang/Comparable;Ljava/lang/Comparable;)Lorg/apache/commons/lang3/Range;
&#160; &#160; at org.apache.commons.text.translate.NumericEntityEscaper.&amp;lt;init&amp;gt;(NumericEntityEscaper.java:97) ~[?:?]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To avoid this, it is &lt;ins&gt;required&lt;/ins&gt; that the commons-text 1.11.0 &lt;b&gt;MANIFEST.MF&lt;/b&gt; correctly specifies the minimally required version of the commons-lang3 package in its Import-Package:&lt;/p&gt;

&lt;p&gt;E.g. by adding a version directive: &lt;b&gt;&lt;tt&gt;;version=&quot;3.13&quot;&lt;/tt&gt;&lt;/b&gt; : in OSGi, 1 single version number means a minimal version number, i.e. an open range 3.13.0 or higher. &lt;br/&gt;
Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Import-Package: javax.script,javax.xml.xpath,org.apache.commons.lang3;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.13&quot;&lt;/span&gt;,or
 g.apache.commons.lang3.time;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.13&quot;&lt;/span&gt;,org.xml.sax&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That way, when OSGi resolves commons-text 1.11.0, it will now only be satisifed by version 3.13 of those package, or higher, and therefore be guaranteed to link its org.apache.commons.lang3 Import-Package against the package from commons-lang3 3.13.0 or higher. &lt;br/&gt;
Then at runtime, whenever the NumericEntityEscaper calls a method on the Range class, it sees a 3.13.0 (or higher) version of the Range class, where the method Range.of(...) exists.&lt;/p&gt;

&lt;p&gt;(Note: a manifst example from another Apache Project: &lt;br/&gt;
this snippet is from the MANIFEST.MF of the Apache Velocity Engine jar:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Import-Package: javax.naming,javax.sql,org.apache.commons.lang3;versio
&#160;n=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.11,4)&quot;&lt;/span&gt;,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice how they&apos;ve specified a version range, which is also a possibility in OSGi: range &lt;em&gt;&quot;[3.11,4)&quot;&lt;/em&gt; means: import from any version from 3.11 (inclusive) to version 4 (exclusive). )&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I know that the commons-text OSGi MANIFEST.MF headers are generated by the &quot;maven-bundle-plugin&quot;, which is defined somewhere in the &quot;commons-parent&quot; pom.xml I believe? But I assume that it should be possible to overrule some of the default (wildcard) generic maven-bundle-plugin settings with project-specific Import-Package directives, so that a version number (3.13) can be specified explicitly org.apache.commons.lang3 packages?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; In the current state, as shown above, the commons-text 1.11.0 code may fail unpredictably in an OSGi environment. Due to the dynamic nature of OSGi, bundles (jars) may come and go. Older versions of commons-lang3 may be present or not. So when the commons-text import-package doesn&apos;t impose a minimal version number in its Import-Package, it may unpredictably resolve against a commons-lang3 3.13. or 3.14.0, but just as well against an older version where the required Range.of() method is missing, causing the failure. In a dynamic environment, such application may sometimes run successfully by chance, but may just unpredictably fail later, outside the control of the developer or user.&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;&lt;/font&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13568456">TEXT-233</key>
            <summary>Missing OSGi import-package commons-lang3 version can make commons-text unusable in OSGi</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="belpk">K P</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Feb 2024 16:24:15 +0000</created>
                <updated>Tue, 10 Dec 2024 11:53:56 +0000</updated>
                            <resolved>Mon, 18 Nov 2024 13:25:33 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.13.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17817445" author="belpk" created="Wed, 14 Feb 2024 16:38:48 +0000"  >&lt;p&gt;I&apos;ve been searching around a bit more:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/commons/commonsosgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/commons/commonsosgi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The above page explains the possibility for a component (e.g. commons-text, I guess) to override certain directives, by overruling the Maven pom property &quot;commons.osgi.import&quot;&#160; (which default to *)&lt;/p&gt;

&lt;p&gt;I&apos;ve found an override example in commons-configuration2, &lt;a href=&quot;https://github.com/apache/commons-configuration/blob/master/pom.xml,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-configuration/blob/master/pom.xml,&lt;/a&gt; where the pom.xml overrides the wildcard with some explicit manual imports (in the case of configuration2 with the intention to add an optional resolution directive to some imports, not to add a version number), but I think it would be a similar approach to fix commons-text3, specifying something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.lang3;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.13&quot;&lt;/span&gt;,
org.apache.commons.lang3.time;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.13&quot;&lt;/span&gt;,
*&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;as customized commons.osgi.import property? (I couldn&apos;t verify this yet...)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17817498" author="garydgregory" created="Wed, 14 Feb 2024 19:16:07 +0000"  >&lt;p&gt;See also&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/bndtools/bnd/issues/544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bndtools/bnd/issues/544&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-4626&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-4626&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Reproducer:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;git clone https://gitbox.apache.org/repos/asf/commons-text.git
git checkout 1001fb35902e52f1c19442a197a5ff914f7d8432
mvn clean verify
unzip -p target/commons-text-1.11.1-SNAPSHOT.jar META-INF/MANIFEST.MF
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17817704" author="belpk" created="Thu, 15 Feb 2024 15:09:16 +0000"  >&lt;p&gt;I tested adding the following property to the commons-text pom.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;commons.osgi.&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&amp;gt;
org.apache.commons.lang3;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.14&quot;&lt;/span&gt;,
org.apache.commons.lang3.time;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.14&quot;&lt;/span&gt;,
*
&amp;lt;/commons.osgi.&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And I can confirm that this correctly generates the following Import-Package header in the MANIFEST.MF&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Import-Package: org.apache.commons.lang3;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.14&quot;&lt;/span&gt;,org.apache.com
 mons.lang3.time;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.14&quot;&lt;/span&gt;,javax.script,javax.xml.xpath,org.xml.s
&#160;ax&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(an alternative choice for the property would be specifying a version range &quot;&lt;em&gt;[3.14,4)&lt;/em&gt;&quot; instead of the open range &quot;&lt;em&gt;3.14&lt;/em&gt;&quot;).&lt;/p&gt;

&lt;p&gt;The resulting commons-text snapshot jar would then only resolve against commons-lang3 3.14.0 or higher in OSGi. Ensuring that its code will get the expected up-to-date commons-lang3 classes in its classpath.&lt;/p&gt;

&lt;p&gt;If there&apos;s no fix for this old outstanding issue in the maven-bundle-plugin, then at least this simple workaround allows to generate commons-text jars that have the required version ranges in their MANIFEST.MF. And then at least this would build a commons-text jar that won&apos;t break unexpectedly at runtime in an OSGi environment.&lt;/p&gt;

&lt;p&gt;Drawback is that these versions ranges are not updated automatically based on the maven dependencies... Updating the property &lt;em&gt;commons.osgi.import&lt;/em&gt; is then a manual process, easy to forget.&lt;br/&gt;
(Although forgetting to bump up the version in these OSGi headers isn&apos;t always problematic. Problems arise when a commons-text change requires something new in a specific minimal commons-lang3 version. Like this case where commons-text started using Range.of(...) instead of Range.between(...) and therefore &lt;em&gt;requires&lt;/em&gt; that OSGi resolves against commons-lang3 3.13.0 or higher. However, if the commons-text source code would still be backward compatible with an older commons-lang3 version, forgetting to bump up the version in the Import-Package, wouldn&apos;t be that harmful.)&lt;/p&gt;</comment>
                            <comment id="17817780" author="garydgregory" created="Thu, 15 Feb 2024 20:41:03 +0000"  >&lt;p&gt;If we are going to hack this in the POM, then we need to use a variable for the version, see &lt;a href=&quot;https://bnd.bndtools.org/tools/felix-maven.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bnd.bndtools.org/tools/felix-maven.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17898375" author="belpk" created="Thu, 14 Nov 2024 18:18:58 +0000"  >&lt;p&gt;Well, you mean that we would do the following in the pom? :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;commons.lang3.version&amp;gt;3.14.0&amp;lt;/commons.lang3.version&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;commons.osgi.&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&amp;gt;
org.apache.commons.lang3;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;${commons.lang3.version}&quot;&lt;/span&gt;,
org.apache.commons.lang3.time;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;${commons.lang3.version}&quot;&lt;/span&gt;,
*
&amp;lt;/commons.osgi.&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;
&#160; &#160; &amp;lt;artifactId&amp;gt;commons-lang3&amp;lt;/artifactId&amp;gt;
&#160; &#160; &amp;lt;version&amp;gt;${commons.lang3.version}&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;i.e. define a property for the commons-lang3 version dependency,&lt;br/&gt;
and then use that property in both the dependency (like other dependencies where the version is defined in a property) and the osgi customization property (commons.osgi.import) that is picked up by the felix maven-bundle-plugin.&lt;/p&gt;

&lt;p&gt;Then at least the version in OSGi Import-Package manifest header will be consistent with the version of the maven compile-time and runtime dependency.&lt;/p&gt;

&lt;p&gt;( Note: I&apos;m &lt;em&gt;not&lt;/em&gt; using the separate macro definitions which apparently are supported by the maven-bundle-plugin, separate to the maven properties. That would require breaking elsewhere into the maven-bundle-plugin &amp;lt;instructions&amp;gt; in the commons-parent pom.xml. Where we can&apos;t just break in easily. Doesn&apos;t seem worth the trouble; only complicating things without added value. )&lt;/p&gt;

&lt;p&gt;This seems to be the cleanest way to build a commons-text jar that will be guaranteed to resolve correctly at runtime in OSGi, i.e. resolve against a compatible commons-lang3 jar.&lt;/p&gt;

&lt;p&gt;It&apos;s also the easiest to comprehend and maintain, I think.&lt;/p&gt;</comment>
                            <comment id="17898619" author="garydgregory" created="Fri, 15 Nov 2024 13:12:42 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belpk&quot; class=&quot;user-hover&quot; rel=&quot;belpk&quot;&gt;belpk&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Sounds good. Feel free to create a PR and I&apos;ll review it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ne94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>