<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:54:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TEXT-158] Incorrect values for Jaccard similarity with empty strings</title>
                <link>https://issues.apache.org/jira/browse/TEXT-158</link>
                <project id="12318221" key="TEXT">Commons Text</project>
                    <description>&lt;p&gt;In a discussion part of &lt;a href=&quot;https://issues.apache.org/jira/browse/TEXT-126&quot; title=&quot;Dice&amp;#39;s Coefficient Algorithm in String similarity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEXT-126&quot;&gt;TEXT-126&lt;/a&gt;, it was&#160;&lt;a href=&quot;https://github.com/apache/commons-text/pull/103#discussion_r263988298&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pointed&lt;/a&gt; that the Jaccard similarity returns 0.0, and the distance 1.0. While in other libraries it returns the opposite for each.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; br.eti.kinoshita.tests.text;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Collections;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;EditDistances {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Testing jaccard sim/dis with empty strings&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;---&quot;&lt;/span&gt;);
        org.simmetrics.metrics.Jaccard&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; j1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.simmetrics.metrics.Jaccard&amp;lt;&amp;gt;();
        &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; s1 = j1.compare(Collections.emptySet(), Collections.emptySet());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Simmetrics Jaccard similarity: &quot;&lt;/span&gt; + s1);
        &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; d1 = j1.distance(Collections.emptySet(), Collections.emptySet());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Simmetrics Jaccard distance: &quot;&lt;/span&gt; + d1);
        
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;---&quot;&lt;/span&gt;);
        
        info.debatty.java.stringsimilarity.Jaccard j2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; info.debatty.java.stringsimilarity.Jaccard();
        &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; s2 = j2.similarity(&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;&quot;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;javastringsimilarity Jaccard similarity: &quot;&lt;/span&gt; + s2);
        &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; d2 = j2.distance(&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;&quot;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;javastringsimilarity Jaccard distance: &quot;&lt;/span&gt; + d2);
        
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;---&quot;&lt;/span&gt;);
        
        org.apache.commons.text.similarity.JaccardSimilarity j3_1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.commons.text.similarity.JaccardSimilarity();
        &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; s3 = j3_1.apply(&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;&quot;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;commons-text Jaccard similarity: &quot;&lt;/span&gt; + s3);
        org.apache.commons.text.similarity.JaccardDistance j3_2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.commons.text.similarity.JaccardDistance();
        &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; d3 = j3_2.apply(&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;&quot;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;commons-text Jaccard distance: &quot;&lt;/span&gt; + d3);
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Produces:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Testing jaccard sim/dis with empty strings
---
Simmetrics Jaccard similarity: 1.0
Simmetrics Jaccard distance: 0.0
---
javastringsimilarity Jaccard similarity: 1.0
javastringsimilarity Jaccard distance: 0.0
---
commons-text Jaccard similarity: 0.0
commons-text Jaccard distance: 1.0&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We need to confirm what&apos;s the correct output for similarity and distance with empty strings. And either document why we are returning what we are returning, or fix it as a bug for the next release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13220611">TEXT-158</key>
            <summary>Incorrect values for Jaccard similarity with empty strings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="kinow">Bruno P. Kinoshita</reporter>
                        <labels>
                    </labels>
                <created>Sat, 9 Mar 2019 10:13:30 +0000</created>
                <updated>Fri, 31 Jul 2020 00:24:01 +0000</updated>
                            <resolved>Fri, 31 Jul 2020 00:24:01 +0000</resolved>
                                    <version>1.6</version>
                    <version>1.9</version>
                                    <fixVersion>1.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16788676" author="alexherbert" created="Sat, 9 Mar 2019 13:28:26 +0000"  >&lt;p&gt;There are arguments for each. It amounts to what is correct here:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;intersect / union = Jaccard

0 / 0             = n / n     = 1
0 / 0             = n / 0     = NaN
0 / 0             = 0 / n     = 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Java would return &lt;tt&gt;NaN&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;However an empty string has a different meaning from &lt;tt&gt;null&lt;/tt&gt;. Comparing &lt;tt&gt;null&lt;/tt&gt; for similarity is invalid and should either be &lt;tt&gt;NaN&lt;/tt&gt;, or as is currently done in the library throw an &lt;tt&gt;IllegalArgumentException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Comparing an empty string to something is valid so should return something sensible so the user does not come unstuck.&lt;/p&gt;

&lt;p&gt;I would vote for an empty string to be perfectly similar to another empty string.&lt;/p&gt;

&lt;p&gt;This is inline with other similarity scores in the library, e.g. &lt;tt&gt;JaroWinklerSimilarity&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;So this is a bug.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17167567" author="kinow" created="Thu, 30 Jul 2020 00:04:43 +0000"  >&lt;p&gt;&amp;gt;I would vote for an empty string to be perfectly similar to another empty string.&lt;/p&gt;

&lt;p&gt;&amp;gt;This is inline with other similarity scores in the library, e.g. &lt;tt&gt;JaroWinklerSimilarity&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&amp;gt;So this is a bug.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;+1 agreed. Let me see how hard would be to fix this...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13174402">TEXT-126</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z00ixc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>