<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:14:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BCEL-283] Support for StackMap should be different from StackMapTable</title>
                <link>https://issues.apache.org/jira/browse/BCEL-283</link>
                <project id="12314220" key="BCEL">Commons BCEL</project>
                    <description>&lt;p&gt;It turns out we made a mistake with the StackMap renaming changes.  I ran into a problem decoding some old .class files and went back to the Java Specification Requests (JSRs) to try and understand the history of the StackMap attribute.  While I was not able to get the complete story, I have a pretty good guess at what happened and it does explain the problem I have seen.&lt;/p&gt;

&lt;p&gt;The official introduction of StackMaps appears to be JSR 202 from (approx.) Sept. 2006 and it is part of JDK6 (see attached spec) .   However, StackMaps were originally proposed much earlier (approx.) March 2002 - see the attached verifier spec.  It appears there were some implementations of this earlier specification - the ASM tool was one and there may be others.  &lt;/p&gt;

&lt;p&gt;The key differences are: &lt;br/&gt;
Typechecker Spec:	StackMap attribute with fixed format and no frame type byte&lt;br/&gt;
JDK 6 Spec:		StackMapTable attribute with variable format including a frame type byte.&lt;/p&gt;

&lt;p&gt;The JVM and the javap tool support BOTH formats.  BCEL recognizes both attribute names, but treats them the same, as JDK6 version.&lt;/p&gt;

&lt;p&gt;I don&apos;t think the changes will be too difficult.  I will create a proposed fix within the next few days.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019583">BCEL-283</key>
            <summary>Support for StackMap should be different from StackMapTable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="britter">Benedikt Ritter</assignee>
                                    <reporter username="markro">Mark Roberts</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Nov 2016 17:04:11 +0000</created>
                <updated>Mon, 18 Sep 2017 09:12:26 +0000</updated>
                            <resolved>Wed, 30 Aug 2017 19:23:21 +0000</resolved>
                                                    <fixVersion>6.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15718680" author="garydgregory" created="Sat, 3 Dec 2016 20:20:02 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markro&quot; class=&quot;user-hover&quot; rel=&quot;markro&quot;&gt;markro&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Any news on this?&lt;/p&gt;

&lt;p&gt;Just curious,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="15761602" author="markro" created="Mon, 19 Dec 2016 16:27:26 +0000"  >&lt;p&gt;I have changed my mind on this - we do not need to support - in fact, we should disallow.  StackMaps are not needed for Java versions &amp;lt; JDK6 and the new style StackMapTable is required for Java versions &amp;gt; JDK5.  So I made a small change to Attribute.java that warns and ignores old style StackMaps.  This worked fine for the problems I had observed.&lt;/p&gt;</comment>
                            <comment id="15761609" author="markro" created="Mon, 19 Dec 2016 16:29:40 +0000"  >&lt;p&gt;Added comment and diff with suggested change.&lt;br/&gt;
Mark&lt;/p&gt;

</comment>
                            <comment id="16147877" author="britter" created="Wed, 30 Aug 2017 19:23:21 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;~/w/a/c/commons-bcel &amp;gt; svn ci -m &lt;span class=&quot;code-quote&quot;&gt;&quot;BCEL-283: Support &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; StackMap should be different from StackMapTable. Thanks to Mark Roberts&quot;&lt;/span&gt;
Sending        src/changes/changes.xml
Sending        src/main/java/org/apache/bcel/classfile/Attribute.java
Transmitting file data ..done
Committing transaction...
Committed revision 1806724.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12838197" name="Appendix1-verifier.pdf" size="519605" author="markro" created="Wed, 9 Nov 2016 17:05:18 +0000"/>
                            <attachment id="12843911" name="Attribute.diff" size="1752" author="markro" created="Mon, 19 Dec 2016 16:28:03 +0000"/>
                            <attachment id="12838196" name="ClassFileCMP-SE6.0.pdf" size="1110603" author="markro" created="Wed, 9 Nov 2016 17:05:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i364s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>