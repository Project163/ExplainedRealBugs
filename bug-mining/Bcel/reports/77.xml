<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:14:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BCEL-184] JustIce verifier does not check correctly the returned value of a method</title>
                <link>https://issues.apache.org/jira/browse/BCEL-184</link>
                <project id="12314220" key="BCEL">Commons BCEL</project>
                    <description>&lt;p&gt;Defining a &lt;tt&gt;areturn&lt;/tt&gt; opcode (return object) in a void method is accepted by the bytecode verifier.&lt;br/&gt;
This must not be allowed.&lt;/p&gt;

&lt;p&gt;Here is an example of a non-valid bytecode for a void method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       BB 0003      &lt;span class=&quot;code-comment&quot;&gt;// 0   : &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;
&lt;/span&gt;       59           &lt;span class=&quot;code-comment&quot;&gt;// 3   : dup 
&lt;/span&gt;       B7 0008      &lt;span class=&quot;code-comment&quot;&gt;// 4   : invokespecial java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.&amp;lt;init&amp;gt;()V
&lt;/span&gt;       00           &lt;span class=&quot;code-comment&quot;&gt;// 7   : nop 
&lt;/span&gt;       B0           &lt;span class=&quot;code-comment&quot;&gt;// 8   : areturn (Not allowed in a void method)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12762230">BCEL-184</key>
            <summary>JustIce verifier does not check correctly the returned value of a method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jejecool">J&#233;r&#244;me Leroux</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Dec 2014 09:32:08 +0000</created>
                <updated>Thu, 14 Jul 2016 12:48:37 +0000</updated>
                            <resolved>Sat, 7 Mar 2015 00:24:25 +0000</resolved>
                                    <version>5.2</version>
                    <version>6.0</version>
                                    <fixVersion>6.0</fixVersion>
                                    <component>Verifier</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="14249652" author="jejecool" created="Wed, 17 Dec 2014 09:36:26 +0000"  >&lt;p&gt;Attach patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-184&quot; title=&quot;JustIce verifier does not check correctly the returned value of a method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-184&quot;&gt;&lt;del&gt;BCEL-184&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Test for &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-184&quot; title=&quot;JustIce verifier does not check correctly the returned value of a method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-184&quot;&gt;&lt;del&gt;BCEL-184&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Attach zip:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Classfile test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-184&quot; title=&quot;JustIce verifier does not check correctly the returned value of a method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-184&quot;&gt;&lt;del&gt;BCEL-184&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14351146" author="ebourg" created="Fri, 6 Mar 2015 23:43:07 +0000"  >&lt;p&gt;J&#233;r&#244;me, out of curiosity, how did you craft the class file? Did you compile a Java file and then inserted an opcode in the class file? Or did you use a bytecode assembler like Jasmin?&lt;/p&gt;

&lt;p&gt;I&apos;m tempted to add a step in the Maven build that compiles jasmin source files into bytecode, that would make the content of the test classes less opaque.&lt;/p&gt;</comment>
                            <comment id="14351175" author="ebourg" created="Sat, 7 Mar 2015 00:06:18 +0000"  >&lt;p&gt;For the reference, here is the output of the java verifier on the test class (using &lt;tt&gt;java -verify&lt;/tt&gt;):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.VerifyError: Method expects a &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value
Exception Details:
  Location:
    org/apache/bcel/verifier/tests/TestReturn01.foo()V @8: areturn
  Reason:
    Type &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; (current frame, stack[0]) is not assignable to top (from method signature)
  Current Frame:
    bci: @8
    flags: { }
    locals: { }
    stack: { &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; }
  Bytecode:
    0x0000000: bb00 0359 b700 0800 b0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14351211" author="ebourg" created="Sat, 7 Mar 2015 00:24:26 +0000"  >&lt;p&gt;This is now fixed on the trunk, thank you J&#233;r&#244;me.&lt;/p&gt;</comment>
                            <comment id="14354470" author="jejecool" created="Tue, 10 Mar 2015 07:36:07 +0000"  >&lt;p&gt;Hi Emmanuel. To produce these invalid classfiles, I compile Java files and then edit the bytecode.&lt;br/&gt;
It is the fatest way I found to produce these classfiles. Using Jasmin to generate them may be a good solution.&lt;/p&gt;</comment>
                            <comment id="14356151" author="sebb@apache.org" created="Wed, 11 Mar 2015 03:07:46 +0000"  >&lt;p&gt;Another way to generate the invalid class files might be to read/write the class file using Java.&lt;br/&gt;
Just a thought.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12687704" name="BCEL-184.patch" size="5885" author="jejecool" created="Wed, 17 Dec 2014 09:36:26 +0000"/>
                            <attachment id="12687705" name="BCEL-184.zip" size="529" author="jejecool" created="Wed, 17 Dec 2014 09:36:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23ilz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>