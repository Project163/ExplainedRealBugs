<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:14:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BCEL-362] Handling for Constants.CONSTANT_Dynamic is missing in class ConstantPool</title>
                <link>https://issues.apache.org/jira/browse/BCEL-362</link>
                <project id="12314220" key="BCEL">Commons BCEL</project>
                    <description>&lt;p&gt;&lt;em&gt;Disclaimer: I am not a byte code buff, so if I am misunderstanding anything here, please forgive me for raising a stupid issue, try to be patient and explain it to me.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;When looking at the class &lt;tt&gt;&lt;a href=&quot;https://github.com/apache/commons-bcel/blob/5165671d2bc4bed17918051f1689ee5fd4c3425a/src/main/java/org/apache/bcel/classfile/ConstantPool.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ConstantPool&lt;/a&gt;&lt;/tt&gt;, it seems as if condy is not being handled in methods&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;constantToString(Constant)&lt;/tt&gt;,&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;addConstant(Constant, ConstantPool)&lt;/tt&gt;,&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;addConstantDynamic(int, int)&lt;/tt&gt; (method does not exist, not sure if it would be necessary).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I would have expected something like &lt;tt&gt;case Constants.CONSTANT_Dynamic&lt;/tt&gt; with proper handling for this case in the first two methods. &lt;/p&gt;

&lt;p&gt;When using BCEL in order to parse class files using condy, like JaCoCo creates them, this causes errors. FYI, we are using BCEL code in AspectJ, and whenever people combine it with JaCoCo, corresponding problems occur.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13468388">BCEL-362</key>
            <summary>Handling for Constants.CONSTANT_Dynamic is missing in class ConstantPool</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kriegaex">Alexander Kriegisch</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Jun 2022 07:47:03 +0000</created>
                <updated>Mon, 15 Aug 2022 18:03:35 +0000</updated>
                            <resolved>Mon, 15 Aug 2022 18:03:35 +0000</resolved>
                                                    <fixVersion>6.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17570701" author="kriegaex" created="Mon, 25 Jul 2022 07:04:34 +0000"  >&lt;p&gt;Some kind of reaction would be much appreciated after one month. Even if you think that this is invalid, an explanation would be helpful. My working hypothesis is that something is wrong in BCEL, but it is entirely possible that I as a layman am simply misunderstanding something here.&lt;/p&gt;</comment>
                            <comment id="17570836" author="garydgregory" created="Mon, 25 Jul 2022 10:54:10 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kriegaex&quot; class=&quot;user-hover&quot; rel=&quot;kriegaex&quot;&gt;kriegaex&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m no byte code guru either but I think the a PR with a failing test would help. Then we&apos;d have something concrete to consider. You did not state what version you are using.&lt;/p&gt;</comment>
                            <comment id="17576383" author="kriegaex" created="Sun, 7 Aug 2022 13:34:09 +0000"  >&lt;p&gt;Well, there must be some byte code gurus among the group of commiters here, I would think. Otherwise, it would be impossible to maintain a project like this in the first place. I would like to get feedback from a maintainer first, if the places in the code base, which I pointed to, are obviously lacking code handling condy or not. Maybe I as a user misunderstand something and my code is wrong. My reproducer would only reproduce a problem we have in AspectJ, which would not help you debug anything in BCEL in isolation. Actually, I do not &quot;speak BCEL&quot; at all. But you could try instrumenting some Java code with JaCoCo and then somehow transform it with BCEL and see if you hit the same problems without involving AspectJ. I think that the details I provided so far should be enough for a BCEL committer to verify this problem.&lt;/p&gt;</comment>
                            <comment id="17576398" author="kriegaex" created="Sun, 7 Aug 2022 14:56:40 +0000"  >&lt;p&gt;Update: I think I just had an idea how to reproduce this without AspectJ. Locally, I was able to reproduce the problem already, basically by instrumenting code with JaCoCo, writing it to disk and then passing the generated class through your &lt;a href=&quot;https://github.com/apache/commons-bcel/blob/8b0b16884064dc51b58ad4c28e41e7fbef90be97/src/examples/JasminVisitor.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;JasminVisitor&lt;/tt&gt;&lt;/a&gt; example class. But I need to clean up the example a little more first with regard to the Maven build. Unfortunately, I am in a hurry to go to a concert this evening, but I guess in the next few days I can upload something for you. It should be easy for you to also reproduce it, simply following my textual description.&lt;/p&gt;

&lt;p&gt;I am using JaCoCo 0.8.8 and BCEL 6.5.0 in my example project.&lt;/p&gt;</comment>
                            <comment id="17576757" author="garydgregory" created="Mon, 8 Aug 2022 12:56:38 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kriegaex&quot; class=&quot;user-hover&quot; rel=&quot;kriegaex&quot;&gt;kriegaex&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can&apos;t take the time to do the kind of research you are suggesting at this time. I can take the time to review PRs though. Maybe other folks will opine here. My FOSS time is limited &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17576788" author="kriegaex" created="Mon, 8 Aug 2022 13:59:35 +0000"  >&lt;p&gt;Sorry if I am asking a naive question, but not knowing anything about the BCEL project team, I would like to know if you are the only active commiter or if there are others who are both byte code buffs (which you say you are not) and might have time to look into this issue. As an AspectJ committer, my FOSS time is also very limited. In my daytime job, I am not even a developer but an agile coach. My last money I made with coding ~20 years ago.&lt;/p&gt;

&lt;p&gt;The issue I am raising here is not about some kind of minor bug, but rather about a very basic feature of the JVM which was introduced in Java 11 (released in September 2018) and which BCEL does not seem to fully support to this date. I was and am trying to support you by pre-qualifying this issue on your behalf as best I can with my very limited knowledge, but I think that an active BCEL maintainer should find the root cause and be able to fix it with a very small investment of time.&lt;/p&gt;

&lt;p&gt;If you want to say that BCEL is not actively maintained anymore but merely kept alive, just say so clearly, and I will talk to the AspectJ project lead, asking him to consider switching from BCEL to ASM. The switch would be a hassle, but the current situation is a blocker, too, which is suboptimal as well. Of course that is none of your concerns, I am merely explaining my situation.&lt;/p&gt;</comment>
                            <comment id="17576855" author="garydgregory" created="Mon, 8 Aug 2022 15:25:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kriegaex&quot; class=&quot;user-hover&quot; rel=&quot;kriegaex&quot;&gt;kriegaex&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am not aware of other developers&apos; schedule so I can only speak for myself and I am indeed an active maintainer here and in all of Apache Commons (over 20 components), I just do not have the need in my current projects to accommodate Java&apos;s latest features, but it&apos;s interesting stuff for sure. I am not surprised that BCEL has not kept up with Java&apos;s twice-a-year release cycle, that is a lot of moving parts!&lt;/p&gt;

&lt;p&gt;Many people have contributed to BCEL over the years, which can see here &lt;a href=&quot;https://github.com/apache/commons-bcel/graphs/contributors,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-bcel/graphs/contributors,&lt;/a&gt; and more recently as you can see in the recent commit history &lt;a href=&quot;https://github.com/apache/commons-bcel/commits/master&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-bcel/commits/master&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&quot;fix it with a very small investment of time&quot; Right... how would you know without digging into the code? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markro&quot; class=&quot;user-hover&quot; rel=&quot;markro&quot;&gt;markro&lt;/a&gt; Any thoughts?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17578983" author="kriegaex" created="Fri, 12 Aug 2022 13:55:43 +0000"  >&lt;p&gt;I did dig into the code (did you?), as much as I as a dilletante could. IMO, this is simply a matter of an incomplete implementation, not a bug as such. My reasoning was that a maintainer should know the code better than a mere user and first-time issue creator by orders of magnitude.&lt;/p&gt;

&lt;p&gt;We are not talking about keeping up with Java&apos;s twice-a-year release cycle here. Java 11 and the advent of condy are a couple of years old. Java 11 was LTS and has since been superseded by LTS version 17. I am not even complaining that the implementation is incomplete, given the fact that condy is not a frequently used feature. All I am asking is that today, in 2022, you deign to look into the issue I raised. The time you spent discussing this with me might be on a par with the time you would have needed to analyse the issue. But that is, of course, just a guess. It feels like you are looking for reasons to reject it. Even if I would take the time to try and understand this complex product BCEL and be able to make it work for my special case, the fix would probably be suboptimal at best, incomplete or outright wrong in the worst case.&lt;/p&gt;

&lt;p&gt;Anyway, thanks for discussing the issue with me. Your effort is appreciated.&lt;/p&gt;</comment>
                            <comment id="17579283" author="kriegaex" created="Sat, 13 Aug 2022 21:20:15 +0000"  >&lt;p&gt;Please review and merge the linked PR. Thanks.&lt;/p&gt;</comment>
                            <comment id="17579580" author="kriegaex" created="Mon, 15 Aug 2022 07:47:47 +0000"  >&lt;p&gt;Test added to PR.&lt;/p&gt;</comment>
                            <comment id="17579838" author="garydgregory" created="Mon, 15 Aug 2022 18:03:35 +0000"  >&lt;p&gt;In git master and the snapshot repo at &#160;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/bcel/bcel/6.6.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/bcel/bcel/6.6.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16crc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>