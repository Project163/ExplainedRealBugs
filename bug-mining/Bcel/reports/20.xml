<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:13:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BCEL-187] Verification error when an invoke references a method defined in superclass</title>
                <link>https://issues.apache.org/jira/browse/BCEL-187</link>
                <project id="12314220" key="BCEL">Commons BCEL</project>
                    <description>&lt;p&gt;Assuming a class A with a method foo() and a class B subclass of A. If an invoke opcode references the method B.foo() then the bytecode verifier raises an error with the following error message:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Referenced method &apos;foo&apos; with expected signature &apos;()void&apos; not found in class &apos;B&apos;. The native verifier does allow the method to be declared in some superinterface, which the Java Virtual Machine Specification, Second Edition does not.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I can&apos;t find where in the &lt;em&gt;Java Virtual Machine Specification, Second Edition&lt;/em&gt; this restriction is defined.&lt;/p&gt;

&lt;p&gt;The verification of the bytecode generated by the following code fails:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestLegalInvokeInterface01{

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test1(Interface01 t){
        t.run();
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Interface01 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt; {
    
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12764909">BCEL-187</key>
            <summary>Verification error when an invoke references a method defined in superclass</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chonton">Charles Honton</assignee>
                                    <reporter username="jejecool">J&#233;r&#244;me Leroux</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Jan 2015 13:50:39 +0000</created>
                <updated>Thu, 14 Jul 2016 12:48:21 +0000</updated>
                            <resolved>Sat, 18 Jul 2015 04:57:07 +0000</resolved>
                                    <version>5.2</version>
                                    <fixVersion>6.0</fixVersion>
                                    <component>Verifier</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14264642" author="jejecool" created="Mon, 5 Jan 2015 14:52:23 +0000"  >&lt;p&gt;Attach patch with:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-187&quot; title=&quot;Verification error when an invoke references a method defined in superclass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-187&quot;&gt;&lt;del&gt;BCEL-187&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Test for &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-187&quot; title=&quot;Verification error when an invoke references a method defined in superclass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-187&quot;&gt;&lt;del&gt;BCEL-187&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Attach zip with:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Classfile for test for &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-187&quot; title=&quot;Verification error when an invoke references a method defined in superclass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-187&quot;&gt;&lt;del&gt;BCEL-187&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14351183" author="sarahkm1972" created="Sat, 7 Mar 2015 00:10:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jejecool&quot; class=&quot;user-hover&quot; rel=&quot;jejecool&quot;&gt;jejecool&lt;/a&gt;, &lt;a href=&quot;http://markmail.org/search/?q=list%3Aorg.apache.commons.dev/#query:list%3Aorg.apache.commons.dev%2F+page:1+mid:lvm5vrr52mxgrikp+state:results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Mark Thomas said on the mailing list that the following would help him commit this patch&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;After looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-187&quot; title=&quot;Verification error when an invoke references a method defined in superclass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-187&quot;&gt;&lt;del&gt;BCEL-187&lt;/del&gt;&lt;/a&gt; for a minute or two I can see a whole pile of work that needs to be done before I&apos;d even think about committing anything. Just from that quick look:&lt;br/&gt;
1. Review the svn history to see if there are any pointers to which part of the JVM spec defines the restriction.&lt;br/&gt;
2. Review the JVM spec to see if I can see the restriction&lt;br/&gt;
3. Look at the byte code for the provided example to see which class the invoke opcode references. Better yet, write a disabled BCEL unit test to show this.&lt;br/&gt;
4. The structure of the test case looks odd. I suspect it aligns with other patches for other issues but nowhere is that explained.&lt;br/&gt;
5. The class files provided do not have any attached source. Without the source code, we have no idea (OK I could fire up a decompiler but that is another task) what is actually in those classes.&lt;/p&gt;

&lt;p&gt;To put it another way, the current code asserts one behaviour. The bug report asserts another. No evidence is provided to support either position. Given that most (all?) the current committers likely to work on BCEL don&apos;t have a deep knowledge of the JVM specs some research is required to figure out which is correct. I&apos;ve set out above how I&apos;d do the research. I&apos;m sure there are other, better approaches. &lt;/p&gt;</comment>
                            <comment id="14354482" author="jejecool" created="Tue, 10 Mar 2015 07:47:22 +0000"  >&lt;p&gt;Attach zip with:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Java sources for test for &lt;a href=&quot;https://issues.apache.org/jira/browse/BCEL-187&quot; title=&quot;Verification error when an invoke references a method defined in superclass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BCEL-187&quot;&gt;&lt;del&gt;BCEL-187&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Here the sources used to generate the classfile test cases.&lt;/p&gt;</comment>
                            <comment id="14354512" author="jejecool" created="Tue, 10 Mar 2015 08:13:45 +0000"  >&lt;p&gt;Here is some element of the &lt;em&gt;Java Virtual Machine specification&lt;/em&gt; about this issue&lt;br/&gt;
&lt;a href=&quot;http://docs.oracle.com/javase/specs/jvms/se6/html/ConstantPool.doc.html#86899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/specs/jvms/se6/html/ConstantPool.doc.html#86899&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Method resolution attempts to look up the referenced method in C and its superclasses:&lt;br/&gt;
    If C declares a method with the name and descriptor specified by the method reference, method lookup succeeds.&lt;br/&gt;
    Otherwise, if C has a superclass, step 2 of method lookup is recursively invoked on the direct superclass of C. &lt;br/&gt;
Otherwise, method lookup attempts to locate the referenced method in any of the superinterfaces of the specified class C.&lt;br/&gt;
    If any superinterface of C declares a method with the name and descriptor specified by the method reference, method lookup succeeds.&lt;br/&gt;
    Otherwise, method lookup fails. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Since the old revision of the &lt;em&gt;Java Virtual Machine specification&lt;/em&gt;, some precisions have been added to this chapter. You can find the last revision here: &lt;a href=&quot;https://docs.oracle.com/javase/specs/jvms/se8/jvms8.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/specs/jvms/se8/jvms8.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14632273" author="charles_honton@intuit.com" created="Sat, 18 Jul 2015 04:57:07 +0000"  >&lt;p&gt;Committed revision 1691680.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12703626" name="BCEL-187-tests-src.zip" size="2410" author="jejecool" created="Tue, 10 Mar 2015 07:47:22 +0000"/>
                            <attachment id="12690086" name="BCEL-187.patch" size="14860" author="jejecool" created="Mon, 5 Jan 2015 14:52:23 +0000"/>
                            <attachment id="12690087" name="BCEL-187.zip" size="3878" author="jejecool" created="Mon, 5 Jan 2015 14:52:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23ye7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311021" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10560"><![CDATA[normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>