<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:27:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-535] Thread bug in FileAlterationMonitor#stop(int)</title>
                <link>https://issues.apache.org/jira/browse/IO-535</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;The thread in FileAlterationMonitor wasn&apos;t stopped by the `stop(int)` method, which forbid application to shutdown until all `Thread` are exited (if FileAlterationMonitor is part of a DI managed component).&lt;/p&gt;

&lt;p&gt;This behavior conflict with the method javadoc `@param stopInterval the amount of time in milliseconds to wait for the thread to finish.`&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Simpleexampletounderstand&quot;&gt;&lt;/a&gt;Simple example to understand&lt;/h5&gt;

&lt;p&gt;Bad behavior&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(() -&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(500000);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InterruptedException e) {
        }
    });
    t.start();
    t.join(50);
   &lt;span class=&quot;code-comment&quot;&gt;// Ok, we reach &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; point until 500000ms are elapsed, but the thread is still alive.
&lt;/span&gt;   &lt;span class=&quot;code-comment&quot;&gt;//   because &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;#join(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) does not kill the thread. And the thread remains alive.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Good behavior&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(() -&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(500000);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InterruptedException e) {
        }
    });
    t.start();
    t.join(50);
    t.interupt();
   &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; is exited&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, we waited the given time BEFORE exiting the `Thread`, as described in the javadoc, and the `Thread` is now finished and killed.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Components managed by a DI Framework&lt;/p&gt;</environment>
        <key id="13068280">IO-535</key>
            <summary>Thread bug in FileAlterationMonitor#stop(int)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="anthonyraymond">Anthony RAYMOND</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>patch</label>
                            <label>performance</label>
                    </labels>
                <created>Mon, 1 May 2017 23:48:08 +0000</created>
                <updated>Sun, 29 Apr 2018 09:22:41 +0000</updated>
                            <resolved>Sun, 29 Apr 2018 09:22:41 +0000</resolved>
                                    <version>2.5</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="15991817" author="anthonyraymond" created="Mon, 1 May 2017 23:52:27 +0000"  >&lt;p&gt;GitHub pull request : &lt;a href=&quot;https://github.com/apache/commons-io/pull/36&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/36&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16394305" author="githubbot" created="Sat, 10 Mar 2018 19:14:02 +0000"  >&lt;p&gt;GitHub user SvetlinZarev opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/58&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-535&quot; title=&quot;Thread bug in FileAlterationMonitor#stop(int)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-535&quot;&gt;&lt;del&gt;IO-535&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-535&quot; title=&quot;Thread bug in FileAlterationMonitor#stop(int)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-535&quot;&gt;&lt;del&gt;IO-535&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Adds test case to verify the incorrect behavior and the fix. &lt;br/&gt;
    Does not incorrectly remove the Thread.currentThread().interrupt(); like the original PR (#36 ).&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/SvetlinZarev/commons-io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/SvetlinZarev/commons-io&lt;/a&gt; io-535&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/58.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/58.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #58&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 56a6496aebf960f0b19004d08d72b4c1a2d2b073&lt;br/&gt;
Author: Svetlin Zarev &amp;lt;svetlin.zarev@...&amp;gt;&lt;br/&gt;
Date:   2018-03-10T18:37:30Z&lt;/p&gt;

&lt;p&gt;    Ignore IntelliJ IDE files&lt;/p&gt;

&lt;p&gt;commit 967ec8505d0393d74ae2b80651b690b06ffe1ffb&lt;br/&gt;
Author: Svetlin Zarev &amp;lt;svetlin.zarev@...&amp;gt;&lt;br/&gt;
Date:   2018-03-10T19:02:06Z&lt;/p&gt;

&lt;p&gt;    Add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-535&quot; title=&quot;Thread bug in FileAlterationMonitor#stop(int)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-535&quot;&gt;&lt;del&gt;IO-535&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;commit 22ead16c4e2d96ad5c0cf637e27f78479b2f0a04&lt;br/&gt;
Author: Svetlin Zarev &amp;lt;svetlin.zarev@...&amp;gt;&lt;br/&gt;
Date:   2018-03-10T19:03:39Z&lt;/p&gt;

&lt;p&gt;    Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-535&quot; title=&quot;Thread bug in FileAlterationMonitor#stop(int)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-535&quot;&gt;&lt;del&gt;IO-535&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Interrupt the thread created by FileAlterationMonitor on stop()&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16457957" author="githubbot" created="Sun, 29 Apr 2018 09:21:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/58&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-io/pull/36]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ecav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>