<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:25:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-89] Inconsistency in SizeFileFilter and AgeFileFilter implementations</title>
                <link>https://issues.apache.org/jira/browse/IO-89</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;Theres an inconsistency (bug?) in the implementation of SizeFileFilter and AgeFileFilter.&lt;/p&gt;

&lt;p&gt;In SizeFileFilter, using an &quot;acceptLarger&quot; parameter of true actually accepts files with a size equal to and larger, whereas&lt;br/&gt;
specifying an &quot;acceptLarger&quot; parameter of false only accepts smaller files.&lt;/p&gt;

&lt;p&gt;The same is true for AgeFileFilter, using an &quot;acceptOlder&quot; parameter of true actually accepts files either the same age or older, whereas&lt;br/&gt;
specifying an &quot;acceptOlder&quot; parameter of false only accepts newer files.&lt;/p&gt;


&lt;p&gt;A big benefit of resolving these inconsistencies would mean that creating filters for any condition (i.e. &amp;lt;, &amp;gt;, &amp;lt;=, &amp;gt;= or =) becomes&lt;br/&gt;
alot easier. For example if the AgeFileFilter did only do either newer or older, then creating a filters for &quot;the same age or older&quot;&lt;br/&gt;
or &quot;the same age or younger&quot; could be done in the following way:&lt;/p&gt;

&lt;p&gt;    IOFileFilter equalOlder   = new NotFileFilter(new AgeFileFilter(cutoff, false));&lt;br/&gt;
    IOFileFilter equalYounger = new NotFileFilter(new AgeFileFilter(cutoff, true));&lt;/p&gt;


&lt;p&gt;For SizeFileFilter I propose changing the logic to the following:&lt;/p&gt;

&lt;p&gt;    if (acceptLarger) &lt;/p&gt;
{
        return file.length() &amp;gt;= size;
    }
&lt;p&gt; else &lt;/p&gt;
{
        return file.length() &amp;lt;= size;
    }

&lt;p&gt;(This would mean that &quot;new SizeFileFilter(cutoff)&quot; would operate the same way)&lt;/p&gt;

&lt;p&gt;I have added isOlderFile() methods to FileUtils and propose that AgeFileFilter is changed to the following:&lt;/p&gt;

&lt;p&gt;    if (acceptOlder) &lt;/p&gt;
{
        return FileUtils.isFileOlder(file, cutoff);
    }
&lt;p&gt; else &lt;/p&gt;
{
        return FileUtils.isFileNewer(file, cutoff);
    }</description>
                <environment></environment>
        <key id="12346557">IO-89</key>
            <summary>Inconsistency in SizeFileFilter and AgeFileFilter implementations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="niallp">Niall Pemberton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Jul 2006 16:24:04 +0000</created>
                <updated>Sat, 30 May 2020 18:12:59 +0000</updated>
                            <resolved>Thu, 7 Feb 2008 01:42:00 +0000</resolved>
                                    <version>1.2</version>
                                                    <component>Filters</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12423130" author="rahul@apache.org" created="Mon, 24 Jul 2006 19:42:28 +0000"  >&lt;p&gt;Agreed, thanks for your time. My only comment is since FileUtils.isFileNewer/Older are exclusive, perhaps we should have SizeFileFilter be exclusive as well (so &amp;lt; instead of &amp;lt;= etc.), that way there is consistency across filters as well.&lt;/p&gt;</comment>
                            <comment id="12423156" author="niallp" created="Mon, 24 Jul 2006 20:34:18 +0000"  >&lt;p&gt;I tried it out that way first (I have the changes ready to commit) with SizeFileFilter - but in my mind having the limits included seems slightly more suitable - for example up to and including 2MB or 2MB and over seems more desirable as the default behaviour. It also makes the &quot;size range&quot; filter simpler (uses 3 filters, rather than 4).&lt;/p&gt;

&lt;p&gt;Having said that, if others agree with you  then I&apos;m not strongly fixed to this pov. I expected the issue to be more over backwards compatibility - which would be a shame since the main issue is consistency of behaviour and what it will allow if they are consistent.&lt;/p&gt;</comment>
                            <comment id="12423209" author="scolebourne" created="Tue, 25 Jul 2006 00:04:56 +0000"  >&lt;p&gt;I&apos;m behind on reviewing commits, but the key thing is backwards compatability. The internal implementation (number of classes/flexibility) is less important.&lt;/p&gt;</comment>
                            <comment id="12423215" author="niallp" created="Tue, 25 Jul 2006 01:47:18 +0000"  >&lt;p&gt;OK so this needs re-thinking. IMO it should be easy to use any of the five compare operators (i.e. &amp;lt;, &amp;lt;=, =, &amp;gt;=, &amp;gt;) with the size or age filters.&lt;/p&gt;

&lt;p&gt;So maybe we should have a constructor which takes the size and operator - and deprecate the existing boolean parameter constructors:&lt;/p&gt;

&lt;p&gt;   public SizeFileFilter(long size, boolean acceptLarger) &lt;/p&gt;
{
       this(size, acceptLarger ? &quot;&amp;gt;=&quot; : &quot;&amp;lt;&quot;);
   }

&lt;p&gt;   public SizeFileFilter(long size, String operator) &lt;/p&gt;
{
       this.size = size;
       this.operator = operator;
   }

&lt;p&gt;   public boolean accept(File file) {&lt;br/&gt;
       if (&quot;&amp;lt;&quot;.equals(operator)) &lt;/p&gt;
{
           return file.length() &amp;lt; size;
       }
&lt;p&gt; else if (&quot;&amp;lt;=&quot;.equals(operator)) &lt;/p&gt;
{
           return file.length() &amp;lt;= size;
       }
&lt;p&gt; else if (&quot;=&quot;.equals(operator)) &lt;/p&gt;
{
           return file.length() == size;
       }
&lt;p&gt; else if (&quot;&amp;gt;=&quot;.equals(operator)) &lt;/p&gt;
{
           return file.length() &amp;gt;= size;
       }
&lt;p&gt; else if (&quot;&amp;gt;&quot;.equals(operator)) &lt;/p&gt;
{
           return file.length() &amp;gt; size;
       }
&lt;p&gt;   }&lt;/p&gt;

&lt;p&gt;When I get time I&apos;ll put together a patch for review&lt;/p&gt;</comment>
                            <comment id="12423451" author="scolebourne" created="Tue, 25 Jul 2006 20:57:32 +0000"  >&lt;p&gt;I&apos;m not sure I&apos;m entirely convinced of the need for this. But if it is going to be done it should use an enumerated type (pre JDK1.5) as per the IOCase class.&lt;/p&gt;</comment>
                            <comment id="12440743" author="niallp" created="Sun, 8 Oct 2006 09:18:10 +0000"  >&lt;p&gt;OK forget the last thing I said - back to my original suggestion - I understand your compatibility issues but I think this is a bug for the following reasons and so should be fixed:&lt;/p&gt;

&lt;p&gt;1) It doesn&apos;t do what it says it does in the javadocs&lt;br/&gt;
2) The larger/smaller and older/newer are inconsistent.&lt;/p&gt;</comment>
                            <comment id="12441499" author="scolebourne" created="Wed, 11 Oct 2006 16:55:23 +0000"  >&lt;p&gt;Where are we with this? Have you got a finalised proposal? Certainly bug squashing and javadoc fixes  are good.&lt;/p&gt;</comment>
                            <comment id="12441503" author="niallp" created="Wed, 11 Oct 2006 17:13:44 +0000"  >&lt;p&gt;My final proposal is actually what I originally proposed, but you pointed out earlier &quot;the key thing is backward&quot; compatibilty. IMO we should fix it because I think the inconsistency is a bug. From my point of view theres three options here:&lt;/p&gt;

&lt;p&gt;1) Fix It - modify as per my original proposal&lt;br/&gt;
2) Punt the issue to 1.4 until theres consensus (so it doesn&apos;t hold up 1.3)&lt;br/&gt;
3) Close it as WONT FIX&lt;/p&gt;</comment>
                            <comment id="12441574" author="scolebourne" created="Wed, 11 Oct 2006 22:25:41 +0000"  >&lt;p&gt;I can see a javadoc fix as being valid here, but I don&apos;t believe we can change =&amp;gt; to &amp;gt;. I also wonder how often the full variety of operators is needed.&lt;/p&gt;

&lt;p&gt;I&apos;m happy if you want to propose out a complete and more advanced solution with all the operators, but for now, I think we should just javadoc this (including the method params if possible).&lt;/p&gt;</comment>
                            <comment id="12441933" author="niallp" created="Fri, 13 Oct 2006 06:21:41 +0000"  >&lt;p&gt;I&apos;ve corrected the AgeFileFilter and SizeFileFilter javadocs.&lt;/p&gt;

&lt;p&gt;Another solution would be to add two new equivalent (but without the inconsistency) filters - LengthFileFilter (uses file.length() ) &amp;amp; LastModifiedFileFilter (uses  file.lastModified()) and deprecate SizeFileFilter &amp;amp; AgeFileFilter.&lt;/p&gt;

&lt;p&gt;Whatever the solution I&apos;m not sure when/if I&apos;ll get round to this, so I&apos;ve punted the fix version to 1.4 for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>139542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0smjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>