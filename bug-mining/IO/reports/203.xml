<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:27:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-557] UnsupportedEncodingException when opening an ISO-8859-1 XML stream with Turkish as the default locale</title>
                <link>https://issues.apache.org/jira/browse/IO-557</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;When the default locale is set to the Turkish language, using the XmlStreamReader constructor on an XML stream with a prolog including the ISO-8859-1 charset name in lowercase as its encoding throws a UnsupportedEncodingException (java.io.UnsupportedEncodingException: &#304;SO-8859-1).&lt;br/&gt;
Example XML prolog : &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&amp;gt;&lt;/p&gt;

&lt;p&gt;This is apparently because the XmlStreamReader class uses String.toUpperCase() in its getXmlProlog() function. It should rather use toUpperCase(Locale.ROOT) or toUpperCase(Locale.US) as already done in the getContentTypeEncoding() function. Otherwise the behaviour can be different depending on the default locale, as the dotted lower case i becomes a dotted upper case i in the Turkish language, which not the case with other languages.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JVM running with argument -Duser.language=tr, or on an Operating System with Turkish as its preferred language.&lt;/p&gt;</environment>
        <key id="13119774">IO-557</key>
            <summary>UnsupportedEncodingException when opening an ISO-8859-1 XML stream with Turkish as the default locale</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="luccioman">luccioman</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Mon, 20 Nov 2017 21:09:51 +0000</created>
                <updated>Sun, 14 Jan 2018 10:42:06 +0000</updated>
                            <resolved>Sun, 14 Jan 2018 10:42:06 +0000</resolved>
                                    <version>2.6</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Streams/Writers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16284231" author="michael-o" created="Fri, 8 Dec 2017 21:19:25 +0000"  >&lt;p&gt;Please provide a sample project.&lt;/p&gt;</comment>
                            <comment id="16285599" author="luccioman" created="Mon, 11 Dec 2017 07:31:51 +0000"  >&lt;p&gt;The described issue was detected within &lt;a href=&quot;https://yacy.net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;YaCy&lt;/a&gt; Search Engine integration. You can easily reproduce the issue by running the &lt;a href=&quot;https://github.com/yacy/yacy_search_server/blob/master/test/java/net/yacy/document/parser/GenericXMLParserTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GenericXMLParserTest.java&lt;/a&gt; JUnit test : running fine with English locale, failing on &quot;testParse&quot; and &quot;testParseISO_8859_1Charset&quot; tests when locale is set to Turkish (for example with JVM option -Duser.language=tr).&lt;/p&gt;</comment>
                            <comment id="16285741" author="sebb@apache.org" created="Mon, 11 Dec 2017 10:38:18 +0000"  >&lt;p&gt;I agree that code should never use toUpperCase() or toLowerCase().&lt;br/&gt;
It should always pass the Locale, which should generally be Locale.ROOT.&lt;/p&gt;

&lt;p&gt;If the code needs to use the default Locale then it should provide it as a parameter.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;The same applies to String.getBytes() etc.&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16286465" author="michael-o" created="Mon, 11 Dec 2017 19:59:29 +0000"  >&lt;p&gt;Have you tried with a patched version of Commons IO? I&apos;d like to give you the credit for the proposed patch.&lt;/p&gt;</comment>
                            <comment id="16286770" author="sebb@apache.org" created="Mon, 11 Dec 2017 23:44:55 +0000"  >&lt;p&gt;I think raising the incorrect use of the default Locale is sufficient reason for a mention in the changes file.&lt;/p&gt;</comment>
                            <comment id="16287282" author="luccioman" created="Tue, 12 Dec 2017 08:53:08 +0000"  >&lt;p&gt;I confirm that running the previously mentioned GenericXMLParserTest on YaCy project with a patched version of CommonsIO XmlStreamReader fixes the issue.&lt;/p&gt;

&lt;p&gt;I didn&apos;t take the time to do it, but I guess modifying also the org.apache.commons.io.input.XmlStreamReaderTest JUnit test to demonstrate the issue and the fix would also be a good idea.&lt;/p&gt;</comment>
                            <comment id="16289153" author="michael-o" created="Wed, 13 Dec 2017 11:45:45 +0000"  >&lt;p&gt;Would you like to create a PR on github?&lt;/p&gt;</comment>
                            <comment id="16289511" author="luccioman" created="Wed, 13 Dec 2017 16:46:08 +0000"  >&lt;p&gt;Ok, I&apos;ll do my best to create a Pull Request in the coming days.&lt;/p&gt;</comment>
                            <comment id="16294654" author="githubbot" created="Mon, 18 Dec 2017 08:46:03 +0000"  >&lt;p&gt;GitHub user luccioman opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/51&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-557&quot; title=&quot;UnsupportedEncodingException when opening an ISO-8859-1 XML stream with Turkish as the default locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-557&quot;&gt;&lt;del&gt;IO-557&lt;/del&gt;&lt;/a&gt; Perform locale independant upper case conversions.&lt;/p&gt;

&lt;p&gt;    To handle properly lower cased character encoding name in XML prolog&lt;br/&gt;
    with any default system locale, notably Turkish which has specific rules for case conversion of dotted and dotless i characters.&lt;/p&gt;

&lt;p&gt;    Fixes issue &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-557&quot; title=&quot;UnsupportedEncodingException when opening an ISO-8859-1 XML stream with Turkish as the default locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-557&quot;&gt;&lt;del&gt;IO-557&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/IO-557&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/IO-557&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/luccioman/commons-io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/luccioman/commons-io&lt;/a&gt; case_conversion&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/51.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/51.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #51&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9969d9b4fbe25c136031d70734de286a4e08ff7a&lt;br/&gt;
Author: luccioman &amp;lt;luccioman@users.noreply.github.com&amp;gt;&lt;br/&gt;
Date:   2017-12-18T08:37:06Z&lt;/p&gt;

&lt;p&gt;    Perform locale independant upper case conversions.&lt;/p&gt;

&lt;p&gt;    To handle properly lower cased character encoding name in XML prolog&lt;br/&gt;
    with any default system locale, notably Turkish.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16295150" author="sebb@apache.org" created="Mon, 18 Dec 2017 15:51:19 +0000"  >&lt;p&gt;PR51 looks good to me&lt;/p&gt;</comment>
                            <comment id="16325499" author="githubbot" created="Sun, 14 Jan 2018 10:40:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/51&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n0rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>