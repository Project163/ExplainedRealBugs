<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:27:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-721] Wrong exception message in FileUtils.setLastModified(File, File)</title>
                <link>https://issues.apache.org/jira/browse/IO-721</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;A simple&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FileUtils.copyDirectory(source, dest, glob) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;works fine when using Commons-IO 2.7, but fails with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caught: java.io.IOException: Failed setLastModified on /path/to/source
java.io.IOException: Failed setLastModified on /path/to/source
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.commons.io.FileUtils.setLastModified(FileUtils.java:2561)
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.commons.io.FileUtils.doCopyDirectory(FileUtils.java:1361)
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:733)
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:659)
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:606)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;after update to 2.8.0. From reading the documentation, it&apos;s also my understanding that &quot;setLastModified()&quot; should be executed on &quot;dest&quot; to set the same modification time as &quot;source&quot;, but &lt;b&gt;not&lt;/b&gt; on &quot;source&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 20.04 LTS&lt;/p&gt;

&lt;p&gt;Groovy 3.0.x&lt;/p&gt;

&lt;p&gt;Java 11 (from Ubuntu packages)&lt;/p&gt;</environment>
        <key id="13364660">IO-721</key>
            <summary>Wrong exception message in FileUtils.setLastModified(File, File)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Heinrichs">Dirk Heinrichs</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Mar 2021 13:56:58 +0000</created>
                <updated>Sun, 26 Sep 2021 14:31:33 +0000</updated>
                            <resolved>Sun, 26 Sep 2021 14:30:03 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.12.0</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17301195" author="garydgregory" created="Sun, 14 Mar 2021 16:35:43 +0000"  >&lt;p&gt;A quick scan for the git master and 2.8.0 does not reveal an obvious issue.&lt;/p&gt;

&lt;p&gt;May you please demonstrate your use case in a PR on GitHub? You can create a new class or append to one of the many &lt;tt&gt;FileUtils*TestCase&lt;/tt&gt;&#160;classes.&lt;/p&gt;</comment>
                            <comment id="17301421" author="heinrichs" created="Mon, 15 Mar 2021 06:37:55 +0000"  >&lt;p&gt;My use case is a simple Groovy script for copying files from one directory to another:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Copy a directory to a destination directory
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Get dependencies
&lt;/span&gt;@GrabConfig(systemClassLoader=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;commons-io:commons-io:2.8.0&apos;&lt;/span&gt;)
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;info.picocli:picocli-groovy:4.6.1&apos;&lt;/span&gt;)

&lt;span class=&quot;code-comment&quot;&gt;// Import external modules
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.cli.picocli.CliBuilder
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.io.FileUtils
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.io.filefilter.WildcardFileFilter

&lt;span class=&quot;code-comment&quot;&gt;// Parse command line options
&lt;/span&gt;def cli = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CliBuilder(name: &lt;span class=&quot;code-quote&quot;&gt;&apos;copyDir.groovy&apos;&lt;/span&gt;)
cli.h(type: &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;, longOpt: &lt;span class=&quot;code-quote&quot;&gt;&apos;help&apos;&lt;/span&gt;, usageHelp: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, required: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;Show usage information&apos;&lt;/span&gt;)
cli.f(type: File, longOpt: &lt;span class=&quot;code-quote&quot;&gt;&apos;from&apos;&lt;/span&gt;, required: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, args: 1, &lt;span class=&quot;code-quote&quot;&gt;&apos;The directory that should be copied (required)&apos;&lt;/span&gt;)
cli.p(type: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, longOpt: &lt;span class=&quot;code-quote&quot;&gt;&apos;pattern&apos;&lt;/span&gt;, required: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, args: 1, defaultValue: &lt;span class=&quot;code-quote&quot;&gt;&apos;*&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;Glob pattern to specify which files to copy (optional, &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt;)&apos;&lt;/span&gt;)
cli.t(type: File, longOpt: &lt;span class=&quot;code-quote&quot;&gt;&apos;to&apos;&lt;/span&gt;, required: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, args: 1, &lt;span class=&quot;code-quote&quot;&gt;&apos;The destination directory (required)&apos;&lt;/span&gt;)
def opts = cli.parse(args)
opts || &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(1)
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(opts.h) {
 &#160;cli.usage()
 &#160;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(0)
}

&lt;span class=&quot;code-comment&quot;&gt;// Copy directory to its destination
&lt;/span&gt;println(&lt;span class=&quot;code-quote&quot;&gt;&apos;Copying directory &apos;&lt;/span&gt; + opts.f + &lt;span class=&quot;code-quote&quot;&gt;&apos; to &apos;&lt;/span&gt; + opts.t + &lt;span class=&quot;code-quote&quot;&gt;&apos; using glob pattern &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; + opts.p + &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt;...&apos;&lt;/span&gt;)
def glob = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WildcardFileFilter(opts.p)
FileUtils.copyDirectory(opts.f,opts.t, glob as FileFilter)
println(&lt;span class=&quot;code-quote&quot;&gt;&apos;Directory copied.&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Executing this results in above error. Changing the version of commons-io to 2.7 will make it work.&lt;/p&gt;</comment>
                            <comment id="17301535" author="heinrichs" created="Mon, 15 Mar 2021 09:33:38 +0000"  >&lt;p&gt;Looking at the code I see that doCopyDirectory() calls a new method FileUtils.setLastModified() in 2.8.0 which throws an exception (with a wrong message, BTW., that should be &quot;targetFile&quot;, not &quot;sourceFile&quot;):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void setLastModified(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File sourceFile, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File targetFile) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!targetFile.setLastModified(sourceFile.lastModified())) {
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed setLastModified on &quot;&lt;/span&gt; + sourceFile);
 &#160;&#160;&#160;&#160;&#160;&#160;&#160;}
 &#160;&#160;&#160;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;while in 2.7 it calls &quot;destFile.setLastModified()&quot; directly w/o throwing an exception. If that isn&apos;t an obvious issue...&lt;/p&gt;</comment>
                            <comment id="17301540" author="heinrichs" created="Mon, 15 Mar 2021 09:42:01 +0000"  >&lt;p&gt;BTW: The destination directory in my test was /tmp. Maybe that&apos;s also part of the problem...&lt;/p&gt;</comment>
                            <comment id="17301545" author="heinrichs" created="Mon, 15 Mar 2021 09:45:02 +0000"  >&lt;p&gt;Indeed. Works if I change it to /tmp/foo.&lt;/p&gt;

&lt;p&gt;OK, in this case the only remaining issue is the wrong file being printed by the exception message...&lt;/p&gt;</comment>
                            <comment id="17329934" author="dariusx" created="Fri, 23 Apr 2021 02:40:24 +0000"  >&lt;p&gt;Why does one directory work, but not another?&#160;Is it permissions? I can run&#160; &#160;touch&#160; &#160;on my&#160; /tmp directory.&lt;/p&gt;</comment>
                            <comment id="17329991" author="heinrichs" created="Fri, 23 Apr 2021 05:47:30 +0000"  >&lt;p&gt;So do I. However, that doesn&apos;t change the fact that the script above throws an exception when using 2.8.0 and option &quot;-t /tmp&quot;, but doesn&apos;t with &quot;-t /tmp/foo&quot;.&lt;/p&gt;</comment>
                            <comment id="17331273" author="dariusx" created="Sat, 24 Apr 2021 17:17:39 +0000"  >&lt;p&gt;Looking at the diff between 2.7 and 2.8.0&lt;br/&gt;
 This code:&#160;destDir.setLastModified(srcDir.lastModified());&lt;/p&gt;

&lt;p&gt;was replaced by&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void setLastModified(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File sourceFile, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File targetFile) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!targetFile.setLastModified(sourceFile.lastModified())) {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed setLastModified on &quot;&lt;/span&gt; + sourceFile);
  }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;thus throwing an IOException in a situation where it previously did not.&lt;/p&gt;

&lt;p&gt;There are comments in the code that show this was intentional.&lt;/p&gt;

&lt;p&gt;It seems that the work-around&#160; (which would work in both 2.7 and 2.8.0) is to call the overriddedn copyDirectory() method, and explicitly pass&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;preserveFileDate=false&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17331765" author="heinrichs" created="Mon, 26 Apr 2021 05:36:46 +0000"  >&lt;p&gt;Yes, that should work.&lt;/p&gt;

&lt;p&gt;BTW: I mentioned that new method already, see above. Please note that the exception message is wrong, that line should actually be&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed setLastModified on &quot;&lt;/span&gt; + targetFile);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Because it&apos;s NOT &quot;sourceFile&quot; whose last modified time it tries to change.&lt;/p&gt;</comment>
                            <comment id="17333290" author="garydgregory" created="Tue, 27 Apr 2021 14:22:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Heinrichs&quot; class=&quot;user-hover&quot; rel=&quot;Heinrichs&quot;&gt;Heinrichs&lt;/a&gt;&#160;and all,&lt;/p&gt;

&lt;p&gt;Please look at git master.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="17334467" author="heinrichs" created="Wed, 28 Apr 2021 05:52:53 +0000"  >&lt;p&gt;Looks better &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17337885" author="garydgregory" created="Sat, 1 May 2021 21:09:47 +0000"  >&lt;p&gt;Ok to resolve this issue then? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Heinrichs&quot; class=&quot;user-hover&quot; rel=&quot;Heinrichs&quot;&gt;Heinrichs&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17338200" author="heinrichs" created="Mon, 3 May 2021 06:26:24 +0000"  >&lt;p&gt;Yes, think so.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0oovs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>