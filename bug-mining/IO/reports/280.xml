<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:27:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-716] ReaderInputStream enter infinite loop for too small buffer sizes</title>
                <link>https://issues.apache.org/jira/browse/IO-716</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.commons.io.input.ReaderInputStream&lt;/tt&gt; enters an infinite loop when it was constructed with a too small buffer size (0 or 1) and one of its reading methods is called.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bufferSize = 1;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReaderInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(&lt;span class=&quot;code-quote&quot;&gt;&quot;\uD800&quot;&lt;/span&gt;), StandardCharsets.UTF_8, bufferSize)) {
    in.read();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This could be solved by making sure that the buffer size is always &amp;gt;= 2. This should solve this issue because as far as I know all charsets only report &lt;tt&gt;UNDERFLOW&lt;/tt&gt; without encoding any chars if the only char in the buffer is a surrogate.&lt;br/&gt;
However, the saner solution might be to increase the buffer when &lt;tt&gt;UNDERFLOW&lt;/tt&gt; is encountered and no chars from &lt;tt&gt;encoderIn&lt;/tt&gt; have been consumed.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Similarly for sanety it would be good to throw an &lt;tt&gt;AssertionError&lt;/tt&gt; (or increase the size of &lt;tt&gt;encoderOut&lt;/tt&gt;) if &lt;tt&gt;OVERFLOW&lt;/tt&gt; is returned. I don&apos;t think there are any encodings which require more than 128 bytes (used by &lt;tt&gt;ReaderInputStream&lt;/tt&gt; for the output buffer) for encoding a single char or flushing, but would be good to at least handle that case in a saner way than entering an infinite loop anyways.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356350">IO-716</key>
            <summary>ReaderInputStream enter infinite loop for too small buffer sizes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Marcono1234">Marcono1234</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2021 03:18:38 +0000</created>
                <updated>Sun, 26 Sep 2021 16:13:25 +0000</updated>
                            <resolved>Sun, 26 Sep 2021 15:28:14 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.12.0</fixVersion>
                                    <component>Streams/Writers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17285948" author="garydgregory" created="Wed, 17 Feb 2021 16:19:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Marcono1234&quot; class=&quot;user-hover&quot; rel=&quot;Marcono1234&quot;&gt;Marcono1234&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;br/&gt;
Feel free to provide a PR on GitHub with tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17420313" author="garydgregory" created="Sun, 26 Sep 2021 15:28:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Marcono1234&quot; class=&quot;user-hover&quot; rel=&quot;Marcono1234&quot;&gt;Marcono1234&lt;/a&gt;,&lt;br/&gt;
 I took the keep-it-simple path: The constructor now requires a minimum size of &lt;tt&gt;CharsetEncoder#maxBytesPerChar() * 2&lt;/tt&gt; or throws an IllegalArgumentException.&lt;br/&gt;
 Please verify your use case and close. See also &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-638&quot; title=&quot;Infinite loop in CharSequenceInputStream.read for 4-byte characters with UTF-8 and 3-byte buffer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-638&quot;&gt;&lt;del&gt;IO-638&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nae8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>