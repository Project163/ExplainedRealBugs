<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:27:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-686] IOUtils.toByteArray(InputStream) Javadoc does not match code</title>
                <link>https://issues.apache.org/jira/browse/IO-686</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;According to the code in the v2.8.0 release, passing null to the method should throw an exception, however it is producing an empty byte array instead.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Gets the contents of an &amp;lt;code&amp;gt;InputStream&amp;lt;/code&amp;gt; as a &amp;lt;code&amp;gt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;lt;/code&amp;gt;.
 * &amp;lt;p&amp;gt;
 * This method buffers the input internally, so there is no need to use a
 * &amp;lt;code&amp;gt;BufferedInputStream&amp;lt;/code&amp;gt;.
 * &amp;lt;/p&amp;gt;
 *
 * @param input the &amp;lt;code&amp;gt;InputStream&amp;lt;/code&amp;gt; to read from
 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the requested &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; NullPointerException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the input is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; an I/O error occurs
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] toByteArray(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputStream input) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ByteArrayOutputStream output = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream()) {
        copy(input, output);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; output.toByteArray();
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This can be recreated by the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void shouldThrowNullPointerException() {
    assertThrows(NullPointerException.class, () -&amp;gt; IOUtils.toByteArray((InputStream) &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;))
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On v2.7 the test passes, on v2.8.0 it fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13326891">IO-686</key>
            <summary>IOUtils.toByteArray(InputStream) Javadoc does not match code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="themoffster">Alan Moffat</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Sep 2020 14:54:33 +0000</created>
                <updated>Tue, 19 Jan 2021 18:20:29 +0000</updated>
                            <resolved>Tue, 19 Jan 2021 18:20:29 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.9.0</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17193677" author="garydgregory" created="Thu, 10 Sep 2020 15:33:05 +0000"  >&lt;p&gt;I&apos;ll update the Javadoc to match the code.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17193809" author="themoffster" created="Thu, 10 Sep 2020 19:27:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;is this expected behaviour then? I ask as it&apos;s a bit of a breaking change and I was expecting the javadoc to be right as that&apos;s how the previous version worked. Your comment suggests that that the code is right and javadoc is wrong which is surprising.&lt;/p&gt;</comment>
                            <comment id="17193855" author="garydgregory" created="Thu, 10 Sep 2020 21:10:00 +0000"  >&lt;p&gt;In general, we make the Javadoc match the code, as the code evolves.&lt;br/&gt;
In this case, that method&apos;s Javadoc got out of sync with code. The&lt;br/&gt;
method is now used from other call sites where the expected result is&lt;br/&gt;
an empty byte array.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;
</comment>
                            <comment id="17194270" author="sebb@apache.org" created="Fri, 11 Sep 2020 13:28:33 +0000"  >&lt;p&gt;The problem here is that 2.8.0 behaves differently from 2.7 and previous versions.&lt;/p&gt;

&lt;p&gt;2.8.0 no longer throws NPE, but this change does not appear to be documented.&lt;/p&gt;

&lt;p&gt;I don&apos;t think fixing the Javadoc is necessarily the correct solution.&lt;/p&gt;</comment>
                            <comment id="17194758" author="sebb@apache.org" created="Sat, 12 Sep 2020 15:39:42 +0000"  >&lt;p&gt;It looks like there was a test for the behaviour:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-io/blob/6efbccc88318d15c0f5fdcfa0b87e3dc980dca22/src/test/java/org/apache/commons/io/IOUtilsCopyTestCase.java#L99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/blob/6efbccc88318d15c0f5fdcfa0b87e3dc980dca22/src/test/java/org/apache/commons/io/IOUtilsCopyTestCase.java#L99&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That suggests the behaviour was intentional.&lt;/p&gt;</comment>
                            <comment id="17194894" author="themoffster" created="Sat, 12 Sep 2020 22:02:31 +0000"  >&lt;p&gt;If there was a test for it why did it not fail the build in 2.8.0?&lt;/p&gt;</comment>
                            <comment id="17267516" author="garydgregory" created="Mon, 18 Jan 2021 20:39:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=themoffster&quot; class=&quot;user-hover&quot; rel=&quot;themoffster&quot;&gt;themoffster&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is related to &lt;span class=&quot;error&quot;&gt;&amp;#91;IO=690&amp;#93;&lt;/span&gt;, the underlying code in git master is now back to an NPE (with a better message) for null input; the Javadoc is improved as well.&lt;/p&gt;

&lt;p&gt;Please review git master, comment nad/or close this ticket if appropriate.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17267579" author="themoffster" created="Tue, 19 Jan 2021 00:24:53 +0000"  >&lt;p&gt;The original Javadoc explicitly called out the @throws NullPointerExceotion for a null inputstream (see initial comment on this bug report).&lt;br/&gt;
Based on what you&#8217;ve said I would expect this in the Javadoc on master but it&#8217;s not. I feel that this should be added in &lt;/p&gt;</comment>
                            <comment id="17268104" author="garydgregory" created="Tue, 19 Jan 2021 18:12:33 +0000"  >&lt;p&gt;The current Javadoc reads:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Gets the contents of an {@code InputStream} as a {@code &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]}.
     * &amp;lt;p&amp;gt;
     * This method buffers the input internally, so there is no need to use a
     * {@code BufferedInputStream}.
     * &amp;lt;/p&amp;gt;
     *
     * @param inputStream the {@code InputStream} to read.
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the requested &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array.
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; NullPointerException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the InputStream is {@code &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}.
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; an I/O error occurs.
     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17268115" author="themoffster" created="Tue, 19 Jan 2021 18:20:29 +0000"  >&lt;p&gt;Happy with the javadoc&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13329796">IO-690</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ihjs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>