<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:25:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-216] Delete files quietly when an exception is thrown during initialization</title>
                <link>https://issues.apache.org/jira/browse/IO-216</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;LockableFileWriter fails to report lock file deletion failure - it calls lockFile.delete() several times but fails to check the return code.&lt;/p&gt;

&lt;p&gt;N.B. IIRC, file.delete() returns false if there was no file to delete, so any fix needs to take this into account.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12433494">IO-216</key>
            <summary>Delete files quietly when an exception is thrown during initialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Aug 2009 17:54:51 +0000</created>
                <updated>Thu, 10 Nov 2011 18:09:30 +0000</updated>
                            <resolved>Tue, 28 Sep 2010 15:30:33 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>2.0</fixVersion>
                                    <component>Streams/Writers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12895415" author="niallp" created="Wed, 4 Aug 2010 20:52:34 +0000"  >&lt;p&gt;lockFile.delete() is called three times. Two of those are in the initWriter() method, trying to clean up when an exception is thrown. I assume you mean by &quot;report&quot; to throw an exception - but that would &lt;b&gt;hide&lt;/b&gt; the underlying exception that is re-thrown later. In fact I think we should use the FileUtils.deleteQuietly() method here to avoid that (attaching a patch for that).&lt;/p&gt;

&lt;p&gt;The other time is in the close() method. We could throw an exception here, but I&apos;m not sure about that - since although it is a failure it has done its job.&lt;/p&gt;

&lt;p&gt;Anyway, perhaps you could put forward a more concrete proposal about how this should be resolved.&lt;/p&gt;</comment>
                            <comment id="12915724" author="niallp" created="Tue, 28 Sep 2010 12:37:53 +0000"  >&lt;p&gt;OK I&apos;ve applied the patch I suggested and renamed this ticket to reflect that change.&lt;/p&gt;</comment>
                            <comment id="12915751" author="sebb@apache.org" created="Tue, 28 Sep 2010 14:02:13 +0000"  >&lt;p&gt;The problem with ignoring the deletion failure is that the stale lock file may be detected until much later when an attempt to lock a file fails unexpectedly.&lt;/p&gt;

&lt;p&gt;The exception does give the name of the lockFile, but it could be difficult to determine where it was created, and indeed whether it is still in use.&lt;/p&gt;

&lt;p&gt;Not sure how best to solve this.&lt;/p&gt;

&lt;p&gt;In the meantime, I propose to update the Javadoc to mention that the lock file could theoretically be left behind after close or on init failure.&lt;/p&gt;</comment>
                            <comment id="12915787" author="niallp" created="Tue, 28 Sep 2010 15:30:33 +0000"  >&lt;p&gt;OK I see you updated the JavaDoc:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1002182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1002182&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;so resolving this as FIXED(again!)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451266" name="IO-216-deleteQuietly.patch" size="1081" author="niallp" created="Wed, 4 Aug 2010 20:52:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>139640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b113:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62279</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>