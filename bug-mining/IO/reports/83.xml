<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:25:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-253] Test Failures using IBM JDK</title>
                <link>https://issues.apache.org/jira/browse/IO-253</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;J&#246;rg Schaible reports the following test failures in RC5 of Commons IO 2.0&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://markmail.org/message/eoo5bk6n3pfsvfwk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/eoo5bk6n3pfsvfwk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;IBM JDK 1.5 does not like the OOME handling in the FileCleanerTestCase and FileCleanerTrackingTestCase, while IBM JDK 1.6 has problems with the WriterOutputStream handling UTF16.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477586">IO-253</key>
            <summary>Test Failures using IBM JDK</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="niallp">Niall Pemberton</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Oct 2010 22:42:44 +0000</created>
                <updated>Sun, 23 Apr 2017 17:53:14 +0000</updated>
                            <resolved>Sun, 23 Apr 2017 17:53:14 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12921916" author="niallp" created="Sun, 17 Oct 2010 22:58:46 +0000"  >&lt;p&gt;I managed to download IBM&apos;s 1.6 JDK version (eclipse bundle, which is the only windows one available for me) from the following location:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/java/jdk/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ibm.com/developerworks/java/jdk/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I can reproduce the problem with the UTF16 test in WriterOutputStream handling. From debugging, the last call to CharsetDecoder&apos;s  decode(decoderIn, decoderOut, endOfInput) method where the &lt;b&gt;endOfInput&lt;/b&gt; parameter is &lt;b&gt;true&lt;/b&gt; (called by the close() method) causes the CharBuffer&apos;s position to be reset to zero. As a result the flushOutput() method does nothing.&lt;/p&gt;

&lt;p&gt;Why this happens only for UTF-16 I don&apos;t know. The source code for the IBM JDK is not available and so it is not possible to determine what exactly its doing. WriterOutputStream is correctly implementing the contract with CharsetDecoder by calling the decode() method a final time, indicating endOfInput and so my conclusion is this is a bug in the IBM JDK.&lt;/p&gt;

&lt;p&gt;I don&apos;t have access to IBM&apos;s JDK 1.5 and so theres nothing I can do to look at the failing FileCleaningTracker tests. These tests though fill up memory to try and get the garbage collector to reclaim some PhantomReferences. Once the garbage collector does that, then the tests check the functionality of FileCleaningTracker. The test failing with an OutOfMemory error means that the test is not operating properly and never getting to the point of actually testing FileCleaningTracker. Therefore it doesn&apos;t tell us anything about whether FileCleaningTracker works or not on IBM&apos;s JDK 1.5.&lt;/p&gt;</comment>
                            <comment id="12921922" author="niallp" created="Sun, 17 Oct 2010 23:24:32 +0000"  >&lt;p&gt;I have added WriterOutputStream tests for UTF-16BE and UTF-16LE - which pass using IBM JDK 1.6. I also added a &quot;buffered&quot; test for UTF-16 which fails on IBM JDK 1.6.&lt;/p&gt;

&lt;p&gt;For the record, the following is the output from the tests on IBM JDK:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Testsuite: org.apache.commons.io.output.WriterOutputStreamTest
Tests run: 12, Failures: 2, Errors: 0, Time elapsed: 0.085 sec

Testcase: testUTF8WithSingleByteWrite took 0.005 sec
Testcase: testLargeUTF8WithSingleByteWrite took 0.043 sec
Testcase: testUTF8WithBufferedWrite took 0 sec
Testcase: testLargeUTF8WithBufferedWrite took 0.002 sec
Testcase: testUTF16WithSingleByteWrite took 0.005 sec
	FAILED
&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; expected:&amp;lt;[&#224; peine arriv&#233;s nous entr&#226;mes dans sa chambre]&amp;gt; but was:&amp;lt;[]&amp;gt;
junit.framework.ComparisonFailure: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; expected:&amp;lt;[&#224; peine arriv&#233;s nous entr&#226;mes dans sa chambre]&amp;gt; but was:&amp;lt;[]&amp;gt;
	at org.apache.commons.io.output.WriterOutputStreamTest.testWithSingleByteWrite(WriterOutputStreamTest.java:47)
	at org.apache.commons.io.output.WriterOutputStreamTest.testUTF16WithSingleByteWrite(WriterOutputStreamTest.java:81)

Testcase: testUTF16WithBufferedWrite took 0 sec
	FAILED
&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; expected:&amp;lt;[&#224; peine arriv&#233;s nous entr&#226;mes dans sa chambre]&amp;gt; but was:&amp;lt;[]&amp;gt;
junit.framework.ComparisonFailure: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; expected:&amp;lt;[&#224; peine arriv&#233;s nous entr&#226;mes dans sa chambre]&amp;gt; but was:&amp;lt;[]&amp;gt;
	at org.apache.commons.io.output.WriterOutputStreamTest.testWithBufferedWrite(WriterOutputStreamTest.java:61)
	at org.apache.commons.io.output.WriterOutputStreamTest.testUTF16WithBufferedWrite(WriterOutputStreamTest.java:85)

Testcase: testUTF16BEWithSingleByteWrite took 0.001 sec
Testcase: testUTF16BEWithBufferedWrite took 0 sec
Testcase: testUTF16LEWithSingleByteWrite took 0.001 sec
Testcase: testUTF16LEWithBufferedWrite took 0.001 sec
Testcase: testFlush took 0.001 sec
Testcase: testWriteImmediately took 0.001 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12929302" author="niallp" created="Sun, 7 Nov 2010 00:32:03 +0000"  >&lt;p&gt;I tried Harmony 6.0M3 but the WriterOutputStream tests all pass&lt;/p&gt;</comment>
                            <comment id="13117039" author="joehni" created="Thu, 29 Sep 2011 06:28:56 +0000"  >&lt;p&gt;Just for the record. The current IBM JDK 6 (1.6.0.9 Linux/x64) has improved, but still fails for UTF-16 only. UTF-16LE and UTF16-BE is handled properly. It might be that UTF-16 defaults here to UTF-16LE although Javadoc specifies UTF-16BE in this case (see Javadoc java.nio.Charset).&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;testUTF16WithSingleByteWrite(org.apache.commons.io.output.WriterOutputStreamTest):
expected:&amp;lt;[&#224; peine arriv&#233;s nous entr&#226;mes dans sa chambre]&amp;gt; but was:&amp;lt;[&#65280;&#57344;&#28672;&#25856;&#26880;&#28160; &#25856;&#8192;&#24832;&#29184;&#29184;&#26880;&#30208;&#59648;&#29440;&#8192;&#28160;&#28416;&#29952;&#29440;&#8192;&#25856;&#28160;&#29696;&#29184;&#57856;&#27904;&#25856;&#29440;&#8192;&#25600;&#24832;&#28160;&#29440;&#8192;&#29440;&#24832;&#8192;&#25344;&#26624;&#24832;&#27904;&#25088;&#29184;]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15980488" author="pascalschumacher" created="Sun, 23 Apr 2017 17:53:14 +0000"  >&lt;p&gt;Should have been fixed by &lt;a href=&quot;https://github.com/apache/commons-io/commit/e23402c1dc133842c1acef0a2d7cd1f386647de7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/commit/e23402c1dc133842c1acef0a2d7cd1f386647de7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3166</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0slt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165010</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>