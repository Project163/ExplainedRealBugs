<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:28:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-697] IOUtils.toByteArray size validation does not match documenation.</title>
                <link>https://issues.apache.org/jira/browse/IO-697</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;According to the javadoc, &quot;throws IOException ... or InputStream size differ from parameter size.&lt;/p&gt;

&lt;p&gt;I read that as the passed in parameter size must exactly match the length of data represented by the InputStream. However, the current implementation will:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Throw an exception if size parameter is larger than the InputStream&lt;/li&gt;
	&lt;li&gt;Work as expected if size parameter matches size of InputStream&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Return a byte array only containing up-to size parameter when InputStream is larger than size parameter. No exception is thrown&lt;/b&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What is the actual intention of the method? What the javadoc says, or what the implementation is currently doing?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Gets the contents of an &amp;lt;code&amp;gt;InputStream&amp;lt;/code&amp;gt; as a &amp;lt;code&amp;gt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;lt;/code&amp;gt;.
 * Use &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; method instead of &amp;lt;code&amp;gt;toByteArray(InputStream)&amp;lt;/code&amp;gt;
 * when &amp;lt;code&amp;gt;InputStream&amp;lt;/code&amp;gt; size is known
 *
 * @param input the &amp;lt;code&amp;gt;InputStream&amp;lt;/code&amp;gt; to read from
 * @param size the size of &amp;lt;code&amp;gt;InputStream&amp;lt;/code&amp;gt;
 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the requested &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException              &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; an I/O error occurs or &amp;lt;code&amp;gt;InputStream&amp;lt;/code&amp;gt; size differ from parameter
 * size
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IllegalArgumentException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; size is less than zero
 * @since 2.1
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] toByteArray(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputStream input, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; size) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13349011">IO-697</key>
            <summary>IOUtils.toByteArray size validation does not match documenation.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="scottyg">scottyg</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jan 2021 22:22:43 +0000</created>
                <updated>Fri, 25 Mar 2022 21:34:24 +0000</updated>
                            <resolved>Fri, 25 Mar 2022 21:34:24 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17262444" author="garydgregory" created="Mon, 11 Jan 2021 07:07:28 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scottyg&quot; class=&quot;user-hover&quot; rel=&quot;scottyg&quot;&gt;scottyg&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;You can often discover intent by looking at the unit tests.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="17511509" author="JIRAUSER286844" created="Wed, 23 Mar 2022 21:55:21 +0000"  >&lt;p&gt;This has been open for a year so hope it&apos;s ok to chip in.&lt;/p&gt;

&lt;p&gt;Looking at the tests, IOUtilsTest#&lt;font color=&quot;#172b4d&quot;&gt;testToByteArray_InputStream_SizeOne calls the method with &lt;tt&gt;size&lt;/tt&gt; = 1 and asserts the byte array has 1 byte. In general if&#160; 0 &amp;lt;&#160; &lt;tt&gt;size&lt;/tt&gt; &amp;lt;= length of the input stream then &lt;tt&gt;size&lt;/tt&gt; bytes are returned.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;So assuming the test reflects the intent, looks like this can be fixed by improving the Javadoc to clearly state that &lt;tt&gt;size&lt;/tt&gt; parameter can lie in range 0 &amp;lt;&#160; &lt;tt&gt;size&lt;/tt&gt; &amp;lt;= length of the input stream, and a byte array of that size will be returned.&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17512029" author="garydgregory" created="Thu, 24 Mar 2022 18:52:34 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scottyg&quot; class=&quot;user-hover&quot; rel=&quot;scottyg&quot;&gt;scottyg&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks for your comment. If you want to improve the Javadoc, the best way to do that is with a PR on GitHub.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0m0y8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>