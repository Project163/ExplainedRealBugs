<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:27:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-684] Add force version of PathUtils.delete() APIs and friends.</title>
                <link>https://issues.apache.org/jira/browse/IO-684</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;With the changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-629&quot; title=&quot;FileUtils#forceDelete should use Files#delete rather than File#delete so exception messages includes reason for failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-629&quot;&gt;&lt;del&gt;IO-629&lt;/del&gt;&lt;/a&gt; I&apos;m getting an &lt;tt&gt;AccessDeniedException&lt;/tt&gt; when trying to recursively delete a directory with read-only files, e.g. a &lt;tt&gt;.git&lt;/tt&gt; repository. Before this change the directory was successfully deleted. It is due to the difference between &lt;tt&gt;File.delete()&lt;/tt&gt; and &lt;tt&gt;Files.delete()&lt;/tt&gt; (see &lt;a href=&quot;https://stackoverflow.com/a/12234217/3375325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/12234217/3375325&lt;/a&gt;).&lt;br/&gt;
I think an option should be introduced to make the previous behavior available again with an overloaded method like &lt;tt&gt;PathUtils.delete(Path path, boolean force)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Stacktrace:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.nio.file.AccessDeniedException: C:\Users\xyz\AppData\Local\Temp\.git\objects\pack\pack-6576964fbde069f1787513ce358d2260530d5738.idx
	at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
	at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:269)
	at sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:108)
	at java.nio.file.Files.deleteIfExists(Files.java:1165)
	at org.apache.commons.io.file.DeletingPathVisitor.visitFile(DeletingPathVisitor.java:99)
	at org.apache.commons.io.file.DeletingPathVisitor.visitFile(DeletingPathVisitor.java:35)
	at java.nio.file.Files.walkFileTree(Files.java:2670)
	at java.nio.file.Files.walkFileTree(Files.java:2742)
	at org.apache.commons.io.file.PathUtils.visitFileTree(PathUtils.java:535)
	at org.apache.commons.io.file.PathUtils.deleteDirectory(PathUtils.java:265)
	at org.apache.commons.io.file.PathUtils.delete(PathUtils.java:254)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13322253">IO-684</key>
            <summary>Add force version of PathUtils.delete() APIs and friends.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jansohn">Robin Jansohn</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Aug 2020 12:30:11 +0000</created>
                <updated>Fri, 23 Apr 2021 21:04:33 +0000</updated>
                            <resolved>Sat, 15 Aug 2020 03:21:47 +0000</resolved>
                                    <version>2.7</version>
                                    <fixVersion>2.8.0</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17178141" author="garydgregory" created="Sat, 15 Aug 2020 03:21:49 +0000"  >&lt;p&gt;I added:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Add PathUtils.delete(Path, DeleteOption...).&lt;/li&gt;
	&lt;li&gt;Add PathUtils.deleteDirectory(Path, DeleteOption...).&lt;/li&gt;
	&lt;li&gt;Add PathUtils.deleteFile(Path, DeleteOption...).&lt;/li&gt;
	&lt;li&gt;Add PathUtils.setReadOnly(Path, boolean, LinkOption...).&lt;/li&gt;
	&lt;li&gt;Add CleaningPathVisitor.CleaningPathVisitor(PathCounters, DeleteOption[], String...).&lt;/li&gt;
	&lt;li&gt;Add DeletingPathVisitor.DeletingPathVisitor(PathCounters, DeleteOption[], String...).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17179404" author="jansohn" created="Tue, 18 Aug 2020 06:46:54 +0000"  >&lt;p&gt;Thanks for adding the options. I&apos;ll test as soon as the new release is available.&lt;/p&gt;

&lt;p&gt;For documentation purposes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
PathUtils.deleteDirectory(path, StandardDeleteOption.OVERRIDE_READ_ONLY);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17179568" author="garydgregory" created="Tue, 18 Aug 2020 12:01:55 +0000"  >&lt;p&gt;You should test the snapshot build. If you wait for a release it will be too late to change the API if we need to break binary compatibility in the new API.&lt;/p&gt;</comment>
                            <comment id="17179579" author="jansohn" created="Tue, 18 Aug 2020 12:37:58 +0000"  >&lt;p&gt;Is there a public snapshots Maven repository? Couldn&apos;t find one after a quick search...&lt;/p&gt;</comment>
                            <comment id="17179581" author="garydgregory" created="Tue, 18 Aug 2020 12:45:17 +0000"  >&lt;p&gt;The Apache Snapshot repository is here:&#160;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17179621" author="jansohn" created="Tue, 18 Aug 2020 13:29:47 +0000"  >&lt;p&gt;I successfully tested it with SNAPSHOT 2.8.0. Thanks again for the quick resolution!&lt;/p&gt;</comment>
                            <comment id="17329900" author="bturner" created="Fri, 23 Apr 2021 00:32:20 +0000"  >&lt;p&gt;One thing the changes here don&apos;t address is the altered behavior of &lt;tt&gt;FileUtils.cleanDirectory&lt;/tt&gt; (and other helpers that use it, like &lt;tt&gt;deleteDirectory&lt;/tt&gt; and &lt;tt&gt;deleteQuietly&lt;/tt&gt;). Because commons-io 2.6 used &lt;tt&gt;File.delete&lt;/tt&gt;, it would delete read-only files by default. However, with &lt;tt&gt;FileUtils.forceDelete&lt;/tt&gt; now updated to call &lt;tt&gt;PathUtils.delete(file.toPath())&lt;/tt&gt; without &lt;tt&gt;StandardDeleteOption.OVERRIDE_READ_ONLY&lt;/tt&gt;, this no longer works. It also doesn&apos;t appear any overloads were added in &lt;tt&gt;FileUtils&lt;/tt&gt; to get the old behavior back again.&lt;/p&gt;

&lt;p&gt;This behavior change is causing a lot of subtle breakages in code that I maintain, as well as code that I use. Should the &lt;tt&gt;FileUtils&lt;/tt&gt; variants perhaps be updated to restore the old behavior by default? Or perhaps some overloads added to callers can easily restore the old behavior if they need to after upgrading?&lt;/p&gt;</comment>
                            <comment id="17331037" author="garydgregory" created="Fri, 23 Apr 2021 21:04:33 +0000"  >&lt;p&gt;May you try git master?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hozk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>