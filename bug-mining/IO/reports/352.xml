<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:28:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-414] IOUtils.writeLines is not correct with a charset with BOM</title>
                <link>https://issues.apache.org/jira/browse/IO-414</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;When a charset has a BOM (like UTF-16), the method IOUtils.writeLines put 2 BOM on each line.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12683335">IO-414</key>
            <summary>IOUtils.writeLines is not correct with a charset with BOM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="florent.brosse">Florent Brosse</reporter>
                        <labels>
                    </labels>
                <created>Sun, 8 Dec 2013 16:36:19 +0000</created>
                <updated>Mon, 9 Oct 2023 16:34:04 +0000</updated>
                            <resolved>Mon, 9 Oct 2023 16:34:04 +0000</resolved>
                                    <version>2.4</version>
                    <version>2.5</version>
                                    <fixVersion>2.15.0</fixVersion>
                                    <component>Streams/Writers</component>
                    <component>Utilities</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13842551" author="florent.brosse" created="Sun, 8 Dec 2013 16:40:24 +0000"  >&lt;p&gt;I suggest that code to correct that bug:&lt;/p&gt;

&lt;p&gt;    public static void writeLines(final Collection&amp;lt;?&amp;gt; lines, String lineEnding, final OutputStream output, final Charset encoding)&lt;br/&gt;
            throws IOException {&lt;br/&gt;
        if (lines == null) &lt;/p&gt;
{
            return;
        }&lt;br/&gt;
        if (lineEnding == null) {
            lineEnding = LINE_SEPARATOR;
        }&lt;br/&gt;
        final Charset cs = Charsets.toCharset(encoding);&lt;br/&gt;
        StringBuilder stringBuilder = new StringBuilder();&lt;br/&gt;
        for (final Object line : lines) {&lt;br/&gt;
            if (line != null) {
            	stringBuilder.append(line.toString());
            }&lt;br/&gt;
            stringBuilder.append(lineEnding);&lt;br/&gt;
        }&lt;br/&gt;
        output.write(stringBuilder.toString().getBytes(cs));&lt;br/&gt;
    }&lt;br/&gt;
&lt;br/&gt;
 public static void writeLines(final Collection&amp;lt;?&amp;gt; lines, String lineEnding,&lt;br/&gt;
            final Writer writer) throws IOException {&lt;br/&gt;
        if (lines == null) {            return;        }
&lt;p&gt;        if (lineEnding == null) &lt;/p&gt;
{
            lineEnding = LINE_SEPARATOR;
        }
&lt;p&gt;        StringBuilder stringBuilder = new StringBuilder();&lt;br/&gt;
        for (final Object line : lines) {&lt;br/&gt;
            if (line != null) &lt;/p&gt;
{
            	stringBuilder.append(line.toString());
            }
&lt;p&gt;            stringBuilder.append(lineEnding);&lt;br/&gt;
        }&lt;br/&gt;
        writer.write(stringBuilder.toString());&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="17728979" author="garydgregory" created="Sat, 3 Jun 2023 13:43:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=florent.brosse&quot; class=&quot;user-hover&quot; rel=&quot;florent.brosse&quot;&gt;florent.brosse&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;We&apos;ll need a PR on GitHub with a failing unit test if the main changes are not applied.&lt;/p&gt;</comment>
                            <comment id="17772542" author="elharo" created="Fri, 6 Oct 2023 11:40:49 +0000"  >&lt;p&gt;This sounds like a blocker to me&lt;/p&gt;</comment>
                            <comment id="17772842" author="garydgregory" created="Sat, 7 Oct 2023 16:26:05 +0000"  >&lt;p&gt;Re-opening, I had to revert the PR due to build failures, at least on Linux.&lt;/p&gt;</comment>
                            <comment id="17772843" author="elharo" created="Sat, 7 Oct 2023 16:33:07 +0000"  >&lt;p&gt;What failed?&lt;/p&gt;</comment>
                            <comment id="17772886" author="sebb@apache.org" created="Sat, 7 Oct 2023 22:18:06 +0000"  >&lt;p&gt;e.g. &lt;a href=&quot;https://github.com/apache/commons-io/actions/runs/6441844619/job/17492833682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/actions/runs/6441844619/job/17492833682&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looks to me like this is a symptom of an EOL issue.&lt;/p&gt;</comment>
                            <comment id="17772970" author="elharo" created="Sun, 8 Oct 2023 11:57:36 +0000"  >&lt;p&gt;Weird. I can see how that might have failed but why didn&apos;t the CI pick that up on my PR?&lt;/p&gt;

&lt;p&gt;There is some platform dependent code in there. Reading through the bugs I&apos;m realizing commons-io has way too much platform dependent code. Some of it is required to manage the vagaries of different file systems, but a lot of it isn&apos;t. In particular very little code should ever use the platform default encoding or platform default line separator. This is at the root of a number of bugs.&lt;/p&gt;

&lt;p&gt;In 2023 the default encoding when none is specified should be UTF-8, and the line separator really doesn&apos;t matter but it shouldn&apos;t vary between platforms.&lt;/p&gt;</comment>
                            <comment id="17772972" author="elharo" created="Sun, 8 Oct 2023 12:21:39 +0000"  >&lt;p&gt;something weird happened here. I see the bug after reverting the revert commits, but it&apos;s not something I wrote or included in my PR. &lt;/p&gt;

&lt;p&gt;The bug is the addition of this line in IOUtils:&lt;/p&gt;

&lt;p&gt;        Charset cs = StandardCharsets.UTF_16.equals(Charsets.toCharset(charset)) ? StandardCharsets.UTF_16 : StandardCharsets.UTF_16BE;&lt;/p&gt;

&lt;p&gt;This converts all charsets to UTF-16.&lt;/p&gt;

&lt;p&gt;Where did that come from? I don&apos;t see it in any PR.&lt;/p&gt;

&lt;p&gt;I think commons-io needs to protect the master branch &amp;amp;&amp;amp; require squash and merge for all commits. That would make this easier to track and most importantly prevent commits from bypassing the CI.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362587</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qi1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>