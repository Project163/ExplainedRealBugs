<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:26:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-276] &quot;FileUtils#deleteDirectoryOnExit(File)&quot; does not work</title>
                <link>https://issues.apache.org/jira/browse/IO-276</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;I called this method, but the target directory was not deleted.&lt;/p&gt;


&lt;p&gt;The source of this method is as follows.&lt;br/&gt;
----------&lt;br/&gt;
    private static void deleteDirectoryOnExit(File directory) throws IOException {&lt;br/&gt;
        if (!directory.exists()) &lt;/p&gt;
{
            return;
        }

&lt;p&gt;        cleanDirectoryOnExit(directory);&lt;br/&gt;
        directory.deleteOnExit();&lt;br/&gt;
    }&lt;br/&gt;
----------&lt;br/&gt;
In other words, this method calls &quot;java.io.File#deleteOnExit&quot; in order of &quot;grandchildren -&amp;gt; children -&amp;gt; parent&quot; for files of the target directory hierarchy.&lt;/p&gt;


&lt;p&gt;There is following mention in javadoc of &quot;java.io.File#deleteOnExit&quot;.&lt;br/&gt;
----------&lt;br/&gt;
Files (or directories) are deleted in the reverse order that they are registered.&lt;br/&gt;
----------&lt;/p&gt;


&lt;p&gt;Therefore, I think the calling order of &quot;java.io.File#deleteOnExit&quot; should be reverse.&lt;/p&gt;


&lt;p&gt;How will be it?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Commons IO 1.4&lt;/p&gt;</environment>
        <key id="12511299">IO-276</key>
            <summary>&quot;FileUtils#deleteDirectoryOnExit(File)&quot; does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nkami">nkami</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2011 01:21:40 +0000</created>
                <updated>Thu, 29 Mar 2012 21:29:44 +0000</updated>
                            <resolved>Thu, 1 Mar 2012 17:18:16 +0000</resolved>
                                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13148867" author="rkuris" created="Fri, 11 Nov 2011 23:59:16 +0000"  >&lt;p&gt;deleteDirectoryOnExit is a private method. However, you probably meant FileUtils#cleanDirectoryOnExit, which indeed does have this problem.&lt;/p&gt;

&lt;p&gt;This is difficult to write a junit test for this.  However, the test code never even calls this method.  I modified the cleanup code to call it; hopefully someone will discover stray files if the cleanDirectoryOnExit method fails.&lt;/p&gt;

&lt;p&gt;Patch attached.&lt;/p&gt;</comment>
                            <comment id="13148876" author="rkuris" created="Sat, 12 Nov 2011 00:06:48 +0000"  >&lt;p&gt;I forgot to mention that my patch also actually should fix the reported bug by removing the parent before removing its children.&lt;/p&gt;</comment>
                            <comment id="13220141" author="sebb@apache.org" created="Thu, 1 Mar 2012 16:36:53 +0000"  >&lt;p&gt;The test code needs to clean up as it goes along; so changing it to delete files on exit will likely cause problems.&lt;/p&gt;</comment>
                            <comment id="13220146" author="sebb@apache.org" created="Thu, 1 Mar 2012 16:39:28 +0000"  >&lt;p&gt;BTW FileUtils#cleanDirectoryOnExit is also a private method&lt;/p&gt;</comment>
                            <comment id="13241803" author="garydgregory" created="Thu, 29 Mar 2012 21:29:44 +0000"  >&lt;p&gt;Version 2.2 has been released and addresses this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12503450" name="IO-276-r1201108-patch.txt" size="1180" author="rkuris" created="Fri, 11 Nov 2011 23:59:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b0rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>