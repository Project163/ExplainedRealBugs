<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:27:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IO-559] FilenameUtils.normalize should verify hostname syntax in UNC path</title>
                <link>https://issues.apache.org/jira/browse/IO-559</link>
                <project id="12310477" key="IO">Commons IO</project>
                    <description>&lt;p&gt;&lt;tt&gt;FilenameUtils.normalize&lt;/tt&gt; will accept broken file names as UNC path even if their hostname part doesn&apos;t match the syntax of a proper hostname. Using certain hostnames like &quot;.&quot; this may lead to strange side effects.&lt;/p&gt;

&lt;p&gt;Most likely the best fix will be to make &lt;tt&gt;getPrefixLength&lt;/tt&gt; verify the hostname part of a suspected UNC path and return a value of &lt;tt&gt;NOT_FOUND&lt;/tt&gt; if it is not a valid hostname - much like it does for triple slashes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13121929">IO-559</key>
            <summary>FilenameUtils.normalize should verify hostname syntax in UNC path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Nov 2017 14:32:24 +0000</created>
                <updated>Fri, 21 Aug 2020 10:14:46 +0000</updated>
                            <resolved>Wed, 30 May 2018 08:09:36 +0000</resolved>
                                    <version>2.6</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Utilities</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16299976" author="githubbot" created="Thu, 21 Dec 2017 12:51:57 +0000"  >&lt;p&gt;GitHub user bodewig opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/52&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-559&quot; title=&quot;FilenameUtils.normalize should verify hostname syntax in UNC path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-559&quot;&gt;&lt;del&gt;IO-559&lt;/del&gt;&lt;/a&gt; verify hostname part of suspected UNC paths in FileNameUtils&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-559&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/IO-559&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m not 100% sure how/if Windows deals with percent encoded hostnames or hostnames using non-ASCII characters. Maybe anybody with deeper Windows knowledge can chime in.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/bodewig/commons-io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bodewig/commons-io&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-559&quot; title=&quot;FilenameUtils.normalize should verify hostname syntax in UNC path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-559&quot;&gt;&lt;del&gt;IO-559&lt;/del&gt;&lt;/a&gt;_validate_hostname_of_unc_paths_in_normalize&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/52.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/52.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #52&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3fd594ceaa84a1bdaf357ace37573b16fd140499&lt;br/&gt;
Author: Stefan Bodewig &amp;lt;stefan.bodewig@...&amp;gt;&lt;br/&gt;
Date:   2017-12-21T12:49:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-559&quot; title=&quot;FilenameUtils.normalize should verify hostname syntax in UNC path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-559&quot;&gt;&lt;del&gt;IO-559&lt;/del&gt;&lt;/a&gt; verify hostname part of suspected UNC paths in FileNameUtils&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16299980" author="bodewig" created="Thu, 21 Dec 2017 12:54:21 +0000"  >&lt;p&gt;The pull request has become bigger than I expected as I needed to add verification of IP numbers as well. I&apos;m not 100% sure about percent encoded hostnames or hostnames containing non-ASCII characters, so would prefer a second pair of eyes.&lt;/p&gt;</comment>
                            <comment id="16465706" author="mdima" created="Mon, 7 May 2018 10:01:52 +0000"  >&lt;p&gt;Hello, is there any feedback on this issue?&lt;br/&gt;
How critical is it considered by Apache community?&lt;/p&gt;</comment>
                            <comment id="16474394" author="gyost123" created="Mon, 14 May 2018 15:55:20 +0000"  >&lt;p&gt;Black Duck security scanning software is now reporting a vulnerability against Commons IO 2.5 because of this.&#160; Like Maria in the prior comment, I&apos;d like to know if there&apos;s any feedback on this issue and how critical the Apache community considers this.&#160; My customers are always uncomfortable seeing Black Duck flagging vulnerabilities in the open source packages that we use, and I&apos;d rather not have to rewrite things to no longer use Commons IO.&lt;/p&gt;</comment>
                            <comment id="16476898" author="bodewig" created="Wed, 16 May 2018 06:15:34 +0000"  >&lt;p&gt;I don&apos;t know why Black Duck considers this a vulnerability, I can only guess it is because of &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-556&quot; title=&quot;Unexpected behavior of FileNameUtils.normalize may lead to limited path traversal vulnerabilies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-556&quot;&gt;&lt;del&gt;IO-556&lt;/del&gt;&lt;/a&gt; which is strongly related to this issue here.&lt;/p&gt;

&lt;p&gt;Back when we discussed &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-556&quot; title=&quot;Unexpected behavior of FileNameUtils.normalize may lead to limited path traversal vulnerabilies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-556&quot;&gt;&lt;del&gt;IO-556&lt;/del&gt;&lt;/a&gt; the POV of the Commons community was that people who create files based in file names provided by untrusted sources are responsible for validating the file they create end up in the location they intend. I.e. they must expect &lt;tt&gt;normalizePath&lt;/tt&gt; to return absolute path or UNC path and need to check the generated path of the file they are going to write themselves.&lt;/p&gt;

&lt;p&gt;That being said I&apos;ll push for peer review of my pull request (this is my first contribution to the IO component) and hope we can get a new release on the way.&lt;/p&gt;</comment>
                            <comment id="16476903" author="bodewig" created="Wed, 16 May 2018 06:21:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyost123&quot; class=&quot;user-hover&quot; rel=&quot;gyost123&quot;&gt;gyost123&lt;/a&gt; &lt;a href=&quot;https://www.openhub.net/p/commons_io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.openhub.net/p/commons_io&lt;/a&gt; says &quot;This Project has No vulnerabilities Reported Against it&quot;&lt;/p&gt;</comment>
                            <comment id="16481974" author="garydgregory" created="Sun, 20 May 2018 15:07:51 +0000"  >&lt;p&gt;I might need some new specs I cannot tell which version BlackDuck is reporting on, or where to see all of the Commons IO versions...&lt;/p&gt;</comment>
                            <comment id="16482826" author="gyost123" created="Mon, 21 May 2018 18:02:43 +0000"  >&lt;p&gt;It is in fact &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-556&quot; title=&quot;Unexpected behavior of FileNameUtils.normalize may lead to limited path traversal vulnerabilies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-556&quot;&gt;&lt;del&gt;IO-556&lt;/del&gt;&lt;/a&gt; that the Black Duck vulnerability report refers to, and &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-556&quot; title=&quot;Unexpected behavior of FileNameUtils.normalize may lead to limited path traversal vulnerabilies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-556&quot;&gt;&lt;del&gt;IO-556&lt;/del&gt;&lt;/a&gt; was marked as a duplicate of this issue.&#160; Black Duck uses various sources for the vulnerabilities that it reports, and this one came from the VulnDB database, which I think is proprietary.&#160; But if you have access to it, the VulnDB issue id is 177199.&#160; I don&apos;t have direct access to VulnDB myself, I am only seeing this indirectly though Black Duck.&#160;Black Duck is associating this VulnDB issue with Commons IO versions 2.2 through 2.6.&lt;/p&gt;

&lt;p&gt;The issue description in Black Duck says that the flaw&#160;allows traversing outside of a restricted path, and that the issue is due to FileNameUtils.normalize not properly sanitizing user input, specifically path traversal style attacks (e.g. &apos;../&apos;).&#160; It goes on to say that with a specially crafted request, a remote attacker can disclose arbitrary files.&lt;/p&gt;

&lt;p&gt;I understand the Commons community&apos;s position regarding validating filenames that originate from untrusted sources.&#160; On the other hand, few developers know how to write abuse-proof code for handling file paths, and so lots of us rely on popular third-party packages and the fact that those packages get analyzed by software such as Black Duck.&#160; So anything that the Commons community does to help harden against security vulnerabilities is a great service to the world, and I appreciate you taking the time to push for peer review of your pull request.&lt;/p&gt;</comment>
                            <comment id="16494854" author="githubbot" created="Wed, 30 May 2018 08:09:17 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-io/pull/52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/pull/52&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16494855" author="bodewig" created="Wed, 30 May 2018 08:09:36 +0000"  >&lt;p&gt;merged PR 52&lt;/p&gt;</comment>
                            <comment id="16501547" author="mdima" created="Tue, 5 Jun 2018 09:53:44 +0000"  >&lt;p&gt;Thank you for the fix!&lt;br/&gt;
Can someone trigger a release build?&lt;/p&gt;</comment>
                            <comment id="16501852" author="garydgregory" created="Tue, 5 Jun 2018 14:17:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdima&quot; class=&quot;user-hover&quot; rel=&quot;mdima&quot;&gt;mdima&lt;/a&gt;: I&#160;am not sure we are ready for a release. For example, &lt;tt&gt;org.apache.commons.io.FileSystem&lt;/tt&gt; needs to be flushed out or delayed to the next release.&lt;/p&gt;

&lt;p&gt;In the meantime, you can use a snapshot build from &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/commons-io/commons-io/2.7-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/commons-io/commons-io/2.7-SNAPSHOT/&lt;/a&gt;&#160;(I just pushed one.)&lt;/p&gt;</comment>
                            <comment id="16506033" author="mdima" created="Fri, 8 Jun 2018 13:39:21 +0000"  >&lt;p&gt;Ok, thanks for the feedback!&lt;/p&gt;</comment>
                            <comment id="16928724" author="prozovski" created="Thu, 12 Sep 2019 16:51:27 +0000"  >&lt;p&gt;COMMONS-IO team, any ETA for 2.7 release?&lt;/p&gt;

&lt;p&gt;Black Duck scan show COMMONS-IO 2.6 as vulnerable due to this issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/IO-559&quot; title=&quot;FilenameUtils.normalize should verify hostname syntax in UNC path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-559&quot;&gt;&lt;del&gt;IO-559&lt;/del&gt;&lt;/a&gt;).&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16930603" author="garydgregory" created="Mon, 16 Sep 2019 14:17:37 +0000"  >&lt;p&gt;I can try to get something one in the next couple of weeks...&lt;/p&gt;</comment>
                            <comment id="16930820" author="prozovski" created="Mon, 16 Sep 2019 19:54:26 +0000"  >&lt;p&gt;Gary - thank you! It would be really great to get COMMONS-IO 2.7 release production version.&#160;&lt;/p&gt;</comment>
                            <comment id="17057966" author="seavan32100" created="Thu, 12 Mar 2020 14:27:38 +0000"  >&lt;p&gt;Project uses normalize() to generated file path based on windows\linux but in VeraCode security can report method used line detected as Directory Traversal T issue as medium flaws.&lt;br/&gt;
Common.io 2.6 API Unexpected behavior with normalize(String s) method is not performing validations on path input. &quot;../ &quot; is allowing but return as Null if the input type is some thing like &quot;../../&quot;. with the below lines of code checks can be remove path DT vulnerabilities issue. Could somebody please give solution.&lt;br/&gt;
Veracode report result Directiry Travesal medium flaws detected need to fix.&lt;/p&gt;

&lt;p&gt;fileName = &quot;../../etc/passwd&quot;;&lt;/p&gt;

&lt;p&gt;fileName = FilenameUtils.normalize(fileName); // still holds the same value (&quot;//../foo&quot;)&lt;/p&gt;

&lt;p&gt;if (fileName != null)&lt;/p&gt;

{ // file creation path eg: drivec\root\06-03-2020\folder\test }

&lt;p&gt;else&lt;/p&gt;

{ throw new CustomerException(&quot;Invalid path creation found&quot;); }</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13119433">IO-556</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13323922">TIKA-3175</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ne1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>