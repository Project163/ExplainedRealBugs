<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:22:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-1968] Encoded forward slashes are not preserved when rewriting URI</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-1968</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;URIs that contain an encoded forward slash (%2F) are no longer preserved when the HTTP client executes. I came across this when upgrading from 4.5.2 to 4.5.7 and my requests that contained an encoded forward slash suddenly started failing. The appears to be due to decoding and re-encoding of the path that takes place in the URIUtils#rewriteURI method. I&apos;ve attached a patch that restores the old behavior but if a URI contains two slashes in a row in addition to an encoded slash the encoded forward slash will be decoded.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13212645">HTTPCLIENT-1968</key>
            <summary>Encoded forward slashes are not preserved when rewriting URI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jaymode">Jay Modi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jan 2019 19:58:11 +0000</created>
                <updated>Sun, 3 Nov 2019 20:26:11 +0000</updated>
                            <resolved>Tue, 19 Feb 2019 08:29:38 +0000</resolved>
                                    <version>4.5.7</version>
                                    <fixVersion>4.5.8</fixVersion>
                    <fixVersion>5.0 Beta4</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>22</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12600">3.5h</timespent>
                                <comments>
                            <comment id="16755878" author="olegk" created="Wed, 30 Jan 2019 09:03:32 +0000"  >&lt;p&gt;Why should escaped slashes be preserved?&#160;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16756061" author="coheigea" created="Wed, 30 Jan 2019 12:52:20 +0000"  >&lt;p&gt;I&apos;m also hitting this issue in the CXF system tests. The scenario is a GET request to this address: &quot;http://localhost:port/bookstore/bookurl/http%3A%2F%2Ftest.com%2Frss%2F123&quot;&lt;/p&gt;

&lt;p&gt;With HTTP client 4.5.6 it produced:&lt;/p&gt;

&lt;p&gt;REQUEST for //localhost:20301/bookstore/bookurl/http%3A%2F%2Ftest.com%2Frss%2F123 on HttpChannelOverHttp@306dc3f4{r=1,c=false,a=IDLE,uri=//localhost:20301/bookstore/bookurl/http%3A%2F%2Ftest.com%2Frss%2F123,age=1}&lt;/p&gt;

&lt;p&gt;However with 4.5.7 it produces:&lt;/p&gt;

&lt;p&gt;REQUEST for //localhost:40501/bookstore/bookurl/http:/test.com/rss/123 on HttpChannelOverHttp@2d4c6e5d{r=1,c=false,a=IDLE,uri=//localhost:40501/bookstore/bookurl/http:/test.com/rss/123,age=1}&lt;/p&gt;

&lt;p&gt;Note that it is mapping %2F%2F to a single forward slash here.&lt;/p&gt;</comment>
                            <comment id="16756066" author="olegk" created="Wed, 30 Jan 2019 13:01:31 +0000"  >&lt;p&gt;This is due to path normalization. Please see &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1960&quot; title=&quot;URIBuilder incorrect handling of multiple leading slashes in path component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1960&quot;&gt;&lt;del&gt;HTTPCLIENT-1960&lt;/del&gt;&lt;/a&gt; for additional details.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16756264" author="jaymode" created="Wed, 30 Jan 2019 16:10:13 +0000"  >&lt;p&gt;I think encoded slashes should be preserved based on &lt;a href=&quot;https://tools.ietf.org/html/rfc3986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC 3986&lt;/a&gt;. The forward slash is a reserved character so &lt;a href=&quot;https://tools.ietf.org/html/rfc3986#section-2.4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;section 2.4&lt;/a&gt; applies from the RFC:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;When a URI is dereferenced, the components and subcomponents significant to the scheme-specific dereferencing process (if any) must be parsed and separated before the percent-encoded octets within those components can be safely decoded, as otherwise the data may be mistaken for component delimiters. The only exception is for percent-encoded octets corresponding to characters in the unreserved set, which can be decoded at any time.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Given this, I think that the httpclient should not change the encoded slash when it is doing path normalization. I&apos;d expect that if I pass a URI to the httpclient that it does not change the URI in a manner that results in a different path.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16756283" author="olegk" created="Wed, 30 Jan 2019 16:27:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jaymode&quot; class=&quot;user-hover&quot; rel=&quot;jaymode&quot;&gt;jaymode&lt;/a&gt; It is irrelevant&#160;what is stated in RFC 3986 given that &lt;tt&gt;java.net.URI&lt;/tt&gt; conforms to&#160;RFC&#160;2396 only. Please see&#160;&lt;del&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1960&quot; title=&quot;URIBuilder incorrect handling of multiple leading slashes in path component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1960&quot;&gt;&lt;del&gt;HTTPCLIENT-1960&lt;/del&gt;&lt;/a&gt;.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16756318" author="olegk" created="Wed, 30 Jan 2019 16:50:45 +0000"  >&lt;p&gt;HttpClient resorts to URI path normalization only when it must rewrite request URI from&#160;absolute to relative form.&#160;If the original request contains relative&#160;URI HttpClient does not&#160;need to make any manipulations with the path.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16756341" author="jaymode" created="Wed, 30 Jan 2019 17:15:06 +0000"  >&lt;p&gt;This information is incorrect and based on an expired document.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;RFC 2396 has very similar text in Section 2.2:&lt;/del&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;del&gt;The purpose of reserved characters is to provide a set of delimiting characters that are distinguishable from other data within a URI. URIs that differ in the replacement of a reserved character with its percent-encoded octet are not equivalent. Percent-encoding a reserved character, or decoding a percent-encoded octet that corresponds to a reserved character, will change how the URI is interpreted by most applications. Thus, characters in the reserved set are protected from normalization and are therefore safe to be used by scheme-specific and producer-specific algorithms for delimiting data subcomponents within a URI.&lt;/del&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;--&#160;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;In section 2.4:&lt;/del&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;del&gt;When a URI is dereferenced, the components and subcomponents significant to the scheme-specific dereferencing process (if any) must be parsed and separated before the percent-encoded octets within those components can be safely decoded, since otherwise the data may be mistaken for component delimiters. The only exception is for percent-encoded octets corresponding to characters in the unreserved set, which can be decoded at any time. For example, the octet corresponding to the tilde (&quot;&lt;sub&gt;&quot;) character is often encoded as &quot;%7E&quot; by older URI processing implementations; the &quot;%7E&quot; can be replaced by &quot;&lt;/sub&gt;&quot; without changing its interpretation.&lt;/del&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have already used the workaround of determining if the URI needs to be relative or absolute in my application, but I don&apos;t think this should be expected for users of httpclient.&lt;/p&gt;</comment>
                            <comment id="16756392" author="olegk" created="Wed, 30 Jan 2019 18:31:12 +0000"  >&lt;p&gt;None of those sections are present in the RFC&#160;2396 published here unless I am missing something.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.ietf.org/rfc/rfc2396.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ietf.org/rfc/rfc2396.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But what the RFC 2396 does say is this&lt;/p&gt;

&lt;p&gt;&lt;blockquote&gt;&lt;p&gt;6. URI Normalization and Equivalence&lt;/p&gt;

&lt;p&gt;   In many cases, different URI strings may actually identify the&lt;br/&gt;
   identical resource. For example, the host names used in URL are&lt;br/&gt;
   actually case insensitive, and the URL &amp;lt;&lt;a href=&quot;http://www.XEROX.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.XEROX.com&lt;/a&gt;&amp;gt; is&lt;br/&gt;
   equivalent to &amp;lt;&lt;a href=&quot;http://www.xerox.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.xerox.com&lt;/a&gt;&amp;gt;. In general, the rules for&lt;br/&gt;
   equivalence and definition of a normal form, if any, are scheme&lt;br/&gt;
   dependent. &lt;/p&gt;&lt;/blockquote&gt;&#160;&lt;/p&gt;

&lt;p&gt;Path normalization is a perfectly reasonable thing to do for HTTP in order disambiguate the resource reference HTTP method applies to. &#160;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16756479" author="jaymode" created="Wed, 30 Jan 2019 19:33:54 +0000"  >&lt;p&gt;My apologies; the document I was looking at was actually not RFC 2396 but an updated and expired draft: &lt;a href=&quot;https://tools.ietf.org/id/draft-fielding-uri-rfc2396bis-07.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/id/draft-fielding-uri-rfc2396bis-07.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://tools.ietf.org/html/rfc2396#section-2.4.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;section 2.4.2&lt;/a&gt; of the actual RFC 2396, the following is stated:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;2.4.2. When to Escape and Unescape&lt;br/&gt;
 A URI is always in an &quot;escaped&quot; form, since escaping or unescaping a completed URI might change its semantics. Normally, the only time escape encodings can safely be made is when the URI is being created from its component parts; each component may have its own set of characters that are reserved, so only the mechanism responsible for generating or interpreting that component can determine whether or not escaping a character will change its semantics. Likewise, a URI must be separated into its components before the escaped characters within those components can be safely decoded.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I understand that path normalization is reasonable, but path normalization should not change the resource referenced which this does. Ultimately this is still from a newer standard, but &lt;a href=&quot;https://tools.ietf.org/html/rfc3986#section-6.2.2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC 3986 Section 6.2.2.2&lt;/a&gt; states:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;6.2.2.2. Percent-Encoding Normalization &lt;br/&gt;
 The percent-encoding mechanism (Section 2.1) is a frequent source of variance among otherwise identical URIs. In addition to the case normalization issue noted above, some URI producers percent-encode octets that do not require percent-encoding, resulting in URIs that are equivalent to their non-encoded counterparts. These URIs should be normalized by decoding any percent-encoded octet that corresponds to an unreserved character, as described in Section 2.3.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The key here is that a reserved character is being decoded, which changes the meaning of the URI. RFC 2396 doesn&apos;t provide these type of normalization standards but I do not see how decoding reserved characters that are encoded and changing the meaning of a URI is the right behavior.&lt;/p&gt;</comment>
                            <comment id="16757091" author="olegk" created="Thu, 31 Jan 2019 10:08:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;I understand that path normalization is reasonable, but path normalization should not change the resource referenced which this does. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Both &lt;tt&gt;&lt;a href=&quot;http://host.com/p1/p2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host.com/p1/p2&lt;/a&gt;&lt;/tt&gt; and &lt;tt&gt;&lt;a href=&quot;http://host.com/p1/%2Fp2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host.com/p1/%2Fp2&lt;/a&gt;&lt;/tt&gt; reference the same resource but the latter contains senseless rubbish.&lt;/p&gt;

&lt;p&gt;Oleg  &lt;/p&gt;</comment>
                            <comment id="16757276" author="reschke" created="Thu, 31 Jan 2019 14:24:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;Both &lt;a href=&quot;http://host.com/p1/p2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host.com/p1/p2&lt;/a&gt; and &lt;a href=&quot;http://host.com/p1/%2Fp2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host.com/p1/%2Fp2&lt;/a&gt; reference the same resource but the latter contains senseless rubbish.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;They have different paths, so I don&apos;t see why they would reference the same resource in general.&lt;/p&gt;</comment>
                            <comment id="16757285" author="olegk" created="Thu, 31 Jan 2019 14:28:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; The paths are identical. One contains superfluous path delimiter encoded for no apparent reason.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16757296" author="reschke" created="Thu, 31 Jan 2019 14:34:26 +0000"  >&lt;p&gt;Nope.&lt;/p&gt;

&lt;p&gt;The first one contains the sequence:&lt;/p&gt;

&lt;p&gt;1. path delimiter &quot;/&quot;&lt;br/&gt;
2. segment &quot;p1&quot;&lt;br/&gt;
3. path delimiter &quot;/&quot;&lt;br/&gt;
4. segment &quot;p2&quot;&lt;/p&gt;

&lt;p&gt;The second contains:&lt;/p&gt;

&lt;p&gt;1. path delimiter &quot;/&quot;&lt;br/&gt;
2. segment &quot;p1&quot;&lt;br/&gt;
3. path delimiter &quot;/&quot;&lt;br/&gt;
4. segment &quot;%2Fp2&quot;, decodable as &quot;/p2&quot;&lt;/p&gt;


&lt;p&gt;The fact that embedding a forward slash into a segment is indeed strange doesn&apos;t make these the same paths.&lt;/p&gt;</comment>
                            <comment id="16757298" author="olegk" created="Thu, 31 Jan 2019 14:37:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Nope. /p1/p2 is the same path as /p1//p2.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16757302" author="reschke" created="Thu, 31 Jan 2019 14:43:01 +0000"  >&lt;p&gt;A path in a URI is not the same thing as a filesystem path. What&apos;s true for a *nix path is not necessary true for a URI.&lt;/p&gt;</comment>
                            <comment id="16757308" author="jaymode" created="Thu, 31 Jan 2019 14:47:52 +0000"  >&lt;p&gt;I&apos;m in agreement with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;. The paths are indeed different. The encoded path should be passed to the web server for decoding, which is why httpd has an &lt;a href=&quot;https://httpd.apache.org/docs/2.4/mod/core.html#allowencodedslashes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;option&lt;/a&gt; for this. The web server can then make the decision on how to handle the request.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A forward slash is a &lt;b&gt;reserved&lt;/b&gt; character and by decoding the reserved character, the meaning of the path changes; so you are referencing a different resource than the one the application is using the client to retrieve. If you want a concrete example of a popular application where this is used, elasticsearch uses encoded slashes within paths for &lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/date-math-index-names.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;date math&lt;/a&gt;. By decoding the slash, the requested resource is entirely different.&lt;/p&gt;</comment>
                            <comment id="16757316" author="olegk" created="Thu, 31 Jan 2019 14:52:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;&#160;We are&#160;not talking about a generic URI here but a normalized&#160;&lt;tt&gt;abs_path&lt;/tt&gt; of HTTP request.&lt;/p&gt;

&lt;p&gt;Oleg &lt;/p&gt;</comment>
                            <comment id="16757320" author="reschke" created="Thu, 31 Jan 2019 14:57:27 +0000"  >&lt;p&gt;Yes. abs_path in an HTTP URIs does not differ at all from abs_path in a URI in general.&lt;/p&gt;</comment>
                            <comment id="16757324" author="olegk" created="Thu, 31 Jan 2019 15:00:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; Unless normalized, of course.&lt;/p&gt;

&lt;p&gt;Oleg&#160;&lt;/p&gt;</comment>
                            <comment id="16757345" author="reschke" created="Thu, 31 Jan 2019 15:15:28 +0000"  >&lt;p&gt;Oleg, if I understand you correctly you say that changing&lt;/p&gt;

&lt;p&gt;&#160; &quot;/p1/%2Fp2&quot;&lt;/p&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;p&gt;&#160; &quot;/p1/p2&quot;&lt;/p&gt;

&lt;p&gt;is some kind of normalization (which? defined where?).&lt;/p&gt;

&lt;p&gt;I continue to disagree.&lt;/p&gt;</comment>
                            <comment id="16757356" author="olegk" created="Thu, 31 Jan 2019 15:24:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; You are very welcome to continue disagreeing.&#160;This does not change the fact that HttpClient needs to &lt;em&gt;parse&lt;/em&gt;, &lt;em&gt;decode&lt;/em&gt; and &lt;em&gt;disambiguate&lt;/em&gt; absolute URIs provided by the user in order to generate an HTTP request with a &lt;em&gt;&lt;b&gt;valid&lt;/b&gt;&lt;/em&gt; &lt;tt&gt;abs_path&lt;/tt&gt; in request URI.&#160;&#160;&lt;/p&gt;

&lt;p&gt;As I have already pointed out if one insists on their privilege to feed garbage to the origin server HttpClient provides numerous ways of accomplishing that.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16757358" author="lmccay" created="Thu, 31 Jan 2019 15:27:38 +0000"  >&lt;p&gt;I am in the process of upgrading Hadoop to 4.5.6 and do not want to introduce this issue.&lt;/p&gt;

&lt;p&gt;Since this seems to be caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1960&quot; title=&quot;URIBuilder incorrect handling of multiple leading slashes in path component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1960&quot;&gt;&lt;del&gt;HTTPCLIENT-1960&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coheigea&quot; class=&quot;user-hover&quot; rel=&quot;coheigea&quot;&gt;coheigea&lt;/a&gt;&apos;s comment suggests it is so - I assume that 4.5.6 is okay still. &lt;/p&gt;

&lt;p&gt;I should also mention that since HttpClient is an extremely critical component in the Knox dispatch code, this issue is concerning to me. I believe that I also saw discussion about a new URI class in email somewhere - maybe another JIRA? Also concerning.&lt;/p&gt;</comment>
                            <comment id="16757369" author="reschke" created="Thu, 31 Jan 2019 15:37:10 +0000"  >&lt;p&gt;Oleg, are you saying that&lt;/p&gt;

&lt;p&gt;&#160;&quot;/p1/%2Fp2&quot;&lt;/p&gt;

&lt;p&gt;is an invalid abs_path?&lt;/p&gt;</comment>
                            <comment id="16757378" author="olegk" created="Thu, 31 Jan 2019 15:40:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; No, but &lt;tt&gt;//p1/p2&lt;/tt&gt;&#160;is.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16757389" author="reschke" created="Thu, 31 Jan 2019 15:50:53 +0000"  >&lt;p&gt;Oleg - yes, it is indeed invalid according to RFC 3986 (but not 7230 which may merit a bug report: &lt;a href=&quot;https://github.com/httpwg/http-core/issues/195&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/httpwg/http-core/issues/195&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;What I don&apos;t understand is why this is argument for breaking something that is indeed valid?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16757398" author="olegk" created="Thu, 31 Jan 2019 15:57:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; Julian, you just spent half a day disagreeing about something&#160;completely unrelated to this issue. HttpClient &lt;em&gt;NEEDS&lt;/em&gt; to&#160;parse, decode and disambiguate the URI in order to be able to rewrite it correctly. As per RFC 2396 URI normalization and equivalence are protocol scheme specific, so all your references to the generic URI syntax here are pointless.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16757407" author="reschke" created="Thu, 31 Jan 2019 16:01:17 +0000"  >&lt;p&gt;HTTP URLs are defined in RFC 7230 (previously RFC 2616). Can you please point out where it defines the normalization you are referring to?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16757443" author="olegk" created="Thu, 31 Jan 2019 16:27:08 +0000"  >&lt;p&gt;As far as I know the HTTP spec does not define rules of URI equivalence, which is not something you can blame on me I suppose.&lt;br/&gt;
Oleg&lt;/p&gt;</comment>
                            <comment id="16757536" author="reschke" created="Thu, 31 Jan 2019 17:26:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://greenbytes.de/tech/webdav/rfc7230.html#uri.comparison&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://greenbytes.de/tech/webdav/rfc7230.html#uri.comparison&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://greenbytes.de/tech/webdav/rfc2616.html#uri.comparison&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://greenbytes.de/tech/webdav/rfc2616.html#uri.comparison&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16757546" author="jaymode" created="Thu, 31 Jan 2019 17:37:58 +0000"  >&lt;p&gt;The key statement in both links regarding equivalence and normalization are:&lt;/p&gt;

&lt;p&gt;RFC 2616:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Characters other than those in the &quot;reserved&quot; and &quot;unsafe&quot; sets (see RFC 2396 &lt;a href=&quot;https://greenbytes.de/tech/webdav/rfc2616.html#RFC2396&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;cite&gt;[42]&lt;/cite&gt;&lt;/a&gt;) are equivalent to their &quot;&quot;%&quot; HEX HEX&quot; encoding.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;RFC 7230:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Characters other than those in the &quot;reserved&quot; set are equivalent to their percent-encoded octets: the normal form is to not encode them (see Sections &lt;a href=&quot;https://tools.ietf.org/html/rfc3986#section-2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.1&lt;/a&gt; and &lt;a href=&quot;https://tools.ietf.org/html/rfc3986#section-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt; of &lt;a href=&quot;https://greenbytes.de/tech/webdav/rfc7230.html#RFC3986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;cite&gt;[RFC3986]&lt;/cite&gt;&lt;/a&gt;).&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16757617" author="olegk" created="Thu, 31 Jan 2019 18:48:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can you please point out where it defines&#160;rules of normalization and any statement pertaining to equivalence of &lt;tt&gt;//p1/p2&lt;/tt&gt; relative URI?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://greenbytes.de/tech/webdav/rfc2616.html#uri.comparison&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://greenbytes.de/tech/webdav/rfc2616.html#uri.comparison&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16757665" author="reschke" created="Thu, 31 Jan 2019 19:41:41 +0000"  >&lt;p&gt;RFC 2616 and RFC 7230 define scheme-specific normalization of HTTP URIs.&lt;/p&gt;

&lt;p&gt;If you start with a relative reference, you&apos;ll have to resolve it against an HTTP base URI to get a full URI (as per &lt;a href=&quot;https://www.greenbytes.de/tech/webdav/rfc3986.html#reference-resolution&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.greenbytes.de/tech/webdav/rfc3986.html#reference-resolution&lt;/a&gt;). The result could then be compared against another HTTP URI.&lt;/p&gt;

&lt;p&gt;Looking at &amp;lt;&lt;a href=&quot;https://www.greenbytes.de/tech/webdav/rfc3986.html#relative-ref&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.greenbytes.de/tech/webdav/rfc3986.html#relative-ref&lt;/a&gt;&amp;gt;, the only way &quot;//p1/p2&quot; can be interpreted is the first alternative:&lt;/p&gt;

&lt;p&gt; relative-part = &quot;//&quot; authority path-abempty&lt;/p&gt;

&lt;p&gt;so it would parse as authority &quot;p1&quot; and path &quot;/p2&quot;.&lt;/p&gt;

&lt;p&gt;What other relative reference do you want to compare it with? (I&apos;m really interested in finding out whether the specs are broken, or there&apos;s a misunderstanding here)&lt;/p&gt;
</comment>
                            <comment id="16758075" author="olegk" created="Fri, 1 Feb 2019 08:13:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; So, we continue going merrily round in circles, round and round. And I keep on repeating the same things over and over:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;It is irrelevant what RFC 3986 states. &lt;tt&gt;java.net.URI&lt;/tt&gt; conforms to the RFC 2396.&lt;/li&gt;
	&lt;li&gt;There is no reference to&#160;RFC&#160;3986 in RFC 2616.&lt;/li&gt;
	&lt;li&gt;HttpClient needs to convert&#160;request URIs to &lt;tt&gt;abs_path&lt;/tt&gt; representation&#160;when the user supplies a request URI in the absolute form. While doing so HttpClient need to deal with fringe cases like &lt;b&gt;&lt;tt&gt;&lt;a href=&quot;https://host.com//p1/p2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://host.com//p1/p2&lt;/a&gt;&lt;/tt&gt;&lt;/b&gt;. It is impossible to handle such paths consistently without normalization.&lt;/li&gt;
	&lt;li&gt;Those fringe cases arise form people&apos;s insistence on being able to embed rubbish in the URI path component. &#160;&lt;br/&gt;
Oleg&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16758142" author="reschke" created="Fri, 1 Feb 2019 09:42:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;It is irrelevant what RFC 3986 states. java.net.URI conforms to the RFC 2396.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It is relevant, because RFC 3986 has obsoleted RFC 2396. Insisting on compliance to an obsoleted spec is not helpful. That said, I don&apos;t think the definitions in 2396 are materially different. (If they are, please point that out).&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There is no reference to RFC 3986 in RFC 2616.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It has a reference to 2396, which has been obsoleted by RFC 3986. The same way RFC 2616 has been obsoleted as well.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;HttpClient needs to convert request URIs to abs_path representation when the user supplies a request URI in the absolute form. While doing so HttpClient need to deal with fringe cases like &lt;a href=&quot;https://host.com//p1/p2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://host.com//p1/p2&lt;/a&gt;. It is impossible to handle such paths consistently without normalization.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;AFAICT, that string is not a valid URI (neither in 2396, nor 3986). It&apos;s unfortunate that URI doesn&apos;t have a strict mode. So this is garbage-in-garbage-out. Upon &lt;tt&gt;getPath()&lt;/tt&gt;, the return value is &quot;//p1/p2&quot;. That is an invalid abs path according to the URI RFCs. So you could throw an exception.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Those fringe cases arise form people&apos;s insistence on being able to embed rubbish in the URI path component.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Well. Optionally doing something with rubbish is one thing (I personally hate it), but breaking &lt;b&gt;valid&lt;/b&gt; URIs at the same time is another thing...&lt;/p&gt;</comment>
                            <comment id="16758154" author="olegk" created="Fri, 1 Feb 2019 09:56:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So, we continue going in circles.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Insisting on compliance to an obsoleted spec is not helpful&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Please point it out to Oracle.&lt;/p&gt;

&lt;p&gt;I&apos;ll close this bug as invalid unless someone can tell me how RFC 2396 or RFC 2616 specify path component normalization in URIs like &lt;tt&gt;&lt;a href=&quot;https://host.com//p1/p2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://host.com//p1/p2&lt;/a&gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16758172" author="reschke" created="Fri, 1 Feb 2019 10:16:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Insisting on compliance to an obsoleted spec is not helpful -&amp;gt; Please point it out to Oracle.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;With all due respect, that&apos;s what you are doing here.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;FC 2396 or RFC 2616 specify path component normalization in URIs like &lt;a href=&quot;https://host.com//p1/p2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://host.com//p1/p2&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;They do not specify normalization of invalid URIs.&lt;/p&gt;</comment>
                            <comment id="16758176" author="clintongormley" created="Fri, 1 Feb 2019 10:20:40 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;RFC 2396 says:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;2:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Within a URI, characters are either used as delimiters, or to represent strings of data (octets) within the delimited portions. Octets are either represented directly by a character (using the US- ASCII character for that octet &lt;span class=&quot;error&quot;&gt;&amp;#91;ASCII&amp;#93;&lt;/span&gt;) or by an escape encoding.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;2.2:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Many URI include components consisting of or delimited by, certain special characters. These characters are called &quot;reserved&quot;, since their usage within the URI component is limited to their reserved purpose. If the data for a URI component would conflict with the reserved purpose, then the conflicting data must be escaped before forming the URI.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;2.4.2:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;A URI is always in an &quot;escaped&quot; form, since escaping or unescaping a completed URI might change its semantics. Normally, the only time escape encodings can safely be made is when the URI is being created from its component parts; each component may have its own set of characters that are reserved, so only the mechanism responsible for generating or interpreting that component can determine whether or not escaping a character will change its semantics. Likewise, a URI must be separated into its components before the escaped characters within those components can be safely decoded.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Treating `/p1/%2Fp2` as equivalent to `/p1//p2` is incorrect.&#160; As explained in 2.4.2, you cannot unescape the path without first breaking it into its components (by splitting on `/`).&#160; Then you need to re-escape before reassembling the path (concat&apos;ing with `/`).&lt;/p&gt;

&lt;p&gt;Imagine you had a path like this: `/page/{id}`, and that you had a page whose id was `/foo`, you have to escape the `/` before forming the path, so you would end up with `/page/%2Ffoo`.&#160; The way you&apos;re doing&#160;normalisation changes the meaning of the original path, and so is disallowed by 2.4.2.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16758183" author="clintongormley" created="Fri, 1 Feb 2019 10:25:46 +0000"  >&lt;p&gt;If you have a path like `/foo//bar2F`and you wanted to normalise that, you would:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;split on `/` which would result in&#160;`[ &quot;foo&quot;, &quot;&quot;, &quot;bar%2F&quot;,&#160;]`&lt;/li&gt;
	&lt;li&gt;normalise the string, eg remove the empty string, resulting in&#160;`[ &quot;foo&quot;, &quot;bar%2F&quot;]`&lt;/li&gt;
	&lt;li&gt;join with `/` and prepend `/`, resulting in `&quot;/foo/bar%2F&quot;`&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16758190" author="olegk" created="Fri, 1 Feb 2019 10:32:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clintongormley&quot; class=&quot;user-hover&quot; rel=&quot;clintongormley&quot;&gt;clintongormley&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This the first sensible analysis of the issue.The trouble here is not how&#160;&lt;b&gt;&lt;em&gt;I&lt;/em&gt;&lt;/b&gt; do normalization is how &lt;b&gt;&lt;em&gt;JRE&lt;/em&gt;&lt;/b&gt; does parsing of URIs.&lt;/p&gt;

&lt;p&gt;Oleg&#160;&lt;/p&gt;</comment>
                            <comment id="16758237" author="michael-o" created="Fri, 1 Feb 2019 11:42:06 +0000"  >&lt;p&gt;Not being an expert at all in this area, one should completely neglect Java&apos;s faulty &lt;tt&gt;URI&lt;/tt&gt; implementation and solely roll our own with RFC 3986 and RFC 7230 plus friends.&lt;/p&gt;</comment>
                            <comment id="16758241" author="reschke" created="Fri, 1 Feb 2019 11:58:02 +0000"  >&lt;p&gt;java.net.URI should be ok, as long you stick to the simple parts (for instance, getting the raw path).&lt;/p&gt;
</comment>
                            <comment id="16758246" author="michael-o" created="Fri, 1 Feb 2019 12:13:08 +0000"  >&lt;p&gt;Solely the fact that &lt;tt&gt;toString()&lt;/tt&gt; returns an invalid URL as soon as you have non-ASCII chars part of the path makes it simple unusable.&lt;/p&gt;</comment>
                            <comment id="16758258" author="clintongormley" created="Fri, 1 Feb 2019 12:33:08 +0000"  >&lt;p&gt;I think the issue is explained in this comment: &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1960?focusedCommentId=16740468&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16740468&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HTTPCLIENT-1960?focusedCommentId=16740468&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16740468&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;An extra %2F cannot be added manually because&#160;&lt;tt&gt;setPath(&quot;/%2Fetc/motd&quot;)&lt;/tt&gt;&#160;results in&#160;&lt;tt&gt;&quot;/%252Fetc/motd&quot;&lt;/tt&gt;&#160;because the path will be (correctly) URI-encoded.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The comment after that provides the solution:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There should be a function added to set an &quot;escaped&quot; path instead of only &quot;unescaped&quot; paths&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You should NEVER set unescaped paths as a single string - only as path segments, which are then concat&apos;ed with `/`.&#160; It is impossible to accurately decode and encode paths that consist of more than one path&#160;segment where a path segment includes a /.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For instance, imagine your path segments are `&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;foo&amp;quot;, &amp;quot;bar/baz&amp;quot;&amp;#93;&lt;/span&gt;`.&#160; To convert this to a path, you would encode each segment, then concat with `/`, to give you `foo/bar%2Fbaz`.&#160; That string you could then use to set an encoded path parameter.&#160; But joining with / before encoding would result in `foo/bar/baz` which is completely different.&#160; There is no way you can encode that correctly.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So the only way to accept an unencoded path&#160;is as an array of segments.&lt;/p&gt;</comment>
                            <comment id="16758261" author="olegk" created="Fri, 1 Feb 2019 12:36:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;So the only way to accept an unencoded path is as an array of segments&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Absolutely correct. Or not sticking garbage into URIs in the first place.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16758290" author="clintongormley" created="Fri, 1 Feb 2019 13:22:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;Absolutely correct. Or not sticking garbage into URIs in the first place.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is not garbage.&#160; It is perfectly legal. What the library shouldn&apos;t do is try to fix user mistakes. And it should not provide a means to set an unencoded path, which it does currently. Providing that method is making a promise to the user that the library is unable to fulfill.&lt;/p&gt;</comment>
                            <comment id="16758301" author="garydgregory" created="Fri, 1 Feb 2019 13:37:56 +0000"  >&lt;p&gt;Hi All.&lt;/p&gt;

&lt;p&gt;I am thinking about moving forward here and how to help Here is a possible path forward:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;State a specific use case with a unit test&lt;/li&gt;
	&lt;li&gt;Propose a patch &lt;em&gt;which does not break binary compatibility&lt;/em&gt;&lt;/li&gt;
	&lt;li&gt;Ideally these are new APIs like &lt;tt&gt;setThisKindOfPath&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;It might be possible to workaround this with documentation. Is it?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Then we can move away from changing the behavior of the current API to adding APIs you can use and discuss if your patch fits in here.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="16758335" author="olegk" created="Fri, 1 Feb 2019 14:13:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; We have three options here. We&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;do not normalize URI path at all and upset some people by generating completely wrong request URIs in some cases (see cases discussed above)&lt;/li&gt;
	&lt;li&gt;normalize URI path by eliminating rubbish and upset people who want to stick rubbish into URI path element.&lt;/li&gt;
	&lt;li&gt;work around the fact that &lt;tt&gt;java.net.URI&lt;/tt&gt; represents the path element as a single decoded string rather than an array of path segments.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Oleg   &lt;/p&gt;</comment>
                            <comment id="16760274" author="jaymode" created="Mon, 4 Feb 2019 22:39:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;State a specific use case with a unit test&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The patch that I&apos;ve attached has a unit test for ensuring that rewriteUri does not lose encoded slashes. Ideally is should be that any reserved character that is encoded within a URI should not be lost during a rewrite.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;It might be possible to workaround this with documentation. Is it?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Currently there is a workaround, but it involves an application specifically crafting the URI the right way so that it doesn&apos;t go through the rewriteUri method that does normalization. I personally feel like documenting that is leaking too much of the internal workings/implementation details to the client.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;work around the fact that &lt;tt&gt;java.net.URI&lt;/tt&gt; represents the path element as a single decoded string rather than an array of path segments.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think path normalization and preservation of reserved characters is still possible using by using java.net.URI#getRawPath, which preserves the original encoding. The path can then be split based on non encoded forward slashes and normalized. The path can then be reconstructed with the escaped reserved characters being encoded. I&apos;m happy to work on this with tests and all if this is acceptable.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Ultimately taking an array of path parts would probably be an ideal enhancement for UriBuilder.&lt;/p&gt;</comment>
                            <comment id="16765916" author="cstamas" created="Tue, 12 Feb 2019 10:43:29 +0000"  >&lt;p&gt;Would be good if the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1960&quot; title=&quot;URIBuilder incorrect handling of multiple leading slashes in path component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1960&quot;&gt;&lt;del&gt;HTTPCLIENT-1960&lt;/del&gt;&lt;/a&gt; becomes somehow controlled (ie. from HttpContext?). Currently, we cannot upgrade our http client (used in proxy for Azure Docker registry) due to their &quot;known issue&quot;: they emit redirect responses with paths having double slashes, and worse, they &lt;b&gt;expect those to be there&lt;/b&gt; (as otherwise they claim requested resource is not there).&lt;/p&gt;

&lt;p&gt;With pre 4.5.7 HttpClient this worked fine for us with having custom &lt;tt&gt;RedirectStrategy&lt;/tt&gt; in place (it simply did not normalize). But since 4.5.7 (or better since&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1960&quot; title=&quot;URIBuilder incorrect handling of multiple leading slashes in path component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1960&quot;&gt;&lt;del&gt;HTTPCLIENT-1960&lt;/del&gt;&lt;/a&gt; change), where URIUtil is changed, the &quot;ironing out&quot; of double slashes happens across all the client and custom redirect strategy does not work either.&lt;/p&gt;

&lt;p&gt;See&lt;br/&gt;
 &lt;a href=&quot;https://github.com/docker/distribution/issues/1247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/docker/distribution/issues/1247&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16766147" author="olegk" created="Tue, 12 Feb 2019 15:29:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cstamas&quot; class=&quot;user-hover&quot; rel=&quot;cstamas&quot;&gt;cstamas&lt;/a&gt; If you put together a patch against 4.5 that makes request URI or request path rewriting optional depending on &lt;tt&gt;RequestConfig&lt;/tt&gt; I will review and integrate it.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16767065" author="kullfar" created="Wed, 13 Feb 2019 11:18:31 +0000"  >&lt;p&gt;I&apos;m in.&lt;br/&gt;
 I have troubles upgrading to 4.5.7&lt;/p&gt;

&lt;p&gt;I have http resource &lt;a href=&quot;http://host/parent/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host/parent/&lt;/a&gt;&amp;lt;pid&amp;gt;/child/&amp;lt;cid&amp;gt;&lt;/p&gt;

&lt;p&gt;pid is optional&lt;/p&gt;

&lt;p&gt;so request to &lt;a href=&quot;http://host/parent//child/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host/parent//child/&lt;/a&gt;&amp;lt;cid&amp;gt; is legal&lt;/p&gt;

&lt;p&gt; but 4.5.7 converts it to&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://host/parent/child/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host/parent/child/&lt;/a&gt;&amp;lt;cid&amp;gt;&lt;/p&gt;

&lt;p&gt;which is completably another resource&lt;/p&gt;</comment>
                            <comment id="16767100" author="olegk" created="Wed, 13 Feb 2019 12:10:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;which is completably another resource&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, it is not. You are just trying to push silliness from the server onto the client side.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16767107" author="kullfar" created="Wed, 13 Feb 2019 12:20:11 +0000"  >&lt;p&gt;I just want to make exactly what I want - execute HTTP request to the url &lt;a href=&quot;http://host/parent//child/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host/parent//child/&lt;/a&gt;&amp;lt;cid&amp;gt;&lt;br/&gt;
I can&apos;t do it with 4.5.7. I have no chances. The only way (except fixing this bug) is to switch HTTP client or to stick with 4.5.6 forever.&lt;/p&gt;</comment>
                            <comment id="16767109" author="kullfar" created="Wed, 13 Feb 2019 12:22:44 +0000"  >&lt;p&gt;It&apos;s not always possible to change the silliness on the server side.&lt;br/&gt;
Another case - tests. I need to write test on java to check how the server is processing such requests. No chance again.&lt;/p&gt;</comment>
                            <comment id="16767110" author="olegk" created="Wed, 13 Feb 2019 12:22:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can&apos;t do it with 4.5.7. I have no chances&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Wrong. &lt;/p&gt;

&lt;p&gt;And the idea of fixing the parser of the server side has not crossed your mind at all?&lt;/p&gt;

&lt;p&gt;Oleg  &lt;/p&gt;</comment>
                            <comment id="16767112" author="kullfar" created="Wed, 13 Feb 2019 12:27:00 +0000"  >&lt;p&gt;your rudeness is the stopper for a productive dialog, bye&lt;/p&gt;</comment>
                            <comment id="16770058" author="cstamas" created="Sat, 16 Feb 2019 09:24:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kullfar&quot; class=&quot;user-hover&quot; rel=&quot;kullfar&quot;&gt;kullfar&lt;/a&gt; There is ongoing work to resolve this issue, I am pretty much in same shoe as you (server, that is out of my scope, pushes strange things to our client, to say at least. Hence cant move to latest 4.5.7 of httpclient to get latest bugfixes):&#160;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/pull/136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/pull/136&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16770081" author="jira-bot" created="Sat, 16 Feb 2019 10:55:34 +0000"  >&lt;p&gt;Commit 4093a3015d6b789888077e317e535df4c8102e5d in httpcomponents-client&apos;s branch refs/heads/4.5.x from Tamas Cservenak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4093a30&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4093a30&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Make normalization of URI paths optional&lt;/p&gt;

&lt;p&gt;Make it driven by RequestConfig.&lt;/p&gt;</comment>
                            <comment id="16770082" author="jira-bot" created="Sat, 16 Feb 2019 10:55:35 +0000"  >&lt;p&gt;Commit ae9ea601956101185b5ab5cc42e4c0a5fc931ee9 in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=ae9ea60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=ae9ea60&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #136 from cstamas/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16770083" author="jira-bot" created="Sat, 16 Feb 2019 10:55:37 +0000"  >&lt;p&gt;Commit ae9ea601956101185b5ab5cc42e4c0a5fc931ee9 in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=ae9ea60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=ae9ea60&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #136 from cstamas/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16770367" author="niels.oertel" created="Sun, 17 Feb 2019 11:28:46 +0000"  >&lt;p&gt;The conversation here is only about slashes. However any encoding breaks (in&#160;our&#160;case encoded colons).&lt;/p&gt;

&lt;p&gt;The&#160;example in the first&#160;comment from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coheigea&quot; class=&quot;user-hover&quot; rel=&quot;coheigea&quot;&gt;coheigea&lt;/a&gt; also shows this.&lt;/p&gt;</comment>
                            <comment id="16771439" author="mattnelson" created="Tue, 19 Feb 2019 00:01:29 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The conversation here is only about slashes. However any encoding breaks (in our case encoded colons).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Adding another use case where encoded commas in the path are treated differently based on the build flow. Construction vs fluent builder.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void uribuilder() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; URISyntaxException {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; rawURI = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost/service/before1%2Cafter1,before2%2Cafter2?qp1=1&amp;amp;qp2=2&quot;&lt;/span&gt;;
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;raw uri&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(rawURI);

    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URI uri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URIBuilder(rawURI).build();
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;builder from URI&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(uri);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URI fluentURI =
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URIBuilder()
            .setHost(uri.getHost())
            .setPath(uri.getPath())
            .setCustomQuery(uri.getQuery())
            .setScheme(uri.getScheme())
            .build();
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;fluent builder using setQuery&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(fluentURI);

    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URIBuilder urib =
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URIBuilder()
            .setHost(uri.getHost())
            .setPath(uri.getPath())
            .setCustomQuery(uri.getQuery())
            .setScheme(uri.getScheme());
    Arrays.asList(uri.getQuery().split(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;&quot;&lt;/span&gt;)).stream()
        .forEach(
            q -&amp;gt; {
              &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] value = q.split(&lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt;);
              urib.setParameter(value[0], value[1]);
            });

    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;fluent builder using setParameter&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(urib.build());
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;raw uri
http://localhost/service/before1%2Cafter1,before2%2Cafter2?qp1=1&amp;amp;qp2=2
builder from URI
http://localhost/service/before1%2Cafter1,before2%2Cafter2?qp1=1&amp;amp;qp2=2
fluent builder using setQuery
http://localhost/service/before1,after1,before2,after2?qp1=1&amp;amp;qp2=2
fluent builder using setParameter
http://localhost/service/before1,after1,before2,after2?qp1=1&amp;amp;qp2=2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="16771697" author="jira-bot" created="Tue, 19 Feb 2019 08:27:11 +0000"  >&lt;p&gt;Commit 5f37506e7a2223d216eb3f13beb0dc77e7d027ff in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=5f37506&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=5f37506&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: added utility methods to parse and format URI path segments (ported from HttpCore master)&lt;/p&gt;</comment>
                            <comment id="16771698" author="jira-bot" created="Tue, 19 Feb 2019 08:27:12 +0000"  >&lt;p&gt;Commit 4a976e104ea11436340b8794605391eea7edf78f in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4a976e1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4a976e1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: URIBuilder to split path component into path segments when digesting a URI (ported from HttpCore master)&lt;/p&gt;</comment>
                            <comment id="16771699" author="jira-bot" created="Tue, 19 Feb 2019 08:27:14 +0000"  >&lt;p&gt;Commit 2004eef66851796291403daeb864f9c0c88529a4 in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=2004eef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=2004eef&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Preserve escaped PATHSAFE characters when normalizing URI path segments&lt;/p&gt;</comment>
                            <comment id="16771700" author="jira-bot" created="Tue, 19 Feb 2019 08:27:15 +0000"  >&lt;p&gt;Commit c7985395635cbc7bd630abb4204534536cbdf8ce in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=c798539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=c798539&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Fixed broken API compatibility with 4.4&lt;/p&gt;</comment>
                            <comment id="16771701" author="jira-bot" created="Tue, 19 Feb 2019 08:27:16 +0000"  >&lt;p&gt;Commit 0fe3106dff8fa94c7ebe6697d8f2cf35b94bd541 in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=0fe3106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=0fe3106&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Fixed incorrect @since annotations&lt;/p&gt;</comment>
                            <comment id="16771702" author="jira-bot" created="Tue, 19 Feb 2019 08:27:18 +0000"  >&lt;p&gt;Commit acd8fcd95fcc9cb04fbddd23022e40b7eba4c2f9 in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=acd8fcd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=acd8fcd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #137 from ok2c/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;URIBuilder and URIUtils improvements &lt;/p&gt;</comment>
                            <comment id="16771790" author="coheigea" created="Tue, 19 Feb 2019 10:09:08 +0000"  >&lt;p&gt;The example I gave above for forward slashes now works, thanks for the fix. I still have some failing tests relating to an encoded exclamation mark though.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If I specify &quot;booksubresource/123/chapters/sub/1/matched%21uris?decode=true&quot; as the URL, it preserved &quot;%21&quot; under the old behaviour, but is now changing it to &quot;!&quot; causing the test to fail.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16771802" author="olegk" created="Tue, 19 Feb 2019 10:37:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coheigea&quot; class=&quot;user-hover&quot; rel=&quot;coheigea&quot;&gt;coheigea&lt;/a&gt; Per RFC 2396 section 2.3 exclamation mark is an unreserved character that requires no encoding.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16771813" author="coheigea" created="Tue, 19 Feb 2019 10:51:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; OK understood thanks, I&apos;ll modify the test.&lt;/p&gt;</comment>
                            <comment id="16773252" author="akhaku" created="Wed, 20 Feb 2019 18:16:03 +0000"  >&lt;p&gt;Appreciate the fix, FWIW&#160;the original&#160;normalization change (&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1960&quot; title=&quot;URIBuilder incorrect handling of multiple leading slashes in path component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1960&quot;&gt;&lt;del&gt;HTTPCLIENT-1960&lt;/del&gt;&lt;/a&gt;) causes issues with the AWS java SDK (because of how S3 object keys become url paths), created &lt;a href=&quot;https://github.com/aws/aws-sdk-java/issues/1919&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aws/aws-sdk-java/issues/1919&lt;/a&gt;&#160;there.&lt;/p&gt;</comment>
                            <comment id="16788228" author="grussell" created="Fri, 8 Mar 2019 19:28:40 +0000"  >&lt;p&gt;When do you expect to release 4.5.8? Spring Boot upgraded to 4.5.7 and they, reasonably, don&apos;t want to drop back to 4.5.6 because there are a number of important fixes in 4.5.7.&lt;/p&gt;

&lt;p&gt;The RabbitMQ &lt;a href=&quot;https://pulse.mozilla.org/api/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;REST API &lt;/a&gt;&#160;extensively uses &lt;tt&gt;%2F&lt;/tt&gt;&#160;in URLs because it is the default virtual host.&lt;/p&gt;

&lt;p&gt;e.g. /api/exchanges/&amp;lt;vhost&amp;gt;/&amp;lt;name&amp;gt; gets the exchange info for &lt;em&gt;name&lt;/em&gt; in &lt;em&gt;vhost&lt;/em&gt; so &lt;tt&gt;/api/exchanges/%2F/foo&lt;/tt&gt; is broken.&lt;/p&gt;

&lt;p&gt;So, Spring Boot users wishing to use the RabbitMQ rest API have to override the version back to 4.5.6 (and lose all the goodness in 4.5.7).&lt;/p&gt;

&lt;p&gt;Boot&apos;s next scheduled release is March 29, so before then would be excellent!&#160;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="16788621" author="olegk" created="Sat, 9 Mar 2019 10:41:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=grussell&quot; class=&quot;user-hover&quot; rel=&quot;grussell&quot;&gt;grussell&lt;/a&gt; Late March or early April should be doable.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16789373" author="snicoll" created="Mon, 11 Mar 2019 10:17:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;, thanks for the reply. For the record we have a triple-pack maintenance release scheduled for&#160;March&#160;29th. If you could manage to release before that, it would be very much appreciated. Thanks!&lt;/p&gt;</comment>
                            <comment id="16807622" author="jira-bot" created="Tue, 2 Apr 2019 10:17:21 +0000"  >&lt;p&gt;Commit acd8fcd95fcc9cb04fbddd23022e40b7eba4c2f9 in httpcomponents-client&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1976&quot; title=&quot;Unsafe deserialization in DefaultHttpCacheEntrySerializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1976&quot;&gt;&lt;del&gt;HTTPCLIENT-1976&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=acd8fcd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=acd8fcd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #137 from ok2c/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;URIBuilder and URIUtils improvements &lt;/p&gt;</comment>
                            <comment id="16813865" author="varunnvs92" created="Tue, 9 Apr 2019 22:27:22 +0000"  >&lt;p&gt;Can someone confirm if the following&#160;is correct?&lt;/p&gt;

&lt;p&gt;To keep&#160;my application&#160;behavior (regarding uri normalization) same as 4.5.6, I need to set &lt;b&gt;&lt;font color=&quot;#333333&quot;&gt;setNormalizeUri&lt;/font&gt;&lt;/b&gt;&#160;in &lt;b&gt;RequestConfig&lt;/b&gt; to &lt;b&gt;false&lt;/b&gt;&#160;in &lt;b&gt;v4.5.8&lt;/b&gt;. This keeps the behavior same for&#160;special characters like &quot;/&quot;, &quot;+&quot;. Any other special characters that are still affected? Thanks.&lt;/p&gt;</comment>
                            <comment id="16815848" author="mattnelson" created="Thu, 11 Apr 2019 23:24:54 +0000"  >&lt;p&gt;Attempting to validate this change for my use case. The copy method on RequestConfig was not updated for normalizeUri. I built a local snapshot with that additional change and was able to verify.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/pull/136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/pull/136&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/httpcomponents-client/blob/4.5.8/httpclient/src/main/java/org/apache/http/client/config/RequestConfig.java#L384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/blob/4.5.8/httpclient/src/main/java/org/apache/http/client/config/RequestConfig.java#L384&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16819278" author="mattnelson" created="Tue, 16 Apr 2019 17:04:42 +0000"  >&lt;p&gt;Logged issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1984&quot; title=&quot;Add normalize URI to RequestConfig copy constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1984&quot;&gt;&lt;del&gt;HTTPCLIENT-1984&lt;/del&gt;&lt;/a&gt; and issued pr &lt;a href=&quot;https://github.com/apache/httpcomponents-client/pull/144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/pull/144&lt;/a&gt; to address the copy constructor.&lt;/p&gt;</comment>
                            <comment id="16841113" author="clauw" created="Thu, 16 May 2019 08:35:50 +0000"  >&lt;p&gt;In our project when upgrading from Spring Boot 2.1.3.RELEASE to 2.1.4.RELEASE (using http-client 4.5.8) our URL building no longer works as expected:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
URIBuilder builder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URIBuilder();
URI returnUrl = builder.setPath(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost:1234/path1/path2&quot;&lt;/span&gt;).addParameter(&lt;span class=&quot;code-quote&quot;&gt;&quot;param1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;param1&quot;&lt;/span&gt;).addParameter(&lt;span class=&quot;code-quote&quot;&gt;&quot;param2&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;param2&quot;&lt;/span&gt;)
&lt;/span&gt; .addParameter(&lt;span class=&quot;code-quote&quot;&gt;&quot;param3, &quot;&lt;/span&gt;param3&lt;span class=&quot;code-quote&quot;&gt;&quot;).addParameter(&quot;&lt;/span&gt;param4&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;param4&quot;).build();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In version 4.5.7 this returned: &lt;a href=&quot;https://localhost:1234/path1/path2?param1=param2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://localhost:1234/path1/path2?param1=param&lt;/a&gt;1 etc&lt;/p&gt;

&lt;p&gt;In version 4.5.8 it now returns: &lt;b&gt;/&lt;/b&gt;&lt;a href=&quot;https://localhost:1234/path1/path2?param1=param1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://localhost:1234/path1/path2?param1=param1&lt;/a&gt;&#160;etc which is obviously not a correct URL.&lt;/p&gt;

&lt;p&gt;Should I change something in the way I build this URI or use another object?&lt;/p&gt;</comment>
                            <comment id="16869622" author="jira-bot" created="Fri, 21 Jun 2019 15:54:12 +0000"  >&lt;p&gt;Commit b3b526cef5b959e7f21f1c7805af434c9d38b55b in httpcomponents-client&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=b3b526c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=b3b526c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Preserve escaped PATHSAFE characters when normalizing URI path segments (backport from 4.5.x)&lt;/p&gt;</comment>
                            <comment id="16870135" author="jira-bot" created="Sat, 22 Jun 2019 08:27:20 +0000"  >&lt;p&gt;Commit 8603a61b555a4b7e92d04e11cd0a825aaf7d2f0d in httpcomponents-client&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=8603a61&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=8603a61&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Preserve escaped PATHSAFE characters when normalizing URI path segments&lt;/p&gt;</comment>
                            <comment id="16884664" author="jira-bot" created="Sun, 14 Jul 2019 12:30:16 +0000"  >&lt;p&gt;Commit 8603a61b555a4b7e92d04e11cd0a825aaf7d2f0d in httpcomponents-client&apos;s branch refs/heads/JDK-8212885 from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=8603a61&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=8603a61&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Preserve escaped PATHSAFE characters when normalizing URI path segments&lt;/p&gt;</comment>
                            <comment id="16884681" author="jira-bot" created="Sun, 14 Jul 2019 13:52:33 +0000"  >&lt;p&gt;Commit 8603a61b555a4b7e92d04e11cd0a825aaf7d2f0d in httpcomponents-client&apos;s branch refs/heads/httpcore-5.0b8-upgrade from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=8603a61&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=8603a61&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1968&quot; title=&quot;Encoded forward slashes are not preserved when rewriting URI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1968&quot;&gt;&lt;del&gt;HTTPCLIENT-1968&lt;/del&gt;&lt;/a&gt;: Preserve escaped PATHSAFE characters when normalizing URI path segments&lt;/p&gt;</comment>
                            <comment id="16909988" author="kriskra" created="Sun, 18 Aug 2019 15:05:14 +0000"  >&lt;p&gt;I have opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2011&quot; title=&quot;Encoded plus sign (%2B) is not preserved when URI contains an encoded forward slash (%2F)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2011&quot;&gt;&lt;del&gt;HTTPCLIENT-2011&lt;/del&gt;&lt;/a&gt;, which I expect is another side-effect of the URI normalization attempt.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13223928">HTTPCLIENT-1975</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13227800">HTTPCLIENT-1983</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13213107">KNOX-1755</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13212002">CXF-7955</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13208963">HTTPCLIENT-1960</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13228384">HTTPCLIENT-1984</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13226182">KNOX-1842</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12956782" name="rewrite_preserve_forward_slash.diff" size="2844" author="jaymode" created="Tue, 29 Jan 2019 19:57:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0gc8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>