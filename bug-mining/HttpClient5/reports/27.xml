<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:21:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-1906] HttpClient rejects valid certificates with subjectAltNames</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-1906</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;A certificate containing only an email address (declared as rfc822Name) in subjectAltName gets rejected. This change was introduced with&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1802&quot; title=&quot;RFC violations in hostname checking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1802&quot;&gt;&lt;del&gt;HTTPCLIENT-1802&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;HttpClient should fall back onto CN for hostname verification instead of rejecting the certificate as invalid.&lt;/p&gt;

&lt;p&gt;Example certificate which gets rejected:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-----BEGIN CERTIFICATE-----
MIIDpTCCAo2gAwIBAgIJANqkMEtlkelbMA0GCSqGSIb3DQEBCwUAMHAxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJWQTERMA8GA1UEBwwIU29tZUNpdHkxEjAQBgNVBAoM
CU15Q29tcGFueTETMBEGA1UECwwKTXlEaXZpc2lvbjEYMBYGA1UEAwwPd3d3LmNv
bXBhbnkuY29tMB4XDTE4MDIxNTA3MjkzMFoXDTIwMDIxNTA3MjkzMFowcDELMAkG
A1UEBhMCVVMxCzAJBgNVBAgMAlZBMREwDwYDVQQHDAhTb21lQ2l0eTESMBAGA1UE
CgwJTXlDb21wYW55MRMwEQYDVQQLDApNeURpdmlzaW9uMRgwFgYDVQQDDA93d3cu
Y29tcGFueS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC4v6Oq
Ua0goRVn1cmT7MOpJhXFm3A70bTpvJIRpEjtGIz99hb34/9r5AYyf1VhKyWmBq24
XNcOJ59XOlyjjbm2Tl811ufTOdcNbPadoVBmMt4039OSUFpVb4wAw2XPWLTCG2h1
HNj9GuFHmwcDsg5EiIRrhDGQm2LLLAGoe5PdReoMZCeeWzNWvKTCV14pyRzwQhJL
F1OmzLYzovbPfB8LZVhQgDbLsh034FScivf2oKDB+NEzAEagNpnrFR0MFLWGYsu1
nWD5RiZi78HFGiibmhH7QrEPfGlo2eofuUga6naoBUROqkmMCIL8n1HZ/Ur0oGny
vQCj1AyrfOhuVC53AgMBAAGjQjBAMAsGA1UdDwQEAwIEMDATBgNVHSUEDDAKBggr
BgEFBQcDATAcBgNVHREEFTATgRFlbWFpbEBleGFtcGxlLmNvbTANBgkqhkiG9w0B
AQsFAAOCAQEAZ0IsqRrsEmJ6Fa9Yo6PQtrKJrejN2TTDddVgyLQdokzWh/25JFad
NCMYPH5KjTUyKf96hJDlDayjbKk1PMMhSZMU5OG9NOuGMH/dQttruG1ojse7KIKg
yHDQrfq5Exxgfa7CMHRKAoTCY7JZhSLyVbTMVhmGfuUDad/RA86ZisXycp0ZmS97
qDkAmzFL0sL0ZUWNNUh4ZUWvCUZwiuN08z70NjGqXMTDCf68p3SYxbII0xTfScgf
aQ/A/hD7IbGGTexeoTwpEj01DNvefbQV6//neo32/R5XD0D5jn3TCgZcMThA6H3a
VkEghVg+s7uMfL/UEebOBQWXQJ/uVoknMA==
-----END CERTIFICATE-----&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A unit test demonstrating&#160;the issue: &lt;a href=&quot;https://github.com/asigner/httpcomponents-client/commit/e2e5c422ad201fc4a4df07e05ffda522ed626008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/asigner/httpcomponents-client/commit/e2e5c422ad201fc4a4df07e05ffda522ed626008&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hc-httpclient-users/201802.mbox/%3cCAG5G_q+fh1p54gOO=_kLN09+9RizCfXGpmfEvUE3iQ3rp8ifxg@mail.gmail.com%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/hc-httpclient-users/201802.mbox/%3cCAG5G_q+fh1p54gOO=_kLN09+9RizCfXGpmfEvUE3iQ3rp8ifxg@mail.gmail.com%3e&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13140323">HTTPCLIENT-1906</key>
            <summary>HttpClient rejects valid certificates with subjectAltNames</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sia">Andy Signer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Feb 2018 21:26:40 +0000</created>
                <updated>Mon, 18 May 2020 13:47:54 +0000</updated>
                            <resolved>Mon, 26 Feb 2018 14:18:21 +0000</resolved>
                                    <version>4.5.3</version>
                    <version>5.0 Alpha2</version>
                                    <fixVersion>4.5.6</fixVersion>
                    <fixVersion>5.0 Beta2</fixVersion>
                                    <component>HttpClient (classic)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16373510" author="michael-o" created="Thu, 22 Feb 2018 21:44:22 +0000"  >&lt;p&gt;As far as I understand &lt;a href=&quot;https://tools.ietf.org/html/rfc2818#section-3.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt;, the hostname must be checked against &lt;tt&gt;dNSName&lt;/tt&gt; from SAN. Same for IP address. Ignoring the SAN type looks wrong to me, especially with RFC 822 names.&lt;/p&gt;

&lt;p&gt;The implementation of &lt;a href=&quot;https://github.com/apache/httpcomponents-client/blob/master/httpclient5/src/main/java/org/apache/hc/client5/http/ssl/DefaultHostnameVerifier.java#L104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;verify()&lt;/a&gt; is incomplete.&lt;/p&gt;</comment>
                            <comment id="16376913" author="jira-bot" created="Mon, 26 Feb 2018 14:09:10 +0000"  >&lt;p&gt;Commit 8d24ee07e63c7d217af882b675b5afce002c2a36 in httpcomponents-client&apos;s branch refs/heads/4.6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-client.git;h=8d24ee0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-client.git;h=8d24ee0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1906&quot; title=&quot;HttpClient rejects valid certificates with subjectAltNames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1906&quot;&gt;&lt;del&gt;HTTPCLIENT-1906&lt;/del&gt;&lt;/a&gt;: certificates containing alternative subject names other than DNS and IP (such as RFC822) get rejected as invalid&lt;/p&gt;</comment>
                            <comment id="16376915" author="jira-bot" created="Mon, 26 Feb 2018 14:10:17 +0000"  >&lt;p&gt;Commit b1e09f37ae6e11bbca12b2296f29e603c1a9d22b in httpcomponents-client&apos;s branch refs/heads/4.5.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-client.git;h=b1e09f3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-client.git;h=b1e09f3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1906&quot; title=&quot;HttpClient rejects valid certificates with subjectAltNames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1906&quot;&gt;&lt;del&gt;HTTPCLIENT-1906&lt;/del&gt;&lt;/a&gt;: certificates containing alternative subject names other than DNS and IP (such as RFC822) get rejected as invalid&lt;/p&gt;</comment>
                            <comment id="16376922" author="jira-bot" created="Mon, 26 Feb 2018 14:16:09 +0000"  >&lt;p&gt;Commit 56cc24525e5ba2a5ef8fa0de2385687e83589a71 in httpcomponents-client&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-client.git;h=56cc245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-client.git;h=56cc245&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1906&quot; title=&quot;HttpClient rejects valid certificates with subjectAltNames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1906&quot;&gt;&lt;del&gt;HTTPCLIENT-1906&lt;/del&gt;&lt;/a&gt;: certificates containing alternative subject names other than DNS and IP (such as RFC822) get rejected as invalid&lt;/p&gt;</comment>
                            <comment id="16376925" author="olegk" created="Mon, 26 Feb 2018 14:18:21 +0000"  >&lt;p&gt;Fixed in 4.5.x, 4.6.x and master.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16378488" author="sia" created="Tue, 27 Feb 2018 12:21:22 +0000"  >&lt;p&gt;Thanks for the fast fix - it looks good to me. I just noticed that&#160;the test certificate will run out&#160;February 14, 2020 and break the test in two years.&lt;/p&gt;

&lt;p&gt;We could use the following certificate which runs out next century (January 20, 2155)&#160;-&#160;hat should be enough.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-----BEGIN CERTIFICATE-----
MIIDpzCCAo+gAwIBAgIJANFuYUZGM2HHMA0GCSqGSIb3DQEBCwUAMHAxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJWQTERMA8GA1UEBwwIU29tZUNpdHkxEjAQBgNVBAoM
CU15Q29tcGFueTETMBEGA1UECwwKTXlEaXZpc2lvbjEYMBYGA1UEAwwPd3d3LmNv
bXBhbnkuY29tMCAXDTE4MDIyNzEyMTUwMVoYDzIxNTUwMTIwMTIxNTAxWjBwMQsw
CQYDVQQGEwJVUzELMAkGA1UECAwCVkExETAPBgNVBAcMCFNvbWVDaXR5MRIwEAYD
VQQKDAlNeUNvbXBhbnkxEzARBgNVBAsMCk15RGl2aXNpb24xGDAWBgNVBAMMD3d3
dy5jb21wYW55LmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAL/X
vKKnLZHe8E5D8NpN9U3LyQdCl7FAnjzMBhwR2QR2h4hBX3NdXkstGIT1EHmyBj5a
eZkqL1Sp9e+/BPVF+xT/ZxzSR+IXcOyj0Cf+zI89SKl1AuxVjCy5fGaRMkktNrvV
MNlkyEesQ9US2jMzGM+Isl4n+lxB13Oow9f9Mwt+Sfr4rSHYm6fsr5QQ0wIw7pRY
bw7Ca2Pp9vY7azPFB82lpvKCObL7L95UtMa1qaKlh7j8xQ+dqDMEw5eCSJur2FNt
aU9pxLUKjcf3imKJ451PHxhk3HIfKU+GXvFoMU9Pqo5y78hw69JGZrPTCJwXu3hg
hPI1qhtr8fnMReHhGt0CAwEAAaNCMEAwCwYDVR0PBAQDAgQwMBMGA1UdJQQMMAoG
CCsGAQUFBwMBMBwGA1UdEQQVMBOBEWVtYWlsQGV4YW1wbGUuY29tMA0GCSqGSIb3
DQEBCwUAA4IBAQB/TP3v3H6xdCB7g8pC1Gljd9B6gXsFT6SeOCKwU78+7tGm7vTD
WNlNP1tmSB+RXUZnR4I0c6Y2k0rAOCL1ZjPAUrBh7liApk6xo1UuQXb09aPNsyzv
tr61ACrsqq4vCiiUPzZtXtYqFSVoXnrmuPIqm2Rm7/4l0PB2odG2fAuymFtxu65J
nmZvaq6G+82WhrwOfTsFuEFYE+DulvUtXBiWDPczgZ73jGmhGJD2IVMwbcm6xSgY
dACrdycW6uo4QilrJMC+tQyKqoEXOHahzMSL1ERq1k8sZD+Jo2Q5PCw80CCRoeiv
xZqRH27H8sMWdi89sqsPOB3Re29bQTlr+Jh8
-----END CERTIFICATE-----&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16378567" author="olegk" created="Tue, 27 Feb 2018 13:25:58 +0000"  >&lt;p&gt;Hi Andy&lt;br/&gt;
I can be mistaken but I think&#160;certificate validity is enforced by trust managers, not by the hostname verifier, which we do not employ in these unit tests. I imagine we must have a lot of dead certificates in out test suite already. I would not bother (until February 14, 2020, anyway).   &#160;&lt;br/&gt;
Good catch, anyhow.&lt;/p&gt;

&lt;p&gt;Oleg&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16378592" author="sia" created="Tue, 27 Feb 2018 13:37:44 +0000"  >&lt;p&gt;You are completely right. There is no certificate expiration time validation in the hostname verifier.&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13305675">ZOOKEEPER-3832</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13149521">MNG-6388</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qhr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>