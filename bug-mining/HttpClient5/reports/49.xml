<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:22:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-2051] RedirectExec always changes HTTP method on 301, 302, 303</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-2051</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;While working on &lt;a href=&quot;https://issues.apache.org/jira/browse/WAGON-570&quot; title=&quot;Use RedirectStrategy from HttpClient rather than a custom approach&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WAGON-570&quot;&gt;&lt;del&gt;WAGON-570&lt;/del&gt;&lt;/a&gt; I noticed that &lt;tt&gt;RedirectExec&lt;/tt&gt; still sticks to the old scheme to change request method from &lt;tt&gt;X&lt;/tt&gt; to &lt;tt&gt;GET&lt;/tt&gt;. &lt;br/&gt;
I may understand this for 303, but not for the rest. RFC 7231 says:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Note: For historical reasons, a user agent MAY change the request method from POST to GET for the subsequent request.  If this behavior is undesired, the 307 (Temporary Redirect) status code can be used instead.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I would assume that the default behavior would &lt;b&gt;not&lt;/b&gt; change the HTTP method. I&apos;d expect this to be configurable on client or request basis.&lt;/p&gt;

&lt;p&gt;Am I misinterpreting the RFC?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13285613">HTTPCLIENT-2051</key>
            <summary>RedirectExec always changes HTTP method on 301, 302, 303</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michael-o">Michael Osipov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Feb 2020 12:30:12 +0000</created>
                <updated>Sat, 8 Oct 2022 08:02:17 +0000</updated>
                            <resolved>Mon, 17 Feb 2020 14:03:06 +0000</resolved>
                                    <version>5.0 Beta7</version>
                                    <fixVersion>5.0</fixVersion>
                                    <component>HttpClient (classic)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="14400">4h</timespent>
                                <comments>
                            <comment id="17038336" author="olegk" created="Mon, 17 Feb 2020 13:07:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;michael-o&lt;/a&gt; There is also this passage.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Over 10 years later, most user agents still do method
rewriting for 301 and 302; therefore, this specification makes
that behavior conformant when the original request is POST.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Would it be OK with you if HttpClient still changed POST to GET for 301, 302 and 303. Other unsafe methods would be redirected as is.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/pull/212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/pull/212&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg &lt;/p&gt;</comment>
                            <comment id="17038370" author="michael-o" created="Mon, 17 Feb 2020 13:53:12 +0000"  >&lt;p&gt;I am aware of that passage, I am convinced that back then there were only browsers. The world has changed. Which still maybe true for browsers, but not for other clients. The PR is in compliance with the RFC 7231 for me. It would be still nice to be able to disable this behavior for &lt;tt&gt;POST&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17038374" author="jira-bot" created="Mon, 17 Feb 2020 13:56:43 +0000"  >&lt;p&gt;Commit 53e172553df2dbb1029c36f9e6df1c54a8f02157 in httpcomponents-client&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=53e1725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=53e1725&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2051&quot; title=&quot;RedirectExec always changes HTTP method on 301, 302, 303&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2051&quot;&gt;&lt;del&gt;HTTPCLIENT-2051&lt;/del&gt;&lt;/a&gt;: Change POST to GET for 301, 302 and 303 redirects. Other unsafe methods to be redirected as is.&lt;/p&gt;</comment>
                            <comment id="17038380" author="olegk" created="Mon, 17 Feb 2020 14:03:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;michael-o&lt;/a&gt;&#160;I cant help feeling automatic POST redirects would cause more harm than do good.&#160;Would it be all right with you to revisit the issue in 5.1 if see demand for this option?&#160;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17038387" author="michael-o" created="Mon, 17 Feb 2020 14:13:22 +0000"  >&lt;p&gt;Yes, fully acceptable. I don&apos;t expect this to be on by default.&lt;/p&gt;</comment>
                            <comment id="17090685" author="jira-bot" created="Thu, 23 Apr 2020 15:15:22 +0000"  >&lt;p&gt;Commit 7e2ea15f70fc5b47c8725a38d2916259ae21ac75 in httpcomponents-client&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2051&quot; title=&quot;RedirectExec always changes HTTP method on 301, 302, 303&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2051&quot;&gt;&lt;del&gt;HTTPCLIENT-2051&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=7e2ea15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=7e2ea15&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2051&quot; title=&quot;RedirectExec always changes HTTP method on 301, 302, 303&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2051&quot;&gt;&lt;del&gt;HTTPCLIENT-2051&lt;/del&gt;&lt;/a&gt;: corrected handling of 303 redirects&lt;/p&gt;</comment>
                            <comment id="17091443" author="jira-bot" created="Fri, 24 Apr 2020 10:19:26 +0000"  >&lt;p&gt;Commit e26d5376587a6c9873bd8d45a18b3d4d4ac10052 in httpcomponents-client&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=e26d537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=e26d537&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2051&quot; title=&quot;RedirectExec always changes HTTP method on 301, 302, 303&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2051&quot;&gt;&lt;del&gt;HTTPCLIENT-2051&lt;/del&gt;&lt;/a&gt;: corrected handling of 303 redirects&lt;/p&gt;</comment>
                            <comment id="17612696" author="jcompanger@gmail.com" created="Tue, 4 Oct 2022 17:12:31 +0000"  >&lt;p&gt;because of this commit i think (not sure how that isSave() previously really worked)&lt;/p&gt;

&lt;p&gt;if i do a POST which results in a redirect the code doesn&apos;t get into here:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/blob/master/httpclient5/src/main/java/org/apache/hc/client5/http/impl/async/AsyncRedirectExec.java#L153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;httpcomponents-client/AsyncRedirectExec.java at master &#183; apache/httpcomponents-client (github.com)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;but it gets into the if() part..&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;which means the headers are not copied over, but we need the headers that are set to be copied over (basic authentication but also other specific headers like a specific Jenkins header)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So is the only way to not do the auto direct but handles it fully myself?&lt;/p&gt;</comment>
                            <comment id="17614407" author="michael-o" created="Sat, 8 Oct 2022 08:02:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcompanger%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;jcompanger@gmail.com&quot;&gt;jcompanger@gmail.com&lt;/a&gt;, please file an issue with a decent description of the issue you are suffering from. Refer to this one if it causes the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bjsg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>