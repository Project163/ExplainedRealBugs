<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:23:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-2367] InternalAbstractHttpAsyncClient.java NPE when determineHost returns null</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-2367</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;Starting in the 5.4.3 release of HttpClient, in the org/apache/hc/client5/http/impl/async/InternalAbstractHttpAsyncClient.java file, it is possible to get a Null Pointer Exception thrown by this section of code:&lt;br/&gt;
&#160;&lt;br/&gt;
final HttpHost resolvedTarget = target != null ? target : RoutingSupport.determineHost(request);&lt;br/&gt;
if (request.getScheme() == null)&lt;/p&gt;

{ request.setScheme(resolvedTarget.getSchemeName()); }

&lt;p&gt;&#160;&lt;br/&gt;
The issue is that the RoutingSupport.determineHost can return null, then this line&lt;br/&gt;
request.setScheme(resolvedTarget.getSchemeName());&lt;br/&gt;
will attempt to dereference resolvedTarget, which is null.&#160;&lt;/p&gt;

&lt;p&gt;An example that can cause this is a BasicHttpRequest with a path and requestUri of /foo/bar and a null scheme. Note the lack of a host name in the path/requestUri.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13616826">HTTPCLIENT-2367</key>
            <summary>InternalAbstractHttpAsyncClient.java NPE when determineHost returns null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Jason Mathison">Jason Mathison</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Apr 2025 14:53:00 +0000</created>
                <updated>Mon, 26 May 2025 08:22:14 +0000</updated>
                            <resolved>Fri, 2 May 2025 13:53:03 +0000</resolved>
                                    <version>5.4.3</version>
                    <version>5.4.4</version>
                                    <fixVersion>5.5</fixVersion>
                                    <component>HttpClient (async)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17948915" author="jira-bot" created="Fri, 2 May 2025 13:52:46 +0000"  >&lt;p&gt;Commit 048ff8a73b57ff4236250343555f8a3625c34852 in httpcomponents-client&apos;s branch refs/heads/master from Arturo Bernal&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=048ff8a73&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=048ff8a73&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2367&quot; title=&quot;InternalAbstractHttpAsyncClient.java NPE when determineHost returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2367&quot;&gt;&lt;del&gt;HTTPCLIENT-2367&lt;/del&gt;&lt;/a&gt; - Fix NPE in InternalAbstractHttpAsyncClient by adding null check for resolvedTarget. (#634)&lt;/p&gt;
</comment>
                            <comment id="17948916" author="abernal" created="Fri, 2 May 2025 13:53:04 +0000"  >&lt;p&gt;In master.&lt;/p&gt;</comment>
                            <comment id="17948917" author="jason mathison" created="Fri, 2 May 2025 14:04:09 +0000"  >&lt;p&gt;Thank you for the quick turnaround on this fix!&lt;/p&gt;

&lt;p&gt;I was curious about the final behavior / unit test that you added, testDoExecuteThrowsWhenNoTargetOrHost.&#160; I would expect an IllegalArgumentException to be thrown with a useful description of the problem if the request was invalid.&#160; Is that not the style that you prefer for this library, or is there a reason why NPE is better in this situation?&lt;/p&gt;</comment>
                            <comment id="17948918" author="jira-bot" created="Fri, 2 May 2025 14:06:03 +0000"  >&lt;p&gt;Commit f5f9ae8b024c164351210d3cc8fb96858f6b859f in httpcomponents-client&apos;s branch refs/heads/master from Arturo Bernal&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=f5f9ae8b0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=f5f9ae8b0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2367&quot; title=&quot;InternalAbstractHttpAsyncClient.java NPE when determineHost returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2367&quot;&gt;&lt;del&gt;HTTPCLIENT-2367&lt;/del&gt;&lt;/a&gt; - Fix NPE in InternalAbstractHttpAsyncClient by adding null check for resolvedTarget. (#634)&lt;/p&gt;</comment>
                            <comment id="17948919" author="abernal" created="Fri, 2 May 2025 14:07:56 +0000"  >&lt;p&gt;We&#8217;re using &lt;tt&gt;Args.notNull&lt;/tt&gt; here because the Apache HC codebase consistently throws NPEs for null arguments (it&#8217;s how &lt;tt&gt;Args&lt;/tt&gt; is designed), not IllegalArgumentException.&#160;&lt;/p&gt;</comment>
                            <comment id="17948920" author="jira-bot" created="Fri, 2 May 2025 14:08:14 +0000"  >&lt;p&gt;Commit beb2c3fbbb900bcb81137ce08e43a0fb5993acf8 in httpcomponents-client&apos;s branch refs/heads/5.4.x from Arturo Bernal&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=beb2c3fbb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=beb2c3fbb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2367&quot; title=&quot;InternalAbstractHttpAsyncClient.java NPE when determineHost returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2367&quot;&gt;&lt;del&gt;HTTPCLIENT-2367&lt;/del&gt;&lt;/a&gt; - Fix NPE in InternalAbstractHttpAsyncClient by adding null check for resolvedTarget. (#634)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1vmq0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>