<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:21:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-1800] Why is Retry around Redirect and not the other way round</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-1800</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;I am wondering, why the ServiceUnavailableRetryExec is before the RedirectExec in the execChain of the the InternalHttpClient. I am referring to the HttpClientBuilder.build() method where the execChain is put together something like this:&lt;/p&gt;

&lt;p&gt;Client -&amp;gt; ... -&amp;gt; ServiceUnavailableRetryExec -&amp;gt; RedirectExec -&amp;gt; ...&lt;/p&gt;

&lt;p&gt;We have the following scenario, where this causes an unexpected behavior and changing the order would solve this:&lt;/p&gt;

&lt;p&gt;1. We are sending a request to endpoint A which returns a 303 with the endpoint B in the location-header&lt;br/&gt;
2. The RedirectExec redirects the request to B what returns a 503&lt;br/&gt;
3. Now the ServiceUnavailableRetryExec is doing its thing but retries to endpoint A&lt;/p&gt;

&lt;p&gt;I would expect the behavior of the client to retry to endpoint B instead of A. Is there a reason why the chain is implemented this way around or is this a &quot;bug&quot;.&lt;/p&gt;

&lt;p&gt;Any help very appreciated!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13032026">HTTPCLIENT-1800</key>
            <summary>Why is Retry around Redirect and not the other way round</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nstaeger">Nicolai St&#228;ger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Jan 2017 17:30:03 +0000</created>
                <updated>Tue, 10 Jan 2017 09:17:08 +0000</updated>
                            <resolved>Sat, 7 Jan 2017 11:40:46 +0000</resolved>
                                    <version>4.5.2</version>
                                    <fixVersion>4.5.3</fixVersion>
                    <fixVersion>5.0 Alpha2</fixVersion>
                                    <component>HttpClient (classic)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15800765" author="olegk" created="Thu, 5 Jan 2017 08:39:10 +0000"  >&lt;p&gt;This indeed looks like a bug.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="15801725" author="githubbot" created="Thu, 5 Jan 2017 16:01:00 +0000"  >&lt;p&gt;GitHub user nstaeger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/httpclient/pull/62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpclient/pull/62&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1800&quot; title=&quot;Why is Retry around Redirect and not the other way round&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1800&quot;&gt;&lt;del&gt;HTTPCLIENT-1800&lt;/del&gt;&lt;/a&gt;: wrap redirect around retry in execChain&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1800&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HTTPCLIENT-1800&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/nstaeger/httpclient&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nstaeger/httpclient&lt;/a&gt; issue-&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1800&quot; title=&quot;Why is Retry around Redirect and not the other way round&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1800&quot;&gt;&lt;del&gt;HTTPCLIENT-1800&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/httpclient/pull/62.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpclient/pull/62.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #62&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e8e513db86a6f3c68a22a1328504f62dd85a6108&lt;br/&gt;
Author: nstaeger &amp;lt;mail@nstaeger.de&amp;gt;&lt;br/&gt;
Date:   2017-01-05T15:57:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1800&quot; title=&quot;Why is Retry around Redirect and not the other way round&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1800&quot;&gt;&lt;del&gt;HTTPCLIENT-1800&lt;/del&gt;&lt;/a&gt;: wrap redirect around retry in execChain&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15807350" author="githubbot" created="Sat, 7 Jan 2017 11:39:53 +0000"  >&lt;p&gt;Github user ok2c commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/httpclient/pull/62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpclient/pull/62&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Committed to SVN trunk and 4.5.x branch. Please review and close.&lt;/p&gt;</comment>
                            <comment id="15814431" author="githubbot" created="Tue, 10 Jan 2017 09:17:07 +0000"  >&lt;p&gt;Github user nstaeger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/httpclient/pull/62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpclient/pull/62&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;</comment>
                            <comment id="15814432" author="githubbot" created="Tue, 10 Jan 2017 09:17:08 +0000"  >&lt;p&gt;Github user nstaeger closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/httpclient/pull/62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpclient/pull/62&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i389jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>