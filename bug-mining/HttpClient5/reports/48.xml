<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:22:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-2047] Regression in default HTTP Client construction for non-public hostnames</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-2047</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;I believe that the result of:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/commit/b184b244ad9342a384ba87f48c6b48805a3b0f1f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/commit/b184b244ad9342a384ba87f48c6b48805a3b0f1f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/commit/e0416f07c344929699a2bc303eb3a049c62bd979&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/commit/e0416f07c344929699a2bc303eb3a049c62bd979&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Caused a regression which prevents non-public hostnames from validating, resulting in errors like (I have redacted hostnames as possible):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

Certificate &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &amp;lt;hostname-workspace-1.ops.domain.local&amp;gt; doesn&apos;t match any of the subject alternative names: [user-id-60662, hostname-workspace-1.ops.domain.local, 127.0.0.1, 10.2.243.75]

 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because the default value of &lt;tt&gt;ICANN&lt;/tt&gt; is now supplied to the &lt;tt&gt;PublicSuffixMatcher&lt;/tt&gt;, which causes it to &lt;b&gt;only&lt;/b&gt; accept publicly accessible hostnames now (or so it seems).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13280878">HTTPCLIENT-2047</key>
            <summary>Regression in default HTTP Client construction for non-public hostnames</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mglazer">Mike</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Wed, 22 Jan 2020 01:23:30 +0000</created>
                <updated>Wed, 11 Mar 2020 09:13:12 +0000</updated>
                            <resolved>Wed, 29 Jan 2020 08:48:52 +0000</resolved>
                                    <version>4.5.11</version>
                                    <fixVersion>4.5.12</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>HttpClient (classic)</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17020921" author="michael-o" created="Wed, 22 Jan 2020 09:37:26 +0000"  >&lt;p&gt;The domain name is illegal. &lt;tt&gt;.local&lt;/tt&gt; are explicitly reserved for mDNS. I have written this several times also in other JIRA tickets for other Apache projects.&lt;/p&gt;</comment>
                            <comment id="17021155" author="mglazer" created="Wed, 22 Jan 2020 15:02:40 +0000"  >&lt;p&gt;Just to point out the problem here, this is code which worked perfectly fine on a private network in Apache HTTP Client 4.5.10:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CloseableHttpClient client = HttpClients.custom().setSSLContext(aValidSSLContext).build();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the modification I had to make for this to work in HTTP Client 4.5.11:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CloseableHttpClient client = HttpClients.custom().setSSLHostnameVerifier(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultHostnameVerifier()).setSSLContext(aValidSSLContext).build();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems wrong that on a minor patch release that I would have to modify code which has worked for years. This workaround works because the HTTP Client Builder will default to creating a DefaultHostnameVerifier with the default implementation of the PublicSuffixMatcher if you don&apos;t supply a HostnameVerifier.&lt;/p&gt;
</comment>
                            <comment id="17021323" author="olegk" created="Wed, 22 Jan 2020 17:54:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mglazer&quot; class=&quot;user-hover&quot; rel=&quot;mglazer&quot;&gt;mglazer&lt;/a&gt;&#160;You do have a legitimate reason to be upset as we have indeed been abusing the stable 4.5.x release series by including new small features and making behavioral changes in patch releases. This should stop once 5.0 GA has been released.&lt;/p&gt;

&lt;p&gt;I will look into this issue tomorrow.&lt;/p&gt;

&lt;p&gt;Oleg&#160;&lt;/p&gt;</comment>
                            <comment id="17023038" author="mglazer" created="Fri, 24 Jan 2020 15:46:53 +0000"  >&lt;p&gt;Thank you for looking at this!&lt;/p&gt;</comment>
                            <comment id="17023588" author="olegk" created="Sat, 25 Jan 2020 15:14:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mglazer&quot; class=&quot;user-hover&quot; rel=&quot;mglazer&quot;&gt;mglazer&lt;/a&gt;&#160;Please review / test PR #203.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/pull/203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/pull/203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17025688" author="jira-bot" created="Wed, 29 Jan 2020 08:36:30 +0000"  >&lt;p&gt;Commit 736c00da6dfe4c91210d80d06cf7b28f857c035b in httpcomponents-client&apos;s branch refs/heads/4.5.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=736c00d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=736c00d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2047&quot; title=&quot;Regression in default HTTP Client construction for non-public hostnames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2047&quot;&gt;&lt;del&gt;HTTPCLIENT-2047&lt;/del&gt;&lt;/a&gt;: fixed regression in DefaultHostnameVerifier causing rejection of certs with non-standard domains.&lt;/p&gt;

&lt;p&gt;This reverts commit e0416f07&lt;/p&gt;</comment>
                            <comment id="17025697" author="jira-bot" created="Wed, 29 Jan 2020 08:47:24 +0000"  >&lt;p&gt;Commit 4401991d93e1c4979cf8931e343323f97c335608 in httpcomponents-client&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4401991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4401991&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2047&quot; title=&quot;Regression in default HTTP Client construction for non-public hostnames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2047&quot;&gt;&lt;del&gt;HTTPCLIENT-2047&lt;/del&gt;&lt;/a&gt;: fixed regression in DefaultHostnameVerifier causing rejection of certs with non-standard domains.&lt;/p&gt;

&lt;p&gt;This reverts commit 87cc64fc&lt;/p&gt;</comment>
                            <comment id="17037519" author="jira-bot" created="Sat, 15 Feb 2020 13:50:22 +0000"  >&lt;p&gt;Commit 4401991d93e1c4979cf8931e343323f97c335608 in httpcomponents-client&apos;s branch refs/heads/JDK-8212885 from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4401991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=4401991&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2047&quot; title=&quot;Regression in default HTTP Client construction for non-public hostnames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2047&quot;&gt;&lt;del&gt;HTTPCLIENT-2047&lt;/del&gt;&lt;/a&gt;: fixed regression in DefaultHostnameVerifier causing rejection of certs with non-standard domains.&lt;/p&gt;

&lt;p&gt;This reverts commit 87cc64fc&lt;/p&gt;</comment>
                            <comment id="17046819" author="ross.bender7@gmail.com" created="Thu, 27 Feb 2020 17:15:59 +0000"  >&lt;p&gt;We got bit by this issue too, jumping from 4.5.2 -&amp;gt; 4.5.11. I appreciate that the issue was quickly identified and fixed in 4.5.12.&lt;/p&gt;

&lt;p&gt;Do we know when 4.5.12 will be released (rough ETA)?&lt;/p&gt;

&lt;p&gt;It seems like good opportunity to encourage tighter adherence to versioning standards. As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; mentioned, the bug was introduced because of feature/behavioral changes slipped in as patch version changes. If closer attention is paid to this in the future we can hopefully avoid it.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17047851" author="olegk" created="Fri, 28 Feb 2020 18:11:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ross.bender7%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;ross.bender7@gmail.com&quot;&gt;ross.bender7@gmail.com&lt;/a&gt;&#160;I will try to get around to it next week.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17047859" author="ckozak" created="Fri, 28 Feb 2020 18:19:36 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;, I really appreciate the quick turnaround!&lt;/p&gt;</comment>
                            <comment id="17051401" author="jetztgradnet" created="Wed, 4 Mar 2020 16:43:28 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2055&quot; title=&quot;Verification of certificates containing wildcard SANs fails for non-public domains&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2055&quot;&gt;&lt;del&gt;HTTPCLIENT-2055&lt;/del&gt;&lt;/a&gt; which was closed as a duplicate of this issue. In that issue I also provided a unit test, in case this might be useful for the future?&lt;/p&gt;</comment>
                            <comment id="17051409" author="olegk" created="Wed, 4 Mar 2020 16:47:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jetztgradnet&quot; class=&quot;user-hover&quot; rel=&quot;jetztgradnet&quot;&gt;jetztgradnet&lt;/a&gt;&#160;We will happily take more unit tests.&lt;/p&gt;

&lt;p&gt;Oleg&#160;&lt;/p&gt;</comment>
                            <comment id="17056312" author="ross.bender7@gmail.com" created="Tue, 10 Mar 2020 19:34:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; I see 4.5.12 was released--thank you for your efforts! We are in the process of updating to this version.&lt;/p&gt;

&lt;p&gt;Thanks again!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13289576">HTTPCLIENT-2055</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13289916">HTTPCLIENT-2058</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13288392">HTTPCLIENT-2054</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13291023">HTTPCLIENT-2060</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0aquw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>