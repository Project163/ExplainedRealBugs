<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:21:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-1732] Providing NTLM credentials for a http proxy via system properties never get read</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-1732</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;Hi all,&lt;br/&gt;
when configuring the credentials via system properties.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-Dhttp.proxyHost=TheUrlToTheNtmlProxy
-Dhttp.proxyPort=8080
-Dhttp.proxyUser=TheUsersName
-Dhttp.proxyPassword=TheUsersPassword
-Dhttp.auth.ntlm.domain=TheDomain
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;they never get read...&lt;/p&gt;

&lt;p&gt;Following code block seem wrong to me:&lt;/p&gt;

&lt;p&gt;SystemDefaultCredentialsProvider:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Credentials getCredentials(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; AuthScope authscope) {
        Args.notNull(authscope, &lt;span class=&quot;code-quote&quot;&gt;&quot;Auth scope&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Credentials localcreds = internal.getCredentials(authscope);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (localcreds != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; localcreds;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (authscope.getHost() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            PasswordAuthentication systemcreds = getSystemCreds(
                    authscope, Authenticator.RequestorType.SERVER);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (systemcreds == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                systemcreds = getSystemCreds(
                        authscope, Authenticator.RequestorType.PROXY);
            }

&lt;span class=&quot;code-comment&quot;&gt;//*** systemcreds is always &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ***
&lt;/span&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (systemcreds != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; domain = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;http.auth.ntlm.domain&quot;&lt;/span&gt;);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (domain != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NTCredentials(
                            systemcreds.getUserName(),
                            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(systemcreds.getPassword()),
                            &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, domain);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (AuthSchemes.NTLM.equalsIgnoreCase(authscope.getScheme())) {
                        &lt;span class=&quot;code-comment&quot;&gt;// Domian may be specified in a fully qualified user name
&lt;/span&gt;                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NTCredentials(
                                systemcreds.getUserName(),
                                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(systemcreds.getPassword()),
                                &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UsernamePasswordCredentials(
                                systemcreds.getUserName(),
                                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(systemcreds.getPassword()));
                    }
                }
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;systemcreds&lt;/em&gt; is always null, because the &lt;em&gt;Authenticator.requestPasswordAuthentication()&lt;/em&gt; returns null, when no system wide authenticator was set, by &lt;em&gt;setDefault(...)&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;So, the question is, or maybe the bug... why is it possible to fully configure the NTLM credentials, but no authenticator is available, and due to that a programmatic way is always necessary to get NTLM auth working.&lt;/p&gt;

&lt;p&gt;The benefit of configuring (no programming) via system properties is lost.&lt;/p&gt;

&lt;p&gt;kind regards&lt;br/&gt;
Patrick&lt;/p&gt;</description>
                <environment></environment>
        <key id="12951550">HTTPCLIENT-1732</key>
            <summary>Providing NTLM credentials for a http proxy via system properties never get read</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olegk">Oleg Kalnichevski</assignee>
                                    <reporter username="patrick1701">Patrick Davids</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Mar 2016 16:43:48 +0000</created>
                <updated>Thu, 4 May 2017 09:49:47 +0000</updated>
                            <resolved>Sat, 2 Apr 2016 10:28:40 +0000</resolved>
                                    <version>4.5.1</version>
                                    <fixVersion>4.5.3</fixVersion>
                    <fixVersion>5.0 Alpha2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15215711" author="olegk" created="Tue, 29 Mar 2016 09:05:33 +0000"  >&lt;p&gt;Patrick&lt;br/&gt;
Could you please test this patch locally &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and let me know if that resolves the issue for you?&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/ok2c/httpclient/commit/a283c614ae0164ac7141765a9b504428e9668e37&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ok2c/httpclient/commit/a283c614ae0164ac7141765a9b504428e9668e37&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15222843" author="olegk" created="Sat, 2 Apr 2016 10:28:40 +0000"  >&lt;p&gt;Committed to SVN trunk and 4.5.x branch.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="15326907" author="patrick1701" created="Mon, 13 Jun 2016 07:00:26 +0000"  >&lt;p&gt;Hi Oleg,&lt;br/&gt;
I try to test it this week.&lt;/p&gt;

&lt;p&gt;kind regards&lt;br/&gt;
Patrick&lt;/p&gt;</comment>
                            <comment id="15399026" author="patrick1701" created="Fri, 29 Jul 2016 09:24:29 +0000"  >&lt;p&gt;Sorry for delay...&lt;/p&gt;

&lt;p&gt;I&apos;m not able to test it.&lt;br/&gt;
Just setting the system properties in combination with builder.useSystemProperties() does not work anymore out-of-the-box.&lt;/p&gt;

&lt;p&gt;It seems the httpclient was able to determine on its own, if he needs a proxyrouting.&lt;br/&gt;
I don&apos;t run into the particular code again.&lt;/p&gt;

&lt;p&gt;kind regards&lt;br/&gt;
Patrick&lt;/p&gt;</comment>
                            <comment id="15430682" author="patrick1701" created="Mon, 22 Aug 2016 12:44:30 +0000"  >&lt;p&gt;Was a misconfiguration on my side... now tested, and works for me.&lt;/p&gt;

&lt;p&gt;kind regards&lt;br/&gt;
Patrick&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uvxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>