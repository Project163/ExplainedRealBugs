<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:22:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-2096] Consider using static loggers instead of instance loggers</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-2096</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;I&apos;d like to consider replacing instance loggers with static loggers to avoid paying a penalty on instantiation. This would result in slightly different (and arguably better) behavior when classes are extended, as the logger origin would reflect the location that produced logging, not the subclass that happened to extend it. For example, if I want to debug hc5, I might set the &lt;tt&gt;org.apache.hc&lt;/tt&gt; origin to &lt;tt&gt;TRACE&lt;/tt&gt; level and add it to a separate appender. If I&apos;ve extended a component it won&apos;t appear with my httpclient logs using the &lt;tt&gt;getClass()&lt;/tt&gt; approach.&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;As far as I know static loggers in low level libraries are considered evil and are to be avoided in favor of instance loggers. The overhead of logger instantiation is quite manageable if one injects logger through a constructor of frequently allocated and deallocated components.&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;Conversation started here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/httpcomponents-client/pull/232#discussion_r448963006&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/pull/232#discussion_r448963006&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Some existing documentation:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.slf4j.org/faq.html#declared_static&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.slf4j.org/faq.html#declared_static&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://logging.apache.org/log4j/2.x/manual/usage.html#StaticVsNonStatic&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://logging.apache.org/log4j/2.x/manual/usage.html#StaticVsNonStatic&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13314743">HTTPCLIENT-2096</key>
            <summary>Consider using static loggers instead of instance loggers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ckozak">Carter Kozak</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jul 2020 16:31:22 +0000</created>
                <updated>Sat, 11 Jul 2020 15:38:50 +0000</updated>
                            <resolved>Thu, 9 Jul 2020 09:36:30 +0000</resolved>
                                    <version>5.0.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7800">2h 10m</timespent>
                                <comments>
                            <comment id="17150439" author="ckozak" created="Thu, 2 Jul 2020 16:37:55 +0000"  >&lt;p&gt;Doing some quick profiling it appears that four logger lookups occur each time a new connection is created, which can be very common in some workflows:&lt;/p&gt;

&lt;p&gt;org.apache.hc.client5.http.impl.io.LenientHttpResponseParser&lt;br/&gt;
org.apache.hc.client5.http.impl.io.DefaultManagedHttpClientConnection&lt;br/&gt;
org.apache.hc.client5.http.headers&lt;br/&gt;
org.apache.hc.client5.http.wire&lt;/p&gt;

&lt;p&gt;Regardless of the outcome of this ticket, we may want to consider reusing references to these loggers in some way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17150444" author="olegk" created="Thu, 2 Jul 2020 16:42:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt; This is not something I would consider a major surprise. The cost of setting up those four loggers is likely still negligible compared to the overall overhead of connection initialization. What is important that there should be new loggers created during each message exchange. That would be prohibitively costly.&lt;/p&gt;

&lt;p&gt;Oleg &lt;/p&gt;</comment>
                            <comment id="17151224" author="olegk" created="Sat, 4 Jul 2020 07:53:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt; Interesting. `slf4j` developers changed their recommendation from using instance variables to static. Any idea when that happened? &lt;/p&gt;

&lt;p&gt;Anyway, I will not stand in your way if you decide to proceed with this change.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17151632" author="ckozak" created="Sun, 5 Jul 2020 17:38:25 +0000"  >&lt;p&gt;&amp;gt; Any idea when that happened?&lt;/p&gt;

&lt;p&gt;I&apos;m not sure, I recall a few projects migrating from instance to static fields about ~5 years ago. I think even using per-instance loggers results in static references since most projects use singletons in some way, for example httpcomponents-client DefaultCacheInvalidator creates a static instance which has a logger field which is equivalent to using a static logger.&lt;/p&gt;</comment>
                            <comment id="17151633" author="ckozak" created="Sun, 5 Jul 2020 17:45:50 +0000"  >&lt;p&gt;I put together some quick automation using errorprone to make this change: &lt;a href=&quot;https://github.com/apache/httpcomponents-client/pull/236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/pull/236&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; If it looks reasonable to you I&apos;ll run the automation on httpcomponents-core as well.&lt;/p&gt;</comment>
                            <comment id="17154392" author="jira-bot" created="Thu, 9 Jul 2020 09:35:00 +0000"  >&lt;p&gt;Commit 986686535750a6a665a206ba0cc892d8fb24bbec in httpcomponents-client&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=9866865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=9866865&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2096&quot; title=&quot;Consider using static loggers instead of instance loggers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2096&quot;&gt;&lt;del&gt;HTTPCLIENT-2096&lt;/del&gt;&lt;/a&gt;: Migrate instance loggers to static fields&lt;/p&gt;

&lt;p&gt;Note that this may change the origin of logging when classes&lt;br/&gt;
have been subclassed, as the logger origin will use the class&lt;br/&gt;
name that defined the logger where previously the subclass type&lt;br/&gt;
would be used. In scenarios where external libraries subclass&lt;br/&gt;
httpclient utilities this allows httpclient logging to maintain&lt;br/&gt;
the `org.apache.hc` prefix instead of inheriting arbitrary&lt;br/&gt;
subclass names.&lt;/p&gt;

&lt;p&gt;Using some logging frameworks this may result in reduced churn&lt;br/&gt;
when httpclient components are created (new connections, for example)&lt;br/&gt;
because loggers are looked up once per class.&lt;/p&gt;</comment>
                            <comment id="17156026" author="jira-bot" created="Sat, 11 Jul 2020 15:38:50 +0000"  >&lt;p&gt;Commit 986686535750a6a665a206ba0cc892d8fb24bbec in httpcomponents-client&apos;s branch refs/heads/5.1.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=9866865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=9866865&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2096&quot; title=&quot;Consider using static loggers instead of instance loggers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2096&quot;&gt;&lt;del&gt;HTTPCLIENT-2096&lt;/del&gt;&lt;/a&gt;: Migrate instance loggers to static fields&lt;/p&gt;

&lt;p&gt;Note that this may change the origin of logging when classes&lt;br/&gt;
have been subclassed, as the logger origin will use the class&lt;br/&gt;
name that defined the logger where previously the subclass type&lt;br/&gt;
would be used. In scenarios where external libraries subclass&lt;br/&gt;
httpclient utilities this allows httpclient logging to maintain&lt;br/&gt;
the `org.apache.hc` prefix instead of inheriting arbitrary&lt;br/&gt;
subclass names.&lt;/p&gt;

&lt;p&gt;Using some logging frameworks this may result in reduced churn&lt;br/&gt;
when httpclient components are created (new connections, for example)&lt;br/&gt;
because loggers are looked up once per class.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0getc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>