<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:23:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-2315] Inconsistent observance of system properties when using HttpClients.createSystem</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-2315</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;During the startup of my application, I configure an SSLContext with additional certificates and set it as a global default using SSLContext.setDefault. Subsequently, all requests created without explicit configuration can successfully connect to servers requiring these certificates. This setup functions seamlessly with various APIs I currently utilize:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;java.net.URLConnection (e.g., URLConnection conn = url.openConnection())&lt;/li&gt;
	&lt;li&gt;java.net.http.HttpClient (e.g., HttpClient client = HttpClient.newHttpClient())&lt;/li&gt;
	&lt;li&gt;org.springframework.ws.client.core.WebServiceTemplate (e.g., WebServiceTemplate webServiceTemplate = new WebServiceTemplate())&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Previously, this approach worked flawlessly with org.apache.httpcomponents:httpclient:4.5.14, where clients were created using:&lt;br/&gt;
HttpClient httpclient = org.apache.http.impl.client.HttpClients.createSystem();&lt;/p&gt;

&lt;p&gt;However, issues arise (due to missing certificates) after upgrading to org.apache.httpcomponents.client5:httpclient5:5.3 and creating clients with:&lt;br/&gt;
HttpClient httpclient = org.apache.hc.client5.http.impl.classic.HttpClients.createSystem();&lt;/p&gt;

&lt;p&gt;When creating a client with HttpClientBuilder.create().useSystemProperties().build() or more succinctly with HttpClients.createSystem(), the expectation is that system properties are observed throughout.&lt;/p&gt;

&lt;p&gt;However, upon inspecting the code, it becomes evident that the connection manager underneath is created using PoolingHttpClientConnectionManagerBuilder.create().build(), and not PoolingHttpClientConnectionManagerBuilder.create().useSystemProperties().build() as one might anticipate.&lt;/p&gt;

&lt;p&gt;Consequently, an internal condition registers the HTTPS socketFactory using SSLConnectionSocketFactory.getSocketFactory() instead of SSLConnectionSocketFactory.getSystemSocketFactory(). This, in turn, results in the creation of a new SSLContext.getInstance(SSLContextBuilder.TLS) instead of leveraging the default one through SSLSocketFactory.getDefault().&lt;/p&gt;

&lt;p&gt;Why is this the case? Is it possible to change this behavior so that the configuration is simplified when one aims to use the default socket factory? Specifically, without the need for explicit configuration of the connection manager in such a common scenario.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13563736">HTTPCLIENT-2315</key>
            <summary>Inconsistent observance of system properties when using HttpClients.createSystem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vitorcd">Vitor Dantas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jan 2024 18:54:09 +0000</created>
                <updated>Mon, 8 Jan 2024 14:35:59 +0000</updated>
                            <resolved>Mon, 8 Jan 2024 14:35:59 +0000</resolved>
                                    <version>5.3</version>
                                    <fixVersion>5.3.1</fixVersion>
                    <fixVersion>5.4-alpha2</fixVersion>
                                    <component>HttpClient (classic)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17803701" author="olegk" created="Fri, 5 Jan 2024 20:37:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vitorcd&quot; class=&quot;user-hover&quot; rel=&quot;vitorcd&quot;&gt;vitorcd&lt;/a&gt; I will take a look.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17804272" author="jira-bot" created="Mon, 8 Jan 2024 13:25:12 +0000"  >&lt;p&gt;Commit 7b12669bd6f70d3534179e8f581ceffdbdbe6b1a in httpcomponents-client&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2315&quot; title=&quot;Inconsistent observance of system properties when using HttpClients.createSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2315&quot;&gt;&lt;del&gt;HTTPCLIENT-2315&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=7b12669bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=7b12669bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2315&quot; title=&quot;Inconsistent observance of system properties when using HttpClients.createSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2315&quot;&gt;&lt;del&gt;HTTPCLIENT-2315&lt;/del&gt;&lt;/a&gt;: client builders fails to apply system properties to the default connection manager&lt;/p&gt;</comment>
                            <comment id="17804274" author="olegk" created="Mon, 8 Jan 2024 13:26:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vitorcd&quot; class=&quot;user-hover&quot; rel=&quot;vitorcd&quot;&gt;vitorcd&lt;/a&gt; Please review / test the proposed fix:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-client/compare/master..HTTPCLIENT-2315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/compare/master..HTTPCLIENT-2315&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17804306" author="JIRAUSER303714" created="Mon, 8 Jan 2024 14:10:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;,&#160;I was able to build the httpcomponents-client project on my machine, and switched versions on the dependencies of my application to httpclient5:5.4-alpha2-SNAPSHOT and httpcore5:5.3-alpha1. When building from the master branch, my tests fail; when building from the &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2315&quot; title=&quot;Inconsistent observance of system properties when using HttpClients.createSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2315&quot;&gt;&lt;del&gt;HTTPCLIENT-2315&lt;/del&gt;&lt;/a&gt; branch, they succeed.&lt;/p&gt;

&lt;p&gt;Thank you so much!&lt;/p&gt;</comment>
                            <comment id="17804320" author="jira-bot" created="Mon, 8 Jan 2024 14:29:45 +0000"  >&lt;p&gt;Commit 679991ae33ce8880d7a1739c5a10ab1b2146d31a in httpcomponents-client&apos;s branch refs/heads/5.3.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=679991ae3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=679991ae3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2315&quot; title=&quot;Inconsistent observance of system properties when using HttpClients.createSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2315&quot;&gt;&lt;del&gt;HTTPCLIENT-2315&lt;/del&gt;&lt;/a&gt;: client builders fails to apply system properties to the default connection manager&lt;/p&gt;</comment>
                            <comment id="17804327" author="jira-bot" created="Mon, 8 Jan 2024 14:35:04 +0000"  >&lt;p&gt;Commit ef77109f35347fa46f1b0d7a33b945d34fbf43bf in httpcomponents-client&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=ef77109f3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=ef77109f3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2315&quot; title=&quot;Inconsistent observance of system properties when using HttpClients.createSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2315&quot;&gt;&lt;del&gt;HTTPCLIENT-2315&lt;/del&gt;&lt;/a&gt;: client builders fails to apply system properties to the default connection manager&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ml4o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>