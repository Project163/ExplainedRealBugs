<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:22:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCLIENT-2170] NTLM Authentication not working when sending multiple request concurrently</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-2170</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                    <description>&lt;p&gt;We migrated our apache version from 4.5.x to 5.0.4 and we have encountered an authentication error using NTLM.&#160;&lt;/p&gt;

&lt;p&gt;We are making multiple requests in different threads to a NTLM secured server concurrently such as:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; fun test_Standalone() {    val username = &lt;span class=&quot;code-quote&quot;&gt;&quot;username&quot;&lt;/span&gt;    val password = &lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;    val serverName = &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;
    val requestUrls = arrayOf(        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/0/0/0&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/63/0/0&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/16/26166/11433&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/15/13083/5716&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/1/0/0&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/16/26166/11432&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/14/6541/2858&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/15/13082/5716&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/15/13083/5715&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/16/26166/11431&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/15/13082/5715&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/14/6541/2857&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/16/26165/11434&quot;&lt;/span&gt;,        &lt;span class=&quot;code-quote&quot;&gt;&quot;https://${serverName}/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/15/13082/5717&quot;&lt;/span&gt;    )
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(url in requestUrls) {        makeRequestAsync(url, username, password)    }}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Some of the data request succeed but others fail with a &lt;b&gt;401 Unauthorized.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;**the output looks something like this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-4] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-3] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-2] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-12] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-0] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-11] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5] 401 :401 Unauthorized HTTP/1.1
&amp;lt;------[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8] 200 :200 OK HTTP/1.1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Looking at the logs, it seems that the NTLM handshake fails for some request&#160;&lt;/p&gt;

&lt;p&gt;**We found that by synchronizing the method &lt;a href=&quot;https://github.com/apache/httpcomponents-client/blob/5.0.x/httpclient5/src/main/java/org/apache/hc/client5/http/impl/classic/ProtocolExec.java#L103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ProtocolExec.execute()&lt;/a&gt;, all the NTLM authentication requests succeed and we are able to fetch the data successfully.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Attached is the repro java project that we are using.&#160;&lt;/p&gt;

&lt;p&gt;The project only needs an NTLM server and credentials to run.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We tested version 5.1 and it was also reproducible.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Java 1.8 and Android </environment>
        <key id="13395575">HTTPCLIENT-2170</key>
            <summary>NTLM Authentication not working when sending multiple request concurrently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Erick_001">Erick </reporter>
                        <labels>
                            <label>5.04</label>
                            <label>5.1</label>
                            <label>NTLM</label>
                            <label>http-client</label>
                    </labels>
                <created>Tue, 17 Aug 2021 00:25:13 +0000</created>
                <updated>Thu, 19 Aug 2021 17:06:41 +0000</updated>
                            <resolved>Thu, 19 Aug 2021 17:06:04 +0000</resolved>
                                    <version>5.0.4</version>
                    <version>5.1</version>
                                    <fixVersion>5.1.1</fixVersion>
                    <fixVersion>5.2-alpha1</fixVersion>
                                    <component>HttpClient (classic)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17400155" author="michael-o" created="Tue, 17 Aug 2021 06:11:39 +0000"  >&lt;p&gt;Synchronizating this method is wrong because the state on the connection needs to be maintained by the authenticator, not this method. You need to search a solution in the NTLM classes.&lt;/p&gt;</comment>
                            <comment id="17400393" author="olegk" created="Tue, 17 Aug 2021 13:31:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Erick_001&quot; class=&quot;user-hover&quot; rel=&quot;Erick_001&quot;&gt;Erick_001&lt;/a&gt;&#160;Please provide a reproducer for this issue.&#160;No project committer would do that for you.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17400455" author="cshi@esri.com" created="Tue, 17 Aug 2021 15:31:28 +0000"  >&lt;p&gt;The reproducer test case is attached with the issue `NTLMTestSample.zip`. You need to update it to run against an NTLM enabled serivce with a valid username/password&lt;/p&gt;</comment>
                            <comment id="17400482" author="olegk" created="Tue, 17 Aug 2021 16:48:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshi%40esri.com&quot; class=&quot;user-hover&quot; rel=&quot;cshi@esri.com&quot;&gt;cshi@esri.com&lt;/a&gt;&#160;I saw there was some sample code but without a server-side part it is a reproducer and is not very useful. Please provide the server side code either as a Docker image or a publicly accessible endpoint.&lt;/p&gt;

&lt;p&gt;Oleg&#160; &#160;&lt;/p&gt;</comment>
                            <comment id="17400633" author="erick_001" created="Tue, 17 Aug 2021 21:14:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have simplified the repro code to one file using http-client 5.0.4.&lt;/p&gt;

&lt;p&gt;We are still working on getting a public NTLM endpoint,&#160;&lt;/p&gt;

&lt;p&gt;meanwhile if you have an NTLM service you can just replace the requestUris with one single endpoint and repeat the request several times as it is also reproducible like that.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JavaHttpClientWrapper {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CloseableHttpClient httpClient;
  
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password = &lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;;

    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] requestUris = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/0/0/0&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/63/0/0&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/16/26166/11433&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/15/13083/5716&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/1/0/0&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/16/26166/11432&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/14/6541/2858&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/server/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/services/CERT_Secured_Basemap/MapServer/tile/15/13082/5716&quot;&lt;/span&gt;
&lt;/span&gt;    };

    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      JavaHttpClientWrapper httpClientWrapper = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JavaHttpClientWrapper();
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri : requestUris) {
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(() -&amp;gt; {
          httpClientWrapper.makeRequest(uri, username, password);
        }).start();
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
      e.printStackTrace();
    }

  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JavaHttpClientWrapper() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

    X509TrustManager trustManager = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; X509TrustManager() {
      @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void checkClientTrusted(X509Certificate[] x509Certificates, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; CertificateException {}
      @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void checkServerTrusted(X509Certificate[] x509Certificates, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; CertificateException {}
      @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; X509Certificate[] getAcceptedIssuers() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; X509Certificate[0];
      }
    };
    TrustManager[] trustManagers = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TrustManager[] { trustManager };
    SSLContext sslContext = SSLContext.getInstance(&lt;span class=&quot;code-quote&quot;&gt;&quot;TLS&quot;&lt;/span&gt;);
    sslContext.init(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, trustManagers, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

    SSLConnectionSocketFactory sslConnectionSocketFactory = SSLConnectionSocketFactoryBuilder.create()
        .setSslContext(sslContext)
        .setTlsVersions(TLS.V_1_2)
        .setHostnameVerifier(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultHostnameVerifier())
        .build();

    Registry sslSocketConnectionRegistry = RegistryBuilder.create()
        .register(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;, PlainConnectionSocketFactory.INSTANCE)
        .register(&lt;span class=&quot;code-quote&quot;&gt;&quot;https&quot;&lt;/span&gt;, sslConnectionSocketFactory).build();

    PoolingHttpClientConnectionManager connectionManager = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PoolingHttpClientConnectionManager(sslSocketConnectionRegistry);
    connectionManager.setValidateAfterInactivity(TimeValue.of(1L, TimeUnit.SECONDS));
    connectionManager.setMaxTotal(50);
    connectionManager.setDefaultMaxPerRoute(50);

    CacheConfig cacheConfig = CacheConfig.custom()
        .setSharedCache(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).
        setMaxObjectSize(153600L).
        setMaxCacheEntries(600)
        .build();

    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.httpClient = CachingHttpClients.custom()
        .setCacheConfig(cacheConfig)
        .disableAutomaticRetries()
        .setConnectionManager(connectionManager)
        .setDefaultRequestConfig(NetworkDefaults.getDefaultRequestConfig())
        .setUserAgent(&lt;span class=&quot;code-quote&quot;&gt;&quot;test user agent&quot;&lt;/span&gt;)
        .build();
  }


  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; makeRequest(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password) {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; httpStatusCode = -1;
    HttpGet httpget = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpGet(url);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot; &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; &quot;&lt;/span&gt; + url);
      CloseableHttpResponse response;
        response = httpClient.execute(httpget,
            createContext(url, username, password.toCharArray()));
      httpStatusCode = response.getCode();
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;------&quot;&lt;/span&gt; + httpStatusCode + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + response);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception exception) {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;IWA : network request failed: &quot;&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; httpStatusCode;
  }


  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HttpClientContext createContext(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; surl, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username, &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] password) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception{
    URL url = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(surl);
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; host = url.getHost();
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; port = url.getPort();
    AuthScope authScope = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AuthScope(host, port);
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; finalPort = port &amp;gt;= 0 ? port : 443;
    AuthScope ntlmAuthScope = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AuthScope(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, host, finalPort, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;NTLM&quot;&lt;/span&gt;);
    HttpClientContext httpClientContext = HttpClientContext.create();

    UsernamePasswordCredentials upc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UsernamePasswordCredentials(username, password);
    NTCredentials ntc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NTCredentials(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.processUsername(username), password, host, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    BasicCredentialsProvider provider = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BasicCredentialsProvider();

    provider.setCredentials(authScope, upc);
    provider.setCredentials(ntlmAuthScope, ntc);
    httpClientContext.setCredentialsProvider(provider);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; httpClientContext;
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; processUsername(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username) {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] split = username.split(&lt;span class=&quot;code-quote&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;, 2);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (split.length == 2) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; split[1] + &lt;span class=&quot;code-quote&quot;&gt;&quot;@&quot;&lt;/span&gt; + split[0];
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; username;
  }
}



&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17401242" author="michael-o" created="Wed, 18 Aug 2021 16:59:11 +0000"  >&lt;p&gt;Please provide debug log output for authentication and connection management.&lt;/p&gt;</comment>
                            <comment id="17401322" author="erick_001" created="Wed, 18 Aug 2021 19:33:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;michael-o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We found that by adding this line to the &lt;em&gt;CachingHttpClients.custom()&lt;/em&gt; the request &lt;b&gt;are&lt;/b&gt; working as expected&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CachingHttpClients.custom()
        .setCacheConfig(cacheConfig)
        .disableAutomaticRetries()
        .setConnectionManager(connectionManager)
        .setDefaultRequestConfig(NetworkDefaults.getDefaultRequestConfig())
        .setUserAgent(&lt;span class=&quot;code-quote&quot;&gt;&quot;test user agent&quot;&lt;/span&gt;)
        .setUserTokenHandler((route, context) -&amp;gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getId())  &amp;lt;-------------
        .build();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is this approach correct?&#160;we saw that you suggested this in &lt;a href=&quot;https://stackoverflow.com/questions/22477446/apache-httpclient-reuse-connections-only-within-the-same-httpcontext&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this old StackOverflow post back in &apos;14&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;but we didn&apos;t have to do this with our 4.5.x version.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Attached are the debug logs of the request when they &lt;b&gt;aren&apos;t&lt;/b&gt; working:&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13032161/13032161_NTLM_logs.txt&quot; title=&quot;NTLM_logs.txt attached to HTTPCLIENT-2170&quot;&gt;NTLM_logs.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17401327" author="michael-o" created="Wed, 18 Aug 2021 19:47:18 +0000"  >&lt;p&gt;Something is wrong here because the client &lt;b&gt;is&lt;/b&gt; sending NTLM Type 3 message to the server, but it rejects it:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;gt;&amp;gt; &quot;GET /server/rest/services/CERT_Secured_Basemap/MapServer/tile/14/6541/2858 HTTP/1.1[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;gt;&amp;gt; &quot;Host: localhost.com[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;gt;&amp;gt; &quot;Connection: keep-alive[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;gt;&amp;gt; &quot;User-Agent: test user agent[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;gt;&amp;gt; &quot;Authorization: NTLM TlRMTVNTUAADAAAAGAAYAEgAAADCAMIAYAAAAAAAAAAiAQAAEAAQACIBAAAUABQAMgEAAAAAAABGAQAABYKJogUBKAoAAAAP1NEOXrHPMxp6e8sOzeBFpMBBdy4uso7ZBbAfEpAnEWQKHzTKZXTWgwEBAAAAAAAAEIedSGWU1wFlVSW3du4uXAAAAAACAA4AQQBWAFcATwBSAEwARAABABQARABFAFYAMAAwADAANAA0ADAANAAEABAAZQBzAHIAaQAuAGMAbwBtAAMAJgBEAGUAdgAwADAAMAA0ADQAMAA0AC4AZQBzAHIAaQAuAGMAbwBtAAUAFgBlAG0AcAB0AHkALgBsAG8AYwBhAGwABwAIABKVEUhllNcBAAAAAAAAAABhAHAAcABzADAAMAAwADEARABFAFYAMAAwADAANAA0ADAANAA=[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;gt;&amp;gt; &quot;[\r][\n]&quot;
&amp;lt;------[Thread-6] 401 :401 Unauthorized HTTP/1.1
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;HTTP/1.1 401 Unauthorized[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;Content-Type: text/html[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;Server: Microsoft-IIS/10.0[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;WWW-Authenticate: Negotiate[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;WWW-Authenticate: NTLM[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;X-Powered-By: ASP.NET[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;Date: Wed, 18 Aug 2021 19:14:35 GMT[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;Content-Length: 1293[\r][\n]&quot;
[Thread-6] DEBUG org.apache.hc.client5.http.wire - http-outgoing-1 &amp;lt;&amp;lt; &quot;[\r][\n]&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Either the token is truly incorrect. Check the server event log OR there is a concurrency issue where authenticators are shared (interleaved) between threads which shouldn&apos;t.&lt;/p&gt;

{4E 54 4C 4D 53 53 50 00 03}
&lt;p&gt; == NTLMSSP\03 =&amp;gt; Type 3 message&lt;/p&gt;</comment>
                            <comment id="17401558" author="olegk" created="Thu, 19 Aug 2021 09:05:58 +0000"  >&lt;p&gt;&amp;gt; We found that by adding this line to the CachingHttpClients.custom() the request are working as expected&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshi%40esri.com&quot; class=&quot;user-hover&quot; rel=&quot;cshi@esri.com&quot;&gt;cshi@esri.com&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Erick_001&quot; class=&quot;user-hover&quot; rel=&quot;Erick_001&quot;&gt;Erick_001&lt;/a&gt; I think this is not the case. Apparently your original code was not re-using persistent connections. NTLM authenticated connections carry a user identity and are treated as state-ful. A new connection was created for each and every request, thus also triggering an NTLM handshake for each and every request. Therefore, the defect, whatever it might be, was much more likely to happen. With a custom `UserTokenHandler`  your code started to re-use NTLM authnticated connections and the frequency of NTLM handshakes got massively reduced. The problem is now less likely to happen but the root cause of it is still there.&lt;/p&gt;

&lt;p&gt;Having said that, the problem might as well be on the server side and not on the client&apos;s. At this point I cannot confirm this issue as a defect in HttpClient.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17401566" author="olegk" created="Thu, 19 Aug 2021 09:22:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Erick_001&quot; class=&quot;user-hover&quot; rel=&quot;Erick_001&quot;&gt;Erick_001&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshi%40esri.com&quot; class=&quot;user-hover&quot; rel=&quot;cshi@esri.com&quot;&gt;cshi@esri.com&lt;/a&gt; I spotted something in HttpClient code that appears wrong. &lt;/p&gt;

&lt;p&gt;I am looking into it and will keep you posted.&lt;/p&gt;

&lt;p&gt;Oleg &lt;/p&gt;</comment>
                            <comment id="17401689" author="jira-bot" created="Thu, 19 Aug 2021 13:30:31 +0000"  >&lt;p&gt;Commit 0252eca893a64b19cc1918e26cdeb466f5145714 in httpcomponents-client&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2170&quot; title=&quot;NTLM Authentication not working when sending multiple request concurrently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2170&quot;&gt;&lt;del&gt;HTTPCLIENT-2170&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=0252eca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=0252eca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2170&quot; title=&quot;NTLM Authentication not working when sending multiple request concurrently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2170&quot;&gt;&lt;del&gt;HTTPCLIENT-2170&lt;/del&gt;&lt;/a&gt;: Classic protocol layer no longer releases the underlying connection back to the pool prematurely while the NTLM handshake is still ongoing&lt;/p&gt;</comment>
                            <comment id="17401691" author="olegk" created="Thu, 19 Aug 2021 13:33:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Erick_001&quot; class=&quot;user-hover&quot; rel=&quot;Erick_001&quot;&gt;Erick_001&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshi%40esri.com&quot; class=&quot;user-hover&quot; rel=&quot;cshi@esri.com&quot;&gt;cshi@esri.com&lt;/a&gt; Please try out this branch &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and let me know if that fixes the problem for you.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/httpcomponents-client/tree/HTTPCLIENT-2170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-client/tree/HTTPCLIENT-2170&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17401734" author="cshi@esri.com" created="Thu, 19 Aug 2021 16:05:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; Thank you very much for the fixes! it does solve our problem so far. Appreciated for your help.&lt;/p&gt;</comment>
                            <comment id="17401753" author="jira-bot" created="Thu, 19 Aug 2021 16:53:59 +0000"  >&lt;p&gt;Commit 99f2144dfcabefc3a95895b2b47331f42b717271 in httpcomponents-client&apos;s branch refs/heads/5.0.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=99f2144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=99f2144&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2170&quot; title=&quot;NTLM Authentication not working when sending multiple request concurrently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2170&quot;&gt;&lt;del&gt;HTTPCLIENT-2170&lt;/del&gt;&lt;/a&gt;: Classic protocol layer no longer releases the underlying connection back to the pool prematurely while the NTLM handshake is still ongoing&lt;/p&gt;</comment>
                            <comment id="17401755" author="erick_001" created="Thu, 19 Aug 2021 16:54:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The fix seems promising, our initial testing looks good.&#160;&lt;/p&gt;

&lt;p&gt;We grabbed those changes and we put them in our 5.0.4 version.&#160;&lt;/p&gt;

&lt;p&gt;Is the fix isolated to this 4 lines of code or you recommend that we include other commits?&lt;/p&gt;

&lt;p&gt;Thank you for the quick turnaround!&lt;/p&gt;</comment>
                            <comment id="17401757" author="jira-bot" created="Thu, 19 Aug 2021 16:58:31 +0000"  >&lt;p&gt;Commit 0f9d651948437121b4a921366cf5fb437d0ca0bc in httpcomponents-client&apos;s branch refs/heads/5.1.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=0f9d651&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=0f9d651&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2170&quot; title=&quot;NTLM Authentication not working when sending multiple request concurrently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2170&quot;&gt;&lt;del&gt;HTTPCLIENT-2170&lt;/del&gt;&lt;/a&gt;: Classic protocol layer no longer releases the underlying connection back to the pool prematurely while the NTLM handshake is still ongoing&lt;/p&gt;</comment>
                            <comment id="17401760" author="olegk" created="Thu, 19 Aug 2021 17:05:49 +0000"  >&lt;p&gt;&amp;gt; Is the fix isolated to this 4 lines of code or you recommend that we include other commits?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Erick_001&quot; class=&quot;user-hover&quot; rel=&quot;Erick_001&quot;&gt;Erick_001&lt;/a&gt; Those four lines should be enough but I would recommend upgrading to 5.1 nonetheless. There will not likely be another release from the 5.0.x branch.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17401761" author="jira-bot" created="Thu, 19 Aug 2021 17:06:41 +0000"  >&lt;p&gt;Commit 5164a4e7b4e122bd3f81db212f6d8ed4a681c583 in httpcomponents-client&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=5164a4e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=5164a4e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-2170&quot; title=&quot;NTLM Authentication not working when sending multiple request concurrently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-2170&quot;&gt;&lt;del&gt;HTTPCLIENT-2170&lt;/del&gt;&lt;/a&gt;: Classic protocol layer no longer releases the underlying connection back to the pool prematurely while the NTLM handshake is still ongoing&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13032045" name="NTLMTestSample.zip" size="314218" author="Erick_001" created="Tue, 17 Aug 2021 00:20:31 +0000"/>
                            <attachment id="13032161" name="NTLM_logs.txt" size="232203" author="Erick_001" created="Wed, 18 Aug 2021 19:33:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
            <label>kotlin</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0typ4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>