{"url":"https://api.github.com/repos/obsproject/obs-studio/issues/3218","repository_url":"https://api.github.com/repos/obsproject/obs-studio","labels_url":"https://api.github.com/repos/obsproject/obs-studio/issues/3218/labels{/name}","comments_url":"https://api.github.com/repos/obsproject/obs-studio/issues/3218/comments","events_url":"https://api.github.com/repos/obsproject/obs-studio/issues/3218/events","html_url":"https://github.com/obsproject/obs-studio/issues/3218","id":666276369,"node_id":"MDU6SXNzdWU2NjYyNzYzNjk=","number":3218,"title":"obs python signal_handler_disconnect not working","user":{"login":"alexdean","id":115486,"node_id":"MDQ6VXNlcjExNTQ4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/115486?v=4","gravatar_id":"","url":"https://api.github.com/users/alexdean","html_url":"https://github.com/alexdean","followers_url":"https://api.github.com/users/alexdean/followers","following_url":"https://api.github.com/users/alexdean/following{/other_user}","gists_url":"https://api.github.com/users/alexdean/gists{/gist_id}","starred_url":"https://api.github.com/users/alexdean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexdean/subscriptions","organizations_url":"https://api.github.com/users/alexdean/orgs","repos_url":"https://api.github.com/users/alexdean/repos","events_url":"https://api.github.com/users/alexdean/events{/privacy}","received_events_url":"https://api.github.com/users/alexdean/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-07-27T13:01:15Z","updated_at":"2021-05-14T16:05:34Z","closed_at":"2020-08-22T16:01:32Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- READ THIS FIRST -->\r\n<!-- The OBS Studio GitHub issue tracker is **ONLY** to be -->\r\n<!-- used for reporting Bugs that have replication steps. -->\r\n\r\n<!-- You can post Feature Requests here: https://ideas.obsproject.com/ -->\r\n<!-- Get help for Support Issues here: https://obsproject.com/help -->\r\n\r\n<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n## Platform\r\n<!-- Please fill out the following information about your bug report. -->\r\n<!-- If you are on Linux and installed using a package, please list the package type. -->\r\nOperating system and version: OSX 10.14.6 (Mojave)\r\nOBS Studio version: 25.0.6\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nI expect that calling [`signal_handler_disconnect`](https://obsproject.com/docs/scripting.html?highlight=disconnect#signal_handler_disconnect) will cause my signal handling method to no longer be called.\r\n\r\n## Current Behavior\r\n<!--- Tell us what happens instead of the expected behavior. -->\r\n<!--- Please include a log file here if possible. -->\r\nEven after calling `signal_handler_disconnect`, my signal handling method continues to receive calls from OBS when events occur.\r\n\r\nHere are log messages I collected when running my reproduce script (see below) locally.\r\n\r\n```\r\n[signal_handler_disconnect_not_working.py] added 'source_activate' handler.\r\n[signal_handler_disconnect_not_working.py] source_activated() called.\r\n[signal_handler_disconnect_not_working.py] removed 'source_activate' handler.\r\n[signal_handler_disconnect_not_working.py] source_activated() called.\r\n```\r\n\r\nThe logs make more sense in the context of the script, but the basic point is that a signal handler continues to be invoked even after `signal_handler_disconnect` has been called.\r\n\r\n## Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant. -->\r\n<!--- Screenshots and video are encouraged if applicable. -->\r\nAn OBS python script to help reproduce this issue is here: https://gist.github.com/alexdean/87cb0c087b85cb529559086b319c832f\r\n\r\nSteps:\r\n\r\n  1. Load script.\r\n  1. open script log.\r\n  1. click 'call add_handlers' button.\r\n    * observe message in script log: \"added 'source_activate' handler.\"\r\n  1. make a source active.\r\n    * observe message in script log: \"source_activated() called.\"\r\n  1. click 'call remove_handlers' button.\r\n    * observe message in script log: \"removed 'source_activate' handler.\"\r\n  1. make a source active.\r\n    * expected: nothing should be printed to the script log\r\n    * actual: \"source_activated() called.\" is printed to the log\r\n\r\nThe second \"source_activated() called\" log message is unexpected because the signal handler should have been removed [when `remove_handlers` was called](https://gist.github.com/alexdean/87cb0c087b85cb529559086b319c832f#file-signal_handler_disconnect_not_working-py-L57-L65).\r\n","closed_by":{"login":"jp9000","id":2084112,"node_id":"MDQ6VXNlcjIwODQxMTI=","avatar_url":"https://avatars.githubusercontent.com/u/2084112?v=4","gravatar_id":"","url":"https://api.github.com/users/jp9000","html_url":"https://github.com/jp9000","followers_url":"https://api.github.com/users/jp9000/followers","following_url":"https://api.github.com/users/jp9000/following{/other_user}","gists_url":"https://api.github.com/users/jp9000/gists{/gist_id}","starred_url":"https://api.github.com/users/jp9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jp9000/subscriptions","organizations_url":"https://api.github.com/users/jp9000/orgs","repos_url":"https://api.github.com/users/jp9000/repos","events_url":"https://api.github.com/users/jp9000/events{/privacy}","received_events_url":"https://api.github.com/users/jp9000/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/obsproject/obs-studio/issues/3218/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/obsproject/obs-studio/issues/3218/timeline","performed_via_github_app":null,"state_reason":"completed"}