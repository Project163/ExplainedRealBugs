{"url":"https://api.github.com/repos/obsproject/obs-studio/issues/6532","repository_url":"https://api.github.com/repos/obsproject/obs-studio","labels_url":"https://api.github.com/repos/obsproject/obs-studio/issues/6532/labels{/name}","comments_url":"https://api.github.com/repos/obsproject/obs-studio/issues/6532/comments","events_url":"https://api.github.com/repos/obsproject/obs-studio/issues/6532/events","html_url":"https://github.com/obsproject/obs-studio/issues/6532","id":1244360758,"node_id":"I_kwDOAMnsBs5KK3A2","number":6532,"title":"linux-capture: Xcomposite - darray_erase: Assertion `idx < dst->num' failed","user":{"login":"Chiitoo","id":9367616,"node_id":"MDQ6VXNlcjkzNjc2MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9367616?v=4","gravatar_id":"","url":"https://api.github.com/users/Chiitoo","html_url":"https://github.com/Chiitoo","followers_url":"https://api.github.com/users/Chiitoo/followers","following_url":"https://api.github.com/users/Chiitoo/following{/other_user}","gists_url":"https://api.github.com/users/Chiitoo/gists{/gist_id}","starred_url":"https://api.github.com/users/Chiitoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Chiitoo/subscriptions","organizations_url":"https://api.github.com/users/Chiitoo/orgs","repos_url":"https://api.github.com/users/Chiitoo/repos","events_url":"https://api.github.com/users/Chiitoo/events{/privacy}","received_events_url":"https://api.github.com/users/Chiitoo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1652703726,"node_id":"MDU6TGFiZWwxNjUyNzAzNzI2","url":"https://api.github.com/repos/obsproject/obs-studio/labels/Linux","name":"Linux","color":"709bc9","default":false,"description":"Affects Linux"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-05-22T20:40:39Z","updated_at":"2022-05-24T11:16:10Z","closed_at":"2022-05-24T11:16:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Operating System Info\r\n\r\nOther\r\n\r\n### Other OS\r\n\r\nGentoo Linux\r\n\r\n### OBS Studio Version\r\n\r\nGit\r\n\r\n### OBS Studio Version (Other)\r\n\r\n_No response_\r\n\r\n### OBS Studio Log URL\r\n\r\nhttps://obsproject.com/logs/vnjcnBE1fibN3ZxK\r\n\r\n### OBS Studio Crash Log URL\r\n\r\n_No response_\r\n\r\n### Expected Behavior\r\n\r\nNo crashy crashy.\r\n\r\n### Current Behavior\r\n\r\nobs: /[build-path]/libobs/util/darray.h:312: darray_erase: Assertion `idx < dst->num' failed.\r\n\r\nThread 34 \"libobs: graphic\" received signal SIGABRT, Aborted.\r\n\r\n\r\n### Steps to Reproduce\r\n\r\n1. Starting with a clean profile (after deleting '$HOME/.config/obs-studio', although it seems to be enough if the 'Untitled.json' is deleted from under 'scenes'), run OBS Studio.\r\n2. Add a Window Capture (Xcomposite) source.\r\n3. Select a window to capture, and close said window.\r\n\r\n- It may be enough to simply close OBS Studio instead of closing the source window.\r\n- I can also trigger the failure by mousing over the LXQt panel to make it come out of hiding (it is set to automatically hide).\r\n\r\n\r\n### Anything else we should know?\r\n\r\nThis starts with commit 1604400e488 [1], although I did not have it happening when initially testing the PR for it.\r\n\r\nNot that I'm familiar with the code, but it doesn't look too normal that 'idx' is suddenly such a big number (18446744073709551615), when it seems to normally be 0 to 3.  Or maybe 4 was the highest I saw while testing with added logging.\r\n\r\nLog with backtrace: https://gist.github.com/Chiitoo/3ac706dc0d134a85d467970489ee9018\r\n\r\n1. https://github.com/obsproject/obs-studio/commit/1604400e488f66c885dc43e9ad8fb2a56beaa0bb\r\n","closed_by":{"login":"GeorgesStavracas","id":3518204,"node_id":"MDQ6VXNlcjM1MTgyMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3518204?v=4","gravatar_id":"","url":"https://api.github.com/users/GeorgesStavracas","html_url":"https://github.com/GeorgesStavracas","followers_url":"https://api.github.com/users/GeorgesStavracas/followers","following_url":"https://api.github.com/users/GeorgesStavracas/following{/other_user}","gists_url":"https://api.github.com/users/GeorgesStavracas/gists{/gist_id}","starred_url":"https://api.github.com/users/GeorgesStavracas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GeorgesStavracas/subscriptions","organizations_url":"https://api.github.com/users/GeorgesStavracas/orgs","repos_url":"https://api.github.com/users/GeorgesStavracas/repos","events_url":"https://api.github.com/users/GeorgesStavracas/events{/privacy}","received_events_url":"https://api.github.com/users/GeorgesStavracas/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/obsproject/obs-studio/issues/6532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/obsproject/obs-studio/issues/6532/timeline","performed_via_github_app":null,"state_reason":"completed"}