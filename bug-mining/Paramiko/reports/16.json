{"url":"https://api.github.com/repos/paramiko/paramiko/issues/270","repository_url":"https://api.github.com/repos/paramiko/paramiko","labels_url":"https://api.github.com/repos/paramiko/paramiko/issues/270/labels{/name}","comments_url":"https://api.github.com/repos/paramiko/paramiko/issues/270/comments","events_url":"https://api.github.com/repos/paramiko/paramiko/issues/270/events","html_url":"https://github.com/paramiko/paramiko/issues/270","id":28087351,"node_id":"MDU6SXNzdWUyODA4NzM1MQ==","number":270,"title":"Potential slowdowns post 1.12","user":{"login":"bitprophet","id":6088,"node_id":"MDQ6VXNlcjYwODg=","avatar_url":"https://avatars.githubusercontent.com/u/6088?v=4","gravatar_id":"","url":"https://api.github.com/users/bitprophet","html_url":"https://github.com/bitprophet","followers_url":"https://api.github.com/users/bitprophet/followers","following_url":"https://api.github.com/users/bitprophet/following{/other_user}","gists_url":"https://api.github.com/users/bitprophet/gists{/gist_id}","starred_url":"https://api.github.com/users/bitprophet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bitprophet/subscriptions","organizations_url":"https://api.github.com/users/bitprophet/orgs","repos_url":"https://api.github.com/users/bitprophet/repos","events_url":"https://api.github.com/users/bitprophet/events{/privacy}","received_events_url":"https://api.github.com/users/bitprophet/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2014-02-22T02:31:00Z","updated_at":"2014-08-18T20:57:10Z","closed_at":"2014-08-08T19:26:32Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"tl;dr a user (and I feel like I've heard similar anecdata in the past, though can't find any hard evidence or tickets) is noticing Paramiko be much slower in recent versions, and it seems to have really started with 1.12, implying potentially ECDSA related.\n\n> [17:19:37]  &lt;Dnumgis_&gt;   howdy. I'm trying out fabric 1.8.2 (installed with pip), and it is much much slower than version 1.4.3 shipped with ubuntu. Any ideas what could be the cause?\n> [17:23:25]  &lt;Dnumgis_&gt;   I've found the cpu usage is much higher with the newer one. And it takes about 2-3 seconds longer to start each command so I'm guessing it has to do with the key exchange phase with the private key crypto\n> [17:23:34]  &lt;Dnumgis_&gt;   or the public key verification\n> [17:28:47]  &lt;Dnumgis_&gt;   I'll do some very simple benchmarks to get some numbers to back up my gut feeling\n> [17:35:27]  &lt;Dnumgis_&gt;   new version:  fab -H  -- uname -r  156,75s user 9,00s system 108% cpu 2:32,55 total\n> [17:35:35]  &lt;Dnumgis_&gt;   old version fab -H  -- uname -r  1,40s user 0,10s system 24% cpu 6,260 total\n> [17:49:03]  &lt;redkrieg>  Dnumgis_: keys or passwords?\n> [17:49:12]  &lt;Dnumgis_&gt;   keys\n> [17:49:22]  &lt;redkrieg>  length?\n> [17:49:52]  &lt;Dnumgis_&gt;   with logging module set to debug level I get these this messages with the slow version. INFO:paramiko.hostkeys:Unable to handle key of type ecdsa-sha2-nistp521\n> [17:50:00]  &lt;Dnumgis_&gt;   repeated twice\n> [17:50:46]  &lt;Dnumgis_&gt;   both versions end up on the same ciphers, kex and compression settings btw\n> [17:53:02]  &lt;Dnumgis_&gt;   redkrieg: I'm using the same keys on the same box with both the slow version and the fast one. I'm not quite sure why key length should be an issue then\n> [17:56:38]  &lt;Dnumgis_&gt;   using passwords makes no difference\n> [18:18:21]  &lt;Dnumgis_&gt;   complete performance breakdown: https://gist.github.com/sigmunau/9147653\n> [18:19:16]  &lt;Dnumgis_&gt;   executive summary: 1.10.2 decreased performance one order of magnitude and 1.12.0 yet another\n> [18:22:09]  &lt;Dnumgis_&gt;   I've run the script over a few times and it's quite consistent in moving from about 0.12 to about 1.15 at 1.10.3 as well\n> [18:30:18]  &lt;Dnumgis_&gt;   with four hosts 1.10.3 and above took 4,75s while below took 0,38s\n> [18:30:51]  &lt;Dnumgis_&gt;   which is quite close to four times what it took with one host, so seems startup cost isn't a big factor\n","closed_by":{"login":"bitprophet","id":6088,"node_id":"MDQ6VXNlcjYwODg=","avatar_url":"https://avatars.githubusercontent.com/u/6088?v=4","gravatar_id":"","url":"https://api.github.com/users/bitprophet","html_url":"https://github.com/bitprophet","followers_url":"https://api.github.com/users/bitprophet/followers","following_url":"https://api.github.com/users/bitprophet/following{/other_user}","gists_url":"https://api.github.com/users/bitprophet/gists{/gist_id}","starred_url":"https://api.github.com/users/bitprophet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bitprophet/subscriptions","organizations_url":"https://api.github.com/users/bitprophet/orgs","repos_url":"https://api.github.com/users/bitprophet/repos","events_url":"https://api.github.com/users/bitprophet/events{/privacy}","received_events_url":"https://api.github.com/users/bitprophet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/paramiko/paramiko/issues/270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/paramiko/paramiko/issues/270/timeline","performed_via_github_app":null,"state_reason":"completed"}