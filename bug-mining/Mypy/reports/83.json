{"url":"https://api.github.com/repos/python/mypy/issues/11856","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/11856/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/11856/comments","events_url":"https://api.github.com/repos/python/mypy/issues/11856/events","html_url":"https://github.com/python/mypy/issues/11856","id":1089744211,"node_id":"I_kwDOAGuhRc5A9C1T","number":11856,"title":"Consider `from .sub import *` as re-exporting all the public symbols of `sub`","user":{"login":"tibdex","id":6574550,"node_id":"MDQ6VXNlcjY1NzQ1NTA=","avatar_url":"https://avatars.githubusercontent.com/u/6574550?v=4","gravatar_id":"","url":"https://api.github.com/users/tibdex","html_url":"https://github.com/tibdex","followers_url":"https://api.github.com/users/tibdex/followers","following_url":"https://api.github.com/users/tibdex/following{/other_user}","gists_url":"https://api.github.com/users/tibdex/gists{/gist_id}","starred_url":"https://api.github.com/users/tibdex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tibdex/subscriptions","organizations_url":"https://api.github.com/users/tibdex/orgs","repos_url":"https://api.github.com/users/tibdex/repos","events_url":"https://api.github.com/users/tibdex/events{/privacy}","received_events_url":"https://api.github.com/users/tibdex/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-12-28T09:39:59Z","updated_at":"2021-12-30T21:41:36Z","closed_at":"2021-12-30T21:41:36Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Bug Report**\r\n\r\nThis goes directly against what was made in #7361 but it's more consistent with [PEP 484](https://www.python.org/dev/peps/pep-0484/) which says:\r\n\r\n> - Modules and variables imported into the stub are not considered exported from the stub unless the import uses the import ... as ... form or the equivalent from ... import ... as ... form. (UPDATE: To clarify, the intention here is that only names imported using the form X as X will be exported, i.e. the name before and after as must be the same.)\r\n> - However, as an exception to the previous bullet, all objects imported into a stub using from ... import * are considered exported. (This makes it easier to re-export all objects from a given module that may vary by Python version.)\r\n\r\nI know that these notes are for \"stub files\" but, for typed libraries with a `py.typed` (see [PEP 561](https://www.python.org/dev/peps/pep-0561/)), it makes sense for regular `.py` files to follow the same rules as `.pyi` files.\r\n\r\nNot considering `from .sub import *` as re-exporting all the public/exported symbols of `sub` forces the developers to manually list all the symbols of `sub`, making the attention they paid to correctly make symbols public or private in this sub module worthless.\r\n\r\n**To Reproduce**\r\n\r\n```py\r\n# sub.py\r\nfrom .other import A as A, B\r\n\r\ndef _private_function() -> None:\r\n   ...\r\n\r\ndef public_function() -> None:\r\n   ...\r\n```\r\n\r\n```py\r\n# __init__.py\r\nfrom .sub import *\r\n```\r\n\r\n**Expected Behavior**\r\n\r\n`__init__.py` exports:\r\n- `A` from `.other` (not `B` because it wasn't re-exported)\r\n- `public_function` from `.sub` (not `_private_function` because it's considered private as it starts with `_`)\r\n- `sub` since this is what PEP 484 mentions in:\r\n  ```\r\n  Just like in normal Python files, submodules automatically become exported attributes of their parent module when imported\r\n  For example, if the spam package has the following directory structure:\r\n\r\n      spam/\r\n          __init__.pyi\r\n          ham.pyi\r\n\r\n   where __init__.pyi contains a line such as from . import ham or from .ham import Ham, then ham is an exported attribute of spam.\r\n  ```\r\n\r\nThis is consistent with what @erictraut [did in Pyright](https://github.com/microsoft/pyright/blame/b7735bb8626ebabd87a6c85c6aee8fae39eb776d/docs/typed-libraries.md#L35).\r\n\r\n**Actual Behavior**\r\n\r\n`__init__.py` only exports `sub`.\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 0.930\r\n","closed_by":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/11856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/11856/timeline","performed_via_github_app":null,"state_reason":"completed"}