{"url":"https://api.github.com/repos/python/mypy/issues/10264","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/10264/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/10264/comments","events_url":"https://api.github.com/repos/python/mypy/issues/10264/events","html_url":"https://github.com/python/mypy/issues/10264","id":844045778,"node_id":"MDU6SXNzdWU4NDQwNDU3Nzg=","number":10264,"title":"Python version check is sensitive to comparison order","user":{"login":"paw-lu","id":30049606,"node_id":"MDQ6VXNlcjMwMDQ5NjA2","avatar_url":"https://avatars.githubusercontent.com/u/30049606?v=4","gravatar_id":"","url":"https://api.github.com/users/paw-lu","html_url":"https://github.com/paw-lu","followers_url":"https://api.github.com/users/paw-lu/followers","following_url":"https://api.github.com/users/paw-lu/following{/other_user}","gists_url":"https://api.github.com/users/paw-lu/gists{/gist_id}","starred_url":"https://api.github.com/users/paw-lu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paw-lu/subscriptions","organizations_url":"https://api.github.com/users/paw-lu/orgs","repos_url":"https://api.github.com/users/paw-lu/repos","events_url":"https://api.github.com/users/paw-lu/events{/privacy}","received_events_url":"https://api.github.com/users/paw-lu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":513232568,"node_id":"MDU6TGFiZWw1MTMyMzI1Njg=","url":"https://api.github.com/repos/python/mypy/labels/priority-2-low","name":"priority-2-low","color":"fffff8","default":false,"description":null},{"id":932016981,"node_id":"MDU6TGFiZWw5MzIwMTY5ODE=","url":"https://api.github.com/repos/python/mypy/labels/good-first-issue","name":"good-first-issue","color":"3dc136","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2021-03-30T04:02:25Z","updated_at":"2021-04-08T18:14:22Z","closed_at":"2021-04-08T18:14:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n  If you're new to mypy and you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form\r\n  instead.\r\n-->\r\n\r\n**Bug Report**\r\n\r\n<!--\r\nNote: If the problem you are reporting is about a specific library function, then the typeshed tracker is better suited\r\nfor this report: https://github.com/python/typeshed/issues\r\n-->\r\n\r\nWhether mypy successfully detects a Python version check is dependent on the order of the comparison.\r\n\r\n**To Reproduce**\r\n\r\n```python\r\n\"\"\"This will not pass on Python 3.8.\"\"\"\r\nimport sys\r\n\r\nif (3, 8) <= sys.version_info:\r\n    pass\r\nelse:\r\n    import invalid_library\r\n\r\n```\r\n\r\n```sh\r\n% mypy type.py --python-version 3.8\r\ntype.py:6: error: Cannot find implementation or library stub for module named 'invalid_library'\r\ntype.py:6: note: See https://mypy.readthedocs.io/en/latest/running_mypy.html#missing-imports\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\n```python\r\n\"\"\"This will pass on Python 3.8.\"\"\"\r\nimport sys\r\n\r\nif sys.version_info >= (3, 8):\r\n    pass\r\nelse:\r\n    import invalid_library\r\n```\r\n\r\n```sh\r\n% mypy type.py --python-version 3.8\r\nSuccess: no issues found in 1 source file\r\n```\r\n\r\n**Expected Behavior**\r\n\r\n<!--\r\n  How did you expect your project to behave?\r\n  It’s fine if you’re not sure your understanding is correct.\r\n  Write down what you thought would happen. If you just expected no errors, you can delete this section.\r\n-->\r\n\r\nI expected mypy to correctly parse the Python version check regardless of the order of the comparison.\r\n\r\n**Actual Behavior**\r\n\r\n<!--\r\n  Did something go wrong?\r\n  Is something broken, or not behaving as you expected?\r\n-->\r\n\r\n`(3, 8) <= sys.version_info` is not correctly detected by mypy, while the logically equivalent `sys.version_info >= (3, 8)` is.\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 0.812\r\n- Mypy command-line flags: `--python-version 3.8`\r\n- Mypy configuration options from `mypy.ini` (and other config files): Empty\r\n- Python version used: 3.8.6\r\n- Operating system and version: macOS 10.15.7\r\n\r\n<!--\r\nYou can freely edit this text, please remove all the lines\r\nyou believe are unnecessary.\r\n-->\r\n","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/10264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/10264/timeline","performed_via_github_app":null,"state_reason":"completed"}