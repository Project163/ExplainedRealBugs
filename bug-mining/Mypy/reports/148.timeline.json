[{"id":6689176176,"node_id":"LE_lADOAGuhRc5KhHPXzwAAAAGOtLpw","url":"https://api.github.com/repos/python/mypy/issues/events/6689176176","actor":{"login":"JSS95","id":52185322,"node_id":"MDQ6VXNlcjUyMTg1MzIy","avatar_url":"https://avatars.githubusercontent.com/u/52185322?v=4","gravatar_id":"","url":"https://api.github.com/users/JSS95","html_url":"https://github.com/JSS95","followers_url":"https://api.github.com/users/JSS95/followers","following_url":"https://api.github.com/users/JSS95/following{/other_user}","gists_url":"https://api.github.com/users/JSS95/gists{/gist_id}","starred_url":"https://api.github.com/users/JSS95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSS95/subscriptions","organizations_url":"https://api.github.com/users/JSS95/orgs","repos_url":"https://api.github.com/users/JSS95/repos","events_url":"https://api.github.com/users/JSS95/events{/privacy}","received_events_url":"https://api.github.com/users/JSS95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-26T23:49:20Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":6689177379,"node_id":"RTE_lADOAGuhRc5KhHPXzwAAAAGOtL8j","url":"https://api.github.com/repos/python/mypy/issues/events/6689177379","actor":{"login":"JSS95","id":52185322,"node_id":"MDQ6VXNlcjUyMTg1MzIy","avatar_url":"https://avatars.githubusercontent.com/u/52185322?v=4","gravatar_id":"","url":"https://api.github.com/users/JSS95","html_url":"https://github.com/JSS95","followers_url":"https://api.github.com/users/JSS95/followers","following_url":"https://api.github.com/users/JSS95/following{/other_user}","gists_url":"https://api.github.com/users/JSS95/gists{/gist_id}","starred_url":"https://api.github.com/users/JSS95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSS95/subscriptions","organizations_url":"https://api.github.com/users/JSS95/orgs","repos_url":"https://api.github.com/users/JSS95/repos","events_url":"https://api.github.com/users/JSS95/events{/privacy}","received_events_url":"https://api.github.com/users/JSS95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-05-26T23:49:51Z","rename":{"from":"(regression: 0.960) Generic[Protocol] fails","to":"(regression: 0.960) Generic[Protocol] fails with dataclass"},"performed_via_github_app":null},{"actor":{"login":"JSS95","id":52185322,"node_id":"MDQ6VXNlcjUyMTg1MzIy","avatar_url":"https://avatars.githubusercontent.com/u/52185322?v=4","gravatar_id":"","url":"https://api.github.com/users/JSS95","html_url":"https://github.com/JSS95","followers_url":"https://api.github.com/users/JSS95/followers","following_url":"https://api.github.com/users/JSS95/following{/other_user}","gists_url":"https://api.github.com/users/JSS95/gists{/gist_id}","starred_url":"https://api.github.com/users/JSS95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSS95/subscriptions","organizations_url":"https://api.github.com/users/JSS95/orgs","repos_url":"https://api.github.com/users/JSS95/repos","events_url":"https://api.github.com/users/JSS95/events{/privacy}","received_events_url":"https://api.github.com/users/JSS95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T23:51:26Z","updated_at":"2022-05-26T23:51:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12871","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12871/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12871/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12871/events","html_url":"https://github.com/python/mypy/issues/12871","id":1249176405,"node_id":"I_kwDOAGuhRc5KdOtV","number":12871,"title":"Error in TypeVar bound Protocol","user":{"login":"abersheeran","id":25364828,"node_id":"MDQ6VXNlcjI1MzY0ODI4","avatar_url":"https://avatars.githubusercontent.com/u/25364828?v=4","gravatar_id":"","url":"https://api.github.com/users/abersheeran","html_url":"https://github.com/abersheeran","followers_url":"https://api.github.com/users/abersheeran/followers","following_url":"https://api.github.com/users/abersheeran/following{/other_user}","gists_url":"https://api.github.com/users/abersheeran/gists{/gist_id}","starred_url":"https://api.github.com/users/abersheeran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abersheeran/subscriptions","organizations_url":"https://api.github.com/users/abersheeran/orgs","repos_url":"https://api.github.com/users/abersheeran/repos","events_url":"https://api.github.com/users/abersheeran/events{/privacy}","received_events_url":"https://api.github.com/users/abersheeran/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-05-26T06:54:03Z","updated_at":"2022-05-27T01:36:08Z","closed_at":"2022-05-27T01:36:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"```python\r\nfrom typing import Protocol, Tuple, Type, TypeVar, Union\r\n\r\n\r\nclass UploadFileInterface(Protocol):\r\n    def write(self, data: bytes) -> None:\r\n        ...\r\n\r\n    async def awrite(self, data: bytes) -> None:\r\n        ...\r\n\r\n    def seek(self, offset: int) -> None:\r\n        ...\r\n\r\n    async def aseek(self, offset: int) -> None:\r\n        ...\r\n\r\n\r\nclass UploadFile:\r\n    def write(self, data: bytes) -> None:\r\n        ...\r\n\r\n    async def awrite(self, data: bytes) -> None:\r\n        ...\r\n\r\n    def seek(self, offset: int) -> None:\r\n        ...\r\n\r\n    async def aseek(self, offset: int) -> None:\r\n        ...\r\n\r\n\r\n_UploadFile = TypeVar(\"_UploadFile\", bound=UploadFileInterface)\r\n\r\n\r\ndef parse_multipart_form_data(\r\n    file_factory: Type[_UploadFile] = UploadFile,\r\n) -> Tuple[str, Union[str, _UploadFile]]:\r\n    ...\r\n```\r\n\r\nUse `mypy .\\t.py` got a error:\r\n```\r\nerror: Incompatible default for argument \"file_factory\" (default has type \"Type[UploadFile]\", argument has type \"Type[_UploadFile]\")\r\n```\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 0.960\r\n- Mypy command-line flags: no flags\r\n- Mypy configuration options from `mypy.ini` (and other config files): no config\r\n- Python version used: CPython 3.10.4\r\n- Operating system and version: Windows10\r\n\r\n<!--\r\nYou can freely edit this text, please remove all the lines\r\nyou believe are unnecessary.\r\n-->\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12871/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12871/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T04:36:53Z","updated_at":"2022-05-27T04:36:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12807","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12807/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12807/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12807/events","html_url":"https://github.com/python/mypy/issues/12807","id":1239663460,"node_id":"I_kwDOAGuhRc5J48Nk","number":12807,"title":"Release 0.960 planning","user":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3542336145,"node_id":"LA_kwDOAGuhRc7TI8KR","url":"https://api.github.com/repos/python/mypy/labels/meta","name":"meta","color":"D62A71","default":false,"description":"Issues tracking a broad area of work"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2022-05-18T09:12:57Z","updated_at":"2022-06-06T17:09:57Z","closed_at":"2022-06-06T17:09:57Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm planning to make a 0.960 release around May 24 (tentative timeline).\r\n\r\nPlease post here any issues you'd like to see fixed in the release, or PRs you'd like to have merged. I've already cut the release branch, but we can still cherry-pick low-risk features and bug fixes until May 20. After May 20 only critical bug fixes and documentation updates should be cherry-picked.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12807/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1139280837","html_url":"https://github.com/python/mypy/issues/12876#issuecomment-1139280837","issue_url":"https://api.github.com/repos/python/mypy/issues/12876","id":1139280837,"node_id":"IC_kwDOAGuhRc5D6AvF","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T05:08:00Z","updated_at":"2022-05-27T05:08:11Z","body":"Thanks for opening a new issue with repro! mypy_primer bisects this to #12762","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1139280837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6690400832,"node_id":"LE_lADOAGuhRc5KhHPXzwAAAAGOx2pA","url":"https://api.github.com/repos/python/mypy/issues/events/6690400832","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-27T06:35:46Z","label":{"name":"topic-dataclasses","color":"8E9730"},"performed_via_github_app":null},{"id":6702207791,"node_id":"REFE_lADOAGuhRc5KhHPXzwAAAAGPe5Mv","url":"https://api.github.com/repos/python/mypy/issues/events/6702207791","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9e9863a8f9afe94667d13329f2bfebed16a5c4ce","commit_url":"https://api.github.com/repos/python/mypy/commits/9e9863a8f9afe94667d13329f2bfebed16a5c4ce","created_at":"2022-05-30T11:20:45Z","performed_via_github_app":null},{"actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-30T11:21:02Z","updated_at":"2022-05-30T11:21:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12908","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12908/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12908/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12908/events","html_url":"https://github.com/python/mypy/pull/12908","id":1252592380,"node_id":"PR_kwDOAGuhRc44rQWZ","number":12908,"title":"Run dataclass plugin before checking type var bounds","user":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-05-30T11:21:02Z","updated_at":"2022-05-30T12:08:02Z","closed_at":"2022-05-30T12:08:02Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/12908","html_url":"https://github.com/python/mypy/pull/12908","diff_url":"https://github.com/python/mypy/pull/12908.diff","patch_url":"https://github.com/python/mypy/pull/12908.patch","merged_at":"2022-05-30T12:08:01Z"},"body":"The plugin may add attributes that are needed to perform the bound\r\ncheck.\r\n\r\nFixes #12876.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12908/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6702521998,"node_id":"CE_lADOAGuhRc5KhHPXzwAAAAGPgF6O","url":"https://api.github.com/repos/python/mypy/issues/events/6702521998","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-05-30T12:08:01Z","state_reason":null,"performed_via_github_app":null},{"id":6702522184,"node_id":"REFE_lADOAGuhRc5KhHPXzwAAAAGPgF9I","url":"https://api.github.com/repos/python/mypy/issues/events/6702522184","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b07018cd024cc9d15d7fc977148c2adb5c3e5527","commit_url":"https://api.github.com/repos/python/mypy/commits/b07018cd024cc9d15d7fc977148c2adb5c3e5527","created_at":"2022-05-30T12:08:03Z","performed_via_github_app":null},{"actor":{"login":"pranavrajpal","id":78008260,"node_id":"MDQ6VXNlcjc4MDA4MjYw","avatar_url":"https://avatars.githubusercontent.com/u/78008260?v=4","gravatar_id":"","url":"https://api.github.com/users/pranavrajpal","html_url":"https://github.com/pranavrajpal","followers_url":"https://api.github.com/users/pranavrajpal/followers","following_url":"https://api.github.com/users/pranavrajpal/following{/other_user}","gists_url":"https://api.github.com/users/pranavrajpal/gists{/gist_id}","starred_url":"https://api.github.com/users/pranavrajpal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pranavrajpal/subscriptions","organizations_url":"https://api.github.com/users/pranavrajpal/orgs","repos_url":"https://api.github.com/users/pranavrajpal/repos","events_url":"https://api.github.com/users/pranavrajpal/events{/privacy}","received_events_url":"https://api.github.com/users/pranavrajpal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T01:54:25Z","updated_at":"2022-05-31T01:54:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12911","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12911/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12911/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12911/events","html_url":"https://github.com/python/mypy/issues/12911","id":1253243451,"node_id":"I_kwDOAGuhRc5Ksvo7","number":12911,"title":"Refactor mypy to use query-based architecture","user":{"login":"pranavrajpal","id":78008260,"node_id":"MDQ6VXNlcjc4MDA4MjYw","avatar_url":"https://avatars.githubusercontent.com/u/78008260?v=4","gravatar_id":"","url":"https://api.github.com/users/pranavrajpal","html_url":"https://github.com/pranavrajpal","followers_url":"https://api.github.com/users/pranavrajpal/followers","following_url":"https://api.github.com/users/pranavrajpal/following{/other_user}","gists_url":"https://api.github.com/users/pranavrajpal/gists{/gist_id}","starred_url":"https://api.github.com/users/pranavrajpal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pranavrajpal/subscriptions","organizations_url":"https://api.github.com/users/pranavrajpal/orgs","repos_url":"https://api.github.com/users/pranavrajpal/repos","events_url":"https://api.github.com/users/pranavrajpal/events{/privacy}","received_events_url":"https://api.github.com/users/pranavrajpal/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488358,"node_id":"MDU6TGFiZWwyMTQ4ODM1OA==","url":"https://api.github.com/repos/python/mypy/labels/feature","name":"feature","color":"84b6eb","default":false,"description":null},{"id":27512117,"node_id":"MDU6TGFiZWwyNzUxMjExNw==","url":"https://api.github.com/repos/python/mypy/labels/refactoring","name":"refactoring","color":"aaeeee","default":false,"description":"Changing mypy's internals"},{"id":610718653,"node_id":"MDU6TGFiZWw2MTA3MTg2NTM=","url":"https://api.github.com/repos/python/mypy/labels/topic-developer","name":"topic-developer","color":"d4c5f9","default":false,"description":"Issues relevant to mypy developers"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-05-31T01:54:25Z","updated_at":"2022-06-04T06:24:07Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Feature**\r\n\r\nI think mypy would benefit from refactoring to use a query-based architecture similar to the one used by [Rust's compiler](https://rustc-dev-guide.rust-lang.org/query.html) or [rust-analyzer](https://github.com/rust-lang/rust-analyzer/blob/master/docs/dev/architecture.md) because it would:\r\n- make some relatively common types of bugs nearly impossible\r\n- make mypy internals easier to understand\r\n- allow us to implement certain performance optimizations much more easily\r\n\r\n**Pitch**\r\n\r\nThe general idea behind a query-based architecture is that, instead of organizing code based on which pass of the type checker it runs during, you would organize your code into pure functions that each let you query information about the inputted code (such as by computing the AST given the text of a file, or getting the type of a given symbol, or type checking a function to get the resulting errors). You'd also have a few non-pure input queries that you can control that represent the inputs to the type checker (such as the files to type check or the configuration options)\r\n\r\nAfter that, there would be separate code for executing these queries which would be responsible for:\r\n- Executing your main query and all other queries it makes\r\n- Keeping track of what other queries each query depends on (i.e. what other queries it makes while running)\r\n- Caching the output of any queries as much or as little as it wants (depending on whether caching the result is worth it for that query)\r\n- (Optionally) saving those caches to a file and selectively invalidating caches on the next run based on new inputs to get incremental type checking\r\n\r\nUsing pure functions for queries is what allows you to get most of the benefits of this system because pure functions, by definition, always return the same result for the same arguments no matter how many times they're called. That means that the query runner is free to reorder and cache queries as much as possible, which has a lot of benefits (see below).\r\n\r\nOne other restriction that's necessary to make this work is that queries can't have cyclic dependencies because that would make it impossible to determine the dependencies of any given query. That's not really a new restriction, because a cyclic dependency essentially means infinite recursion, but it somewhat limits what we can do with this.\r\n\r\n## Benefits of Query Architecture\r\n\r\n### Code readability\r\n\r\nBecause, as mentioned earlier, queries can be run in any order and as many times as necessary, the actual logic doesn't need to concern itself with specifying either of those things. That means that, instead of having one large class that runs all the code for a single pass, updating all the results as it goes, you would have separate functions with clearly defined inputs and outputs that compute different information as a part of that pass.\r\n\r\nSince we're organizing code just as functions that each compute some information about the passed in code, this gives you the opportunity to place code from different passes together if that makes it easier to understand when organizing the code base, instead of needing to organize based on what pass it happens to run during. Regardless of how you organize the code, the query runner will automatically figure out what order to run any queries in.\r\n\r\n### Correctness\r\n\r\nThere is a lot of code in mypy that has subtle dependencies on other parts of the codebase being run, which in practice leads to hard to track down bugs.\r\n\r\nThe most obvious example of that is the strategy we use in semantic analysis of deferring nodes whenever we don't have enough information about that node. Deferring nodes means that different parts of semanal assume that the analysis needed for progress to continue will be run in some other part of semanal. When those assumptions turn out to be wrong, that usually leads to a \"Must not defer during final iteration\" error or some other error about reaching the maximum iteration count.\r\n\r\nWith a query-based architecture, you would completely avoid that problem. Instead of checking if the relevant information is there and deferring if not, you would call a function to directly query that information, and the query runner would run whatever queries are necessary to compute that information, even if that meant processing code that you haven't reached yet.\r\n\r\nThat problem gets worse when you have other subtle dependencies on the order in which different functions are run. An incomplete list of examples of this in mypy:\r\n- The dataclass plugin makes assumptions about what references would be bound when it runs (#12685, #12527, #12876)\r\n- The attrs plugin assumes base classes will get processed before their subclasses (mypyc/mypyc#883)\r\n- typeops.py assumes all of its functions will be run [after semantic analysis](https://github.com/python/mypy/blob/2004ae023b9d3628d9f09886cbbc20868aee8554/mypy/typeops.py#L4-L5)\r\n\r\nAn added correctness-related benefit of a query-based system is that, as I mentioned earlier, supporting incremental checking requires no changes to the core logic of type checking, so it would end up avoiding all of the incremental-related issues and discrepancies between non-incremental and the different types of incremental checking we support. Judging from comments like [this](https://github.com/python/mypy/blob/2004ae023b9d3628d9f09886cbbc20868aee8554/mypy/nodes.py#L2936-L2942) and [this](https://github.com/python/mypy/blob/2004ae023b9d3628d9f09886cbbc20868aee8554/mypy/build.py#L2678-L2683), fine-grained incremental checking is rather tricky to get right, so a query-based system would be helpful there.\r\n\r\n### Performance\r\n\r\nThere's been some recent effort to improve mypy's performance both by caching more intermediate results (#12707, #12659, #12526) and by avoiding doing unnecessary work (#10922, #12854).\r\n\r\nA benefit of a query-based system is that both of those are built in to the system. Since all the core logic is written using pure functions, caching any query can be done without affecting the correctness of the code it's running.\r\n\r\nAdditionally, avoiding doing unnecessary work is also straightforward because queries are computed on demand. Instead of having a pass that computes all the information that you might need in later passes (like we do currently), and finding specific opportunities to avoid computing something, you would just write a function that computes what you want when it's called. That means that, if you never call that function, it never gets computed, and you avoid that work completely.\r\n\r\n## Unresolved questions\r\n\r\nI'm not really sure what the best place to implement a proof of concept for this query-based architecture. While I'm hoping that we eventually use it for all of mypy, I don't want to rewrite the entire code base at once, so finding a decent place to try this out and see how it looks in practice seems useful.\r\n\r\nIdeally, whatever code that we use for a proof of concept would:\r\n- be something that takes advantage of the benefits of a query-based architecture (either by letting us avoid unnecessary work, simplify the existing code significantly, or something else)\r\n- not be dependent on too much other code in mypy (so we can avoid rewriting most of the code base at once)\r\n- not be a helper function used by plugins (in order to avoid dealing with breaking plugins)\r\n- be useful on its own (in case we don't continue past the proof of concept)\r\n\r\nI don't know what parts of mypy fit that description or even part of that description, so does anyone else have any ideas for that?","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12911/reactions","total_count":8,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":4},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12911/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6717942009,"node_id":"REFE_lADOAGuhRc5KhHPXzwAAAAGQa6j5","url":"https://api.github.com/repos/python/mypy/issues/events/6717942009","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"154ac75150c9339b081218da08588ea01e9b9bc6","commit_url":"https://api.github.com/repos/python/mypy/commits/154ac75150c9339b081218da08588ea01e9b9bc6","created_at":"2022-06-01T11:17:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1438684950","html_url":"https://github.com/python/mypy/issues/12876#issuecomment-1438684950","issue_url":"https://api.github.com/repos/python/mypy/issues/12876","id":1438684950,"node_id":"IC_kwDOAGuhRc5VwJcW","user":{"login":"JSS95","id":52185322,"node_id":"MDQ6VXNlcjUyMTg1MzIy","avatar_url":"https://avatars.githubusercontent.com/u/52185322?v=4","gravatar_id":"","url":"https://api.github.com/users/JSS95","html_url":"https://github.com/JSS95","followers_url":"https://api.github.com/users/JSS95/followers","following_url":"https://api.github.com/users/JSS95/following{/other_user}","gists_url":"https://api.github.com/users/JSS95/gists{/gist_id}","starred_url":"https://api.github.com/users/JSS95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSS95/subscriptions","organizations_url":"https://api.github.com/users/JSS95/orgs","repos_url":"https://api.github.com/users/JSS95/repos","events_url":"https://api.github.com/users/JSS95/events{/privacy}","received_events_url":"https://api.github.com/users/JSS95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T15:33:58Z","updated_at":"2023-02-21T15:33:58Z","body":"@JukkaL\r\n\r\nHello. I am encountering the same issue again.\r\nUntil mypy v0.982 the `Generic[Protocol]` worked fine, but from v0.990 to the latest v1.0.1 the test fails with the same error message.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1438684950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JSS95","id":52185322,"node_id":"MDQ6VXNlcjUyMTg1MzIy","avatar_url":"https://avatars.githubusercontent.com/u/52185322?v=4","gravatar_id":"","url":"https://api.github.com/users/JSS95","html_url":"https://github.com/JSS95","followers_url":"https://api.github.com/users/JSS95/followers","following_url":"https://api.github.com/users/JSS95/following{/other_user}","gists_url":"https://api.github.com/users/JSS95/gists{/gist_id}","starred_url":"https://api.github.com/users/JSS95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSS95/subscriptions","organizations_url":"https://api.github.com/users/JSS95/orgs","repos_url":"https://api.github.com/users/JSS95/repos","events_url":"https://api.github.com/users/JSS95/events{/privacy}","received_events_url":"https://api.github.com/users/JSS95/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8572330225,"node_id":"MEE_lADOAGuhRc5KhHPXzwAAAAH-82Dx","url":"https://api.github.com/repos/python/mypy/issues/events/8572330225","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-21T15:33:58Z","performed_via_github_app":null},{"id":8572330240,"node_id":"SE_lADOAGuhRc5KhHPXzwAAAAH-82EA","url":"https://api.github.com/repos/python/mypy/issues/events/8572330240","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-21T15:33:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1438893518","html_url":"https://github.com/python/mypy/issues/12876#issuecomment-1438893518","issue_url":"https://api.github.com/repos/python/mypy/issues/12876","id":1438893518,"node_id":"IC_kwDOAGuhRc5Vw8XO","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T18:02:02Z","updated_at":"2023-02-21T18:02:02Z","body":"Add ClassVar to the Protocol, I think","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1438893518/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1439277372","html_url":"https://github.com/python/mypy/issues/12876#issuecomment-1439277372","issue_url":"https://api.github.com/repos/python/mypy/issues/12876","id":1439277372,"node_id":"IC_kwDOAGuhRc5VyaE8","user":{"login":"JSS95","id":52185322,"node_id":"MDQ6VXNlcjUyMTg1MzIy","avatar_url":"https://avatars.githubusercontent.com/u/52185322?v=4","gravatar_id":"","url":"https://api.github.com/users/JSS95","html_url":"https://github.com/JSS95","followers_url":"https://api.github.com/users/JSS95/followers","following_url":"https://api.github.com/users/JSS95/following{/other_user}","gists_url":"https://api.github.com/users/JSS95/gists{/gist_id}","starred_url":"https://api.github.com/users/JSS95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSS95/subscriptions","organizations_url":"https://api.github.com/users/JSS95/orgs","repos_url":"https://api.github.com/users/JSS95/repos","events_url":"https://api.github.com/users/JSS95/events{/privacy}","received_events_url":"https://api.github.com/users/JSS95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T00:41:44Z","updated_at":"2023-02-22T00:41:44Z","body":"@hauntsaninja Thanks! It worked.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1439277372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JSS95","id":52185322,"node_id":"MDQ6VXNlcjUyMTg1MzIy","avatar_url":"https://avatars.githubusercontent.com/u/52185322?v=4","gravatar_id":"","url":"https://api.github.com/users/JSS95","html_url":"https://github.com/JSS95","followers_url":"https://api.github.com/users/JSS95/followers","following_url":"https://api.github.com/users/JSS95/following{/other_user}","gists_url":"https://api.github.com/users/JSS95/gists{/gist_id}","starred_url":"https://api.github.com/users/JSS95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JSS95/subscriptions","organizations_url":"https://api.github.com/users/JSS95/orgs","repos_url":"https://api.github.com/users/JSS95/repos","events_url":"https://api.github.com/users/JSS95/events{/privacy}","received_events_url":"https://api.github.com/users/JSS95/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8576085145,"node_id":"MEE_lADOAGuhRc5KhHPXzwAAAAH_LKyZ","url":"https://api.github.com/repos/python/mypy/issues/events/8576085145","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-22T00:41:44Z","performed_via_github_app":null},{"id":8576085159,"node_id":"SE_lADOAGuhRc5KhHPXzwAAAAH_LKyn","url":"https://api.github.com/repos/python/mypy/issues/events/8576085159","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-22T00:41:44Z","performed_via_github_app":null}]