{"url":"https://api.github.com/repos/python/mypy/issues/12344","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12344/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12344/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12344/events","html_url":"https://github.com/python/mypy/issues/12344","id":1167691121,"node_id":"I_kwDOAGuhRc5FmY1x","number":12344,"title":"Protocols with self break super","user":{"login":"DevilXD","id":4180725,"node_id":"MDQ6VXNlcjQxODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/4180725?v=4","gravatar_id":"","url":"https://api.github.com/users/DevilXD","html_url":"https://github.com/DevilXD","followers_url":"https://api.github.com/users/DevilXD/followers","following_url":"https://api.github.com/users/DevilXD/following{/other_user}","gists_url":"https://api.github.com/users/DevilXD/gists{/gist_id}","starred_url":"https://api.github.com/users/DevilXD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DevilXD/subscriptions","organizations_url":"https://api.github.com/users/DevilXD/orgs","repos_url":"https://api.github.com/users/DevilXD/repos","events_url":"https://api.github.com/users/DevilXD/events{/privacy}","received_events_url":"https://api.github.com/users/DevilXD/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":681535222,"node_id":"MDU6TGFiZWw2ODE1MzUyMjI=","url":"https://api.github.com/repos/python/mypy/labels/topic-protocols","name":"topic-protocols","color":"0052cc","default":false,"description":null},{"id":3945357842,"node_id":"LA_kwDOAGuhRc7rKWIS","url":"https://api.github.com/repos/python/mypy/labels/topic-self-types","name":"topic-self-types","color":"d4c5f9","default":false,"description":"Types for self"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-13T20:54:51Z","updated_at":"2022-11-16T20:20:31Z","closed_at":"2022-11-16T20:20:31Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Bug Report**\r\n\r\nSometimes there's a need to use a `typing.Protocol` to specify `self` typing for cases like mixin classes, where the methods aren't there at class definition, but will be there at runtime, once the mixin is inherited from. This generally works fine, except it breaks in one silly case, a short repro of which is available below.\r\n\r\nIn short, it looks like `super` doesn't like protocols as it's second argument, which isn't even explicitly passed here.\r\n\r\n**To Reproduce**\r\n\r\n```py\r\nfrom typing import Protocol\r\n\r\nclass MixinProt(Protocol):\r\n    def func(self) -> None:\r\n        ...\r\n\r\nclass Mixin:\r\n    def func(self: MixinProt) -> None:\r\n        return super().func()\r\n```\r\n\r\n**Expected Behavior**\r\n\r\nNo error, duh.\r\n\r\n**Actual Behavior**\r\n\r\nFrom the very last line of the code above:\r\n```\r\nArgument 2 for \"super\" not an instance of argument 1\r\n```\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 0.931\r\n- Mypy command-line flags: none\r\n- Mypy configuration options from `mypy.ini` (and other config files): none\r\n- Python version used: 3.8.10\r\n- Operating system and version: Win7x64","closed_by":{"login":"ilevkivskyi","id":12005495,"node_id":"MDQ6VXNlcjEyMDA1NDk1","avatar_url":"https://avatars.githubusercontent.com/u/12005495?v=4","gravatar_id":"","url":"https://api.github.com/users/ilevkivskyi","html_url":"https://github.com/ilevkivskyi","followers_url":"https://api.github.com/users/ilevkivskyi/followers","following_url":"https://api.github.com/users/ilevkivskyi/following{/other_user}","gists_url":"https://api.github.com/users/ilevkivskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/ilevkivskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilevkivskyi/subscriptions","organizations_url":"https://api.github.com/users/ilevkivskyi/orgs","repos_url":"https://api.github.com/users/ilevkivskyi/repos","events_url":"https://api.github.com/users/ilevkivskyi/events{/privacy}","received_events_url":"https://api.github.com/users/ilevkivskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12344/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12344/timeline","performed_via_github_app":null,"state_reason":"completed"}