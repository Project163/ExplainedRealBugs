{"url":"https://api.github.com/repos/python/mypy/issues/12868","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12868/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12868/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12868/events","html_url":"https://github.com/python/mypy/issues/12868","id":1248185591,"node_id":"I_kwDOAGuhRc5KZcz3","number":12868,"title":"AssertionError on version 0.960","user":{"login":"Apakottur","id":54272821,"node_id":"MDQ6VXNlcjU0MjcyODIx","avatar_url":"https://avatars.githubusercontent.com/u/54272821?v=4","gravatar_id":"","url":"https://api.github.com/users/Apakottur","html_url":"https://github.com/Apakottur","followers_url":"https://api.github.com/users/Apakottur/followers","following_url":"https://api.github.com/users/Apakottur/following{/other_user}","gists_url":"https://api.github.com/users/Apakottur/gists{/gist_id}","starred_url":"https://api.github.com/users/Apakottur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Apakottur/subscriptions","organizations_url":"https://api.github.com/users/Apakottur/orgs","repos_url":"https://api.github.com/users/Apakottur/repos","events_url":"https://api.github.com/users/Apakottur/events{/privacy}","received_events_url":"https://api.github.com/users/Apakottur/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":379446833,"node_id":"MDU6TGFiZWwzNzk0NDY4MzM=","url":"https://api.github.com/repos/python/mypy/labels/crash","name":"crash","color":"b60205","default":false,"description":null},{"id":852620211,"node_id":"MDU6TGFiZWw4NTI2MjAyMTE=","url":"https://api.github.com/repos/python/mypy/labels/topic-attrs","name":"topic-attrs","color":"91f5f7","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":6,"created_at":"2022-05-25T14:28:20Z","updated_at":"2022-05-27T11:51:25Z","closed_at":"2022-05-26T13:43:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Bug Report**\r\n\r\nWe are using the [ddtrace](https://github.com/DataDog/dd-trace-py) Python package.\r\nConsider the following file:\r\n```python\r\n# test.py\r\nimport ddtrace\r\n```\r\n\r\nRunning `mypy test.py` passes without issues on version `0.950` but when run on version `0.960` the following is printed:\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \".../bin/mypy\", line 8, in <module>\r\n    sys.exit(console_entry())\r\n  File \".../python3.10/site-packages/mypy/__main__.py\", line 12, in console_entry\r\n    main(None, sys.stdout, sys.stderr)\r\n  File \"mypy/main.py\", line 96, in main\r\n  File \"mypy/main.py\", line 173, in run_build\r\n  File \"mypy/build.py\", line 154, in build\r\n  File \"mypy/build.py\", line 230, in _build\r\n  File \"mypy/build.py\", line 2729, in dispatch\r\n  File \"mypy/build.py\", line 3087, in process_graph\r\n  File \"mypy/build.py\", line 3179, in process_stale_scc\r\n  File \"mypy/semanal_main.py\", line 88, in semantic_analysis_for_scc\r\n  File \"mypy/semanal_main.py\", line 414, in apply_class_plugin_hooks\r\n  File \"mypy/semanal_main.py\", line 434, in apply_hooks_to_class\r\n  File \"mypy/plugins/attrs.py\", line 309, in attr_class_maker_callback\r\n  File \"mypy/plugins/attrs.py\", line 372, in _analyze_class\r\n  File \"mypy/plugins/attrs.py\", line 498, in _attributes_from_assignment\r\n  File \"mypy/plugins/attrs.py\", line 594, in _attribute_from_attrib_maker\r\n  File \"mypy/semanal.py\", line 5450, in anal_type\r\n  File \"mypy/types.py\", line 765, in accept\r\n  File \"mypy/typeanal.py\", line 172, in visit_unbound_type\r\n  File \"mypy/typeanal.py\", line 263, in visit_unbound_type_nonoptional\r\n  File \"mypy/typeanal.py\", line 1168, in anal_array\r\n  File \"mypy/typeanal.py\", line 1177, in anal_type\r\n  File \"mypy/types.py\", line 765, in accept\r\n  File \"mypy/typeanal.py\", line 172, in visit_unbound_type\r\n  File \"mypy/typeanal.py\", line 180, in visit_unbound_type_nonoptional\r\n  File \"mypy/semanal.py\", line 4563, in lookup_qualified\r\n  File \"mypy/semanal.py\", line 4458, in lookup\r\n  File \"mypy/semanal.py\", line 4508, in is_active_symbol_in_class_body\r\nAssertionError\r\n```\r\n\r\nI tried using the `--pdb` and `--tb` flags to get the traceback, or see which part of the library is causing this but was unable to do so.\r\nI tried clearing the mypy cache, which didn't help as well.\r\n\r\nIs this an issue with mypy, the library or both?\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 0.960\r\n- Python version used: 3.10\r\n- Operating system and version: Ubuntu 22.04\r\n","closed_by":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12868/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12868/timeline","performed_via_github_app":null,"state_reason":"completed"}