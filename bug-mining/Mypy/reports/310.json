{"url":"https://api.github.com/repos/python/mypy/issues/15041","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/15041/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/15041/comments","events_url":"https://api.github.com/repos/python/mypy/issues/15041/events","html_url":"https://github.com/python/mypy/issues/15041","id":1663943508,"node_id":"I_kwDOAGuhRc5jLcNU","number":15041,"title":"Signature incompatible with supertype when using overload since updating from 1.1.1 to 1.2.0","user":{"login":"erzoe","id":61154199,"node_id":"MDQ6VXNlcjYxMTU0MTk5","avatar_url":"https://avatars.githubusercontent.com/u/61154199?v=4","gravatar_id":"","url":"https://api.github.com/users/erzoe","html_url":"https://github.com/erzoe","followers_url":"https://api.github.com/users/erzoe/followers","following_url":"https://api.github.com/users/erzoe/following{/other_user}","gists_url":"https://api.github.com/users/erzoe/gists{/gist_id}","starred_url":"https://api.github.com/users/erzoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erzoe/subscriptions","organizations_url":"https://api.github.com/users/erzoe/orgs","repos_url":"https://api.github.com/users/erzoe/repos","events_url":"https://api.github.com/users/erzoe/events{/privacy}","received_events_url":"https://api.github.com/users/erzoe/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3945137363,"node_id":"LA_kwDOAGuhRc7rJgTT","url":"https://api.github.com/repos/python/mypy/labels/topic-inheritance","name":"topic-inheritance","color":"63CF11","default":false,"description":"Inheritance and incompatible overrides"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-12T06:46:55Z","updated_at":"2023-04-18T17:51:06Z","closed_at":"2023-04-18T17:51:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Bug Report**\r\n\r\nSince updating from 1.1.1 to 1.2.0 the following code does not pass anymore.\r\n\r\nReading the [change log](https://mypy-lang.blogspot.com/2023/04/mypy-12-released.html) I am assuming this might be related to https://github.com/python/mypy/pull/14882.\r\n\r\n\r\n**To Reproduce**\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n\r\nimport typing\r\nif typing.TYPE_CHECKING:\r\n\tfrom typing_extensions import Self\r\n\r\nT_co = typing.TypeVar('T_co', covariant=True)\r\n\r\n\r\nclass Config(typing.Generic[T_co]):\r\n\r\n\tdef __init__(self, value: T_co) -> None:\r\n\t\tself.value = value\r\n\r\n\t@typing.overload\r\n\tdef __get__(self, instance: None, owner: typing.Any = None) -> 'Self':\r\n\t\tpass\r\n\r\n\t@typing.overload\r\n\tdef __get__(self, instance: typing.Any, owner: typing.Any = None) -> T_co:\r\n\t\tpass\r\n\r\n\tdef __get__(self, instance: typing.Any, owner: typing.Any = None) -> 'T_co|Self':\r\n\t\tif instance is None:\r\n\t\t\treturn self\r\n\r\n\t\treturn self.value\r\n\r\nclass MultiConfig(Config[T_co]):\r\n\r\n\tdef __init__(self, val: T_co) -> None:\r\n\t\tsuper().__init__(val)\r\n\t\tself.values: 'dict[object, T_co]' = {}\r\n\r\n\t@typing.overload\r\n\tdef __get__(self, instance: None, owner: typing.Any = None) -> 'Self':\r\n\t\tpass\r\n\r\n\t@typing.overload\r\n\tdef __get__(self, instance: typing.Any, owner: typing.Any = None) -> T_co:\r\n\t\tpass\r\n\r\n\tdef __get__(self, instance: typing.Any, owner: typing.Any = None) -> 'T_co|Self':\r\n\t\tif instance is None:\r\n\t\t\treturn self\r\n\r\n\t\treturn self.values.get(instance.config_id, self.value)\r\n```\r\n\r\n**Expected Behavior**\r\n\r\nThis code should pass, as it did in 1.1.1.\r\n\r\n\r\n**Actual Behavior**\r\n\r\n```\r\n$ mypy --strict mwe.py\r\nmwe.py:35: error: Signature of \"__get__\" incompatible with supertype \"Config\"  [override]\r\nmwe.py:35: note:      Superclass:\r\nmwe.py:35: note:          @overload\r\nmwe.py:35: note:          def __get__(self, instance: Any, owner: Any = ...) -> T_co\r\nmwe.py:35: note:      Subclass:\r\nmwe.py:35: note:          @overload\r\nmwe.py:35: note:          def __get__(self, instance: None, owner: Any = ...) -> MultiConfig[T_co]\r\nmwe.py:35: note:          @overload\r\nmwe.py:35: note:          def __get__(self, instance: Any, owner: Any = ...) -> T_co\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 1.2.0\r\n- Mypy command-line flags: `--strict` (but it does not make a difference)\r\n- Mypy configuration options from `mypy.ini` (and other config files): none\r\n- Python version used: Python 3.10.10","closed_by":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/15041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/15041/timeline","performed_via_github_app":null,"state_reason":"completed"}