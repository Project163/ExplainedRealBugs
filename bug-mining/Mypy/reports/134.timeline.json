[{"id":6511865401,"node_id":"LE_lADOAGuhRc5InAtBzwAAAAGEIy45","url":"https://api.github.com/repos/python/mypy/issues/events/6511865401","actor":{"login":"NeilGirdhar","id":730137,"node_id":"MDQ6VXNlcjczMDEzNw==","avatar_url":"https://avatars.githubusercontent.com/u/730137?v=4","gravatar_id":"","url":"https://api.github.com/users/NeilGirdhar","html_url":"https://github.com/NeilGirdhar","followers_url":"https://api.github.com/users/NeilGirdhar/followers","following_url":"https://api.github.com/users/NeilGirdhar/following{/other_user}","gists_url":"https://api.github.com/users/NeilGirdhar/gists{/gist_id}","starred_url":"https://api.github.com/users/NeilGirdhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NeilGirdhar/subscriptions","organizations_url":"https://api.github.com/users/NeilGirdhar/orgs","repos_url":"https://api.github.com/users/NeilGirdhar/repos","events_url":"https://api.github.com/users/NeilGirdhar/events{/privacy}","received_events_url":"https://api.github.com/users/NeilGirdhar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-28T04:35:03Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":6511950511,"node_id":"UNLE_lADOAGuhRc5InAtBzwAAAAGEJHqv","url":"https://api.github.com/repos/python/mypy/issues/events/6511950511","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2022-04-28T04:58:50Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":6511950514,"node_id":"LE_lADOAGuhRc5InAtBzwAAAAGEJHqy","url":"https://api.github.com/repos/python/mypy/issues/events/6511950514","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-28T04:58:50Z","label":{"name":"crash","color":"b60205"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111757197","html_url":"https://github.com/python/mypy/issues/12685#issuecomment-1111757197","issue_url":"https://api.github.com/repos/python/mypy/issues/12685","id":1111757197,"node_id":"IC_kwDOAGuhRc5CRBGN","user":{"login":"NeilGirdhar","id":730137,"node_id":"MDQ6VXNlcjczMDEzNw==","avatar_url":"https://avatars.githubusercontent.com/u/730137?v=4","gravatar_id":"","url":"https://api.github.com/users/NeilGirdhar","html_url":"https://github.com/NeilGirdhar","followers_url":"https://api.github.com/users/NeilGirdhar/followers","following_url":"https://api.github.com/users/NeilGirdhar/following{/other_user}","gists_url":"https://api.github.com/users/NeilGirdhar/gists{/gist_id}","starred_url":"https://api.github.com/users/NeilGirdhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NeilGirdhar/subscriptions","organizations_url":"https://api.github.com/users/NeilGirdhar/orgs","repos_url":"https://api.github.com/users/NeilGirdhar/repos","events_url":"https://api.github.com/users/NeilGirdhar/events{/privacy}","received_events_url":"https://api.github.com/users/NeilGirdhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T05:20:37Z","updated_at":"2022-04-28T05:20:37Z","body":"I briefly tried to make an MWE, but was unsuccessful.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111757197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"NeilGirdhar","id":730137,"node_id":"MDQ6VXNlcjczMDEzNw==","avatar_url":"https://avatars.githubusercontent.com/u/730137?v=4","gravatar_id":"","url":"https://api.github.com/users/NeilGirdhar","html_url":"https://github.com/NeilGirdhar","followers_url":"https://api.github.com/users/NeilGirdhar/followers","following_url":"https://api.github.com/users/NeilGirdhar/following{/other_user}","gists_url":"https://api.github.com/users/NeilGirdhar/gists{/gist_id}","starred_url":"https://api.github.com/users/NeilGirdhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NeilGirdhar/subscriptions","organizations_url":"https://api.github.com/users/NeilGirdhar/orgs","repos_url":"https://api.github.com/users/NeilGirdhar/repos","events_url":"https://api.github.com/users/NeilGirdhar/events{/privacy}","received_events_url":"https://api.github.com/users/NeilGirdhar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111769324","html_url":"https://github.com/python/mypy/issues/12685#issuecomment-1111769324","issue_url":"https://api.github.com/repos/python/mypy/issues/12685","id":1111769324,"node_id":"IC_kwDOAGuhRc5CREDs","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T05:39:53Z","updated_at":"2022-04-28T05:39:53Z","body":"Looks like this is a regression between 0.942 and 0.950","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111769324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111778842","html_url":"https://github.com/python/mypy/issues/12685#issuecomment-1111778842","issue_url":"https://api.github.com/repos/python/mypy/issues/12685","id":1111778842,"node_id":"IC_kwDOAGuhRc5CRGYa","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T05:59:04Z","updated_at":"2022-04-28T05:59:04Z","body":"This bisects to https://github.com/python/mypy/pull/12656","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111778842/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T05:59:54Z","updated_at":"2022-04-28T05:59:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12579","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12579/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12579/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12579/events","html_url":"https://github.com/python/mypy/issues/12579","id":1203424558,"node_id":"I_kwDOAGuhRc5Hus0u","number":12579,"title":"Release 0.950 planning","user":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3542336145,"node_id":"LA_kwDOAGuhRc7TI8KR","url":"https://api.github.com/repos/python/mypy/labels/meta","name":"meta","color":"D62A71","default":false,"description":"Issues tracking a broad area of work"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":27,"created_at":"2022-04-13T14:59:00Z","updated_at":"2022-05-24T13:31:27Z","closed_at":"2022-05-18T09:10:54Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm planning to make a 0.950 release by Apr 22 (tentative timeline).\r\n\r\nPlease post here any issues you'd like to see fixed in the release, or PRs you'd like to have merged.  I've already cut the release branch, but we can still cherry-pick low-risk features and bug fixes until Apr 18. After Apr 18 only critical bug fixes and documentation updates should be cherry-picked.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12579/reactions","total_count":7,"+1":0,"-1":0,"laugh":0,"hooray":7,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12579/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":6512212555,"node_id":"RTE_lADOAGuhRc5InAtBzwAAAAGEKHpL","url":"https://api.github.com/repos/python/mypy/issues/events/6512212555","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-04-28T06:00:23Z","rename":{"from":"Crash","to":"Crash involving dataclasses"},"performed_via_github_app":null},{"id":6512298131,"node_id":"LE_lADOAGuhRc5InAtBzwAAAAGEKciT","url":"https://api.github.com/repos/python/mypy/issues/events/6512298131","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-28T06:19:16Z","label":{"name":"topic-dataclasses","color":"8E9730"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111814051","html_url":"https://github.com/python/mypy/issues/12685#issuecomment-1111814051","issue_url":"https://api.github.com/repos/python/mypy/issues/12685","id":1111814051,"node_id":"IC_kwDOAGuhRc5CRO-j","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T06:53:34Z","updated_at":"2022-04-28T06:53:34Z","body":"Okay, took another look at this and got a small repro:\r\n\r\n```\r\nfrom dataclasses import dataclass\r\nfrom typing import Generic, TypeVar\r\n\r\nT = TypeVar(\"T\")\r\n\r\n@dataclass\r\nclass Parent(Generic[T]):\r\n    key: str\r\n\r\n@dataclass\r\nclass Child1(Parent[\"Child2\"]): ...\r\n\r\n@dataclass\r\nclass Child2(Parent[\"Child1\"]): ...\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1111814051/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6512480195,"node_id":"RTE_lADOAGuhRc5InAtBzwAAAAGELI_D","url":"https://api.github.com/repos/python/mypy/issues/events/6512480195","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-04-28T06:55:08Z","rename":{"from":"Crash involving dataclasses","to":"Crash involving dataclasses, generics, forward references"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1120781758","html_url":"https://github.com/python/mypy/issues/12685#issuecomment-1120781758","issue_url":"https://api.github.com/repos/python/mypy/issues/12685","id":1120781758,"node_id":"IC_kwDOAGuhRc5CzcW-","user":{"login":"NYKevin","id":1929766,"node_id":"MDQ6VXNlcjE5Mjk3NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1929766?v=4","gravatar_id":"","url":"https://api.github.com/users/NYKevin","html_url":"https://github.com/NYKevin","followers_url":"https://api.github.com/users/NYKevin/followers","following_url":"https://api.github.com/users/NYKevin/following{/other_user}","gists_url":"https://api.github.com/users/NYKevin/gists{/gist_id}","starred_url":"https://api.github.com/users/NYKevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NYKevin/subscriptions","organizations_url":"https://api.github.com/users/NYKevin/orgs","repos_url":"https://api.github.com/users/NYKevin/repos","events_url":"https://api.github.com/users/NYKevin/events{/privacy}","received_events_url":"https://api.github.com/users/NYKevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T08:10:14Z","updated_at":"2022-05-09T08:10:14Z","body":"You can also repro it with just one class, which is probably still tickling the same bug:\r\n```python\r\nimport dataclasses\r\nimport typing\r\n\r\nT = typing.TypeVar('T', bound='Foo')\r\n\r\n@dataclasses.dataclass\r\nclass Foo(typing.Generic[T]):\r\n\tdata: int\r\n```\r\n\r\nIf you remove either of the following elements, the problem won't be reproducible:\r\n\r\n* The `data` field.\r\n* The bound on `T`.\r\n\r\nThe bound need not be `Foo` itself, as long as it is a *necessary* forward reference - that is, a forward reference to a class defined below T (and therefore \"necessary\" because, if you removed the quotes, it would fail with a NameError). If you put e.g. `'object'`, or the name of a class which already exists, then it won't reproduce. But you can just put something like `class Bar: pass` below the declaration of T, and then `bound='Bar'` will reproduce the bug.\r\n\r\nThe traceback is also slightly different:\r\n```\r\nexample.py:8: error: INTERNAL ERROR -- Please try using mypy master on GitHub:\r\nhttps://mypy.readthedocs.io/en/stable/common_issues.html#using-a-development-mypy-build\r\nPlease report a bug at https://github.com/python/mypy/issues\r\nversion: 0.960+dev.612074f05ba5d65e016c031dc94b13f962d9c6b4\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Kevin\\AppData\\Local\\Programs\\Python\\Python310\\lib\\runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\Kevin\\AppData\\Local\\Programs\\Python\\Python310\\lib\\runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\Scripts\\mypy.exe\\__main__.py\", line 7, in <module>\r\n    sys.exit(console_entry())\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\__main__.py\", line 12, in console_entry\r\n    main(None, sys.stdout, sys.stderr)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\main.py\", line 96, in main\r\n    res, messages, blockers = run_build(sources, options, fscache, t0, stdout, stderr)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\main.py\", line 173, in run_build\r\n    res = build.build(sources, options, None, flush_errors, fscache, stdout, stderr)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\build.py\", line 181, in build\r\n    result = _build(\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\build.py\", line 257, in _build\r\n    graph = dispatch(sources, manager, stdout)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\build.py\", line 2752, in dispatch\r\n    process_graph(graph, manager)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\build.py\", line 3110, in process_graph\r\n    process_stale_scc(graph, scc, manager)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\build.py\", line 3202, in process_stale_scc\r\n    mypy.semanal_main.semantic_analysis_for_scc(graph, scc, manager.errors)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal_main.py\", line 79, in semantic_analysis_for_scc\r\n    process_functions(graph, scc, patches)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal_main.py\", line 233, in process_functions\r\n    process_top_level_function(analyzer,\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal_main.py\", line 274, in process_top_level_function\r\n    deferred, incomplete, progress = semantic_analyze_target(target, state, node, active_type,\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal_main.py\", line 326, in semantic_analyze_target\r\n    analyzer.refresh_partial(refresh_node,\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal.py\", line 417, in refresh_partial\r\n    self.accept(node)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal.py\", line 5344, in accept\r\n    node.accept(self)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\nodes.py\", line 747, in accept\r\n    return visitor.visit_func_def(self)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal.py\", line 637, in visit_func_def\r\n    self.analyze_func_def(defn)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal.py\", line 669, in analyze_func_def\r\n    self.defer(defn)\r\n  File \"C:\\Users\\Kevin\\poker\\mypy-testing\\lib\\site-packages\\mypy\\semanal.py\", line 5044, in defer\r\n    assert not self.final_iteration, 'Must not defer during final iteration'\r\nAssertionError: Must not defer during final iteration\r\nexample.py:8: : note: use --pdb to drop into pdb\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1120781758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"NYKevin","id":1929766,"node_id":"MDQ6VXNlcjE5Mjk3NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1929766?v=4","gravatar_id":"","url":"https://api.github.com/users/NYKevin","html_url":"https://github.com/NYKevin","followers_url":"https://api.github.com/users/NYKevin/followers","following_url":"https://api.github.com/users/NYKevin/following{/other_user}","gists_url":"https://api.github.com/users/NYKevin/gists{/gist_id}","starred_url":"https://api.github.com/users/NYKevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NYKevin/subscriptions","organizations_url":"https://api.github.com/users/NYKevin/orgs","repos_url":"https://api.github.com/users/NYKevin/repos","events_url":"https://api.github.com/users/NYKevin/events{/privacy}","received_events_url":"https://api.github.com/users/NYKevin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1120796936","html_url":"https://github.com/python/mypy/issues/12685#issuecomment-1120796936","issue_url":"https://api.github.com/repos/python/mypy/issues/12685","id":1120796936,"node_id":"IC_kwDOAGuhRc5CzgEI","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T08:24:02Z","updated_at":"2022-05-09T08:24:02Z","body":"Thanks. I think that's actually a different issue (and one that is not a regression), see #12527","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1120796936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1122256584","html_url":"https://github.com/python/mypy/issues/12685#issuecomment-1122256584","issue_url":"https://api.github.com/repos/python/mypy/issues/12685","id":1122256584,"node_id":"IC_kwDOAGuhRc5C5EbI","user":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-10T11:18:06Z","updated_at":"2022-05-10T11:18:06Z","body":"The root cause seems to be that we can't safely run the dataclass transform in the main pass of the semantic analysis, since various references can still be unbound, and we can encounter placeholder types, etc. I'm going to attempt to move the whole transform to a later pass where all references are bound.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1122256584/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6581056216,"node_id":"AE_lADOAGuhRc5InAtBzwAAAAGIQvLY","url":"https://api.github.com/repos/python/mypy/issues/events/6581056216","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2022-05-10T11:18:12Z","assignee":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-10T15:45:06Z","updated_at":"2022-05-10T15:45:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12762","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12762/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12762/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12762/events","html_url":"https://github.com/python/mypy/pull/12762","id":1231360458,"node_id":"PR_kwDOAGuhRc43lmBc","number":12762,"title":"Running dataclass transform in a later pass to fix crashes","user":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-05-10T15:45:06Z","updated_at":"2022-05-11T12:38:35Z","closed_at":"2022-05-11T12:38:34Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/12762","html_url":"https://github.com/python/mypy/pull/12762","diff_url":"https://github.com/python/mypy/pull/12762.diff","patch_url":"https://github.com/python/mypy/pull/12762.patch","merged_at":"2022-05-11T12:38:34Z"},"body":"The dataclass plugin could crash if it encountered a placeholder. Fix the issue by\r\nrunning the plugin after the main semantic analysis pass, when all placeholders have \r\nbeen resolved.\r\n\r\nAlso add a new hook called `get_class_decorator_hook_2` that is used by the\r\ndataclass plugin.\r\n\r\nWe may want to do a similar change to the attrs plugin, but let's change one thing\r\nat a time.\r\n\r\nFix #12685.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12762/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12762/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6590001378,"node_id":"CE_lADOAGuhRc5InAtBzwAAAAGIy3Di","url":"https://api.github.com/repos/python/mypy/issues/events/6590001378","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-05-11T12:38:34Z","state_reason":null,"performed_via_github_app":null},{"id":6590001813,"node_id":"REFE_lADOAGuhRc5InAtBzwAAAAGIy3KV","url":"https://api.github.com/repos/python/mypy/issues/events/6590001813","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"03901ef657daf6f477e6fe933c42ac270cf5034b","commit_url":"https://api.github.com/repos/python/mypy/commits/03901ef657daf6f477e6fe933c42ac270cf5034b","created_at":"2022-05-11T12:38:38Z","performed_via_github_app":null},{"actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-15T10:28:33Z","updated_at":"2022-05-15T10:28:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/10014","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/10014/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/10014/comments","events_url":"https://api.github.com/repos/python/mypy/issues/10014/events","html_url":"https://github.com/python/mypy/issues/10014","id":800249609,"node_id":"MDU6SXNzdWU4MDAyNDk2MDk=","number":10014,"title":"Internal Error found on v0.800 when using Generic Inheritance for dataclass","user":{"login":"binishkaspar","id":623080,"node_id":"MDQ6VXNlcjYyMzA4MA==","avatar_url":"https://avatars.githubusercontent.com/u/623080?v=4","gravatar_id":"","url":"https://api.github.com/users/binishkaspar","html_url":"https://github.com/binishkaspar","followers_url":"https://api.github.com/users/binishkaspar/followers","following_url":"https://api.github.com/users/binishkaspar/following{/other_user}","gists_url":"https://api.github.com/users/binishkaspar/gists{/gist_id}","starred_url":"https://api.github.com/users/binishkaspar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binishkaspar/subscriptions","organizations_url":"https://api.github.com/users/binishkaspar/orgs","repos_url":"https://api.github.com/users/binishkaspar/repos","events_url":"https://api.github.com/users/binishkaspar/events{/privacy}","received_events_url":"https://api.github.com/users/binishkaspar/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":379446833,"node_id":"MDU6TGFiZWwzNzk0NDY4MzM=","url":"https://api.github.com/repos/python/mypy/labels/crash","name":"crash","color":"b60205","default":false,"description":null},{"id":3945137363,"node_id":"LA_kwDOAGuhRc7rJgTT","url":"https://api.github.com/repos/python/mypy/labels/topic-inheritance","name":"topic-inheritance","color":"63CF11","default":false,"description":"Inheritance and incompatible overrides"},{"id":3945206226,"node_id":"LA_kwDOAGuhRc7rJxHS","url":"https://api.github.com/repos/python/mypy/labels/topic-dataclasses","name":"topic-dataclasses","color":"8E9730","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-02-03T11:42:47Z","updated_at":"2022-05-15T10:28:33Z","closed_at":"2022-05-15T10:28:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\n  Use this form only if mypy reports an \"INTERNAL ERROR\" and/or gives a traceback.\r\n  Please include the traceback and all other messages below (use `mypy --show-traceback`).\r\n-->\r\n\r\n**Crash Report**\r\n\r\nFollowing code raises INTERNAL ERROR on version **0.800 but not on 0.790**\r\n\r\n```\r\nDRIVE_TYPE = TypeVar('DRIVE_TYPE', bound='Driver')\r\n\r\n# This WORKS\r\n# DRIVER_STATE_TYPE = TypeVar('DRIVER_STATE_TYPE', bound='DriverState')\r\n\r\n\r\n@dataclass\r\nclass DriverState(Generic[DRIVE_TYPE]):\r\n    driver: DRIVE_TYPE\r\n    pid: str = ''\r\n\r\n\r\n# This doesn't work\r\nDRIVER_STATE_TYPE = TypeVar('DRIVER_STATE_TYPE', bound='DriverState')\r\n\r\n\r\n@dataclass\r\nclass Driver(Generic[DRIVER_STATE_TYPE]):\r\n    config: DRIVER_STATE_TYPE\r\n\r\n\r\n@dataclass\r\nclass ESState(DriverState['ESDriver']):\r\n    special_name: str = 'ES Driver'\r\n\r\n\r\n@dataclass\r\nclass ESDriver(Driver[\r\n    ESState\r\n]):\r\n    def name(self) -> None:\r\n        print(self.config.special_name)\r\n```\r\n\r\nIs it because `supertype` not recursively expanded? I believe this has something to do with the fix #7520.\r\n\r\n**Traceback**\r\n\r\n```\r\nmypyissue.py:32: error: INTERNAL ERROR -- Please try using mypy master on Github:\r\nhttps://mypy.rtfd.io/en/latest/common_issues.html#using-a-development-mypy-build\r\nPlease report a bug at https://github.com/python/mypy/issues\r\nversion: 0.800\r\nTraceback (most recent call last):\r\n  File \"mypy/semanal.py\", line 4835, in accept\r\n  File \"mypy/nodes.py\", line 950, in accept\r\n  File \"mypy/semanal.py\", line 1048, in visit_class_def\r\n  File \"mypy/semanal.py\", line 1125, in analyze_class\r\n  File \"mypy/semanal.py\", line 1134, in analyze_class_body_common\r\n  File \"mypy/semanal.py\", line 1180, in apply_class_plugin_hooks\r\n  File \"mypy/plugins/dataclasses.py\", line 361, in dataclass_class_maker_callback\r\n  File \"mypy/plugins/dataclasses.py\", line 100, in transform\r\n  File \"mypy/plugins/dataclasses.py\", line 302, in collect_attributes\r\n  File \"mypy/plugins/dataclasses.py\", line 86, in expand_typevar_from_subtype\r\n  File \"mypy/typeops.py\", line 165, in map_type_from_supertype\r\n  File \"mypy/maptype.py\", line 24, in map_instance_to_supertype\r\n  File \"mypy/maptype.py\", line 37, in map_instance_to_supertypes\r\n  File \"mypy/maptype.py\", line 82, in map_instance_to_direct_supertypes\r\n  File \"mypy/expandtype.py\", line 16, in expand_type\r\n  File \"mypy/types.py\", line 833, in accept\r\n  File \"mypy/expandtype.py\", line 85, in visit_instance\r\n  File \"mypy/expandtype.py\", line 145, in expand_types\r\n  File \"mypy/types.py\", line 1942, in accept\r\nAssertionError: \r\nmypyissue.py:32: : note: use --pdb to drop into pdb\r\n```\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: v0.800\r\n- Mypy command-line flags:\r\n- Mypy configuration options from `mypy.ini` (and other config files):\r\n- Python version used: Python 3.8.5\r\n- Operating system and version: MacOS\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/10014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/10014/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"pranavrajpal","id":78008260,"node_id":"MDQ6VXNlcjc4MDA4MjYw","avatar_url":"https://avatars.githubusercontent.com/u/78008260?v=4","gravatar_id":"","url":"https://api.github.com/users/pranavrajpal","html_url":"https://github.com/pranavrajpal","followers_url":"https://api.github.com/users/pranavrajpal/followers","following_url":"https://api.github.com/users/pranavrajpal/following{/other_user}","gists_url":"https://api.github.com/users/pranavrajpal/gists{/gist_id}","starred_url":"https://api.github.com/users/pranavrajpal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pranavrajpal/subscriptions","organizations_url":"https://api.github.com/users/pranavrajpal/orgs","repos_url":"https://api.github.com/users/pranavrajpal/repos","events_url":"https://api.github.com/users/pranavrajpal/events{/privacy}","received_events_url":"https://api.github.com/users/pranavrajpal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T01:54:25Z","updated_at":"2022-05-31T01:54:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12911","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12911/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12911/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12911/events","html_url":"https://github.com/python/mypy/issues/12911","id":1253243451,"node_id":"I_kwDOAGuhRc5Ksvo7","number":12911,"title":"Refactor mypy to use query-based architecture","user":{"login":"pranavrajpal","id":78008260,"node_id":"MDQ6VXNlcjc4MDA4MjYw","avatar_url":"https://avatars.githubusercontent.com/u/78008260?v=4","gravatar_id":"","url":"https://api.github.com/users/pranavrajpal","html_url":"https://github.com/pranavrajpal","followers_url":"https://api.github.com/users/pranavrajpal/followers","following_url":"https://api.github.com/users/pranavrajpal/following{/other_user}","gists_url":"https://api.github.com/users/pranavrajpal/gists{/gist_id}","starred_url":"https://api.github.com/users/pranavrajpal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pranavrajpal/subscriptions","organizations_url":"https://api.github.com/users/pranavrajpal/orgs","repos_url":"https://api.github.com/users/pranavrajpal/repos","events_url":"https://api.github.com/users/pranavrajpal/events{/privacy}","received_events_url":"https://api.github.com/users/pranavrajpal/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488358,"node_id":"MDU6TGFiZWwyMTQ4ODM1OA==","url":"https://api.github.com/repos/python/mypy/labels/feature","name":"feature","color":"84b6eb","default":false,"description":null},{"id":27512117,"node_id":"MDU6TGFiZWwyNzUxMjExNw==","url":"https://api.github.com/repos/python/mypy/labels/refactoring","name":"refactoring","color":"aaeeee","default":false,"description":"Changing mypy's internals"},{"id":610718653,"node_id":"MDU6TGFiZWw2MTA3MTg2NTM=","url":"https://api.github.com/repos/python/mypy/labels/topic-developer","name":"topic-developer","color":"d4c5f9","default":false,"description":"Issues relevant to mypy developers"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-05-31T01:54:25Z","updated_at":"2022-06-04T06:24:07Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Feature**\r\n\r\nI think mypy would benefit from refactoring to use a query-based architecture similar to the one used by [Rust's compiler](https://rustc-dev-guide.rust-lang.org/query.html) or [rust-analyzer](https://github.com/rust-lang/rust-analyzer/blob/master/docs/dev/architecture.md) because it would:\r\n- make some relatively common types of bugs nearly impossible\r\n- make mypy internals easier to understand\r\n- allow us to implement certain performance optimizations much more easily\r\n\r\n**Pitch**\r\n\r\nThe general idea behind a query-based architecture is that, instead of organizing code based on which pass of the type checker it runs during, you would organize your code into pure functions that each let you query information about the inputted code (such as by computing the AST given the text of a file, or getting the type of a given symbol, or type checking a function to get the resulting errors). You'd also have a few non-pure input queries that you can control that represent the inputs to the type checker (such as the files to type check or the configuration options)\r\n\r\nAfter that, there would be separate code for executing these queries which would be responsible for:\r\n- Executing your main query and all other queries it makes\r\n- Keeping track of what other queries each query depends on (i.e. what other queries it makes while running)\r\n- Caching the output of any queries as much or as little as it wants (depending on whether caching the result is worth it for that query)\r\n- (Optionally) saving those caches to a file and selectively invalidating caches on the next run based on new inputs to get incremental type checking\r\n\r\nUsing pure functions for queries is what allows you to get most of the benefits of this system because pure functions, by definition, always return the same result for the same arguments no matter how many times they're called. That means that the query runner is free to reorder and cache queries as much as possible, which has a lot of benefits (see below).\r\n\r\nOne other restriction that's necessary to make this work is that queries can't have cyclic dependencies because that would make it impossible to determine the dependencies of any given query. That's not really a new restriction, because a cyclic dependency essentially means infinite recursion, but it somewhat limits what we can do with this.\r\n\r\n## Benefits of Query Architecture\r\n\r\n### Code readability\r\n\r\nBecause, as mentioned earlier, queries can be run in any order and as many times as necessary, the actual logic doesn't need to concern itself with specifying either of those things. That means that, instead of having one large class that runs all the code for a single pass, updating all the results as it goes, you would have separate functions with clearly defined inputs and outputs that compute different information as a part of that pass.\r\n\r\nSince we're organizing code just as functions that each compute some information about the passed in code, this gives you the opportunity to place code from different passes together if that makes it easier to understand when organizing the code base, instead of needing to organize based on what pass it happens to run during. Regardless of how you organize the code, the query runner will automatically figure out what order to run any queries in.\r\n\r\n### Correctness\r\n\r\nThere is a lot of code in mypy that has subtle dependencies on other parts of the codebase being run, which in practice leads to hard to track down bugs.\r\n\r\nThe most obvious example of that is the strategy we use in semantic analysis of deferring nodes whenever we don't have enough information about that node. Deferring nodes means that different parts of semanal assume that the analysis needed for progress to continue will be run in some other part of semanal. When those assumptions turn out to be wrong, that usually leads to a \"Must not defer during final iteration\" error or some other error about reaching the maximum iteration count.\r\n\r\nWith a query-based architecture, you would completely avoid that problem. Instead of checking if the relevant information is there and deferring if not, you would call a function to directly query that information, and the query runner would run whatever queries are necessary to compute that information, even if that meant processing code that you haven't reached yet.\r\n\r\nThat problem gets worse when you have other subtle dependencies on the order in which different functions are run. An incomplete list of examples of this in mypy:\r\n- The dataclass plugin makes assumptions about what references would be bound when it runs (#12685, #12527, #12876)\r\n- The attrs plugin assumes base classes will get processed before their subclasses (mypyc/mypyc#883)\r\n- typeops.py assumes all of its functions will be run [after semantic analysis](https://github.com/python/mypy/blob/2004ae023b9d3628d9f09886cbbc20868aee8554/mypy/typeops.py#L4-L5)\r\n\r\nAn added correctness-related benefit of a query-based system is that, as I mentioned earlier, supporting incremental checking requires no changes to the core logic of type checking, so it would end up avoiding all of the incremental-related issues and discrepancies between non-incremental and the different types of incremental checking we support. Judging from comments like [this](https://github.com/python/mypy/blob/2004ae023b9d3628d9f09886cbbc20868aee8554/mypy/nodes.py#L2936-L2942) and [this](https://github.com/python/mypy/blob/2004ae023b9d3628d9f09886cbbc20868aee8554/mypy/build.py#L2678-L2683), fine-grained incremental checking is rather tricky to get right, so a query-based system would be helpful there.\r\n\r\n### Performance\r\n\r\nThere's been some recent effort to improve mypy's performance both by caching more intermediate results (#12707, #12659, #12526) and by avoiding doing unnecessary work (#10922, #12854).\r\n\r\nA benefit of a query-based system is that both of those are built in to the system. Since all the core logic is written using pure functions, caching any query can be done without affecting the correctness of the code it's running.\r\n\r\nAdditionally, avoiding doing unnecessary work is also straightforward because queries are computed on demand. Instead of having a pass that computes all the information that you might need in later passes (like we do currently), and finding specific opportunities to avoid computing something, you would just write a function that computes what you want when it's called. That means that, if you never call that function, it never gets computed, and you avoid that work completely.\r\n\r\n## Unresolved questions\r\n\r\nI'm not really sure what the best place to implement a proof of concept for this query-based architecture. While I'm hoping that we eventually use it for all of mypy, I don't want to rewrite the entire code base at once, so finding a decent place to try this out and see how it looks in practice seems useful.\r\n\r\nIdeally, whatever code that we use for a proof of concept would:\r\n- be something that takes advantage of the benefits of a query-based architecture (either by letting us avoid unnecessary work, simplify the existing code significantly, or something else)\r\n- not be dependent on too much other code in mypy (so we can avoid rewriting most of the code base at once)\r\n- not be a helper function used by plugins (in order to avoid dealing with breaking plugins)\r\n- be useful on its own (in case we don't continue past the proof of concept)\r\n\r\nI don't know what parts of mypy fit that description or even part of that description, so does anyone else have any ideas for that?","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12911/reactions","total_count":8,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":4},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12911/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]