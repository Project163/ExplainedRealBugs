{"url":"https://api.github.com/repos/python/mypy/issues/12553","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12553/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12553/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12553/events","html_url":"https://github.com/python/mypy/issues/12553","id":1197249525,"node_id":"I_kwDOAGuhRc5HXJP1","number":12553,"title":"iter doesn't work on TypeVar with bound of Enum","user":{"login":"bmerry","id":1963944,"node_id":"MDQ6VXNlcjE5NjM5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1963944?v=4","gravatar_id":"","url":"https://api.github.com/users/bmerry","html_url":"https://github.com/bmerry","followers_url":"https://api.github.com/users/bmerry/followers","following_url":"https://api.github.com/users/bmerry/following{/other_user}","gists_url":"https://api.github.com/users/bmerry/gists{/gist_id}","starred_url":"https://api.github.com/users/bmerry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmerry/subscriptions","organizations_url":"https://api.github.com/users/bmerry/orgs","repos_url":"https://api.github.com/users/bmerry/repos","events_url":"https://api.github.com/users/bmerry/events{/privacy}","received_events_url":"https://api.github.com/users/bmerry/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":427181007,"node_id":"MDU6TGFiZWw0MjcxODEwMDc=","url":"https://api.github.com/repos/python/mypy/labels/topic-type-variables","name":"topic-type-variables","color":"0052cc","default":false,"description":null},{"id":3542345285,"node_id":"LA_kwDOAGuhRc7TI-ZF","url":"https://api.github.com/repos/python/mypy/labels/topic-enum","name":"topic-enum","color":"47988D","default":false,"description":""},{"id":3987481855,"node_id":"LA_kwDOAGuhRc7trCT_","url":"https://api.github.com/repos/python/mypy/labels/topic-metaclasses","name":"topic-metaclasses","color":"bfd4f2","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-04-08T12:19:14Z","updated_at":"2023-01-29T23:32:12Z","closed_at":"2023-01-29T23:32:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Bug Report**\r\n\r\nA function that takes an argument of `Type[_E]` where `_E = TypeVar(\"_E\", bound=Enum)` does not accept calling `iter` on that argument. Calling `iter` on a concrete enum class is accepted, which is why I think this isn't purely a typeshed issue. Using the class in a loop or calling the `__iter__` member is also accepted.\r\n\r\n**To Reproduce**\r\n\r\nRun mypy on the following:\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n\r\nimport socket\r\nfrom enum import Enum\r\nfrom typing import Iterator, Type, TypeVar\r\n\r\n_E = TypeVar(\"_E\", bound=Enum)\r\n\r\ndef enum_iter(cls: Type[_E]):\r\n    return iter(cls)\r\n\r\nfor value in enum_iter(socket.SocketKind):\r\n    print(value)\r\n```\r\n\r\n**Expected Behavior**\r\n\r\nExpected no mypy errors.\r\n\r\n**Actual Behavior**\r\n\r\n```\r\nmypy_enum_iter.py:10: error: No overload variant of \"iter\" matches argument type \"Type[_E]\"\r\nmypy_enum_iter.py:10: note: Possible overload variants:\r\nmypy_enum_iter.py:10: note:     def [_SupportsNextT <: SupportsNext[Any]] iter(_SupportsIter[_SupportsNextT]) -> _SupportsNextT\r\nmypy_enum_iter.py:10: note:     def [_T] iter(Callable[[], Optional[_T]], None) -> Iterator[_T]\r\nmypy_enum_iter.py:10: note:     def [_T] iter(Callable[[], _T], object) -> Iterator[_T]\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\nWhat's even weirder is that adding an `Iterator[_E]` return annotation to `enum_iter` makes it pass.\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 0.942\r\n- Mypy command-line flags: none\r\n- Mypy configuration options from `mypy.ini` (and other config files): none\r\n- Python version used: 3.8.10\r\n- Operating system and version: Ubuntu 20.04","closed_by":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12553/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12553/timeline","performed_via_github_app":null,"state_reason":"completed"}