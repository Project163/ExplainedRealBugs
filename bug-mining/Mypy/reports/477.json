{"url":"https://api.github.com/repos/python/mypy/issues/18062","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/18062/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/18062/comments","events_url":"https://api.github.com/repos/python/mypy/issues/18062/events","html_url":"https://github.com/python/mypy/issues/18062","id":2619209176,"node_id":"I_kwDOAGuhRc6cHfXY","number":18062,"title":"Crash when checking slice expression with `0` used for the `step`","user":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":379446833,"node_id":"MDU6TGFiZWwzNzk0NDY4MzM=","url":"https://api.github.com/repos/python/mypy/labels/crash","name":"crash","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-10-28T18:33:29Z","updated_at":"2024-10-29T01:41:07Z","closed_at":"2024-10-29T01:41:07Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Crash Report**\r\n\r\nOriginally discovered by @sharkdp: mypy crashes when type checking a module containing just the following:\r\n\r\n```py\r\n()[::0]\r\n```\r\n\r\n[Playground link](https://mypy-play.net/?mypy=master&python=3.13&gist=29bbc4106a7a0a100978b298f1689f52&flags=show-traceback)\r\n\r\n**Traceback**\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\r\n  File \"<frozen runpy>\", line 88, in _run_code\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/__main__.py\", line 37, in <module>\r\n    console_entry()\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/__main__.py\", line 15, in console_entry\r\n    main()\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/main.py\", line 109, in main\r\n    res, messages, blockers = run_build(sources, options, fscache, t0, stdout, stderr)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/main.py\", line 193, in run_build\r\n    res = build.build(sources, options, None, flush_errors, fscache, stdout, stderr)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/build.py\", line 194, in build\r\n    result = _build(\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/build.py\", line 269, in _build\r\n    graph = dispatch(sources, manager, stdout)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/build.py\", line 2936, in dispatch\r\n    process_graph(graph, manager)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/build.py\", line 3334, in process_graph\r\n    process_stale_scc(graph, scc, manager)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/build.py\", line 3435, in process_stale_scc\r\n    graph[id].type_check_first_pass()\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/build.py\", line 2305, in type_check_first_pass\r\n    self.type_checker().check_first_pass()\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checker.py\", line 483, in check_first_pass\r\n    self.accept(d)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checker.py\", line 592, in accept\r\n    stmt.accept(self)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/nodes.py\", line 1297, in accept\r\n    return visitor.visit_expression_stmt(self)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checker.py\", line 4547, in visit_expression_stmt\r\n    expr_type = self.expr_checker.accept(s.expr, allow_none_return=True, always_allow_any=True)\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checkexpr.py\", line 5885, in accept\r\n    typ = node.accept(self)\r\n          ^^^^^^^^^^^^^^^^^\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/nodes.py\", line 2043, in accept\r\n    return visitor.visit_index_expr(self)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checkexpr.py\", line 4318, in visit_index_expr\r\n    result = self.visit_index_expr_helper(e)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checkexpr.py\", line 4334, in visit_index_expr_helper\r\n    return self.visit_index_with_type(left_type, e)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checkexpr.py\", line 4369, in visit_index_with_type\r\n    return self.visit_tuple_slice_helper(left_type, index)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/checkexpr.py\", line 4495, in visit_tuple_slice_helper\r\n    item = left_type.slice(b, e, s, fallback=self.named_type(\"builtins.tuple\"))\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/layers/google.python.pip/pip/lib/python3.12/site-packages/mypy/types.py\", line 2549, in slice\r\n    slice_items = self.items[begin:end:stride]\r\n                  ~~~~~~~~~~^^^^^^^^^^^^^^^^^^\r\nValueError: slice step cannot be zero\r\n\r\nmain.py:1: error: INTERNAL ERROR -- Please try using mypy master on GitHub:\r\nhttps://mypy.readthedocs.io/en/stable/common_issues.html#using-a-development-mypy-build\r\nPlease report a bug at https://github.com/python/mypy/issues\r\nversion: 1.14.0+dev.2d785dffee4440b9e5fd4c4f7dbf8787a829f5fa\r\nmain.py:1: : note: use --pdb to drop into pdb\r\n```\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 1.14.0+dev.2d785dffee4440b9e5fd4c4f7dbf8787a829f5fa\r\n- Python version used: 3.13\r\n","closed_by":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/18062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/18062/timeline","performed_via_github_app":null,"state_reason":"completed"}