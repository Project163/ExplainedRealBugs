[{"id":6250135162,"node_id":"LE_lADOAGuhRc5FymCuzwAAAAF0iX56","url":"https://api.github.com/repos/python/mypy/issues/events/6250135162","actor":{"login":"exoriente","id":59625068,"node_id":"MDQ6VXNlcjU5NjI1MDY4","avatar_url":"https://avatars.githubusercontent.com/u/59625068?v=4","gravatar_id":"","url":"https://api.github.com/users/exoriente","html_url":"https://github.com/exoriente","followers_url":"https://api.github.com/users/exoriente/followers","following_url":"https://api.github.com/users/exoriente/following{/other_user}","gists_url":"https://api.github.com/users/exoriente/gists{/gist_id}","starred_url":"https://api.github.com/users/exoriente/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/exoriente/subscriptions","organizations_url":"https://api.github.com/users/exoriente/orgs","repos_url":"https://api.github.com/users/exoriente/repos","events_url":"https://api.github.com/users/exoriente/events{/privacy}","received_events_url":"https://api.github.com/users/exoriente/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-16T11:25:26Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":6250137848,"node_id":"RTE_lADOAGuhRc5FymCuzwAAAAF0iYj4","url":"https://api.github.com/repos/python/mypy/issues/events/6250137848","actor":{"login":"exoriente","id":59625068,"node_id":"MDQ6VXNlcjU5NjI1MDY4","avatar_url":"https://avatars.githubusercontent.com/u/59625068?v=4","gravatar_id":"","url":"https://api.github.com/users/exoriente","html_url":"https://github.com/exoriente","followers_url":"https://api.github.com/users/exoriente/followers","following_url":"https://api.github.com/users/exoriente/following{/other_user}","gists_url":"https://api.github.com/users/exoriente/gists{/gist_id}","starred_url":"https://api.github.com/users/exoriente/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/exoriente/subscriptions","organizations_url":"https://api.github.com/users/exoriente/orgs","repos_url":"https://api.github.com/users/exoriente/repos","events_url":"https://api.github.com/users/exoriente/events{/privacy}","received_events_url":"https://api.github.com/users/exoriente/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-03-16T11:25:52Z","rename":{"from":"`mypy` unable to narrow type in `case` clause in pattern matching","to":"`mypy` unable to narrow type of tuple elements in `case` clause in pattern matching"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1072984274","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1072984274","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1072984274,"node_id":"IC_kwDOAGuhRc4_9HDS","user":{"login":"tmke8","id":7741417,"node_id":"MDQ6VXNlcjc3NDE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/7741417?v=4","gravatar_id":"","url":"https://api.github.com/users/tmke8","html_url":"https://github.com/tmke8","followers_url":"https://api.github.com/users/tmke8/followers","following_url":"https://api.github.com/users/tmke8/following{/other_user}","gists_url":"https://api.github.com/users/tmke8/gists{/gist_id}","starred_url":"https://api.github.com/users/tmke8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmke8/subscriptions","organizations_url":"https://api.github.com/users/tmke8/orgs","repos_url":"https://api.github.com/users/tmke8/repos","events_url":"https://api.github.com/users/tmke8/events{/privacy}","received_events_url":"https://api.github.com/users/tmke8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-19T10:24:29Z","updated_at":"2022-03-19T10:27:17Z","body":"Yeah, mypy doesn't narrow on tuples. I commented on it here: https://github.com/python/mypy/pull/12267#issuecomment-1058132318 But apparently the worry is that it is too computationally expensive.\n\nEDIT: hmm, maybe it's not the same problem actually ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1072984274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tmke8","id":7741417,"node_id":"MDQ6VXNlcjc3NDE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/7741417?v=4","gravatar_id":"","url":"https://api.github.com/users/tmke8","html_url":"https://github.com/tmke8","followers_url":"https://api.github.com/users/tmke8/followers","following_url":"https://api.github.com/users/tmke8/following{/other_user}","gists_url":"https://api.github.com/users/tmke8/gists{/gist_id}","starred_url":"https://api.github.com/users/tmke8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmke8/subscriptions","organizations_url":"https://api.github.com/users/tmke8/orgs","repos_url":"https://api.github.com/users/tmke8/repos","events_url":"https://api.github.com/users/tmke8/events{/privacy}","received_events_url":"https://api.github.com/users/tmke8/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6270050064,"node_id":"LE_lADOAGuhRc5FymCuzwAAAAF1uV8Q","url":"https://api.github.com/repos/python/mypy/issues/events/6270050064","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-19T15:33:52Z","label":{"name":"topic-match-statement","color":"70246D"},"performed_via_github_app":null},{"id":6310157158,"node_id":"LE_lADOAGuhRc5FymCuzwAAAAF4HVtm","url":"https://api.github.com/repos/python/mypy/issues/events/6310157158","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-25T21:34:52Z","label":{"name":"topic-type-narrowing","color":"9F31C3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1164689579","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1164689579","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1164689579,"node_id":"IC_kwDOAGuhRc5Fa8Cr","user":{"login":"cpbotha","id":937871,"node_id":"MDQ6VXNlcjkzNzg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/937871?v=4","gravatar_id":"","url":"https://api.github.com/users/cpbotha","html_url":"https://github.com/cpbotha","followers_url":"https://api.github.com/users/cpbotha/followers","following_url":"https://api.github.com/users/cpbotha/following{/other_user}","gists_url":"https://api.github.com/users/cpbotha/gists{/gist_id}","starred_url":"https://api.github.com/users/cpbotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpbotha/subscriptions","organizations_url":"https://api.github.com/users/cpbotha/orgs","repos_url":"https://api.github.com/users/cpbotha/repos","events_url":"https://api.github.com/users/cpbotha/events{/privacy}","received_events_url":"https://api.github.com/users/cpbotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-23T17:37:18Z","updated_at":"2022-06-23T17:37:18Z","body":"I just ran into this exact problem in a codebase I'm converting to mypy.\r\n\r\nI worked around the issue (for now) by adding a superfluous `assert isinstance(x, MyClass)` just above `x.say_boo()`.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1164689579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cpbotha","id":937871,"node_id":"MDQ6VXNlcjkzNzg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/937871?v=4","gravatar_id":"","url":"https://api.github.com/users/cpbotha","html_url":"https://github.com/cpbotha","followers_url":"https://api.github.com/users/cpbotha/followers","following_url":"https://api.github.com/users/cpbotha/following{/other_user}","gists_url":"https://api.github.com/users/cpbotha/gists{/gist_id}","starred_url":"https://api.github.com/users/cpbotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpbotha/subscriptions","organizations_url":"https://api.github.com/users/cpbotha/orgs","repos_url":"https://api.github.com/users/cpbotha/repos","events_url":"https://api.github.com/users/cpbotha/events{/privacy}","received_events_url":"https://api.github.com/users/cpbotha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1179683164","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1179683164","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1179683164,"node_id":"IC_kwDOAGuhRc5GUIlc","user":{"login":"alexpovel","id":48824213,"node_id":"MDQ6VXNlcjQ4ODI0MjEz","avatar_url":"https://avatars.githubusercontent.com/u/48824213?v=4","gravatar_id":"","url":"https://api.github.com/users/alexpovel","html_url":"https://github.com/alexpovel","followers_url":"https://api.github.com/users/alexpovel/followers","following_url":"https://api.github.com/users/alexpovel/following{/other_user}","gists_url":"https://api.github.com/users/alexpovel/gists{/gist_id}","starred_url":"https://api.github.com/users/alexpovel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexpovel/subscriptions","organizations_url":"https://api.github.com/users/alexpovel/orgs","repos_url":"https://api.github.com/users/alexpovel/repos","events_url":"https://api.github.com/users/alexpovel/events{/privacy}","received_events_url":"https://api.github.com/users/alexpovel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-10T08:32:27Z","updated_at":"2022-07-14T05:33:16Z","body":"I believe the issue I came across fits here. For example:\r\n\r\n```python\r\nfrom datetime import date\r\nfrom typing import Optional\r\n\r\n\r\ndef date_range(\r\n    start: Optional[date],\r\n    end: Optional[date],\r\n    fmt: str,\r\n    sep: str = \"-\",\r\n    ongoing: str = \"present\",\r\n) -> str:\r\n    match (start, end):\r\n        case (None, None):  # A\r\n            return \"\"\r\n        case (None, date() as end):  # B\r\n            return f\"{sep} {end.strftime(fmt)}\"  # C\r\n        case (date() as start, None):\r\n            return f\"{start.strftime(fmt)} {sep} {ongoing}\"\r\n        case (date() as start, date() as end):\r\n            return f\"{start.strftime(fmt)} {sep} {end.strftime(fmt)}\"\r\n        case _:\r\n            raise TypeError(f\"Invalid date range: {start} - {end}\")\r\n\r\n\r\nprint(date_range(date(2020, 1, 1), date(2022, 10, 13), \"%Y-%m-%d\"))\r\n```\r\n\r\n(This not-quite-minimal working example should run as-is).\r\n\r\nAfter line `A`, `end` cannot possibly be `None`. `mypy` understands guard clauses like `if a is not None: ...`, after which it knows to drop `None` from the type union of `a`. So I hoped it could deduce it in this case as well, but no dice. I can see that it might introduce a lot of complexity.\r\n\r\nTo circumvent, I [cast](https://peps.python.org/pep-0636/#matching-builtin-classes) to `date` explicitly in line `B`, such that line `C` doesn't yield a type checking attribute error anymore (`error: Item \"None\" of \"Optional[date]\" has no attribute \"strftime\"  [union-attr]`). Note that `date(end)` didn't work (for `mypy`), it had to be `date() as end`.\r\n\r\nWhile this works and line `C` is then deduced correctly, the resulting code is quite verbose. I suspect checking all combinations of `start` and `end` for `None` is verbose *in any case* (before `match`, this would have been a forest of conditionals), but wondered if this could be solved more succinctly.\r\n\r\nAnother suspicion I have is that structural pattern matching in Python is intended more for matching to literal cases, not so much for general type checking we'd ordinarily use `isinstance` and friends for (?). At least that's what it looks like from [PEP 636](https://peps.python.org/pep-0636/#matching-builtin-classes).\r\n\r\n---\r\n\r\nEDIT: More context here:\r\n\r\n- <https://mypy-lang.blogspot.com/2022/03/mypy-0940-released.html>\r\n- <https://mypy.readthedocs.io/en/stable/literal_types.html#exhaustiveness-checking> with its `assert_never`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1179683164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alexpovel","id":48824213,"node_id":"MDQ6VXNlcjQ4ODI0MjEz","avatar_url":"https://avatars.githubusercontent.com/u/48824213?v=4","gravatar_id":"","url":"https://api.github.com/users/alexpovel","html_url":"https://github.com/alexpovel","followers_url":"https://api.github.com/users/alexpovel/followers","following_url":"https://api.github.com/users/alexpovel/following{/other_user}","gists_url":"https://api.github.com/users/alexpovel/gists{/gist_id}","starred_url":"https://api.github.com/users/alexpovel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexpovel/subscriptions","organizations_url":"https://api.github.com/users/alexpovel/orgs","repos_url":"https://api.github.com/users/alexpovel/repos","events_url":"https://api.github.com/users/alexpovel/events{/privacy}","received_events_url":"https://api.github.com/users/alexpovel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"ariebovenberg","id":5999858,"node_id":"MDQ6VXNlcjU5OTk4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5999858?v=4","gravatar_id":"","url":"https://api.github.com/users/ariebovenberg","html_url":"https://github.com/ariebovenberg","followers_url":"https://api.github.com/users/ariebovenberg/followers","following_url":"https://api.github.com/users/ariebovenberg/following{/other_user}","gists_url":"https://api.github.com/users/ariebovenberg/gists{/gist_id}","starred_url":"https://api.github.com/users/ariebovenberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ariebovenberg/subscriptions","organizations_url":"https://api.github.com/users/ariebovenberg/orgs","repos_url":"https://api.github.com/users/ariebovenberg/repos","events_url":"https://api.github.com/users/ariebovenberg/events{/privacy}","received_events_url":"https://api.github.com/users/ariebovenberg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-05T15:36:16Z","updated_at":"2022-09-05T15:36:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/13612","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/13612/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/13612/comments","events_url":"https://api.github.com/repos/python/mypy/issues/13612/events","html_url":"https://github.com/python/mypy/issues/13612","id":1362191716,"node_id":"I_kwDOAGuhRc5RMWVk","number":13612,"title":"Cannot deduce type of generic attributes within match statements","user":{"login":"ariebovenberg","id":5999858,"node_id":"MDQ6VXNlcjU5OTk4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5999858?v=4","gravatar_id":"","url":"https://api.github.com/users/ariebovenberg","html_url":"https://github.com/ariebovenberg","followers_url":"https://api.github.com/users/ariebovenberg/followers","following_url":"https://api.github.com/users/ariebovenberg/following{/other_user}","gists_url":"https://api.github.com/users/ariebovenberg/gists{/gist_id}","starred_url":"https://api.github.com/users/ariebovenberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ariebovenberg/subscriptions","organizations_url":"https://api.github.com/users/ariebovenberg/orgs","repos_url":"https://api.github.com/users/ariebovenberg/repos","events_url":"https://api.github.com/users/ariebovenberg/events{/privacy}","received_events_url":"https://api.github.com/users/ariebovenberg/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"},{"id":3945155924,"node_id":"LA_kwDOAGuhRc7rJk1U","url":"https://api.github.com/repos/python/mypy/labels/topic-type-narrowing","name":"topic-type-narrowing","color":"9F31C3","default":false,"description":"Conditional type narrowing / binder"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-09-05T15:36:16Z","updated_at":"2022-09-07T15:58:33Z","closed_at":"2022-09-07T15:58:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nIt seems like `mypy` is having trouble deducing the type of generic attributes in `match` statements. If `__match_args__` contains a generic attribute, this attribute becomes `Any` after `case` matching.\r\n\r\n**To Reproduce**\r\n\r\nRun `mypy` on the code below\r\n\r\n```python\r\nfrom typing import Generic, TypeVar\r\n\r\nT = TypeVar(\"T\")\r\n\r\n\r\nclass A(Generic[T]):\r\n    x: T\r\n\r\n    __match_args__ = (\"x\",)\r\n\r\n    def __init__(self, x: T):\r\n        self.x = x\r\n\r\n\r\na = A(\"foo\")\r\nreveal_type(a)  # A[str] (correct)\r\nreveal_type(a.x)  # builtins.str (correct)\r\n\r\nmatch a:\r\n    case A(b):\r\n        reveal_type(b)  # Any (incorrect! Should be builtins.str)\r\n```\r\n\r\n**Expected Behavior**\r\n\r\nThe total output should be:\r\n\r\n```\r\nRevealed type is \"mycode.A[builtins.str]\"\r\nRevealed type is \"builtins.str\"\r\nRevealed type is \"builtins.str\"\r\n```\r\n\r\n**Actual Behavior**\r\n\r\nthe last line doesn't reveal `builtins.str`\r\n\r\n```\r\nRevealed type is \"mycode.A[builtins.str]\"\r\nRevealed type is \"builtins.str\"\r\nRevealed type is \"Any\"\r\n```\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 0.971 (also occurs on `master` branch)\r\n- Mypy command-line flags: none\r\n- Mypy configuration options from `mypy.ini` (and other config files): none\r\n- Python version used: 3.10.5\r\n- Operating system and version: MacOS 12.5.1\r\n\r\n**What I've found so far**\r\n\r\n- If we declare `A` as a minimal dataclass the attribute _is_ correctly inferred! \r\n\r\n  ```python\r\n  @dataclass\r\n  class A(Generic[T]):\r\n      x: T\r\n  ```\r\n\r\n- If the `case` explicitly matches on the attribute name, it also correctly infers the type:\r\n  \r\n  ```python\r\n  match a:\r\n      case A(x=b):\r\n          reveal_type(b)  # builtins.str (correct)\r\n  ```\r\n\r\n- Issue #12364 may be related\r\n- PEP626 mentions [generics are special](https://peps.python.org/pep-0622/#type-erasure), but the examples don't appear relevant to this case.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/13612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/13612/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"tmke8","id":7741417,"node_id":"MDQ6VXNlcjc3NDE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/7741417?v=4","gravatar_id":"","url":"https://api.github.com/users/tmke8","html_url":"https://github.com/tmke8","followers_url":"https://api.github.com/users/tmke8/followers","following_url":"https://api.github.com/users/tmke8/following{/other_user}","gists_url":"https://api.github.com/users/tmke8/gists{/gist_id}","starred_url":"https://api.github.com/users/tmke8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmke8/subscriptions","organizations_url":"https://api.github.com/users/tmke8/orgs","repos_url":"https://api.github.com/users/tmke8/repos","events_url":"https://api.github.com/users/tmke8/events{/privacy}","received_events_url":"https://api.github.com/users/tmke8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-02T12:57:56Z","updated_at":"2022-11-02T12:57:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/13989","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/13989/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/13989/comments","events_url":"https://api.github.com/repos/python/mypy/issues/13989/events","html_url":"https://github.com/python/mypy/issues/13989","id":1432720788,"node_id":"I_kwDOAGuhRc5VZZWU","number":13989,"title":"Broken reachability checks in match-case","user":{"login":"denballakh","id":47365157,"node_id":"MDQ6VXNlcjQ3MzY1MTU3","avatar_url":"https://avatars.githubusercontent.com/u/47365157?v=4","gravatar_id":"","url":"https://api.github.com/users/denballakh","html_url":"https://github.com/denballakh","followers_url":"https://api.github.com/users/denballakh/followers","following_url":"https://api.github.com/users/denballakh/following{/other_user}","gists_url":"https://api.github.com/users/denballakh/gists{/gist_id}","starred_url":"https://api.github.com/users/denballakh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denballakh/subscriptions","organizations_url":"https://api.github.com/users/denballakh/orgs","repos_url":"https://api.github.com/users/denballakh/repos","events_url":"https://api.github.com/users/denballakh/events{/privacy}","received_events_url":"https://api.github.com/users/denballakh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"},{"id":3945119299,"node_id":"LA_kwDOAGuhRc7rJb5D","url":"https://api.github.com/repos/python/mypy/labels/topic-reachability","name":"topic-reachability","color":"2EC6A6","default":false,"description":"Detecting unreachable code"},{"id":3945155924,"node_id":"LA_kwDOAGuhRc7rJk1U","url":"https://api.github.com/repos/python/mypy/labels/topic-type-narrowing","name":"topic-type-narrowing","color":"9F31C3","default":false,"description":"Conditional type narrowing / binder"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-11-02T08:41:29Z","updated_at":"2023-08-14T23:51:05Z","closed_at":"2023-08-14T23:51:05Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\nI have two small similar examples for you:\r\n1:\r\n```py\r\ndef f(x: object, y: object) -> int | None: # Missing return statement\r\n    match x, y:\r\n        case int(), int() if True:\r\n            return 42\r\n        case _:\r\n            return None\r\n```\r\n\r\n2:\r\n```py\r\ndef f(x: object, y: object) -> int | None: # Missing return statement\r\n    match x, y:\r\n        case _, _ if True:\r\n            return 42\r\n        case _:\r\n            return None\r\n```\r\n**Expected Behavior**\r\n1. No `Missing return statement` error, because code after `match` statement is unreachable.\r\n2. No `Missing return statement` error and error `statement is unreachable` on line `case _:`\r\n \r\n**Actual Behavior**\r\n1. Error `Missing return statement`.\r\n2. Error `Missing return statement`. No `statement is unreachable` error on line `case _:`\r\n\r\nError `Missing return statement` will disappear if i remove `if True:` condition (in both cases).\r\nError `statement is unreachable` will appear if i replace `case _, _:` with `case _:`. Removing condition doesnt help.\r\n\r\n**Your Environment**\r\n- Mypy version used: mypy 0.982 (compiled: no)\r\n- Mypy command-line flags: no\r\n- Mypy configuration options from `mypy.ini`: no\r\n- Python version used: 3.11\r\n- Windows 10\r\n\r\n**And now for something a bit different**\r\n```py\r\ndef f(x: object, y: object) -> int | None:\r\n    match x, y:\r\n        case int(), int():\r\n            return x + y # Unsupported left operand type for + (\"object\")\r\n        case _:\r\n            return None\r\n```\r\nMypy cannot narrow types of tuple elements.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/13989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/13989/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"linabutler","id":41387967,"node_id":"MDQ6VXNlcjQxMzg3OTY3","avatar_url":"https://avatars.githubusercontent.com/u/41387967?v=4","gravatar_id":"","url":"https://api.github.com/users/linabutler","html_url":"https://github.com/linabutler","followers_url":"https://api.github.com/users/linabutler/followers","following_url":"https://api.github.com/users/linabutler/following{/other_user}","gists_url":"https://api.github.com/users/linabutler/gists{/gist_id}","starred_url":"https://api.github.com/users/linabutler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linabutler/subscriptions","organizations_url":"https://api.github.com/users/linabutler/orgs","repos_url":"https://api.github.com/users/linabutler/repos","events_url":"https://api.github.com/users/linabutler/events{/privacy}","received_events_url":"https://api.github.com/users/linabutler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-18T00:51:29Z","updated_at":"2023-02-18T00:51:29Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/14731","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/14731/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/14731/comments","events_url":"https://api.github.com/repos/python/mypy/issues/14731/events","html_url":"https://github.com/python/mypy/issues/14731","id":1590138534,"node_id":"I_kwDOAGuhRc5ex5am","number":14731,"title":"Narrowing and exhaustiveness errors when matching on a tuple of optionals","user":{"login":"linabutler","id":41387967,"node_id":"MDQ6VXNlcjQxMzg3OTY3","avatar_url":"https://avatars.githubusercontent.com/u/41387967?v=4","gravatar_id":"","url":"https://api.github.com/users/linabutler","html_url":"https://github.com/linabutler","followers_url":"https://api.github.com/users/linabutler/followers","following_url":"https://api.github.com/users/linabutler/following{/other_user}","gists_url":"https://api.github.com/users/linabutler/gists{/gist_id}","starred_url":"https://api.github.com/users/linabutler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linabutler/subscriptions","organizations_url":"https://api.github.com/users/linabutler/orgs","repos_url":"https://api.github.com/users/linabutler/repos","events_url":"https://api.github.com/users/linabutler/events{/privacy}","received_events_url":"https://api.github.com/users/linabutler/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-02-18T00:51:29Z","updated_at":"2023-11-03T07:51:50Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nWhen using `match` on a tuple of optionals, Mypy doesn't seem to:\r\n\r\n1. Narrow the type from `Optional[T]` to `T` in non-optional cases, even if all the `None` cases have been handled.\r\n2. Recognize that the match is exhaustive.\r\n\r\nThis feels similar to https://github.com/python/mypy/pull/12267#issuecomment-1058132318, or maybe #12364 or #13989, but the example is a little different; apologies if it's a dupe / already knownâ€”and thanks for taking a look!\r\n\r\n**To Reproduce**\r\n\r\nhttps://mypy-play.net/?mypy=latest&python=3.11&gist=b6c10a27006d7b5ad55729467c2c5de8\r\n\r\n**Expected Behavior**\r\n\r\nNo errors. ðŸ˜Š\r\n\r\nI've used this match-on-a-tuple pattern in [Rust](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=88766727d175d21a3057efebca474c8d) and [Swift](https://swiftfiddle.com/kh6kx3p6wfgl5csk7st3346yge) a few times, which is why I was a little surprised that Mypy didn't like it.\r\n\r\n**Actual Behavior**\r\n\r\n```\r\nmain.py:4: error: Missing return statement  [return]\r\nmain.py:9: error: Item \"None\" of \"Optional[str]\" has no attribute \"encode\"  [union-attr]\r\n```\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 1.0.0\r\n- Python version used: 3.11\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/14731/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/14731/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1510338458","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1510338458","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1510338458,"node_id":"IC_kwDOAGuhRc5aBe-a","user":{"login":"arseniiv","id":2574090,"node_id":"MDQ6VXNlcjI1NzQwOTA=","avatar_url":"https://avatars.githubusercontent.com/u/2574090?v=4","gravatar_id":"","url":"https://api.github.com/users/arseniiv","html_url":"https://github.com/arseniiv","followers_url":"https://api.github.com/users/arseniiv/followers","following_url":"https://api.github.com/users/arseniiv/following{/other_user}","gists_url":"https://api.github.com/users/arseniiv/gists{/gist_id}","starred_url":"https://api.github.com/users/arseniiv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arseniiv/subscriptions","organizations_url":"https://api.github.com/users/arseniiv/orgs","repos_url":"https://api.github.com/users/arseniiv/repos","events_url":"https://api.github.com/users/arseniiv/events{/privacy}","received_events_url":"https://api.github.com/users/arseniiv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-16T11:48:58Z","updated_at":"2023-04-16T11:48:58Z","body":"I have what appears the same issue (mypy 1.2, Python 3.11):\r\n\r\nA value of type `Token: = str | tuple[Literal['define'], str, str] | tuple[Literal['include'], str] | tuple[Literal['use'], str, int, int]` is matched upon in this manner:\r\n\r\n```python\r\nmatch token:\r\n    case str(x):\r\n        ...\r\n    case 'define', def_var, def_val:\r\n        reveal_type(token)\r\n        ...\r\n    case 'include', inc_path:\r\n        reveal_type(token)\r\n        ...\r\n    case 'use', use_var, lineno, column:\r\n        reveal_type(token)\r\n        ...\r\n    case _:\r\n        reveal_type(token)\r\n        assert_never(token)\r\n```\r\nIn each case the type revealed is the full union, without only a `str` which is succesfully filtered out by the first `case str(x)`, and then thereâ€™s an error in `assert_never(token)` because nothing had been narrowed.\r\n\r\nAlso `def_var` and other match variables are all typed as `object` and cause errors in their own steadâ€”but that here at least can be fixed by forcefully annotating them like `str(def_var)` and so on.\r\n\r\nAlso for some reason I donâ€™t see any errors from mypy in VS Code on this file, but I see them in droves when running it myself. ðŸ¤”","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1510338458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arseniiv","id":2574090,"node_id":"MDQ6VXNlcjI1NzQwOTA=","avatar_url":"https://avatars.githubusercontent.com/u/2574090?v=4","gravatar_id":"","url":"https://api.github.com/users/arseniiv","html_url":"https://github.com/arseniiv","followers_url":"https://api.github.com/users/arseniiv/followers","following_url":"https://api.github.com/users/arseniiv/following{/other_user}","gists_url":"https://api.github.com/users/arseniiv/gists{/gist_id}","starred_url":"https://api.github.com/users/arseniiv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arseniiv/subscriptions","organizations_url":"https://api.github.com/users/arseniiv/orgs","repos_url":"https://api.github.com/users/arseniiv/repos","events_url":"https://api.github.com/users/arseniiv/events{/privacy}","received_events_url":"https://api.github.com/users/arseniiv/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"erictraut","id":7040122,"node_id":"MDQ6VXNlcjcwNDAxMjI=","avatar_url":"https://avatars.githubusercontent.com/u/7040122?v=4","gravatar_id":"","url":"https://api.github.com/users/erictraut","html_url":"https://github.com/erictraut","followers_url":"https://api.github.com/users/erictraut/followers","following_url":"https://api.github.com/users/erictraut/following{/other_user}","gists_url":"https://api.github.com/users/erictraut/gists{/gist_id}","starred_url":"https://api.github.com/users/erictraut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erictraut/subscriptions","organizations_url":"https://api.github.com/users/erictraut/orgs","repos_url":"https://api.github.com/users/erictraut/repos","events_url":"https://api.github.com/users/erictraut/events{/privacy}","received_events_url":"https://api.github.com/users/erictraut/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-18T17:25:43Z","updated_at":"2023-04-18T17:25:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/pyright/issues/4971","repository_url":"https://api.github.com/repos/microsoft/pyright","labels_url":"https://api.github.com/repos/microsoft/pyright/issues/4971/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/pyright/issues/4971/comments","events_url":"https://api.github.com/repos/microsoft/pyright/issues/4971/events","html_url":"https://github.com/microsoft/pyright/issues/4971","id":1673552868,"node_id":"I_kwDOCnBEvM5jwGPk","number":4971,"title":"Subexpression type narrowing for match statements","user":{"login":"erictraut","id":7040122,"node_id":"MDQ6VXNlcjcwNDAxMjI=","avatar_url":"https://avatars.githubusercontent.com/u/7040122?v=4","gravatar_id":"","url":"https://api.github.com/users/erictraut","html_url":"https://github.com/erictraut","followers_url":"https://api.github.com/users/erictraut/followers","following_url":"https://api.github.com/users/erictraut/following{/other_user}","gists_url":"https://api.github.com/users/erictraut/gists{/gist_id}","starred_url":"https://api.github.com/users/erictraut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erictraut/subscriptions","organizations_url":"https://api.github.com/users/erictraut/orgs","repos_url":"https://api.github.com/users/erictraut/repos","events_url":"https://api.github.com/users/erictraut/events{/privacy}","received_events_url":"https://api.github.com/users/erictraut/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1268932464,"node_id":"MDU6TGFiZWwxMjY4OTMyNDY0","url":"https://api.github.com/repos/microsoft/pyright/labels/enhancement%20request","name":"enhancement request","color":"a2eeef","default":false,"description":"New feature or request"},{"id":1338600884,"node_id":"MDU6TGFiZWwxMzM4NjAwODg0","url":"https://api.github.com/repos/microsoft/pyright/labels/addressed%20in%20next%20version","name":"addressed in next version","color":"bfd4f2","default":false,"description":"Issue is fixed and will appear in next published version"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-18T17:25:43Z","updated_at":"2023-04-19T16:11:39Z","closed_at":"2023-04-19T16:11:38Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":175129788,"node_id":"MDEwOlJlcG9zaXRvcnkxNzUxMjk3ODg=","name":"pyright","full_name":"microsoft/pyright","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/pyright","description":"Static Type Checker for Python","fork":false,"url":"https://api.github.com/repos/microsoft/pyright","forks_url":"https://api.github.com/repos/microsoft/pyright/forks","keys_url":"https://api.github.com/repos/microsoft/pyright/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/pyright/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/pyright/teams","hooks_url":"https://api.github.com/repos/microsoft/pyright/hooks","issue_events_url":"https://api.github.com/repos/microsoft/pyright/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/pyright/events","assignees_url":"https://api.github.com/repos/microsoft/pyright/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/pyright/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/pyright/tags","blobs_url":"https://api.github.com/repos/microsoft/pyright/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/pyright/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/pyright/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/pyright/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/pyright/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/pyright/languages","stargazers_url":"https://api.github.com/repos/microsoft/pyright/stargazers","contributors_url":"https://api.github.com/repos/microsoft/pyright/contributors","subscribers_url":"https://api.github.com/repos/microsoft/pyright/subscribers","subscription_url":"https://api.github.com/repos/microsoft/pyright/subscription","commits_url":"https://api.github.com/repos/microsoft/pyright/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/pyright/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/pyright/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/pyright/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/pyright/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/pyright/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/pyright/merges","archive_url":"https://api.github.com/repos/microsoft/pyright/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/pyright/downloads","issues_url":"https://api.github.com/repos/microsoft/pyright/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/pyright/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/pyright/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/pyright/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/pyright/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/pyright/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/pyright/deployments","created_at":"2019-03-12T03:38:46Z","updated_at":"2025-11-09T18:14:33Z","pushed_at":"2025-11-02T07:12:18Z","git_url":"git://github.com/microsoft/pyright.git","ssh_url":"git@github.com:microsoft/pyright.git","clone_url":"https://github.com/microsoft/pyright.git","svn_url":"https://github.com/microsoft/pyright","homepage":"","size":126983,"stargazers_count":14957,"watchers_count":14957,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1747,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":150,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1747,"open_issues":150,"watchers":14957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Currently, pyright narrows only the subject expression of a match statement. However, there are cases where a subject expression contains a subexpression that could also be narrowed, at least in theory.\r\n\r\n* An example is provided in this thread: https://github.com/microsoft/pylance-release/issues/4248\r\n* Another example: https://github.com/python/mypy/issues/14731\r\n* Another example: https://github.com/python/mypy/issues/12364\r\n\r\nLikewise, expressions that utilize the subject as a subexpression could be narrowed, in theory.\r\n\r\n* An example: https://github.com/python/mypy/issues/14911\r\n\r\nI don't yet know if either of these can be implemented in a way that is computationally feasible, but it's worth investigating.","reactions":{"url":"https://api.github.com/repos/microsoft/pyright/issues/4971/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/pyright/issues/4971/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"sujuka99","id":44573859,"node_id":"MDQ6VXNlcjQ0NTczODU5","avatar_url":"https://avatars.githubusercontent.com/u/44573859?v=4","gravatar_id":"","url":"https://api.github.com/users/sujuka99","html_url":"https://github.com/sujuka99","followers_url":"https://api.github.com/users/sujuka99/followers","following_url":"https://api.github.com/users/sujuka99/following{/other_user}","gists_url":"https://api.github.com/users/sujuka99/gists{/gist_id}","starred_url":"https://api.github.com/users/sujuka99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujuka99/subscriptions","organizations_url":"https://api.github.com/users/sujuka99/orgs","repos_url":"https://api.github.com/users/sujuka99/repos","events_url":"https://api.github.com/users/sujuka99/events{/privacy}","received_events_url":"https://api.github.com/users/sujuka99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-25T16:16:51Z","updated_at":"2023-04-25T16:16:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/bakdata/kpops/issues/197","repository_url":"https://api.github.com/repos/bakdata/kpops","labels_url":"https://api.github.com/repos/bakdata/kpops/issues/197/labels{/name}","comments_url":"https://api.github.com/repos/bakdata/kpops/issues/197/comments","events_url":"https://api.github.com/repos/bakdata/kpops/issues/197/events","html_url":"https://github.com/bakdata/kpops/pull/197","id":1678337317,"node_id":"PR_kwDOIoJ0fc5O2kNy","number":197,"title":"Generate schema in CI","user":{"login":"sujuka99","id":44573859,"node_id":"MDQ6VXNlcjQ0NTczODU5","avatar_url":"https://avatars.githubusercontent.com/u/44573859?v=4","gravatar_id":"","url":"https://api.github.com/users/sujuka99","html_url":"https://github.com/sujuka99","followers_url":"https://api.github.com/users/sujuka99/followers","following_url":"https://api.github.com/users/sujuka99/following{/other_user}","gists_url":"https://api.github.com/users/sujuka99/gists{/gist_id}","starred_url":"https://api.github.com/users/sujuka99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujuka99/subscriptions","organizations_url":"https://api.github.com/users/sujuka99/orgs","repos_url":"https://api.github.com/users/sujuka99/repos","events_url":"https://api.github.com/users/sujuka99/events{/privacy}","received_events_url":"https://api.github.com/users/sujuka99/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"sujuka99","id":44573859,"node_id":"MDQ6VXNlcjQ0NTczODU5","avatar_url":"https://avatars.githubusercontent.com/u/44573859?v=4","gravatar_id":"","url":"https://api.github.com/users/sujuka99","html_url":"https://github.com/sujuka99","followers_url":"https://api.github.com/users/sujuka99/followers","following_url":"https://api.github.com/users/sujuka99/following{/other_user}","gists_url":"https://api.github.com/users/sujuka99/gists{/gist_id}","starred_url":"https://api.github.com/users/sujuka99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujuka99/subscriptions","organizations_url":"https://api.github.com/users/sujuka99/orgs","repos_url":"https://api.github.com/users/sujuka99/repos","events_url":"https://api.github.com/users/sujuka99/events{/privacy}","received_events_url":"https://api.github.com/users/sujuka99/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sujuka99","id":44573859,"node_id":"MDQ6VXNlcjQ0NTczODU5","avatar_url":"https://avatars.githubusercontent.com/u/44573859?v=4","gravatar_id":"","url":"https://api.github.com/users/sujuka99","html_url":"https://github.com/sujuka99","followers_url":"https://api.github.com/users/sujuka99/followers","following_url":"https://api.github.com/users/sujuka99/following{/other_user}","gists_url":"https://api.github.com/users/sujuka99/gists{/gist_id}","starred_url":"https://api.github.com/users/sujuka99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujuka99/subscriptions","organizations_url":"https://api.github.com/users/sujuka99/orgs","repos_url":"https://api.github.com/users/sujuka99/repos","events_url":"https://api.github.com/users/sujuka99/events{/privacy}","received_events_url":"https://api.github.com/users/sujuka99/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-04-21T11:07:54Z","updated_at":"2023-04-27T11:45:26Z","closed_at":"2023-04-27T11:45:25Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":578974845,"node_id":"R_kgDOIoJ0fQ","name":"kpops","full_name":"bakdata/kpops","private":false,"owner":{"login":"bakdata","id":5708890,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU3MDg4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/5708890?v=4","gravatar_id":"","url":"https://api.github.com/users/bakdata","html_url":"https://github.com/bakdata","followers_url":"https://api.github.com/users/bakdata/followers","following_url":"https://api.github.com/users/bakdata/following{/other_user}","gists_url":"https://api.github.com/users/bakdata/gists{/gist_id}","starred_url":"https://api.github.com/users/bakdata/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bakdata/subscriptions","organizations_url":"https://api.github.com/users/bakdata/orgs","repos_url":"https://api.github.com/users/bakdata/repos","events_url":"https://api.github.com/users/bakdata/events{/privacy}","received_events_url":"https://api.github.com/users/bakdata/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/bakdata/kpops","description":"Deploy Kafka pipelines to Kubernetes","fork":false,"url":"https://api.github.com/repos/bakdata/kpops","forks_url":"https://api.github.com/repos/bakdata/kpops/forks","keys_url":"https://api.github.com/repos/bakdata/kpops/keys{/key_id}","collaborators_url":"https://api.github.com/repos/bakdata/kpops/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/bakdata/kpops/teams","hooks_url":"https://api.github.com/repos/bakdata/kpops/hooks","issue_events_url":"https://api.github.com/repos/bakdata/kpops/issues/events{/number}","events_url":"https://api.github.com/repos/bakdata/kpops/events","assignees_url":"https://api.github.com/repos/bakdata/kpops/assignees{/user}","branches_url":"https://api.github.com/repos/bakdata/kpops/branches{/branch}","tags_url":"https://api.github.com/repos/bakdata/kpops/tags","blobs_url":"https://api.github.com/repos/bakdata/kpops/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/bakdata/kpops/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/bakdata/kpops/git/refs{/sha}","trees_url":"https://api.github.com/repos/bakdata/kpops/git/trees{/sha}","statuses_url":"https://api.github.com/repos/bakdata/kpops/statuses/{sha}","languages_url":"https://api.github.com/repos/bakdata/kpops/languages","stargazers_url":"https://api.github.com/repos/bakdata/kpops/stargazers","contributors_url":"https://api.github.com/repos/bakdata/kpops/contributors","subscribers_url":"https://api.github.com/repos/bakdata/kpops/subscribers","subscription_url":"https://api.github.com/repos/bakdata/kpops/subscription","commits_url":"https://api.github.com/repos/bakdata/kpops/commits{/sha}","git_commits_url":"https://api.github.com/repos/bakdata/kpops/git/commits{/sha}","comments_url":"https://api.github.com/repos/bakdata/kpops/comments{/number}","issue_comment_url":"https://api.github.com/repos/bakdata/kpops/issues/comments{/number}","contents_url":"https://api.github.com/repos/bakdata/kpops/contents/{+path}","compare_url":"https://api.github.com/repos/bakdata/kpops/compare/{base}...{head}","merges_url":"https://api.github.com/repos/bakdata/kpops/merges","archive_url":"https://api.github.com/repos/bakdata/kpops/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/bakdata/kpops/downloads","issues_url":"https://api.github.com/repos/bakdata/kpops/issues{/number}","pulls_url":"https://api.github.com/repos/bakdata/kpops/pulls{/number}","milestones_url":"https://api.github.com/repos/bakdata/kpops/milestones{/number}","notifications_url":"https://api.github.com/repos/bakdata/kpops/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/bakdata/kpops/labels{/name}","releases_url":"https://api.github.com/repos/bakdata/kpops/releases{/id}","deployments_url":"https://api.github.com/repos/bakdata/kpops/deployments","created_at":"2022-12-16T10:46:32Z","updated_at":"2025-10-08T13:39:47Z","pushed_at":"2025-10-24T10:13:58Z","git_url":"git://github.com/bakdata/kpops.git","ssh_url":"git@github.com:bakdata/kpops.git","clone_url":"https://github.com/bakdata/kpops.git","svn_url":"https://github.com/bakdata/kpops","homepage":"https://bakdata.github.io/kpops","size":29011,"stargazers_count":14,"watchers_count":14,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":3,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":46,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["kafka","kafka-connect","kafka-streams","kubernetes","pipelines","stream-processing"],"visibility":"public","forks":3,"open_issues":46,"watchers":14,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/bakdata/kpops/pulls/197","html_url":"https://github.com/bakdata/kpops/pull/197","diff_url":"https://github.com/bakdata/kpops/pull/197.diff","patch_url":"https://github.com/bakdata/kpops/pull/197.patch","merged_at":"2023-04-27T11:45:25Z"},"body":"closes #71 ","reactions":{"url":"https://api.github.com/repos/bakdata/kpops/issues/197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bakdata/kpops/issues/197/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"tmke8","id":7741417,"node_id":"MDQ6VXNlcjc3NDE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/7741417?v=4","gravatar_id":"","url":"https://api.github.com/users/tmke8","html_url":"https://github.com/tmke8","followers_url":"https://api.github.com/users/tmke8/followers","following_url":"https://api.github.com/users/tmke8/following{/other_user}","gists_url":"https://api.github.com/users/tmke8/gists{/gist_id}","starred_url":"https://api.github.com/users/tmke8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmke8/subscriptions","organizations_url":"https://api.github.com/users/tmke8/orgs","repos_url":"https://api.github.com/users/tmke8/repos","events_url":"https://api.github.com/users/tmke8/events{/privacy}","received_events_url":"https://api.github.com/users/tmke8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-06T09:31:54Z","updated_at":"2023-05-06T09:31:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/15190","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/15190/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/15190/comments","events_url":"https://api.github.com/repos/python/mypy/issues/15190/events","html_url":"https://github.com/python/mypy/issues/15190","id":1697255870,"node_id":"I_kwDOAGuhRc5lKhG-","number":15190,"title":"Unable to narrow the type of a tagged union when using a match statement","user":{"login":"jonathan-laurent","id":6361331,"node_id":"MDQ6VXNlcjYzNjEzMzE=","avatar_url":"https://avatars.githubusercontent.com/u/6361331?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathan-laurent","html_url":"https://github.com/jonathan-laurent","followers_url":"https://api.github.com/users/jonathan-laurent/followers","following_url":"https://api.github.com/users/jonathan-laurent/following{/other_user}","gists_url":"https://api.github.com/users/jonathan-laurent/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathan-laurent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathan-laurent/subscriptions","organizations_url":"https://api.github.com/users/jonathan-laurent/orgs","repos_url":"https://api.github.com/users/jonathan-laurent/repos","events_url":"https://api.github.com/users/jonathan-laurent/events{/privacy}","received_events_url":"https://api.github.com/users/jonathan-laurent/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":1135828272,"node_id":"MDU6TGFiZWwxMTM1ODI4Mjcy","url":"https://api.github.com/repos/python/mypy/labels/topic-literal-types","name":"topic-literal-types","color":"f4c997","default":false,"description":""},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"},{"id":3945155924,"node_id":"LA_kwDOAGuhRc7rJk1U","url":"https://api.github.com/repos/python/mypy/labels/topic-type-narrowing","name":"topic-type-narrowing","color":"9F31C3","default":false,"description":"Conditional type narrowing / binder"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-05-05T08:57:47Z","updated_at":"2023-05-06T17:54:37Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nMypy is unable to narrow the type of a tagged union when deconstructing it using a `match` statement.\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nfrom typing import Literal, TypeAlias\r\n\r\n\r\nExpr: TypeAlias = (\r\n    tuple[Literal[\"const\"], int] | tuple[Literal[\"add\"], tuple[\"Expr\", \"Expr\"]]\r\n)\r\n\r\n\r\n# OK\r\ndef eval(e: Expr) -> int:\r\n    if e[0] == \"const\":\r\n        return e[1]\r\n    else:\r\n        e1, e2 = e[1]\r\n        return eval(e1) + eval(e2)\r\n\r\n\r\n# Rejected by mypy (see errors below)\r\ndef eval2(e: Expr) -> int:\r\n    match e:\r\n        case (\"const\", x):\r\n            return x\r\n        case (\"add\", (e1, e2)):\r\n            return eval2(e1) + eval2(e2)\r\n```\r\n\r\n\r\n**Expected Behavior**\r\n\r\nBoth `eval` and `eval2` should typecheck.\r\n\r\n**Actual Behavior**\r\n\r\nFunction `eval` typechecks but `eval2` does not.\r\n\r\n[Mypy playground link](https://mypy-play.net/?mypy=latest&python=3.11&gist=1cefa76fd10d3063c0071a227a075a69)\r\n\r\n```txt\r\nmain.py:19: error: Missing return statement  [return]\r\nmain.py:22: error: Incompatible return value type (got \"object\", expected \"int\")  [return-value]\r\nmain.py:24: error: Argument 1 to \"eval2\" has incompatible type \"object\"; expected \"Expr\"  [arg-type]\r\nFound 3 errors in 1 file (checked 1 source file)\r\n```\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 1.2.0\r\n- Mypy command-line flags: none\r\n- Mypy configuration options from `mypy.ini` (and other config files): none\r\n- Python version used: 3.11\r\n\r\n<!-- You can freely edit this text, please remove all the lines you believe are unnecessary. -->\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/15190/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/15190/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"tmke8","id":7741417,"node_id":"MDQ6VXNlcjc3NDE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/7741417?v=4","gravatar_id":"","url":"https://api.github.com/users/tmke8","html_url":"https://github.com/tmke8","followers_url":"https://api.github.com/users/tmke8/followers","following_url":"https://api.github.com/users/tmke8/following{/other_user}","gists_url":"https://api.github.com/users/tmke8/gists{/gist_id}","starred_url":"https://api.github.com/users/tmke8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmke8/subscriptions","organizations_url":"https://api.github.com/users/tmke8/orgs","repos_url":"https://api.github.com/users/tmke8/repos","events_url":"https://api.github.com/users/tmke8/events{/privacy}","received_events_url":"https://api.github.com/users/tmke8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-13T09:58:42Z","updated_at":"2023-06-13T09:58:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/15426","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/15426/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/15426/comments","events_url":"https://api.github.com/repos/python/mypy/issues/15426/events","html_url":"https://github.com/python/mypy/issues/15426","id":1754340516,"node_id":"I_kwDOAGuhRc5okRyk","number":15426,"title":"Match statement with tuple of union type fails","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"},{"id":3945155924,"node_id":"LA_kwDOAGuhRc7rJk1U","url":"https://api.github.com/repos/python/mypy/labels/topic-type-narrowing","name":"topic-type-narrowing","color":"9F31C3","default":false,"description":"Conditional type narrowing / binder"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-06-13T08:32:51Z","updated_at":"2025-08-19T15:22:33Z","closed_at":"2025-01-13T06:27:48Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\nIf you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form instead.\r\nPlease consider:\r\n\r\n- checking our common issues page: https://mypy.readthedocs.io/en/stable/common_issues.html\r\n- searching our issue tracker: https://github.com/python/mypy/issues to see if it's already been reported\r\n- asking on gitter chat: https://gitter.im/python/typing\r\n-->\r\n\r\n**Bug Report**\r\n\r\n<!--\r\nIf you're reporting a problem with a specific library function, the typeshed tracker is better suited for this report: https://github.com/python/typeshed/issues\r\n\r\nIf the project you encountered the issue in is open source, please provide a link to the project.\r\n-->\r\n\r\nI am typechecking a match statement with a tuple of union types and it fails.\r\n\r\n**To Reproduce**\r\n\r\nPlayground: https://mypy-play.net/?mypy=latest&python=3.10&gist=992b588ec7e4807f3105db45fa9ef0a8\r\n\r\n\r\n\r\nMy union type: \r\n\r\n```python\r\nTransactionType = str | int | None\r\n```\r\n\r\n(Problem persists even if I do:\r\n```python\r\nfrom typing import Union\r\nTransactionType = Union[str | int | None]\r\n```\r\n)\r\n\r\n\r\n\r\nThis works fine:\r\n```python\r\ndef test(a: TransactionType) -> bool:\r\n    match a:\r\n        case str():\r\n            a.lower()\r\n            return True\r\n        case _:\r\n            return False\r\n```\r\n\r\nThis causes an error:\r\n```python\r\ndef test2(a: TransactionType, b: TransactionType) -> bool:\r\n    match a,b:\r\n        case str(), _:\r\n            a.lower()\r\n            return True\r\n        case _:\r\n            return False\r\n```\r\n\r\n\r\n\r\n\r\n\r\n**Actual Behavior**\r\n\r\n```\r\nmain.py:13: error: Item \"int\" of \"Union[str, int, None]\" has no attribute \"lower\"  [union-attr]\r\nmain.py:13: error: Item \"None\" of \"Union[str, int, None]\" has no attribute \"lower\"  [union-attr]\r\nFound 2 errors in 1 file (checked 1 source file)\r\n```\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 1.3.0\r\n- Mypy command-line flags: None\r\n- Mypy configuration options from `mypy.ini` (and other config files): None\r\n- Python version used: 3.10 (also tested on 3.11, same problem)\r\n\r\n<!-- You can freely edit this text, please remove all the lines you believe are unnecessary. -->\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/15426/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/15426/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1602761423","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1602761423","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1602761423,"node_id":"IC_kwDOAGuhRc5fiDLP","user":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T14:40:41Z","updated_at":"2023-06-22T14:40:41Z","body":"I encountered a similar issue with mapping unpacking, I suppose it fits here:\r\n\r\n```py\r\nvalues: list[str] | dict[str, str] = ...\r\n\r\nmatch values:\r\n    case {\"key\": value}:\r\n        reveal_type(value)\r\n```\r\n\r\nproduces\r\n\r\n```\r\nRevealed type is \"Union[Any, builtins.str]\"\r\n```\r\n\r\nInterestingly, if I replace the first line by `values: dict[str, str]` or even `values: str | dict[str, str]`, I got the expected \r\n```\r\nRevealed type is \"builtins.str\"\r\n```\r\n\r\nLooks like mixing list and dict causes an issue here?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1602761423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1836927742","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1836927742","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1836927742,"node_id":"IC_kwDOAGuhRc5tfUr-","user":{"login":"wrzian","id":133046678,"node_id":"U_kgDOB-4hlg","avatar_url":"https://avatars.githubusercontent.com/u/133046678?v=4","gravatar_id":"","url":"https://api.github.com/users/wrzian","html_url":"https://github.com/wrzian","followers_url":"https://api.github.com/users/wrzian/followers","following_url":"https://api.github.com/users/wrzian/following{/other_user}","gists_url":"https://api.github.com/users/wrzian/gists{/gist_id}","starred_url":"https://api.github.com/users/wrzian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wrzian/subscriptions","organizations_url":"https://api.github.com/users/wrzian/orgs","repos_url":"https://api.github.com/users/wrzian/repos","events_url":"https://api.github.com/users/wrzian/events{/privacy}","received_events_url":"https://api.github.com/users/wrzian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T23:42:07Z","updated_at":"2023-12-01T23:42:07Z","body":"Ran into this with a two boolean unpacking\r\n```python\r\ndef returns_int(one: bool, two: bool) -> int:\r\n    match one, two:\r\n        case False, False: return 0\r\n        case False, True: return 1\r\n        case True, False: return 2\r\n        case True, True: return 3\r\n```\r\nDon't make me use three if-elses and double the linecount :cry:","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1836927742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wrzian","id":133046678,"node_id":"U_kgDOB-4hlg","avatar_url":"https://avatars.githubusercontent.com/u/133046678?v=4","gravatar_id":"","url":"https://api.github.com/users/wrzian","html_url":"https://github.com/wrzian","followers_url":"https://api.github.com/users/wrzian/followers","following_url":"https://api.github.com/users/wrzian/following{/other_user}","gists_url":"https://api.github.com/users/wrzian/gists{/gist_id}","starred_url":"https://api.github.com/users/wrzian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wrzian/subscriptions","organizations_url":"https://api.github.com/users/wrzian/orgs","repos_url":"https://api.github.com/users/wrzian/repos","events_url":"https://api.github.com/users/wrzian/events{/privacy}","received_events_url":"https://api.github.com/users/wrzian/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"tmke8","id":7741417,"node_id":"MDQ6VXNlcjc3NDE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/7741417?v=4","gravatar_id":"","url":"https://api.github.com/users/tmke8","html_url":"https://github.com/tmke8","followers_url":"https://api.github.com/users/tmke8/followers","following_url":"https://api.github.com/users/tmke8/following{/other_user}","gists_url":"https://api.github.com/users/tmke8/gists{/gist_id}","starred_url":"https://api.github.com/users/tmke8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmke8/subscriptions","organizations_url":"https://api.github.com/users/tmke8/orgs","repos_url":"https://api.github.com/users/tmke8/repos","events_url":"https://api.github.com/users/tmke8/events{/privacy}","received_events_url":"https://api.github.com/users/tmke8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-12T09:38:06Z","updated_at":"2023-12-12T09:38:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/16650","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/16650/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/16650/comments","events_url":"https://api.github.com/repos/python/mypy/issues/16650/events","html_url":"https://github.com/python/mypy/issues/16650","id":2037260600,"node_id":"I_kwDOAGuhRc55biE4","number":16650,"title":"Exhaustive checks with `assert_never` when using `match` on a 2-tuple fails","user":{"login":"MaxG87","id":5477952,"node_id":"MDQ6VXNlcjU0Nzc5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/5477952?v=4","gravatar_id":"","url":"https://api.github.com/users/MaxG87","html_url":"https://github.com/MaxG87","followers_url":"https://api.github.com/users/MaxG87/followers","following_url":"https://api.github.com/users/MaxG87/following{/other_user}","gists_url":"https://api.github.com/users/MaxG87/gists{/gist_id}","starred_url":"https://api.github.com/users/MaxG87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaxG87/subscriptions","organizations_url":"https://api.github.com/users/MaxG87/orgs","repos_url":"https://api.github.com/users/MaxG87/repos","events_url":"https://api.github.com/users/MaxG87/events{/privacy}","received_events_url":"https://api.github.com/users/MaxG87/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-12-12T08:43:51Z","updated_at":"2025-08-03T22:42:55Z","closed_at":"2025-08-03T22:42:55Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nI learned about `assert_never`, with which checks for exhaustiveness can be performed. I wanted to use it in a match statement where I want to cover all 4 possible scenarios of a `tuple[int|None, int|None]`. Unfortunately, when adding the catch-all `case` arm that contains `typing.assert_never`, I get a typing error indicating a non-exhaustive check above.\r\n\r\nThe error persists in a couple of variations. In particular, it persists when using 1-tuple. However, when matching on one value directly, using `assert_never` works as intended.\r\n\r\n\r\n**To Reproduce**\r\n\r\nhttps://gist.github.com/mypy-play/1df3d1b4c9e82226df17094a9f9c6af5\r\nhttps://mypy-play.net/?mypy=latest&python=3.12&gist=1df3d1b4c9e82226df17094a9f9c6af5\r\n\r\n\r\n**Expected Behavior**\r\n\r\nAll examples in the provided Gist should pass the type checks.\r\n\r\n\r\n**Actual Behavior**\r\n\r\nMypy rejects the first three functions of the Gist. In particular, it's output reads:\r\n\r\n> Failed (exit code: 1) (2476 ms)\r\n> \r\n> main.py:22: error: Argument 1 to \"assert_never\" has incompatible type \"int | None\"; expected \"NoReturn\"  [arg-type]\r\n> main.py:43: error: Argument 1 to \"assert_never\" has incompatible type \"int | None\"; expected \"NoReturn\"  [arg-type]\r\n> main.py:58: error: Argument 1 to \"assert_never\" has incompatible type \"int | None\"; expected \"NoReturn\"  [arg-type]\r\n> Found 3 errors in 1 file (checked 1 source file)\r\n\r\n\r\n**Your Environment**\r\n\r\nSince I am using the Gist, I hope my particular environment doesn't matter much.\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/16650/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/16650/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1852196772","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1852196772","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1852196772,"node_id":"IC_kwDOAGuhRc5uZkek","user":{"login":"alenzo-arch","id":143009161,"node_id":"U_kgDOCIYliQ","avatar_url":"https://avatars.githubusercontent.com/u/143009161?v=4","gravatar_id":"","url":"https://api.github.com/users/alenzo-arch","html_url":"https://github.com/alenzo-arch","followers_url":"https://api.github.com/users/alenzo-arch/followers","following_url":"https://api.github.com/users/alenzo-arch/following{/other_user}","gists_url":"https://api.github.com/users/alenzo-arch/gists{/gist_id}","starred_url":"https://api.github.com/users/alenzo-arch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alenzo-arch/subscriptions","organizations_url":"https://api.github.com/users/alenzo-arch/orgs","repos_url":"https://api.github.com/users/alenzo-arch/repos","events_url":"https://api.github.com/users/alenzo-arch/events{/privacy}","received_events_url":"https://api.github.com/users/alenzo-arch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-12T14:55:26Z","updated_at":"2023-12-12T15:14:26Z","body":"I see a a number of others have provided minimal reproducible examples so I am including mine as is just for another reference point.\r\n\r\nMyPy Version: 1.5.0\r\nError: `Argument 1 to \"assert_never\" has incompatible type \"tuple[float | None, float | None, float | None]\"; expected \"NoReturn\"` \r\n\r\n```python\r\nfrom enum import StrEnum\r\nfrom typing import assert_never\r\n\r\nfrom pydantic import BaseModel\r\n\r\n\r\nclass InvalidExpectedComparatorException(Exception):\r\n    def __init__(\r\n        self,\r\n        minimum: float | None,\r\n        maximum: float | None,\r\n        nominal: float | None,\r\n        comparator: \"ProcessStepStatus.MeasurementElement.ExpectedNumericElement.ComparatorOpts | None\",\r\n        detail: str = \"\",\r\n    ) -> None:\r\n        \"\"\"Raised by `ProcessStepStatus.MeasurementElement.targets()` when the combination of an ExpectedNumericElement\r\n        minimum, maximum, nominal, and comparator do not meet the requirements in IPC-2547 sec 4.5.9.\r\n        \"\"\"\r\n        # pylint: disable=line-too-long\r\n        self.minimum = minimum\r\n        self.maximum = maximum\r\n        self.nominal = nominal\r\n        self.comparator = comparator\r\n        self.detail = detail\r\n        self.message = f\"\"\"Supplied nominal, min, and max do not meet IPC-2547 sec 4.5.9 spec for ExpectedNumeric.\r\ndetail: {detail}\r\nnominal:  {nominal}\r\nminimum: {minimum}\r\nmaximum: {maximum}\r\ncomparator: {comparator}\r\n\"\"\"\r\n        super().__init__(self.message)\r\n\r\n\r\nclass ExpectedNumericElement(BaseModel):\r\n    \"\"\"An expected numeric value, units and decade with minimum and maximum values\r\n    that define the measurement tolerance window. Minimum and maximum limits shall be in the\r\n    same units and decade as the nominal. When nominal, minimum and/or maximum attributes are\r\n    present the minimum shall be the least, maximum shall be the greatest and the nominal shall\r\n    fall between these values.\r\n    \"\"\"\r\n\r\n    nominal: float | None = None\r\n    units: str | None = None\r\n    decade: float = 0.0  # optional in schema but says default to 0\r\n    minimum: float | None = None\r\n    maximum: float | None = None\r\n    comparator: \"ComparatorOpts | None\" = None\r\n    position: list[str] | None = None\r\n\r\n    class ComparatorOpts(StrEnum):\r\n        EQ = \"EQ\"\r\n        NE = \"NE\"\r\n        GT = \"GT\"\r\n        LT = \"LT\"\r\n        GE = \"GE\"\r\n        LE = \"LE\"\r\n        GTLT = \"GTLT\"\r\n        GELE = \"GELE\"\r\n        GTLE = \"GTLE\"\r\n        GELT = \"GELT\"\r\n        LTGT = \"LTGT\"\r\n        LEGE = \"LEGE\"\r\n        LTGE = \"LTGE\"\r\n        LEGT = \"LEGT\"\r\n\r\n\r\nexpected = ExpectedNumericElement()\r\n\r\nif expected.comparator is None:\r\n    comp_types = ExpectedNumericElement.ComparatorOpts\r\n    # If no comparator is expressed the following shall apply:\r\n    match expected.minimum, expected.maximum, expected.nominal:\r\n        case float(), float(), float():\r\n            # If both limits are present then the default shall be GELE. (the nominal is optional).\r\n            comparator = comp_types.GELE\r\n        case float(), float(), None:\r\n            # If both limits are present then the default shall be GELE. (the nominal is optional).\r\n            comparator = comp_types.GELE\r\n        case float(), None, float():\r\n            # If only the lower limit is present then the default shall be GE.\r\n            comparator = comp_types.GE\r\n        case None, float(), float():\r\n            # If only the upper limit is present then the default shall be LE.\r\n            comparator = comp_types.LE\r\n        case None, None, float():\r\n            # If only the nominal is present then the default shall be EQ.\r\n            comparator = comp_types.EQ\r\n        case None as minimum, None as maximum, None as nom:\r\n            raise InvalidExpectedComparatorException(\r\n                minimum, maximum, nom, expected.comparator, \"No minimum, maximum or, nominal present.\"\r\n            )\r\n        case float() as minimum, None as maximum, None as nom:\r\n            raise InvalidExpectedComparatorException(\r\n                minimum, maximum, nom, expected.comparator, \"Minimum without maximum or nominal.\"\r\n            )\r\n        case None as minimum, float() as maximum, None as nom:\r\n            raise InvalidExpectedComparatorException(\r\n                minimum, maximum, nom, expected.comparator, \"Maximum without minimum\"\r\n            )\r\n        case _:\r\n            # NOTE: Known issue with mypy here narrowing types for tuples so assert_never doesn't work\r\n            # https://github.com/python/mypy/issues/14833\r\n            # https://github.com/python/mypy/issues/12364\r\n            assert_never((expected.minimum, expected.maximum, expected.nominal))\r\n\r\n            # raise InvalidExpectedComparatorException(\r\n            #    expected.minimum,\r\n            #    expected.maximum,\r\n            #    expected.nominal,\r\n            #   expected.comparator,\r\n            #    \"Expected unreachable\",\r\n            # )\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1852196772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alenzo-arch","id":143009161,"node_id":"U_kgDOCIYliQ","avatar_url":"https://avatars.githubusercontent.com/u/143009161?v=4","gravatar_id":"","url":"https://api.github.com/users/alenzo-arch","html_url":"https://github.com/alenzo-arch","followers_url":"https://api.github.com/users/alenzo-arch/followers","following_url":"https://api.github.com/users/alenzo-arch/following{/other_user}","gists_url":"https://api.github.com/users/alenzo-arch/gists{/gist_id}","starred_url":"https://api.github.com/users/alenzo-arch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alenzo-arch/subscriptions","organizations_url":"https://api.github.com/users/alenzo-arch/orgs","repos_url":"https://api.github.com/users/alenzo-arch/repos","events_url":"https://api.github.com/users/alenzo-arch/events{/privacy}","received_events_url":"https://api.github.com/users/alenzo-arch/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"jgarvin","id":102322,"node_id":"MDQ6VXNlcjEwMjMyMg==","avatar_url":"https://avatars.githubusercontent.com/u/102322?v=4","gravatar_id":"","url":"https://api.github.com/users/jgarvin","html_url":"https://github.com/jgarvin","followers_url":"https://api.github.com/users/jgarvin/followers","following_url":"https://api.github.com/users/jgarvin/following{/other_user}","gists_url":"https://api.github.com/users/jgarvin/gists{/gist_id}","starred_url":"https://api.github.com/users/jgarvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jgarvin/subscriptions","organizations_url":"https://api.github.com/users/jgarvin/orgs","repos_url":"https://api.github.com/users/jgarvin/repos","events_url":"https://api.github.com/users/jgarvin/events{/privacy}","received_events_url":"https://api.github.com/users/jgarvin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-01T00:08:10Z","updated_at":"2024-01-01T00:08:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/16722","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/16722/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/16722/comments","events_url":"https://api.github.com/repos/python/mypy/issues/16722/events","html_url":"https://github.com/python/mypy/issues/16722","id":2061197101,"node_id":"I_kwDOAGuhRc56218t","number":16722,"title":"Exhaustiveness checks (assert_never) don't work with 2-tuple of enums","user":{"login":"jgarvin","id":102322,"node_id":"MDQ6VXNlcjEwMjMyMg==","avatar_url":"https://avatars.githubusercontent.com/u/102322?v=4","gravatar_id":"","url":"https://api.github.com/users/jgarvin","html_url":"https://github.com/jgarvin","followers_url":"https://api.github.com/users/jgarvin/followers","following_url":"https://api.github.com/users/jgarvin/following{/other_user}","gists_url":"https://api.github.com/users/jgarvin/gists{/gist_id}","starred_url":"https://api.github.com/users/jgarvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jgarvin/subscriptions","organizations_url":"https://api.github.com/users/jgarvin/orgs","repos_url":"https://api.github.com/users/jgarvin/repos","events_url":"https://api.github.com/users/jgarvin/events{/privacy}","received_events_url":"https://api.github.com/users/jgarvin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-01-01T00:08:09Z","updated_at":"2025-02-07T09:51:24Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nThe code below fails to type check, but should succeed because it's exhaustive.\r\n\r\nThere are some possibly related issues, but I don't know if they are all the same bug, the other tickets tend to depend on `Union` which this does not: #16650 #15426 #12364\r\n\r\n**To Reproduce**\r\n\r\nPlayground link: https://mypy-play.net/?mypy=latest&python=3.12&gist=0d21d288fce8aa13d3cc60f4e418960a\r\n\r\n```python\r\n#!/usr/bin/env python\r\n# -*- coding: utf-8 -*-\r\n\r\nfrom enum import Enum\r\nfrom typing import assert_never\r\n\r\nclass A(Enum):\r\n    A0 = 0\r\n    A1 = 1\r\n\r\nclass B(Enum):\r\n    B0 = 0\r\n    B1 = 1\r\n\r\ndef test(a: A, b: B) -> bool:\r\n    match (a, b):\r\n        case (A.A0, B.B0):\r\n            return True\r\n        case (A.A0, B.B1):\r\n            return True\r\n        case (A.A1, B.B0):\r\n            return True\r\n        case (A.A1, B.B1):\r\n            return True\r\n        case _ as never:\r\n            assert_never(never)\r\n\r\n    return False\r\n```\r\n\r\n**Actual Behavior**\r\n\r\n```\r\ntypecheck_test.py:26: error: Argument 1 to \"assert_never\" has incompatible type \"tuple[A, B]\"; expected \"NoReturn\"  [arg-type]\r\n```\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 1.8.0\r\n- Mypy command-line flags: n/a\r\n- Mypy configuration options from `mypy.ini` (and other config files): n/a\r\n- Python version used: 3.11 (but also happens with 3.12 in playground link)\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/16722/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/16722/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1919448874","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1919448874","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1919448874,"node_id":"IC_kwDOAGuhRc5yaHcq","user":{"login":"Vinh-CHUC","id":322812,"node_id":"MDQ6VXNlcjMyMjgxMg==","avatar_url":"https://avatars.githubusercontent.com/u/322812?v=4","gravatar_id":"","url":"https://api.github.com/users/Vinh-CHUC","html_url":"https://github.com/Vinh-CHUC","followers_url":"https://api.github.com/users/Vinh-CHUC/followers","following_url":"https://api.github.com/users/Vinh-CHUC/following{/other_user}","gists_url":"https://api.github.com/users/Vinh-CHUC/gists{/gist_id}","starred_url":"https://api.github.com/users/Vinh-CHUC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vinh-CHUC/subscriptions","organizations_url":"https://api.github.com/users/Vinh-CHUC/orgs","repos_url":"https://api.github.com/users/Vinh-CHUC/repos","events_url":"https://api.github.com/users/Vinh-CHUC/events{/privacy}","received_events_url":"https://api.github.com/users/Vinh-CHUC/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T16:21:47Z","updated_at":"2024-01-31T16:21:47Z","body":"Out of curiosity is this planned to be addressed at some point? Is there a roadmap doc somewhere? This seems to be quite a fundamental issue that prevents using `mypy` in a codebase with pattern matching","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1919448874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Vinh-CHUC","id":322812,"node_id":"MDQ6VXNlcjMyMjgxMg==","avatar_url":"https://avatars.githubusercontent.com/u/322812?v=4","gravatar_id":"","url":"https://api.github.com/users/Vinh-CHUC","html_url":"https://github.com/Vinh-CHUC","followers_url":"https://api.github.com/users/Vinh-CHUC/followers","following_url":"https://api.github.com/users/Vinh-CHUC/following{/other_user}","gists_url":"https://api.github.com/users/Vinh-CHUC/gists{/gist_id}","starred_url":"https://api.github.com/users/Vinh-CHUC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vinh-CHUC/subscriptions","organizations_url":"https://api.github.com/users/Vinh-CHUC/orgs","repos_url":"https://api.github.com/users/Vinh-CHUC/repos","events_url":"https://api.github.com/users/Vinh-CHUC/events{/privacy}","received_events_url":"https://api.github.com/users/Vinh-CHUC/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1919452613","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1919452613","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1919452613,"node_id":"IC_kwDOAGuhRc5yaIXF","user":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T16:23:48Z","updated_at":"2024-01-31T16:23:48Z","body":"Mypy is a volunteer-driven project. There is no roadmap other than what individual contributors are interested in.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1919452613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1937375271","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-1937375271","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":1937375271,"node_id":"IC_kwDOAGuhRc5zegAn","user":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-11T00:49:46Z","updated_at":"2024-02-11T00:49:46Z","body":"I tried to dig into this. If I got it right, there are several similar-but-distinct issues here:\r\n\r\n1. [exoriente](https://github.com/python/mypy/issues/12364#issue-1170890926) & [wrzian](https://github.com/python/mypy/issues/12364#issuecomment-1836927742) cases: mypy doesn't narrow individual items inside a sequence pattern `case` block. I drafted a patch doing this, it seems to work well, I'll open a PR soon ðŸ˜„ \r\n2. [alexpovel](https://github.com/python/mypy/issues/12364#issuecomment-1179683164) case: mypy doesn't narrow individual items after a non-match with sequence pattern(s). This looks more complex to achieve since the type of each item depend of already narrowed types for all other items ðŸ˜¢ \r\n3. [arseniiv](https://github.com/python/mypy/issues/12364#issuecomment-1510338458) & [my](https://github.com/python/mypy/issues/12364#issuecomment-1602761423) cases:  mypy doesn't properly reduce union types when visiting a sequence pattern. I think we need to special-case them, I may try that next ðŸ˜ ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1937375271/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-11T14:51:17Z","updated_at":"2024-02-11T14:51:17Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/16905","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/16905/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/16905/comments","events_url":"https://api.github.com/repos/python/mypy/issues/16905/events","html_url":"https://github.com/python/mypy/pull/16905","id":2129019524,"node_id":"PR_kwDOAGuhRc5mk_n3","number":16905,"title":"Narrow individual items when matching a tuple to a sequence pattern","user":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-02-11T14:51:16Z","updated_at":"2024-04-04T10:34:00Z","closed_at":"2024-04-04T10:34:00Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/16905","html_url":"https://github.com/python/mypy/pull/16905","diff_url":"https://github.com/python/mypy/pull/16905.diff","patch_url":"https://github.com/python/mypy/pull/16905.patch","merged_at":"2024-04-04T10:34:00Z"},"body":"Fixes #12364\r\n\r\nWhen matching a tuple to a sequence pattern, this change narrows the type of tuple items inside the matched case:\r\n\r\n```py\r\ndef test(a: bool, b: bool) -> None:\r\n    match a, b:\r\n        case True, True:\r\n            reveal_type(a)  # before: \"builtins.bool\", after: \"Literal[True]\"\r\n```\r\n\r\nThis also works with nested tuples, recursively:\r\n\r\n```py\r\ndef test(a: bool, b: bool, c: bool) -> None:\r\n    match a, (b, c):\r\n        case _, [True, False]:\r\n            reveal_type(c)  # before: \"builtins.bool\", after: \"Literal[False]\"\r\n```\r\n\r\nThis only partially fixes issue #12364; see [my comment there](https://github.com/python/mypy/issues/12364#issuecomment-1937375271) for more context.\r\n\r\n---\r\n\r\nThis is my first contribution to mypy, so I may miss some context or conventions; I'm eager for any feedback!","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/16905/reactions","total_count":3,"+1":1,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/16905/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2031336232","html_url":"https://github.com/python/mypy/issues/12364#issuecomment-2031336232","issue_url":"https://api.github.com/repos/python/mypy/issues/12364","id":2031336232,"node_id":"IC_kwDOAGuhRc55E7so","user":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-02T08:03:40Z","updated_at":"2024-04-02T08:03:40Z","body":"Just got bitten by this again, @JelleZijlstra do you think you could take a look at [the linked PR](https://github.com/python/mypy/pull/16905), or ping anyone who could? Can I do something to help? ðŸ™ ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2031336232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"loic-simon","id":62268282,"node_id":"MDQ6VXNlcjYyMjY4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/62268282?v=4","gravatar_id":"","url":"https://api.github.com/users/loic-simon","html_url":"https://github.com/loic-simon","followers_url":"https://api.github.com/users/loic-simon/followers","following_url":"https://api.github.com/users/loic-simon/following{/other_user}","gists_url":"https://api.github.com/users/loic-simon/gists{/gist_id}","starred_url":"https://api.github.com/users/loic-simon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loic-simon/subscriptions","organizations_url":"https://api.github.com/users/loic-simon/orgs","repos_url":"https://api.github.com/users/loic-simon/repos","events_url":"https://api.github.com/users/loic-simon/events{/privacy}","received_events_url":"https://api.github.com/users/loic-simon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12320885334,"node_id":"MEE_lADOAGuhRc5FymCuzwAAAALeYcpW","url":"https://api.github.com/repos/python/mypy/issues/events/12320885334","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-02T08:03:42Z","performed_via_github_app":null},{"id":12320885349,"node_id":"SE_lADOAGuhRc5FymCuzwAAAALeYcpl","url":"https://api.github.com/repos/python/mypy/issues/events/12320885349","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-02T08:03:42Z","performed_via_github_app":null},{"id":12355866580,"node_id":"REFE_lADOAGuhRc5FymCuzwAAAALgd4_U","url":"https://api.github.com/repos/python/mypy/issues/events/12355866580","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"80190101f68b52e960c22572ed6cc814de078b9c","commit_url":"https://api.github.com/repos/python/mypy/commits/80190101f68b52e960c22572ed6cc814de078b9c","created_at":"2024-04-04T10:34:01Z","performed_via_github_app":null},{"id":12355866589,"node_id":"CE_lADOAGuhRc5FymCuzwAAAALgd4_d","url":"https://api.github.com/repos/python/mypy/issues/events/12355866589","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-04-04T10:34:01Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"willfrey","id":13784361,"node_id":"MDQ6VXNlcjEzNzg0MzYx","avatar_url":"https://avatars.githubusercontent.com/u/13784361?v=4","gravatar_id":"","url":"https://api.github.com/users/willfrey","html_url":"https://github.com/willfrey","followers_url":"https://api.github.com/users/willfrey/followers","following_url":"https://api.github.com/users/willfrey/following{/other_user}","gists_url":"https://api.github.com/users/willfrey/gists{/gist_id}","starred_url":"https://api.github.com/users/willfrey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willfrey/subscriptions","organizations_url":"https://api.github.com/users/willfrey/orgs","repos_url":"https://api.github.com/users/willfrey/repos","events_url":"https://api.github.com/users/willfrey/events{/privacy}","received_events_url":"https://api.github.com/users/willfrey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T01:21:45Z","updated_at":"2024-06-03T01:21:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/pylance-release/issues/5957","repository_url":"https://api.github.com/repos/microsoft/pylance-release","labels_url":"https://api.github.com/repos/microsoft/pylance-release/issues/5957/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/pylance-release/issues/5957/comments","events_url":"https://api.github.com/repos/microsoft/pylance-release/issues/5957/events","html_url":"https://github.com/microsoft/pylance-release/issues/5957","id":2329980738,"node_id":"I_kwDOD9laIc6K4K9C","number":5957,"title":"Structural pattern matching is having an issue narrowing the type of tuple elements when they are unions","user":{"login":"willfrey","id":13784361,"node_id":"MDQ6VXNlcjEzNzg0MzYx","avatar_url":"https://avatars.githubusercontent.com/u/13784361?v=4","gravatar_id":"","url":"https://api.github.com/users/willfrey","html_url":"https://github.com/willfrey","followers_url":"https://api.github.com/users/willfrey/followers","following_url":"https://api.github.com/users/willfrey/following{/other_user}","gists_url":"https://api.github.com/users/willfrey/gists{/gist_id}","starred_url":"https://api.github.com/users/willfrey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willfrey/subscriptions","organizations_url":"https://api.github.com/users/willfrey/orgs","repos_url":"https://api.github.com/users/willfrey/repos","events_url":"https://api.github.com/users/willfrey/events{/privacy}","received_events_url":"https://api.github.com/users/willfrey/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":5745571099,"node_id":"LA_kwDOD9laIc8AAAABVnZ1Gw","url":"https://api.github.com/repos/microsoft/pylance-release/labels/team%20needs%20to%20reproduce","name":"team needs to reproduce","color":"1d76db","default":false,"description":"Issue has not been reproduced yet"}],"state":"closed","locked":false,"assignee":{"login":"KacieKK","id":35987382,"node_id":"MDQ6VXNlcjM1OTg3Mzgy","avatar_url":"https://avatars.githubusercontent.com/u/35987382?v=4","gravatar_id":"","url":"https://api.github.com/users/KacieKK","html_url":"https://github.com/KacieKK","followers_url":"https://api.github.com/users/KacieKK/followers","following_url":"https://api.github.com/users/KacieKK/following{/other_user}","gists_url":"https://api.github.com/users/KacieKK/gists{/gist_id}","starred_url":"https://api.github.com/users/KacieKK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KacieKK/subscriptions","organizations_url":"https://api.github.com/users/KacieKK/orgs","repos_url":"https://api.github.com/users/KacieKK/repos","events_url":"https://api.github.com/users/KacieKK/events{/privacy}","received_events_url":"https://api.github.com/users/KacieKK/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"KacieKK","id":35987382,"node_id":"MDQ6VXNlcjM1OTg3Mzgy","avatar_url":"https://avatars.githubusercontent.com/u/35987382?v=4","gravatar_id":"","url":"https://api.github.com/users/KacieKK","html_url":"https://github.com/KacieKK","followers_url":"https://api.github.com/users/KacieKK/followers","following_url":"https://api.github.com/users/KacieKK/following{/other_user}","gists_url":"https://api.github.com/users/KacieKK/gists{/gist_id}","starred_url":"https://api.github.com/users/KacieKK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KacieKK/subscriptions","organizations_url":"https://api.github.com/users/KacieKK/orgs","repos_url":"https://api.github.com/users/KacieKK/repos","events_url":"https://api.github.com/users/KacieKK/events{/privacy}","received_events_url":"https://api.github.com/users/KacieKK/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2024-06-03T01:21:44Z","updated_at":"2024-06-03T16:18:53Z","closed_at":"2024-06-03T16:18:53Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":265902625,"node_id":"MDEwOlJlcG9zaXRvcnkyNjU5MDI2MjU=","name":"pylance-release","full_name":"microsoft/pylance-release","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/pylance-release","description":"Documentation and issues for Pylance","fork":false,"url":"https://api.github.com/repos/microsoft/pylance-release","forks_url":"https://api.github.com/repos/microsoft/pylance-release/forks","keys_url":"https://api.github.com/repos/microsoft/pylance-release/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/pylance-release/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/pylance-release/teams","hooks_url":"https://api.github.com/repos/microsoft/pylance-release/hooks","issue_events_url":"https://api.github.com/repos/microsoft/pylance-release/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/pylance-release/events","assignees_url":"https://api.github.com/repos/microsoft/pylance-release/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/pylance-release/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/pylance-release/tags","blobs_url":"https://api.github.com/repos/microsoft/pylance-release/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/pylance-release/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/pylance-release/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/pylance-release/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/pylance-release/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/pylance-release/languages","stargazers_url":"https://api.github.com/repos/microsoft/pylance-release/stargazers","contributors_url":"https://api.github.com/repos/microsoft/pylance-release/contributors","subscribers_url":"https://api.github.com/repos/microsoft/pylance-release/subscribers","subscription_url":"https://api.github.com/repos/microsoft/pylance-release/subscription","commits_url":"https://api.github.com/repos/microsoft/pylance-release/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/pylance-release/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/pylance-release/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/pylance-release/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/pylance-release/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/pylance-release/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/pylance-release/merges","archive_url":"https://api.github.com/repos/microsoft/pylance-release/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/pylance-release/downloads","issues_url":"https://api.github.com/repos/microsoft/pylance-release/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/pylance-release/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/pylance-release/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/pylance-release/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/pylance-release/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/pylance-release/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/pylance-release/deployments","created_at":"2020-05-21T16:50:15Z","updated_at":"2025-11-08T06:00:15Z","pushed_at":"2025-11-03T22:56:05Z","git_url":"git://github.com/microsoft/pylance-release.git","ssh_url":"git@github.com:microsoft/pylance-release.git","clone_url":"https://github.com/microsoft/pylance-release.git","svn_url":"https://github.com/microsoft/pylance-release","homepage":"","size":15223,"stargazers_count":1932,"watchers_count":1932,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":946,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":499,"license":{"key":"cc-by-4.0","name":"Creative Commons Attribution 4.0 International","spdx_id":"CC-BY-4.0","url":"https://api.github.com/licenses/cc-by-4.0","node_id":"MDc6TGljZW5zZTI1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["code-analysis","language-server","language-server-protocol","python"],"visibility":"public","forks":946,"open_issues":499,"watchers":1932,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\nRead the guidelines for 'Filing an issue'.\r\n\r\n'https://aka.ms/pylance-filing-an-issue'\r\n-->\r\n\r\n<h3> Environment data </h3>\r\n\r\n-   Language Server version: 2024.5.1\r\n-   OS and version: darwin arm64\r\n-   Python version (and distribution if applicable, e.g. Anaconda): Python 3.12.3\r\n-   python.analysis.indexing: true\r\n-   python.analysis.typeCheckingMode: standard\r\n\r\n<h3> Code Snippet </h3>\r\n\r\n<!--\r\nPlease provide a minimal, self-contained code snippet that reproduces the issue. If the code snippet uses any libraries, please specify the versions used.\r\n\r\nNote: If you think a GIF of what is happening would be helpful, consider tools like https://www.cockos.com/licecap/, https://github.com/phw/peek or https://www.screentogif.com/ .\r\n-->\r\n\r\n```python\r\nimport typing\r\n\r\ntype Maybe[T] = T | None\r\ntype SparsePair[T, S] = tuple[Maybe[T], Maybe[S]]\r\n\r\n\r\ndef maybe_add(sparse_pair: SparsePair[int, int]) -> int:\r\n    match sparse_pair:\r\n        case None, None:\r\n            return 0\r\n        case a, None:\r\n            # Pylance: \"assert_type\" mismatch: expected \"int\" but received \"int | None\"\r\n            typing.assert_type(a, int)\r\n            return a\r\n        case None, b:\r\n            # No problem in this case!\r\n            typing.assert_type(b, int)\r\n            return b\r\n        case a, b:\r\n            # Also okay here, too!\r\n            typing.assert_type(a, int)\r\n            typing.assert_type(b, int)\r\n            return a + b\r\n        case _:\r\n            typing.assert_never(sparse_pair)\r\n```\r\n\r\n<h3> Expected behavior </h3>\r\n\r\nI expect the `typing.assert_type(a, int)` statement to not raise any sort of error with Pylance/Pyright.\r\n\r\n<h3> Actual behavior </h3>\r\n\r\nPylance/Pyright thinks that `a` has type `int | None` in the `case a, None: ...` block.\r\n\r\nAnd for what it's worth, you can switch the order of the `case a, None: ...` and `case None, b: ...` and observe that the issue is only ever with the first case statement after the `case None, None: ...`.\r\n\r\nI realize that I could just use `case int(a), None: ...` or `case None, int(b): ...` but I'd like this to work when I otherwise cannot use a concrete type to use in the case statement to match against, like if the sparse pair was generic still (so, each element has type `T | None` for some generic `T`.\r\n\r\nAdditionally, I experimented with how Mypy handles this and Mypy does not seem to correctly narrow the types when matching against tuples like this _at all_, so this behavior is beyond what Mypy guaranteesâ€”which I appreciate!\r\n\r\nRelated Mypy issue: https://github.com/python/mypy/issues/12364\r\n\r\nThank you!","reactions":{"url":"https://api.github.com/repos/microsoft/pylance-release/issues/5957/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/pylance-release/issues/5957/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]