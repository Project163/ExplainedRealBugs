[{"id":6533168816,"node_id":"LE_lADOAGuhRc5I4xhhzwAAAAGFaD6w","url":"https://api.github.com/repos/python/mypy/issues/events/6533168816","actor":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-02T12:44:23Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":6533179883,"node_id":"LE_lADOAGuhRc5I4xhhzwAAAAGFaGnr","url":"https://api.github.com/repos/python/mypy/issues/events/6533179883","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-02T12:46:24Z","label":{"name":"topic-stubgen","color":"bfd4f2"},"performed_via_github_app":null},{"id":6533179886,"node_id":"LE_lADOAGuhRc5I4xhhzwAAAAGFaGnu","url":"https://api.github.com/repos/python/mypy/issues/events/6533179886","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-02T12:46:24Z","label":{"name":"topic-enum","color":"47988D"},"performed_via_github_app":null},{"actor":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T10:04:40Z","updated_at":"2022-05-03T10:04:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12524","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12524/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12524/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12524/events","html_url":"https://github.com/python/mypy/pull/12524","id":1192882140,"node_id":"PR_kwDOAGuhRc41pJfm","number":12524,"title":"Fix Stubgen's behavior for Instance Variables in C extensions","user":{"login":"shubz1998","id":17087695,"node_id":"MDQ6VXNlcjE3MDg3Njk1","avatar_url":"https://avatars.githubusercontent.com/u/17087695?v=4","gravatar_id":"","url":"https://api.github.com/users/shubz1998","html_url":"https://github.com/shubz1998","followers_url":"https://api.github.com/users/shubz1998/followers","following_url":"https://api.github.com/users/shubz1998/following{/other_user}","gists_url":"https://api.github.com/users/shubz1998/gists{/gist_id}","starred_url":"https://api.github.com/users/shubz1998/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shubz1998/subscriptions","organizations_url":"https://api.github.com/users/shubz1998/orgs","repos_url":"https://api.github.com/users/shubz1998/repos","events_url":"https://api.github.com/users/shubz1998/events{/privacy}","received_events_url":"https://api.github.com/users/shubz1998/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":10,"created_at":"2022-04-05T09:36:39Z","updated_at":"2022-05-03T10:38:05Z","closed_at":"2022-04-11T15:42:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/12524","html_url":"https://github.com/python/mypy/pull/12524","diff_url":"https://github.com/python/mypy/pull/12524.diff","patch_url":"https://github.com/python/mypy/pull/12524.patch","merged_at":"2022-04-11T15:42:35Z"},"body":"## Description\r\n\r\nIt is not necessary for instance variables to have the _fget_ attribute (e.g. instance variable in a C class in an extension) but\r\ninspect.isdatadescriptor return True as expected, hence we update the 'is_c_property' check.\r\n\r\nSince special attributes (like \\_\\_dict\\_\\_ etc) also passes 'is_c_property' check, we ignore all such special attributes in\r\n'generate_c_property_stub' while creating the contents of stub file.\r\n\r\nAlso, 'is_c_property_readonly' assumed that the property would always have 'fset' attribute which again is not true for instance variables in C extension. Hence make the check defensive by first checking if 'fset' attribute even exists or not.\r\n\r\nFixes #12150.\r\n\r\n## Test Plan\r\n\r\n- Ran the test suite as described in [Contributing-Running tests](https://github.com/python/mypy/blob/master/CONTRIBUTING.md#running-tests). All tests are running fine.\r\n\r\n- Ran stubgen on a C extension and verified that instance variables are correctly typed now. The C extension is the same as present on [Issue#12150](https://github.com/python/mypy/issues/12150).\r\n\r\nC extension source code (only relevant part is present here, refer the [Issue#12150](https://github.com/python/mypy/issues/12150) for the complete source code.:\r\n```\r\ntypedef struct {\r\n    PyObject_HEAD\r\n    PyObject *var1; \r\n    PyObject *var2; \r\n    int var3;\r\n} Custom;\r\n```\r\n\r\nGenerated `extension.pyi` file **prior** to this change: (Note that the instance variables are incorrectly marked as _ClassVar_)\r\n```\r\nfrom typing import Any, ClassVar\r\n\r\nclass Custom:\r\n    var1: ClassVar[getset_descriptor] = ...  \r\n    var2: ClassVar[getset_descriptor] = ...\r\n    var3: ClassVar[member_descriptor] = ...\r\n    def display(self, *args, **kwargs) -> Any: ...\r\n\r\n```\r\n\r\nGenerated `extension.pyi` file **after** this change:\r\n```\r\nfrom typing import Any\r\n\r\nclass Custom:\r\n    var1: Any\r\n    var2: Any\r\n    var3: Any\r\n    def display(self, *args, **kwargs) -> Any: ...\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12524/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-04T07:30:16Z","updated_at":"2022-05-04T07:30:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12722","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12722/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12722/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12722/events","html_url":"https://github.com/python/mypy/pull/12722","id":1223968448,"node_id":"PR_kwDOAGuhRc43OJCJ","number":12722,"title":"Make pybind11 test fixture fully self-contained","user":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-05-03T11:24:24Z","updated_at":"2022-05-20T15:44:28Z","closed_at":"2022-05-20T15:44:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/12722","html_url":"https://github.com/python/mypy/pull/12722","diff_url":"https://github.com/python/mypy/pull/12722.diff","patch_url":"https://github.com/python/mypy/pull/12722.patch","merged_at":"2022-05-20T15:44:27Z"},"body":"### Have you read the [Contributing Guidelines](https://github.com/python/mypy/blob/master/CONTRIBUTING.md)?\r\n\r\nYes.\r\n\r\n### Description\r\n\r\nThis PR improves the testing concept for pybind11 based stub generator.\r\n\r\nCurrently the stubgen test installs an external project called [`pybind11-mypy-demo`](https://github.com/sizmailov/pybind11-mypy-demo) from PyPI. This makes the test approach non-self-contained and a little bit confusing: When looking at the test fixture in the `test-data` folder, the obvious question is: Where is the corresponding C++ pybind11 code? Only after looking up the scripts in `misc/test-stubgenc.sh` one can guess that this actually is an external dependency. Then one has to lookup the code in the external repository and make the connection to the content of the expected stubgen output\r\n\r\nAs a result, contributing new pybind11 test cases is awkward. In case one wants to add a test for a new pybind11 pattern / expression / edge case, one first has to create a pull request for the external repository. This PR then has to be merged and published on PyPI. Only once the package has been deployed to PyPI the corresponding PR for mypy can be opened. This 3-step approach is tedious enough that contributors will tend not to add new test cases at all. For instance PR #12524 mentions new pybind11 related test patterns in its description, but these test cases were not contributed, most likely due to the overhead. I think it would help to follow testing best practices by trying to keep things self-contained.\r\n\r\nThis PR now moves the \"source of truth\" of the stubgen test fixtures into this repository. The idea is to keep the pybind11 example source close to the expected stubgen output, so that it becomes obvious that the two are connected, and when making a change, the necessary changes are close to each other. The \"project\" is basically just one `main.cpp` with minor boilerplate for the package setup. So far I've copied everything over here without any modifications, except the dummy test, which isn't needed here.\r\n\r\n@sizmailov I hope you are fine with this change? I've just copied over the license from your project as well, but it doesn't mention your name I'm afraid. Let me know if I can do anything to improve the attribution. Taking this as an opportunity to thank you for your much appreciated work on pybind11 + mypy in general ;)\r\n\r\n## Test Plan\r\n\r\nSee above, because this PR is all about a change to the test plan.\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12722/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T16:49:46Z","updated_at":"2022-05-20T16:49:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12807","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12807/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12807/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12807/events","html_url":"https://github.com/python/mypy/issues/12807","id":1239663460,"node_id":"I_kwDOAGuhRc5J48Nk","number":12807,"title":"Release 0.960 planning","user":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3542336145,"node_id":"LA_kwDOAGuhRc7TI8KR","url":"https://api.github.com/repos/python/mypy/labels/meta","name":"meta","color":"D62A71","default":false,"description":"Issues tracking a broad area of work"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2022-05-18T09:12:57Z","updated_at":"2022-06-06T17:09:57Z","closed_at":"2022-06-06T17:09:57Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm planning to make a 0.960 release around May 24 (tentative timeline).\r\n\r\nPlease post here any issues you'd like to see fixed in the release, or PRs you'd like to have merged. I've already cut the release branch, but we can still cherry-pick low-risk features and bug fixes until May 20. After May 20 only critical bug fixes and documentation updates should be cherry-picked.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12807/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":6652415708,"node_id":"REFE_lADOAGuhRc5I4xhhzwAAAAGMg87c","url":"https://api.github.com/repos/python/mypy/issues/events/6652415708","actor":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8461c61624621db04de619fb0dd35a09c11e7cb2","commit_url":"https://api.github.com/repos/bluenote10/mypy/commits/8461c61624621db04de619fb0dd35a09c11e7cb2","created_at":"2022-05-20T17:27:47Z","performed_via_github_app":null},{"actor":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T17:32:55Z","updated_at":"2022-05-20T17:32:55Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12828","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12828/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12828/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12828/events","html_url":"https://github.com/python/mypy/pull/12828","id":1243438439,"node_id":"PR_kwDOAGuhRc44NK6E","number":12828,"title":"Bring back type annotation support of dunder methods in stub generator (fix #12717)","user":{"login":"bluenote10","id":3620703,"node_id":"MDQ6VXNlcjM2MjA3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/3620703?v=4","gravatar_id":"","url":"https://api.github.com/users/bluenote10","html_url":"https://github.com/bluenote10","followers_url":"https://api.github.com/users/bluenote10/followers","following_url":"https://api.github.com/users/bluenote10/following{/other_user}","gists_url":"https://api.github.com/users/bluenote10/gists{/gist_id}","starred_url":"https://api.github.com/users/bluenote10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluenote10/subscriptions","organizations_url":"https://api.github.com/users/bluenote10/orgs","repos_url":"https://api.github.com/users/bluenote10/repos","events_url":"https://api.github.com/users/bluenote10/events{/privacy}","received_events_url":"https://api.github.com/users/bluenote10/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-05-20T17:32:55Z","updated_at":"2022-05-21T14:00:40Z","closed_at":"2022-05-21T14:00:40Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/12828","html_url":"https://github.com/python/mypy/pull/12828","diff_url":"https://github.com/python/mypy/pull/12828.diff","patch_url":"https://github.com/python/mypy/pull/12828.patch","merged_at":"2022-05-21T14:00:40Z"},"body":"### Have you read the [Contributing Guidelines](https://github.com/python/mypy/blob/master/CONTRIBUTING.md)?\r\n\r\nYes.\r\n\r\n### Description\r\n\r\nFixes #12717 by making the \"ignoring of dunder methods\" more specific. As explained, `__members__` is part of the official enum API and thus an essential type annotation to have. The complete removal of annotations of dunder methods in #12524 causes a big regression for pybind11 code bases involving lots of enums.\r\n\r\n## Test Plan\r\n\r\nI didn't had time to add a specific test case preventing fully reverting #12524, but this modification should keep its behavior while fixing #12717.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12828/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6654977206,"node_id":"CE_lADOAGuhRc5I4xhhzwAAAAGMquS2","url":"https://api.github.com/repos/python/mypy/issues/events/6654977206","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-05-21T14:00:40Z","state_reason":null,"performed_via_github_app":null},{"id":6654977292,"node_id":"REFE_lADOAGuhRc5I4xhhzwAAAAGMquUM","url":"https://api.github.com/repos/python/mypy/issues/events/6654977292","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f19a711eae747e2e5525bf0b0baaa3d3ae972fbd","commit_url":"https://api.github.com/repos/python/mypy/commits/f19a711eae747e2e5525bf0b0baaa3d3ae972fbd","created_at":"2022-05-21T14:00:45Z","performed_via_github_app":null},{"id":6662546796,"node_id":"REFE_lADOAGuhRc5I4xhhzwAAAAGNHmVs","url":"https://api.github.com/repos/python/mypy/issues/events/6662546796","actor":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a54c84d0b0be3676e791960cb474dea00ac7f3bf","commit_url":"https://api.github.com/repos/python/mypy/commits/a54c84d0b0be3676e791960cb474dea00ac7f3bf","created_at":"2022-05-23T16:19:17Z","performed_via_github_app":null},{"actor":{"login":"jasminlapalme","id":4095332,"node_id":"MDQ6VXNlcjQwOTUzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/4095332?v=4","gravatar_id":"","url":"https://api.github.com/users/jasminlapalme","html_url":"https://github.com/jasminlapalme","followers_url":"https://api.github.com/users/jasminlapalme/followers","following_url":"https://api.github.com/users/jasminlapalme/following{/other_user}","gists_url":"https://api.github.com/users/jasminlapalme/gists{/gist_id}","starred_url":"https://api.github.com/users/jasminlapalme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasminlapalme/subscriptions","organizations_url":"https://api.github.com/users/jasminlapalme/orgs","repos_url":"https://api.github.com/users/jasminlapalme/repos","events_url":"https://api.github.com/users/jasminlapalme/events{/privacy}","received_events_url":"https://api.github.com/users/jasminlapalme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T14:05:26Z","updated_at":"2023-08-16T14:05:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/15888","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/15888/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/15888/comments","events_url":"https://api.github.com/repos/python/mypy/issues/15888/events","html_url":"https://github.com/python/mypy/issues/15888","id":1853322269,"node_id":"I_kwDOAGuhRc5ud3Qd","number":15888,"title":"stubgen: Add typings of keys and values of dict (__members__, __entries)","user":{"login":"jasminlapalme","id":4095332,"node_id":"MDQ6VXNlcjQwOTUzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/4095332?v=4","gravatar_id":"","url":"https://api.github.com/users/jasminlapalme","html_url":"https://github.com/jasminlapalme","followers_url":"https://api.github.com/users/jasminlapalme/followers","following_url":"https://api.github.com/users/jasminlapalme/following{/other_user}","gists_url":"https://api.github.com/users/jasminlapalme/gists{/gist_id}","starred_url":"https://api.github.com/users/jasminlapalme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasminlapalme/subscriptions","organizations_url":"https://api.github.com/users/jasminlapalme/orgs","repos_url":"https://api.github.com/users/jasminlapalme/repos","events_url":"https://api.github.com/users/jasminlapalme/events{/privacy}","received_events_url":"https://api.github.com/users/jasminlapalme/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488358,"node_id":"MDU6TGFiZWwyMTQ4ODM1OA==","url":"https://api.github.com/repos/python/mypy/labels/feature","name":"feature","color":"84b6eb","default":false,"description":null},{"id":3201597398,"node_id":"MDU6TGFiZWwzMjAxNTk3Mzk4","url":"https://api.github.com/repos/python/mypy/labels/topic-stubgen","name":"topic-stubgen","color":"bfd4f2","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-08-16T14:05:25Z","updated_at":"2023-08-23T13:20:19Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"It would be useful to add typings of the keys and values of the `__members__` and `__entries` dictionary on class that represent `enum` in C.\r\n\r\nFor example, if we take the same example as #12717.\r\n\r\n```c++\r\n#include <cstddef>\r\n#include <memory>\r\n#include <pybind11/pybind11.h>\r\n\r\nnamespace py = pybind11;\r\n\r\nenum class MyEnum { FOO, BAR };\r\n\r\nPYBIND11_MODULE(native_enum_test, module) {\r\n  pybind11::enum_<MyEnum>(module, \"MyEnum\", pybind11::arithmetic())\r\n      .value(\"FOO\", MyEnum::FOO)\r\n      .value(\"BAR\", MyEnum::BAR);\r\n}\r\n```\r\n\r\nCompile via:\r\n\r\n```\r\n$ c++ -O3 -Wall -shared -std=c++17 -fPIC $(python3 -m pybind11 --includes) native_enum_test.cpp -o native_enum_test.so\r\n```\r\n\r\nRun the stub generator:\r\n\r\n```\r\nstubgen -p native_enum_test\r\n```\r\n\r\nthe result is something like\r\n\r\n```python\r\nclass MyEnum:\r\n    __members__: ClassVar[dict] = ...  # read-only\r\n    BAR: ClassVar[MyEnum] = ...\r\n    FOO: ClassVar[MyEnum] = ...\r\n    __entries: ClassVar[dict] = ...\r\n...\r\n```\r\n\r\nWhen we import code with these kinds of stubs and use `mypy` to type checked the code with `strict` option, we have this warning.\r\n\r\n```\r\nerror: Missing type parameters for generic type \"dict\"  [type-arg]\r\n```\r\n\r\n**Expected Behavior**\r\n\r\nThe result of `stubgen` would be like this:\r\n\r\n```python\r\nclass MyEnum:\r\n    __members__: ClassVar[dict[str, MyEnum]] = ...  # read-only\r\n    BAR: ClassVar[MyEnum] = ...\r\n    FOO: ClassVar[MyEnum] = ...\r\n    __entries: ClassVar[dict[str, tuple[MyEnum, None]]] = ... # not sure about the type of this one...\r\n...\r\n```\r\n\r\n**Environment**\r\n\r\n- Mypy version used: 1.4.1\r\n- Mypy command-line flags: not relevant, this is about the stub generator `--show-column-numbers --no-error-summary --no-pretty --no-color-output`\r\n- Mypy configuration options from `mypy.ini` (and other config files): strict = true\r\n- Python version used: 3.9\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/15888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/15888/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]