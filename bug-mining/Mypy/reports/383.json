{"url":"https://api.github.com/repos/python/mypy/issues/16255","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/16255/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/16255/comments","events_url":"https://api.github.com/repos/python/mypy/issues/16255/events","html_url":"https://github.com/python/mypy/issues/16255","id":1940239748,"node_id":"I_kwDOAGuhRc5zpbWE","number":16255,"title":"Option [tool.coverage.run]source is not a list: 'mypy'","user":{"login":"mtelka","id":3000173,"node_id":"MDQ6VXNlcjMwMDAxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3000173?v=4","gravatar_id":"","url":"https://api.github.com/users/mtelka","html_url":"https://github.com/mtelka","followers_url":"https://api.github.com/users/mtelka/followers","following_url":"https://api.github.com/users/mtelka/following{/other_user}","gists_url":"https://api.github.com/users/mtelka/gists{/gist_id}","starred_url":"https://api.github.com/users/mtelka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtelka/subscriptions","organizations_url":"https://api.github.com/users/mtelka/orgs","repos_url":"https://api.github.com/users/mtelka/repos","events_url":"https://api.github.com/users/mtelka/events{/privacy}","received_events_url":"https://api.github.com/users/mtelka/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-10-12T15:26:40Z","updated_at":"2023-10-13T09:28:42Z","closed_at":"2023-10-13T09:28:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When running tests for mypy 1.6.0 I see errors like:\r\n```\r\npy39: commands[0]> python -m pytest\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.9/vendor-packages/coverage/config.py\", line 308, in from_file\r\n    was_set = self._set_attr_from_config_option(cp, *option_spec)\r\n  File \"/usr/lib/python3.9/vendor-packages/coverage/config.py\", line 448, in _set_attr_from_config_option\r\n    setattr(self, attr, method(section, option))\r\n  File \"/usr/lib/python3.9/vendor-packages/coverage/tomlconfig.py\", line 187, in getlist\r\n    _, values = self._get_list(section, option)\r\n  File \"/usr/lib/python3.9/vendor-packages/coverage/tomlconfig.py\", line 182, in _get_list\r\n    values = self._check_type(name, option, values, list, None, \"a list\")\r\n  File \"/usr/lib/python3.9/vendor-packages/coverage/tomlconfig.py\", line 170, in _check_type\r\n    raise ValueError(\r\nValueError: Option [tool.coverage.run]source is not a list: 'mypy'\r\n```\r\nThe fix seems to be obvious:\r\n```\r\n--- mypy-1.6.0/pyproject.toml.orig\r\n+++ mypy-1.6.0/pyproject.toml\r\n@@ -105,13 +105,13 @@\r\n\r\n [tool.coverage.run]\r\n branch = true\r\n-source = \"mypy\"\r\n+source = [\"mypy\"]\r\n parallel = true\r\n\r\n [tool.coverage.report]\r\n show_missing = true\r\n skip_covered = true\r\n-omit = 'mypy/test/*'\r\n+omit = ['mypy/test/*']\r\n exclude_lines = [\r\n   '\\#\\s*pragma: no cover',\r\n   '^\\s*raise AssertionError\\b',\r\n```","closed_by":{"login":"ilevkivskyi","id":12005495,"node_id":"MDQ6VXNlcjEyMDA1NDk1","avatar_url":"https://avatars.githubusercontent.com/u/12005495?v=4","gravatar_id":"","url":"https://api.github.com/users/ilevkivskyi","html_url":"https://github.com/ilevkivskyi","followers_url":"https://api.github.com/users/ilevkivskyi/followers","following_url":"https://api.github.com/users/ilevkivskyi/following{/other_user}","gists_url":"https://api.github.com/users/ilevkivskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/ilevkivskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilevkivskyi/subscriptions","organizations_url":"https://api.github.com/users/ilevkivskyi/orgs","repos_url":"https://api.github.com/users/ilevkivskyi/repos","events_url":"https://api.github.com/users/ilevkivskyi/events{/privacy}","received_events_url":"https://api.github.com/users/ilevkivskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/16255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/16255/timeline","performed_via_github_app":null,"state_reason":"completed"}