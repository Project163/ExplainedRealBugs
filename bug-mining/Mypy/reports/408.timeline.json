[{"id":6840188562,"node_id":"LE_lADOAGuhRc5MHiuDzwAAAAGXtP6S","url":"https://api.github.com/repos/python/mypy/issues/events/6840188562","actor":{"login":"zenbot","id":1243036,"node_id":"MDQ6VXNlcjEyNDMwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1243036?v=4","gravatar_id":"","url":"https://api.github.com/users/zenbot","html_url":"https://github.com/zenbot","followers_url":"https://api.github.com/users/zenbot/followers","following_url":"https://api.github.com/users/zenbot/following{/other_user}","gists_url":"https://api.github.com/users/zenbot/gists{/gist_id}","starred_url":"https://api.github.com/users/zenbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zenbot/subscriptions","organizations_url":"https://api.github.com/users/zenbot/orgs","repos_url":"https://api.github.com/users/zenbot/repos","events_url":"https://api.github.com/users/zenbot/events{/privacy}","received_events_url":"https://api.github.com/users/zenbot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-06-20T14:49:24Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":6840435503,"node_id":"LE_lADOAGuhRc5MHiuDzwAAAAGXuMMv","url":"https://api.github.com/repos/python/mypy/issues/events/6840435503","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-06-20T15:22:49Z","label":{"name":"topic-match-statement","color":"70246D"},"performed_via_github_app":null},{"id":6840435506,"node_id":"LE_lADOAGuhRc5MHiuDzwAAAAGXuMMy","url":"https://api.github.com/repos/python/mypy/issues/events/6840435506","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-06-20T15:22:49Z","label":{"name":"topic-type-narrowing","color":"9F31C3"},"performed_via_github_app":null},{"id":6841289944,"node_id":"SE_lADOAGuhRc5MHiuDzwAAAAGXxczY","url":"https://api.github.com/repos/python/mypy/issues/events/6841289944","actor":{"login":"pranavrajpal","id":78008260,"node_id":"MDQ6VXNlcjc4MDA4MjYw","avatar_url":"https://avatars.githubusercontent.com/u/78008260?v=4","gravatar_id":"","url":"https://api.github.com/users/pranavrajpal","html_url":"https://github.com/pranavrajpal","followers_url":"https://api.github.com/users/pranavrajpal/followers","following_url":"https://api.github.com/users/pranavrajpal/following{/other_user}","gists_url":"https://api.github.com/users/pranavrajpal/gists{/gist_id}","starred_url":"https://api.github.com/users/pranavrajpal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pranavrajpal/subscriptions","organizations_url":"https://api.github.com/users/pranavrajpal/orgs","repos_url":"https://api.github.com/users/pranavrajpal/repos","events_url":"https://api.github.com/users/pranavrajpal/events{/privacy}","received_events_url":"https://api.github.com/users/pranavrajpal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-06-20T17:58:37Z","performed_via_github_app":null},{"actor":{"login":"mthuurne","id":246676,"node_id":"MDQ6VXNlcjI0NjY3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/246676?v=4","gravatar_id":"","url":"https://api.github.com/users/mthuurne","html_url":"https://github.com/mthuurne","followers_url":"https://api.github.com/users/mthuurne/followers","following_url":"https://api.github.com/users/mthuurne/following{/other_user}","gists_url":"https://api.github.com/users/mthuurne/gists{/gist_id}","starred_url":"https://api.github.com/users/mthuurne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthuurne/subscriptions","organizations_url":"https://api.github.com/users/mthuurne/orgs","repos_url":"https://api.github.com/users/mthuurne/repos","events_url":"https://api.github.com/users/mthuurne/events{/privacy}","received_events_url":"https://api.github.com/users/mthuurne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-30T20:44:17Z","updated_at":"2022-06-30T20:44:17Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/13046","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/13046/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/13046/comments","events_url":"https://api.github.com/repos/python/mypy/issues/13046/events","html_url":"https://github.com/python/mypy/issues/13046","id":1290569976,"node_id":"I_kwDOAGuhRc5M7Ij4","number":13046,"title":"False positive following `case None` in `match` statement (missed narrowing?)","user":{"login":"mthuurne","id":246676,"node_id":"MDQ6VXNlcjI0NjY3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/246676?v=4","gravatar_id":"","url":"https://api.github.com/users/mthuurne","html_url":"https://github.com/mthuurne","followers_url":"https://api.github.com/users/mthuurne/followers","following_url":"https://api.github.com/users/mthuurne/following{/other_user}","gists_url":"https://api.github.com/users/mthuurne/gists{/gist_id}","starred_url":"https://api.github.com/users/mthuurne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthuurne/subscriptions","organizations_url":"https://api.github.com/users/mthuurne/orgs","repos_url":"https://api.github.com/users/mthuurne/repos","events_url":"https://api.github.com/users/mthuurne/events{/privacy}","received_events_url":"https://api.github.com/users/mthuurne/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"},{"id":3945155924,"node_id":"LA_kwDOAGuhRc7rJk1U","url":"https://api.github.com/repos/python/mypy/labels/topic-type-narrowing","name":"topic-type-narrowing","color":"9F31C3","default":false,"description":"Conditional type narrowing / binder"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-06-30T19:50:38Z","updated_at":"2023-08-13T16:51:55Z","closed_at":"2023-08-13T16:51:55Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nIn `match` block with a `case None:`, mypy considers values captured by subsequent cases to still have `None` as a possible type.\r\n\r\n**To Reproduce**\r\n\r\nCheck the following code using mypy:\r\n```py\r\ndef f(obj: object) -> str | None:\r\n    return str(obj) if obj else None\r\n\r\ndef g(obj: object) -> str:\r\n    match f(obj):\r\n        case None:\r\n            return \"-\"\r\n        case text:\r\n            return text\r\n```\r\n\r\n**Expected Behavior**\r\n\r\nNo errors would be reported: a case that matches the literal `None` can be treated as matching `NoneType`.\r\n\r\n**Actual Behavior**\r\n\r\n```\r\nmatch_nonetype.py:9: error: Incompatible return value type (got \"Optional[str]\", expected \"str\")  [return-value]\r\n                return text\r\n                       ^\r\n```\r\n\r\n**Your Environment**\r\n\r\n- Python version used: 3.10.4\r\n- Operating system and version: openSUSE Linux Tumbleweed\r\n- Mypy version used: 0.961 (compiled: yes)\r\n- Mypy command-line flags: none\r\n- Mypy configuration options from `mypy.ini` (and other config files):\r\n```\r\ndisallow_any_generics=True\r\ndisallow_incomplete_defs=True\r\ndisallow_untyped_defs=True\r\nnamespace_packages=True\r\nno_implicit_optional=True\r\nno_implicit_reexport=True\r\npretty=True\r\nshow_error_codes=True\r\nstrict_equality=True\r\nwarn_no_return=True\r\nwarn_redundant_casts=True\r\nwarn_return_any=True\r\nwarn_unreachable=True\r\nwarn_unused_configs=True\r\nwarn_unused_ignores=True\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/13046/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/python/mypy/issues/13046/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":10080255521,"node_id":"SE_lADOAGuhRc5MHiuDzwAAAAJY1H4h","url":"https://api.github.com/repos/python/mypy/issues/events/10080255521","actor":{"login":"jonathanberthias","id":24873799,"node_id":"MDQ6VXNlcjI0ODczNzk5","avatar_url":"https://avatars.githubusercontent.com/u/24873799?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathanberthias","html_url":"https://github.com/jonathanberthias","followers_url":"https://api.github.com/users/jonathanberthias/followers","following_url":"https://api.github.com/users/jonathanberthias/following{/other_user}","gists_url":"https://api.github.com/users/jonathanberthias/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathanberthias/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathanberthias/subscriptions","organizations_url":"https://api.github.com/users/jonathanberthias/orgs","repos_url":"https://api.github.com/users/jonathanberthias/repos","events_url":"https://api.github.com/users/jonathanberthias/events{/privacy}","received_events_url":"https://api.github.com/users/jonathanberthias/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-13T17:13:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1693662666","html_url":"https://github.com/python/mypy/issues/12998#issuecomment-1693662666","issue_url":"https://api.github.com/repos/python/mypy/issues/12998","id":1693662666,"node_id":"IC_kwDOAGuhRc5k8z3K","user":{"login":"Corwinpro","id":3482778,"node_id":"MDQ6VXNlcjM0ODI3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/3482778?v=4","gravatar_id":"","url":"https://api.github.com/users/Corwinpro","html_url":"https://github.com/Corwinpro","followers_url":"https://api.github.com/users/Corwinpro/followers","following_url":"https://api.github.com/users/Corwinpro/following{/other_user}","gists_url":"https://api.github.com/users/Corwinpro/gists{/gist_id}","starred_url":"https://api.github.com/users/Corwinpro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Corwinpro/subscriptions","organizations_url":"https://api.github.com/users/Corwinpro/orgs","repos_url":"https://api.github.com/users/Corwinpro/repos","events_url":"https://api.github.com/users/Corwinpro/events{/privacy}","received_events_url":"https://api.github.com/users/Corwinpro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T16:51:03Z","updated_at":"2023-08-25T23:07:28Z","body":"Potential workaround (yet this is certainly a bug):\r\n\r\n```python\r\nmatch value := fn():\r\n    ... \r\n```\r\n\r\nOverall, I think the problem is with `Callable`:\r\n\r\n```python\r\ndef foo(f: Callable[[], Result[int, str]]) -> str:\r\n    match f():  # does not work, mypy complains\r\n        case Ok(value):\r\n            return f\"{value}\"\r\n        case Err(e):\r\n            raise RuntimeError(e)\r\n```\r\n\r\nbut this is OK:\r\n\r\n```python\r\ndef foo(f: Callable[[], Result[int, str]]) -> str:\r\n    value = f()\r\n    match value:  # does work, mypy is happy\r\n        case Ok(value):\r\n            return f\"{value}\"\r\n        case Err(e):\r\n            raise RuntimeError(e)\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1693662666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Corwinpro","id":3482778,"node_id":"MDQ6VXNlcjM0ODI3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/3482778?v=4","gravatar_id":"","url":"https://api.github.com/users/Corwinpro","html_url":"https://github.com/Corwinpro","followers_url":"https://api.github.com/users/Corwinpro/followers","following_url":"https://api.github.com/users/Corwinpro/following{/other_user}","gists_url":"https://api.github.com/users/Corwinpro/gists{/gist_id}","starred_url":"https://api.github.com/users/Corwinpro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Corwinpro/subscriptions","organizations_url":"https://api.github.com/users/Corwinpro/orgs","repos_url":"https://api.github.com/users/Corwinpro/repos","events_url":"https://api.github.com/users/Corwinpro/events{/privacy}","received_events_url":"https://api.github.com/users/Corwinpro/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"Corwinpro","id":3482778,"node_id":"MDQ6VXNlcjM0ODI3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/3482778?v=4","gravatar_id":"","url":"https://api.github.com/users/Corwinpro","html_url":"https://github.com/Corwinpro","followers_url":"https://api.github.com/users/Corwinpro/followers","following_url":"https://api.github.com/users/Corwinpro/following{/other_user}","gists_url":"https://api.github.com/users/Corwinpro/gists{/gist_id}","starred_url":"https://api.github.com/users/Corwinpro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Corwinpro/subscriptions","organizations_url":"https://api.github.com/users/Corwinpro/orgs","repos_url":"https://api.github.com/users/Corwinpro/repos","events_url":"https://api.github.com/users/Corwinpro/events{/privacy}","received_events_url":"https://api.github.com/users/Corwinpro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T16:51:34Z","updated_at":"2023-08-25T16:51:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rustedpy/result/issues/137","repository_url":"https://api.github.com/repos/rustedpy/result","labels_url":"https://api.github.com/repos/rustedpy/result/issues/137/labels{/name}","comments_url":"https://api.github.com/repos/rustedpy/result/issues/137/comments","events_url":"https://api.github.com/repos/rustedpy/result/issues/137/events","html_url":"https://github.com/rustedpy/result/issues/137","id":1866836772,"node_id":"I_kwDOAtwU0c5vRask","number":137,"title":"mypy complains on \"Missing return statement\"","user":{"login":"Corwinpro","id":3482778,"node_id":"MDQ6VXNlcjM0ODI3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/3482778?v=4","gravatar_id":"","url":"https://api.github.com/users/Corwinpro","html_url":"https://github.com/Corwinpro","followers_url":"https://api.github.com/users/Corwinpro/followers","following_url":"https://api.github.com/users/Corwinpro/following{/other_user}","gists_url":"https://api.github.com/users/Corwinpro/gists{/gist_id}","starred_url":"https://api.github.com/users/Corwinpro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Corwinpro/subscriptions","organizations_url":"https://api.github.com/users/Corwinpro/orgs","repos_url":"https://api.github.com/users/Corwinpro/repos","events_url":"https://api.github.com/users/Corwinpro/events{/privacy}","received_events_url":"https://api.github.com/users/Corwinpro/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-08-25T11:01:58Z","updated_at":"2023-08-25T20:10:07Z","closed_at":"2023-08-25T20:10:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":47977681,"node_id":"MDEwOlJlcG9zaXRvcnk0Nzk3NzY4MQ==","name":"result","full_name":"rustedpy/result","private":false,"owner":{"login":"rustedpy","id":93280176,"node_id":"O_kgDOBY9XsA","avatar_url":"https://avatars.githubusercontent.com/u/93280176?v=4","gravatar_id":"","url":"https://api.github.com/users/rustedpy","html_url":"https://github.com/rustedpy","followers_url":"https://api.github.com/users/rustedpy/followers","following_url":"https://api.github.com/users/rustedpy/following{/other_user}","gists_url":"https://api.github.com/users/rustedpy/gists{/gist_id}","starred_url":"https://api.github.com/users/rustedpy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rustedpy/subscriptions","organizations_url":"https://api.github.com/users/rustedpy/orgs","repos_url":"https://api.github.com/users/rustedpy/repos","events_url":"https://api.github.com/users/rustedpy/events{/privacy}","received_events_url":"https://api.github.com/users/rustedpy/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rustedpy/result","description":"NOT MAINTAINED - A simple Rust like Result type for Python 3. Fully type annotated.","fork":false,"url":"https://api.github.com/repos/rustedpy/result","forks_url":"https://api.github.com/repos/rustedpy/result/forks","keys_url":"https://api.github.com/repos/rustedpy/result/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rustedpy/result/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rustedpy/result/teams","hooks_url":"https://api.github.com/repos/rustedpy/result/hooks","issue_events_url":"https://api.github.com/repos/rustedpy/result/issues/events{/number}","events_url":"https://api.github.com/repos/rustedpy/result/events","assignees_url":"https://api.github.com/repos/rustedpy/result/assignees{/user}","branches_url":"https://api.github.com/repos/rustedpy/result/branches{/branch}","tags_url":"https://api.github.com/repos/rustedpy/result/tags","blobs_url":"https://api.github.com/repos/rustedpy/result/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rustedpy/result/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rustedpy/result/git/refs{/sha}","trees_url":"https://api.github.com/repos/rustedpy/result/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rustedpy/result/statuses/{sha}","languages_url":"https://api.github.com/repos/rustedpy/result/languages","stargazers_url":"https://api.github.com/repos/rustedpy/result/stargazers","contributors_url":"https://api.github.com/repos/rustedpy/result/contributors","subscribers_url":"https://api.github.com/repos/rustedpy/result/subscribers","subscription_url":"https://api.github.com/repos/rustedpy/result/subscription","commits_url":"https://api.github.com/repos/rustedpy/result/commits{/sha}","git_commits_url":"https://api.github.com/repos/rustedpy/result/git/commits{/sha}","comments_url":"https://api.github.com/repos/rustedpy/result/comments{/number}","issue_comment_url":"https://api.github.com/repos/rustedpy/result/issues/comments{/number}","contents_url":"https://api.github.com/repos/rustedpy/result/contents/{+path}","compare_url":"https://api.github.com/repos/rustedpy/result/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rustedpy/result/merges","archive_url":"https://api.github.com/repos/rustedpy/result/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rustedpy/result/downloads","issues_url":"https://api.github.com/repos/rustedpy/result/issues{/number}","pulls_url":"https://api.github.com/repos/rustedpy/result/pulls{/number}","milestones_url":"https://api.github.com/repos/rustedpy/result/milestones{/number}","notifications_url":"https://api.github.com/repos/rustedpy/result/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rustedpy/result/labels{/name}","releases_url":"https://api.github.com/repos/rustedpy/result/releases{/id}","deployments_url":"https://api.github.com/repos/rustedpy/result/deployments","created_at":"2015-12-14T13:49:05Z","updated_at":"2025-11-09T08:56:19Z","pushed_at":"2024-08-19T18:43:16Z","git_url":"git://github.com/rustedpy/result.git","ssh_url":"git@github.com:rustedpy/result.git","clone_url":"https://github.com/rustedpy/result.git","svn_url":"https://github.com/rustedpy/result","homepage":"https://github.com/rustedpy/result/issues/201","size":198,"stargazers_count":1682,"watchers_count":1682,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":88,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":15,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["functional-programming","mypy","python","python3","railway-oriented-programming","rust","strongly-typed","type-safety","typechecking"],"visibility":"public","forks":88,"open_issues":15,"watchers":1682,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Is this a known issue? What is the suggested way around this?\r\n\r\n```python\r\nfrom result import Result, Err, Ok\r\n\r\n\r\ndef foo() -> Result[int, int]:\r\n    return Ok(1)\r\n\r\n\r\ndef bar() -> str:\r\n    match foo():\r\n        case Ok(value):\r\n            return f\"{value}\"\r\n        case Err(e):\r\n            raise RuntimeError(e)\r\n```\r\n\r\nRunning `mypy` on this results in\r\n\r\n```\r\nexample.py:8: error: Missing return statement  [return]\r\n```","reactions":{"url":"https://api.github.com/repos/rustedpy/result/issues/137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rustedpy/result/issues/137/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1785873047","html_url":"https://github.com/python/mypy/issues/12998#issuecomment-1785873047","issue_url":"https://api.github.com/repos/python/mypy/issues/12998","id":1785873047,"node_id":"IC_kwDOAGuhRc5qckKX","user":{"login":"bwo","id":68839,"node_id":"MDQ6VXNlcjY4ODM5","avatar_url":"https://avatars.githubusercontent.com/u/68839?v=4","gravatar_id":"","url":"https://api.github.com/users/bwo","html_url":"https://github.com/bwo","followers_url":"https://api.github.com/users/bwo/followers","following_url":"https://api.github.com/users/bwo/following{/other_user}","gists_url":"https://api.github.com/users/bwo/gists{/gist_id}","starred_url":"https://api.github.com/users/bwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bwo/subscriptions","organizations_url":"https://api.github.com/users/bwo/orgs","repos_url":"https://api.github.com/users/bwo/repos","events_url":"https://api.github.com/users/bwo/events{/privacy}","received_events_url":"https://api.github.com/users/bwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T19:08:49Z","updated_at":"2023-10-30T19:08:49Z","body":"Something similar seems to happen with tuples. Mypy doesn't like this:\r\n\r\n```python\r\ndef foo(i: int | str, j : int | str) -> int:\r\n    match (i, j):\r\n        case int(), int(): return i + j\r\n        case int(), str(): return i + len(j)\r\n        # and so on\r\n```\r\n\r\nBut this is fine:\r\n\r\n```python\r\ndef foo(i: int | str, j : int | str) -> int:\r\n    t = (i, j)\r\n    match t:\r\n        case int(), int(): return t[0] + t[1]\r\n        case int(), str(): return t[0] + len(t[1])\r\n    # and so on\r\n```\r\n\r\nhowever, even in the latter case, you can't put an `assert_never(t)` at the end.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1785873047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bwo","id":68839,"node_id":"MDQ6VXNlcjY4ODM5","avatar_url":"https://avatars.githubusercontent.com/u/68839?v=4","gravatar_id":"","url":"https://api.github.com/users/bwo","html_url":"https://github.com/bwo","followers_url":"https://api.github.com/users/bwo/followers","following_url":"https://api.github.com/users/bwo/following{/other_user}","gists_url":"https://api.github.com/users/bwo/gists{/gist_id}","starred_url":"https://api.github.com/users/bwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bwo/subscriptions","organizations_url":"https://api.github.com/users/bwo/orgs","repos_url":"https://api.github.com/users/bwo/repos","events_url":"https://api.github.com/users/bwo/events{/privacy}","received_events_url":"https://api.github.com/users/bwo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-12T22:22:44Z","updated_at":"2023-11-12T22:22:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/16276","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/16276/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/16276/comments","events_url":"https://api.github.com/repos/python/mypy/issues/16276/events","html_url":"https://github.com/python/mypy/issues/16276","id":1947463821,"node_id":"I_kwDOAGuhRc50E_CN","number":16276,"title":"Untrue \"missing return statement\" after exhaustive match on enum","user":{"login":"aleksanb","id":1413365,"node_id":"MDQ6VXNlcjE0MTMzNjU=","avatar_url":"https://avatars.githubusercontent.com/u/1413365?v=4","gravatar_id":"","url":"https://api.github.com/users/aleksanb","html_url":"https://github.com/aleksanb","followers_url":"https://api.github.com/users/aleksanb/followers","following_url":"https://api.github.com/users/aleksanb/following{/other_user}","gists_url":"https://api.github.com/users/aleksanb/gists{/gist_id}","starred_url":"https://api.github.com/users/aleksanb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aleksanb/subscriptions","organizations_url":"https://api.github.com/users/aleksanb/orgs","repos_url":"https://api.github.com/users/aleksanb/repos","events_url":"https://api.github.com/users/aleksanb/events{/privacy}","received_events_url":"https://api.github.com/users/aleksanb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-10-17T13:39:42Z","updated_at":"2024-10-09T00:00:46Z","closed_at":"2023-11-12T22:22:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nExhaustive match on enums fails if no intermediate alias of the match variable is given.\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nfrom enum import Enum\r\n\r\nclass Choices(str, Enum):\r\n    A=\"A\"\r\n    B=\"B\"\r\n    \r\n    \r\ndef matcher_implicit(a: str) -> str:\r\n    match Choices(a):\r\n        case Choices.A:\r\n            return 'ok'\r\n        case Choices.B:\r\n            return 'schmok'\r\n            \r\n\r\ndef matcher_alias(a: str) -> str:\r\n    explicit_alias = Choices(a)\r\n    match explicit_alias:\r\n        case Choices.A:\r\n            return 'ok'\r\n        case Choices.B:\r\n            return 'schmok'\r\n```\r\n\r\nYou can run this on https://mypy-play.net/?mypy=latest&python=3.11, and see that only `matcher_implicit` fails, but there's no reason why it should!\r\n\r\n**Expected Behavior**\r\n\r\nBoth should typecheck correctly \r\n\r\n**Actual Behavior**\r\n\r\nThe first one fails typechecking, with a fake \"missing return statement\" error emitted.\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: 1.5.1 and 1.6.0 (fails on both).\r\n- sample fails on mypy-play.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/16276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/16276/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":10973720817,"node_id":"REFE_lADOAGuhRc5MHiuDzwAAAAKOFbDx","url":"https://api.github.com/repos/python/mypy/issues/events/10973720817","actor":{"login":"edpaget","id":108177,"node_id":"MDQ6VXNlcjEwODE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/108177?v=4","gravatar_id":"","url":"https://api.github.com/users/edpaget","html_url":"https://github.com/edpaget","followers_url":"https://api.github.com/users/edpaget/followers","following_url":"https://api.github.com/users/edpaget/following{/other_user}","gists_url":"https://api.github.com/users/edpaget/gists{/gist_id}","starred_url":"https://api.github.com/users/edpaget/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edpaget/subscriptions","organizations_url":"https://api.github.com/users/edpaget/orgs","repos_url":"https://api.github.com/users/edpaget/repos","events_url":"https://api.github.com/users/edpaget/events{/privacy}","received_events_url":"https://api.github.com/users/edpaget/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2d04f054c0d7f9a6b8d7dc6c3a8a9b9a082cd3fa","commit_url":"https://api.github.com/repos/edpaget/mypy/commits/2d04f054c0d7f9a6b8d7dc6c3a8a9b9a082cd3fa","created_at":"2023-11-16T00:06:21Z","performed_via_github_app":null},{"actor":{"login":"edpaget","id":108177,"node_id":"MDQ6VXNlcjEwODE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/108177?v=4","gravatar_id":"","url":"https://api.github.com/users/edpaget","html_url":"https://github.com/edpaget","followers_url":"https://api.github.com/users/edpaget/followers","following_url":"https://api.github.com/users/edpaget/following{/other_user}","gists_url":"https://api.github.com/users/edpaget/gists{/gist_id}","starred_url":"https://api.github.com/users/edpaget/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edpaget/subscriptions","organizations_url":"https://api.github.com/users/edpaget/orgs","repos_url":"https://api.github.com/users/edpaget/repos","events_url":"https://api.github.com/users/edpaget/events{/privacy}","received_events_url":"https://api.github.com/users/edpaget/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T00:06:31Z","updated_at":"2023-11-16T00:06:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/16503","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/16503/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/16503/comments","events_url":"https://api.github.com/repos/python/mypy/issues/16503/events","html_url":"https://github.com/python/mypy/pull/16503","id":1995787187,"node_id":"PR_kwDOAGuhRc5fkrGx","number":16503,"title":"Fix narrowing on match with function subject","user":{"login":"edpaget","id":108177,"node_id":"MDQ6VXNlcjEwODE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/108177?v=4","gravatar_id":"","url":"https://api.github.com/users/edpaget","html_url":"https://github.com/edpaget","followers_url":"https://api.github.com/users/edpaget/followers","following_url":"https://api.github.com/users/edpaget/following{/other_user}","gists_url":"https://api.github.com/users/edpaget/gists{/gist_id}","starred_url":"https://api.github.com/users/edpaget/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edpaget/subscriptions","organizations_url":"https://api.github.com/users/edpaget/orgs","repos_url":"https://api.github.com/users/edpaget/repos","events_url":"https://api.github.com/users/edpaget/events{/privacy}","received_events_url":"https://api.github.com/users/edpaget/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4374012541,"node_id":"LA_kwDOAGuhRc8AAAABBLYifQ","url":"https://api.github.com/repos/python/mypy/labels/upnext","name":"upnext","color":"2FAE2F","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-11-16T00:06:30Z","updated_at":"2024-02-18T22:18:18Z","closed_at":"2024-02-17T23:32:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/16503","html_url":"https://github.com/python/mypy/pull/16503","diff_url":"https://github.com/python/mypy/pull/16503.diff","patch_url":"https://github.com/python/mypy/pull/16503.patch","merged_at":"2024-02-17T23:32:11Z"},"body":"Fixes #12998\r\n\r\nmypy can't narrow match statements with functions subjects because the callexpr node is not a literal node. This adds a 'dummy' literal node that the match statement visitor can use to do the type narrowing.\r\n\r\nThe python grammar describes the the match subject as a named expression so this uses that nameexpr node as it's literal.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/16503/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/16503/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":10973862904,"node_id":"REFE_lADOAGuhRc5MHiuDzwAAAAKOF9v4","url":"https://api.github.com/repos/python/mypy/issues/events/10973862904","actor":{"login":"edpaget","id":108177,"node_id":"MDQ6VXNlcjEwODE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/108177?v=4","gravatar_id":"","url":"https://api.github.com/users/edpaget","html_url":"https://github.com/edpaget","followers_url":"https://api.github.com/users/edpaget/followers","following_url":"https://api.github.com/users/edpaget/following{/other_user}","gists_url":"https://api.github.com/users/edpaget/gists{/gist_id}","starred_url":"https://api.github.com/users/edpaget/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edpaget/subscriptions","organizations_url":"https://api.github.com/users/edpaget/orgs","repos_url":"https://api.github.com/users/edpaget/repos","events_url":"https://api.github.com/users/edpaget/events{/privacy}","received_events_url":"https://api.github.com/users/edpaget/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5806bc77a5711e25bfbcac9673ca31064fec01ad","commit_url":"https://api.github.com/repos/edpaget/mypy/commits/5806bc77a5711e25bfbcac9673ca31064fec01ad","created_at":"2023-11-16T00:29:46Z","performed_via_github_app":null},{"id":11837428947,"node_id":"CE_lADOAGuhRc5MHiuDzwAAAALBkNTT","url":"https://api.github.com/repos/python/mypy/issues/events/11837428947","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-02-17T23:32:12Z","state_reason":null,"performed_via_github_app":null},{"id":11837428962,"node_id":"REFE_lADOAGuhRc5MHiuDzwAAAALBkNTi","url":"https://api.github.com/repos/python/mypy/issues/events/11837428962","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"17271e57cfce5c441c3e481d20b28ca7484db231","commit_url":"https://api.github.com/repos/python/mypy/commits/17271e57cfce5c441c3e481d20b28ca7484db231","created_at":"2024-02-17T23:32:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1950565401","html_url":"https://github.com/python/mypy/issues/12998#issuecomment-1950565401","issue_url":"https://api.github.com/repos/python/mypy/issues/12998","id":1950565401,"node_id":"IC_kwDOAGuhRc50Q0QZ","user":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T23:44:45Z","updated_at":"2024-02-17T23:44:45Z","body":"Btw, I'm curious if any of the folks on this thread are encountering this in open source projects. I'd love to add more coverage for match statement to mypy_primer","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1950565401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11867227473,"node_id":"REFE_lADOAGuhRc5MHiuDzwAAAALDV4VR","url":"https://api.github.com/repos/python/mypy/issues/events/11867227473","actor":{"login":"hamdanal","id":93259987,"node_id":"U_kgDOBY8I0w","avatar_url":"https://avatars.githubusercontent.com/u/93259987?v=4","gravatar_id":"","url":"https://api.github.com/users/hamdanal","html_url":"https://github.com/hamdanal","followers_url":"https://api.github.com/users/hamdanal/followers","following_url":"https://api.github.com/users/hamdanal/following{/other_user}","gists_url":"https://api.github.com/users/hamdanal/gists{/gist_id}","starred_url":"https://api.github.com/users/hamdanal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hamdanal/subscriptions","organizations_url":"https://api.github.com/users/hamdanal/orgs","repos_url":"https://api.github.com/users/hamdanal/repos","events_url":"https://api.github.com/users/hamdanal/events{/privacy}","received_events_url":"https://api.github.com/users/hamdanal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ca45d20e6e51da88e12f97ee90dea996509299da","commit_url":"https://api.github.com/repos/hamdanal/mypy/commits/ca45d20e6e51da88e12f97ee90dea996509299da","created_at":"2024-02-20T20:46:41Z","performed_via_github_app":null},{"actor":{"login":"Hnasar","id":463274,"node_id":"MDQ6VXNlcjQ2MzI3NA==","avatar_url":"https://avatars.githubusercontent.com/u/463274?v=4","gravatar_id":"","url":"https://api.github.com/users/Hnasar","html_url":"https://github.com/Hnasar","followers_url":"https://api.github.com/users/Hnasar/followers","following_url":"https://api.github.com/users/Hnasar/following{/other_user}","gists_url":"https://api.github.com/users/Hnasar/gists{/gist_id}","starred_url":"https://api.github.com/users/Hnasar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hnasar/subscriptions","organizations_url":"https://api.github.com/users/Hnasar/orgs","repos_url":"https://api.github.com/users/Hnasar/repos","events_url":"https://api.github.com/users/Hnasar/events{/privacy}","received_events_url":"https://api.github.com/users/Hnasar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-24T04:56:44Z","updated_at":"2024-03-24T04:56:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/14393","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/14393/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/14393/comments","events_url":"https://api.github.com/repos/python/mypy/issues/14393/events","html_url":"https://github.com/python/mypy/issues/14393","id":1519267071,"node_id":"I_kwDOAGuhRc5ajiz_","number":14393,"title":"Enums do not exhaustively match correctly   ","user":{"login":"Be3y4uu-K0T","id":60096074,"node_id":"MDQ6VXNlcjYwMDk2MDc0","avatar_url":"https://avatars.githubusercontent.com/u/60096074?v=4","gravatar_id":"","url":"https://api.github.com/users/Be3y4uu-K0T","html_url":"https://github.com/Be3y4uu-K0T","followers_url":"https://api.github.com/users/Be3y4uu-K0T/followers","following_url":"https://api.github.com/users/Be3y4uu-K0T/following{/other_user}","gists_url":"https://api.github.com/users/Be3y4uu-K0T/gists{/gist_id}","starred_url":"https://api.github.com/users/Be3y4uu-K0T/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Be3y4uu-K0T/subscriptions","organizations_url":"https://api.github.com/users/Be3y4uu-K0T/orgs","repos_url":"https://api.github.com/users/Be3y4uu-K0T/repos","events_url":"https://api.github.com/users/Be3y4uu-K0T/events{/privacy}","received_events_url":"https://api.github.com/users/Be3y4uu-K0T/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"},{"id":3945119299,"node_id":"LA_kwDOAGuhRc7rJb5D","url":"https://api.github.com/repos/python/mypy/labels/topic-reachability","name":"topic-reachability","color":"2EC6A6","default":false,"description":"Detecting unreachable code"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-01-04T16:33:58Z","updated_at":"2024-03-24T09:26:27Z","closed_at":"2024-03-24T09:26:27Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nWhen I transform a value into an enum, an error occurs in the `match case` construct. If you convert the value in advance, there will be no error. Same issue #14109 #14264 .\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nimport typing\r\nimport enum\r\n\r\nclass Color(enum.StrEnum):\r\n    RED = enum.auto()\r\n    GREEN = enum.auto()\r\n    BLUE = enum.auto()\r\n\r\ndef test(color: str) -> str:\r\n    match Color(color):\r\n        case Color.RED:\r\n            return 'red'\r\n        case Color.GREEN:\r\n            return 'green'\r\n        case Color.BLUE:\r\n            return 'blue'\r\n        case _ as unreachable:\r\n            typing.assert_never(unreachable)\r\n```\r\n\r\nhttps://mypy-play.net/?mypy=latest&python=3.11&gist=d28ae2af9f4545ca1c302476d8e4c782\r\n\r\n```python\r\nimport typing\r\nimport enum\r\n\r\nclass Color(enum.StrEnum):\r\n    RED = enum.auto()\r\n    GREEN = enum.auto()\r\n    BLUE = enum.auto()\r\n\r\ndef test(color: str) -> str:\r\n    color = Color(color)\r\n    match color:\r\n        case Color.RED:\r\n            return 'red'\r\n        case Color.GREEN:\r\n            return 'green'\r\n        case Color.BLUE:\r\n            return 'blue'\r\n        case _ as unreachable:\r\n            typing.assert_never(unreachable)\r\n```\r\n\r\nhttps://mypy-play.net/?mypy=latest&python=3.11&gist=eab4deab65eb38a49649a46a2adc1e42\r\n\r\n**Actual Behavior**\r\n\r\nIn the first example:\r\n```\r\nmain.py:18: error: Argument 1 to \"assert_never\" has incompatible type \"Color\"; expected \"NoReturn\"  [arg-type]\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\nIn the second example:\r\n```\r\nSuccess: no issues found in 1 source file\r\n```\r\n\r\n**Your Environment**\r\n\r\n- Mypy version used: mypy 0.991 (compiled: yes)\r\n- Mypy command-line flags: N/A\r\n- Mypy configuration options from `mypy.ini` (and other config files): N/A\r\n- Python version used: 3.11.1","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/14393/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/14393/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T08:33:20Z","updated_at":"2024-03-29T08:33:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/17075","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/17075/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/17075/comments","events_url":"https://api.github.com/repos/python/mypy/issues/17075/events","html_url":"https://github.com/python/mypy/issues/17075","id":2214922966,"node_id":"I_kwDOAGuhRc6EBQrW","number":17075,"title":"unreachable idiom doesn't work on match of function call expression","user":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-29T08:31:51Z","updated_at":"2024-03-29T08:33:22Z","closed_at":"2024-03-29T08:33:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"[playground](https://mypy-play.net/?mypy=latest&python=3.12&gist=dbbc5e718ba69e0dc05ee00f8e80c8c9)\r\n\r\n```python\r\nfrom typing import assert_never\r\n\r\ndef returns_union() -> int | float | None:\r\n    return None\r\n    \r\ndef broken() -> None:\r\n    match returns_union():\r\n        case None:\r\n            pass\r\n        case int():\r\n            pass\r\n        case float():\r\n            pass\r\n        case never:\r\n            assert_never(never) # error: Argument 1 to \"assert_never\" has incompatible type \"int | float | None\"; expected \"NoReturn\"  [arg-type]\r\n            \r\ndef not_broken() -> None:\r\n    match _ := returns_union(): # assignment to unused variable fixes the problem\r\n        case None:\r\n            pass\r\n        case int():\r\n            pass\r\n        case float():\r\n            pass\r\n        case never:\r\n            assert_never(never)\r\n```","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/17075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/17075/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2083710438","html_url":"https://github.com/python/mypy/issues/12998#issuecomment-2083710438","issue_url":"https://api.github.com/repos/python/mypy/issues/12998","id":2083710438,"node_id":"IC_kwDOAGuhRc58MuXm","user":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-29T21:30:03Z","updated_at":"2024-04-29T21:30:15Z","body":"It seems this is still an issue in the presence of `match await`.\r\n\r\nhttps://mypy-play.net/?mypy=master&python=3.12&gist=53b6a8349cf88907ed6608f7fdb05050\r\n\r\n```python\r\nfrom typing import assert_never\r\nfrom collections.abc import Awaitable\r\n\r\nasync def fn() -> int | None:\r\n    return None\r\n\r\nasync def foo() -> None:\r\n    match await fn(): \r\n        case int():\r\n            pass\r\n        case None:\r\n            pass\r\n        case _ as unreachable:\r\n            assert_never(unreachable)\r\n```\r\n```\r\nmain.py:14: error: Argument 1 to \"assert_never\" has incompatible type \"int | None\"; expected \"NoReturn\"  [arg-type]\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2083710438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-30T15:37:32Z","updated_at":"2024-04-30T15:37:32Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/17199","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/17199/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/17199/comments","events_url":"https://api.github.com/repos/python/mypy/issues/17199/events","html_url":"https://github.com/python/mypy/pull/17199","id":2271845579,"node_id":"PR_kwDOAGuhRc5uKeUy","number":17199,"title":"Add test documenting #17230","user":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2024-04-30T15:37:31Z","updated_at":"2024-05-21T08:56:39Z","closed_at":"2024-05-21T02:33:13Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/17199","html_url":"https://github.com/python/mypy/pull/17199","diff_url":"https://github.com/python/mypy/pull/17199.diff","patch_url":"https://github.com/python/mypy/pull/17199.patch","merged_at":"2024-05-21T02:33:13Z"},"body":"Add a test demonstrating #17230.\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/17199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/17199/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-09T14:03:51Z","updated_at":"2024-05-09T14:03:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/17230","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/17230/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/17230/comments","events_url":"https://api.github.com/repos/python/mypy/issues/17230/events","html_url":"https://github.com/python/mypy/issues/17230","id":2287767576,"node_id":"I_kwDOAGuhRc6IXJAY","number":17230,"title":"match narrowing fails when the operand is an `await` expression","user":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-09T14:03:51Z","updated_at":"2025-08-03T22:42:55Z","closed_at":"2025-08-03T22:42:55Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This is related to https://github.com/python/mypy/issues/12998.\r\n\r\nhttps://mypy-play.net/?mypy=latest&python=3.12&gist=42bbd2ec432dbfd003429c64b8dc7435\r\n\r\n```python\r\nfrom typing import assert_never\r\n\r\nasync def fn() -> int | None:\r\n    return None\r\n\r\nasync def foo() -> None:\r\n    match await fn(): \r\n        case int():\r\n            pass\r\n        case None:\r\n            pass\r\n        case never:\r\n            assert_never(never) # error: Argument 1 to \"assert_never\" has incompatible type \"int | None\"; expected \"NoReturn\"  [arg-type]\r\n            \r\nasync def bar() -> None:\r\n    a = fn()\r\n    match await a: \r\n        case int():\r\n            pass\r\n        case None:\r\n            pass\r\n        case never:\r\n            assert_never(never) # error: Argument 1 to \"assert_never\" has incompatible type \"int | None\"; expected \"NoReturn\"  [arg-type]\r\n            \r\nasync def baz() -> None:\r\n    match _a := await fn(): \r\n        case int():\r\n            pass\r\n        case None:\r\n            pass\r\n        case never:\r\n            assert_never(never) # works!\r\n```\r\n\r\nI also sent https://github.com/python/mypy/pull/17199 with a test case that demonstrates the bug.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/17230/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/17230/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]