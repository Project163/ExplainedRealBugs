{"url":"https://api.github.com/repos/python/mypy/issues/18126","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/18126/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/18126/comments","events_url":"https://api.github.com/repos/python/mypy/issues/18126/events","html_url":"https://github.com/python/mypy/issues/18126","id":2641821118,"node_id":"I_kwDOAGuhRc6ddv2-","number":18126,"title":"False positive \"Statement is unreachable\" when checking if typevar is None","user":{"login":"Cnoor0171","id":33206267,"node_id":"MDQ6VXNlcjMzMjA2MjY3","avatar_url":"https://avatars.githubusercontent.com/u/33206267?v=4","gravatar_id":"","url":"https://api.github.com/users/Cnoor0171","html_url":"https://github.com/Cnoor0171","followers_url":"https://api.github.com/users/Cnoor0171/followers","following_url":"https://api.github.com/users/Cnoor0171/following{/other_user}","gists_url":"https://api.github.com/users/Cnoor0171/gists{/gist_id}","starred_url":"https://api.github.com/users/Cnoor0171/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cnoor0171/subscriptions","organizations_url":"https://api.github.com/users/Cnoor0171/orgs","repos_url":"https://api.github.com/users/Cnoor0171/repos","events_url":"https://api.github.com/users/Cnoor0171/events{/privacy}","received_events_url":"https://api.github.com/users/Cnoor0171/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":427181007,"node_id":"MDU6TGFiZWw0MjcxODEwMDc=","url":"https://api.github.com/repos/python/mypy/labels/topic-type-variables","name":"topic-type-variables","color":"0052cc","default":false,"description":null},{"id":3945373534,"node_id":"LA_kwDOAGuhRc7rKZ9e","url":"https://api.github.com/repos/python/mypy/labels/topic-overlap","name":"topic-overlap","color":"0052cc","default":false,"description":"Overlapping equality check"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-11-07T18:18:23Z","updated_at":"2024-11-21T14:46:52Z","closed_at":"2024-11-21T14:46:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nIf you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form instead.\r\nPlease consider:\r\n\r\n- checking our common issues page: https://mypy.readthedocs.io/en/stable/common_issues.html\r\n- searching our issue tracker: https://github.com/python/mypy/issues to see if it's already been reported\r\n- asking on gitter chat: https://gitter.im/python/typing\r\n-->\r\n\r\n**Bug Report**\r\n\r\n<!--\r\nIf you're reporting a problem with a specific library function, the typeshed tracker is better suited for this report: https://github.com/python/typeshed/issues\r\n\r\nIf the project you encountered the issue in is open source, please provide a link to the project.\r\n-->\r\n\r\nMypy doesn't seem to like it when you check if an argument with typevar type is checked to see if it is `None`. It incorrectly reports ` error: Statement is unreachable  [unreachable]`\r\n\r\n**To Reproduce**\r\n\r\nhttps://mypy-play.net/?mypy=latest&python=3.12&flags=strict%2Cwarn-unreachable&gist=ceb8193f19f8b53a55dea70fad802469\r\n\r\n```python\r\nimport typing as t\r\n\r\nT = t.TypeVar(\"T\")\r\n\r\ndef foo(arg: T) -> None:\r\n    if arg is None:\r\n        return None\r\n    # Do something with arg\r\n    return None\r\n\r\n\r\nfoo(None) ## Allowed\r\nfoo(123)\r\n```\r\n\r\nRun mypy with `--warn-unreachable` flag\r\n\r\n**Expected Behavior**\r\n\r\n<!--\r\nHow did you expect mypy to behave? It’s fine if you’re not sure your understanding is correct.\r\nWrite down what you thought would happen. If you expected no errors, delete this section.\r\n-->\r\nNo errors\r\n\r\n**Actual Behavior**\r\n\r\n<!-- What went wrong? Paste mypy's output. -->\r\n```\r\n$ mypy .vscode/scratch.py\r\n.vscode/scratch.py: note: In function \"foo\":\r\n.vscode/scratch.py:9: error: Statement is unreachable  [unreachable]\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\nThe error seems to only happen when checking if arg is `None`, but not with other types. For example, I tired changing `if arg is None:` line to the following and these were the results.\r\n\r\n1. `if arg is True:` -> no errors\r\n2. `if isinstance(arg, int):` -> no errors\r\n3. `if isinstance(arg, type(None)):` -> unreachable error\r\n4. `if arg == None:` -> No error\r\n\r\nAlso, changing the type to `T | None` removes the error as well.\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: mypy 1.13.0 (compiled: yes)\r\n- Mypy command-line flags:\r\n- Mypy configuration options from `mypy.ini` (and other config files): `warn_unreachable = True`\r\n- Python version used: 3.12\r\n\r\n<!-- You can freely edit this text, please remove all the lines you believe are unnecessary. -->\r\n","closed_by":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/18126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/18126/timeline","performed_via_github_app":null,"state_reason":"completed"}