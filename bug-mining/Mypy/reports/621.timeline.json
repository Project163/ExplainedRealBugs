[{"id":15886436577,"node_id":"LE_lADOAGuhRc6lwD5PzwAAAAOy58jh","url":"https://api.github.com/repos/python/mypy/issues/events/15886436577","actor":{"login":"esceral","id":102366750,"node_id":"U_kgDOBhn-Hg","avatar_url":"https://avatars.githubusercontent.com/u/102366750?v=4","gravatar_id":"","url":"https://api.github.com/users/esceral","html_url":"https://github.com/esceral","followers_url":"https://api.github.com/users/esceral/followers","following_url":"https://api.github.com/users/esceral/following{/other_user}","gists_url":"https://api.github.com/users/esceral/gists{/gist_id}","starred_url":"https://api.github.com/users/esceral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/esceral/subscriptions","organizations_url":"https://api.github.com/users/esceral/orgs","repos_url":"https://api.github.com/users/esceral/repos","events_url":"https://api.github.com/users/esceral/events{/privacy}","received_events_url":"https://api.github.com/users/esceral/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-10T18:35:48Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2583783990","html_url":"https://github.com/python/mypy/issues/18440#issuecomment-2583783990","issue_url":"https://api.github.com/repos/python/mypy/issues/18440","id":2583783990,"node_id":"IC_kwDOAGuhRc6aAWo2","user":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-10T19:36:37Z","updated_at":"2025-01-10T19:36:37Z","body":"Thanks for the report!\r\n\r\nThe first example is not a bug.  Consider this example:\r\n\r\n```python\r\ndef a(k: str, d: dict[str, int | str]):\r\n    if isinstance(d[k], str):\r\n        d[k] = 1\r\n        d[k].upper()  # clearly a crash\r\n```\r\n\r\nHowever, the second example is in fact a limitation:\r\n\r\n```python\r\ndef b(k: str, d: dict[str, int|str]):\r\n    match d[k]:\r\n        case str(s):\r\n            print(s.upper())\r\n        case int(x):\r\n            print(x)\r\n        case unreachable:\r\n            assert_never(unreachable)  # really not reachable\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2583783990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15887602617,"node_id":"LE_lADOAGuhRc6lwD5PzwAAAAOy-ZO5","url":"https://api.github.com/repos/python/mypy/issues/events/15887602617","actor":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-10T19:37:02Z","label":{"name":"topic-match-statement","color":"70246D"},"performed_via_github_app":null},{"id":15887602622,"node_id":"LE_lADOAGuhRc6lwD5PzwAAAAOy-ZO-","url":"https://api.github.com/repos/python/mypy/issues/events/15887602622","actor":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-10T19:37:02Z","label":{"name":"topic-type-narrowing","color":"9F31C3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2583832041","html_url":"https://github.com/python/mypy/issues/18440#issuecomment-2583832041","issue_url":"https://api.github.com/repos/python/mypy/issues/18440","id":2583832041,"node_id":"IC_kwDOAGuhRc6aAiXp","user":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-10T19:46:46Z","updated_at":"2025-01-10T19:46:46Z","body":"And the second part happens because only calls are currently considered \"special enough\", and an IndexExpr is not a CallExpr:\r\n\r\nhttps://github.com/python/mypy/blob/106f714ad5967b82dcacd965c46fe6bbff38c05d/mypy/checker.py#L5272-L5284\r\n\r\nThat was introduced in #16503. I guess it should be possible to rewrite that name generation logic to make it work with any expression, not only a simple call. ","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2583832041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2583921426","html_url":"https://github.com/python/mypy/issues/18440#issuecomment-2583921426","issue_url":"https://api.github.com/repos/python/mypy/issues/18440","id":2583921426,"node_id":"IC_kwDOAGuhRc6aA4MS","user":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-10T20:05:09Z","updated_at":"2025-01-10T20:05:09Z","body":"@sterliakov: Cool, do you plan to extend \"this hack\"?  I was starting to do it, but only have the test case so far:\r\n\r\n```python\r\n# flags: --warn-unreachable\r\n\r\nfrom typing import Dict, Union\r\n\r\nm: Dict[str, Union[int, str]]\r\nk: str\r\n\r\nmatch m[k]:\r\n    case str(s):\r\n        reveal_type(s)  # N: Revealed type is \"builtins.str\"\r\n    case int(i):\r\n        reveal_type(i)  # N: Revealed type is \"builtins.int\"\r\n    case u:\r\n        u\r\n\r\n[builtins fixtures/dict.pyi]\r\n```\r\n\r\nFeel free to take it, if this small snippet seems useful.\r\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2583921426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15888061911,"node_id":"MEE_lADOAGuhRc6lwD5PzwAAAAOzAJXX","url":"https://api.github.com/repos/python/mypy/issues/events/15888061911","actor":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-01-10T20:05:11Z","performed_via_github_app":null},{"id":15888061920,"node_id":"SE_lADOAGuhRc6lwD5PzwAAAAOzAJXg","url":"https://api.github.com/repos/python/mypy/issues/events/15888061920","actor":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-01-10T20:05:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2584222344","html_url":"https://github.com/python/mypy/issues/18440#issuecomment-2584222344","issue_url":"https://api.github.com/repos/python/mypy/issues/18440","id":2584222344,"node_id":"IC_kwDOAGuhRc6aCBqI","user":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-10T21:13:18Z","updated_at":"2025-01-10T21:13:18Z","body":"@tyralla yep, I'll try to get this done soon. I think I can (at a reasonably low cost of just keeping a last_used_id per `TypeChecker`) handle that for arbitrary expressions in `match` without trying to specialize for any specific one. That would also allow narrowing of immediately-constructed tuples/lists/dicts/sets (with tuple being probably the most popular pattern), and maybe some other expressions I didn't think of yet.\r\n\r\nWe can also try to extend this spaghetti one-by-one for call, index, tuple, list, ... expressions, but I don't think it's the most ergonomic solution. This id shouldn't ever leak to error messages, so IMO just `f\"dummy-match-{self.last_used_id}\"` is a perfect candidate.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2584222344/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15889058213,"node_id":"MEE_lADOAGuhRc6lwD5PzwAAAAOzD8ml","url":"https://api.github.com/repos/python/mypy/issues/events/15889058213","actor":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-01-10T21:13:19Z","performed_via_github_app":null},{"id":15889058249,"node_id":"SE_lADOAGuhRc6lwD5PzwAAAAOzD8nJ","url":"https://api.github.com/repos/python/mypy/issues/events/15889058249","actor":{"login":"tyralla","id":25983587,"node_id":"MDQ6VXNlcjI1OTgzNTg3","avatar_url":"https://avatars.githubusercontent.com/u/25983587?v=4","gravatar_id":"","url":"https://api.github.com/users/tyralla","html_url":"https://github.com/tyralla","followers_url":"https://api.github.com/users/tyralla/followers","following_url":"https://api.github.com/users/tyralla/following{/other_user}","gists_url":"https://api.github.com/users/tyralla/gists{/gist_id}","starred_url":"https://api.github.com/users/tyralla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tyralla/subscriptions","organizations_url":"https://api.github.com/users/tyralla/orgs","repos_url":"https://api.github.com/users/tyralla/repos","events_url":"https://api.github.com/users/tyralla/events{/privacy}","received_events_url":"https://api.github.com/users/tyralla/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-01-10T21:13:19Z","performed_via_github_app":null},{"actor":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-11T21:22:15Z","updated_at":"2025-01-11T21:22:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/18446","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/18446/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/18446/comments","events_url":"https://api.github.com/repos/python/mypy/issues/18446/events","html_url":"https://github.com/python/mypy/pull/18446","id":2782151878,"node_id":"PR_kwDOAGuhRc6HcBDY","number":18446,"title":"Introduce temporary named expressions for `match` subjects","user":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4374012541,"node_id":"LA_kwDOAGuhRc8AAAABBLYifQ","url":"https://api.github.com/repos/python/mypy/labels/upnext","name":"upnext","color":"2FAE2F","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2025-01-11T21:22:13Z","updated_at":"2025-08-03T22:42:54Z","closed_at":"2025-08-03T22:42:53Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/18446","html_url":"https://github.com/python/mypy/pull/18446","diff_url":"https://github.com/python/mypy/pull/18446.diff","patch_url":"https://github.com/python/mypy/pull/18446.patch","merged_at":"2025-08-03T22:42:53Z"},"body":"Fixes #18440. Fixes #17230. Fixes #16650. Improves behavior in #14731 (but still thinks that match is non-exhaustive, \"missing return\" false positive remains).\r\n\r\n#16503 did this specifically for `CallExpr`, but that isn't the only kind of such statements. I propose to expand this for more general expressions and believe that a blacklist is more reasonable here: we do **not** want to introduce a temporary name only for certain expressions that either are already named or can be used to infer contained variables (inline tuple/list/dict/set literals). \r\n\r\nWriting logic to generate a name for every other kind of expression would be quite cumbersome - I circumvent this by using a simple counter to generate unique names on demand.","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/18446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/18446/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-04T14:35:29Z","updated_at":"2025-04-04T14:35:29Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/18875","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/18875/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/18875/comments","events_url":"https://api.github.com/repos/python/mypy/issues/18875/events","html_url":"https://github.com/python/mypy/issues/18875","id":2969317034,"node_id":"I_kwDOAGuhRc6w_C6q","number":18875,"title":"Pattern matching is not exhaustive in a weird edge case with an enum member subject","user":{"login":"injust","id":3387175,"node_id":"MDQ6VXNlcjMzODcxNzU=","avatar_url":"https://avatars.githubusercontent.com/u/3387175?v=4","gravatar_id":"","url":"https://api.github.com/users/injust","html_url":"https://github.com/injust","followers_url":"https://api.github.com/users/injust/followers","following_url":"https://api.github.com/users/injust/following{/other_user}","gists_url":"https://api.github.com/users/injust/gists{/gist_id}","starred_url":"https://api.github.com/users/injust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/injust/subscriptions","organizations_url":"https://api.github.com/users/injust/orgs","repos_url":"https://api.github.com/users/injust/repos","events_url":"https://api.github.com/users/injust/events{/privacy}","received_events_url":"https://api.github.com/users/injust/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3542345285,"node_id":"LA_kwDOAGuhRc7TI-ZF","url":"https://api.github.com/repos/python/mypy/labels/topic-enum","name":"topic-enum","color":"47988D","default":false,"description":""},{"id":3741739123,"node_id":"LA_kwDOAGuhRc7fBmhz","url":"https://api.github.com/repos/python/mypy/labels/topic-match-statement","name":"topic-match-statement","color":"70246D","default":false,"description":"Python 3.10's match statement"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-04-03T11:48:18Z","updated_at":"2025-04-04T15:03:03Z","closed_at":"2025-04-04T15:03:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\n\n1. Access an enum member by name, but the name cannot be inline (e.g. you can access it from a variable)\n2. Directly use the enum member as the subject in a match statement\n\nIf you do this, mypy does not think the match statement is exhaustive.\n\n**To Reproduce**\n\nhttps://mypy-play.net/?mypy=latest&python=3.13&flags=strict&gist=0d11136907ace743b0f2412ad0f26bb1\n\n```python\nfrom enum import Enum, auto\nfrom typing import reveal_type\n\n\nclass Thing(Enum):\n    ONE = auto()\n    TWO = auto()\n\n\ntwo = \"TWO\"\n\n\ndef good() -> int:\n    version = Thing[two]\n    match version:\n        case Thing.ONE:\n            return 1\n        case Thing.TWO:\n            return 2\n\n\ndef bad() -> int:\n    match Thing[two]:\n        case Thing.ONE:\n            return 1\n        case Thing.TWO:\n            return 2\n        case _ as thing:\n            reveal_type(thing)\n```\n\nIf you replace `Thing[two]` with `Thing[\"TWO\"]`, the problem also goes away.\n\n**Expected Behavior**\n\nBoth match statements are exhaustive, so there is a return statement for all cases.\n\n**Actual Behavior**\n\n```\nmain.py:22: error: Missing return statement  [return]\nmain.py:29: note: Revealed type is \"__main__.Thing\"\nFound 1 error in 1 file (checked 1 source file)\n```\n\n**Your Environment**\n\n- Mypy version used: 1.15.0\n- Mypy command-line flags: --strict\n- Python version used: 3.13","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/18875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/18875/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"id":17131843024,"node_id":"MADE_lADOAGuhRc6lwD5PzwAAAAP9Iy3Q","url":"https://api.github.com/repos/python/mypy/issues/events/17131843024","actor":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"marked_as_duplicate","commit_id":null,"commit_url":null,"created_at":"2025-04-04T15:03:03Z","performed_via_github_app":null},{"actor":{"login":"arvi18","id":77156658,"node_id":"MDQ6VXNlcjc3MTU2NjU4","avatar_url":"https://avatars.githubusercontent.com/u/77156658?v=4","gravatar_id":"","url":"https://api.github.com/users/arvi18","html_url":"https://github.com/arvi18","followers_url":"https://api.github.com/users/arvi18/followers","following_url":"https://api.github.com/users/arvi18/following{/other_user}","gists_url":"https://api.github.com/users/arvi18/gists{/gist_id}","starred_url":"https://api.github.com/users/arvi18/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arvi18/subscriptions","organizations_url":"https://api.github.com/users/arvi18/orgs","repos_url":"https://api.github.com/users/arvi18/repos","events_url":"https://api.github.com/users/arvi18/events{/privacy}","received_events_url":"https://api.github.com/users/arvi18/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-23T11:03:46Z","updated_at":"2025-04-23T11:03:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/coderabbit-test/mypy/issues/4","repository_url":"https://api.github.com/repos/coderabbit-test/mypy","labels_url":"https://api.github.com/repos/coderabbit-test/mypy/issues/4/labels{/name}","comments_url":"https://api.github.com/repos/coderabbit-test/mypy/issues/4/comments","events_url":"https://api.github.com/repos/coderabbit-test/mypy/issues/4/events","html_url":"https://github.com/coderabbit-test/mypy/pull/4","id":3013623392,"node_id":"PR_kwDOOeUlDM6Tksl7","number":4,"title":"Introduce temporary named expressions for `match` subjects","user":{"login":"arvi18","id":77156658,"node_id":"MDQ6VXNlcjc3MTU2NjU4","avatar_url":"https://avatars.githubusercontent.com/u/77156658?v=4","gravatar_id":"","url":"https://api.github.com/users/arvi18","html_url":"https://github.com/arvi18","followers_url":"https://api.github.com/users/arvi18/followers","following_url":"https://api.github.com/users/arvi18/following{/other_user}","gists_url":"https://api.github.com/users/arvi18/gists{/gist_id}","starred_url":"https://api.github.com/users/arvi18/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arvi18/subscriptions","organizations_url":"https://api.github.com/users/arvi18/orgs","repos_url":"https://api.github.com/users/arvi18/repos","events_url":"https://api.github.com/users/arvi18/events{/privacy}","received_events_url":"https://api.github.com/users/arvi18/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2025-04-23T11:03:45Z","updated_at":"2025-10-03T11:23:13Z","closed_at":"2025-10-03T11:23:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":971318540,"node_id":"R_kgDOOeUlDA","name":"mypy","full_name":"coderabbit-test/mypy","private":false,"owner":{"login":"coderabbit-test","id":196302493,"node_id":"O_kgDOC7NWnQ","avatar_url":"https://avatars.githubusercontent.com/u/196302493?v=4","gravatar_id":"","url":"https://api.github.com/users/coderabbit-test","html_url":"https://github.com/coderabbit-test","followers_url":"https://api.github.com/users/coderabbit-test/followers","following_url":"https://api.github.com/users/coderabbit-test/following{/other_user}","gists_url":"https://api.github.com/users/coderabbit-test/gists{/gist_id}","starred_url":"https://api.github.com/users/coderabbit-test/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coderabbit-test/subscriptions","organizations_url":"https://api.github.com/users/coderabbit-test/orgs","repos_url":"https://api.github.com/users/coderabbit-test/repos","events_url":"https://api.github.com/users/coderabbit-test/events{/privacy}","received_events_url":"https://api.github.com/users/coderabbit-test/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/coderabbit-test/mypy","description":"Optional static typing for Python","fork":true,"url":"https://api.github.com/repos/coderabbit-test/mypy","forks_url":"https://api.github.com/repos/coderabbit-test/mypy/forks","keys_url":"https://api.github.com/repos/coderabbit-test/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/coderabbit-test/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/coderabbit-test/mypy/teams","hooks_url":"https://api.github.com/repos/coderabbit-test/mypy/hooks","issue_events_url":"https://api.github.com/repos/coderabbit-test/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/coderabbit-test/mypy/events","assignees_url":"https://api.github.com/repos/coderabbit-test/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/coderabbit-test/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/coderabbit-test/mypy/tags","blobs_url":"https://api.github.com/repos/coderabbit-test/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/coderabbit-test/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/coderabbit-test/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/coderabbit-test/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/coderabbit-test/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/coderabbit-test/mypy/languages","stargazers_url":"https://api.github.com/repos/coderabbit-test/mypy/stargazers","contributors_url":"https://api.github.com/repos/coderabbit-test/mypy/contributors","subscribers_url":"https://api.github.com/repos/coderabbit-test/mypy/subscribers","subscription_url":"https://api.github.com/repos/coderabbit-test/mypy/subscription","commits_url":"https://api.github.com/repos/coderabbit-test/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/coderabbit-test/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/coderabbit-test/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/coderabbit-test/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/coderabbit-test/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/coderabbit-test/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/coderabbit-test/mypy/merges","archive_url":"https://api.github.com/repos/coderabbit-test/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/coderabbit-test/mypy/downloads","issues_url":"https://api.github.com/repos/coderabbit-test/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/coderabbit-test/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/coderabbit-test/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/coderabbit-test/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/coderabbit-test/mypy/labels{/name}","releases_url":"https://api.github.com/repos/coderabbit-test/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/coderabbit-test/mypy/deployments","created_at":"2025-04-23T10:43:06Z","updated_at":"2025-04-23T10:43:06Z","pushed_at":"2025-10-06T08:16:19Z","git_url":"git://github.com/coderabbit-test/mypy.git","ssh_url":"git@github.com:coderabbit-test/mypy.git","clone_url":"https://github.com/coderabbit-test/mypy.git","svn_url":"https://github.com/coderabbit-test/mypy","homepage":"https://www.mypy-lang.org/","size":70789,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":10,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":10,"watchers":0,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/coderabbit-test/mypy/pulls/4","html_url":"https://github.com/coderabbit-test/mypy/pull/4","diff_url":"https://github.com/coderabbit-test/mypy/pull/4.diff","patch_url":"https://github.com/coderabbit-test/mypy/pull/4.patch","merged_at":null},"body":"Fixes #18440. Fixes #17230.\r\n\r\n#16503 did this specifically for `CallExpr`, but that isn't the only kind of such statements. I propose to expand this for more general expressions and believe that a blacklist is more reasonable here: we do **not** want to introduce a temporary name only for certain expressions that either are already named or can be used to infer contained variables (inline tuple/list/dict/set literals). \r\n\r\nWriting logic to generate a name for every other kind of expression would be quite cumbersome - I circumvent this by using a simple counter to generate unique names on demand.\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n- **New Features**\n  - Improved pattern matching support for complex expressions, including function calls, attribute access, operations, and dictionary item access, with more accurate type narrowing and detection of unreachable cases.\n- **Bug Fixes**\n  - Updated handling of match statements to ensure consistent naming and type inference for complex match subjects.\n- **Tests**\n  - Added new test cases for pattern matching with various expression types and unreachable case detection.\n  - Renamed an existing test case to reflect that it now passes.\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->","reactions":{"url":"https://api.github.com/repos/coderabbit-test/mypy/issues/4/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/coderabbit-test/mypy/issues/4/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python/mypy/issues/comments/3123428702","html_url":"https://github.com/python/mypy/issues/18440#issuecomment-3123428702","issue_url":"https://api.github.com/repos/python/mypy/issues/18440","id":3123428702,"node_id":"IC_kwDOAGuhRc66K71e","user":{"login":"injust","id":3387175,"node_id":"MDQ6VXNlcjMzODcxNzU=","avatar_url":"https://avatars.githubusercontent.com/u/3387175?v=4","gravatar_id":"","url":"https://api.github.com/users/injust","html_url":"https://github.com/injust","followers_url":"https://api.github.com/users/injust/followers","following_url":"https://api.github.com/users/injust/following{/other_user}","gists_url":"https://api.github.com/users/injust/gists{/gist_id}","starred_url":"https://api.github.com/users/injust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/injust/subscriptions","organizations_url":"https://api.github.com/users/injust/orgs","repos_url":"https://api.github.com/users/injust/repos","events_url":"https://api.github.com/users/injust/events{/privacy}","received_events_url":"https://api.github.com/users/injust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-07-26T21:53:23Z","updated_at":"2025-07-26T21:53:23Z","body":"Here's another test case, which doesn't use `dict`:\n\n```python\nfrom enum import Enum, auto\n\n\nclass Thing(Enum):\n    ONE = auto()\n    TWO = auto()\n\n\ndef test(name: str) -> None:\n    match Thing[name]:\n        case Thing.ONE:\n            pass\n        case Thing.TWO:\n            pass\n```\n\nIt's a simplified version of what I reported in https://github.com/python/mypy/issues/18875.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/3123428702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"injust","id":3387175,"node_id":"MDQ6VXNlcjMzODcxNzU=","avatar_url":"https://avatars.githubusercontent.com/u/3387175?v=4","gravatar_id":"","url":"https://api.github.com/users/injust","html_url":"https://github.com/injust","followers_url":"https://api.github.com/users/injust/followers","following_url":"https://api.github.com/users/injust/following{/other_user}","gists_url":"https://api.github.com/users/injust/gists{/gist_id}","starred_url":"https://api.github.com/users/injust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/injust/subscriptions","organizations_url":"https://api.github.com/users/injust/orgs","repos_url":"https://api.github.com/users/injust/repos","events_url":"https://api.github.com/users/injust/events{/privacy}","received_events_url":"https://api.github.com/users/injust/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":18959676587,"node_id":"CE_lADOAGuhRc6lwD5PzwAAAARqFbSr","url":"https://api.github.com/repos/python/mypy/issues/events/18959676587","actor":{"login":"ilevkivskyi","id":12005495,"node_id":"MDQ6VXNlcjEyMDA1NDk1","avatar_url":"https://avatars.githubusercontent.com/u/12005495?v=4","gravatar_id":"","url":"https://api.github.com/users/ilevkivskyi","html_url":"https://github.com/ilevkivskyi","followers_url":"https://api.github.com/users/ilevkivskyi/followers","following_url":"https://api.github.com/users/ilevkivskyi/following{/other_user}","gists_url":"https://api.github.com/users/ilevkivskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/ilevkivskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilevkivskyi/subscriptions","organizations_url":"https://api.github.com/users/ilevkivskyi/orgs","repos_url":"https://api.github.com/users/ilevkivskyi/repos","events_url":"https://api.github.com/users/ilevkivskyi/events{/privacy}","received_events_url":"https://api.github.com/users/ilevkivskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2025-08-03T22:42:54Z","state_reason":null,"performed_via_github_app":null},{"id":18959676603,"node_id":"REFE_lADOAGuhRc6lwD5PzwAAAARqFbS7","url":"https://api.github.com/repos/python/mypy/issues/events/18959676603","actor":{"login":"ilevkivskyi","id":12005495,"node_id":"MDQ6VXNlcjEyMDA1NDk1","avatar_url":"https://avatars.githubusercontent.com/u/12005495?v=4","gravatar_id":"","url":"https://api.github.com/users/ilevkivskyi","html_url":"https://github.com/ilevkivskyi","followers_url":"https://api.github.com/users/ilevkivskyi/followers","following_url":"https://api.github.com/users/ilevkivskyi/following{/other_user}","gists_url":"https://api.github.com/users/ilevkivskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/ilevkivskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilevkivskyi/subscriptions","organizations_url":"https://api.github.com/users/ilevkivskyi/orgs","repos_url":"https://api.github.com/users/ilevkivskyi/repos","events_url":"https://api.github.com/users/ilevkivskyi/events{/privacy}","received_events_url":"https://api.github.com/users/ilevkivskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"555edf36a8483042013a7b3c4e858c3f2c0aadcb","commit_url":"https://api.github.com/repos/python/mypy/commits/555edf36a8483042013a7b3c4e858c3f2c0aadcb","created_at":"2025-08-03T22:42:55Z","performed_via_github_app":null}]