[{"id":12918736628,"node_id":"LE_lADOAGuhRc6J8mFdzwAAAAMCBEb0","url":"https://api.github.com/repos/python/mypy/issues/events/12918736628","actor":{"login":"bzoracler","id":50305397,"node_id":"MDQ6VXNlcjUwMzA1Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/50305397?v=4","gravatar_id":"","url":"https://api.github.com/users/bzoracler","html_url":"https://github.com/bzoracler","followers_url":"https://api.github.com/users/bzoracler/followers","following_url":"https://api.github.com/users/bzoracler/following{/other_user}","gists_url":"https://api.github.com/users/bzoracler/gists{/gist_id}","starred_url":"https://api.github.com/users/bzoracler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bzoracler/subscriptions","organizations_url":"https://api.github.com/users/bzoracler/orgs","repos_url":"https://api.github.com/users/bzoracler/repos","events_url":"https://api.github.com/users/bzoracler/events{/privacy}","received_events_url":"https://api.github.com/users/bzoracler/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-24T05:05:47Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":12918923427,"node_id":"LE_lADOAGuhRc6J8mFdzwAAAAMCByCj","url":"https://api.github.com/repos/python/mypy/issues/events/12918923427","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-24T05:22:14Z","label":{"name":"topic-protocols","color":"0052cc"},"performed_via_github_app":null},{"id":12931499986,"node_id":"LE_lADOAGuhRc6J8mFdzwAAAAMCxwfS","url":"https://api.github.com/repos/python/mypy/issues/events/12931499986","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-25T06:31:20Z","label":{"name":"good-second-issue","color":"329F8C"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2141719204","html_url":"https://github.com/python/mypy/issues/17281#issuecomment-2141719204","issue_url":"https://api.github.com/repos/python/mypy/issues/17281","id":2141719204,"node_id":"IC_kwDOAGuhRc5_qAqk","user":{"login":"GiorgosPapoutsakis","id":116210016,"node_id":"U_kgDOBu05YA","avatar_url":"https://avatars.githubusercontent.com/u/116210016?v=4","gravatar_id":"","url":"https://api.github.com/users/GiorgosPapoutsakis","html_url":"https://github.com/GiorgosPapoutsakis","followers_url":"https://api.github.com/users/GiorgosPapoutsakis/followers","following_url":"https://api.github.com/users/GiorgosPapoutsakis/following{/other_user}","gists_url":"https://api.github.com/users/GiorgosPapoutsakis/gists{/gist_id}","starred_url":"https://api.github.com/users/GiorgosPapoutsakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GiorgosPapoutsakis/subscriptions","organizations_url":"https://api.github.com/users/GiorgosPapoutsakis/orgs","repos_url":"https://api.github.com/users/GiorgosPapoutsakis/repos","events_url":"https://api.github.com/users/GiorgosPapoutsakis/events{/privacy}","received_events_url":"https://api.github.com/users/GiorgosPapoutsakis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T10:24:33Z","updated_at":"2024-05-31T10:24:33Z","body":"From my understanding, this behavior is a feature and not a bug. It is hard-coded and tested to ensure that protocol members cannot be marked as Final. Therefore, the expected behavior is correctly reported by mypy. Although this functionality can be restrictive in some use cases and maybe is worth considering a change. Should I try to make this modification?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2141719204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GiorgosPapoutsakis","id":116210016,"node_id":"U_kgDOBu05YA","avatar_url":"https://avatars.githubusercontent.com/u/116210016?v=4","gravatar_id":"","url":"https://api.github.com/users/GiorgosPapoutsakis","html_url":"https://github.com/GiorgosPapoutsakis","followers_url":"https://api.github.com/users/GiorgosPapoutsakis/followers","following_url":"https://api.github.com/users/GiorgosPapoutsakis/following{/other_user}","gists_url":"https://api.github.com/users/GiorgosPapoutsakis/gists{/gist_id}","starred_url":"https://api.github.com/users/GiorgosPapoutsakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GiorgosPapoutsakis/subscriptions","organizations_url":"https://api.github.com/users/GiorgosPapoutsakis/orgs","repos_url":"https://api.github.com/users/GiorgosPapoutsakis/repos","events_url":"https://api.github.com/users/GiorgosPapoutsakis/events{/privacy}","received_events_url":"https://api.github.com/users/GiorgosPapoutsakis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2141771577","html_url":"https://github.com/python/mypy/issues/17281#issuecomment-2141771577","issue_url":"https://api.github.com/repos/python/mypy/issues/17281","id":2141771577,"node_id":"IC_kwDOAGuhRc5_qNc5","user":{"login":"bzoracler","id":50305397,"node_id":"MDQ6VXNlcjUwMzA1Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/50305397?v=4","gravatar_id":"","url":"https://api.github.com/users/bzoracler","html_url":"https://github.com/bzoracler","followers_url":"https://api.github.com/users/bzoracler/followers","following_url":"https://api.github.com/users/bzoracler/following{/other_user}","gists_url":"https://api.github.com/users/bzoracler/gists{/gist_id}","starred_url":"https://api.github.com/users/bzoracler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bzoracler/subscriptions","organizations_url":"https://api.github.com/users/bzoracler/orgs","repos_url":"https://api.github.com/users/bzoracler/repos","events_url":"https://api.github.com/users/bzoracler/events{/privacy}","received_events_url":"https://api.github.com/users/bzoracler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T10:58:18Z","updated_at":"2024-05-31T10:59:51Z","body":"This is a bug because `var` here is just a variable in the local function scope, not a protocol member. A protocol member would look like `self.var` inside the body of an instance method, or just `var` directly in the class body (not inside a method).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2141771577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bzoracler","id":50305397,"node_id":"MDQ6VXNlcjUwMzA1Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/50305397?v=4","gravatar_id":"","url":"https://api.github.com/users/bzoracler","html_url":"https://github.com/bzoracler","followers_url":"https://api.github.com/users/bzoracler/followers","following_url":"https://api.github.com/users/bzoracler/following{/other_user}","gists_url":"https://api.github.com/users/bzoracler/gists{/gist_id}","starred_url":"https://api.github.com/users/bzoracler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bzoracler/subscriptions","organizations_url":"https://api.github.com/users/bzoracler/orgs","repos_url":"https://api.github.com/users/bzoracler/repos","events_url":"https://api.github.com/users/bzoracler/events{/privacy}","received_events_url":"https://api.github.com/users/bzoracler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2142755155","html_url":"https://github.com/python/mypy/issues/17281#issuecomment-2142755155","issue_url":"https://api.github.com/repos/python/mypy/issues/17281","id":2142755155,"node_id":"IC_kwDOAGuhRc5_t9lT","user":{"login":"GiorgosPapoutsakis","id":116210016,"node_id":"U_kgDOBu05YA","avatar_url":"https://avatars.githubusercontent.com/u/116210016?v=4","gravatar_id":"","url":"https://api.github.com/users/GiorgosPapoutsakis","html_url":"https://github.com/GiorgosPapoutsakis","followers_url":"https://api.github.com/users/GiorgosPapoutsakis/followers","following_url":"https://api.github.com/users/GiorgosPapoutsakis/following{/other_user}","gists_url":"https://api.github.com/users/GiorgosPapoutsakis/gists{/gist_id}","starred_url":"https://api.github.com/users/GiorgosPapoutsakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GiorgosPapoutsakis/subscriptions","organizations_url":"https://api.github.com/users/GiorgosPapoutsakis/orgs","repos_url":"https://api.github.com/users/GiorgosPapoutsakis/repos","events_url":"https://api.github.com/users/GiorgosPapoutsakis/events{/privacy}","received_events_url":"https://api.github.com/users/GiorgosPapoutsakis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T18:12:30Z","updated_at":"2024-05-31T18:12:30Z","body":"Thank you for the clarification","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2142755155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GiorgosPapoutsakis","id":116210016,"node_id":"U_kgDOBu05YA","avatar_url":"https://avatars.githubusercontent.com/u/116210016?v=4","gravatar_id":"","url":"https://api.github.com/users/GiorgosPapoutsakis","html_url":"https://github.com/GiorgosPapoutsakis","followers_url":"https://api.github.com/users/GiorgosPapoutsakis/followers","following_url":"https://api.github.com/users/GiorgosPapoutsakis/following{/other_user}","gists_url":"https://api.github.com/users/GiorgosPapoutsakis/gists{/gist_id}","starred_url":"https://api.github.com/users/GiorgosPapoutsakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GiorgosPapoutsakis/subscriptions","organizations_url":"https://api.github.com/users/GiorgosPapoutsakis/orgs","repos_url":"https://api.github.com/users/GiorgosPapoutsakis/repos","events_url":"https://api.github.com/users/GiorgosPapoutsakis/events{/privacy}","received_events_url":"https://api.github.com/users/GiorgosPapoutsakis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"GiorgosPapoutsakis","id":116210016,"node_id":"U_kgDOBu05YA","avatar_url":"https://avatars.githubusercontent.com/u/116210016?v=4","gravatar_id":"","url":"https://api.github.com/users/GiorgosPapoutsakis","html_url":"https://github.com/GiorgosPapoutsakis","followers_url":"https://api.github.com/users/GiorgosPapoutsakis/followers","following_url":"https://api.github.com/users/GiorgosPapoutsakis/following{/other_user}","gists_url":"https://api.github.com/users/GiorgosPapoutsakis/gists{/gist_id}","starred_url":"https://api.github.com/users/GiorgosPapoutsakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GiorgosPapoutsakis/subscriptions","organizations_url":"https://api.github.com/users/GiorgosPapoutsakis/orgs","repos_url":"https://api.github.com/users/GiorgosPapoutsakis/repos","events_url":"https://api.github.com/users/GiorgosPapoutsakis/events{/privacy}","received_events_url":"https://api.github.com/users/GiorgosPapoutsakis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T19:09:21Z","updated_at":"2024-05-31T19:09:21Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/17308","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/17308/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/17308/comments","events_url":"https://api.github.com/repos/python/mypy/issues/17308/events","html_url":"https://github.com/python/mypy/pull/17308","id":2328441746,"node_id":"PR_kwDOAGuhRc5xKMy_","number":17308,"title":"Fix False positive - Final local scope variable in Protocol","user":{"login":"GiorgosPapoutsakis","id":116210016,"node_id":"U_kgDOBu05YA","avatar_url":"https://avatars.githubusercontent.com/u/116210016?v=4","gravatar_id":"","url":"https://api.github.com/users/GiorgosPapoutsakis","html_url":"https://github.com/GiorgosPapoutsakis","followers_url":"https://api.github.com/users/GiorgosPapoutsakis/followers","following_url":"https://api.github.com/users/GiorgosPapoutsakis/following{/other_user}","gists_url":"https://api.github.com/users/GiorgosPapoutsakis/gists{/gist_id}","starred_url":"https://api.github.com/users/GiorgosPapoutsakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GiorgosPapoutsakis/subscriptions","organizations_url":"https://api.github.com/users/GiorgosPapoutsakis/orgs","repos_url":"https://api.github.com/users/GiorgosPapoutsakis/repos","events_url":"https://api.github.com/users/GiorgosPapoutsakis/events{/privacy}","received_events_url":"https://api.github.com/users/GiorgosPapoutsakis/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":15,"created_at":"2024-05-31T19:09:21Z","updated_at":"2024-06-04T19:38:17Z","closed_at":"2024-06-04T19:38:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/17308","html_url":"https://github.com/python/mypy/pull/17308","diff_url":"https://github.com/python/mypy/pull/17308.diff","patch_url":"https://github.com/python/mypy/pull/17308.patch","merged_at":"2024-06-04T19:38:17Z"},"body":"This PR fixes and closes #17281 ,which reported a false positive when using Final within the local function scope of a protocol method.\r\n\r\nWith these changes:\r\n- Local variables within protocol methods can be marked as Final.\r\n- Protocol members still cannot be marked as Final\r\n\r\nModified ``semanal.py`` file and added a unit test in ``test-data/unit/check.final.test``\r\n\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/17308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/17308/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":13041063071,"node_id":"CE_lADOAGuhRc6J8mFdzwAAAAMJTtSf","url":"https://api.github.com/repos/python/mypy/issues/events/13041063071","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-06-04T19:38:18Z","state_reason":null,"performed_via_github_app":null},{"id":13041063167,"node_id":"REFE_lADOAGuhRc6J8mFdzwAAAAMJTtT_","url":"https://api.github.com/repos/python/mypy/issues/events/13041063167","actor":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ad0e180659f8bb1ef0c270045c655888b3b1223a","commit_url":"https://api.github.com/repos/python/mypy/commits/ad0e180659f8bb1ef0c270045c655888b3b1223a","created_at":"2024-06-04T19:38:18Z","performed_via_github_app":null},{"actor":{"login":"zzzeek","id":128223,"node_id":"MDQ6VXNlcjEyODIyMw==","avatar_url":"https://avatars.githubusercontent.com/u/128223?v=4","gravatar_id":"","url":"https://api.github.com/users/zzzeek","html_url":"https://github.com/zzzeek","followers_url":"https://api.github.com/users/zzzeek/followers","following_url":"https://api.github.com/users/zzzeek/following{/other_user}","gists_url":"https://api.github.com/users/zzzeek/gists{/gist_id}","starred_url":"https://api.github.com/users/zzzeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzzeek/subscriptions","organizations_url":"https://api.github.com/users/zzzeek/orgs","repos_url":"https://api.github.com/users/zzzeek/repos","events_url":"https://api.github.com/users/zzzeek/events{/privacy}","received_events_url":"https://api.github.com/users/zzzeek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-02T19:10:07Z","updated_at":"2025-06-02T19:10:07Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/11112","repository_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/11112/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/11112/comments","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/11112/events","html_url":"https://github.com/sqlalchemy/sqlalchemy/issues/11112","id":2171868856,"node_id":"I_kwDOCX5JB86BdBa4","number":11112,"title":"InstrumentedAttribute should also be covariant on its input type","user":{"login":"ejlangev","id":718430,"node_id":"MDQ6VXNlcjcxODQzMA==","avatar_url":"https://avatars.githubusercontent.com/u/718430?v=4","gravatar_id":"","url":"https://api.github.com/users/ejlangev","html_url":"https://github.com/ejlangev","followers_url":"https://api.github.com/users/ejlangev/followers","following_url":"https://api.github.com/users/ejlangev/following{/other_user}","gists_url":"https://api.github.com/users/ejlangev/gists{/gist_id}","starred_url":"https://api.github.com/users/ejlangev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejlangev/subscriptions","organizations_url":"https://api.github.com/users/ejlangev/orgs","repos_url":"https://api.github.com/users/ejlangev/repos","events_url":"https://api.github.com/users/ejlangev/events{/privacy}","received_events_url":"https://api.github.com/users/ejlangev/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1171369643,"node_id":"MDU6TGFiZWwxMTcxMzY5NjQz","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/PRs%20(with%20tests!)%20welcome","name":"PRs (with tests!) welcome","color":"b8e0f9","default":false,"description":"a fix or feature which is appropriate to be implemented by volunteers"},{"id":1173135652,"node_id":"MDU6TGFiZWwxMTczMTM1NjUy","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/quagmire","name":"quagmire","color":"db4eb3","default":false,"description":"really hard to make the issue work \"correctly\" without lots of complication, risk"},{"id":3682635935,"node_id":"LA_kwDOCX5JB87bgJCf","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/typing","name":"typing","color":"A24AD5","default":false,"description":"pep -484 typing issues.  independent of \"mypy\""},{"id":8790759199,"node_id":"LA_kwDOCX5JB88AAAACC_hXHw","url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels/covariant%20protocol%20use%20cases","name":"covariant protocol use cases","color":"aaaaaa","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/100","html_url":"https://github.com/sqlalchemy/sqlalchemy/milestone/100","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones/100/labels","id":8974115,"node_id":"MI_kwDOCX5JB84AiO8j","number":100,"title":"2.0.x","description":"","creator":{"login":"CaselIT","id":16175304,"node_id":"MDQ6VXNlcjE2MTc1MzA0","avatar_url":"https://avatars.githubusercontent.com/u/16175304?v=4","gravatar_id":"","url":"https://api.github.com/users/CaselIT","html_url":"https://github.com/CaselIT","followers_url":"https://api.github.com/users/CaselIT/followers","following_url":"https://api.github.com/users/CaselIT/following{/other_user}","gists_url":"https://api.github.com/users/CaselIT/gists{/gist_id}","starred_url":"https://api.github.com/users/CaselIT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CaselIT/subscriptions","organizations_url":"https://api.github.com/users/CaselIT/orgs","repos_url":"https://api.github.com/users/CaselIT/repos","events_url":"https://api.github.com/users/CaselIT/events{/privacy}","received_events_url":"https://api.github.com/users/CaselIT/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":68,"closed_issues":416,"state":"open","created_at":"2023-01-27T12:23:11Z","updated_at":"2025-11-08T19:58:19Z","due_on":null,"closed_at":null},"comments":7,"created_at":"2024-03-06T16:05:51Z","updated_at":"2025-06-16T13:59:41Z","closed_at":"2025-06-02T19:10:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":159271175,"node_id":"MDEwOlJlcG9zaXRvcnkxNTkyNzExNzU=","name":"sqlalchemy","full_name":"sqlalchemy/sqlalchemy","private":false,"owner":{"login":"sqlalchemy","id":6043126,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYwNDMxMjY=","avatar_url":"https://avatars.githubusercontent.com/u/6043126?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy","html_url":"https://github.com/sqlalchemy","followers_url":"https://api.github.com/users/sqlalchemy/followers","following_url":"https://api.github.com/users/sqlalchemy/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy/orgs","repos_url":"https://api.github.com/users/sqlalchemy/repos","events_url":"https://api.github.com/users/sqlalchemy/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sqlalchemy/sqlalchemy","description":"The Database Toolkit for Python","fork":false,"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy","forks_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/forks","keys_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/teams","hooks_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/hooks","issue_events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/events{/number}","events_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/events","assignees_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/assignees{/user}","branches_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/branches{/branch}","tags_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/tags","blobs_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/git/refs{/sha}","trees_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/statuses/{sha}","languages_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/languages","stargazers_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/stargazers","contributors_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/contributors","subscribers_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/subscribers","subscription_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/subscription","commits_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/commits{/sha}","git_commits_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/git/commits{/sha}","comments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/comments{/number}","issue_comment_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/comments{/number}","contents_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/contents/{+path}","compare_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/merges","archive_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/downloads","issues_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues{/number}","pulls_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/pulls{/number}","milestones_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/milestones{/number}","notifications_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/labels{/name}","releases_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/releases{/id}","deployments_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/deployments","created_at":"2018-11-27T03:35:03Z","updated_at":"2025-11-09T18:29:59Z","pushed_at":"2025-11-09T18:29:55Z","git_url":"git://github.com/sqlalchemy/sqlalchemy.git","ssh_url":"git@github.com:sqlalchemy/sqlalchemy.git","clone_url":"https://github.com/sqlalchemy/sqlalchemy.git","svn_url":"https://github.com/sqlalchemy/sqlalchemy","homepage":"https://www.sqlalchemy.org","size":97265,"stargazers_count":11104,"watchers_count":11104,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1596,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":219,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["python","sql","sqlalchemy"],"visibility":"public","forks":1596,"open_issues":219,"watchers":11104,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Ensure stubs packages are not installed\n\n- [X] No sqlalchemy stub packages is installed (both `sqlalchemy-stubs` and `sqlalchemy2-stubs` are not compatible with v2)\n\n### Verify if the api is typed\n\n- [X] The api is not in a module listed in [#6810](https://github.com/sqlalchemy/sqlalchemy/issues/6810) so it should pass type checking\n\n### Describe the typing issue\n\n`InstrumentedAttribute` is defined as\r\n\r\n```python\r\nclass InstrumentedAttribute(QueryableAttribute[_T):\r\n    ...\r\n```\r\n\r\nIn https://github.com/sqlalchemy/sqlalchemy/pull/10289, many of the types related to `Mapped` were made to be covariant which is helpful for user facing types. In my case I want to define a function that operates on relationship fields of my models generically. Roughly this:\r\n\r\n```python\r\n_BaseModelT = TypeVar(\"_BaseModelT\", bound=BaseModel)\r\n\r\ndef my_relationship_function(relationships: list[InstrumentedAttribute[_BaseModelT | Optional[_BaseModelT] | Sequence[_BaseModelT]]]) -> int:\r\n    return len(relationships)\r\n```\r\n\r\nBut I can't do that because the TypeVar passed into the `InstrumentedAttribute` class is not covariant. Allowing this I think should be as simple as changing `class InstrumentedAttribute(QueryableAttribute[_T]):` into `class InstrumentedAttribute(QueryableAttribute[_T_co]):`\n\n### To Reproduce\n\n```python\nfrom typing import Optional, Sequence, TypeVar\r\nfrom sqlalchemy.orm import DeclarativeBase, InstrumentedAttribute, Mapped, relationship\r\n\r\nclass BaseModel(DeclarativeBase):\r\n    pass\r\n\r\nclass MyParent(BaseModel):\r\n    __tablename__ = \"my_parents\"\r\n    id: Mapped[int]\r\n    name: Mapped[str]\r\n\r\n    children: Mapped[Sequence[\"MyChild\"]] = relationship(back_populates=\"parent\")\r\n\r\nclass MyChild(BaseModel):\r\n    __tablename__ = \"my_children\"\r\n\r\n    id: Mapped[int]\r\n    last_name: Mapped[str]\r\n    parent_id: Mapped[int]\r\n\r\n    parent: Mapped[\"MyParent\"]  = relationship(back_populates=\"children\")\r\n\r\n_BaseModelT = TypeVar(\"_BaseModelT\", bound=BaseModel)\r\n\r\ndef my_relationship_function(relationships: list[InstrumentedAttribute[_BaseModelT | Optional[_BaseModelT] | Sequence[_BaseModelT]]]) -> int:\r\n    return len(relationships)\r\n\r\n# This is a type error but should not be\r\nmy_relationship_function([MyParent.children])\r\n# This is also a type error and should be but is an error\r\n# for the wrong reasons\r\nmy_relationship_function([MyParent.name])\n```\n\n\n### Error\n\n```\r\nArgument of type \"list[InstrumentedAttribute[Sequence[MyChild]]]\" cannot be assigned to parameter \"relationships\" of type \"list[InstrumentedAttribute[_BaseModelT@my_relationship_function | Sequence[_BaseModelT@my_relationship_function] | None]]\" in function \"my_relationship_function\"\r\n  \"InstrumentedAttribute[Sequence[MyChild]]\" is incompatible with \"InstrumentedAttribute[_BaseModelT@my_relationship_function | Sequence[_BaseModelT@my_relationship_function] | None]\"\r\n    Type parameter \"_T@InstrumentedAttribute\" is invariant, but \"Sequence[MyChild]\" is not the same as \"_BaseModelT@my_relationship_function | Sequence[_BaseModelT@my_relationship_function] | None\r\n``` \n\n### Versions\n\n- OS: MacOS\r\n- Python: 3.11.6\r\n- SQLAlchemy: 2.0.28\r\n- Type checker (eg: mypy 0.991, pyright 1.1.290, etc): pyright 1.1.345\r\n\n\n### Additional context\n\nThe type checker is correct here, the type definitions are (I think) unnecessarily limiting.","reactions":{"url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/11112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/sqlalchemy/issues/11112/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]