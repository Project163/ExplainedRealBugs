[{"id":4799770688,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ3OTk3NzA2ODg=","url":"https://api.github.com/repos/python/mypy/issues/events/4799770688","actor":{"login":"audoh-tickitto","id":71696787,"node_id":"MDQ6VXNlcjcxNjk2Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/71696787?v=4","gravatar_id":"","url":"https://api.github.com/users/audoh-tickitto","html_url":"https://github.com/audoh-tickitto","followers_url":"https://api.github.com/users/audoh-tickitto/followers","following_url":"https://api.github.com/users/audoh-tickitto/following{/other_user}","gists_url":"https://api.github.com/users/audoh-tickitto/gists{/gist_id}","starred_url":"https://api.github.com/users/audoh-tickitto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/audoh-tickitto/subscriptions","organizations_url":"https://api.github.com/users/audoh-tickitto/orgs","repos_url":"https://api.github.com/users/audoh-tickitto/repos","events_url":"https://api.github.com/users/audoh-tickitto/events{/privacy}","received_events_url":"https://api.github.com/users/audoh-tickitto/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-05-26T14:24:12Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"actor":{"login":"audoh-tickitto","id":71696787,"node_id":"MDQ6VXNlcjcxNjk2Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/71696787?v=4","gravatar_id":"","url":"https://api.github.com/users/audoh-tickitto","html_url":"https://github.com/audoh-tickitto","followers_url":"https://api.github.com/users/audoh-tickitto/followers","following_url":"https://api.github.com/users/audoh-tickitto/following{/other_user}","gists_url":"https://api.github.com/users/audoh-tickitto/gists{/gist_id}","starred_url":"https://api.github.com/users/audoh-tickitto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/audoh-tickitto/subscriptions","organizations_url":"https://api.github.com/users/audoh-tickitto/orgs","repos_url":"https://api.github.com/users/audoh-tickitto/repos","events_url":"https://api.github.com/users/audoh-tickitto/events{/privacy}","received_events_url":"https://api.github.com/users/audoh-tickitto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T14:26:00Z","updated_at":"2021-05-26T14:26:00Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/pylance-release/issues/1348","repository_url":"https://api.github.com/repos/microsoft/pylance-release","labels_url":"https://api.github.com/repos/microsoft/pylance-release/issues/1348/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/pylance-release/issues/1348/comments","events_url":"https://api.github.com/repos/microsoft/pylance-release/issues/1348/events","html_url":"https://github.com/microsoft/pylance-release/issues/1348","id":902434846,"node_id":"MDU6SXNzdWU5MDI0MzQ4NDY=","number":1348,"title":"Generator with await not considered an AsyncGenerator","user":{"login":"audoh-tickitto","id":71696787,"node_id":"MDQ6VXNlcjcxNjk2Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/71696787?v=4","gravatar_id":"","url":"https://api.github.com/users/audoh-tickitto","html_url":"https://github.com/audoh-tickitto","followers_url":"https://api.github.com/users/audoh-tickitto/followers","following_url":"https://api.github.com/users/audoh-tickitto/following{/other_user}","gists_url":"https://api.github.com/users/audoh-tickitto/gists{/gist_id}","starred_url":"https://api.github.com/users/audoh-tickitto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/audoh-tickitto/subscriptions","organizations_url":"https://api.github.com/users/audoh-tickitto/orgs","repos_url":"https://api.github.com/users/audoh-tickitto/repos","events_url":"https://api.github.com/users/audoh-tickitto/events{/privacy}","received_events_url":"https://api.github.com/users/audoh-tickitto/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2078590929,"node_id":"MDU6TGFiZWwyMDc4NTkwOTI5","url":"https://api.github.com/repos/microsoft/pylance-release/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2177115491,"node_id":"MDU6TGFiZWwyMTc3MTE1NDkx","url":"https://api.github.com/repos/microsoft/pylance-release/labels/fixed%20in%20next%20version%20(main)","name":"fixed in next version (main)","color":"8e0fe2","default":false,"description":"A fix has been implemented and will appear in an upcoming version"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-05-26T13:57:52Z","updated_at":"2021-06-02T22:09:10Z","closed_at":"2021-06-02T22:09:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":265902625,"node_id":"MDEwOlJlcG9zaXRvcnkyNjU5MDI2MjU=","name":"pylance-release","full_name":"microsoft/pylance-release","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/pylance-release","description":"Documentation and issues for Pylance","fork":false,"url":"https://api.github.com/repos/microsoft/pylance-release","forks_url":"https://api.github.com/repos/microsoft/pylance-release/forks","keys_url":"https://api.github.com/repos/microsoft/pylance-release/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/pylance-release/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/pylance-release/teams","hooks_url":"https://api.github.com/repos/microsoft/pylance-release/hooks","issue_events_url":"https://api.github.com/repos/microsoft/pylance-release/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/pylance-release/events","assignees_url":"https://api.github.com/repos/microsoft/pylance-release/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/pylance-release/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/pylance-release/tags","blobs_url":"https://api.github.com/repos/microsoft/pylance-release/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/pylance-release/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/pylance-release/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/pylance-release/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/pylance-release/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/pylance-release/languages","stargazers_url":"https://api.github.com/repos/microsoft/pylance-release/stargazers","contributors_url":"https://api.github.com/repos/microsoft/pylance-release/contributors","subscribers_url":"https://api.github.com/repos/microsoft/pylance-release/subscribers","subscription_url":"https://api.github.com/repos/microsoft/pylance-release/subscription","commits_url":"https://api.github.com/repos/microsoft/pylance-release/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/pylance-release/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/pylance-release/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/pylance-release/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/pylance-release/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/pylance-release/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/pylance-release/merges","archive_url":"https://api.github.com/repos/microsoft/pylance-release/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/pylance-release/downloads","issues_url":"https://api.github.com/repos/microsoft/pylance-release/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/pylance-release/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/pylance-release/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/pylance-release/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/pylance-release/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/pylance-release/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/pylance-release/deployments","created_at":"2020-05-21T16:50:15Z","updated_at":"2025-11-08T06:00:15Z","pushed_at":"2025-11-03T22:56:05Z","git_url":"git://github.com/microsoft/pylance-release.git","ssh_url":"git@github.com:microsoft/pylance-release.git","clone_url":"https://github.com/microsoft/pylance-release.git","svn_url":"https://github.com/microsoft/pylance-release","homepage":"","size":15223,"stargazers_count":1932,"watchers_count":1932,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":946,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":499,"license":{"key":"cc-by-4.0","name":"Creative Commons Attribution 4.0 International","spdx_id":"CC-BY-4.0","url":"https://api.github.com/licenses/cc-by-4.0","node_id":"MDc6TGljZW5zZTI1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["code-analysis","language-server","language-server-protocol","python"],"visibility":"public","forks":946,"open_issues":499,"watchers":1932,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\nRead the guidelines for filing an issue first.\r\n\r\nhttps://github.com/microsoft/pylance-release/blob/master/TROUBLESHOOTING.md#filing-an-issue\r\n-->\r\n\r\n## Environment data\r\n\r\n<!--\r\nTo find your version, you can either:\r\n\r\n- Open the VS Code extensions panel. Locate Pylance from the list of installed extensions. The version appears next to the name.\r\n\r\n- Select \"View: Toggle Output\" from the command palette (Ctrl+Shift+P on Windows/Linux, Command+Shift+P on macOS), then select \"Python Language Server\" in the dropdown on the right. Look for the line Pylance Language Server version X in the console.\r\n-->\r\n\r\n-   Language Server version: 2021.5.3\r\n-   OS and version: Ubuntu 20.04.2\r\n-   Python version (& distribution if applicable, e.g. Anaconda): 3.9.2, acquired via pyenv\r\n\r\n## Expected behaviour\r\n\r\n- Inferred type should be AsyncGenerator\r\n- Await should be allowed within a non-async function when within a generator\r\n\r\n## Actual behaviour\r\n\r\n- Inferred type is Generator.\r\n- 'await' only allowed within async function\r\n\r\n## Logs\r\n\r\n<!--\r\nEnable trace logging by adding \"python.analysis.logLevel\": \"Trace\" to your settings.json configuration file.\r\n\r\nAdding this will cause a large amount of info to be printed to the Python output panel. This should not be left long term, as the performance impact of the logging is significant.\r\n-->\r\nN/A (should be reproducible from code snippet)\r\n\r\n## Code Snippet / Additional information\r\n\r\n<!--\r\nNote: If you think a GIF of what is happening would be helpful, consider tools like https://www.cockos.com/licecap/, https://github.com/phw/peek or https://www.screentogif.com/ .\r\n-->\r\n\r\n```python\r\nimport asyncio\r\nfrom typing import AsyncGenerator\r\n\r\nasync def get_value(v: int) -> int:\r\n    await asyncio.sleep(1)\r\n    return v + 1\r\n\r\ndef get_generator() -> AsyncGenerator[int, None]:\r\n    return (await get_value(v) for v in [1, 2, 3])\r\n\r\nasync def test() -> None:\r\n    print(type(get_generator()))\r\n    async for x in get_generator():\r\n        print(x)\r\n\r\nasyncio.get_event_loop().run_until_complete(test())\r\n```\r\n**Python result:**\r\n```\r\n<class 'async_generator'>\r\n2\r\n3\r\n4\r\n```\r\n**Pylance error:**\r\n![image](https://user-images.githubusercontent.com/71696787/119673437-40850100-be33-11eb-8158-2456fb321b55.png)\r\n\r\n**Note:** the exact same issues seem to be present in mypy:\r\nhttps://github.com/python/mypy/issues/10534","reactions":{"url":"https://api.github.com/repos/microsoft/pylance-release/issues/1348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/pylance-release/issues/1348/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"FasterSpeeding","id":11181703,"node_id":"MDQ6VXNlcjExMTgxNzAz","avatar_url":"https://avatars.githubusercontent.com/u/11181703?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterSpeeding","html_url":"https://github.com/FasterSpeeding","followers_url":"https://api.github.com/users/FasterSpeeding/followers","following_url":"https://api.github.com/users/FasterSpeeding/following{/other_user}","gists_url":"https://api.github.com/users/FasterSpeeding/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterSpeeding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterSpeeding/subscriptions","organizations_url":"https://api.github.com/users/FasterSpeeding/orgs","repos_url":"https://api.github.com/users/FasterSpeeding/repos","events_url":"https://api.github.com/users/FasterSpeeding/events{/privacy}","received_events_url":"https://api.github.com/users/FasterSpeeding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-21T22:20:27Z","updated_at":"2021-09-21T22:20:27Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/pyright/issues/2322","repository_url":"https://api.github.com/repos/microsoft/pyright","labels_url":"https://api.github.com/repos/microsoft/pyright/issues/2322/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/pyright/issues/2322/comments","events_url":"https://api.github.com/repos/microsoft/pyright/issues/2322/events","html_url":"https://github.com/microsoft/pyright/issues/2322","id":1003076937,"node_id":"I_kwDOCnBEvM47yb1J","number":2322,"title":"async generator literals using await are incorrectly resolved to Generator","user":{"login":"FasterSpeeding","id":11181703,"node_id":"MDQ6VXNlcjExMTgxNzAz","avatar_url":"https://avatars.githubusercontent.com/u/11181703?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterSpeeding","html_url":"https://github.com/FasterSpeeding","followers_url":"https://api.github.com/users/FasterSpeeding/followers","following_url":"https://api.github.com/users/FasterSpeeding/following{/other_user}","gists_url":"https://api.github.com/users/FasterSpeeding/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterSpeeding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterSpeeding/subscriptions","organizations_url":"https://api.github.com/users/FasterSpeeding/orgs","repos_url":"https://api.github.com/users/FasterSpeeding/repos","events_url":"https://api.github.com/users/FasterSpeeding/events{/privacy}","received_events_url":"https://api.github.com/users/FasterSpeeding/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1268932462,"node_id":"MDU6TGFiZWwxMjY4OTMyNDYy","url":"https://api.github.com/repos/microsoft/pyright/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1338600884,"node_id":"MDU6TGFiZWwxMzM4NjAwODg0","url":"https://api.github.com/repos/microsoft/pyright/labels/addressed%20in%20next%20version","name":"addressed in next version","color":"bfd4f2","default":false,"description":"Issue is fixed and will appear in next published version"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-09-21T18:54:21Z","updated_at":"2021-09-25T04:13:10Z","closed_at":"2021-09-25T04:13:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":175129788,"node_id":"MDEwOlJlcG9zaXRvcnkxNzUxMjk3ODg=","name":"pyright","full_name":"microsoft/pyright","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/pyright","description":"Static Type Checker for Python","fork":false,"url":"https://api.github.com/repos/microsoft/pyright","forks_url":"https://api.github.com/repos/microsoft/pyright/forks","keys_url":"https://api.github.com/repos/microsoft/pyright/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/pyright/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/pyright/teams","hooks_url":"https://api.github.com/repos/microsoft/pyright/hooks","issue_events_url":"https://api.github.com/repos/microsoft/pyright/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/pyright/events","assignees_url":"https://api.github.com/repos/microsoft/pyright/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/pyright/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/pyright/tags","blobs_url":"https://api.github.com/repos/microsoft/pyright/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/pyright/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/pyright/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/pyright/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/pyright/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/pyright/languages","stargazers_url":"https://api.github.com/repos/microsoft/pyright/stargazers","contributors_url":"https://api.github.com/repos/microsoft/pyright/contributors","subscribers_url":"https://api.github.com/repos/microsoft/pyright/subscribers","subscription_url":"https://api.github.com/repos/microsoft/pyright/subscription","commits_url":"https://api.github.com/repos/microsoft/pyright/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/pyright/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/pyright/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/pyright/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/pyright/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/pyright/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/pyright/merges","archive_url":"https://api.github.com/repos/microsoft/pyright/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/pyright/downloads","issues_url":"https://api.github.com/repos/microsoft/pyright/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/pyright/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/pyright/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/pyright/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/pyright/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/pyright/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/pyright/deployments","created_at":"2019-03-12T03:38:46Z","updated_at":"2025-11-09T18:14:33Z","pushed_at":"2025-11-02T07:12:18Z","git_url":"git://github.com/microsoft/pyright.git","ssh_url":"git@github.com:microsoft/pyright.git","clone_url":"https://github.com/microsoft/pyright.git","svn_url":"https://github.com/microsoft/pyright","homepage":"","size":126983,"stargazers_count":14957,"watchers_count":14957,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1747,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":150,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1747,"open_issues":150,"watchers":14957,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Describe the bug**\r\nAsync generator literals made in the style of of `(await callback(value) for value in ...)` (as opposed to using async for) are incorrectly resolved to `Generator[ReturnT, None, None]` leading to false-positive errors from pyright when trying to treat the generator as an AsyncGenerator.\r\n\r\n**To Reproduce**\r\nRun pyright over the provided test code and watch it produce the following output\r\n\r\n```\r\nSearching for source files\r\nFound 1 source file\r\nC:\\Users\\Lucina\\PycharmProjects\\hikari-sake\\test.py\r\n  C:\\Users\\Lucina\\PycharmProjects\\hikari-sake\\test.py:13:20 - error: \"Generator[int, None, None]\" is not iterable\r\n    \"__aiter__\" method not defined (reportGeneralTypeIssues)\r\n  C:\\Users\\Lucina\\PycharmProjects\\hikari-sake\\test.py:14:15 - warning: Argument type is unknown\r\n    Argument corresponds to parameter \"values\" in function \"print\" (reportUnknownArgumentType)\r\n1 error, 1 warning, 0 infos\r\nCompleted in 0.58sec\r\n```\r\nThen run the following code and watch it pass without error and output `<class 'async_generator'>` for `print(type(bar))`.\r\n\r\n**Expected behavior**\r\n\r\nPyright should resolve `bar = (await foo() for _ in range(0, 10))` to `AsyncGenerator[int, None]` and not error on the example code.\r\n\r\n**Screenshots or Code**\r\n```python\r\nimport asyncio\r\nimport random\r\n\r\n\r\nasync def foo() -> int:\r\n    await asyncio.sleep(0.3)\r\n    return random.randint(0, 100)\r\n\r\n\r\nasync def main() -> None:\r\n    bar = (await foo() for _ in range(0, 10))\r\n    print(type(bar))\r\n    async for i in bar:\r\n        print(i)\r\n\r\n\r\nasyncio.run(main())\r\n```\r\n\r\n**VS Code extension or command-line**\r\npyright 1.1.170 (as a command line tool)\r\nTargeting python 3.9\r\n\r\n**Additional context**\r\nThis appears to have been reported back in https://github.com/microsoft/pylance-release/issues/1348 /https://github.com/microsoft/pyright/issues/1912 but I also tried v1.1.145 and still got this erroneous behaviour (although the other issues brought up there around building async generators in a sync function did seem to have been resolved).\r\n","reactions":{"url":"https://api.github.com/repos/microsoft/pyright/issues/2322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/pyright/issues/2322/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"A5rocks","id":40616000,"node_id":"MDQ6VXNlcjQwNjE2MDAw","avatar_url":"https://avatars.githubusercontent.com/u/40616000?v=4","gravatar_id":"","url":"https://api.github.com/users/A5rocks","html_url":"https://github.com/A5rocks","followers_url":"https://api.github.com/users/A5rocks/followers","following_url":"https://api.github.com/users/A5rocks/following{/other_user}","gists_url":"https://api.github.com/users/A5rocks/gists{/gist_id}","starred_url":"https://api.github.com/users/A5rocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/A5rocks/subscriptions","organizations_url":"https://api.github.com/users/A5rocks/orgs","repos_url":"https://api.github.com/users/A5rocks/repos","events_url":"https://api.github.com/users/A5rocks/events{/privacy}","received_events_url":"https://api.github.com/users/A5rocks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T12:42:05Z","updated_at":"2022-03-08T12:42:05Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/12307","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/12307/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/12307/comments","events_url":"https://api.github.com/repos/python/mypy/issues/12307/events","html_url":"https://github.com/python/mypy/issues/12307","id":1162510428,"node_id":"I_kwDOAGuhRc5FSoBc","number":12307,"title":"Mypy infers the type of an async generator expression as `Generator`","user":{"login":"michaeloliverx","id":55017335,"node_id":"MDQ6VXNlcjU1MDE3MzM1","avatar_url":"https://avatars.githubusercontent.com/u/55017335?v=4","gravatar_id":"","url":"https://api.github.com/users/michaeloliverx","html_url":"https://github.com/michaeloliverx","followers_url":"https://api.github.com/users/michaeloliverx/followers","following_url":"https://api.github.com/users/michaeloliverx/following{/other_user}","gists_url":"https://api.github.com/users/michaeloliverx/gists{/gist_id}","starred_url":"https://api.github.com/users/michaeloliverx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaeloliverx/subscriptions","organizations_url":"https://api.github.com/users/michaeloliverx/orgs","repos_url":"https://api.github.com/users/michaeloliverx/repos","events_url":"https://api.github.com/users/michaeloliverx/events{/privacy}","received_events_url":"https://api.github.com/users/michaeloliverx/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-08T10:55:23Z","updated_at":"2022-03-08T12:43:55Z","closed_at":"2022-03-08T12:43:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Bug Report**\r\n\r\nMypy thinks the type of an async generator expression is `Generator`\r\n\r\n**To Reproduce**\r\n\r\n```python\r\n# example.py\r\nimport asyncio\r\nfrom collections.abc import AsyncIterator\r\nfrom random import random\r\nfrom uuid import uuid4\r\n\r\n\r\nasync def get_value() -> str:\r\n    await asyncio.sleep(random())\r\n    return uuid4().hex\r\n\r\n\r\nasync def process_values(ait: AsyncIterator[str]) -> None:\r\n    async for item in ait:\r\n        print(item)\r\n\r\n\r\nasync def main() -> None:\r\n    agen = (await get_value() for _ in range(10))\r\n    reveal_type(agen)\r\n    await process_values(agen)\r\n\r\n\r\nasyncio.run(main())\r\n\r\n```\r\n\r\n\r\n\r\n**Expected Behavior**\r\n\r\nThat the type would be `AsyncGenerator`\r\n\r\n**Actual Behavior**\r\n\r\n```\r\nmypy .\\example.py --strict\r\nexample.py:19: note: Revealed type is \"typing.Generator[builtins.str*, None, None]\"\r\nexample.py:20: error: Argument 1 to \"process_values\" has incompatible type \"Generator[str, None, None]\"; expected \"AsyncIterator[str]\"\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: `0.931`\r\n- Mypy command-line flags: `--strict`\r\n- Mypy configuration options from `mypy.ini` (and other config files):\r\n- Python version used: `3.9.0`\r\n- Operating system and version: Windows 10\r\n\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/12307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/12307/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":6345841687,"node_id":"LE_lADOAGuhRc41yqK6zwAAAAF6PdwX","url":"https://api.github.com/repos/python/mypy/issues/events/6345841687","actor":{"login":"AlexWaygood","id":66076021,"node_id":"MDQ6VXNlcjY2MDc2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/66076021?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexWaygood","html_url":"https://github.com/AlexWaygood","followers_url":"https://api.github.com/users/AlexWaygood/followers","following_url":"https://api.github.com/users/AlexWaygood/following{/other_user}","gists_url":"https://api.github.com/users/AlexWaygood/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexWaygood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexWaygood/subscriptions","organizations_url":"https://api.github.com/users/AlexWaygood/orgs","repos_url":"https://api.github.com/users/AlexWaygood/repos","events_url":"https://api.github.com/users/AlexWaygood/events{/privacy}","received_events_url":"https://api.github.com/users/AlexWaygood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-31T17:20:18Z","label":{"name":"topic-async","color":"267011"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python/mypy/issues/comments/1199251413","html_url":"https://github.com/python/mypy/issues/10534#issuecomment-1199251413","issue_url":"https://api.github.com/repos/python/mypy/issues/10534","id":1199251413,"node_id":"IC_kwDOAGuhRc5Hex_V","user":{"login":"joaoe","id":461983,"node_id":"MDQ6VXNlcjQ2MTk4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/461983?v=4","gravatar_id":"","url":"https://api.github.com/users/joaoe","html_url":"https://github.com/joaoe","followers_url":"https://api.github.com/users/joaoe/followers","following_url":"https://api.github.com/users/joaoe/following{/other_user}","gists_url":"https://api.github.com/users/joaoe/gists{/gist_id}","starred_url":"https://api.github.com/users/joaoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joaoe/subscriptions","organizations_url":"https://api.github.com/users/joaoe/orgs","repos_url":"https://api.github.com/users/joaoe/repos","events_url":"https://api.github.com/users/joaoe/events{/privacy}","received_events_url":"https://api.github.com/users/joaoe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-29T12:54:56Z","updated_at":"2022-07-29T12:54:56Z","body":"Seems you are missing `async def` here `def get_generator() -> AsyncGenerator[int, None]:`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/1199251413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"joaoe","id":461983,"node_id":"MDQ6VXNlcjQ2MTk4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/461983?v=4","gravatar_id":"","url":"https://api.github.com/users/joaoe","html_url":"https://github.com/joaoe","followers_url":"https://api.github.com/users/joaoe/followers","following_url":"https://api.github.com/users/joaoe/following{/other_user}","gists_url":"https://api.github.com/users/joaoe/gists{/gist_id}","starred_url":"https://api.github.com/users/joaoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joaoe/subscriptions","organizations_url":"https://api.github.com/users/joaoe/orgs","repos_url":"https://api.github.com/users/joaoe/repos","events_url":"https://api.github.com/users/joaoe/events{/privacy}","received_events_url":"https://api.github.com/users/joaoe/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python/mypy/issues/comments/2178802432","html_url":"https://github.com/python/mypy/issues/10534#issuecomment-2178802432","issue_url":"https://api.github.com/repos/python/mypy/issues/10534","id":2178802432,"node_id":"IC_kwDOAGuhRc6B3eMA","user":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T14:03:48Z","updated_at":"2024-06-19T14:03:48Z","body":"Simple repro with mypy latest: https://mypy-play.net/?mypy=master&python=3.12&gist=71cdbfcc61179de3290480733083180c&flags=warn-unreachable\r\n\r\n```python\r\nasync def something(i: int) -> tuple[None, ...]:\r\n    return (None,)\r\n\r\nasync def main() -> None:\r\n    async_or_nah = (\r\n        thing\r\n        for i in range(5)\r\n        for thing in await something(i)\r\n    )\r\n    \r\n    \r\n    async for blah in async_or_nah: # error: \"Generator[None, None, None]\" has no attribute \"__aiter__\" (not async iterable)  [attr-defined]\r\n        print(blah)\r\n```\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/comments/2178802432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tamird","id":1535036,"node_id":"MDQ6VXNlcjE1MzUwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1535036?v=4","gravatar_id":"","url":"https://api.github.com/users/tamird","html_url":"https://github.com/tamird","followers_url":"https://api.github.com/users/tamird/followers","following_url":"https://api.github.com/users/tamird/following{/other_user}","gists_url":"https://api.github.com/users/tamird/gists{/gist_id}","starred_url":"https://api.github.com/users/tamird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamird/subscriptions","organizations_url":"https://api.github.com/users/tamird/orgs","repos_url":"https://api.github.com/users/tamird/repos","events_url":"https://api.github.com/users/tamird/events{/privacy}","received_events_url":"https://api.github.com/users/tamird/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"yangdanny97","id":18299205,"node_id":"MDQ6VXNlcjE4Mjk5MjA1","avatar_url":"https://avatars.githubusercontent.com/u/18299205?v=4","gravatar_id":"","url":"https://api.github.com/users/yangdanny97","html_url":"https://github.com/yangdanny97","followers_url":"https://api.github.com/users/yangdanny97/followers","following_url":"https://api.github.com/users/yangdanny97/following{/other_user}","gists_url":"https://api.github.com/users/yangdanny97/gists{/gist_id}","starred_url":"https://api.github.com/users/yangdanny97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangdanny97/subscriptions","organizations_url":"https://api.github.com/users/yangdanny97/orgs","repos_url":"https://api.github.com/users/yangdanny97/repos","events_url":"https://api.github.com/users/yangdanny97/events{/privacy}","received_events_url":"https://api.github.com/users/yangdanny97/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-30T02:04:35Z","updated_at":"2024-06-30T02:04:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python/mypy/issues/17452","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/17452/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/17452/comments","events_url":"https://api.github.com/repos/python/mypy/issues/17452/events","html_url":"https://github.com/python/mypy/pull/17452","id":2382047922,"node_id":"PR_kwDOAGuhRc5z-iTG","number":17452,"title":"Fix typechecking for async generators","user":{"login":"yangdanny97","id":18299205,"node_id":"MDQ6VXNlcjE4Mjk5MjA1","avatar_url":"https://avatars.githubusercontent.com/u/18299205?v=4","gravatar_id":"","url":"https://api.github.com/users/yangdanny97","html_url":"https://github.com/yangdanny97","followers_url":"https://api.github.com/users/yangdanny97/followers","following_url":"https://api.github.com/users/yangdanny97/following{/other_user}","gists_url":"https://api.github.com/users/yangdanny97/gists{/gist_id}","starred_url":"https://api.github.com/users/yangdanny97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangdanny97/subscriptions","organizations_url":"https://api.github.com/users/yangdanny97/orgs","repos_url":"https://api.github.com/users/yangdanny97/repos","events_url":"https://api.github.com/users/yangdanny97/events{/privacy}","received_events_url":"https://api.github.com/users/yangdanny97/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-06-30T02:04:34Z","updated_at":"2024-06-30T20:15:34Z","closed_at":"2024-06-30T20:15:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7053637,"node_id":"MDEwOlJlcG9zaXRvcnk3MDUzNjM3","name":"mypy","full_name":"python/mypy","private":false,"owner":{"login":"python","id":1525981,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MjU5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1525981?v=4","gravatar_id":"","url":"https://api.github.com/users/python","html_url":"https://github.com/python","followers_url":"https://api.github.com/users/python/followers","following_url":"https://api.github.com/users/python/following{/other_user}","gists_url":"https://api.github.com/users/python/gists{/gist_id}","starred_url":"https://api.github.com/users/python/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python/subscriptions","organizations_url":"https://api.github.com/users/python/orgs","repos_url":"https://api.github.com/users/python/repos","events_url":"https://api.github.com/users/python/events{/privacy}","received_events_url":"https://api.github.com/users/python/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python/mypy","description":"Optional static typing for Python","fork":false,"url":"https://api.github.com/repos/python/mypy","forks_url":"https://api.github.com/repos/python/mypy/forks","keys_url":"https://api.github.com/repos/python/mypy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python/mypy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python/mypy/teams","hooks_url":"https://api.github.com/repos/python/mypy/hooks","issue_events_url":"https://api.github.com/repos/python/mypy/issues/events{/number}","events_url":"https://api.github.com/repos/python/mypy/events","assignees_url":"https://api.github.com/repos/python/mypy/assignees{/user}","branches_url":"https://api.github.com/repos/python/mypy/branches{/branch}","tags_url":"https://api.github.com/repos/python/mypy/tags","blobs_url":"https://api.github.com/repos/python/mypy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python/mypy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python/mypy/git/refs{/sha}","trees_url":"https://api.github.com/repos/python/mypy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python/mypy/statuses/{sha}","languages_url":"https://api.github.com/repos/python/mypy/languages","stargazers_url":"https://api.github.com/repos/python/mypy/stargazers","contributors_url":"https://api.github.com/repos/python/mypy/contributors","subscribers_url":"https://api.github.com/repos/python/mypy/subscribers","subscription_url":"https://api.github.com/repos/python/mypy/subscription","commits_url":"https://api.github.com/repos/python/mypy/commits{/sha}","git_commits_url":"https://api.github.com/repos/python/mypy/git/commits{/sha}","comments_url":"https://api.github.com/repos/python/mypy/comments{/number}","issue_comment_url":"https://api.github.com/repos/python/mypy/issues/comments{/number}","contents_url":"https://api.github.com/repos/python/mypy/contents/{+path}","compare_url":"https://api.github.com/repos/python/mypy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python/mypy/merges","archive_url":"https://api.github.com/repos/python/mypy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python/mypy/downloads","issues_url":"https://api.github.com/repos/python/mypy/issues{/number}","pulls_url":"https://api.github.com/repos/python/mypy/pulls{/number}","milestones_url":"https://api.github.com/repos/python/mypy/milestones{/number}","notifications_url":"https://api.github.com/repos/python/mypy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python/mypy/labels{/name}","releases_url":"https://api.github.com/repos/python/mypy/releases{/id}","deployments_url":"https://api.github.com/repos/python/mypy/deployments","created_at":"2012-12-07T13:30:23Z","updated_at":"2025-11-09T16:41:25Z","pushed_at":"2025-11-08T23:13:28Z","git_url":"git://github.com/python/mypy.git","ssh_url":"git@github.com:python/mypy.git","clone_url":"https://github.com/python/mypy.git","svn_url":"https://github.com/python/mypy","homepage":"https://www.mypy-lang.org/","size":76085,"stargazers_count":19971,"watchers_count":19971,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3042,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3097,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["linter","python","typechecker","types","typing"],"visibility":"public","forks":3042,"open_issues":3097,"watchers":19971,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python/mypy/pulls/17452","html_url":"https://github.com/python/mypy/pull/17452","diff_url":"https://github.com/python/mypy/pull/17452.diff","patch_url":"https://github.com/python/mypy/pull/17452.patch","merged_at":"2024-06-30T20:15:34Z"},"body":"Fixes #10534\r\n\r\nThis PR fixes a bug in typechecking asynchronous generators.\r\n\r\nMypy currently typechecks a generator/comprehension as `AsyncGenerator` if the leftmost expression contains `await`, or if it contains an `async for`.\r\n\r\nHowever, there are other situations where we should get async generator: If there is an `await` expression in any of the conditions or in any sequence except for the leftmost one, the generator/comprehension should also be typechecked as `AsyncGenerator`. \r\n\r\nI've implemented this change in Mypy and added a test case to assert this behavior. If I enter the test cases into a regular repl, I can confirm that the runtime representation is generator/async_generator as the test case expects.\r\n\r\nAccording to the [language reference](https://docs.python.org/3/reference/expressions.html#grammar-token-python-grammar-comp_for):\r\n\r\n> If a comprehension contains either async for clauses or await expressions or other asynchronous comprehensions it is called an asynchronous comprehension.\r\n\r\nConfusingly, the documentation itself is actually not quite correct either, as pointed out in https://github.com/python/cpython/issues/114104\r\n\r\nAlongside this change, I've made a PR to update the docs to be more precise: https://github.com/python/cpython/pull/121175 has more details.\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/python/mypy/issues/17452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/17452/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":13342945220,"node_id":"CE_lADOAGuhRc41yqK6zwAAAAMbTS_E","url":"https://api.github.com/repos/python/mypy/issues/events/13342945220","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-06-30T20:15:35Z","state_reason":null,"performed_via_github_app":null},{"id":13342945221,"node_id":"REFE_lADOAGuhRc41yqK6zwAAAAMbTS_F","url":"https://api.github.com/repos/python/mypy/issues/events/13342945221","actor":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"02d3667442e0c8e63989e0276d1e78754cc84b2a","commit_url":"https://api.github.com/repos/python/mypy/commits/02d3667442e0c8e63989e0276d1e78754cc84b2a","created_at":"2024-06-30T20:15:35Z","performed_via_github_app":null}]