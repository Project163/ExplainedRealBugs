{"url":"https://api.github.com/repos/python/mypy/issues/10865","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/10865/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/10865/comments","events_url":"https://api.github.com/repos/python/mypy/issues/10865/events","html_url":"https://github.com/python/mypy/issues/10865","id":952136107,"node_id":"MDU6SXNzdWU5NTIxMzYxMDc=","number":10865,"title":"Don't warn about non keyword-only attributes after keyword-only attributes in dataclasses","user":{"login":"tgallant","id":5118575,"node_id":"MDQ6VXNlcjUxMTg1NzU=","avatar_url":"https://avatars.githubusercontent.com/u/5118575?v=4","gravatar_id":"","url":"https://api.github.com/users/tgallant","html_url":"https://github.com/tgallant","followers_url":"https://api.github.com/users/tgallant/followers","following_url":"https://api.github.com/users/tgallant/following{/other_user}","gists_url":"https://api.github.com/users/tgallant/gists{/gist_id}","starred_url":"https://api.github.com/users/tgallant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgallant/subscriptions","organizations_url":"https://api.github.com/users/tgallant/orgs","repos_url":"https://api.github.com/users/tgallant/repos","events_url":"https://api.github.com/users/tgallant/events{/privacy}","received_events_url":"https://api.github.com/users/tgallant/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-07-24T19:37:39Z","updated_at":"2021-08-08T00:56:47Z","closed_at":"2021-08-08T00:56:47Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n  If you're new to mypy and you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form\r\n  instead.\r\n-->\r\n\r\n**Bug Report**\r\n\r\nIf all fields in a dataclass are keyword only then mypy should not raise errors regarding the order of attributes with default values.\r\n\r\nPython 3.10.0 introduces a new dataclass parameter [`kw_only`](https://docs.python.org/3.10/library/dataclasses.html#dataclasses.dataclass).\r\n\r\nWhen this parameter is set to true then all fields in the dataclass will be marked as keyword only. If all fields in a dataclass are keyword only then checking the order of attributes with default values is not relevant.\r\n\r\nPrior art:\r\n\r\n[attrs plugin] Support kw_only=True #6107\r\nAllow attrs kw_only arguments at any position #8803\r\n\r\nbpo-43532: Add keyword-only fields to dataclasses. https://github.com/python/cpython/pull/25608\r\nSync typeshed #10537 (introduced the `kw_only` dataclass parameter to mypy)\r\n\r\n<!--\r\nNote: If the problem you are reporting is about a specific library function, then the typeshed tracker is better suited\r\nfor this report: https://github.com/python/typeshed/issues\r\n-->\r\n\r\n**To Reproduce**\r\n\r\n1. Ensure you are using python version `3.10.0b4` (although should be reproducible with other 3.10 beta versions)\r\n2. Ensure you are using a dev build of mypy off of master\r\n3. Create a file `test_dataclass.py` which contains the following\r\n```python\r\nfrom dataclasses import dataclass\r\n\r\n\r\n@dataclass(kw_only=True)\r\nclass Example:\r\n    name: str = 'hi'\r\n    email: str\r\n```\r\n4. Run mypy and observe that it fails\r\n```bash\r\n$ mypy test_dataclass.py \r\ntest_dataclass.py:7: error: Attributes without a default cannot follow attributes with one\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\n\r\n**Expected Behavior**\r\n\r\n<!--\r\n  How did you expect your project to behave?\r\n  It’s fine if you’re not sure your understanding is correct.\r\n  Write down what you thought would happen. If you just expected no errors, you can delete this section.\r\n-->\r\n\r\nThis should not cause a mypy error. Checking the ordering of attributes with default parameters is not necessary when `kw_only=True` is specified.\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 0.920+dev.97b3b90356893e2a9f6947ebe52b41cd54ab1cb7\r\n- Mypy command-line flags: mypy test_dataclass.py\r\n- Mypy configuration options from `mypy.ini` (and other config files): n/a; default\r\n- Python version used: 3.10.0b4\r\n- Operating system and version: OS X 10.15.5\r\n\r\n<!--\r\nYou can freely edit this text, please remove all the lines\r\nyou believe are unnecessary.\r\n-->\r\n","closed_by":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/10865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/10865/timeline","performed_via_github_app":null,"state_reason":"completed"}