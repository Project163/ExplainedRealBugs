{"url":"https://api.github.com/repos/python/mypy/issues/11115","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/11115/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/11115/comments","events_url":"https://api.github.com/repos/python/mypy/issues/11115/events","html_url":"https://github.com/python/mypy/issues/11115","id":997976056,"node_id":"I_kwDOAGuhRc47e-f4","number":11115,"title":"Generic method signature doesn't resolve properly on a protocol classmethod","user":{"login":"nullie","id":355392,"node_id":"MDQ6VXNlcjM1NTM5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/355392?v=4","gravatar_id":"","url":"https://api.github.com/users/nullie","html_url":"https://github.com/nullie","followers_url":"https://api.github.com/users/nullie/followers","following_url":"https://api.github.com/users/nullie/following{/other_user}","gists_url":"https://api.github.com/users/nullie/gists{/gist_id}","starred_url":"https://api.github.com/users/nullie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nullie/subscriptions","organizations_url":"https://api.github.com/users/nullie/orgs","repos_url":"https://api.github.com/users/nullie/repos","events_url":"https://api.github.com/users/nullie/events{/privacy}","received_events_url":"https://api.github.com/users/nullie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-16T09:14:23Z","updated_at":"2021-11-19T00:21:30Z","closed_at":"2021-11-19T00:21:30Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n  If you're new to mypy and you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form\r\n  instead.\r\n-->\r\n\r\n**Bug Report**\r\n\r\n<!--\r\nNote: If the problem you are reporting is about a specific library function, then the typeshed tracker is better suited\r\nfor this report: https://github.com/python/typeshed/issues\r\n-->\r\n\r\nGeneric type signature doesn't seem to resolve properly on a protocol classmethod\r\n\r\n**To Reproduce**\r\n\r\n```\r\nfrom typing import Type, TypeVar, Protocol\r\n\r\n\r\nT = TypeVar('T')\r\n\r\n\r\nclass ModelProtocol(Protocol):\r\n    @classmethod\r\n    def from_dict(cls: Type[T]) -> T:\r\n        ...\r\n\r\n\r\nclass ExampleModel:\r\n    @classmethod\r\n    def from_dict(cls) -> 'ExampleModel':\r\n        ...\r\n\r\n\r\nfoo: ModelProtocol = ExampleModel()\r\n```\r\n\r\n**Expected Behavior**\r\n\r\nNo errors\r\n\r\n<!--\r\n  How did you expect your project to behave?\r\n  It’s fine if you’re not sure your understanding is correct.\r\n  Write down what you thought would happen. If you just expected no errors, you can delete this section.\r\n-->\r\n\r\n**Actual Behavior**\r\n\r\n```\r\nexample.py:19: error: Incompatible types in assignment (expression has type \"ExampleModel\", variable has type \"ModelProtocol\")\r\nexample.py:19: note: Following member(s) of \"ExampleModel\" have conflicts:\r\nexample.py:19: note:     Expected:\r\nexample.py:19: note:         def from_dict(cls) -> <nothing>\r\nexample.py:19: note:     Got:\r\nexample.py:19: note:         def from_dict(cls) -> ExampleModel\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 0.910\r\n- Mypy command-line flags: none\r\n- Mypy configuration options from `mypy.ini` (and other config files): no configuration\r\n- Python version used: 3.7.10\r\n- Operating system and version: Ubuntu 20.04.1 LTS\r\n\r\n<!--\r\nYou can freely edit this text, please remove all the lines\r\nyou believe are unnecessary.\r\n-->\r\n","closed_by":{"login":"97littleleaf11","id":11172084,"node_id":"MDQ6VXNlcjExMTcyMDg0","avatar_url":"https://avatars.githubusercontent.com/u/11172084?v=4","gravatar_id":"","url":"https://api.github.com/users/97littleleaf11","html_url":"https://github.com/97littleleaf11","followers_url":"https://api.github.com/users/97littleleaf11/followers","following_url":"https://api.github.com/users/97littleleaf11/following{/other_user}","gists_url":"https://api.github.com/users/97littleleaf11/gists{/gist_id}","starred_url":"https://api.github.com/users/97littleleaf11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/97littleleaf11/subscriptions","organizations_url":"https://api.github.com/users/97littleleaf11/orgs","repos_url":"https://api.github.com/users/97littleleaf11/repos","events_url":"https://api.github.com/users/97littleleaf11/events{/privacy}","received_events_url":"https://api.github.com/users/97littleleaf11/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/11115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/11115/timeline","performed_via_github_app":null,"state_reason":"completed"}