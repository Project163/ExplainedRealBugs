{"url":"https://api.github.com/repos/python/mypy/issues/17023","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/17023/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/17023/comments","events_url":"https://api.github.com/repos/python/mypy/issues/17023/events","html_url":"https://github.com/python/mypy/issues/17023","id":2185540055,"node_id":"I_kwDOAGuhRc6CRLHX","number":17023,"title":"stubtest mishandles overloads where param is pos-only in one overload","user":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3201597780,"node_id":"MDU6TGFiZWwzMjAxNTk3Nzgw","url":"https://api.github.com/repos/python/mypy/labels/topic-stubtest","name":"topic-stubtest","color":"A13BA2","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-14T06:35:45Z","updated_at":"2025-08-23T01:12:27Z","closed_at":"2025-08-23T01:12:27Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The following test case:\r\n\r\n```\r\ndiff --git a/mypy/test/teststubtest.py b/mypy/test/teststubtest.py\r\nindex 418308e2e..51d222a5c 100644\r\n--- a/mypy/test/teststubtest.py\r\n+++ b/mypy/test/teststubtest.py\r\n@@ -788,6 +788,18 @@ class StubtestUnit(unittest.TestCase):\r\n             \"\"\",\r\n             error=None,\r\n         )\r\n+        yield Case(\r\n+            stub=\"\"\"\r\n+            @overload\r\n+            def f(a: int) -> int: ...\r\n+            @overload\r\n+            def f(a: int, b: str, /) -> str: ...\r\n+            \"\"\",\r\n+            runtime=\"\"\"\r\n+            def f(a, *args): ...\r\n+            \"\"\",\r\n+            error=None,\r\n+        )\r\n \r\n     @collect_cases\r\n     def test_property(self) -> Iterator[Case]:\r\n```\r\n\r\nfails with:\r\n\r\n```\r\nE           AssertionError: error: test_module.f is inconsistent, stub argument \"a\" has a default value but runtime argument does not\r\nE             Stub: in file test_module.pyi:74\r\nE             Overload(def (a: builtins.int) -> builtins.int, def (builtins.int, builtins.str) -> builtins.str)\r\nE             Inferred signature: def (a: builtins.int = ..., a: builtins.int = ..., b: builtins.str = ...)\r\nE             Runtime: in file test_module.py:26\r\nE             def (a, *args)\r\n```\r\n\r\nI think this should produce no errors. In any case, stubtest's inferred signature is wrong (it repeats the `a` parameter).\r\n\r\nCame up in python/typeshed#11595 where I am dealing with `collections.ChainMap.fromkeys`.","closed_by":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/17023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/17023/timeline","performed_via_github_app":null,"state_reason":"completed"}