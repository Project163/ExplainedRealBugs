{"url":"https://api.github.com/repos/python/mypy/issues/14687","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/14687/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/14687/comments","events_url":"https://api.github.com/repos/python/mypy/issues/14687/events","html_url":"https://github.com/python/mypy/issues/14687","id":1581700757,"node_id":"I_kwDOAGuhRc5eRtaV","number":14687,"title":"Crash when using imported class with partial","user":{"login":"NeilGirdhar","id":730137,"node_id":"MDQ6VXNlcjczMDEzNw==","avatar_url":"https://avatars.githubusercontent.com/u/730137?v=4","gravatar_id":"","url":"https://api.github.com/users/NeilGirdhar","html_url":"https://github.com/NeilGirdhar","followers_url":"https://api.github.com/users/NeilGirdhar/followers","following_url":"https://api.github.com/users/NeilGirdhar/following{/other_user}","gists_url":"https://api.github.com/users/NeilGirdhar/gists{/gist_id}","starred_url":"https://api.github.com/users/NeilGirdhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NeilGirdhar/subscriptions","organizations_url":"https://api.github.com/users/NeilGirdhar/orgs","repos_url":"https://api.github.com/users/NeilGirdhar/repos","events_url":"https://api.github.com/users/NeilGirdhar/events{/privacy}","received_events_url":"https://api.github.com/users/NeilGirdhar/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":354997184,"node_id":"MDU6TGFiZWwzNTQ5OTcxODQ=","url":"https://api.github.com/repos/python/mypy/labels/topic-incremental","name":"topic-incremental","color":"006b75","default":false,"description":null},{"id":379446833,"node_id":"MDU6TGFiZWwzNzk0NDY4MzM=","url":"https://api.github.com/repos/python/mypy/labels/crash","name":"crash","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-02-13T05:43:02Z","updated_at":"2023-03-12T11:26:06Z","closed_at":"2023-03-12T11:26:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This relies on tjax version 0.26 (tagged and released to PyPI).\r\n```python\r\nfrom functools import partial\r\n\r\nfrom tjax import custom_jvp  # Copying the definition into the file does not crash.\r\n\r\n\r\n@partial(custom_jvp)\r\ndef f(x: int) -> None:\r\n    pass\r\n```\r\nProduces:\r\n```\r\na.py:6: error: INTERNAL ERROR -- Please try using mypy master on GitHub:\r\nhttps://mypy.readthedocs.io/en/stable/common_issues.html#using-a-development-mypy-build\r\nPlease report a bug at https://github.com/python/mypy/issues\r\nversion: 1.0.0\r\nTraceback (most recent call last):\r\n  File \"mypy/checkexpr.py\", line 4821, in accept\r\n  File \"mypy/nodes.py\", line 1891, in accept\r\n  File \"mypy/checkexpr.py\", line 425, in visit_call_expr\r\n  File \"mypy/checkexpr.py\", line 545, in visit_call_expr_inner\r\n  File \"mypy/checkexpr.py\", line 1197, in check_call_expr_with_callee_type\r\n  File \"mypy/checkexpr.py\", line 1280, in check_call\r\n  File \"mypy/checkexpr.py\", line 1471, in check_callable_call\r\n  File \"mypy/checkexpr.py\", line 2122, in check_argument_types\r\n  File \"mypy/checkexpr.py\", line 2166, in check_arg\r\n  File \"mypy/subtypes.py\", line 176, in is_subtype\r\n  File \"mypy/subtypes.py\", line 335, in _is_subtype\r\n  File \"mypy/types.py\", line 1860, in accept\r\n  File \"mypy/subtypes.py\", line 686, in visit_callable_type\r\n  File \"mypy/subtypes.py\", line 1423, in is_callable_compatible\r\n  File \"mypy/subtypes.py\", line 1717, in unify_generic_callable\r\n  File \"mypy/solve.py\", line 88, in solve_constraints\r\n  File \"mypy/subtypes.py\", line 176, in is_subtype\r\n  File \"mypy/subtypes.py\", line 335, in _is_subtype\r\n  File \"mypy/types.py\", line 705, in accept\r\n  File \"mypy/subtypes.py\", line 649, in visit_param_spec\r\n  File \"mypy/subtypes.py\", line 388, in _is_subtype\r\n  File \"mypy/subtypes.py\", line 176, in is_subtype\r\n  File \"mypy/subtypes.py\", line 335, in _is_subtype\r\n  File \"mypy/types.py\", line 1348, in accept\r\n  File \"mypy/subtypes.py\", line 435, in visit_instance\r\nAttributeError: attribute 'fallback_to_any' of 'TypeInfo' undefined\r\na.py:6: : note: use --pdb to drop into pdb\r\n```","closed_by":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/14687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/14687/timeline","performed_via_github_app":null,"state_reason":"completed"}