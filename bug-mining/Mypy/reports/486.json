{"url":"https://api.github.com/repos/python/mypy/issues/18168","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/18168/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/18168/comments","events_url":"https://api.github.com/repos/python/mypy/issues/18168/events","html_url":"https://github.com/python/mypy/issues/18168","id":2672355244,"node_id":"I_kwDOAGuhRc6fSOes","number":18168,"title":"Regression: Crash when compiling trivial program using mypyc","user":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":379446833,"node_id":"MDU6TGFiZWwzNzk0NDY4MzM=","url":"https://api.github.com/repos/python/mypy/labels/crash","name":"crash","color":"b60205","default":false,"description":null},{"id":513232516,"node_id":"MDU6TGFiZWw1MTMyMzI1MTY=","url":"https://api.github.com/repos/python/mypy/labels/priority-0-high","name":"priority-0-high","color":"fbca04","default":false,"description":null},{"id":5268525011,"node_id":"LA_kwDOAGuhRc8AAAABOgdP0w","url":"https://api.github.com/repos/python/mypy/labels/affects-mypyc","name":"affects-mypyc","color":"bfd4f2","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"cdce8p","id":30130371,"node_id":"MDQ6VXNlcjMwMTMwMzcx","avatar_url":"https://avatars.githubusercontent.com/u/30130371?v=4","gravatar_id":"","url":"https://api.github.com/users/cdce8p","html_url":"https://github.com/cdce8p","followers_url":"https://api.github.com/users/cdce8p/followers","following_url":"https://api.github.com/users/cdce8p/following{/other_user}","gists_url":"https://api.github.com/users/cdce8p/gists{/gist_id}","starred_url":"https://api.github.com/users/cdce8p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdce8p/subscriptions","organizations_url":"https://api.github.com/users/cdce8p/orgs","repos_url":"https://api.github.com/users/cdce8p/repos","events_url":"https://api.github.com/users/cdce8p/events{/privacy}","received_events_url":"https://api.github.com/users/cdce8p/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"cdce8p","id":30130371,"node_id":"MDQ6VXNlcjMwMTMwMzcx","avatar_url":"https://avatars.githubusercontent.com/u/30130371?v=4","gravatar_id":"","url":"https://api.github.com/users/cdce8p","html_url":"https://github.com/cdce8p","followers_url":"https://api.github.com/users/cdce8p/followers","following_url":"https://api.github.com/users/cdce8p/following{/other_user}","gists_url":"https://api.github.com/users/cdce8p/gists{/gist_id}","starred_url":"https://api.github.com/users/cdce8p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdce8p/subscriptions","organizations_url":"https://api.github.com/users/cdce8p/orgs","repos_url":"https://api.github.com/users/cdce8p/repos","events_url":"https://api.github.com/users/cdce8p/events{/privacy}","received_events_url":"https://api.github.com/users/cdce8p/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2024-11-19T14:28:13Z","updated_at":"2024-11-19T17:36:11Z","closed_at":"2024-11-19T17:36:11Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When I try to compile a simple program using mypyc, I experience a crash (at least on macOS):\r\n```\r\n$ python -m mypyc t.py\r\nTraceback (most recent call last):\r\n  File \"/Users/jukka/src/mypy/build/setup.py\", line 4, in <module>\r\n    setup(name='mypyc_output',\r\n    ~~~~~^^^^^^^^^^^^^^^^^^^^^\r\n          ext_modules=mypycify(['t/t.py'], opt_level=\"3\", debug_level=\"1\", strict_dunder_typing=False),\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    )\r\n    ^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/__init__.py\", line 117, in setup\r\n    return distutils.core.setup(**attrs)\r\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/_distutils/core.py\", line 157, in setup\r\n    dist.parse_config_files()\r\n    ~~~~~~~~~~~~~~~~~~~~~~~^^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/dist.py\", line 608, in parse_config_files\r\n    pyprojecttoml.apply_configuration(self, filename, ignore_option_errors)\r\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/config/pyprojecttoml.py\", line 71, in apply_configuration\r\n    config = read_configuration(filepath, True, ignore_option_errors, dist)\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/config/pyprojecttoml.py\", line 143, in read_configuration\r\n    return expand_configuration(asdict, root_dir, ignore_option_errors, dist)\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/config/pyprojecttoml.py\", line 168, in expand_configuration\r\n    return _ConfigExpander(config, root_dir, ignore_option_errors, dist).expand()\r\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/config/pyprojecttoml.py\", line 216, in expand\r\n    self._expand_all_dynamic(dist, package_dir)\r\n    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/config/pyprojecttoml.py\", line 262, in _expand_all_dynamic\r\n    readme=self._obtain_readme(dist),\r\n           ~~~~~~~~~~~~~~~~~~~^^^^^^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/config/pyprojecttoml.py\", line 328, in _obtain_readme\r\n    self._ensure_previously_set(dist, \"readme\")\r\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\r\n  File \"/Users/jukka/venv/mypy/lib/python3.13/site-packages/setuptools/config/pyprojecttoml.py\", line 280, in _ensure_previously_set\r\n    raise InvalidConfigError(msg)\r\nsetuptools.errors.InvalidConfigError: No configuration found for dynamic 'readme'.\r\nSome dynamic fields need to be specified via `tool.setuptools.dynamic`\r\n```\r\nThe program `t.py` that I compiled is trivial:\r\n```py\r\nprint('hello')\r\n```\r\nThis appears to be a regression that bisects to #18146. cc @cdce8p ","closed_by":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/18168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/18168/timeline","performed_via_github_app":null,"state_reason":"completed"}