{"url":"https://api.github.com/repos/python/mypy/issues/10454","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/10454/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/10454/comments","events_url":"https://api.github.com/repos/python/mypy/issues/10454/events","html_url":"https://github.com/python/mypy/issues/10454","id":885258018,"node_id":"MDU6SXNzdWU4ODUyNTgwMTg=","number":10454,"title":"Awaiting on `Awaitable[Tuple[NoReturn, ...]]`","user":{"login":"danields761","id":13323567,"node_id":"MDQ6VXNlcjEzMzIzNTY3","avatar_url":"https://avatars.githubusercontent.com/u/13323567?v=4","gravatar_id":"","url":"https://api.github.com/users/danields761","html_url":"https://github.com/danields761","followers_url":"https://api.github.com/users/danields761/followers","following_url":"https://api.github.com/users/danields761/following{/other_user}","gists_url":"https://api.github.com/users/danields761/gists{/gist_id}","starred_url":"https://api.github.com/users/danields761/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danields761/subscriptions","organizations_url":"https://api.github.com/users/danields761/orgs","repos_url":"https://api.github.com/users/danields761/repos","events_url":"https://api.github.com/users/danields761/events{/privacy}","received_events_url":"https://api.github.com/users/danields761/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-05-10T22:34:05Z","updated_at":"2021-05-11T12:43:13Z","closed_at":"2021-05-11T05:19:58Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n  If you're new to mypy and you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form\r\n  instead.\r\n-->\r\n\r\n**Bug Report**\r\n\r\n<!--\r\nNote: If the problem you are reporting is about a specific library function, then the typeshed tracker is better suited\r\nfor this report: https://github.com/python/typeshed/issues\r\n-->\r\n\r\nMypy raises \"Implicit return in function which does not return  [misc]\" when awaiting on `Awaitable[Tuple[NoReturn, ...]]` (and similar) inside `NoReturn` coroutine.\r\n\r\n**To Reproduce**\r\n\r\n1) Run Mypy against following example:\r\n\r\n```\r\nfrom typing import TypeVar, NoReturn, Tuple, Awaitable\r\n\r\nT1 = TypeVar('T1')\r\nT2 = TypeVar('T2')\r\n\r\n\r\nasync def gather(\r\n    f1: Awaitable[T1], f2: Awaitable[T2]\r\n) -> Awaitable[Tuple[T1, T2]]:\r\n    raise NotImplementedError\r\n\r\n\r\nasync def no_return() -> NoReturn:\r\n    raise TypeError\r\n\r\n\r\nasync def main() -> NoReturn:\r\n    await gather(no_return(), no_return())\r\n```\r\n\r\n2) Mypy will raise \"Implicit return in function which does not return\"\r\n\r\n\r\n**Expected Behavior**\r\n\r\n<!--\r\n  How did you expect your project to behave?\r\n  It’s fine if you’re not sure your understanding is correct.\r\n  Write down what you thought would happen. If you just expected no errors, you can delete this section.\r\n-->\r\n\r\nHere I expect that awaiting on `Awaitable[Tuple[NoReturn, ...]]` will be threated exactly same as awaiting on plain `Awaitable[NoReturn]`.\r\n\r\n**Actual Behavior**\r\n\r\n<!--\r\n  Did something go wrong?\r\n  Is something broken, or not behaving as you expected?\r\n-->\r\n\r\nI don't know how to inspect inferred types, but almost sure that `gather(no_return(), no_return())` are inferred correctly as `Awaitable[Tuple[NoReturn, NoReturn]]`, but Mypy doesn't treat it same as `Awaitable[NoReturn]`.\r\n\r\n**Your Environment**\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 0.812\r\n- Mypy command-line flags: no additional flags required to reproduce the bug\r\n- Mypy configuration options from `mypy.ini` (and other config files): same as for field above\r\n- Python version used: 3.9.0\r\n- Operating system and version: Ubuntu 20.04\r\n\r\n<!--\r\nYou can freely edit this text, please remove all the lines\r\nyou believe are unnecessary.\r\n-->\r\n","closed_by":{"login":"TH3CHARLie","id":22651013,"node_id":"MDQ6VXNlcjIyNjUxMDEz","avatar_url":"https://avatars.githubusercontent.com/u/22651013?v=4","gravatar_id":"","url":"https://api.github.com/users/TH3CHARLie","html_url":"https://github.com/TH3CHARLie","followers_url":"https://api.github.com/users/TH3CHARLie/followers","following_url":"https://api.github.com/users/TH3CHARLie/following{/other_user}","gists_url":"https://api.github.com/users/TH3CHARLie/gists{/gist_id}","starred_url":"https://api.github.com/users/TH3CHARLie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TH3CHARLie/subscriptions","organizations_url":"https://api.github.com/users/TH3CHARLie/orgs","repos_url":"https://api.github.com/users/TH3CHARLie/repos","events_url":"https://api.github.com/users/TH3CHARLie/events{/privacy}","received_events_url":"https://api.github.com/users/TH3CHARLie/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/10454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/10454/timeline","performed_via_github_app":null,"state_reason":"completed"}