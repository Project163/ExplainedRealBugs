{"url":"https://api.github.com/repos/python/mypy/issues/15062","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/15062/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/15062/comments","events_url":"https://api.github.com/repos/python/mypy/issues/15062/events","html_url":"https://github.com/python/mypy/issues/15062","id":1669829496,"node_id":"I_kwDOAGuhRc5jh5N4","number":15062,"title":"Cannot create generic type aliases with TypeVarTuple","user":{"login":"tmke8","id":7741417,"node_id":"MDQ6VXNlcjc3NDE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/7741417?v=4","gravatar_id":"","url":"https://api.github.com/users/tmke8","html_url":"https://github.com/tmke8","followers_url":"https://api.github.com/users/tmke8/followers","following_url":"https://api.github.com/users/tmke8/following{/other_user}","gists_url":"https://api.github.com/users/tmke8/gists{/gist_id}","starred_url":"https://api.github.com/users/tmke8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmke8/subscriptions","organizations_url":"https://api.github.com/users/tmke8/orgs","repos_url":"https://api.github.com/users/tmke8/repos","events_url":"https://api.github.com/users/tmke8/events{/privacy}","received_events_url":"https://api.github.com/users/tmke8/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":3945158431,"node_id":"LA_kwDOAGuhRc7rJlcf","url":"https://api.github.com/repos/python/mypy/labels/topic-pep-646","name":"topic-pep-646","color":"733478","default":false,"description":"PEP 646 (TypeVarTuple, Unpack)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-16T10:03:21Z","updated_at":"2023-05-21T19:38:10Z","closed_at":"2023-05-21T19:38:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The support for `TypeVarTuple` is still experimental, so maybe this kind of error is expected, but I thought I could report it anyway.\r\n\r\n**To Reproduce**\r\n\r\nThe following example is [directly from the PEP](https://peps.python.org/pep-0646/#aliases):\r\n\r\n```python\r\nfrom typing import Tuple, TypeAlias, TypeVarTuple\r\n\r\nTs = TypeVarTuple(\"Ts\")\r\n\r\nIntTuple: TypeAlias = Tuple[int, *Ts]\r\n\r\nIntTuple[float, bool]\r\n```\r\n\r\n**Expected Behavior**\r\n\r\n<!--\r\nHow did you expect mypy to behave? It’s fine if you’re not sure your understanding is correct.\r\nWrite down what you thought would happen. If you expected no errors, delete this section.\r\n-->\r\nShould pass, as it does in, eg, pyright.\r\n\r\n**Actual Behavior**\r\n\r\n<!-- What went wrong? Paste mypy's output. -->\r\nIf I check the above in **Python 3.11** with\r\n```\r\nmypy typevartest.py --enable-incomplete-feature=TypeVarTuple --enable-incomplete-feature=Unpack\r\n```\r\nthen I get this output:\r\n```\r\ntypevartupletest.py:5: error: Invalid type alias: expression is not a valid type  [valid-type]\r\n```\r\n\r\nAnd if I replace the `*` with `Unpack` and import everything from `typing_extensions` and run it on **Python 3.10**, I get\r\n```\r\ntypevartupletest.py:8: error: Bad number of arguments for type alias, expected: 1, given: 2  [type-arg]\r\ntypevartupletest.py:8: error: Type application is only supported for generic classes  [misc]\r\n```\r\n\r\n**Maximum semantic analysis iteration count**\r\nWith a slight variation on the above code, I can also make mypy crash:\r\n```python\r\nfrom __future__ import annotations\r\nfrom dataclasses import dataclass\r\nfrom typing import Tuple\r\nfrom typing_extensions import TypeAlias, TypeVarTuple, Unpack\r\n\r\nTs = TypeVarTuple(\"Ts\")\r\n\r\nField: TypeAlias = Tuple[Unpack[Ts]]\r\n\r\n@dataclass\r\nclass A:\r\n    y: Field[C]\r\n\r\nclass C: ...\r\n```\r\n\r\ngives\r\n```\r\nDeferral trace:\r\n    typevartest:12\r\n    typevartest:12\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\n    typevartest:8\r\ntypevartest.py: error: INTERNAL ERROR: maximum semantic analysis iteration count reached\r\n```\r\n\r\n**Your environment**\r\nmypy version: 1.2.0 (compiled: yes)\r\n","closed_by":{"login":"ilevkivskyi","id":12005495,"node_id":"MDQ6VXNlcjEyMDA1NDk1","avatar_url":"https://avatars.githubusercontent.com/u/12005495?v=4","gravatar_id":"","url":"https://api.github.com/users/ilevkivskyi","html_url":"https://github.com/ilevkivskyi","followers_url":"https://api.github.com/users/ilevkivskyi/followers","following_url":"https://api.github.com/users/ilevkivskyi/following{/other_user}","gists_url":"https://api.github.com/users/ilevkivskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/ilevkivskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilevkivskyi/subscriptions","organizations_url":"https://api.github.com/users/ilevkivskyi/orgs","repos_url":"https://api.github.com/users/ilevkivskyi/repos","events_url":"https://api.github.com/users/ilevkivskyi/events{/privacy}","received_events_url":"https://api.github.com/users/ilevkivskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/15062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/15062/timeline","performed_via_github_app":null,"state_reason":"completed"}