{"url":"https://api.github.com/repos/python/mypy/issues/19816","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/19816/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/19816/comments","events_url":"https://api.github.com/repos/python/mypy/issues/19816/events","html_url":"https://github.com/python/mypy/issues/19816","id":3400306963,"node_id":"I_kwDOAGuhRc7KrJET","number":19816,"title":"`mypy --help` output wraps long URLs, breaking automatic parsing/linking in rich terminals","user":{"login":"ferdnyc","id":538020,"node_id":"MDQ6VXNlcjUzODAyMA==","avatar_url":"https://avatars.githubusercontent.com/u/538020?v=4","gravatar_id":"","url":"https://api.github.com/users/ferdnyc","html_url":"https://github.com/ferdnyc","followers_url":"https://api.github.com/users/ferdnyc/followers","following_url":"https://api.github.com/users/ferdnyc/following{/other_user}","gists_url":"https://api.github.com/users/ferdnyc/gists{/gist_id}","starred_url":"https://api.github.com/users/ferdnyc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferdnyc/subscriptions","organizations_url":"https://api.github.com/users/ferdnyc/orgs","repos_url":"https://api.github.com/users/ferdnyc/repos","events_url":"https://api.github.com/users/ferdnyc/events{/privacy}","received_events_url":"https://api.github.com/users/ferdnyc/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"},{"id":608992726,"node_id":"MDU6TGFiZWw2MDg5OTI3MjY=","url":"https://api.github.com/repos/python/mypy/labels/topic-usability","name":"topic-usability","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2025-09-09T23:32:28Z","updated_at":"2025-11-03T21:47:17Z","closed_at":"2025-11-03T21:47:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\nIf you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form instead.\nPlease consider:\n\n- checking our common issues page: https://mypy.readthedocs.io/en/stable/common_issues.html\n- searching our issue tracker: https://github.com/python/mypy/issues to see if it's already been reported\n- asking on gitter chat: https://gitter.im/python/typing\n-->\n\n**Bug Report**\n\n<!--\nIf you're reporting a problem with a specific library function, the typeshed tracker is better suited for this report: https://github.com/python/typeshed/issues\n\nIf the project you encountered the issue in is open source, please provide a link to the project.\n-->\n\nThis is admittedly a _very_ stupid, trivial thing, but it is an annoyance.\n\nMany terminal applications augment the shell output they display with rich features, including automatic conversion of printed URLs to active hyperlinks.\n\nIn an 80-column terminal, because at least one of the URLs displayed by `mypy --help` is too long to fit in an 80-column terminal, it gets split across two lines in the help output.\n\nCompounding the issue is that the URL is displayed in an indented context, so both lines of output have spaces inserted before them. On the second line, these spaces fall in the middle of the URL fragment, fouling the terminal's automatic linking by chopping off the end of the URL.\n\n**To Reproduce**\n\n1. Run a graphical terminal (such as `gnome-terminal` or macOS `Terminal.app`) which automatically links URLs in the output.\n2. Resize the window to 80 characters wide (standard graybeard width).\n3. Run `mypy --help` from any recent version (tested in `1.0.1` and `1.17.1`)\n4. Find whatever URL is included in the \"None and Optional handling\" section\n5. Either:\n    1. Hover over it with the pointer, to determine how much of it is linked\n    2. Click/right-click on it, to open the URL in a web browser\n\n**Expected Behavior**\n\nThe entire URL is output as a continuous, unbroken string. This is then automatically converted into a link to the referenced page.\n\n**Actual Behavior**\n\nThe output is formatted similar to these examples:\n\n```console\n$ /usr/bin/mypy --version\nmypy 1.17.1 (compiled: no)\n\n$ /usr/bin/mypy --help\n# -- 8< -- snip -- 8< --\nNone and Optional handling:\n  Adjust how values of type 'None' are handled. For more context on how mypy\n  handles values of type 'None', see:\n  https://mypy.readthedocs.io/en/stable/kinds_of_types.html#optional-types-\n  and-the-none-type\n# -- 8< -- snip -- 8< --\n```\n\n```console\n$ mypy --version\nmypy 1.0.1 (compiled: yes)\n\n$ mypy --help\n# -- 8< -- snip -- 8< --\nNone and Optional handling:\n  Adjust how values of type 'None' are handled. For more context on how mypy\n  handles values of type 'None', see:\n  https://mypy.readthedocs.io/en/stable/kinds_of_types.html#no-strict-\n  optional\n# -- 8< -- snip -- 8< --\n```\n\nThe second URL ends up becoming:\n* <https://mypy.readthedocs.io/en/stable/kinds_of_types.html#no-strict->\n\nThat one is outdated and no longer valid anyway. (PR #19252  updated the help to use a new, correct link target in newer `mypy` releases.)\n\nBut that new first URL:\n* <https://mypy.readthedocs.io/en/stable/kinds_of_types.html#optional-types->\n\nis just as invalid, only because the end of its fragment is chopped off.\n\n**Your Environment**\n\n<!-- Include as many relevant details about the environment you experienced the bug in -->\n\n- Mypy version used: 1.0.1, 1.17.1\n- Mypy command-line flags: `--help`\n- Python version used: 3.9, 3.13\n\n<!-- You can freely edit this text, please remove all the lines you believe are unnecessary. -->\n\n**Additional Notes**\n\nAs a somewhat-related aside, there are two more `--help` URLs, in the \"Incremental mode\" and \"Running code\" sections, that don't have the `https://` scheme identifier at the start. Meaning they _also_ aren't parsed as hyperlinks. But those are pretty trivially fixable, and they're both short enough that they still won't wrap.\n\nOh, and apologies if I should've filed this as a \"Documentation\" bug instead, I couldn't quite decide.","closed_by":{"login":"hauntsaninja","id":12621235,"node_id":"MDQ6VXNlcjEyNjIxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/12621235?v=4","gravatar_id":"","url":"https://api.github.com/users/hauntsaninja","html_url":"https://github.com/hauntsaninja","followers_url":"https://api.github.com/users/hauntsaninja/followers","following_url":"https://api.github.com/users/hauntsaninja/following{/other_user}","gists_url":"https://api.github.com/users/hauntsaninja/gists{/gist_id}","starred_url":"https://api.github.com/users/hauntsaninja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hauntsaninja/subscriptions","organizations_url":"https://api.github.com/users/hauntsaninja/orgs","repos_url":"https://api.github.com/users/hauntsaninja/repos","events_url":"https://api.github.com/users/hauntsaninja/events{/privacy}","received_events_url":"https://api.github.com/users/hauntsaninja/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/19816/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/19816/timeline","performed_via_github_app":null,"state_reason":"completed"}