{"url":"https://api.github.com/repos/python/mypy/issues/10801","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/10801/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/10801/comments","events_url":"https://api.github.com/repos/python/mypy/issues/10801/events","html_url":"https://github.com/python/mypy/issues/10801","id":941276700,"node_id":"MDU6SXNzdWU5NDEyNzY3MDA=","number":10801,"title":"__slots__ isn't effective for limiting attributes","user":{"login":"StevenLu2004","id":47733980,"node_id":"MDQ6VXNlcjQ3NzMzOTgw","avatar_url":"https://avatars.githubusercontent.com/u/47733980?v=4","gravatar_id":"","url":"https://api.github.com/users/StevenLu2004","html_url":"https://github.com/StevenLu2004","followers_url":"https://api.github.com/users/StevenLu2004/followers","following_url":"https://api.github.com/users/StevenLu2004/following{/other_user}","gists_url":"https://api.github.com/users/StevenLu2004/gists{/gist_id}","starred_url":"https://api.github.com/users/StevenLu2004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StevenLu2004/subscriptions","organizations_url":"https://api.github.com/users/StevenLu2004/orgs","repos_url":"https://api.github.com/users/StevenLu2004/repos","events_url":"https://api.github.com/users/StevenLu2004/events{/privacy}","received_events_url":"https://api.github.com/users/StevenLu2004/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":21488356,"node_id":"MDU6TGFiZWwyMTQ4ODM1Ng==","url":"https://api.github.com/repos/python/mypy/labels/bug","name":"bug","color":"f9d0c4","default":true,"description":"mypy got something wrong"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-07-10T15:55:14Z","updated_at":"2021-09-21T04:54:26Z","closed_at":"2021-09-21T04:54:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n  If you're new to mypy and you're not sure whether what you're experiencing is a mypy bug, please see the \"Question and Help\" form\r\n  instead.\r\n-->\r\n\r\n**Bug Report**\r\n\r\n<!--\r\nNote: If the problem you are reporting is about a specific library function, then the typeshed tracker is better suited\r\nfor this report: https://github.com/python/typeshed/issues\r\n-->\r\n\r\nThank you for Mypy! It's been great help :) Recently, I want to use `__slots__` in a class definition to limit the attributes. This way I don't accidentally define attributes with similar but different names (like \"bar\" in one class but \"baz\" in another) when I copy my code to a new class. But Mypy seems to ignore it completely, even if CPython throws an `AttributeError` when executing the code.\r\n\r\nOriginally I just want to prevent definition of attributes outside `__init__`, but Mypy doesn't seem to provide an option to check this, so I thought about `__slots__` as a workaround, but unfortunately this failed too. Please point out any probable workarounds for the above issues.\r\n\r\n**To Reproduce**\r\n\r\nPut the following in \"main.py\" and first execute with python then check with mypy.\r\n\r\n```python\r\nclass TestClass:\r\n    __slots__ = ('bar',)\r\n    def __init__(self) -> None:\r\n        self.bar: int = 0\r\n    def modify(self) -> None:\r\n        self.baz = 42\r\n    def __str__(self) -> str:\r\n        return f\"TestClass(bar={self.bar})\"\r\n\r\nt = TestClass()\r\nt.modify()\r\nprint(t)\r\n```\r\n\r\n```\r\n$ python main.py\r\n$ mypy main.py\r\n```\r\n\r\n**Expected Behavior**\r\n\r\n<!--\r\n  How did you expect your project to behave?\r\n  It’s fine if you’re not sure your understanding is correct.\r\n  Write down what you thought would happen. If you just expected no errors, you can delete this section.\r\n-->\r\n\r\nActual Python output:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 11, in <module>\r\n    t.modify()\r\n  File \"main.py\", line 6, in modify\r\n    self.baz = 42\r\nAttributeError: 'TestClass' object has no attribute 'baz'\r\n```\r\n\r\nExpected Mypy output, to be consistent with the Python output above:\r\n\r\n```\r\nmain.py:6: error: \"TestClass\" has no attribute \"baz\"\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\n**Actual Behavior**\r\n\r\n<!--\r\n  Did something go wrong?\r\n  Is something broken, or not behaving as you expected?\r\n-->\r\n\r\nActual Mypy output:\r\n\r\n```\r\nSuccess: no issues found in 1 source file\r\n```\r\n\r\n**Your Environment** (flags, configs, and OS are probably irrelevant)\r\n\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n\r\n- Mypy version used: 0.910 (pypi)\r\n- Mypy command-line flags: (None)\r\n- Mypy configuration options from `mypy.ini` (and other config files): (None)\r\n- Python version used: 3.7.6 (conda-forge)\r\n- Operating system and version: macOS Catalina Version 10.15.7\r\n\r\n<!--\r\nYou can freely edit this text, please remove all the lines\r\nyou believe are unnecessary.\r\n-->\r\n","closed_by":{"login":"emmatyping","id":9504279,"node_id":"MDQ6VXNlcjk1MDQyNzk=","avatar_url":"https://avatars.githubusercontent.com/u/9504279?v=4","gravatar_id":"","url":"https://api.github.com/users/emmatyping","html_url":"https://github.com/emmatyping","followers_url":"https://api.github.com/users/emmatyping/followers","following_url":"https://api.github.com/users/emmatyping/following{/other_user}","gists_url":"https://api.github.com/users/emmatyping/gists{/gist_id}","starred_url":"https://api.github.com/users/emmatyping/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emmatyping/subscriptions","organizations_url":"https://api.github.com/users/emmatyping/orgs","repos_url":"https://api.github.com/users/emmatyping/repos","events_url":"https://api.github.com/users/emmatyping/events{/privacy}","received_events_url":"https://api.github.com/users/emmatyping/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/10801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/10801/timeline","performed_via_github_app":null,"state_reason":"completed"}