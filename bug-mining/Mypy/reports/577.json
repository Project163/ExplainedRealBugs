{"url":"https://api.github.com/repos/python/mypy/issues/19175","repository_url":"https://api.github.com/repos/python/mypy","labels_url":"https://api.github.com/repos/python/mypy/issues/19175/labels{/name}","comments_url":"https://api.github.com/repos/python/mypy/issues/19175/comments","events_url":"https://api.github.com/repos/python/mypy/issues/19175/events","html_url":"https://github.com/python/mypy/issues/19175","id":3103196955,"node_id":"I_kwDOAGuhRc649wcb","number":19175,"title":"mypyc 1.16 regression: x86_64-cpython-3{9,10,11,12,13} error: ‘FOO_finalize’ undeclared here (not in a function);  did you mean ‘FOO_init’?","user":{"login":"mr-c","id":1330696,"node_id":"MDQ6VXNlcjEzMzA2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1330696?v=4","gravatar_id":"","url":"https://api.github.com/users/mr-c","html_url":"https://github.com/mr-c","followers_url":"https://api.github.com/users/mr-c/followers","following_url":"https://api.github.com/users/mr-c/following{/other_user}","gists_url":"https://api.github.com/users/mr-c/gists{/gist_id}","starred_url":"https://api.github.com/users/mr-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mr-c/subscriptions","organizations_url":"https://api.github.com/users/mr-c/orgs","repos_url":"https://api.github.com/users/mr-c/repos","events_url":"https://api.github.com/users/mr-c/events{/privacy}","received_events_url":"https://api.github.com/users/mr-c/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":379446833,"node_id":"MDU6TGFiZWwzNzk0NDY4MzM=","url":"https://api.github.com/repos/python/mypy/labels/crash","name":"crash","color":"b60205","default":false,"description":null},{"id":3945405283,"node_id":"LA_kwDOAGuhRc7rKhtj","url":"https://api.github.com/repos/python/mypy/labels/topic-mypyc","name":"topic-mypyc","color":"B64F6B","default":false,"description":"mypyc bugs"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2025-05-30T13:05:48Z","updated_at":"2025-06-02T14:20:26Z","closed_at":"2025-06-02T14:20:26Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Crash Report**\ncompiling Python modules using mypyc failed with a gcc error, where it did not using mypy 1.15\n\nPython 3.9: https://github.com/common-workflow-language/schema_salad/actions/runs/15347015751/job/43185437280?pr=927#step:6:450\n\nPython 3.10: https://github.com/common-workflow-language/schema_salad/actions/runs/15347015751/job/43185437282?pr=927#step:6:439\n\nPython 3.11: https://github.com/common-workflow-language/schema_salad/actions/runs/15347015751/job/43185437303?pr=927#step:6:433\n\nPython 3.12: https://github.com/common-workflow-language/schema_salad/actions/runs/15347015751/job/43185437295?pr=927#step:6:425\n\nPython 3.13: https://github.com/common-workflow-language/schema_salad/actions/runs/15347015751/job/43185437315?pr=927#step:6:425\n\n**Traceback**\n\n```\n    building '5df31530eea7292b5dae__mypyc' extension\n    creating build/temp.linux-x86_64-cpython-39/build\n    gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/tmp/pip-build-env-qntpj1xx/overlay/lib/python3.9/site-packages/mypyc/lib-rt -Ibuild -I/opt/_internal/cpython-3.9.22/include/python3.9 -c build/__native_5df31530eea7292b5dae.c -o build/temp.linux-x86_64-cpython-39/build/__native_5df31530eea7292b5dae.o -O3 -g0 -Werror -Wno-unused-function -Wno-unused-label -Wno-unreachable-code -Wno-unused-variable -Wno-unused-command-line-argument -Wno-unknown-warning-option -Wno-unused-but-set-variable -Wno-ignored-optimization-argument -Wno-cpp\n    build/__native_5df31530eea7292b5dae.c:110530:32: error: ‘ref_resolver___NormDict_finalize’ undeclared here (not in a function); did you mean ‘ref_resolver___NormDict_init’?\n    110530 |     .tp_finalize = (destructor)ref_resolver___NormDict_finalize,\n           |                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n           |                                ref_resolver___NormDict_init\n    cc1: note: unrecognized command-line option ‘-Wno-ignored-optimization-argument’ may have been intended to silence earlier diagnostics\n    cc1: note: unrecognized command-line option ‘-Wno-unknown-warning-option’ may have been intended to silence earlier diagnostics\n    cc1: note: unrecognized command-line option ‘-Wno-unused-command-line-argument’ may have been intended to silence earlier diagnostics\n    error: command '/opt/rh/gcc-toolset-14/root/usr/bin/gcc' failed with exit code 1\n    error: subprocess-exited-with-error\n    \n    × Building wheel for schema-salad (pyproject.toml) did not run successfully.\n    │ exit code: 1\n    ╰─> See above for output.\n```\n\n**To Reproduce**\n\n1. Checkout https://github.com/common-workflow-language/schema_salad/tree/dependabot/pip/mypy-mypyc--1.16.0\n2. `tox -e py39-mypy` (or `py310-mypy`, up to `py313-mypy`); or make a virtualenv and activate it, and `make dev mypyc`\n\n**Your Environment**\n\n<!-- Include as many relevant details about the environment you experienced the bug in -->\n\n- Mypy version used: 1.16\n- Mypy command-line flags: `MYPYPATH=mypy-stubs SCHEMA_SALAD_USE_MYPYC=1 pip install --verbose -e .` \n- Mypy configuration options from `mypy.ini` (and other config files): https://github.com/common-workflow-language/schema_salad/blob/dependabot/pip/mypy-mypyc--1.16.0/mypy.ini\n- Python version used: 3.9 - 3.13\n- Operating system and version: Ubuntu Linux 24.04.2\n\n","closed_by":{"login":"JukkaL","id":1107911,"node_id":"MDQ6VXNlcjExMDc5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1107911?v=4","gravatar_id":"","url":"https://api.github.com/users/JukkaL","html_url":"https://github.com/JukkaL","followers_url":"https://api.github.com/users/JukkaL/followers","following_url":"https://api.github.com/users/JukkaL/following{/other_user}","gists_url":"https://api.github.com/users/JukkaL/gists{/gist_id}","starred_url":"https://api.github.com/users/JukkaL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JukkaL/subscriptions","organizations_url":"https://api.github.com/users/JukkaL/orgs","repos_url":"https://api.github.com/users/JukkaL/repos","events_url":"https://api.github.com/users/JukkaL/events{/privacy}","received_events_url":"https://api.github.com/users/JukkaL/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python/mypy/issues/19175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python/mypy/issues/19175/timeline","performed_via_github_app":null,"state_reason":"completed"}