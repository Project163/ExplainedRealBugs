diff --git a/.github/workflows/test.yml b/.github/workflows/test.yml
index 2e1f73e98..a8360ddd2 100644
--- a/.github/workflows/test.yml
+++ b/.github/workflows/test.yml
@@ -56,6 +56,12 @@ jobs:
           toxenv: py
           tox_extra_args: "-n 2"
           test_mypyc: true
+        - name: Test suite with py310-ubuntu
+          python: '3.10'
+          arch: x64
+          os: ubuntu-latest
+          toxenv: py
+          tox_extra_args: "-n 2"
         - name: mypyc runtime tests with py36-macos
           python: '3.6'
           arch: x64
@@ -96,7 +102,7 @@ jobs:
         ./misc/build-debug-python.sh $PYTHONVERSION $PYTHONDIR $VENV
         source $VENV/bin/activate
     - name: Install tox
-      run: pip install --upgrade 'setuptools!=50' 'virtualenv<16.7.11' tox==3.20.1
+      run: pip install --upgrade 'setuptools!=50' 'virtualenv>=20.6.0' tox==3.20.1
     - name: Compiled with mypyc
       if: ${{ matrix.test_mypyc }}
       run: |
@@ -107,23 +113,24 @@ jobs:
     - name: Test
       run: tox -e ${{ matrix.toxenv }} --skip-pkg-install -- ${{ matrix.tox_extra_args }}
 
-  python-nightly:
-    runs-on: ubuntu-latest
-    name: Test suite with Python nightly
-    steps:
-    - uses: actions/checkout@v2
-    - uses: actions/setup-python@v2
-      with:
-        python-version: '3.10-dev'
-    - name: Install tox
-      run: |
-        pip install -U pip==21.2.3 setuptools
-        pip install --upgrade 'setuptools!=50' virtualenv==20.4.7 tox==3.20.1
-    - name: Setup tox environment
-      run: tox -e py --notest
-    - name: Test
-      run: tox -e py --skip-pkg-install -- "-n 2"
-      continue-on-error: true
-    - name: Mark as a success
-      run: exit 0
+# TODO: uncomment this when 3.11-dev is available
+#  python-nightly:
+#    runs-on: ubuntu-latest
+#    name: Test suite with Python nightly
+#    steps:
+#    - uses: actions/checkout@v2
+#    - uses: actions/setup-python@v2
+#      with:
+#        python-version: '3.11-dev'
+#    - name: Install tox
+#      run: |
+#        pip install -U pip==21.2.3 setuptools
+#        pip install --upgrade 'setuptools!=50' virtualenv==20.4.7 tox==3.20.1
+#    - name: Setup tox environment
+#      run: tox -e py --notest
+#    - name: Test
+#      run: tox -e py --skip-pkg-install -- "-n 2"
+#      continue-on-error: true
+#    - name: Mark as a success
+#      run: exit 0
 
diff --git a/mypyc/build.py b/mypyc/build.py
index 71acec06a..026da76ba 100644
--- a/mypyc/build.py
+++ b/mypyc/build.py
@@ -4,7 +4,7 @@ The main entry point is mypycify, which produces a list of extension
 modules to be passed to setup. A trivial setup.py for a mypyc built
 project, then, looks like:
 
-    from distutils.core import setup
+    from setuptools import setup
     from mypyc.build import mypycify
 
     setup(name='test_module',
diff --git a/scripts/mypyc b/scripts/mypyc
index 1dc42966e..235814042 100755
--- a/scripts/mypyc
+++ b/scripts/mypyc
@@ -19,7 +19,7 @@ import sys
 base_path = os.path.join(os.path.dirname(__file__), '..')
 
 setup_format = """\
-from distutils.core import setup
+from setuptools import setup
 from mypyc.build import mypycify
 
 setup(name='mypyc_output',
diff --git a/test-data/packages/typedpkg-stubs/setup.py b/test-data/packages/typedpkg-stubs/setup.py
index 58d8fa968..4948dc6a0 100644
--- a/test-data/packages/typedpkg-stubs/setup.py
+++ b/test-data/packages/typedpkg-stubs/setup.py
@@ -2,7 +2,7 @@
 This setup file installs packages to test mypy's PEP 561 implementation
 """
 
-from distutils.core import setup
+from setuptools import setup
 
 setup(
     name='typedpkg-stubs',
