diff --git a/mypy/options.py b/mypy/options.py
index 6babd0f02..fb7bb8e43 100644
--- a/mypy/options.py
+++ b/mypy/options.py
@@ -456,7 +456,7 @@ class Options:
         result: Dict[str, object] = {}
         for opt in OPTIONS_AFFECTING_CACHE:
             val = getattr(self, opt)
-            if isinstance(val, set):
-                val = sorted(val)
+            if opt in ("disabled_error_codes", "enabled_error_codes"):
+                val = sorted([code.code for code in val])
             result[opt] = val
         return result
diff --git a/test-data/unit/check-incremental.test b/test-data/unit/check-incremental.test
index 599b00dab..bf011140d 100644
--- a/test-data/unit/check-incremental.test
+++ b/test-data/unit/check-incremental.test
@@ -6012,3 +6012,13 @@ foo(name='Jennifer', age="38")
 [out]
 [out2]
 tmp/m.py:2: error: Argument "age" to "foo" has incompatible type "str"; expected "int"
+
+[case testDisableEnableErrorCodesIncremental]
+# flags: --disable-error-code truthy-bool
+# flags2: --enable-error-code truthy-bool
+def foo() -> int: ...
+if foo:
+    ...
+[out]
+[out2]
+main:4: error: Function "Callable[[], int]" could always be true in boolean context
