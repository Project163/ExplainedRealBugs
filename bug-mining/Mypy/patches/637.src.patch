diff --git a/mypy/semanal_pass1.py b/mypy/semanal_pass1.py
index aaa019692..266fd236a 100644
--- a/mypy/semanal_pass1.py
+++ b/mypy/semanal_pass1.py
@@ -74,6 +74,9 @@ class SemanticAnalyzerPreAnalysis(TraverserVisitor):
                     if last.end_line is not None:
                         # We are on a Python version recent enough to support end lines.
                         self.skipped_lines |= set(range(next_def.line, last.end_line + 1))
+                file.imports = [
+                    i for i in file.imports if (i.line, i.column) <= (defn.line, defn.column)
+                ]
                 del file.defs[i + 1 :]
                 break
         file.skipped_lines = self.skipped_lines
diff --git a/test-data/unit/check-incremental.test b/test-data/unit/check-incremental.test
index c3fe98e69..defe74027 100644
--- a/test-data/unit/check-incremental.test
+++ b/test-data/unit/check-incremental.test
@@ -6888,3 +6888,12 @@ class A:
 [out]
 [out2]
 main:3: error: Too few arguments
+
+[case testUnreachableAfterToplevelAssertImportThirdParty]
+# flags: --platform unknown
+import sys
+assert sys.platform == 'linux'
+import does_not_exist
+[builtins fixtures/ops.pyi]
+[out]
+[out2]
diff --git a/test-data/unit/check-unreachable-code.test b/test-data/unit/check-unreachable-code.test
index f425410a9..645f81e89 100644
--- a/test-data/unit/check-unreachable-code.test
+++ b/test-data/unit/check-unreachable-code.test
@@ -778,6 +778,22 @@ assert sys.platform == 'lol'
 def bar() -> None: pass
 [builtins fixtures/ops.pyi]
 
+[case testUnreachableAfterToplevelAssertImportThirdParty]
+# flags: --platform unknown
+import sys
+assert sys.platform == 'linux'
+import does_not_exist
+[builtins fixtures/ops.pyi]
+
+[case testUnreachableAfterToplevelAssertImportThirdParty2]
+# flags: --platform unknown
+import sys
+import bad; assert sys.platform == 'linux'; import does_not_exist
+[builtins fixtures/ops.pyi]
+[out]
+main:3: error: Cannot find implementation or library stub for module named "bad"
+main:3: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
+
 [case testUnreachableAfterToplevelAssertNotInsideIf]
 import sys
 if sys.version_info[0] >= 2:
