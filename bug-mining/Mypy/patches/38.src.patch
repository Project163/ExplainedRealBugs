diff --git a/mypy/semanal.py b/mypy/semanal.py
index 7bfa3c66e..7e5d70258 100644
--- a/mypy/semanal.py
+++ b/mypy/semanal.py
@@ -4961,9 +4961,26 @@ class SemanticAnalyzer(NodeVisitor[None],
         - Yes in annotated functions.
         - No otherwise.
         """
-        return (self.options.check_untyped_defs
-                or not self.function_stack
-                or not self.function_stack[-1].is_dynamic())
+        if self.options.check_untyped_defs or not self.function_stack:
+            return True
+
+        current_index = len(self.function_stack) - 1
+        while current_index >= 0:
+            current_func = self.function_stack[current_index]
+            if (
+                isinstance(current_func, FuncItem)
+                and not isinstance(current_func, LambdaExpr)
+            ):
+                return not current_func.is_dynamic()
+
+            # Special case, `lambda` inherits the "checked" state from its parent.
+            # Because `lambda` itself cannot be annotated.
+            # `lambdas` can be deeply nested, so we try to find at least one other parent.
+            current_index -= 1
+
+        # This means that we only have a stack of `lambda` functions,
+        # no regular functions.
+        return True
 
     def fail(self,
              msg: str,
diff --git a/mypy/test/testsemanal.py b/mypy/test/testsemanal.py
index 8ef702741..ca7b1663c 100644
--- a/mypy/test/testsemanal.py
+++ b/mypy/test/testsemanal.py
@@ -32,7 +32,8 @@ semanal_files = ['semanal-basic.test',
                  'semanal-typeddict.test',
                  'semenal-literal.test',
                  'semanal-classvar.test',
-                 'semanal-python2.test']
+                 'semanal-python2.test',
+                 'semanal-lambda.test']
 
 
 def get_semanal_options(program_text: str, testcase: DataDrivenTestCase) -> Options:
diff --git a/test-data/unit/check-expressions.test b/test-data/unit/check-expressions.test
index ff3a5efde..395bafce9 100644
--- a/test-data/unit/check-expressions.test
+++ b/test-data/unit/check-expressions.test
@@ -2366,6 +2366,19 @@ def f() -> None:
 [out]
 main:3: note: Revealed type is "builtins.int"
 
+[case testLambdaTypedContext]
+def f() -> None:
+    lambda: 'a'.missing()  # E: "str" has no attribute "missing"
+
+[case testLambdaUnypedContext]
+def f():
+    lambda: 'a'.missing()
+
+[case testLambdaCheckUnypedContext]
+# flags: --check-untyped-defs
+def f():
+    lambda: 'a'.missing()  # E: "str" has no attribute "missing"
+
 [case testEqNone]
 None == None
 [builtins fixtures/ops.pyi]
diff --git a/test-data/unit/semanal-lambda.test b/test-data/unit/semanal-lambda.test
new file mode 100644
index 000000000..1cde1a794
--- /dev/null
+++ b/test-data/unit/semanal-lambda.test
@@ -0,0 +1,94 @@
+[case testLambdaInheritsCheckedContextFromFunc]
+def g():
+    return lambda x: UNDEFINED in x
+[out]
+MypyFile:1(
+  FuncDef:1(
+    g
+    Block:1(
+      ReturnStmt:2(
+        LambdaExpr:2(
+          Args(
+            Var(x))
+          Block:2(
+            ReturnStmt:2(
+              ComparisonExpr:2(
+                in
+                NameExpr(UNDEFINED)
+                NameExpr(x [l])))))))))
+
+[case testLambdaInheritsCheckedContextFromFuncForced]
+# flags: --check-untyped-defs
+def g():
+    return lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromTypedFunc]
+def g() -> None:
+    return lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromTypedFuncForced]
+# flags: --check-untyped-defs
+def g() -> None:
+    return lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromModule]
+g = lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromModuleForce]
+# flags: --check-untyped-defs
+g = lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromModuleLambdaStack]
+g = lambda: lambda: lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromModuleLambdaStackForce]
+# flags: --check-untyped-defs
+g = lambda: lambda: lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromFuncLambdaStack]
+def g():
+    return lambda: lambda: lambda x: UNDEFINED in x
+[out]
+MypyFile:1(
+  FuncDef:1(
+    g
+    Block:1(
+      ReturnStmt:2(
+        LambdaExpr:2(
+          Block:2(
+            ReturnStmt:2(
+              LambdaExpr:2(
+                Block:2(
+                  ReturnStmt:2(
+                    LambdaExpr:2(
+                      Args(
+                        Var(x))
+                      Block:2(
+                        ReturnStmt:2(
+                          ComparisonExpr:2(
+                            in
+                            NameExpr(UNDEFINED)
+                            NameExpr(x [l])))))))))))))))
+
+[case testLambdaInheritsCheckedContextFromFuncLambdaStackForce]
+# flags: --check-untyped-defs
+def g():
+    return lambda: lambda: lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromTypedFuncLambdaStack]
+def g() -> None:
+    return lambda: lambda: lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromTypedFuncLambdaStackForce]
+# flags: --check-untyped-defs
+def g() -> None:
+    return lambda: lambda: lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromClassLambdaStack]
+class A:
+    g = lambda: lambda: lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
+
+[case testLambdaInheritsCheckedContextFromClassLambdaStackForce]
+# flags: --check-untyped-defs
+class A:
+    g = lambda: lambda: lambda x: UNDEFINED in x  # E: Name "UNDEFINED" is not defined
