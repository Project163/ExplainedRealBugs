diff --git a/mypy/errorcodes.py b/mypy/errorcodes.py
index fe460fdec..50a82be98 100644
--- a/mypy/errorcodes.py
+++ b/mypy/errorcodes.py
@@ -14,7 +14,7 @@ error_codes: dict[str, ErrorCode] = {}
 sub_code_map: dict[str, set[str]] = defaultdict(set)
 
 
-@mypyc_attr(serializable=True)
+@mypyc_attr(allow_interpreted_subclasses=True)
 class ErrorCode:
     def __init__(
         self,
diff --git a/test-data/unit/check-custom-plugin.test b/test-data/unit/check-custom-plugin.test
index d7beea039..c81de675d 100644
--- a/test-data/unit/check-custom-plugin.test
+++ b/test-data/unit/check-custom-plugin.test
@@ -1014,3 +1014,15 @@ reveal_type(MyClass.foo_staticmethod)  # N: Revealed type is "def (builtins.int)
 [file mypy.ini]
 \[mypy]
 plugins=<ROOT>/test-data/unit/plugins/add_classmethod.py
+
+[case testCustomErrorCodePlugin]
+# flags: --config-file tmp/mypy.ini  --show-error-codes
+def main() -> int:
+    return 2
+
+main()  # E: Custom error  [custom]
+reveal_type(1)  # N: Revealed type is "Literal[1]?"
+
+[file mypy.ini]
+\[mypy]
+plugins=<ROOT>/test-data/unit/plugins/custom_errorcode.py
diff --git a/test-data/unit/plugins/custom_errorcode.py b/test-data/unit/plugins/custom_errorcode.py
new file mode 100644
index 000000000..0e2209a32
--- /dev/null
+++ b/test-data/unit/plugins/custom_errorcode.py
@@ -0,0 +1,20 @@
+from mypy.errorcodes import ErrorCode
+from mypy.plugin import Plugin
+from mypy.types import AnyType, TypeOfAny
+
+CUSTOM_ERROR = ErrorCode(code="custom", description="", category="Custom")
+
+
+class CustomErrorCodePlugin(Plugin):
+    def get_function_hook(self, fullname):
+        if fullname.endswith(".main"):
+            return self.emit_error
+        return None
+
+    def emit_error(self, ctx):
+        ctx.api.fail("Custom error", ctx.context, code=CUSTOM_ERROR)
+        return AnyType(TypeOfAny.from_error)
+
+
+def plugin(version):
+    return CustomErrorCodePlugin
