{"url":"https://api.github.com/repos/heartcombo/devise/issues/3112","repository_url":"https://api.github.com/repos/heartcombo/devise","labels_url":"https://api.github.com/repos/heartcombo/devise/issues/3112/labels{/name}","comments_url":"https://api.github.com/repos/heartcombo/devise/issues/3112/comments","events_url":"https://api.github.com/repos/heartcombo/devise/issues/3112/events","html_url":"https://github.com/heartcombo/devise/issues/3112","id":37593746,"node_id":"MDU6SXNzdWUzNzU5Mzc0Ng==","number":3112,"title":"should default failure_app still redirect for non-navigational formats?","user":{"login":"ashanbrown","id":1858046,"node_id":"MDQ6VXNlcjE4NTgwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1858046?v=4","gravatar_id":"","url":"https://api.github.com/users/ashanbrown","html_url":"https://github.com/ashanbrown","followers_url":"https://api.github.com/users/ashanbrown/followers","following_url":"https://api.github.com/users/ashanbrown/following{/other_user}","gists_url":"https://api.github.com/users/ashanbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/ashanbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashanbrown/subscriptions","organizations_url":"https://api.github.com/users/ashanbrown/orgs","repos_url":"https://api.github.com/users/ashanbrown/repos","events_url":"https://api.github.com/users/ashanbrown/events{/privacy}","received_events_url":"https://api.github.com/users/ashanbrown/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2014-07-10T19:00:32Z","updated_at":"2014-09-18T17:51:02Z","closed_at":"2014-09-18T17:51:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Devise defines a failure app as follows:\n\n``` ruby\n  class FailureApp < ActionController::Metal\n     ...\n    def respond\n      if http_auth?\n        http_auth\n      elsif warden_options[:recall]\n        recall\n      else\n        redirect\n      end\n    end\n```\n\nThe effect of this is that it redirects to the sign in path if you fail authentication, regardless of whether the request is navigational format or not.  I'm hardly an expert on all this, but shouldn't non-navigational formats just return some sort of error instead of redirecting?  To get this behavior, I've had to create a custom failure app but I'm wondering if this behavior should be the default for devise.\n\nThanks,\n\nAndrew\n","closed_by":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/3112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/heartcombo/devise/issues/3112/timeline","performed_via_github_app":null,"state_reason":"completed"}