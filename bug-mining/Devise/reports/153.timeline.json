[{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/70455095","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-70455095","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":70455095,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDU1MDk1","user":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-19T07:30:04Z","updated_at":"2015-01-19T07:30:04Z","body":"Thanks for the detailed description. You are right, this is a bug, can you please send a pull request?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/70455095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/70463147","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-70463147","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":70463147,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDYzMTQ3","user":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-19T09:04:49Z","updated_at":"2015-01-19T09:04:49Z","body":"No worries. I don't actually have a patch for this, though - I simply changed my configuration to avoid the issue, which is only a workaround. I don't see why the filter method is including the strip_whitespace_keys attributes, so if we were to remove it, I assume it might break something else.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/70463147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/70463480","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-70463480","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":70463480,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDYzNDgw","user":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-19T09:08:27Z","updated_at":"2015-01-19T09:08:27Z","body":">  I don't see why the filter method is including the strip_whitespace_keys attributes, so if we were to remove it, I assume it might break something else.\n\nYeah, this looks like a bug. It should not be included definitely.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/70463480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/75368383","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-75368383","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":75368383,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzY4Mzgz","user":{"login":"sahilbhatia","id":6302326,"node_id":"MDQ6VXNlcjYzMDIzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/6302326?v=4","gravatar_id":"","url":"https://api.github.com/users/sahilbhatia","html_url":"https://github.com/sahilbhatia","followers_url":"https://api.github.com/users/sahilbhatia/followers","following_url":"https://api.github.com/users/sahilbhatia/following{/other_user}","gists_url":"https://api.github.com/users/sahilbhatia/gists{/gist_id}","starred_url":"https://api.github.com/users/sahilbhatia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sahilbhatia/subscriptions","organizations_url":"https://api.github.com/users/sahilbhatia/orgs","repos_url":"https://api.github.com/users/sahilbhatia/repos","events_url":"https://api.github.com/users/sahilbhatia/events{/privacy}","received_events_url":"https://api.github.com/users/sahilbhatia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-21T11:47:57Z","updated_at":"2015-02-21T11:47:57Z","body":"@rockorequin \n\nI tried reproducing it (from the details given above) on my local machine but couldn't.\n\nI used ruby ruby 2.2.0p0 (2014-12-25 revision 49005) [x86_64-linux] along with the rails and devise versions you specified.\n\nI made one additional change in `config/initializers/devise.rb`\n i.e. added this line `config.reset_password_keys = [ :username ]`\n\nAm I missing anything or going wrong somewhere?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/75368383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sahilbhatia","id":6302326,"node_id":"MDQ6VXNlcjYzMDIzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/6302326?v=4","gravatar_id":"","url":"https://api.github.com/users/sahilbhatia","html_url":"https://github.com/sahilbhatia","followers_url":"https://api.github.com/users/sahilbhatia/followers","following_url":"https://api.github.com/users/sahilbhatia/following{/other_user}","gists_url":"https://api.github.com/users/sahilbhatia/gists{/gist_id}","starred_url":"https://api.github.com/users/sahilbhatia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sahilbhatia/subscriptions","organizations_url":"https://api.github.com/users/sahilbhatia/orgs","repos_url":"https://api.github.com/users/sahilbhatia/repos","events_url":"https://api.github.com/users/sahilbhatia/events{/privacy}","received_events_url":"https://api.github.com/users/sahilbhatia/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":239586170,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM5NTg2MTcw","url":"https://api.github.com/repos/heartcombo/devise/issues/events/239586170","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-02-21T11:47:57Z","performed_via_github_app":null},{"id":239586171,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzOTU4NjE3MQ==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/239586171","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-02-21T11:47:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/75476370","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-75476370","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":75476370,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDc2Mzcw","user":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-23T00:53:51Z","updated_at":"2015-02-23T00:54:38Z","body":"@sahilbhatia, I'm using ruby 2.2.0p0 as well (and Rails 4.0.12). I think these are the only changes I made to the standard config file (as of 26 Aug 2013):\n\nconfig.authentication_keys = [ :user_name ]\nconfig.strip_whitespace_keys = [ :user_name ]\nconfig.reset_password_keys = [ :user_name ]\nconfig.case_insensitive_keys = [ :email ]\nconfig.lock_strategy = :failed_attempts\nconfig.unlock_keys = [ :email ]\nconfig.maximum_attempts = 5\n\nNote that I'm using user_name and not username because that is the field's name in the database (and of course I'm using the People model instead of the User model). Could that be making a difference?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/75476370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":239871062,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM5ODcxMDYy","url":"https://api.github.com/repos/heartcombo/devise/issues/events/239871062","actor":{"login":"sahilbhatia","id":6302326,"node_id":"MDQ6VXNlcjYzMDIzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/6302326?v=4","gravatar_id":"","url":"https://api.github.com/users/sahilbhatia","html_url":"https://github.com/sahilbhatia","followers_url":"https://api.github.com/users/sahilbhatia/followers","following_url":"https://api.github.com/users/sahilbhatia/following{/other_user}","gists_url":"https://api.github.com/users/sahilbhatia/gists{/gist_id}","starred_url":"https://api.github.com/users/sahilbhatia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sahilbhatia/subscriptions","organizations_url":"https://api.github.com/users/sahilbhatia/orgs","repos_url":"https://api.github.com/users/sahilbhatia/repos","events_url":"https://api.github.com/users/sahilbhatia/events{/privacy}","received_events_url":"https://api.github.com/users/sahilbhatia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-02-23T00:53:51Z","performed_via_github_app":null},{"id":239871063,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzOTg3MTA2Mw==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/239871063","actor":{"login":"sahilbhatia","id":6302326,"node_id":"MDQ6VXNlcjYzMDIzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/6302326?v=4","gravatar_id":"","url":"https://api.github.com/users/sahilbhatia","html_url":"https://github.com/sahilbhatia","followers_url":"https://api.github.com/users/sahilbhatia/followers","following_url":"https://api.github.com/users/sahilbhatia/following{/other_user}","gists_url":"https://api.github.com/users/sahilbhatia/gists{/gist_id}","starred_url":"https://api.github.com/users/sahilbhatia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sahilbhatia/subscriptions","organizations_url":"https://api.github.com/users/sahilbhatia/orgs","repos_url":"https://api.github.com/users/sahilbhatia/repos","events_url":"https://api.github.com/users/sahilbhatia/events{/privacy}","received_events_url":"https://api.github.com/users/sahilbhatia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-02-23T00:53:51Z","performed_via_github_app":null},{"id":244030452,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0NDAzMDQ1Mg==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/244030452","actor":{"login":"georgeguimaraes","id":2929,"node_id":"MDQ6VXNlcjI5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/2929?v=4","gravatar_id":"","url":"https://api.github.com/users/georgeguimaraes","html_url":"https://github.com/georgeguimaraes","followers_url":"https://api.github.com/users/georgeguimaraes/followers","following_url":"https://api.github.com/users/georgeguimaraes/following{/other_user}","gists_url":"https://api.github.com/users/georgeguimaraes/gists{/gist_id}","starred_url":"https://api.github.com/users/georgeguimaraes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/georgeguimaraes/subscriptions","organizations_url":"https://api.github.com/users/georgeguimaraes/orgs","repos_url":"https://api.github.com/users/georgeguimaraes/repos","events_url":"https://api.github.com/users/georgeguimaraes/events{/privacy}","received_events_url":"https://api.github.com/users/georgeguimaraes/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-03-01T20:50:27Z","label":{"name":"Bug","color":"ededed"},"performed_via_github_app":null},{"id":244030453,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0NDAzMDQ1Mw==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/244030453","actor":{"login":"georgeguimaraes","id":2929,"node_id":"MDQ6VXNlcjI5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/2929?v=4","gravatar_id":"","url":"https://api.github.com/users/georgeguimaraes","html_url":"https://github.com/georgeguimaraes","followers_url":"https://api.github.com/users/georgeguimaraes/followers","following_url":"https://api.github.com/users/georgeguimaraes/following{/other_user}","gists_url":"https://api.github.com/users/georgeguimaraes/gists{/gist_id}","starred_url":"https://api.github.com/users/georgeguimaraes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/georgeguimaraes/subscriptions","organizations_url":"https://api.github.com/users/georgeguimaraes/orgs","repos_url":"https://api.github.com/users/georgeguimaraes/repos","events_url":"https://api.github.com/users/georgeguimaraes/events{/privacy}","received_events_url":"https://api.github.com/users/georgeguimaraes/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-03-01T20:50:27Z","label":{"name":"Needs more work","color":"d7e102"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/115432764","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-115432764","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":115432764,"node_id":"MDEyOklzc3VlQ29tbWVudDExNTQzMjc2NA==","user":{"login":"guilpejon","id":871362,"node_id":"MDQ6VXNlcjg3MTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/871362?v=4","gravatar_id":"","url":"https://api.github.com/users/guilpejon","html_url":"https://github.com/guilpejon","followers_url":"https://api.github.com/users/guilpejon/followers","following_url":"https://api.github.com/users/guilpejon/following{/other_user}","gists_url":"https://api.github.com/users/guilpejon/gists{/gist_id}","starred_url":"https://api.github.com/users/guilpejon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guilpejon/subscriptions","organizations_url":"https://api.github.com/users/guilpejon/orgs","repos_url":"https://api.github.com/users/guilpejon/repos","events_url":"https://api.github.com/users/guilpejon/events{/privacy}","received_events_url":"https://api.github.com/users/guilpejon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-06-25T23:53:32Z","updated_at":"2015-06-25T23:53:32Z","body":"Having the same problem as @andricicezar, with the same versions of Rails and Devise 3.4.1.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/115432764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guilpejon","id":871362,"node_id":"MDQ6VXNlcjg3MTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/871362?v=4","gravatar_id":"","url":"https://api.github.com/users/guilpejon","html_url":"https://github.com/guilpejon","followers_url":"https://api.github.com/users/guilpejon/followers","following_url":"https://api.github.com/users/guilpejon/following{/other_user}","gists_url":"https://api.github.com/users/guilpejon/gists{/gist_id}","starred_url":"https://api.github.com/users/guilpejon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guilpejon/subscriptions","organizations_url":"https://api.github.com/users/guilpejon/orgs","repos_url":"https://api.github.com/users/guilpejon/repos","events_url":"https://api.github.com/users/guilpejon/events{/privacy}","received_events_url":"https://api.github.com/users/guilpejon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":340621596,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzQwNjIxNTk2","url":"https://api.github.com/repos/heartcombo/devise/issues/events/340621596","actor":{"login":"andricicezar","id":930510,"node_id":"MDQ6VXNlcjkzMDUxMA==","avatar_url":"https://avatars.githubusercontent.com/u/930510?v=4","gravatar_id":"","url":"https://api.github.com/users/andricicezar","html_url":"https://github.com/andricicezar","followers_url":"https://api.github.com/users/andricicezar/followers","following_url":"https://api.github.com/users/andricicezar/following{/other_user}","gists_url":"https://api.github.com/users/andricicezar/gists{/gist_id}","starred_url":"https://api.github.com/users/andricicezar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andricicezar/subscriptions","organizations_url":"https://api.github.com/users/andricicezar/orgs","repos_url":"https://api.github.com/users/andricicezar/repos","events_url":"https://api.github.com/users/andricicezar/events{/privacy}","received_events_url":"https://api.github.com/users/andricicezar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-06-25T23:53:32Z","performed_via_github_app":null},{"id":340621597,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM0MDYyMTU5Nw==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/340621597","actor":{"login":"andricicezar","id":930510,"node_id":"MDQ6VXNlcjkzMDUxMA==","avatar_url":"https://avatars.githubusercontent.com/u/930510?v=4","gravatar_id":"","url":"https://api.github.com/users/andricicezar","html_url":"https://github.com/andricicezar","followers_url":"https://api.github.com/users/andricicezar/followers","following_url":"https://api.github.com/users/andricicezar/following{/other_user}","gists_url":"https://api.github.com/users/andricicezar/gists{/gist_id}","starred_url":"https://api.github.com/users/andricicezar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andricicezar/subscriptions","organizations_url":"https://api.github.com/users/andricicezar/orgs","repos_url":"https://api.github.com/users/andricicezar/repos","events_url":"https://api.github.com/users/andricicezar/events{/privacy}","received_events_url":"https://api.github.com/users/andricicezar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-06-25T23:53:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/115538904","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-115538904","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":115538904,"node_id":"MDEyOklzc3VlQ29tbWVudDExNTUzODkwNA==","user":{"login":"andricicezar","id":930510,"node_id":"MDQ6VXNlcjkzMDUxMA==","avatar_url":"https://avatars.githubusercontent.com/u/930510?v=4","gravatar_id":"","url":"https://api.github.com/users/andricicezar","html_url":"https://github.com/andricicezar","followers_url":"https://api.github.com/users/andricicezar/followers","following_url":"https://api.github.com/users/andricicezar/following{/other_user}","gists_url":"https://api.github.com/users/andricicezar/gists{/gist_id}","starred_url":"https://api.github.com/users/andricicezar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andricicezar/subscriptions","organizations_url":"https://api.github.com/users/andricicezar/orgs","repos_url":"https://api.github.com/users/andricicezar/repos","events_url":"https://api.github.com/users/andricicezar/events{/privacy}","received_events_url":"https://api.github.com/users/andricicezar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-06-26T06:22:19Z","updated_at":"2015-06-26T06:22:19Z","body":"@guilpejon I fixed my problem with this. https://github.com/plataformatec/devise/issues/2699\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/115538904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"andricicezar","id":930510,"node_id":"MDQ6VXNlcjkzMDUxMA==","avatar_url":"https://avatars.githubusercontent.com/u/930510?v=4","gravatar_id":"","url":"https://api.github.com/users/andricicezar","html_url":"https://github.com/andricicezar","followers_url":"https://api.github.com/users/andricicezar/followers","following_url":"https://api.github.com/users/andricicezar/following{/other_user}","gists_url":"https://api.github.com/users/andricicezar/gists{/gist_id}","starred_url":"https://api.github.com/users/andricicezar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andricicezar/subscriptions","organizations_url":"https://api.github.com/users/andricicezar/orgs","repos_url":"https://api.github.com/users/andricicezar/repos","events_url":"https://api.github.com/users/andricicezar/events{/privacy}","received_events_url":"https://api.github.com/users/andricicezar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":340830516,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzQwODMwNTE2","url":"https://api.github.com/repos/heartcombo/devise/issues/events/340830516","actor":{"login":"guilpejon","id":871362,"node_id":"MDQ6VXNlcjg3MTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/871362?v=4","gravatar_id":"","url":"https://api.github.com/users/guilpejon","html_url":"https://github.com/guilpejon","followers_url":"https://api.github.com/users/guilpejon/followers","following_url":"https://api.github.com/users/guilpejon/following{/other_user}","gists_url":"https://api.github.com/users/guilpejon/gists{/gist_id}","starred_url":"https://api.github.com/users/guilpejon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guilpejon/subscriptions","organizations_url":"https://api.github.com/users/guilpejon/orgs","repos_url":"https://api.github.com/users/guilpejon/repos","events_url":"https://api.github.com/users/guilpejon/events{/privacy}","received_events_url":"https://api.github.com/users/guilpejon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-06-26T06:22:19Z","performed_via_github_app":null},{"id":340830517,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM0MDgzMDUxNw==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/340830517","actor":{"login":"guilpejon","id":871362,"node_id":"MDQ6VXNlcjg3MTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/871362?v=4","gravatar_id":"","url":"https://api.github.com/users/guilpejon","html_url":"https://github.com/guilpejon","followers_url":"https://api.github.com/users/guilpejon/followers","following_url":"https://api.github.com/users/guilpejon/following{/other_user}","gists_url":"https://api.github.com/users/guilpejon/gists{/gist_id}","starred_url":"https://api.github.com/users/guilpejon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guilpejon/subscriptions","organizations_url":"https://api.github.com/users/guilpejon/orgs","repos_url":"https://api.github.com/users/guilpejon/repos","events_url":"https://api.github.com/users/guilpejon/events{/privacy}","received_events_url":"https://api.github.com/users/guilpejon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-06-26T06:22:19Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/149328527","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-149328527","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":149328527,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTMyODUyNw==","user":{"login":"topherfangio","id":54370,"node_id":"MDQ6VXNlcjU0Mzcw","avatar_url":"https://avatars.githubusercontent.com/u/54370?v=4","gravatar_id":"","url":"https://api.github.com/users/topherfangio","html_url":"https://github.com/topherfangio","followers_url":"https://api.github.com/users/topherfangio/followers","following_url":"https://api.github.com/users/topherfangio/following{/other_user}","gists_url":"https://api.github.com/users/topherfangio/gists{/gist_id}","starred_url":"https://api.github.com/users/topherfangio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/topherfangio/subscriptions","organizations_url":"https://api.github.com/users/topherfangio/orgs","repos_url":"https://api.github.com/users/topherfangio/repos","events_url":"https://api.github.com/users/topherfangio/events{/privacy}","received_events_url":"https://api.github.com/users/topherfangio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-19T19:56:23Z","updated_at":"2015-10-19T19:56:23Z","body":"@rockorequin Can you tell me if this was happening 100% of the time, or just sometimes? I am facing a similar issue in 3.5.2 and am trying to track down the exact issue; but it's not always happening.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/149328527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"topherfangio","id":54370,"node_id":"MDQ6VXNlcjU0Mzcw","avatar_url":"https://avatars.githubusercontent.com/u/54370?v=4","gravatar_id":"","url":"https://api.github.com/users/topherfangio","html_url":"https://github.com/topherfangio","followers_url":"https://api.github.com/users/topherfangio/followers","following_url":"https://api.github.com/users/topherfangio/following{/other_user}","gists_url":"https://api.github.com/users/topherfangio/gists{/gist_id}","starred_url":"https://api.github.com/users/topherfangio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/topherfangio/subscriptions","organizations_url":"https://api.github.com/users/topherfangio/orgs","repos_url":"https://api.github.com/users/topherfangio/repos","events_url":"https://api.github.com/users/topherfangio/events{/privacy}","received_events_url":"https://api.github.com/users/topherfangio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":439560246,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM5NTYwMjQ2","url":"https://api.github.com/repos/heartcombo/devise/issues/events/439560246","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-10-19T19:56:23Z","performed_via_github_app":null},{"id":439560247,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzOTU2MDI0Nw==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/439560247","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-10-19T19:56:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/149791571","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-149791571","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":149791571,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTc5MTU3MQ==","user":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-21T06:00:19Z","updated_at":"2015-10-21T06:00:19Z","body":"@topherfangio: it was quite a while ago now since I ran into this, but I'm pretty certain it was happening 100% of the time.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/149791571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":441138077,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQxMTM4MDc3","url":"https://api.github.com/repos/heartcombo/devise/issues/events/441138077","actor":{"login":"topherfangio","id":54370,"node_id":"MDQ6VXNlcjU0Mzcw","avatar_url":"https://avatars.githubusercontent.com/u/54370?v=4","gravatar_id":"","url":"https://api.github.com/users/topherfangio","html_url":"https://github.com/topherfangio","followers_url":"https://api.github.com/users/topherfangio/followers","following_url":"https://api.github.com/users/topherfangio/following{/other_user}","gists_url":"https://api.github.com/users/topherfangio/gists{/gist_id}","starred_url":"https://api.github.com/users/topherfangio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/topherfangio/subscriptions","organizations_url":"https://api.github.com/users/topherfangio/orgs","repos_url":"https://api.github.com/users/topherfangio/repos","events_url":"https://api.github.com/users/topherfangio/events{/privacy}","received_events_url":"https://api.github.com/users/topherfangio/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-10-21T06:00:19Z","performed_via_github_app":null},{"id":441138078,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0MTEzODA3OA==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/441138078","actor":{"login":"topherfangio","id":54370,"node_id":"MDQ6VXNlcjU0Mzcw","avatar_url":"https://avatars.githubusercontent.com/u/54370?v=4","gravatar_id":"","url":"https://api.github.com/users/topherfangio","html_url":"https://github.com/topherfangio","followers_url":"https://api.github.com/users/topherfangio/followers","following_url":"https://api.github.com/users/topherfangio/following{/other_user}","gists_url":"https://api.github.com/users/topherfangio/gists{/gist_id}","starred_url":"https://api.github.com/users/topherfangio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/topherfangio/subscriptions","organizations_url":"https://api.github.com/users/topherfangio/orgs","repos_url":"https://api.github.com/users/topherfangio/repos","events_url":"https://api.github.com/users/topherfangio/events{/privacy}","received_events_url":"https://api.github.com/users/topherfangio/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-10-21T06:00:19Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/163746281","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-163746281","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":163746281,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mzc0NjI4MQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-10T20:53:48Z","updated_at":"2015-12-10T20:53:48Z","body":"I'm facing this problem even when I don't have authentication keys in strip_whitespace_keys\nusing Rails 4.2.5 with devise 3.5.3 and ruby 2.2.3\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/163746281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/164043035","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-164043035","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":164043035,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDA0MzAzNQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-11T20:43:27Z","updated_at":"2015-12-11T20:43:27Z","body":"stepping through code shows that the encrypted token gets saved in the database, the mail sent contains a link in which the raw token is used , I have verified this by inspecting the message variable and message.body.  \n\nHowever when I hover over the link in the mail preview in chromium 47 I see the link with the raw token but then the link changes and the encrypted token is exposed , I don't know why this happens and When I click the link, the reset_token in the url paramters is the encrypted one not the raw one even though inspecting the message variable shows the opposite of this.  \n\nI Have verified that the same thing happens with Firefox developer edition, why is this happening ?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/164043035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/164174258","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-164174258","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":164174258,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDE3NDI1OA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-12T18:23:27Z","updated_at":"2015-12-12T18:23:27Z","body":"Ok I have verfied, it was my fault, I was using the token from the database which is encrypted in the Mailer preview class.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/164174258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":938718340,"node_id":"MDExOkNsb3NlZEV2ZW50OTM4NzE4MzQw","url":"https://api.github.com/repos/heartcombo/devise/issues/events/938718340","actor":{"login":"georgeguimaraes","id":2929,"node_id":"MDQ6VXNlcjI5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/2929?v=4","gravatar_id":"","url":"https://api.github.com/users/georgeguimaraes","html_url":"https://github.com/georgeguimaraes","followers_url":"https://api.github.com/users/georgeguimaraes/followers","following_url":"https://api.github.com/users/georgeguimaraes/following{/other_user}","gists_url":"https://api.github.com/users/georgeguimaraes/gists{/gist_id}","starred_url":"https://api.github.com/users/georgeguimaraes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/georgeguimaraes/subscriptions","organizations_url":"https://api.github.com/users/georgeguimaraes/orgs","repos_url":"https://api.github.com/users/georgeguimaraes/repos","events_url":"https://api.github.com/users/georgeguimaraes/events{/privacy}","received_events_url":"https://api.github.com/users/georgeguimaraes/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2017-01-27T01:21:39Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/282040357","html_url":"https://github.com/heartcombo/devise/issues/3431#issuecomment-282040357","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/3431","id":282040357,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjA0MDM1Nw==","user":{"login":"joshpencheon","id":30904,"node_id":"MDQ6VXNlcjMwOTA0","avatar_url":"https://avatars.githubusercontent.com/u/30904?v=4","gravatar_id":"","url":"https://api.github.com/users/joshpencheon","html_url":"https://github.com/joshpencheon","followers_url":"https://api.github.com/users/joshpencheon/followers","following_url":"https://api.github.com/users/joshpencheon/following{/other_user}","gists_url":"https://api.github.com/users/joshpencheon/gists{/gist_id}","starred_url":"https://api.github.com/users/joshpencheon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshpencheon/subscriptions","organizations_url":"https://api.github.com/users/joshpencheon/orgs","repos_url":"https://api.github.com/users/joshpencheon/repos","events_url":"https://api.github.com/users/joshpencheon/events{/privacy}","received_events_url":"https://api.github.com/users/joshpencheon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-23T16:18:52Z","updated_at":"2017-02-23T16:18:52Z","body":"I was having this issue with Rails 5.0 and Devise 4.2.\r\n\r\nI tracked it down to when `reset_password_by_token` tries to find the user to reset using the digested token. Like @rockorequin, I was seeing an additional predicate being added to the query (`email: nil`), meaning that the user was not found, and a stub was initialised instead to carry the \"token is invalid\" message back to the form.\r\n\r\nDigging further, I found that it was `Devise::ParameterFilter` that was adding the additional `email:` key to the search. Finally, it turned out this was because another legacy library being used by the project defined `nil#downcase` and `nil#strip`.\r\n\r\nIn this case, not Devise's fault at all. For those interested, my patch was:\r\n\r\n```diff\r\n    def filtered_hash_by_method_for_given_keys(conditions, method, condition_keys)\r\n      condition_keys.each do |k|\r\n+       next unless conditions.key?(k)\r\n+\r\n        value = conditions[k]\r\n        conditions[k] = value.send(method) if value.respond_to?(method)\r\n      end\r\n\r\n      conditions\r\n    end   \r\n```\r\n\r\nI don't think it would be _wrong_ make this change upstream  whilst the cause in this case was horrible patching outside of Devise's control, I don't believe the intention of `filtered_hash_by_method_for_given_keys` is to add new keys to `conditions`, and think my patch makes that obvious.\r\n\r\nHope this helps someone  ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/282040357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"joshpencheon","id":30904,"node_id":"MDQ6VXNlcjMwOTA0","avatar_url":"https://avatars.githubusercontent.com/u/30904?v=4","gravatar_id":"","url":"https://api.github.com/users/joshpencheon","html_url":"https://github.com/joshpencheon","followers_url":"https://api.github.com/users/joshpencheon/followers","following_url":"https://api.github.com/users/joshpencheon/following{/other_user}","gists_url":"https://api.github.com/users/joshpencheon/gists{/gist_id}","starred_url":"https://api.github.com/users/joshpencheon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshpencheon/subscriptions","organizations_url":"https://api.github.com/users/joshpencheon/orgs","repos_url":"https://api.github.com/users/joshpencheon/repos","events_url":"https://api.github.com/users/joshpencheon/events{/privacy}","received_events_url":"https://api.github.com/users/joshpencheon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":974632650,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTc0NjMyNjUw","url":"https://api.github.com/repos/heartcombo/devise/issues/events/974632650","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-02-23T16:18:52Z","performed_via_github_app":null},{"id":974632651,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk3NDYzMjY1MQ==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/974632651","actor":{"login":"rockorequin","id":794677,"node_id":"MDQ6VXNlcjc5NDY3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/794677?v=4","gravatar_id":"","url":"https://api.github.com/users/rockorequin","html_url":"https://github.com/rockorequin","followers_url":"https://api.github.com/users/rockorequin/followers","following_url":"https://api.github.com/users/rockorequin/following{/other_user}","gists_url":"https://api.github.com/users/rockorequin/gists{/gist_id}","starred_url":"https://api.github.com/users/rockorequin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rockorequin/subscriptions","organizations_url":"https://api.github.com/users/rockorequin/orgs","repos_url":"https://api.github.com/users/rockorequin/repos","events_url":"https://api.github.com/users/rockorequin/events{/privacy}","received_events_url":"https://api.github.com/users/rockorequin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-02-23T16:18:52Z","performed_via_github_app":null}]