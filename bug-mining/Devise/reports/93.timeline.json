[{"id":15723379,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE1NzIzMzc5","url":"https://api.github.com/repos/heartcombo/devise/issues/events/15723379","actor":{"login":"atasay","id":273861,"node_id":"MDQ6VXNlcjI3Mzg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/273861?v=4","gravatar_id":"","url":"https://api.github.com/users/atasay","html_url":"https://github.com/atasay","followers_url":"https://api.github.com/users/atasay/followers","following_url":"https://api.github.com/users/atasay/following{/other_user}","gists_url":"https://api.github.com/users/atasay/gists{/gist_id}","starred_url":"https://api.github.com/users/atasay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atasay/subscriptions","organizations_url":"https://api.github.com/users/atasay/orgs","repos_url":"https://api.github.com/users/atasay/repos","events_url":"https://api.github.com/users/atasay/events{/privacy}","received_events_url":"https://api.github.com/users/atasay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-05-17T21:59:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5775509","html_url":"https://github.com/heartcombo/devise/issues/1859#issuecomment-5775509","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1859","id":5775509,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzU1MDk=","user":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-17T22:11:01Z","updated_at":"2012-05-17T22:11:01Z","body":"Thanks for the detailed report, we will take a look.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5775509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15724194,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE1NzI0MTk0","url":"https://api.github.com/repos/heartcombo/devise/issues/events/15724194","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-05-17T22:11:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5775830","html_url":"https://github.com/heartcombo/devise/issues/1859#issuecomment-5775830","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1859","id":5775830,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzU4MzA=","user":{"login":"atasay","id":273861,"node_id":"MDQ6VXNlcjI3Mzg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/273861?v=4","gravatar_id":"","url":"https://api.github.com/users/atasay","html_url":"https://github.com/atasay","followers_url":"https://api.github.com/users/atasay/followers","following_url":"https://api.github.com/users/atasay/following{/other_user}","gists_url":"https://api.github.com/users/atasay/gists{/gist_id}","starred_url":"https://api.github.com/users/atasay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atasay/subscriptions","organizations_url":"https://api.github.com/users/atasay/orgs","repos_url":"https://api.github.com/users/atasay/repos","events_url":"https://api.github.com/users/atasay/events{/privacy}","received_events_url":"https://api.github.com/users/atasay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-17T22:30:59Z","updated_at":"2012-05-17T23:42:35Z","body":"I should also mention that the `scoped_views` config option directly causes the issue. When setting it to false, the error goes away.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5775830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"atasay","id":273861,"node_id":"MDQ6VXNlcjI3Mzg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/273861?v=4","gravatar_id":"","url":"https://api.github.com/users/atasay","html_url":"https://github.com/atasay","followers_url":"https://api.github.com/users/atasay/followers","following_url":"https://api.github.com/users/atasay/following{/other_user}","gists_url":"https://api.github.com/users/atasay/gists{/gist_id}","starred_url":"https://api.github.com/users/atasay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atasay/subscriptions","organizations_url":"https://api.github.com/users/atasay/orgs","repos_url":"https://api.github.com/users/atasay/repos","events_url":"https://api.github.com/users/atasay/events{/privacy}","received_events_url":"https://api.github.com/users/atasay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5917987","html_url":"https://github.com/heartcombo/devise/issues/1859#issuecomment-5917987","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1859","id":5917987,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTc5ODc=","user":{"login":"kigster","id":259982,"node_id":"MDQ6VXNlcjI1OTk4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/259982?v=4","gravatar_id":"","url":"https://api.github.com/users/kigster","html_url":"https://github.com/kigster","followers_url":"https://api.github.com/users/kigster/followers","following_url":"https://api.github.com/users/kigster/following{/other_user}","gists_url":"https://api.github.com/users/kigster/gists{/gist_id}","starred_url":"https://api.github.com/users/kigster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kigster/subscriptions","organizations_url":"https://api.github.com/users/kigster/orgs","repos_url":"https://api.github.com/users/kigster/repos","events_url":"https://api.github.com/users/kigster/events{/privacy}","received_events_url":"https://api.github.com/users/kigster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-24T21:22:02Z","updated_at":"2012-05-24T21:32:17Z","body":"I have some additional information on this bug.\n\nI tracked it down to the order of instance variables assigned in this file, particular the order of @controller.formats= and @controller.request=\n\n```\n~/.rvm/gems/ruby-1.9.3-p194@global/gems/actionpack-3.2.3/lib/action_controller/test_case.rb:444:in `process'\n```\n\nThis process() method has an assignment: \n\n``` ruby\n@controller.formats = nil \n```\n\nwhich ends up calling into ActionView, and eventually Devise to figure out whether to use scoped views or not (and explodes because request is undefined).  Request is undefined because the line\n\n``` ruby\n@controller.request = @request\n```\n\nhappens after the @controller.formats= call.  Once I moved @controller.request = @request before the formats assignment, Devise no longer explodes.\n\nIn summary, it looks like in the context of functional controller tests, Devise relies on request object being setup to determine supported formats of the controller, but it can not rely on the request object yet because it wasn't assigned.\n\nI am not clear whether it's a Devise issue, or ActionSupport issue, but it is very surprising that it hasn't gotten caught before.  Basically any controller tests with scoped views with Devise would be broken.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5917987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kigster","id":259982,"node_id":"MDQ6VXNlcjI1OTk4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/259982?v=4","gravatar_id":"","url":"https://api.github.com/users/kigster","html_url":"https://github.com/kigster","followers_url":"https://api.github.com/users/kigster/followers","following_url":"https://api.github.com/users/kigster/following{/other_user}","gists_url":"https://api.github.com/users/kigster/gists{/gist_id}","starred_url":"https://api.github.com/users/kigster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kigster/subscriptions","organizations_url":"https://api.github.com/users/kigster/orgs","repos_url":"https://api.github.com/users/kigster/repos","events_url":"https://api.github.com/users/kigster/events{/privacy}","received_events_url":"https://api.github.com/users/kigster/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16227462,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTYyMjc0NjI=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/16227462","actor":{"login":"request","id":730467,"node_id":"MDEyOk9yZ2FuaXphdGlvbjczMDQ2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/730467?v=4","gravatar_id":"","url":"https://api.github.com/users/request","html_url":"https://github.com/request","followers_url":"https://api.github.com/users/request/followers","following_url":"https://api.github.com/users/request/following{/other_user}","gists_url":"https://api.github.com/users/request/gists{/gist_id}","starred_url":"https://api.github.com/users/request/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/request/subscriptions","organizations_url":"https://api.github.com/users/request/orgs","repos_url":"https://api.github.com/users/request/repos","events_url":"https://api.github.com/users/request/events{/privacy}","received_events_url":"https://api.github.com/users/request/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-05-24T21:22:02Z","performed_via_github_app":null},{"id":16227464,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2MjI3NDY0","url":"https://api.github.com/repos/heartcombo/devise/issues/events/16227464","actor":{"login":"request","id":730467,"node_id":"MDEyOk9yZ2FuaXphdGlvbjczMDQ2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/730467?v=4","gravatar_id":"","url":"https://api.github.com/users/request","html_url":"https://github.com/request","followers_url":"https://api.github.com/users/request/followers","following_url":"https://api.github.com/users/request/following{/other_user}","gists_url":"https://api.github.com/users/request/gists{/gist_id}","starred_url":"https://api.github.com/users/request/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/request/subscriptions","organizations_url":"https://api.github.com/users/request/orgs","repos_url":"https://api.github.com/users/request/repos","events_url":"https://api.github.com/users/request/events{/privacy}","received_events_url":"https://api.github.com/users/request/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-05-24T21:22:03Z","performed_via_github_app":null},{"id":16227465,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2MjI3NDY1","url":"https://api.github.com/repos/heartcombo/devise/issues/events/16227465","actor":{"login":"kigster","id":259982,"node_id":"MDQ6VXNlcjI1OTk4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/259982?v=4","gravatar_id":"","url":"https://api.github.com/users/kigster","html_url":"https://github.com/kigster","followers_url":"https://api.github.com/users/kigster/followers","following_url":"https://api.github.com/users/kigster/following{/other_user}","gists_url":"https://api.github.com/users/kigster/gists{/gist_id}","starred_url":"https://api.github.com/users/kigster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kigster/subscriptions","organizations_url":"https://api.github.com/users/kigster/orgs","repos_url":"https://api.github.com/users/kigster/repos","events_url":"https://api.github.com/users/kigster/events{/privacy}","received_events_url":"https://api.github.com/users/kigster/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-05-24T21:22:03Z","performed_via_github_app":null},{"id":16252713,"node_id":"MDExOkNsb3NlZEV2ZW50MTYyNTI3MTM=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/16252713","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"2b7328535d899d1bb0aecc3849880720cac56118","commit_url":"https://api.github.com/repos/heartcombo/devise/commits/2b7328535d899d1bb0aecc3849880720cac56118","created_at":"2012-05-25T07:40:00Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5924963","html_url":"https://github.com/heartcombo/devise/issues/1859#issuecomment-5924963","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1859","id":5924963,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjQ5NjM=","user":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-25T07:40:14Z","updated_at":"2012-05-25T07:40:14Z","body":"Thanks for the detailed report. I have added a fix for Devise master, can you please check it works for you? Thanks! \n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5924963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5943177","html_url":"https://github.com/heartcombo/devise/issues/1859#issuecomment-5943177","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1859","id":5943177,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDMxNzc=","user":{"login":"kigster","id":259982,"node_id":"MDQ6VXNlcjI1OTk4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/259982?v=4","gravatar_id":"","url":"https://api.github.com/users/kigster","html_url":"https://github.com/kigster","followers_url":"https://api.github.com/users/kigster/followers","following_url":"https://api.github.com/users/kigster/following{/other_user}","gists_url":"https://api.github.com/users/kigster/gists{/gist_id}","starred_url":"https://api.github.com/users/kigster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kigster/subscriptions","organizations_url":"https://api.github.com/users/kigster/orgs","repos_url":"https://api.github.com/users/kigster/repos","events_url":"https://api.github.com/users/kigster/events{/privacy}","received_events_url":"https://api.github.com/users/kigster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-26T00:35:00Z","updated_at":"2012-05-26T00:35:00Z","body":"Seems to be fixed!  We are now getting a proper result from posting to an action.  Thank you so much!\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/5943177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kigster","id":259982,"node_id":"MDQ6VXNlcjI1OTk4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/259982?v=4","gravatar_id":"","url":"https://api.github.com/users/kigster","html_url":"https://github.com/kigster","followers_url":"https://api.github.com/users/kigster/followers","following_url":"https://api.github.com/users/kigster/following{/other_user}","gists_url":"https://api.github.com/users/kigster/gists{/gist_id}","starred_url":"https://api.github.com/users/kigster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kigster/subscriptions","organizations_url":"https://api.github.com/users/kigster/orgs","repos_url":"https://api.github.com/users/kigster/repos","events_url":"https://api.github.com/users/kigster/events{/privacy}","received_events_url":"https://api.github.com/users/kigster/received_events","type":"User","user_view_type":"public","site_admin":false}}]