{"url":"https://api.github.com/repos/heartcombo/devise/issues/3367","repository_url":"https://api.github.com/repos/heartcombo/devise","labels_url":"https://api.github.com/repos/heartcombo/devise/issues/3367/labels{/name}","comments_url":"https://api.github.com/repos/heartcombo/devise/issues/3367/comments","events_url":"https://api.github.com/repos/heartcombo/devise/issues/3367/events","html_url":"https://github.com/heartcombo/devise/issues/3367","id":51673113,"node_id":"MDU6SXNzdWU1MTY3MzExMw==","number":3367,"title":"Overriding a controller shouldn't mess with Devise translation rules","user":{"login":"rosenfeld","id":32246,"node_id":"MDQ6VXNlcjMyMjQ2","avatar_url":"https://avatars.githubusercontent.com/u/32246?v=4","gravatar_id":"","url":"https://api.github.com/users/rosenfeld","html_url":"https://github.com/rosenfeld","followers_url":"https://api.github.com/users/rosenfeld/followers","following_url":"https://api.github.com/users/rosenfeld/following{/other_user}","gists_url":"https://api.github.com/users/rosenfeld/gists{/gist_id}","starred_url":"https://api.github.com/users/rosenfeld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rosenfeld/subscriptions","organizations_url":"https://api.github.com/users/rosenfeld/orgs","repos_url":"https://api.github.com/users/rosenfeld/repos","events_url":"https://api.github.com/users/rosenfeld/events{/privacy}","received_events_url":"https://api.github.com/users/rosenfeld/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2014-12-11T11:00:24Z","updated_at":"2015-01-26T22:03:11Z","closed_at":"2015-01-26T22:03:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Devise's behavior for an attempt to load the sign-in path while already authenticated is to forward the request to the main (or configured) page. But when the session times out in our application we redirect to a static page explaining how to re-authenticate (this is done in a third-party application) rather than redirecting to the log-in page. So, if the user navigates to the log-in page he will be redirected to the main page since the user is authenticated but then it will redirect again to the timed-out page since the session timed out. In order to avoid this behavior that some users have complained we decided to always show the log-in page to the user when requested instead of redirecting it when authenticated by skipping one of the filters for SessionsController in a inherited controller from our own. This problem happened in a moment when there was a problem with the third-party authenticator and they asked us to allow users to use a shared account until they fixed the authenticator. I've written about this before in the mailing list:\n\nhttps://groups.google.com/forum/#!topic/plataformatec-devise/w5SJcBGI_Ec\n\nAs you can see in the solution we used another controller inheriting from Devise::SessionsController.\n\nNow I noted that some translations are missing in some flash messages set by this new inherited controller. Then I found how `find_message` works:\n\nhttps://github.com/plataformatec/devise/blob/master/app/controllers/devise_controller.rb#L163\n\nIt uses the controller's name for building the translation scope. It would help already if that line was replaced by another method like \"devise_scope\" so that we could easily override it in the overridden controller but it would be even better if overriding a Devise's controller worked more seamless without having to worry about translations at all.\n\nMaybe a guide on the Wiki explaining how to override Devise's controller would be helpful. Maybe the scope could be passed as a parameter to find_message so that overriding a Devise's controller wouldn't have such side effects.\n\nWhat do you think?\n","closed_by":{"login":"lucasmazza","id":80978,"node_id":"MDQ6VXNlcjgwOTc4","avatar_url":"https://avatars.githubusercontent.com/u/80978?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasmazza","html_url":"https://github.com/lucasmazza","followers_url":"https://api.github.com/users/lucasmazza/followers","following_url":"https://api.github.com/users/lucasmazza/following{/other_user}","gists_url":"https://api.github.com/users/lucasmazza/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasmazza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasmazza/subscriptions","organizations_url":"https://api.github.com/users/lucasmazza/orgs","repos_url":"https://api.github.com/users/lucasmazza/repos","events_url":"https://api.github.com/users/lucasmazza/events{/privacy}","received_events_url":"https://api.github.com/users/lucasmazza/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/3367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/heartcombo/devise/issues/3367/timeline","performed_via_github_app":null,"state_reason":"completed"}