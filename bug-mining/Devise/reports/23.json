{"url":"https://api.github.com/repos/heartcombo/devise/issues/365","repository_url":"https://api.github.com/repos/heartcombo/devise","labels_url":"https://api.github.com/repos/heartcombo/devise/issues/365/labels{/name}","comments_url":"https://api.github.com/repos/heartcombo/devise/issues/365/comments","events_url":"https://api.github.com/repos/heartcombo/devise/issues/365/events","html_url":"https://github.com/heartcombo/devise/issues/365","id":240006,"node_id":"MDU6SXNzdWUyNDAwMDY=","number":365,"title":"ActionController::RoutingError (No route matches \"/users/confirmation\")","user":{"login":"mrrooijen","id":54708,"node_id":"MDQ6VXNlcjU0NzA4","avatar_url":"https://avatars.githubusercontent.com/u/54708?v=4","gravatar_id":"","url":"https://api.github.com/users/mrrooijen","html_url":"https://github.com/mrrooijen","followers_url":"https://api.github.com/users/mrrooijen/followers","following_url":"https://api.github.com/users/mrrooijen/following{/other_user}","gists_url":"https://api.github.com/users/mrrooijen/gists{/gist_id}","starred_url":"https://api.github.com/users/mrrooijen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrrooijen/subscriptions","organizations_url":"https://api.github.com/users/mrrooijen/orgs","repos_url":"https://api.github.com/users/mrrooijen/repos","events_url":"https://api.github.com/users/mrrooijen/events{/privacy}","received_events_url":"https://api.github.com/users/mrrooijen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2010-07-06T12:20:26Z","updated_at":"2010-07-06T14:01:40Z","closed_at":"2010-07-06T14:01:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"It seems that in the following scenario, you end up with a **ActionController::RoutingError (No route matches \"/users/confirmation\")**\n\n1) Go to: **http://localhost:3000/users/confirmation/new**\n2) Submit an email address that has already been confirmed: http://cl.ly/b39a339a2ac3795ee3d6\n3) Then URL changes to: **http://localhost:3000/users/confirmation** as the **new** action gets rendered again\n4) Fill in the correct email address, BOOM: http://cl.ly/521723fc291ec21bf84b\n\nStacktrace: \n\n```\nStarted POST \"/users/confirmation\" for 127.0.0.1 at Tue Jul 06 14:09:04 +0200 2010\n  Processing by Devise::ConfirmationsController#create as HTML\n  Parameters: {\"commit\"=>\"Resend confirmation instructions\", \"authenticity_token\"=>\"ZDeIgJJ7kJfRpq1O/fC+A3+ThbHuheMvRyFCHxiBWgs=\", \"user\"=>{\"email\"=>\"some.email@gmail.com\"}}\n  User Load (0.2ms)  SELECT \"users\".* FROM \"users\" WHERE (\"users\".\"email\" = 'some.email@gmail.com') LIMIT 1\nRendered devise/shared/_links.haml (2.1ms)\nRendered devise/confirmations/new.haml within layouts/application (11.9ms)\nCompleted 200 OK in 39ms (Views: 14.9ms | ActiveRecord: 0.2ms)\n\n\nStarted POST \"/users/confirmation\" for 127.0.0.1 at Tue Jul 06 14:13:27 +0200 2010\n\nActionController::RoutingError (No route matches \"/users/confirmation\"):\n/Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/actionpack-3.0.0.beta4/lib/action_dispatch/middleware/show_exceptions.rb:55:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/rack/logger.rb:14:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/runtime.rb:17:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/activesupport-3.0.0.beta4/lib/active_support/cache/strategy/local_cache.rb:72:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/lock.rb:11:in `synchronize'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/actionpack-3.0.0.beta4/lib/action_dispatch/middleware/static.rb:30:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/application.rb:145:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/application.rb:81:in `send'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/application.rb:81:in `method_missing'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/rack/log_tailer.rb:15:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:162:in `start'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:95:in `start'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:92:in `each'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:92:in `start'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:23:in `start'\n  /Users/Michael/.rvm/rubies/ree-1.8.7-2010.02/lib/ruby/1.8/webrick/server.rb:82:in `start'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/handler/webrick.rb:14:in `run'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/rack-1.1.0/lib/rack/server.rb:155:in `start'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/commands/server.rb:62:in `start'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/commands.rb:30\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/commands.rb:27:in `tap'\n  /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/railties-3.0.0.beta4/lib/rails/commands.rb:27\n  script/rails:6:in `require'\n  script/rails:6\n\nRendered /Users/Michael/.rvm/gems/ree-1.8.7-2010.02@r3/gems/actionpack-3.0.0.beta4/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)\n```\n\nHowever, if you correctly insert your email address on the first try, it just works. Also, if you submit an empty form and get the \"can't be blank\" default error and then re-submit with your correct email address, it also works. Even if you fill in an non-existing email address first, and then fill in the correct one, it works.\n\nSo it apparently only dies with the routing error when submitting an **already existing AND already confirmed email address prior to inserting the correct one**.\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/heartcombo/devise/issues/365/timeline","performed_via_github_app":null,"state_reason":"completed"}