[{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/635188705","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-635188705","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":635188705,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTE4ODcwNQ==","user":{"login":"alu0100921038","id":22820644,"node_id":"MDQ6VXNlcjIyODIwNjQ0","avatar_url":"https://avatars.githubusercontent.com/u/22820644?v=4","gravatar_id":"","url":"https://api.github.com/users/alu0100921038","html_url":"https://github.com/alu0100921038","followers_url":"https://api.github.com/users/alu0100921038/followers","following_url":"https://api.github.com/users/alu0100921038/following{/other_user}","gists_url":"https://api.github.com/users/alu0100921038/gists{/gist_id}","starred_url":"https://api.github.com/users/alu0100921038/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alu0100921038/subscriptions","organizations_url":"https://api.github.com/users/alu0100921038/orgs","repos_url":"https://api.github.com/users/alu0100921038/repos","events_url":"https://api.github.com/users/alu0100921038/events{/privacy}","received_events_url":"https://api.github.com/users/alu0100921038/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T08:11:18Z","updated_at":"2020-05-28T08:11:18Z","body":"cool, seems like im not the only one haha","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/635188705/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":3,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alu0100921038","id":22820644,"node_id":"MDQ6VXNlcjIyODIwNjQ0","avatar_url":"https://avatars.githubusercontent.com/u/22820644?v=4","gravatar_id":"","url":"https://api.github.com/users/alu0100921038","html_url":"https://github.com/alu0100921038","followers_url":"https://api.github.com/users/alu0100921038/followers","following_url":"https://api.github.com/users/alu0100921038/following{/other_user}","gists_url":"https://api.github.com/users/alu0100921038/gists{/gist_id}","starred_url":"https://api.github.com/users/alu0100921038/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alu0100921038/subscriptions","organizations_url":"https://api.github.com/users/alu0100921038/orgs","repos_url":"https://api.github.com/users/alu0100921038/repos","events_url":"https://api.github.com/users/alu0100921038/events{/privacy}","received_events_url":"https://api.github.com/users/alu0100921038/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/643433252","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-643433252","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":643433252,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzQzMzI1Mg==","user":{"login":"gingerlime","id":524274,"node_id":"MDQ6VXNlcjUyNDI3NA==","avatar_url":"https://avatars.githubusercontent.com/u/524274?v=4","gravatar_id":"","url":"https://api.github.com/users/gingerlime","html_url":"https://github.com/gingerlime","followers_url":"https://api.github.com/users/gingerlime/followers","following_url":"https://api.github.com/users/gingerlime/following{/other_user}","gists_url":"https://api.github.com/users/gingerlime/gists{/gist_id}","starred_url":"https://api.github.com/users/gingerlime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gingerlime/subscriptions","organizations_url":"https://api.github.com/users/gingerlime/orgs","repos_url":"https://api.github.com/users/gingerlime/repos","events_url":"https://api.github.com/users/gingerlime/events{/privacy}","received_events_url":"https://api.github.com/users/gingerlime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-12T18:53:42Z","updated_at":"2020-06-12T18:53:42Z","body":"I think it's a pretty common issue unfortunately. See https://github.com/heartcombo/devise/issues/3052#issuecomment-49881222\r\n\r\nI think the best solution is to set the locale in a middleware rather than in the application controller, and also ensure that this middleware is loaded before warden, so it sets the locale before the warden middleware sets any flash messages. https://github.com/heartcombo/devise/issues/4823#issuecomment-388112897","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/643433252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gingerlime","id":524274,"node_id":"MDQ6VXNlcjUyNDI3NA==","avatar_url":"https://avatars.githubusercontent.com/u/524274?v=4","gravatar_id":"","url":"https://api.github.com/users/gingerlime","html_url":"https://github.com/gingerlime","followers_url":"https://api.github.com/users/gingerlime/followers","following_url":"https://api.github.com/users/gingerlime/following{/other_user}","gists_url":"https://api.github.com/users/gingerlime/gists{/gist_id}","starred_url":"https://api.github.com/users/gingerlime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gingerlime/subscriptions","organizations_url":"https://api.github.com/users/gingerlime/orgs","repos_url":"https://api.github.com/users/gingerlime/repos","events_url":"https://api.github.com/users/gingerlime/events{/privacy}","received_events_url":"https://api.github.com/users/gingerlime/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/659655504","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-659655504","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":659655504,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTY1NTUwNA==","user":{"login":"excid3","id":67093,"node_id":"MDQ6VXNlcjY3MDkz","avatar_url":"https://avatars.githubusercontent.com/u/67093?v=4","gravatar_id":"","url":"https://api.github.com/users/excid3","html_url":"https://github.com/excid3","followers_url":"https://api.github.com/users/excid3/followers","following_url":"https://api.github.com/users/excid3/following{/other_user}","gists_url":"https://api.github.com/users/excid3/gists{/gist_id}","starred_url":"https://api.github.com/users/excid3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/excid3/subscriptions","organizations_url":"https://api.github.com/users/excid3/orgs","repos_url":"https://api.github.com/users/excid3/repos","events_url":"https://api.github.com/users/excid3/events{/privacy}","received_events_url":"https://api.github.com/users/excid3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T20:31:41Z","updated_at":"2020-07-16T20:31:41Z","body":"The Rails guides were updated to use `around_action` but it wasn't for threadsafety. There's discussion here about it: https://github.com/rails/rails/pull/34356\r\n\r\nIt's safe to use:\r\n\r\n```ruby\r\nbefore_action :set_locale\r\n\r\ndef set_locale\r\n  I18n.locale = params[:locale] || I18n.default_locale\r\nend\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/659655504/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"excid3","id":67093,"node_id":"MDQ6VXNlcjY3MDkz","avatar_url":"https://avatars.githubusercontent.com/u/67093?v=4","gravatar_id":"","url":"https://api.github.com/users/excid3","html_url":"https://github.com/excid3","followers_url":"https://api.github.com/users/excid3/followers","following_url":"https://api.github.com/users/excid3/following{/other_user}","gists_url":"https://api.github.com/users/excid3/gists{/gist_id}","starred_url":"https://api.github.com/users/excid3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/excid3/subscriptions","organizations_url":"https://api.github.com/users/excid3/orgs","repos_url":"https://api.github.com/users/excid3/repos","events_url":"https://api.github.com/users/excid3/events{/privacy}","received_events_url":"https://api.github.com/users/excid3/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/680809345","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-680809345","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":680809345,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDgwOTM0NQ==","user":{"login":"dssjoblom","id":12595797,"node_id":"MDQ6VXNlcjEyNTk1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/12595797?v=4","gravatar_id":"","url":"https://api.github.com/users/dssjoblom","html_url":"https://github.com/dssjoblom","followers_url":"https://api.github.com/users/dssjoblom/followers","following_url":"https://api.github.com/users/dssjoblom/following{/other_user}","gists_url":"https://api.github.com/users/dssjoblom/gists{/gist_id}","starred_url":"https://api.github.com/users/dssjoblom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dssjoblom/subscriptions","organizations_url":"https://api.github.com/users/dssjoblom/orgs","repos_url":"https://api.github.com/users/dssjoblom/repos","events_url":"https://api.github.com/users/dssjoblom/events{/privacy}","received_events_url":"https://api.github.com/users/dssjoblom/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T10:58:13Z","updated_at":"2020-08-26T10:58:13Z","body":"I'm having this same problem. First I tried before_action :set_locale which seemed to work for a while, but then stopped working, I'm unsure why. Changing it to prepend_before_action :set_locale works for the time being, but I'm uncertain whether this is the final or correct way to solve the problem. The middleware is in my case not an issue, as the Locale middleware is not used.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/680809345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dssjoblom","id":12595797,"node_id":"MDQ6VXNlcjEyNTk1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/12595797?v=4","gravatar_id":"","url":"https://api.github.com/users/dssjoblom","html_url":"https://github.com/dssjoblom","followers_url":"https://api.github.com/users/dssjoblom/followers","following_url":"https://api.github.com/users/dssjoblom/following{/other_user}","gists_url":"https://api.github.com/users/dssjoblom/gists{/gist_id}","starred_url":"https://api.github.com/users/dssjoblom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dssjoblom/subscriptions","organizations_url":"https://api.github.com/users/dssjoblom/orgs","repos_url":"https://api.github.com/users/dssjoblom/repos","events_url":"https://api.github.com/users/dssjoblom/events{/privacy}","received_events_url":"https://api.github.com/users/dssjoblom/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/680811169","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-680811169","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":680811169,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDgxMTE2OQ==","user":{"login":"dssjoblom","id":12595797,"node_id":"MDQ6VXNlcjEyNTk1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/12595797?v=4","gravatar_id":"","url":"https://api.github.com/users/dssjoblom","html_url":"https://github.com/dssjoblom","followers_url":"https://api.github.com/users/dssjoblom/followers","following_url":"https://api.github.com/users/dssjoblom/following{/other_user}","gists_url":"https://api.github.com/users/dssjoblom/gists{/gist_id}","starred_url":"https://api.github.com/users/dssjoblom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dssjoblom/subscriptions","organizations_url":"https://api.github.com/users/dssjoblom/orgs","repos_url":"https://api.github.com/users/dssjoblom/repos","events_url":"https://api.github.com/users/dssjoblom/events{/privacy}","received_events_url":"https://api.github.com/users/dssjoblom/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T11:02:46Z","updated_at":"2020-08-26T11:11:21Z","body":"Update: it seems as if prepend_before_action is the correct solution. The actions without prepend are in this order:\r\n\r\nverify_signed_out_user\r\nallow_params_authentication!\r\nrequire_no_authentication\r\nassert_is_devise_resource!\r\n75720\r\nset_xhr_redirected_to\r\nset_request_method_cookie\r\nverify_authenticity_token\r\nstaging_basic_auth\r\nset_gon_controller\r\nensure_signup_complete\r\ncheck_terms_agreement\r\nclear_search_mode\r\nconfigure_permitted_parameters\r\nset_locale\r\n\r\n, several of which are devise related, and will by default be executed before set_locale.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/680811169/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dssjoblom","id":12595797,"node_id":"MDQ6VXNlcjEyNTk1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/12595797?v=4","gravatar_id":"","url":"https://api.github.com/users/dssjoblom","html_url":"https://github.com/dssjoblom","followers_url":"https://api.github.com/users/dssjoblom/followers","following_url":"https://api.github.com/users/dssjoblom/following{/other_user}","gists_url":"https://api.github.com/users/dssjoblom/gists{/gist_id}","starred_url":"https://api.github.com/users/dssjoblom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dssjoblom/subscriptions","organizations_url":"https://api.github.com/users/dssjoblom/orgs","repos_url":"https://api.github.com/users/dssjoblom/repos","events_url":"https://api.github.com/users/dssjoblom/events{/privacy}","received_events_url":"https://api.github.com/users/dssjoblom/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/680829531","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-680829531","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":680829531,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDgyOTUzMQ==","user":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T11:46:38Z","updated_at":"2020-08-26T11:46:38Z","body":"@dssjoblom that's right, you need to make sure `set_locale` is called before anything Devise related there, as it may set a flash message by that time. So `prepend_before_action` or `around_action` should generally be preferable.\r\n\r\nThat said, the issue originally described here with `I18n.with_locale` exists, I have a possible reproduction and fix in the works (it happens because I18n is set back to the default locale before leaving the controller, and Devise's failure app runs afterwards so it has no awareness of the I18n locale set by the controller.). For the time being, using `I18n.locale = ` should work.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/680829531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3694402675,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY5NDQwMjY3NQ==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3694402675","actor":{"login":"dssjoblom","id":12595797,"node_id":"MDQ6VXNlcjEyNTk1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/12595797?v=4","gravatar_id":"","url":"https://api.github.com/users/dssjoblom","html_url":"https://github.com/dssjoblom","followers_url":"https://api.github.com/users/dssjoblom/followers","following_url":"https://api.github.com/users/dssjoblom/following{/other_user}","gists_url":"https://api.github.com/users/dssjoblom/gists{/gist_id}","starred_url":"https://api.github.com/users/dssjoblom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dssjoblom/subscriptions","organizations_url":"https://api.github.com/users/dssjoblom/orgs","repos_url":"https://api.github.com/users/dssjoblom/repos","events_url":"https://api.github.com/users/dssjoblom/events{/privacy}","received_events_url":"https://api.github.com/users/dssjoblom/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-26T11:46:39Z","performed_via_github_app":null},{"id":3694402679,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2OTQ0MDI2Nzk=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3694402679","actor":{"login":"dssjoblom","id":12595797,"node_id":"MDQ6VXNlcjEyNTk1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/12595797?v=4","gravatar_id":"","url":"https://api.github.com/users/dssjoblom","html_url":"https://github.com/dssjoblom","followers_url":"https://api.github.com/users/dssjoblom/followers","following_url":"https://api.github.com/users/dssjoblom/following{/other_user}","gists_url":"https://api.github.com/users/dssjoblom/gists{/gist_id}","starred_url":"https://api.github.com/users/dssjoblom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dssjoblom/subscriptions","organizations_url":"https://api.github.com/users/dssjoblom/orgs","repos_url":"https://api.github.com/users/dssjoblom/repos","events_url":"https://api.github.com/users/dssjoblom/events{/privacy}","received_events_url":"https://api.github.com/users/dssjoblom/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-26T11:46:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/700896809","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-700896809","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":700896809,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDg5NjgwOQ==","user":{"login":"sam-kim","id":16728352,"node_id":"MDQ6VXNlcjE2NzI4MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16728352?v=4","gravatar_id":"","url":"https://api.github.com/users/sam-kim","html_url":"https://github.com/sam-kim","followers_url":"https://api.github.com/users/sam-kim/followers","following_url":"https://api.github.com/users/sam-kim/following{/other_user}","gists_url":"https://api.github.com/users/sam-kim/gists{/gist_id}","starred_url":"https://api.github.com/users/sam-kim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sam-kim/subscriptions","organizations_url":"https://api.github.com/users/sam-kim/orgs","repos_url":"https://api.github.com/users/sam-kim/repos","events_url":"https://api.github.com/users/sam-kim/events{/privacy}","received_events_url":"https://api.github.com/users/sam-kim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:24:12Z","updated_at":"2020-09-29T18:24:12Z","body":"@carlosantoniodasilva Do you have any suggestions other than using `I18n.locale=`? We would like to keep using `I18n.with_locale` to avoid any leak issues and may go the route of customizing the devise failure app but wanted to check to see if there was something in the works here.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/700896809/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sam-kim","id":16728352,"node_id":"MDQ6VXNlcjE2NzI4MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16728352?v=4","gravatar_id":"","url":"https://api.github.com/users/sam-kim","html_url":"https://github.com/sam-kim","followers_url":"https://api.github.com/users/sam-kim/followers","following_url":"https://api.github.com/users/sam-kim/following{/other_user}","gists_url":"https://api.github.com/users/sam-kim/gists{/gist_id}","starred_url":"https://api.github.com/users/sam-kim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sam-kim/subscriptions","organizations_url":"https://api.github.com/users/sam-kim/orgs","repos_url":"https://api.github.com/users/sam-kim/repos","events_url":"https://api.github.com/users/sam-kim/events{/privacy}","received_events_url":"https://api.github.com/users/sam-kim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3821069302,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzgyMTA2OTMwMg==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3821069302","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-29T18:24:13Z","performed_via_github_app":null},{"id":3821069308,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4MjEwNjkzMDg=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3821069308","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-29T18:24:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/700904037","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-700904037","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":700904037,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDkwNDAzNw==","user":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:36:38Z","updated_at":"2020-09-29T18:36:38Z","body":"@sam-kim I have a WIP/possible fix here: https://github.com/heartcombo/devise/compare/ca-fix-i18n-locale-failure-app, haven't been able to wrap it up yet, but if you'd like to give it a shot let me know how it goes. Other than that, no ideas off the top of my head.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/700904037/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":3,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3821116259,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzgyMTExNjI1OQ==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3821116259","actor":{"login":"sam-kim","id":16728352,"node_id":"MDQ6VXNlcjE2NzI4MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16728352?v=4","gravatar_id":"","url":"https://api.github.com/users/sam-kim","html_url":"https://github.com/sam-kim","followers_url":"https://api.github.com/users/sam-kim/followers","following_url":"https://api.github.com/users/sam-kim/following{/other_user}","gists_url":"https://api.github.com/users/sam-kim/gists{/gist_id}","starred_url":"https://api.github.com/users/sam-kim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sam-kim/subscriptions","organizations_url":"https://api.github.com/users/sam-kim/orgs","repos_url":"https://api.github.com/users/sam-kim/repos","events_url":"https://api.github.com/users/sam-kim/events{/privacy}","received_events_url":"https://api.github.com/users/sam-kim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-29T18:36:38Z","performed_via_github_app":null},{"id":3821116270,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4MjExMTYyNzA=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3821116270","actor":{"login":"sam-kim","id":16728352,"node_id":"MDQ6VXNlcjE2NzI4MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16728352?v=4","gravatar_id":"","url":"https://api.github.com/users/sam-kim","html_url":"https://github.com/sam-kim","followers_url":"https://api.github.com/users/sam-kim/followers","following_url":"https://api.github.com/users/sam-kim/following{/other_user}","gists_url":"https://api.github.com/users/sam-kim/gists{/gist_id}","starred_url":"https://api.github.com/users/sam-kim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sam-kim/subscriptions","organizations_url":"https://api.github.com/users/sam-kim/orgs","repos_url":"https://api.github.com/users/sam-kim/repos","events_url":"https://api.github.com/users/sam-kim/events{/privacy}","received_events_url":"https://api.github.com/users/sam-kim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-29T18:36:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/700914415","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-700914415","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":700914415,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDkxNDQxNQ==","user":{"login":"sam-kim","id":16728352,"node_id":"MDQ6VXNlcjE2NzI4MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16728352?v=4","gravatar_id":"","url":"https://api.github.com/users/sam-kim","html_url":"https://github.com/sam-kim","followers_url":"https://api.github.com/users/sam-kim/followers","following_url":"https://api.github.com/users/sam-kim/following{/other_user}","gists_url":"https://api.github.com/users/sam-kim/gists{/gist_id}","starred_url":"https://api.github.com/users/sam-kim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sam-kim/subscriptions","organizations_url":"https://api.github.com/users/sam-kim/orgs","repos_url":"https://api.github.com/users/sam-kim/repos","events_url":"https://api.github.com/users/sam-kim/events{/privacy}","received_events_url":"https://api.github.com/users/sam-kim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:54:19Z","updated_at":"2020-09-29T18:54:19Z","body":"Looks like that worked perfectly! Thank you for that and the quick response ðŸ˜ƒ ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/700914415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sam-kim","id":16728352,"node_id":"MDQ6VXNlcjE2NzI4MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16728352?v=4","gravatar_id":"","url":"https://api.github.com/users/sam-kim","html_url":"https://github.com/sam-kim","followers_url":"https://api.github.com/users/sam-kim/followers","following_url":"https://api.github.com/users/sam-kim/following{/other_user}","gists_url":"https://api.github.com/users/sam-kim/gists{/gist_id}","starred_url":"https://api.github.com/users/sam-kim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sam-kim/subscriptions","organizations_url":"https://api.github.com/users/sam-kim/orgs","repos_url":"https://api.github.com/users/sam-kim/repos","events_url":"https://api.github.com/users/sam-kim/events{/privacy}","received_events_url":"https://api.github.com/users/sam-kim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/701341115","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-701341115","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":701341115,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTM0MTExNQ==","user":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T11:51:51Z","updated_at":"2020-09-30T11:51:51Z","body":"Cool, thanks for confirming. I'll try to wrap that up and push to master soon.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/701341115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/705599415","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-705599415","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":705599415,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTU5OTQxNQ==","user":{"login":"unosk","id":1249401,"node_id":"MDQ6VXNlcjEyNDk0MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1249401?v=4","gravatar_id":"","url":"https://api.github.com/users/unosk","html_url":"https://github.com/unosk","followers_url":"https://api.github.com/users/unosk/followers","following_url":"https://api.github.com/users/unosk/following{/other_user}","gists_url":"https://api.github.com/users/unosk/gists{/gist_id}","starred_url":"https://api.github.com/users/unosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unosk/subscriptions","organizations_url":"https://api.github.com/users/unosk/orgs","repos_url":"https://api.github.com/users/unosk/repos","events_url":"https://api.github.com/users/unosk/events{/privacy}","received_events_url":"https://api.github.com/users/unosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T14:14:10Z","updated_at":"2020-10-08T14:14:10Z","body":"@carlosantoniodasilva I tried the above fix.\r\nBut I think there are two more things that need to be fixed.\r\n\r\nhttps://github.com/heartcombo/devise/blob/45b831c4ea5a35914037bd27fe88b76d7b3683a4/lib/devise/failure_app.rb#L105\r\n\r\n```\r\nhuman_attribute_name(key, locale: warden_options[:locale])\r\n```\r\n\r\nhttps://github.com/heartcombo/devise/blob/45b831c4ea5a35914037bd27fe88b76d7b3683a4/lib/devise/hooks/activatable.rb#L10\r\n\r\n```\r\nthrow :warden, scope: scope, message: record.inactive_message, locale: locale: I18n.locale\r\n``` ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/705599415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"unosk","id":1249401,"node_id":"MDQ6VXNlcjEyNDk0MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1249401?v=4","gravatar_id":"","url":"https://api.github.com/users/unosk","html_url":"https://github.com/unosk","followers_url":"https://api.github.com/users/unosk/followers","following_url":"https://api.github.com/users/unosk/following{/other_user}","gists_url":"https://api.github.com/users/unosk/gists{/gist_id}","starred_url":"https://api.github.com/users/unosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unosk/subscriptions","organizations_url":"https://api.github.com/users/unosk/orgs","repos_url":"https://api.github.com/users/unosk/repos","events_url":"https://api.github.com/users/unosk/events{/privacy}","received_events_url":"https://api.github.com/users/unosk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3855689517,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzg1NTY4OTUxNw==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3855689517","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-08T14:14:10Z","performed_via_github_app":null},{"id":3855689523,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4NTU2ODk1MjM=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3855689523","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-10-08T14:14:10Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/705619111","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-705619111","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":705619111,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTYxOTExMQ==","user":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T14:43:41Z","updated_at":"2020-10-08T14:43:41Z","body":"Thanks @unosk! Definitely agree on the first one, I was actually thinking about wrapping the failure app with `I18n.with_locale`, although that might be a bit more of a breaking change I guess for people using I18n, but perhaps better overall. (and maybe even more expected.)\r\n\r\nI'll have to check on the second one, but at a glance seems reasonable. :+1:","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/705619111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3855849779,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzg1NTg0OTc3OQ==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3855849779","actor":{"login":"unosk","id":1249401,"node_id":"MDQ6VXNlcjEyNDk0MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1249401?v=4","gravatar_id":"","url":"https://api.github.com/users/unosk","html_url":"https://github.com/unosk","followers_url":"https://api.github.com/users/unosk/followers","following_url":"https://api.github.com/users/unosk/following{/other_user}","gists_url":"https://api.github.com/users/unosk/gists{/gist_id}","starred_url":"https://api.github.com/users/unosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unosk/subscriptions","organizations_url":"https://api.github.com/users/unosk/orgs","repos_url":"https://api.github.com/users/unosk/repos","events_url":"https://api.github.com/users/unosk/events{/privacy}","received_events_url":"https://api.github.com/users/unosk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-08T14:43:41Z","performed_via_github_app":null},{"id":3855849792,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4NTU4NDk3OTI=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/3855849792","actor":{"login":"unosk","id":1249401,"node_id":"MDQ6VXNlcjEyNDk0MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1249401?v=4","gravatar_id":"","url":"https://api.github.com/users/unosk","html_url":"https://github.com/unosk","followers_url":"https://api.github.com/users/unosk/followers","following_url":"https://api.github.com/users/unosk/following{/other_user}","gists_url":"https://api.github.com/users/unosk/gists{/gist_id}","starred_url":"https://api.github.com/users/unosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unosk/subscriptions","organizations_url":"https://api.github.com/users/unosk/orgs","repos_url":"https://api.github.com/users/unosk/repos","events_url":"https://api.github.com/users/unosk/events{/privacy}","received_events_url":"https://api.github.com/users/unosk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-10-08T14:43:41Z","performed_via_github_app":null},{"id":4260976203,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQyNjA5NzYyMDM=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/4260976203","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"70828da732afbd9085c44676eb65502d45ab8d8c","commit_url":"https://api.github.com/repos/heartcombo/devise/commits/70828da732afbd9085c44676eb65502d45ab8d8c","created_at":"2021-01-28T13:04:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/769038801","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-769038801","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":769038801,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTAzODgwMQ==","user":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T13:04:45Z","updated_at":"2021-01-28T13:04:45Z","body":"Cross posting https://github.com/heartcombo/devise/commit/70828da732afbd9085c44676eb65502d45ab8d8c#commitcomment-46435559 for my future reference:\r\n\r\n> Thank you! I'm using Rails 6.0 with Devise 4.7.3 and I introduced I18n as it is recommended in the Rails I18n guide, with around_action :switch_locale in ApplicationController. I also followed the advice from https://github.com/heartcombo/devise/wiki/How-To:--Redirect-with-locale-after-authentication-failure .\r\n> \r\n> Excerpt from routes:\r\n> ![image](https://user-images.githubusercontent.com/801116/106029183-20377680-60cd-11eb-973c-9261b6487f20.png)\r\n> \r\n> The i18n always works fine when a route is called directly, no matter whether a user is logged-in, not logged in, or visiting the login page. See this set of tests:\r\n> [i18n.feature.txt](https://github.com/heartcombo/devise/files/5881987/i18n.feature.txt)\r\n> \r\n> The only scenario that fails is \"Locale persists after Devise redirects as Forbidden\", so when a non-logged in user tries to access a page that is limited to logged-in users and Devise redirects to the login page.\r\n> \r\n> After some tinkering today, namely inserting\r\n> ```\r\n> locale = helpers.get_locale_from_path(session[:user_return_to])\r\n> I18n.locale = locale if locale\r\n> ```\r\n> into SessionsController 'new' method, the login page displays in the correct language, too, but the flash message \"You need to sign in or sign up before continuing.\" (line 21 of the test file) still shows in the wrong language. And on the whole this solution seems quite hacky - shouldn't Devise support i18n out of the box??\r\n> ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/769038801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/848239423","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-848239423","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":848239423,"node_id":"MDEyOklzc3VlQ29tbWVudDg0ODIzOTQyMw==","user":{"login":"pil0u","id":8350914,"node_id":"MDQ6VXNlcjgzNTA5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8350914?v=4","gravatar_id":"","url":"https://api.github.com/users/pil0u","html_url":"https://github.com/pil0u","followers_url":"https://api.github.com/users/pil0u/followers","following_url":"https://api.github.com/users/pil0u/following{/other_user}","gists_url":"https://api.github.com/users/pil0u/gists{/gist_id}","starred_url":"https://api.github.com/users/pil0u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pil0u/subscriptions","organizations_url":"https://api.github.com/users/pil0u/orgs","repos_url":"https://api.github.com/users/pil0u/repos","events_url":"https://api.github.com/users/pil0u/events{/privacy}","received_events_url":"https://api.github.com/users/pil0u/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-25T20:31:56Z","updated_at":"2021-05-25T20:31:56Z","body":"I am working on a new Rails app, I just installed `devise-i18n` and generated `:en` and `:fr` views.\r\n\r\nThis is my `application_controller.rb`, taken from [Rails i18n API guide](https://guides.rubyonrails.org/i18n.html#managing-the-locale-across-requests), for which error messages seem to be sent with the *default locale*:\r\n``` ruby\r\nclass ApplicationController < ActionController::Base\r\n  around_action :switch_locale\r\n\r\n  def switch_locale(&action)\r\n    locale = params[:locale] || I18n.default_locale\r\n    I18n.with_locale(locale, &action)\r\n  end\r\n\r\n  def default_url_options\r\n    { locale: I18n.locale }\r\n  end\r\nend\r\n```\r\nThis is the `application_controller.rb` that seems to solve the problem:\r\n``` ruby\r\nclass ApplicationController < ActionController::Base\r\n  before_action :switch_locale\r\n\r\n  def switch_locale\r\n    I18n.locale = params[:locale] || I18n.default_locale\r\n  end\r\n\r\n  def default_url_options\r\n    { locale: I18n.locale }\r\n  end\r\nend\r\n```\r\n\r\nI am very new to i18n, but my current feelings are:\r\n- having an error message in the wrong language (or any message at all) is really bad UX\r\n- not using `with_locale` could lead to leakage issues\r\n\r\nWhat should I do? What is the Rails/Ruby/Devise/i18n way to handle this?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/848239423/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pil0u","id":8350914,"node_id":"MDQ6VXNlcjgzNTA5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8350914?v=4","gravatar_id":"","url":"https://api.github.com/users/pil0u","html_url":"https://github.com/pil0u","followers_url":"https://api.github.com/users/pil0u/followers","following_url":"https://api.github.com/users/pil0u/following{/other_user}","gists_url":"https://api.github.com/users/pil0u/gists{/gist_id}","starred_url":"https://api.github.com/users/pil0u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pil0u/subscriptions","organizations_url":"https://api.github.com/users/pil0u/orgs","repos_url":"https://api.github.com/users/pil0u/repos","events_url":"https://api.github.com/users/pil0u/events{/privacy}","received_events_url":"https://api.github.com/users/pil0u/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/848246361","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-848246361","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":848246361,"node_id":"MDEyOklzc3VlQ29tbWVudDg0ODI0NjM2MQ==","user":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-25T20:42:50Z","updated_at":"2021-05-25T20:43:15Z","body":"@pil0u using `I18n.with_locale` is definitely the ideal here for the long run, but I believe using `I18n.locale = `shouldn't be a problem if it's _always_ set before requests. See this paragraph from the I18n Guide:\r\n\r\n> I18n.locale can leak into subsequent requests served by the same thread/process if it is not consistently set in every controller.\r\n\r\nYou could try my branch: https://github.com/heartcombo/devise/compare/ca-fix-i18n-locale-failure-app (which I haven't been able to wrap up, but just updated it on top of current master), and see if that works for you while still using `I18n.with_locale` as recommended. I'll try to work on it next, see if I can get all the tests in place to push a fix for this to master.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/848246361/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4795130369,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDc5NTEzMDM2OQ==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/4795130369","actor":{"login":"pil0u","id":8350914,"node_id":"MDQ6VXNlcjgzNTA5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8350914?v=4","gravatar_id":"","url":"https://api.github.com/users/pil0u","html_url":"https://github.com/pil0u","followers_url":"https://api.github.com/users/pil0u/followers","following_url":"https://api.github.com/users/pil0u/following{/other_user}","gists_url":"https://api.github.com/users/pil0u/gists{/gist_id}","starred_url":"https://api.github.com/users/pil0u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pil0u/subscriptions","organizations_url":"https://api.github.com/users/pil0u/orgs","repos_url":"https://api.github.com/users/pil0u/repos","events_url":"https://api.github.com/users/pil0u/events{/privacy}","received_events_url":"https://api.github.com/users/pil0u/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-25T20:42:50Z","performed_via_github_app":null},{"id":4795130371,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3OTUxMzAzNzE=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/4795130371","actor":{"login":"pil0u","id":8350914,"node_id":"MDQ6VXNlcjgzNTA5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8350914?v=4","gravatar_id":"","url":"https://api.github.com/users/pil0u","html_url":"https://github.com/pil0u","followers_url":"https://api.github.com/users/pil0u/followers","following_url":"https://api.github.com/users/pil0u/following{/other_user}","gists_url":"https://api.github.com/users/pil0u/gists{/gist_id}","starred_url":"https://api.github.com/users/pil0u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pil0u/subscriptions","organizations_url":"https://api.github.com/users/pil0u/orgs","repos_url":"https://api.github.com/users/pil0u/repos","events_url":"https://api.github.com/users/pil0u/events{/privacy}","received_events_url":"https://api.github.com/users/pil0u/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-25T20:42:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/907072784","html_url":"https://github.com/heartcombo/devise/issues/5247#issuecomment-907072784","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/5247","id":907072784,"node_id":"IC_kwDOAAS2Is42ENUQ","user":{"login":"grk","id":34018,"node_id":"MDQ6VXNlcjM0MDE4","avatar_url":"https://avatars.githubusercontent.com/u/34018?v=4","gravatar_id":"","url":"https://api.github.com/users/grk","html_url":"https://github.com/grk","followers_url":"https://api.github.com/users/grk/followers","following_url":"https://api.github.com/users/grk/following{/other_user}","gists_url":"https://api.github.com/users/grk/gists{/gist_id}","starred_url":"https://api.github.com/users/grk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grk/subscriptions","organizations_url":"https://api.github.com/users/grk/orgs","repos_url":"https://api.github.com/users/grk/repos","events_url":"https://api.github.com/users/grk/events{/privacy}","received_events_url":"https://api.github.com/users/grk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T09:44:11Z","updated_at":"2021-08-27T09:44:11Z","body":"@carlosantoniodasilva just ran into this exact issue and I think your branch has the correct approach to solving this. Did you make any further progress, or perhaps found a better solution?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/907072784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"grk","id":34018,"node_id":"MDQ6VXNlcjM0MDE4","avatar_url":"https://avatars.githubusercontent.com/u/34018?v=4","gravatar_id":"","url":"https://api.github.com/users/grk","html_url":"https://github.com/grk","followers_url":"https://api.github.com/users/grk/followers","following_url":"https://api.github.com/users/grk/following{/other_user}","gists_url":"https://api.github.com/users/grk/gists{/gist_id}","starred_url":"https://api.github.com/users/grk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grk/subscriptions","organizations_url":"https://api.github.com/users/grk/orgs","repos_url":"https://api.github.com/users/grk/repos","events_url":"https://api.github.com/users/grk/events{/privacy}","received_events_url":"https://api.github.com/users/grk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5217627573,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTIxNzYyNzU3Mw==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/5217627573","actor":{"login":"carlosantoniodasilva","id":26328,"node_id":"MDQ6VXNlcjI2MzI4","avatar_url":"https://avatars.githubusercontent.com/u/26328?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosantoniodasilva","html_url":"https://github.com/carlosantoniodasilva","followers_url":"https://api.github.com/users/carlosantoniodasilva/followers","following_url":"https://api.github.com/users/carlosantoniodasilva/following{/other_user}","gists_url":"https://api.github.com/users/carlosantoniodasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosantoniodasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosantoniodasilva/subscriptions","organizations_url":"https://api.github.com/users/carlosantoniodasilva/orgs","repos_url":"https://api.github.com/users/carlosantoniodasilva/repos","events_url":"https://api.github.com/users/carlosantoniodasilva/events{/privacy}","received_events_url":"https://api.github.com/users/carlosantoniodasilva/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-08-27T09:44:12Z","performed_via_github_app":null}]