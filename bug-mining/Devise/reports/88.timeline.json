[{"id":9828238,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk4MjgyMzg=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/9828238","actor":{"login":"mreinsch","id":33982,"node_id":"MDQ6VXNlcjMzOTgy","avatar_url":"https://avatars.githubusercontent.com/u/33982?v=4","gravatar_id":"","url":"https://api.github.com/users/mreinsch","html_url":"https://github.com/mreinsch","followers_url":"https://api.github.com/users/mreinsch/followers","following_url":"https://api.github.com/users/mreinsch/following{/other_user}","gists_url":"https://api.github.com/users/mreinsch/gists{/gist_id}","starred_url":"https://api.github.com/users/mreinsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mreinsch/subscriptions","organizations_url":"https://api.github.com/users/mreinsch/orgs","repos_url":"https://api.github.com/users/mreinsch/repos","events_url":"https://api.github.com/users/mreinsch/events{/privacy}","received_events_url":"https://api.github.com/users/mreinsch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-02-20T05:12:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/4049232","html_url":"https://github.com/heartcombo/devise/issues/1666#issuecomment-4049232","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1666","id":4049232,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDkyMzI=","user":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-20T07:05:42Z","updated_at":"2012-02-20T07:05:42Z","body":"It is weird that it returns the user is authenticated but it doesn't return a user. Are you able to provide a test case? It doesn't need to be an acceptance one, but a controller one is fine.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/4049232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9830655,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk4MzA2NTU=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/9830655","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-02-20T07:05:42Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/4079506","html_url":"https://github.com/heartcombo/devise/issues/1666#issuecomment-4079506","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1666","id":4079506,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzk1MDY=","user":{"login":"nickveys","id":135576,"node_id":"MDQ6VXNlcjEzNTU3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/135576?v=4","gravatar_id":"","url":"https://api.github.com/users/nickveys","html_url":"https://github.com/nickveys","followers_url":"https://api.github.com/users/nickveys/followers","following_url":"https://api.github.com/users/nickveys/following{/other_user}","gists_url":"https://api.github.com/users/nickveys/gists{/gist_id}","starred_url":"https://api.github.com/users/nickveys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickveys/subscriptions","organizations_url":"https://api.github.com/users/nickveys/orgs","repos_url":"https://api.github.com/users/nickveys/repos","events_url":"https://api.github.com/users/nickveys/events{/privacy}","received_events_url":"https://api.github.com/users/nickveys/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-21T17:27:59Z","updated_at":"2012-02-21T17:27:59Z","body":"@mreinsch Does this happen to you at any time during a session?  Or relatively soon after creating one?  I am also seeing a nil current_user sporatically, so far only in my extension of the registrations_controller.\n\nI can't seem to replicate it in a controller or request spec either.  Only driving it from the browser.  We're using Webrick, devise 2.0.4 (can make it happen in 1.5.3 also), happens on all browsers I've tried (Safari, Chrome, FF).\n\n@josevalim I've watched it happen in the debugger, after login, navigating to a page that uses the registrations_controller, the Warden _perform_authentication method falls through finding the logged in user and runs the strategies (rememberable, etc...) and fails to find anything, results in a nil user and it unwinds from there.  Any tips on where to look in there for clues?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/4079506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nickveys","id":135576,"node_id":"MDQ6VXNlcjEzNTU3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/135576?v=4","gravatar_id":"","url":"https://api.github.com/users/nickveys","html_url":"https://github.com/nickveys","followers_url":"https://api.github.com/users/nickveys/followers","following_url":"https://api.github.com/users/nickveys/following{/other_user}","gists_url":"https://api.github.com/users/nickveys/gists{/gist_id}","starred_url":"https://api.github.com/users/nickveys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickveys/subscriptions","organizations_url":"https://api.github.com/users/nickveys/orgs","repos_url":"https://api.github.com/users/nickveys/repos","events_url":"https://api.github.com/users/nickveys/events{/privacy}","received_events_url":"https://api.github.com/users/nickveys/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9933149,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTkzMzE0OQ==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/9933149","actor":{"login":"mreinsch","id":33982,"node_id":"MDQ6VXNlcjMzOTgy","avatar_url":"https://avatars.githubusercontent.com/u/33982?v=4","gravatar_id":"","url":"https://api.github.com/users/mreinsch","html_url":"https://github.com/mreinsch","followers_url":"https://api.github.com/users/mreinsch/followers","following_url":"https://api.github.com/users/mreinsch/following{/other_user}","gists_url":"https://api.github.com/users/mreinsch/gists{/gist_id}","starred_url":"https://api.github.com/users/mreinsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mreinsch/subscriptions","organizations_url":"https://api.github.com/users/mreinsch/orgs","repos_url":"https://api.github.com/users/mreinsch/repos","events_url":"https://api.github.com/users/mreinsch/events{/privacy}","received_events_url":"https://api.github.com/users/mreinsch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-02-21T17:27:59Z","performed_via_github_app":null},{"id":9933150,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTkzMzE1MA==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/9933150","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-02-21T17:27:59Z","performed_via_github_app":null},{"id":9933151,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk5MzMxNTE=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/9933151","actor":{"login":"nickveys","id":135576,"node_id":"MDQ6VXNlcjEzNTU3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/135576?v=4","gravatar_id":"","url":"https://api.github.com/users/nickveys","html_url":"https://github.com/nickveys","followers_url":"https://api.github.com/users/nickveys/followers","following_url":"https://api.github.com/users/nickveys/following{/other_user}","gists_url":"https://api.github.com/users/nickveys/gists{/gist_id}","starred_url":"https://api.github.com/users/nickveys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickveys/subscriptions","organizations_url":"https://api.github.com/users/nickveys/orgs","repos_url":"https://api.github.com/users/nickveys/repos","events_url":"https://api.github.com/users/nickveys/events{/privacy}","received_events_url":"https://api.github.com/users/nickveys/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-02-21T17:27:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/4091120","html_url":"https://github.com/heartcombo/devise/issues/1666#issuecomment-4091120","issue_url":"https://api.github.com/repos/heartcombo/devise/issues/1666","id":4091120,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTExMjA=","user":{"login":"nickveys","id":135576,"node_id":"MDQ6VXNlcjEzNTU3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/135576?v=4","gravatar_id":"","url":"https://api.github.com/users/nickveys","html_url":"https://github.com/nickveys","followers_url":"https://api.github.com/users/nickveys/followers","following_url":"https://api.github.com/users/nickveys/following{/other_user}","gists_url":"https://api.github.com/users/nickveys/gists{/gist_id}","starred_url":"https://api.github.com/users/nickveys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickveys/subscriptions","organizations_url":"https://api.github.com/users/nickveys/orgs","repos_url":"https://api.github.com/users/nickveys/repos","events_url":"https://api.github.com/users/nickveys/events{/privacy}","received_events_url":"https://api.github.com/users/nickveys/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-02-21T22:48:38Z","updated_at":"2012-02-21T22:48:38Z","body":"@mreinsch Are you using any before_filter that might use current_user?  Perhaps in your ApplicationController?  This is apparently my issue, I'm not sure how exactly it causes the session to lose the user, but if I inspect the session hash, it's definitely gone sometimes, which results in the current_user returning nil, and removing the before_filter clears it up.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/heartcombo/devise/issues/comments/4091120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nickveys","id":135576,"node_id":"MDQ6VXNlcjEzNTU3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/135576?v=4","gravatar_id":"","url":"https://api.github.com/users/nickveys","html_url":"https://github.com/nickveys","followers_url":"https://api.github.com/users/nickveys/followers","following_url":"https://api.github.com/users/nickveys/following{/other_user}","gists_url":"https://api.github.com/users/nickveys/gists{/gist_id}","starred_url":"https://api.github.com/users/nickveys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickveys/subscriptions","organizations_url":"https://api.github.com/users/nickveys/orgs","repos_url":"https://api.github.com/users/nickveys/repos","events_url":"https://api.github.com/users/nickveys/events{/privacy}","received_events_url":"https://api.github.com/users/nickveys/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9963018,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTk2MzAxOA==","url":"https://api.github.com/repos/heartcombo/devise/issues/events/9963018","actor":{"login":"mreinsch","id":33982,"node_id":"MDQ6VXNlcjMzOTgy","avatar_url":"https://avatars.githubusercontent.com/u/33982?v=4","gravatar_id":"","url":"https://api.github.com/users/mreinsch","html_url":"https://github.com/mreinsch","followers_url":"https://api.github.com/users/mreinsch/followers","following_url":"https://api.github.com/users/mreinsch/following{/other_user}","gists_url":"https://api.github.com/users/mreinsch/gists{/gist_id}","starred_url":"https://api.github.com/users/mreinsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mreinsch/subscriptions","organizations_url":"https://api.github.com/users/mreinsch/orgs","repos_url":"https://api.github.com/users/mreinsch/repos","events_url":"https://api.github.com/users/mreinsch/events{/privacy}","received_events_url":"https://api.github.com/users/mreinsch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-02-21T22:48:38Z","performed_via_github_app":null},{"id":10670006,"node_id":"MDExOkNsb3NlZEV2ZW50MTA2NzAwMDY=","url":"https://api.github.com/repos/heartcombo/devise/issues/events/10670006","actor":{"login":"josevalim","id":9582,"node_id":"MDQ6VXNlcjk1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9582?v=4","gravatar_id":"","url":"https://api.github.com/users/josevalim","html_url":"https://github.com/josevalim","followers_url":"https://api.github.com/users/josevalim/followers","following_url":"https://api.github.com/users/josevalim/following{/other_user}","gists_url":"https://api.github.com/users/josevalim/gists{/gist_id}","starred_url":"https://api.github.com/users/josevalim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josevalim/subscriptions","organizations_url":"https://api.github.com/users/josevalim/orgs","repos_url":"https://api.github.com/users/josevalim/repos","events_url":"https://api.github.com/users/josevalim/events{/privacy}","received_events_url":"https://api.github.com/users/josevalim/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"2f6ecc132899d42a1e788d305e38fc464c2f1d3c","commit_url":"https://api.github.com/repos/heartcombo/devise/commits/2f6ecc132899d42a1e788d305e38fc464c2f1d3c","created_at":"2012-03-03T11:09:33Z","state_reason":null,"performed_via_github_app":null}]