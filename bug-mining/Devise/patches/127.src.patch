diff --git a/lib/generators/active_record/devise_generator.rb b/lib/generators/active_record/devise_generator.rb
index 2ab56b3f..7394bd84 100644
--- a/lib/generators/active_record/devise_generator.rb
+++ b/lib/generators/active_record/devise_generator.rb
@@ -83,7 +83,8 @@ RUBY
       end
 
       def postgresql?
-        ActiveRecord::Base.connection.adapter_name.downcase == "postgresql"
+        config = ActiveRecord::Base.configurations[Rails.env]
+        config && config['adapter'] == 'postgresql'
       end
     end
   end
