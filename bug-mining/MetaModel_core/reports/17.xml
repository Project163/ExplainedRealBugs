<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:31:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[METAMODEL-128] Ordering on aggregation value not working</title>
                <link>https://issues.apache.org/jira/browse/METAMODEL-128</link>
                <project id="12314523" key="METAMODEL">Apache MetaModel (Retired)</project>
                    <description>&lt;p&gt;I am using a CSV Data Context example with multiple fields - occurrences, first_name, last_name. &lt;/p&gt;

&lt;p&gt;The query -&lt;br/&gt;
SELECT SUM(persons.csv.occurrences) AS X, persons.csv.first_name FROM ashish.persons.csv GROUP BY persons.csv.first_name ORDER BY X&lt;/p&gt;

&lt;p&gt;This query always orders the results by first_name and not the aggregation value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12786501">METAMODEL-128</key>
            <summary>Ordering on aggregation value not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="narahari92">Hosur Narahari</assignee>
                                    <reporter username="ashishm">Ashish Mukherjee</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Mar 2015 03:54:50 +0000</created>
                <updated>Sun, 12 Apr 2015 08:58:40 +0000</updated>
                            <resolved>Fri, 3 Apr 2015 17:48:19 +0000</resolved>
                                    <version>4.3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14385712" author="kaspersor" created="Sun, 29 Mar 2015 11:24:54 +0000"  >&lt;p&gt;Good catch. If anyone wants to take a stab at it, I just reproduced it using this unittest which is now failing but should pass given a fix (I put it in QueryPostprocessDataContextTest):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testOrderOnAggregationValue() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        MockDataContext dc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MockDataContext(&lt;span class=&quot;code-quote&quot;&gt;&quot;sch&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;tab&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;);

        Query query = dc.parseQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT MAX(baz) AS X FROM tab GROUP BY baz ORDER BY X&quot;&lt;/span&gt;);

        DataSet ds = dc.executeQuery(query);
        
        List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; values = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();

        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (ds.next()) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value = (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) ds.getRow().getValue(0);
            values.add(value);
        }

        ds.close();
        
        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; should be alphabetically sorted
&lt;/span&gt;        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;[hello, world]&quot;&lt;/span&gt;, values.toString());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14386497" author="narahari92" created="Mon, 30 Mar 2015 10:05:59 +0000"  >&lt;p&gt;Hey, I have a fix for this issue at the cost of making SelectItem&apos;s clone() method public from protected. Is it okay or try something else.&lt;/p&gt;</comment>
                            <comment id="14386509" author="kaspersor" created="Mon, 30 Mar 2015 10:19:55 +0000"  >&lt;p&gt;Maybe you can share it (on the review board &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; or as a Pull Request) and then we can have a look. Making the clone method public doesn&apos;t sound too scary to me, but I would be interested in seeing why and how and so on.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://reviews.apache.org/groups/metamodel/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/groups/metamodel/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14386915" author="githubbot" created="Mon, 30 Mar 2015 16:08:02 +0000"  >&lt;p&gt;GitHub user narahari92 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-128&quot; title=&quot;Ordering on aggregation value not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-128&quot;&gt;&lt;del&gt;METAMODEL-128&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Please review the code fix for the mentioned defect. One test case gives false failure because we are comparing query&apos;s string form when an alias of item is used. I have modified that.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/narahari92/metamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/narahari92/metamodel&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #13&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4b7ade730734038503d29c5157fb842934f511a3&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-25T15:59:14Z&lt;/p&gt;

&lt;p&gt;    changing select(expression) method of Query to support multiple columns and expressions in single string&lt;/p&gt;

&lt;p&gt;commit a6684b9dde12e7766612a58940ab951bcf4f48c9&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-26T14:53:20Z&lt;/p&gt;

&lt;p&gt;    change to select(expression) method of Query to have multiple expression in single method&lt;/p&gt;

&lt;p&gt;commit 3436ef2bb487311ea563e0bab5e8b5986ec52327&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-26T14:57:31Z&lt;/p&gt;

&lt;p&gt;    Unit test for issue &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-126&quot; title=&quot;Issue using select all (*)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-126&quot;&gt;&lt;del&gt;METAMODEL-126&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;commit 6b13a57033c5e84f7f635c858d9531992e8b2780&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-28T15:38:53Z&lt;/p&gt;

&lt;p&gt;    corrected the exprected and actual parameters location in method signature&lt;/p&gt;

&lt;p&gt;commit 724bdc7a3a70fb70112b05165ee389d0b13d573a&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-29T05:20:07Z&lt;/p&gt;

&lt;p&gt;    refactored select(expression) method of Query&lt;/p&gt;

&lt;p&gt;commit 9238e8c4947385db8c046ef1e86cf6d90acf2ab2&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-29T13:24:03Z&lt;/p&gt;

&lt;p&gt;    merging&lt;/p&gt;

&lt;p&gt;commit a46b432a5fa0b326ab400e4c3510b61214152d79&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-30T15:20:51Z&lt;/p&gt;

&lt;p&gt;    &quot;Regular merge&quot;Merge remote-tracking branch &apos;upstream/master&apos;&lt;/p&gt;

&lt;p&gt;commit 04f36b081cf9a657fb9462f9e9a87bb0c27ca284&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-30T15:42:36Z&lt;/p&gt;

&lt;p&gt;    Fix for defect &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-128&quot; title=&quot;Ordering on aggregation value not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-128&quot;&gt;&lt;del&gt;METAMODEL-128&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;commit 9b8f9f7d2d38bf8bdcdd7b2d15bee89d494c27a6&lt;br/&gt;
Author: Hosur Narahari &amp;lt;hnr1992@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-03-30T15:46:31Z&lt;/p&gt;

&lt;p&gt;    Fix for defect &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-128&quot; title=&quot;Ordering on aggregation value not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-128&quot;&gt;&lt;del&gt;METAMODEL-128&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14387004" author="githubbot" created="Mon, 30 Mar 2015 17:12:19 +0000"  >&lt;p&gt;Github user kaspersorensen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#discussion_r27410445&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#discussion_r27410445&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: core/src/main/java/org/apache/metamodel/query/parser/SelectItemParser.java &amp;#8212;&lt;br/&gt;
    @@ -160,6 +164,14 @@ public SelectItem findSelectItem(String expression) throws MultipleSelectItemsPa&lt;br/&gt;
                     return new SelectItem(subQuerySelectItem, fromItem);&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
    +        &lt;br/&gt;
    +        //if the expression is alias of some select item defined return clone of that select item&lt;br/&gt;
    +        List&amp;lt;SelectItem&amp;gt; allSelectItems = MetaModelHelper.getAllSelectItems(_query);&lt;br/&gt;
    +        for(SelectItem selectItem : allSelectItems) {&lt;br/&gt;
    +        	if(selectItem.getAlias() != null &amp;amp;&amp;amp; selectItem.getAlias().equals(expressionCopy)) {&lt;br/&gt;
    +        		return selectItem.clone();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Do we need to return the clone? Why not return the same select item? If it is referred to by alias (like a kind of pass by reference) then I think it makes sense to keep the same reference item and not a copy.&lt;/p&gt;</comment>
                            <comment id="14387015" author="githubbot" created="Mon, 30 Mar 2015 17:21:30 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-87758643&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-87758643&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I thought returning the same reference might prove risky and have unexpected behavior. But yes, what you said makes sense.&lt;/p&gt;</comment>
                            <comment id="14387018" author="githubbot" created="Mon, 30 Mar 2015 17:23:48 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-87759734&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-87759734&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes normally I would also be in favor of making a copy. But in this case it is really a &quot;reference&quot; and not an independent item. So if you change that then I think we can make the general change a lot less - then you don&apos;t need to make the clone method public and you don&apos;t need to change the existing unittest.&lt;/p&gt;</comment>
                            <comment id="14387028" author="githubbot" created="Mon, 30 Mar 2015 17:27:21 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-87761146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-87761146&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    No that existing unit test still changes because the alias name in query will be replaced by &amp;lt;tablename&amp;gt;.&amp;lt;columnName&amp;gt;.i.e. &quot;foobarbaz&quot; gets replaced by &quot;a.foo&quot;&lt;/p&gt;</comment>
                            <comment id="14387029" author="githubbot" created="Mon, 30 Mar 2015 17:27:43 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-87761276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-87761276&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Anyhow I&apos;ll make that change you suggested&lt;/p&gt;</comment>
                            <comment id="14387057" author="githubbot" created="Mon, 30 Mar 2015 17:41:36 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-87767075&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-87767075&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi, I have made the change to return same item instead of clone.&lt;/p&gt;</comment>
                            <comment id="14387268" author="githubbot" created="Mon, 30 Mar 2015 19:27:40 +0000"  >&lt;p&gt;Github user kaspersorensen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#discussion_r27423309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#discussion_r27423309&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: core/src/main/java/org/apache/metamodel/query/parser/SelectItemParser.java &amp;#8212;&lt;br/&gt;
    @@ -160,6 +164,14 @@ public SelectItem findSelectItem(String expression) throws MultipleSelectItemsPa&lt;br/&gt;
                     return new SelectItem(subQuerySelectItem, fromItem);&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
    +        &lt;br/&gt;
    +        //if the expression is alias of some select item defined return clone of that select item&lt;br/&gt;
    +        List&amp;lt;SelectItem&amp;gt; allSelectItems = MetaModelHelper.getAllSelectItems(_query);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Also reflecting a bit on this ... Do we need to have this getAllSelectItems(...) method?&lt;/p&gt;

&lt;p&gt;    What I mean is, could there be aliased select items anywhere else than in the SELECT clause? I cannot imagine it really ... For instance in WHERE clause I have never seen anything a la:&lt;/p&gt;

&lt;p&gt;    SELECT ... FROM ... WHERE name AS n = &quot;Kasper&quot;&lt;/p&gt;

&lt;p&gt;    If we assume that this never happens then you can get rid of the getAllSelectItems(...) method which is already a bit greedy (makes new lists etc.). If I am wrong about the assumption (I seriously am in doubt) then I think the solution is good!&lt;/p&gt;</comment>
                            <comment id="14388004" author="githubbot" created="Tue, 31 Mar 2015 05:08:24 +0000"  >&lt;p&gt;Github user ashish-m-yh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#discussion_r27453436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#discussion_r27453436&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: core/src/main/java/org/apache/metamodel/query/parser/SelectItemParser.java &amp;#8212;&lt;br/&gt;
    @@ -160,6 +164,14 @@ public SelectItem findSelectItem(String expression) throws MultipleSelectItemsPa&lt;br/&gt;
                     return new SelectItem(subQuerySelectItem, fromItem);&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
    +        &lt;br/&gt;
    +        //if the expression is alias of some select item defined return clone of that select item&lt;br/&gt;
    +        List&amp;lt;SelectItem&amp;gt; allSelectItems = MetaModelHelper.getAllSelectItems(_query);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Isn&apos;t a SELECT in WHERE clause possible in case of sub-select?&lt;/p&gt;</comment>
                            <comment id="14388099" author="githubbot" created="Tue, 31 Mar 2015 06:17:58 +0000"  >&lt;p&gt;Github user kaspersorensen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#discussion_r27455199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#discussion_r27455199&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: core/src/main/java/org/apache/metamodel/query/parser/SelectItemParser.java &amp;#8212;&lt;br/&gt;
    @@ -160,6 +164,14 @@ public SelectItem findSelectItem(String expression) throws MultipleSelectItemsPa&lt;br/&gt;
                     return new SelectItem(subQuerySelectItem, fromItem);&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
    +        &lt;br/&gt;
    +        //if the expression is alias of some select item defined return clone of that select item&lt;br/&gt;
    +        List&amp;lt;SelectItem&amp;gt; allSelectItems = MetaModelHelper.getAllSelectItems(_query);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Well actually MetaModel&apos;s query API still does not support sub-select, so no. But even if it did, would it make sense to have an alias in the subquery that is then referred to in the outer query? At least then it would also be qualified I think, a la:&lt;/p&gt;

&lt;p&gt;    SELECT ..., (SELECT name as n FROM ...) AS q FROM ... WHERE q.n = &apos;foo&apos;&lt;/p&gt;

&lt;p&gt;    But to summarize: I don&apos;t think this is a scenario we need to cover at all since only regular subqueries (in the FROM clause) is supported in MetaModel at the moment.&lt;/p&gt;</comment>
                            <comment id="14388168" author="githubbot" created="Tue, 31 Mar 2015 07:18:52 +0000"  >&lt;p&gt;Github user ashish-m-yh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#discussion_r27457191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#discussion_r27457191&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: core/src/main/java/org/apache/metamodel/query/parser/SelectItemParser.java &amp;#8212;&lt;br/&gt;
    @@ -160,6 +164,14 @@ public SelectItem findSelectItem(String expression) throws MultipleSelectItemsPa&lt;br/&gt;
                     return new SelectItem(subQuerySelectItem, fromItem);&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
    +        &lt;br/&gt;
    +        //if the expression is alias of some select item defined return clone of that select item&lt;br/&gt;
    +        List&amp;lt;SelectItem&amp;gt; allSelectItems = MetaModelHelper.getAllSelectItems(_query);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Sounds good then. &lt;/p&gt;</comment>
                            <comment id="14388336" author="githubbot" created="Tue, 31 Mar 2015 10:02:50 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88022092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88022092&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fine I&apos;ll remove that getAllSelectItems() method but isn&apos;t subquery in from and where class there in to do list of MetaModel. I remember seeing it in jira for improvement.&lt;/p&gt;</comment>
                            <comment id="14388340" author="githubbot" created="Tue, 31 Mar 2015 10:08:06 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88024935&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88024935&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    SELECT... FROM (SELECT name as n FROM ...) as q where n=&apos;foo&apos;;  is perfectly valid but will fail if we don&apos;t consider select items of other clauses if and when we support sub queries for from and where clause in MetaModel.&lt;/p&gt;</comment>
                            <comment id="14388843" author="githubbot" created="Tue, 31 Mar 2015 17:02:52 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88172276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88172276&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hey, I noticed one thing just now. We can actually use subqueries in from clause at least for JdbcDataContext. Below is the query I ran which was successful.&lt;/p&gt;

&lt;p&gt;    Query query = dataContext.parse(&quot;SELECT password as X from (select username,password from AMASS_USER)  S&quot;);&lt;/p&gt;</comment>
                            <comment id="14389567" author="githubbot" created="Tue, 31 Mar 2015 22:54:44 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88277332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88277332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Correct, that&apos;s the one type of subquery we support. One that is in the FROM clause. We don&apos;t support it in select or where (currently). &lt;/p&gt;</comment>
                            <comment id="14389947" author="githubbot" created="Wed, 1 Apr 2015 03:50:11 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88341746&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88341746&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    We can also use subqueries in where clause. I successfully executed below query.&lt;/p&gt;

&lt;p&gt;    Query query = context.parseQuery(&quot;select username from AMASS_USER where password in (select password from AMASS_USER where enabled=1)&quot;);&lt;/p&gt;

&lt;p&gt;    Considering all the places where we can have alias name for columns wouldn&apos;t it be better to have the getAllSelectItems() method. Or shall I still remove the method and use only items from select clause.&lt;/p&gt;</comment>
                            <comment id="14390180" author="githubbot" created="Wed, 1 Apr 2015 07:56:20 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88384811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88384811&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I believe that where clause will only work on JDBC because it gets carried along as one big expression. But MM unfortunately will not understand it so no select items will be there anyway. Hmm how about then making a getSelectItemByAlias(...) method. We could start with just items from SELECT but could eventually expand it if subquery support increases. &lt;/p&gt;</comment>
                            <comment id="14390378" author="githubbot" created="Wed, 1 Apr 2015 10:59:11 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88439981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88439981&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ya.. that sounds like a good plan.. I&apos;ll make the necessary changes and commit it today&lt;/p&gt;</comment>
                            <comment id="14390842" author="githubbot" created="Wed, 1 Apr 2015 15:44:14 +0000"  >&lt;p&gt;Github user narahari92 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13#issuecomment-88528119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13#issuecomment-88528119&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Committed with recommended changes...&lt;/p&gt;</comment>
                            <comment id="14394759" author="githubbot" created="Fri, 3 Apr 2015 17:46:36 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/13&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14394763" author="kaspersor" created="Fri, 3 Apr 2015 17:48:19 +0000"  >&lt;p&gt;Your fix has been pushed! Thank you very much.&lt;/p&gt;

&lt;p&gt;In case you&apos;re wondering about very small changes from your patch to the committed: I took the liberty of doing a bit of code formatting since there was some unecesary changes from spaces to tabs etc.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27i3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>