<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:31:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[METAMODEL-1103] WildcardPattern not anchored to beginning of string.</title>
                <link>https://issues.apache.org/jira/browse/METAMODEL-1103</link>
                <project id="12314523" key="METAMODEL">Apache MetaModel (Retired)</project>
                    <description>&lt;p&gt;When filtering using LIKE in &lt;tt&gt;FilterItem.evaluate()&lt;/tt&gt; (really &lt;tt&gt;WildcardPattern&lt;/tt&gt;) is not properly anchored to the beginning of the string, which is not consistent with SQL LIKE&lt;/p&gt;

&lt;p&gt;Given the table:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;foobar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;bar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;oba&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;And the queries:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; liketest &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;oba%&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; liketest &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;PostgreSQL and MS SQL will return the results:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;oba&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;and &lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;bar&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;But MetaModel (on a &lt;tt&gt;QueryPostprocessDataContext&lt;/tt&gt; based source) will return the results:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;foobar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;oba&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;and &lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;foobar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;oba&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;(Marked critical since it is means errors that are easily missed when looking the results over, but can sneak corruptions in later)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12988725">METAMODEL-1103</key>
            <summary>WildcardPattern not anchored to beginning of string.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="losd">Dennis Du Kr&#248;ger</assignee>
                                    <reporter username="losd">Dennis Du Kr&#248;ger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jul 2016 14:03:36 +0000</created>
                <updated>Fri, 15 Jul 2016 23:05:43 +0000</updated>
                            <resolved>Fri, 15 Jul 2016 23:05:43 +0000</resolved>
                                    <version>4.5.3</version>
                                    <fixVersion>4.5.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15372978" author="githubbot" created="Tue, 12 Jul 2016 14:40:09 +0000"  >&lt;p&gt;GitHub user LosD opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/115&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Anchor WildcardPattern to start&lt;/p&gt;

&lt;p&gt;    This makes sure the `WildcardPattern` anchors its test to the start of the string, not only the end.&lt;/p&gt;

&lt;p&gt;    This comes with a minor performance penalty (quick test said 5-10%), but I think correctness trumps speed here.&lt;/p&gt;

&lt;p&gt;    I would have liked to compare speed with pre-compiled regexes (`Pattern.quote()` the operand, replace `%` with `.*?` and anchor it with `^` and `$`), but if the LIKE operand is inside a `SelectItem`, that would mean compiling a new regex pattern for every row, which would probably be &lt;em&gt;very&lt;/em&gt; expensive, so I opted not to try. There seem to be some similar optimization of the IN operator, so I might be wrong, though.&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1103&quot; title=&quot;WildcardPattern not anchored to beginning of string.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1103&quot;&gt;&lt;del&gt;METAMODEL-1103&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/LosD/metamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/LosD/metamodel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1103&quot; title=&quot;WildcardPattern not anchored to beginning of string.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1103&quot;&gt;&lt;del&gt;METAMODEL-1103&lt;/del&gt;&lt;/a&gt;/anchor-string-start&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/115.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/115.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #115&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e993e9483a9daf0e0f603362d31fbc231a344ab7&lt;br/&gt;
Author: Dennis Du Kr&#248;ger &amp;lt;d@hp23c.dk&amp;gt;&lt;br/&gt;
Date:   2016-07-12T14:28:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1103&quot; title=&quot;WildcardPattern not anchored to beginning of string.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1103&quot;&gt;&lt;del&gt;METAMODEL-1103&lt;/del&gt;&lt;/a&gt;: Anchor WildcardPattern to start&lt;/p&gt;

&lt;p&gt;    This makes sure the WildcardPattern anchors its test to the start of&lt;br/&gt;
    the string, not only the end.&lt;/p&gt;

&lt;p&gt;    This comes with a minor performance penalty (quick test said 5-10% ),&lt;br/&gt;
    but I think correctness trumps speed here.&lt;/p&gt;

&lt;p&gt;    I would have liked to compare speed with pre-compiled regexes&lt;br/&gt;
    (`Pattern.quote()` the operand, replace `%` with `.*?` and anchor it&lt;br/&gt;
    with `^` and `$`), but if the LIKE operand is inside a SelectItem,&lt;br/&gt;
    that would mean compiling a new regex pattern for every row, which&lt;br/&gt;
    would probably be &lt;em&gt;very&lt;/em&gt; expensive, so I opted not to try. There seem&lt;br/&gt;
    to be some similar optimization of the IN operator, so I might be&lt;br/&gt;
    wrong.&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1103&quot; title=&quot;WildcardPattern not anchored to beginning of string.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1103&quot;&gt;&lt;del&gt;METAMODEL-1103&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15380277" author="githubbot" created="Fri, 15 Jul 2016 23:02:33 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/115&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ah, &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1103&quot; title=&quot;WildcardPattern not anchored to beginning of string.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1103&quot;&gt;&lt;del&gt;METAMODEL-1103&lt;/del&gt;&lt;/a&gt; ... I&apos;ll merge then.&lt;/p&gt;</comment>
                            <comment id="15380281" author="githubbot" created="Fri, 15 Jul 2016 23:05:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/115&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30un3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>