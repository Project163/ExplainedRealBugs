{"project_id": "ActiveMQ", "bug_id": "1", "source_type": "jira", "label": "Other", "llm_input_text": "Title: PooledConnection seems to close all of the sessions when the connection is closed\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nfixed now"}
{"project_id": "ActiveMQ", "bug_id": "2", "source_type": "jira", "label": "Logic/Workflow", "llm_input_text": "Title: bug in redelivery logic in JMS client\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nThanks for fixing this Hiram!"}
{"project_id": "ActiveMQ", "bug_id": "3", "source_type": "jira", "label": "Build/Dependency", "llm_input_text": "Title: m2 poms need patches\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nApplied. The patch for systest was not applied since it now compiles under JDk14."}
{"project_id": "ActiveMQ", "bug_id": "4", "source_type": "jira", "label": "Network/Timeout", "llm_input_text": "Title: 2 broker network seems to loose messages\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\ncouldn't find the TwoBrokerTopicSendReceiveLotsOfMessagesUsingTcpTest.java (though only looked in usecases) - basing testing on extended perf test cases at the moment\n---\nI'd forgotten to add it to SVN - here it is now... http://svn.apache.org/repos/asf/incubator/activemq/trunk/assembly/src/test/java/org/apache/activemq/usecases/TwoBrokerTopicSendReceiveLotsOfMessagesUsingTcpTest.java\n---\nTest case now works"}
{"project_id": "ActiveMQ", "bug_id": "5", "source_type": "jira", "label": "Network/Timeout", "llm_input_text": "Title: 2 broker network seems to loose messages\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\ncouldn't find the TwoBrokerTopicSendReceiveLotsOfMessagesUsingTcpTest.java (though only looked in usecases) - basing testing on extended perf test cases at the moment\n---\nI'd forgotten to add it to SVN - here it is now... http://svn.apache.org/repos/asf/incubator/activemq/trunk/assembly/src/test/java/org/apache/activemq/usecases/TwoBrokerTopicSendReceiveLotsOfMessagesUsingTcpTest.java\n---\nTest case now works"}
{"project_id": "ActiveMQ", "bug_id": "6", "source_type": "jira", "label": "Network/Timeout", "llm_input_text": "Title: 2 broker network seems to loose messages\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\ncouldn't find the TwoBrokerTopicSendReceiveLotsOfMessagesUsingTcpTest.java (though only looked in usecases) - basing testing on extended perf test cases at the moment\n---\nI'd forgotten to add it to SVN - here it is now... http://svn.apache.org/repos/asf/incubator/activemq/trunk/assembly/src/test/java/org/apache/activemq/usecases/TwoBrokerTopicSendReceiveLotsOfMessagesUsingTcpTest.java\n---\nTest case now works"}
{"project_id": "ActiveMQ", "bug_id": "7", "source_type": "jira", "label": "Data/Format", "llm_input_text": "Title: discoveryUri not recorded on TransportConnector when JMX in use\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nDiff for BrokerService.java file Can someone checkin for me, my commiter status still not right.\n---\nCommited change to roll forward the discoveryUri to the ManagedTransportConnector"}
{"project_id": "ActiveMQ", "bug_id": "8", "source_type": "jira", "label": "Other", "llm_input_text": "Title: TEST org.apache.activemq.transport.stomp.StompTest FAILED\n\nDescription:\nThis file is an XML representation of an issue\n\n"}
{"project_id": "ActiveMQ", "bug_id": "9", "source_type": "jira", "label": "Env/Compatibility", "llm_input_text": "Title: Conflicts between execution script and o.a.a.broker.Main class\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nI have made reconcilations between the start script for windows and the Main class such that the --extdir option works as expected. Both start scripts have definitions for the use of the SUN remote jmx options, but I left it commented out for user discresionary use. BTW, I set the default port for the process registry to 1616. I found a host that already had a registry open on the default port of 1099 and found I could not start the broker."}
{"project_id": "ActiveMQ", "bug_id": "10", "source_type": "jira", "label": "Other", "llm_input_text": "Title: Demand based publishing does not work anymore\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nFixed. Make sure you build a fresh SNAPSHOT to get the fix."}
{"project_id": "ActiveMQ", "bug_id": "11", "source_type": "jira", "label": "Build/Dependency", "llm_input_text": "Title: ActiveMQ is not JCA1.5 compliant\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nNeed to validate any fix works with weblogic server 9.0.1\n---\nJonas, I just commited changes to activemq 4 that add the missing bits that WL was complaining about. Could you verify that it now works under WL 9.0.1?? Thanks!\n---\nwe'll start testing on it\n---\nWas Able to replicate the issue on Weblogic 9.0 using AMQ M4. Tested it against the latest snapshot from SVN head and the issues were resolved. We did noticed though that default configuration of the ra.xml (&lt;connection-impl-class&gt;) is pointing to a class that no longer exist on the rar (org.apache.activemq.ra.JMSConnectionProxy)\n---\nGot further this time, but some interfaces still don't appear to be implemented. Weblogic 9.0.1 log extract follows... ####&lt;31-Jan-2006 16:10:45 o'clock GMT&gt; &lt;Error&gt; &lt;Deployer&gt; &lt;RARHAS03&gt; &lt;raserver&gt; &lt; &#91;STANDBY&#93; ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1138723845681&gt; &lt;BEA-149202&gt; &lt;Encountered an exception while attempting to commit the 7 task for the application 'rartest'.&gt; ####&lt;31-Jan-2006 16:10:45 o'clock GMT&gt; &lt;Warning&gt; &lt;Deployer&gt; &lt;RARHAS03&gt; &lt;raserver&gt; &lt; &#91;ACTIVE&#93; ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1138723845713&gt; &lt;BEA-149004&gt; &lt;Failures were detected while initiating start task for application 'rartest'.&gt; ####&lt;31-Jan-2006 16:10:45 o'clock GMT&gt; &lt;Warning&gt; &lt;Deployer&gt; &lt;RARHAS03&gt; &lt;raserver&gt; &lt; &#91;ACTIVE&#93; ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1138723845714&gt; &lt;BEA-149078&gt; &lt;Stack trace for message 149004 weblogic.application.ModuleException: weblogic.connector.exception.RACommonException: There are 1 nested errors: javax.naming.NamingException [Root exception is java.rmi.RemoteException: org.apache.activemq.ActiveMQPrefetchPolicy; nested exception is: java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy] at weblogic.jndi.internal.ExceptionTranslator.toNamingException(ExceptionTranslator.java:94) at weblogic.jndi.internal.WLContextImpl.translateException(WLContextImpl.java:421) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:295) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:130) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:250) at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:785) at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1174) at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:410) at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:113) Caused by: java.rmi.RemoteException: org.apache.activemq.ActiveMQPrefetchPolicy; nested exception is: java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy at weblogic.jndi.internal.WLEventContextImpl.copyObject(WLEventContextImpl.java:395) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:289) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:130) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:250) at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:785) at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1174) at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:410) at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:113) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:190) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$200(DeploymentReceiverCallbackDeliverer.java:12) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$3.run(DeploymentReceiverCallbackDeliverer.java:76) at weblogic.work.ServerWorkManagerImpl$WorkAdapterImpl.run(ServerWorkManagerImpl.java:518) at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) at weblogic.work.ExecuteThread.run(ExecuteThread.java:179) Caused by: java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject(Ljava.lang.Object;)V(Unknown Source) at weblogic.rmi.extensions.server.CBVOutputStream.writeObject(CBVOutputStream.java:84) at weblogic.jndi.internal.JNDIHelper.copyObject(JNDIHelper.java:85) at weblogic.jndi.internal.WLEventContextImpl.copyObject(WLEventContextImpl.java:390) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:289) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:292) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:130) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:250) at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:785) at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1174) at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:410) at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:113) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:190) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$200(DeploymentReceiverCallbackDeliverer.java:12) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$3.run(DeploymentReceiverCallbackDeliverer.java:76) at weblogic.work.ServerWorkManagerImpl$WorkAdapterImpl.run(ServerWorkManagerImpl.java:518) at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) at weblogic.work.ExecuteThread.run(ExecuteThread.java:179) java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject(Ljava.lang.Object;)V(Unknown Source) at weblogic.rmi.extensions.server.CBVOutputStream.writeObject(CBVOutputStream.java:84) at weblogic.jndi.internal.JNDIHelper.copyObject(JNDIHelper.java:85) at weblogic.jndi.internal.WLEventContextImpl.copyObject(WLEventContextImpl.java:390) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:289) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) &gt;\n---\nThanks Richard!, we're currently looking into the issue\n---\nWe've committed changes to ActiveMQPrefetchPolicy and RedeliveryPolicy making them Serializable. The NotSerializableException was gone but we encountered these warnings: &lt;Feb 3, 2006 5:05:57 PM CST&gt; &lt;Warning&gt; &lt;EJB&gt; &lt;BEA-010096&gt; &lt;The Message-Driven EJB: EchoMDB is unable to connect to the JMS destination or bind to JCA resource adapter: activemq-ra-4.0-SNAPSHOT.rar. Connection failed after 2 attempts. The MDB will attempt to reconnect/rebind every 10 seconds. This log message will repeat every 600 seconds until the condition clears.&gt; &lt;Feb 3, 2006 5:05:57 PM CST&gt; &lt;Warning&gt; &lt;EJB&gt; &lt;BEA-010221&gt; &lt;The Message-Driven EJB: EchoMDB is unable to bind to the JCA resource adapter: activemq-ra-4.0-SNAPSHOT.rar. The Error was:No deployed ResourceAdapter with adapter JNDI name = 'activemq-ra-4.0-SNAPSHOT.rar' was found.&gt; I noticed this element in activemq-ra-4.0-SNAPSHOT.rar -&gt; weblogic-ra.xml &lt;jndi-name&gt;MyActiveMQRA&lt;/jndi-name&gt; And in rartest-ejbs.jar -&gt; weblogic-ejb-jar.xml &lt;resource-adapter-jndi-name&gt;activemq-ra-4.0-SNAPSHOT.rar&lt;/resource-adapter-jndi-name&gt; In activemq-ra-4.0-SNAPSHOT.rar -&gt; weblogic-ra.xml, I tried changing &lt;jndi-name&gt;MyActiveMQRA&lt;/jndi-name&gt; to &lt;jndi-name&gt;activemq-ra-4.0-SNAPSHOT.rar&lt;/jndi-name&gt; so the 2 JNDI elements would match. The JNDI error was gone but I got new warnings. We're currently looking into these.\n---\nThis is warning mentioned above: &lt;Feb 8, 2006 2:34:12 PM CST&gt; &lt;Warning&gt; &lt;Connector&gt; &lt;BEA-190032&gt; &lt;&lt; MyActiveMQConnectionFactoryJNDI &gt; ResourceAllocationException thrown by resource adapter on call to ManagedConnectionFactory.createManagedConnection(): \"javax.resource.spi.ResourceAdapterInternalException: Failed to create managed connection: java.lang.NullPointerException \"&gt; &lt;Feb 8, 2006 2:34:12 PM CST&gt; &lt;Warning&gt; &lt;Connector&gt; &lt;BEA-190024&gt; &lt;&lt; MyActiveMQConnectionFactoryJNDI &gt; Error making initial connections for pool. Reason: javax.resource.spi.ResourceAdapterInternalException: Failed to create managed connection: java.lang.NullPointerException&gt;\n---\near file state that outputs the error in this comment: http://jira.activemq.org/jira/browse/AMQ-501#action_35520\n---\nHow are we getting on with this one? Any idea if SVN HEAD works or not. A stack trace for the NullPointerException would be handy\n---\nI created the https://svn.apache.org/repos/asf/incubator/activemq/trunk/systest/weblogic-test modules to test MDB and outbund jms connections. They seemed to be working ok. Closing as fixed.\n---\nI am stuck up with this error in weblogic. &lt;&lt; MyActiveMQConnectionFactoryJNDI &gt; Error making initial connections for pool. Reason: javax.resource.spi.ResourceAdapterInternalException: Failed to create managed connection: java.lang.NullPointerException&gt; The following link given by Hiram Chirino does not seem to be active now. On clicking it i get 404 error. \" https://svn.apache.org/repos/asf/incubator/activemq/trunk/systest/weblogic-test \" It would be helpful if the changes to be made to rectify the above mentioned error are mentioned and the link is enabled. Thanks in advance.\n---\ncan you try a later version, say version 5.3.2, this version is known to work ok.\n---\nFWIW, the new location of the weblogic-test is here: https://svn.apache.org/repos/asf/activemq/sandbox/systest/weblogic-test However, I don't know if the systest module has been kept in step with ActiveMQ over the years."}
{"project_id": "ActiveMQ", "bug_id": "12", "source_type": "jira", "label": "Build/Dependency", "llm_input_text": "Title: ActiveMQ is not JCA1.5 compliant\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nNeed to validate any fix works with weblogic server 9.0.1\n---\nJonas, I just commited changes to activemq 4 that add the missing bits that WL was complaining about. Could you verify that it now works under WL 9.0.1?? Thanks!\n---\nwe'll start testing on it\n---\nWas Able to replicate the issue on Weblogic 9.0 using AMQ M4. Tested it against the latest snapshot from SVN head and the issues were resolved. We did noticed though that default configuration of the ra.xml (&lt;connection-impl-class&gt;) is pointing to a class that no longer exist on the rar (org.apache.activemq.ra.JMSConnectionProxy)\n---\nGot further this time, but some interfaces still don't appear to be implemented. Weblogic 9.0.1 log extract follows... ####&lt;31-Jan-2006 16:10:45 o'clock GMT&gt; &lt;Error&gt; &lt;Deployer&gt; &lt;RARHAS03&gt; &lt;raserver&gt; &lt; &#91;STANDBY&#93; ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1138723845681&gt; &lt;BEA-149202&gt; &lt;Encountered an exception while attempting to commit the 7 task for the application 'rartest'.&gt; ####&lt;31-Jan-2006 16:10:45 o'clock GMT&gt; &lt;Warning&gt; &lt;Deployer&gt; &lt;RARHAS03&gt; &lt;raserver&gt; &lt; &#91;ACTIVE&#93; ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1138723845713&gt; &lt;BEA-149004&gt; &lt;Failures were detected while initiating start task for application 'rartest'.&gt; ####&lt;31-Jan-2006 16:10:45 o'clock GMT&gt; &lt;Warning&gt; &lt;Deployer&gt; &lt;RARHAS03&gt; &lt;raserver&gt; &lt; &#91;ACTIVE&#93; ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1138723845714&gt; &lt;BEA-149078&gt; &lt;Stack trace for message 149004 weblogic.application.ModuleException: weblogic.connector.exception.RACommonException: There are 1 nested errors: javax.naming.NamingException [Root exception is java.rmi.RemoteException: org.apache.activemq.ActiveMQPrefetchPolicy; nested exception is: java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy] at weblogic.jndi.internal.ExceptionTranslator.toNamingException(ExceptionTranslator.java:94) at weblogic.jndi.internal.WLContextImpl.translateException(WLContextImpl.java:421) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:295) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:130) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:250) at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:785) at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1174) at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:410) at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:113) Caused by: java.rmi.RemoteException: org.apache.activemq.ActiveMQPrefetchPolicy; nested exception is: java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy at weblogic.jndi.internal.WLEventContextImpl.copyObject(WLEventContextImpl.java:395) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:289) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:130) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:250) at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:785) at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1174) at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:410) at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:113) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:190) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$200(DeploymentReceiverCallbackDeliverer.java:12) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$3.run(DeploymentReceiverCallbackDeliverer.java:76) at weblogic.work.ServerWorkManagerImpl$WorkAdapterImpl.run(ServerWorkManagerImpl.java:518) at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) at weblogic.work.ExecuteThread.run(ExecuteThread.java:179) Caused by: java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject(Ljava.lang.Object;)V(Unknown Source) at weblogic.rmi.extensions.server.CBVOutputStream.writeObject(CBVOutputStream.java:84) at weblogic.jndi.internal.JNDIHelper.copyObject(JNDIHelper.java:85) at weblogic.jndi.internal.WLEventContextImpl.copyObject(WLEventContextImpl.java:390) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:289) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:292) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:130) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:250) at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:785) at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1174) at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:410) at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:113) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:190) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$200(DeploymentReceiverCallbackDeliverer.java:12) at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$3.run(DeploymentReceiverCallbackDeliverer.java:76) at weblogic.work.ServerWorkManagerImpl$WorkAdapterImpl.run(ServerWorkManagerImpl.java:518) at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) at weblogic.work.ExecuteThread.run(ExecuteThread.java:179) java.io.NotSerializableException: org.apache.activemq.ActiveMQPrefetchPolicy at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.defaultWriteFields(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeSerialData(Ljava.lang.Object;Ljava.io.ObjectStreamClass;)V(Unknown Source) at java.io.ObjectOutputStream.writeOrdinaryObject(Ljava.lang.Object;Ljava.io.ObjectStreamClass;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject0(Ljava.lang.Object;Z)V(Unknown Source) at java.io.ObjectOutputStream.writeObject(Ljava.lang.Object;)V(Unknown Source) at weblogic.rmi.extensions.server.CBVOutputStream.writeObject(CBVOutputStream.java:84) at weblogic.jndi.internal.JNDIHelper.copyObject(JNDIHelper.java:85) at weblogic.jndi.internal.WLEventContextImpl.copyObject(WLEventContextImpl.java:390) at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:289) at weblogic.jndi.internal.WLContextImpl.bind(WLContextImpl.java:389) at weblogic.connector.deploy.JNDIHandler.bindRA(JNDIHandler.java:604) at weblogic.connector.common.RAInstanceManager.putRAintoJNDITree(RAInstanceManager.java:1376) at weblogic.connector.common.RAInstanceManager.activate(RAInstanceManager.java:411) at weblogic.connector.deploy.ConnectorModule.activate(ConnectorModule.java:286) at weblogic.application.internal.flow.ModuleListenerInvoker.activate(ModuleListenerInvoker.java:104) at weblogic.application.internal.flow.DeploymentCallbackFlow$2.next(DeploymentCallbackFlow.java:339) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:68) at weblogic.application.internal.flow.DeploymentCallbackFlow.activate(DeploymentCallbackFlow.java:60) at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26) at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:257) at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154) at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:461) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:130) at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:101) &gt;\n---\nThanks Richard!, we're currently looking into the issue\n---\nWe've committed changes to ActiveMQPrefetchPolicy and RedeliveryPolicy making them Serializable. The NotSerializableException was gone but we encountered these warnings: &lt;Feb 3, 2006 5:05:57 PM CST&gt; &lt;Warning&gt; &lt;EJB&gt; &lt;BEA-010096&gt; &lt;The Message-Driven EJB: EchoMDB is unable to connect to the JMS destination or bind to JCA resource adapter: activemq-ra-4.0-SNAPSHOT.rar. Connection failed after 2 attempts. The MDB will attempt to reconnect/rebind every 10 seconds. This log message will repeat every 600 seconds until the condition clears.&gt; &lt;Feb 3, 2006 5:05:57 PM CST&gt; &lt;Warning&gt; &lt;EJB&gt; &lt;BEA-010221&gt; &lt;The Message-Driven EJB: EchoMDB is unable to bind to the JCA resource adapter: activemq-ra-4.0-SNAPSHOT.rar. The Error was:No deployed ResourceAdapter with adapter JNDI name = 'activemq-ra-4.0-SNAPSHOT.rar' was found.&gt; I noticed this element in activemq-ra-4.0-SNAPSHOT.rar -&gt; weblogic-ra.xml &lt;jndi-name&gt;MyActiveMQRA&lt;/jndi-name&gt; And in rartest-ejbs.jar -&gt; weblogic-ejb-jar.xml &lt;resource-adapter-jndi-name&gt;activemq-ra-4.0-SNAPSHOT.rar&lt;/resource-adapter-jndi-name&gt; In activemq-ra-4.0-SNAPSHOT.rar -&gt; weblogic-ra.xml, I tried changing &lt;jndi-name&gt;MyActiveMQRA&lt;/jndi-name&gt; to &lt;jndi-name&gt;activemq-ra-4.0-SNAPSHOT.rar&lt;/jndi-name&gt; so the 2 JNDI elements would match. The JNDI error was gone but I got new warnings. We're currently looking into these.\n---\nThis is warning mentioned above: &lt;Feb 8, 2006 2:34:12 PM CST&gt; &lt;Warning&gt; &lt;Connector&gt; &lt;BEA-190032&gt; &lt;&lt; MyActiveMQConnectionFactoryJNDI &gt; ResourceAllocationException thrown by resource adapter on call to ManagedConnectionFactory.createManagedConnection(): \"javax.resource.spi.ResourceAdapterInternalException: Failed to create managed connection: java.lang.NullPointerException \"&gt; &lt;Feb 8, 2006 2:34:12 PM CST&gt; &lt;Warning&gt; &lt;Connector&gt; &lt;BEA-190024&gt; &lt;&lt; MyActiveMQConnectionFactoryJNDI &gt; Error making initial connections for pool. Reason: javax.resource.spi.ResourceAdapterInternalException: Failed to create managed connection: java.lang.NullPointerException&gt;\n---\near file state that outputs the error in this comment: http://jira.activemq.org/jira/browse/AMQ-501#action_35520\n---\nHow are we getting on with this one? Any idea if SVN HEAD works or not. A stack trace for the NullPointerException would be handy\n---\nI created the https://svn.apache.org/repos/asf/incubator/activemq/trunk/systest/weblogic-test modules to test MDB and outbund jms connections. They seemed to be working ok. Closing as fixed.\n---\nI am stuck up with this error in weblogic. &lt;&lt; MyActiveMQConnectionFactoryJNDI &gt; Error making initial connections for pool. Reason: javax.resource.spi.ResourceAdapterInternalException: Failed to create managed connection: java.lang.NullPointerException&gt; The following link given by Hiram Chirino does not seem to be active now. On clicking it i get 404 error. \" https://svn.apache.org/repos/asf/incubator/activemq/trunk/systest/weblogic-test \" It would be helpful if the changes to be made to rectify the above mentioned error are mentioned and the link is enabled. Thanks in advance.\n---\ncan you try a later version, say version 5.3.2, this version is known to work ok.\n---\nFWIW, the new location of the weblogic-test is here: https://svn.apache.org/repos/asf/activemq/sandbox/systest/weblogic-test However, I don't know if the systest module has been kept in step with ActiveMQ over the years."}
{"project_id": "ActiveMQ", "bug_id": "13", "source_type": "jira", "label": "Dev/Test", "llm_input_text": "Title: TEST org.apache.activemq.transport.stomp.StompTest FAILED\n\nDescription:\nThis file is an XML representation of an issue\n\n"}
{"project_id": "ActiveMQ", "bug_id": "14", "source_type": "jira", "label": "Build/Dependency", "llm_input_text": "Title: Eclipse project for Core not working\n\nDescription:\nThis file is an XML representation of an issue\n\n"}
{"project_id": "ActiveMQ", "bug_id": "15", "source_type": "jira", "label": "Logic/Workflow", "llm_input_text": "Title: The BrokerService is not setting the taskRunnerFactory property of the TransportConnector.\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nFixed.\n---\nHiram, I've taken the 2/17 SNAPSHOT, and retested the asyncDispatch. It is still not working properly. Without knowing the full pathway of the code, I'm guessing at what the problem is. Here's what I think: Your changed BrokerService.addConnector: +++++++++++++++++++ connector.setBroker(getBroker()); connector.setBrokerName(getBrokerName()); connector.setTaskRunnerFactory(getTaskRunnerFactory()); transportConnectors.add(connector); if (isUseJmx()) { connector = connector.asManagedConnector(getManagementContext().getMBeanServer(), getBrokerObjectName()); registerConnectorMBean(connector); } return connector; +++++++++++++++++++++ This calls the setTaskRunnerFactory, which is what was missing. However, if isUseJmx() is true, then connector is reset / recreated as a ManagedConnector. This resets, at least, the taskRunnerFactory, so it is again null. I'm also concerned, though I did not take the time to examine its usage further to know whether it would be a problem or not, that the line: ++++++++++++++ transportConnectors.add(connector) ++++++++++++++ is bad, right? It is adding the original connector the this map / list, but not the ManagedConnector. Again, I did not track this one down to see if it was a problem or not, but thought it worth mentioning. Kevin.\n---\nI just commited another patch which I hope fixes this. Could you recheck it for me? Thanks! Hiram\n---\nHiram, I had left for the day by the time your message came through. I wil test this morning and let you know. Thanks. Kevin\n---\nHiram, Looks like that did the trick - at least with broker-to-client asyncDispatch. I may have need to set up asyncDispatch between brokers. This should work, right?\n---\nfixed."}
{"project_id": "ActiveMQ", "bug_id": "16", "source_type": "jira", "label": "Build/Dependency", "llm_input_text": "Title: bug in oracle JDBC driver\n\nDescription:\nThis file is an XML representation of an issue\n\n"}
{"project_id": "ActiveMQ", "bug_id": "17", "source_type": "jira", "label": "Stability/Freeze", "llm_input_text": "Title: deadlock in QueueClusterTest\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nThe QueueClusterTest appears to be hanging in Linux platform\n---\nTemporarily excludes the QueueClusterTest so that build process won't hang"}
{"project_id": "ActiveMQ", "bug_id": "18", "source_type": "jira", "label": "Stability/Freeze", "llm_input_text": "Title: deadlock in QueueClusterTest\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nThe QueueClusterTest appears to be hanging in Linux platform\n---\nTemporarily excludes the QueueClusterTest so that build process won't hang"}
{"project_id": "ActiveMQ", "bug_id": "19", "source_type": "jira", "label": "Logic/Workflow", "llm_input_text": "Title: The BrokerService is not setting the taskRunnerFactory property of the TransportConnector.\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nFixed.\n---\nHiram, I've taken the 2/17 SNAPSHOT, and retested the asyncDispatch. It is still not working properly. Without knowing the full pathway of the code, I'm guessing at what the problem is. Here's what I think: Your changed BrokerService.addConnector: +++++++++++++++++++ connector.setBroker(getBroker()); connector.setBrokerName(getBrokerName()); connector.setTaskRunnerFactory(getTaskRunnerFactory()); transportConnectors.add(connector); if (isUseJmx()) { connector = connector.asManagedConnector(getManagementContext().getMBeanServer(), getBrokerObjectName()); registerConnectorMBean(connector); } return connector; +++++++++++++++++++++ This calls the setTaskRunnerFactory, which is what was missing. However, if isUseJmx() is true, then connector is reset / recreated as a ManagedConnector. This resets, at least, the taskRunnerFactory, so it is again null. I'm also concerned, though I did not take the time to examine its usage further to know whether it would be a problem or not, that the line: ++++++++++++++ transportConnectors.add(connector) ++++++++++++++ is bad, right? It is adding the original connector the this map / list, but not the ManagedConnector. Again, I did not track this one down to see if it was a problem or not, but thought it worth mentioning. Kevin.\n---\nI just commited another patch which I hope fixes this. Could you recheck it for me? Thanks! Hiram\n---\nHiram, I had left for the day by the time your message came through. I wil test this morning and let you know. Thanks. Kevin\n---\nHiram, Looks like that did the trick - at least with broker-to-client asyncDispatch. I may have need to set up asyncDispatch between brokers. This should work, right?\n---\nfixed."}
{"project_id": "ActiveMQ", "bug_id": "20", "source_type": "jira", "label": "Logic/Workflow", "llm_input_text": "Title: The BrokerService is not setting the taskRunnerFactory property of the TransportConnector.\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nFixed.\n---\nHiram, I've taken the 2/17 SNAPSHOT, and retested the asyncDispatch. It is still not working properly. Without knowing the full pathway of the code, I'm guessing at what the problem is. Here's what I think: Your changed BrokerService.addConnector: +++++++++++++++++++ connector.setBroker(getBroker()); connector.setBrokerName(getBrokerName()); connector.setTaskRunnerFactory(getTaskRunnerFactory()); transportConnectors.add(connector); if (isUseJmx()) { connector = connector.asManagedConnector(getManagementContext().getMBeanServer(), getBrokerObjectName()); registerConnectorMBean(connector); } return connector; +++++++++++++++++++++ This calls the setTaskRunnerFactory, which is what was missing. However, if isUseJmx() is true, then connector is reset / recreated as a ManagedConnector. This resets, at least, the taskRunnerFactory, so it is again null. I'm also concerned, though I did not take the time to examine its usage further to know whether it would be a problem or not, that the line: ++++++++++++++ transportConnectors.add(connector) ++++++++++++++ is bad, right? It is adding the original connector the this map / list, but not the ManagedConnector. Again, I did not track this one down to see if it was a problem or not, but thought it worth mentioning. Kevin.\n---\nI just commited another patch which I hope fixes this. Could you recheck it for me? Thanks! Hiram\n---\nHiram, I had left for the day by the time your message came through. I wil test this morning and let you know. Thanks. Kevin\n---\nHiram, Looks like that did the trick - at least with broker-to-client asyncDispatch. I may have need to set up asyncDispatch between brokers. This should work, right?\n---\nfixed."}
{"project_id": "ActiveMQ", "bug_id": "21", "source_type": "jira", "label": "Dev/Test", "llm_input_text": "Title: bstat does not pass along settings, like the jmxuri, to the underlying query. Patch enclosed.\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nPatch applied. Thanks Scott!"}
{"project_id": "ActiveMQ", "bug_id": "22", "source_type": "jira", "label": "Other", "llm_input_text": "Title: TwoBrokerTopicSendReceiveTest fails on some platform\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nAdded Thread.sleep() method in message loop creation before producer sends the message so that consumer can catch up"}
{"project_id": "ActiveMQ", "bug_id": "23", "source_type": "jira", "label": "Other", "llm_input_text": "Title: Invalid Acknowledgement on onMessage inside a transaction\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nFixed."}
{"project_id": "ActiveMQ", "bug_id": "24", "source_type": "jira", "label": "Other", "llm_input_text": "Title: 4.0 M4 IndexOutOfBoundException\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nI was experiencing the same exception and tracked it down to a problem in the unmarshal method of the BooleanStream class. Unmarshalling large objects, like stack traces was causing the error for me. I was able to workaround by setting wireFormat.stackTraceEnabled=false on my connection URI. I think the root cause that the 0xE0 bit mask should be 0x80 in the marshal/unmarshal methods but I'm not sure exactly how this code works. I'll attach a patch that worked for me.\n---\nPotential patch to BooleanStream\n---\nCan you review Dave's patch please. If this is valid we need to make similar patches to C# etc\n---\nPatch applied - many thanks Dave! I've added a test case, BooleanTest which demonstrates the problem and validates your patch"}
{"project_id": "ActiveMQ", "bug_id": "25", "source_type": "jira", "label": "Crash/NullPointer", "llm_input_text": "Title: NPE could occur if endpoint factory never creates any endpoints.\n\nDescription:\nThis file is an XML representation of an issue\n\n"}
{"project_id": "ActiveMQ", "bug_id": "26", "source_type": "jira", "label": "Other", "llm_input_text": "Title: when sending 16383 messages over the same connection with caching enabled we get a ClassCastException\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\npatch applied in SVN HEAD"}
{"project_id": "ActiveMQ", "bug_id": "27", "source_type": "jira", "label": "Data/Corruption", "llm_input_text": "Title: Objects in ActiveMQObjectMessage are not always de-serialized and there are side effects when redelivered\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nIssue fixed. To avoid failing the ServiceMix build - I've not yet removed the patch in JCAFlow - but have tested that it works with a properly build activemq-core jar - so whenever you are ready you can remove the workaround in ServiceMix"}
{"project_id": "ActiveMQ", "bug_id": "28", "source_type": "jira", "label": "Build/Dependency", "llm_input_text": "Title: Update to backport-util.concurrent 2.1\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nDone - thanks for the heads up!"}
{"project_id": "ActiveMQ", "bug_id": "29", "source_type": "jira", "label": "Other", "llm_input_text": "Title: InstanceAlreadyExistsException on .war redeploy (if useJmx=\"true)\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nBTW could you describe exactly how you are deploying ActiveMQ in spring please - as there are a few optoins. Are you using the BrokerFactoryBean?\n---\nI am indeed using the BrokerFactoryBean. My spring config looks something like this: &lt;!-- JMS CONFIGURATION --&gt; &lt;bean id=\"brokerContainer\" class=\"org.apache.activemq.xbean.BrokerFactoryBean\" depends-on=\"activeMQConfigurer\"&gt; &lt;property name=\"config\" value=\"classpath:activemq.xml\"/&gt; &lt;/bean&gt; &lt;bean id=\"jmsFactory\" class=\"org.apache.activemq.ActiveMQConnectionFactory\"&gt; &lt;property name=\"brokerURL\" value=\"tcp://localhost:61616\"/&gt; &lt;/bean&gt; &lt;!-- Spring JMS Template --&gt; &lt;bean id=\"jmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt; &lt;property name=\"connectionFactory\"&gt; &lt;!-- lets wrap in a pool to avoid creating a connection per send --&gt; &lt;bean class=\"org.springframework.jms.connection.SingleConnectionFactory\"&gt; &lt;property name=\"targetConnectionFactory\" ref=\"jmsFactory\"/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;property name=\"pubSubDomain\" value=\"false\"/&gt; &lt;/bean&gt; The broker is then configured in activemq.xml like so: &lt;broker useJmx=\"false\"&gt; &lt;persistenceAdapter&gt; &lt;journaledJDBC journalLogFiles=\"5\" dataDirectory=\"#activeMQConfigurer.dataDirectory\" dataSource=\"#activeMQConfigurer.dataSource\"/&gt; &lt;/persistenceAdapter&gt; &lt;transportConnectors&gt; &lt;transportConnector uri=\"tcp://localhost:61616\"/&gt; &lt;/transportConnectors&gt; &lt;networkConnectors&gt; &lt;networkConnector uri=\"static://(tcp://localhost:61616)\" /&gt; &lt;/networkConnectors&gt; &lt;/broker&gt; Let me know if there is any other information you need...\n---\nI've just added the test case ReconnectWithJMXEnabledTest to ensure that all of our MBeans are properly unregistered if you call BrokerService.stop() (which should happen by default if you use the BrokerFactoryBean so AFAIK this issue is now resolved. If you still have an issue, let us know more details on how you are using tomcat, spring and activemq and we can always reopen this issue\n---\nIncidentally if this still is an issye - is your Spring application context being closed? Do you see any logging when you undeploy the WAR? Which mechanism are you using in web.xml to load spring\n---\nHi! I use ActiveMq 5.2.0. In web.xml spring context get by org.springframework.web.context.ContextLoaderListener Persistent = false And I have exception: javax.jms.JMSException: Could not create Transport. Reason: javax.management.InstanceAlreadyExistsException: org.apache.activemq:BrokerName=localhost,Type=Broker at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:35) &#91;org.apache.activemq-5.2.0.jar:5.2.0&#93; at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:239) &#91;org.apache.activemq-5.2.0.jar:5.2.0&#93; at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:252) &#91;org.apache.activemq-5.2.0.jar:5.2.0&#93; at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:224) &#91;org.apache.activemq-5.2.0.jar:5.2.0&#93; at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:172) &#91;org.apache.activemq-5.2.0.jar:5.2.0&#93; Could you please help me with my problem. Thx!\n---\nHello there. Sorry to bring this up again, but I am probably experiencing the same issue here 6 years later. System setup: Linux Mint 17.3 x64 Tomcat 7 with activemq-all.jar (v5.10.0) in tomcat7/lib Tomcat context.xml &lt;Resource name= \"jms/myConnectionFactory\" auth= \"Container\" type= \"org.apache.activemq.ActiveMQConnectionFactory\" description= \"JMS Connection Factory\" factory= \"org.apache.activemq.jndi.JNDIReferenceFactory\" brokerURL= \"vm: //localhost\" brokerName= \"LocalActiveMQBroker\" userName= \"activemq\" password= \"activemq\" useEmbeddedBroker= \" false \" /&gt; Using JMS with Spring 4.2.5 (Spring Integration JMS &amp; Java DSL config). When invoking JMS outbound adapter I get the above-mentioned InstanceAlreadyExistsException . If I add useJmx=\"false\" , the exception disappears. To answer the questions for jstrachan : Spring context is closed. I tried clean deploy and tomcat restart as well. I don't see any logging related to AMQ other than a clash of bindings (not related I suppose): SLF4J: Class path contains multiple SLF4J bindings. SLF4J: Found binding in [jar:file:/usr/share/tomcat7/lib/activemq-all.jar!/org/slf4j/impl/StaticLoggerBinder.class] SLF4J: Found binding in [jar:file:/ var /lib/tomcat7/webapps/ROOT/WEB-INF/lib/logback-classic-1.0.13.jar!/org/slf4j/impl/StaticLoggerBinder.class] SLF4J: See http: //www.slf4j.org/codes.html#multiple_bindings for an explanation. SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder] I load multiple xml classpath files including spring-context.xml in my web.xml. I also import some JavaConfig beans and use aop proxy. Any ideas?"}
{"project_id": "ActiveMQ", "bug_id": "30", "source_type": "jira", "label": "Crash/Memory", "llm_input_text": "Title: Streamlets cause OutOfMemoryError with non-persistent embedded broker\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nmoved into activemq package and assigned copyright to Apache. This test should probably catch OOM and assert rather than just crashing...\n---\nRoot case: When client used a ranged ack, only the last message in the range was being deleted from the message store. For the peristent store case, this could be the cause of some other performance issues since the journal and long term were holding on to messages longer than they needed to."}
{"project_id": "ActiveMQ", "bug_id": "31", "source_type": "jira", "label": "Network/APIError", "llm_input_text": "Title: Broker is not re-connecting to a network of brokers after going down and then being brought back up\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nThanks for the report! Fixed.\n---\nI did some testing this morning and here is what I found: 1. The broker is re-connecting. Looking at the connection in the JMX console all the brokers can see each other. This was not the case before. 2. The brokers that were not brought down are throwing the below exception when the broker re-connects. 3. Running the test again after the broker comes up only about 1/3 of the message make it to the broker that was brought back up and then it . INFO: Async error occurred: javax.jms.InvalidClientIDException: Broker: bfe-grieg - Client: NC_bfe-holst_inboundbfe-grieg already connected javax.jms.InvalidClientIDException: Broker: bfe-grieg - Client: NC_bfe-holst_inboundbfe-grieg already connected at org.apache.activemq.broker.region.RegionBroker.addConnection(RegionBroker.java:151) at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:64) at org.apache.activemq.advisory.AdvisoryBroker.addConnection(AdvisoryBroker.java:67) at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:64) at org.apache.activemq.broker.MutableBrokerFilter.addConnection(MutableBrokerFilter.java:76) at org.apache.activemq.broker.AbstractConnection.processAddConnection(AbstractConnection.java:500) at org.apache.activemq.command.ConnectionInfo.visit(ConnectionInfo.java:106) at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:196) at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:62) at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:88) at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:70) at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:75) at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:44) at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:55) at org.apache.activemq.network.DemandForwardingBridgeSupport.startLocalBridge(DemandForwardingBridgeSupport.java:175) at org.apache.activemq.network.DemandForwardingBridgeSupport$3.run(DemandForwardingBridgeSupport.java:147)\n---\nBTW I wonder if the exception you are getting is related to this fix... http://jira.activemq.org/jira/browse/AMQ-600 which was causing InvalidClientIDException to be thrown when network errors occur by handling the IOException in the wrong way\n---\n(BTW that issue was fixed in the last hour or so in SVN)\n---\nI pulled the latest code with the fix for AMQ-600 and I am still seeing the following issues: 1. The brokers that were not brought down are still throwing the InvalidClientIDException when the broker that was brought down tries to re-connect. 2. Only about 1/3 of the message make it to the broker that was brought back up after running the test again.\n---\nI've tried to setup a similar scenario. And I do see some message loss but when the broker is taken down but that can be expected since the messages are not persistent. Once the broker is brought back online, processing continues without message loss. When a broker is shutdown, any transient messages he had in it's queues will be dropped. Do you think this could explain the lost messages you've been seeing?\n---\nFixed."}
{"project_id": "ActiveMQ", "bug_id": "32", "source_type": "jira", "label": "Network/Timeout", "llm_input_text": "Title: ActiveMQConnection ignores interrupts (sometimes)\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nI think I've got them all licked now - let me know if you can find any more I've missed; but I think I got them all"}
{"project_id": "ActiveMQ", "bug_id": "33", "source_type": "jira", "label": "Network/Timeout", "llm_input_text": "Title: Broker will not release a persistant clientId if a network connection is broken then restored at the TCP layer from a remote client\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nThis should be now fixed in SVN HEAD - could you confirm using tomorrows SNAPSHOT build that your issues is resolved now please? Basically the code was catching IOExceptions and treating them as service exceptions (e.g. security erorrs etc) and trying to send an error response back, rather than just disposing the connection and so freeing up the clientID. Let us know if this issue is not fixed and we can reopen this issue."}
{"project_id": "ActiveMQ", "bug_id": "34", "source_type": "jira", "label": "Network/Timeout", "llm_input_text": "Title: Broker will not release a persistant clientId if a network connection is broken then restored at the TCP layer from a remote client\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nThis should be now fixed in SVN HEAD - could you confirm using tomorrows SNAPSHOT build that your issues is resolved now please? Basically the code was catching IOExceptions and treating them as service exceptions (e.g. security erorrs etc) and trying to send an error response back, rather than just disposing the connection and so freeing up the clientID. Let us know if this issue is not fixed and we can reopen this issue."}
{"project_id": "ActiveMQ", "bug_id": "35", "source_type": "jira", "label": "Build/Dependency", "llm_input_text": "Title: TaskRunnerFactory from broker is not carried along to Broker-to-Broker connections\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nBTW there is a local and remote broker config in XML here which creates a demand forwarding bridge... https://svn.apache.org/repos/asf/incubator/activemq/trunk/activemq-core/src/test/resources/org/apache/activemq/network/ e.g. https://svn.apache.org/repos/asf/incubator/activemq/trunk/activemq-core/src/test/resources/org/apache/activemq/network/localBroker.xml\n---\nBTW DemandForwardingBridge has a bean property \"dispatchAsync\" if you need to change that?\n---\nYes, I need to be able to set some properties, including dispatchAsync, for DemandForwardingBridge. However, the link you give above configures a NetworkConnection, not a DemandForwardingBridge. Am I missing something??\n---\nIts a bit confusing isn't it So the NetworkConnector creates the DemandForwardingBridge; so you should be able to configure the it with the things you need like &lt;networkConnector dispatchAsync=\"true\"&gt; etc (BTW true is the default in NetworkConnector.java) There are a few different kinds of bridges available depending on the configurations of the &lt;networkConnector&gt;. For added fun, the NetworkConnector class just got refactored; so the concrete class that actually creates the bridge is DiscoveryNetworkConnector - see the createBridge() method for details of how it figures out which bridge to use. For demand forwarding I think you need to set &lt;networkConnector conduitSubscriptions=\"false\" ...\n---\nBTW I tried applying your patch and got a number of failures &#91;junit&#93; &#91;ERROR&#93; TEST org.apache.activemq.broker.policy.RoundRobinDispatchPolicyTest FAILED &#91;junit&#93; &#91;ERROR&#93; TEST org.apache.activemq.broker.policy.SimpleDispatchPolicyTest FAILED so we need to think a bit more before applyting this one; maybe the change has to be localised to only VMTransports created via the network connectors\n---\nThanks, James. My test system is experiencing problems at the moment, so I hope I can soon try out the settings as you describe. Thanks for trying out the change. I only tried within my own usage patterns, and all seemed fine. I will eagerly await the official change\n---\nJames, The config settings on networkConnector works famously, as of the 3/17/2006 SNAPSHOT (it did not work against 3/15/2006 SNAPSHOT). So, just need the official change for the TaskRunnerFactory so that dispatchAsync between brokers actually takes place.\n---\nFancy taking a stab at this one? Was wondering if we should pass along the task factory always, but then allow each transport to decide if its gonna use async dispatch using a flag?\n---\npatch committed.\n---\nI'll try this on my end tomorrow after the SNAPSHOT build."}
{"project_id": "ActiveMQ", "bug_id": "36", "source_type": "jira", "label": "Other", "llm_input_text": "Title: maxInactivityDuration does not seem to work properly\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nHi Kevin, The maxInactivityDuration setting has to match on both sides of the connection. If they do then there is no need to make KeepAlives request a reply since the other side will send a KeepAlive if his side of the connection remains idle for too long. Could you attache the broker configuration scripts you using? Thanks!\n---\nSo, in the case of the client setting the maxInactivityDuration value on its connector url, you are saying that the broker must have a maxInactivityDuration setting (with the same value) on the transportConnector url? Not quite sure why you would want to make this restriction. Seems problematic with regards to potential timing issues. Also, if you set the maxInactivityDuration on the transportConnector url, then when you have two brokers connected to each other, they continuously drop connections and resubscribe. If you also set maxInactivityDuration on the networkConnector url for each broker, then the brokers still drop connections and get whacked out with subcriptions. I'll attach broker XML configs in a bit.\n---\nAttached are my broker XML configs. We run embedded brokers, but have external access to them (i.e. the tcp connectivity). I've tried with and without the maxInactivityDuration setting on the networkConnector url.\n---\nHi Kevin, Yeah, I agree, making sure everybody is using the same setting is a bit of a problem. I working on a change right now that will allow the setting to be negociated by the 2 sides of the connection when it's initialy established. If the server setting is x and the client setting is y, then the inactivity duration for the established connection will be calculated at min(x,y). This way the client and server do not have to have their configs match up exactly. I'll update the issue once the change is commited. Regards, Hiram\n---\nHowever, that sounds like both sides would still have to explicitly make the setting, right?\n---\nThe change has been commited. You now configure the maxInactivityDuration on the wireFormat. So on tcp connection, it would look like: tcp://localhost:61616?wireFormat.maxInactivityDuration=10000\n---\nI'll try this out tomorrow after the SNAPSHOT build.\n---\nTried this out yesterday and it seems to work perfectly. I was able to freeze brokers and have them disconnect from each other, but recover after unfreezing. Same for clients. Nondurable messages are still queued to a disconnected broker, but that can be mitigated by having the asyncDispatch and an eviction strategy to your liking. I'd rather see the subscriptions dropped, and no further queuing, but maybe that wasn't doable.\n---\nWe could always raise another feature request JIRA for the subscription dropping; also for nondurable messaging we have the option to drop old messages if consumers slow down. So is this issue resolved now?\n---\nI'm very happy with the eviction policy features. We will make extensive use of that (btw, we may want to implement an eviction policy at some point - any way to do that ?). However, I can raise a feature request for the subscription dropping. One thing I forgot to mention in my comment above is that the broker networkConnector url config changed again. You now have to explicitly put on failover if you want broker-to-broker connections to use failover. That dropped off at one point (I was trying to find where you and I conversed about that - it was some other JIRA entry), where you would get double failover transport decorators, thus causing problems with shutdown. You said that static would do the same thing. Anyway, not a big deal, but I believe you had updated some documentation regarding this. So, you might want to revisit that again.\n---\nDoh! Yes, issue resolved!"}
{"project_id": "ActiveMQ", "bug_id": "37", "source_type": "jira", "label": "Docs/Missing", "llm_input_text": "Title: The README.txt file contains references to activemq.org\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nSimple patch that corrects URLS in readme file.\n---\napplied"}
{"project_id": "ActiveMQ", "bug_id": "38", "source_type": "jira", "label": "Other", "llm_input_text": "Title: etc\\project.xml needs to be updated\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nfixed. The URL for the list archive cannot be determined yet since nabble has not started archiving the list yet."}
{"project_id": "ActiveMQ", "bug_id": "39", "source_type": "jira", "label": "Network/APIError", "llm_input_text": "Title: Temp Destination definition not sent across network bridge to support request/reply model?\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nActually when debug level set for broker, logs show destinations in fact are being established on both sides of the bridge. So begs to question why responding client is informed that destination is deleted.\n---\nAttachment contains 4 log files: Two broker logs from interconnected brokers Log from the requestor Log from the responder Requestor, responder and on broker all run on host roadrash so timestamps are exact. Timestamps for host harly broker within one second.\n---\nI had this problem with 3.0 and submitted the following to the mailing list. I was getting the same \"cannot write to a deleted destination...\" error. I think this is a bug in the way Network Message Bridges for TemporaryDestinations are named. In my debugger, I see that the physical name of a TemporaryTopic is (for example): &gt; TemporaryTopic-{TD {ID:kmurphynb.alleanzasalute.it-32917-1134582426027-1:0} TD}ID:kmurphynb.alleanzasalute.it-32917-1134582426027-6:0 In a network of brokers, a network message bridge is opened from the connection which spawned this TemporaryTopic to all others in the network &#8211; apparently sometimes using this physical name: &gt; 11:48:19 INFO started NetworkMessageBridge for destination: TemporaryTopic-{TD {ID:kmurphynb.alleanzasalute.it-32917-1134582426027-1:0} TD}ID:kmurphynb.alleanzasalute.it-32917-1134582426027-6:0 &#8211; NetworkChannel: NetworkChannel { , uri = 'reliable:tcp://localhost:61617' , remoteBrokerName = 'node2' } and other times prefaced with the class name: &gt; 11:49:37 INFO started NetworkMessageBridge for destination: ActiveMQ.Advisory.TempDestinations.temp-topic.TemporaryTopic-{TD {ID:kmurphynb.alleanzasalute.it-32924-1134582576664-1:0} TD}ID:kmurphynb.alleanzasalute.it-32924-1134582576664-6:0 &#8211; NetworkChannel: NetworkChannel { , uri = 'reliable:tcp://localhost:61617' , remoteBrokerName = 'node2' } &gt; The problem is that in either case, the physical name of the TemporaryTopic is used to \"validate\" it. So when I try to reply to the second TemporaryTopic shown above, I get: &gt; ERROR - Thread-67 cosm.cee.component.messaging.impl.jms.JMSMessagingChannel send &gt; javax.jms.JMSException: Cannot publish to a deleted Destination: TemporaryTopic-{TD {ID:kmurphynb.alleanzasalute.it-32924-1134582576664-1:0} TD}ID:kmurphynb.alleanzasalute.it-32924-1134582576664-6:0 Note difference in the names. I got around this by creating a new, permanent Topic (or Queue &#8211; I found the same problem adn solution with both TemporaryTopics and TemporaryQueues) with a random (guaranteed random in my application's scope) String for a name. It appears that for a non-temporary Destination, the name of the destination is always used for the message bridge: &gt; 12:57:37 INFO started NetworkMessageBridge for destination: 7E3829D1-6CD3-11DA-B666-CA9B35A911B1 &#8211; NetworkChannel: NetworkChannel { , uri = 'reliable:tcp://localhost:61617' , remoteBrokerName = 'node2' } In this way I get the same effect &#8211; a unique destination, whose presence is only known to recipients of a particular message, and whose lifespan is that of it's connection. I would prefer to use TemporaryTopics and TemporaryQueues, though. Any thoughts?\n---\nResolved"}
{"project_id": "ActiveMQ", "bug_id": "40", "source_type": "jira", "label": "Other", "llm_input_text": "Title: ClassCastException when jaasAuthenticationPlugin is used with broker networks\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nThis is due to the change were we now marshall the additionalPredicate field on the consumerInfo objects. Should be easy to fix so that the since the plugin does not need to really use that field.\n---\nFix should make it into the next release."}
{"project_id": "ActiveMQ", "bug_id": "41", "source_type": "jira", "label": "Error", "llm_input_text": "Title: Acked persistent messages redelivered after broker restart.\n\nDescription:\nThis file is an XML representation of an issue\n\nDiscussion:\nmaking a blocker since this is a very nasty bug.\n---\nCommitted fix in revision 389258"}
